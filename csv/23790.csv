"通过对现有停车场状况的分析，采用基于Android与无线WiFi相结合的智能停车场管理系统的方案，实现停车，反向寻车，计时缴费，安全告警，用户信息管理等功能，提高停车场的服务效率和水平，安全告警功能更加保证了车主车辆的安全性，节省了用户的时间，使停车管理系统朝着智能的方向发展。 关键词 :WiFi实时定位，Android平台，智能停车场 Copyright © 2018 by authors and Hans Publishers Inc. This work is licensed under the Creative Commons Attribution International License (CC BY). http://creativecommons.org/licenses/by/4.0/"
"伴随着中国社会的快速发展，广大人民群众收入的提升，汽车的数量在不断增长。目前传统的停车场已经不能满足用户旺盛的停车需求，大规模的停车场开始不断扩建。虽然大型停车场的扩建增加了更多的停车位，但是停车场的车位过多，面积过大，导致驾驶员不识方向，盲目寻找车位，浪费时间与精力，怎样快速找到停车位，以及怎么快速反向寻车又成了新的问题。目前的停车场在寻找车位上主要侧重于场内LED指示牌来进行诱导 [ 1 ] ，而在反向寻车上的实现方式又基于读卡器，基于无线电射频技术(如RFID)，这些实现方式需要在停车场设置额外的大型定位设备，需要在出入通道设置固定的终端查询机，查询机的数量和摆放位置影响了便捷性，制约了普及和推广，也普遍存在基础设施投资大、维护困难、用户操作繁琐等问题。传统停车场一般选用现金支付的手段，大多数是人工收费，采用人工收费最大的漏洞就是管理员不能实时知道收费的情况，不能及时统计报表，浪费人力物力，成本高 [ 2 ] 。因此一个高效性、智能化的停车管理系统应运而生 [ 3 ] [ 4 ] 。而对定位导航方案的研究可以合理快速的进行方向的指引，既方便了管理者对停车场的管理，又减少了车主的时间，是实现智能化停车场管理的一个方面，可以在一定程度上解决停车场效率，车位利用率，安全和管理上的智能化的需求。文献 [ 5 ] 研究了基于蓝牙的室内智能停车场管理系统设计，文献 [ 6 ] 研究了基于iBeacon技术的室内定位系统的研究和实现，文献 [ 7 ] 研究了智能停车场的收费管理系统，文献 [ 8 ] [ 9 ] 分别研究了Zigbee技术和RFID技术在室内停车管理的应用。通过表1对常用室内定位技术进行对比分析，选择可行性高的定位技术来完善传统停车场的不足，将WiFi定位技术与当下热门的Android软件相结合 [ 10 ] ，顺应时代发展潮流，是使停车场的停车服务做到安全、简便、高效的一种新方案。"
"本系统是基于位置服务的应用，主要体现对车位，车主的定位上。对目前的智能停车场的现状进行 Table 1 室内定位技术 费用 精度 属性 蓝牙 高 3~25 m 低功耗，成本高，布局复杂度也高。 ZigBee 低 1~2 m 低功耗，低成本，短距离的定位技术， 但容易受到环境干扰，稳定性较差。 红外线室内定位 高 5~10 m 通过光学传感器接收到的红外线进行定位，仅能视距传播， 无法穿越障碍物，仅适用于短距离传播，且各处安装接收天线造价较高。 Wi-Fi室内定位 低 2~50 m 已被广泛应用，易于安装，需要基站少，定位精度高，成本低， 信号范围大，适用性很强。 表1. 室内常用定位技术比较 调查后，确定了本管理系统的几个基本要求：用户信息管理，进入停车场与离开停车场信息必须一致方可离开停车场，保证用户信息以及车辆安全。用户停车时能快速找到停车位，并能保证用户在离开期间保证进行监控，实现安全告警功能，同时使用户在返回停车场时能及时找到自己的爱车。离开停车场的同时可以不停车进行缴费，完成计时缴费功能。该系统的业务流程如图1所示。 用户下载APP进行附近停车场信息查询，进行室外导航，进入目标停车场后可以完成寻车位，反向寻车，计时缴费等功能。 图2的硬件部署中，用户和管理员使用不同功能权限的移动终端应用程序,不同的角色通过对应用程序的操作来与服务器系统进行交互，实现系统的业务逻辑。除此之外，用户通过已经建立的连接向服务端发送移动端后台搜索的附近AP信号强度值，继而从服务器上获取相应的基于位置的服务。服务器端响应来自移动客户端的请求，作为整个系统的核心部件，将会部署在系统管理中心的服务器上，实现了较为复杂的计算，同时与系统的其他部分进行交互。被部署在室内的WiFi路由设备是停车场进行定位服务的基础硬件设备，其不间断发送RSSI信号，形成定位传感网络。视频检测车位系统以及不停车闸口收费系统等其他辅助系统完善了智能室内停车场的功能。"
"系统采用基于信号强度的指纹定位技术，通过IEEE802.11标准无线网络对空间进行定位。在系统实施上又分为离线建库和在线定位两个阶段 [ 11 ] 。采集装置易于安装，需要基站少，成本低，信号范围大，适用性很强。运用定位精度高、速度快的位置指纹技术，可实现对车辆的精确定位。原理见图3。 在离线阶段，首先根据室内环境建立对应室内地图，并绘制停车位详细区域分布图。建立指纹数据库的流程如下： 移动终端在参考位置点扫描、每个位置点扫描多次，对每个位置点的RSSI取平均值，收集AP的RSSI值，以构建指纹数据库。 图1. 系统业务流程图 图2. 系统技术架构图 服务器中选用高斯滤波方法对每个AP的信号强度值做滤波处理减小异常值的影响，将RSSI的取值范围定在 [ μ + 0.15 σ , μ + 0.39 σ ] 。其中： δ = 1 n − 1 ∑ i = 1 n ( RSSI i − 1 n ∑ i = 1 n RSSI i ) 2 (1) μ = 1 n ∑ i = 1 n RSSI i (2) 将范围内的信号强度值取出求其算术平均值作为该AP的信号强度值。 RSSI i = 1 n ∑ i = 1 n RSSI i (3) 最后，将(3)式求得各测试点的RSSI强度值和及其测试点的坐标存储到数据库中。 在线定位阶段中，通过移动端实时测量可见WiFi热点的信号强度信息，多次采集至服务器，计算其平均值与离线阶段建立的位置指纹库中的记录数据进行匹配，返回给用户，找到定位结果。图3为WiFi定位原理。  关于地图的绘制，这里采用的是HTML5的Canvas绘制的。这是HTML5非常重要的一个特性。该项目是将地图数据专门放到一个mapinfo.js文件里面的，使用一个数组进行保存，最后遍历这些数据，用一个方法Draw Block将地图绘制出来。依赖canvas-zoom.js实现地图的缩放功能，最核心的两个方法主要是animate和gesture Pinch Zoom，它们分别负责地图的刷新重绘以及缩放的实现，降低互联网的传 图3. WiFi定位原理图 输宽带占用率，提升了图片的显示精度。  用户可以直接查看推荐的附近停车场，也可以输入查询，服务器会根据用户输入信息进行查询，并返回相对应的停车场信息和车位信息。该模块的Activity的UI采用拥有on Click()的List View控件，直接分类罗列停车场的名称、车位信息、费用等相关信息，on Click()的使用可以让用户可以直接点击选择操作。在手机端接收到用户的具体需求之后，经过分析给用户提供实时的车位信息并规划导航路线，提高停车效率。详细流程见图4。  用户根据自己的位置加载合适的地图，获得车辆位置，同时通过WiFi指纹定位不断的更新自己的位置，不仅可以查看自己的停车位置，还可以查看之前的停车记录。当选择反向寻车功能时，移动端会定位用户当前位置，并规划到停车位置的导航路线。该模块采用Park Record List Adapter的onclick()方法，用户进行点击后跳至location Task()方法进行定位，同时系统中的intent方法转入Map Activity返回地图界面给用户，如需导航下一步直接跳至navigation()方法进行路径规划。反向寻车模块的实现流程见图5。  车主离开停车场前，系统支持用户生成订单并进行缴费。出口的ETC通道通过查询服务器数据库中该用户的费用支付情况决定是否让其通过。在实现过程中，移动端向服务器请求生成支付订单，用户一旦确认支付就调用SDK调起支付平台，完成移动端的金额付款，服务端接收到响应之后更新数据库中该用户订单状态，将结果显示在移动终端中。客户端的订单支付模块的实现流程如图6所示。 图4. 车位引导流程图 图5. 反向寻车流程图 图6. 订单支付流程图"
"作为智能交通的实现方式之一，基于WiFi定位的室内停车系统已经成为当今社会信息化发展的组成部分 [ 12 ] [ 13 ] 。从停车场外引导，到停车场内的车位引导，再到用户反向寻车，本系统通过将WiFi室内定位技术与室内停车管理系统相结合，为用户提供室内导航、寻车等服务，解决了大型复杂停车场寻车难题。利用位置指纹法定位算法，对移动端用户的位置实现实时准确定位。并且在“互联网”停车的环境下，引导用户线上支付。从停车场管理者角度而言，此系统大大提高了停车场的管理效率，降低了管理成本，提高了运行效率，从用户角度来说，该停车管理系统降低了等待时间，方便了用户出行，保证了用户爱车的安全。"
