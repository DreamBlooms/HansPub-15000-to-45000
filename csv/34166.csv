"电池动力汽车作为新型环保型汽车受到了广泛关注，电池管理系统作为纯电动汽车稳定高效运行的保障，对纯电动汽车的发展起着关键作用。均衡技术可以大大减小电池组中各单体电池之间的差异，有效防止过充电和过放电，维持电池组的均衡，从而延长电池组的使用寿命，也极大地提高电池的使用效率。本文利用电池管理系统来分析动力电池过去充放电纪录数据，获得电池状态的重要信息，通过分析数据中所获知的电池状态还能辅助设定电池均衡机制，改善电池均衡常发生的电压量测不准问题，从而可加大均衡电流，并加速电池均衡速度。 关键词 :电池管理系统，动力电池组，状态分析，均衡机制 Copyright © 2020 by author(s) and Hans Publishers Inc. This work is licensed under the Creative Commons Attribution International License (CC BY 4.0). http://creativecommons.org/licenses/by/4.0/"
"2016年，我国汽车产销突破2800万辆，2019年，销量2500万辆，其中新能源汽车销量为130余万辆，虽然近年来我国整车企业的研发能力不断增强，但是还要看到在汽车关键零部件领域的研发和产业基础与国外领先水平相比差距还很明显，政府意识到要提高中国汽车工业的整体水平，必须将重点放到了新能源汽车上。目前，全球各大国都将发展新能源汽车作为重要战略。我国新能源汽车发展迅速，去年我国新能源汽车(PHEV & EV)销量达到50.7万辆，成全球第一市场，中国新能源汽车增长及市场规模如图1所示。新能源汽车的迅速发展给电池管理系统(BMS) [ 1 ] [ 2 ] [ 3 ] 发展带来重大机遇，动力电池是电动汽车重要的能量存储装置和动力来源，直接影响整车的安全性。 图1. 中国新能源汽车增长速度及市场规模 动力电池作为混合动力汽车及纯电动汽车中的关键部件，在车辆中承担着能量存储和释放的重任。对于插电式混合动力汽车和纯电动汽车来说，其动力系统的工作电压通常为100多伏至数百伏，动力电池均由许多额定电压和容量都很小的单体电池通过串、并联组合而成。由于电池这一电化学能量存储装置的生产工艺及材料无法保证产品性能的一致性，而且在电池使用过程中，随着充放电循环的不断增加也会使电池的电压、SOC (荷电状态)、内阻等参数的不一致性越来越大；同时，锂电池的工作特性和结构对其使用过程的要求也很高 [ 4 ]，一次过放电或过充电就可能导致电池的失效，甚至引发电池燃烧、爆炸等危险，因此对锂电池的管理显得尤为重要 [ 5 ] - [ 10 ]。对于车用动力电池的管理系统，其公认的主要职责 [ 11 ] [ 12 ] [ 13 ] 包括以下几点：1) 电池的电压、电流、温度等状态参数的实时检测；2) 电池SOC的估算；3) 电池的健康状态(State of Health, SOH)估算；4) 电池的充放电控制和电量均衡；5) 电池组的热管理、故障诊断及功能安全保护；6) 电池管理系统的数据通信和交互等。这其中比较关键的技术主要集中在电池SOC的估算及电池的电量均衡两方面。随着动力电池生产制造水平的提高和需求量的急剧增长，电池管理系统的组织架构也变得庞大复杂，尤其是新能源汽车的应用升温加速了电池管理系统的研发。动力电池的均衡管理是动力电池系统设计研究的重要内容之一，近年来国内外学者提出了多种主动均衡的方式。根据电池单体能量的转移方式可分为电感式、电容式、变压器式和其他开关电路拓扑的方式。发达国家对电池管理系统的研究起步较早，德国已经有比较成熟的BMS；国内已有公司研发了带有“主动均衡、无线传输”核心功能的BMS产品，较为显著地解决了锂离子动力电池组不一致性的问题。 锂电池单体需要通过串、并联的方式以多种组合形式形成合适的电池模组。受工业生产和工艺水平的限制，动力电池存在细微的不一致性，而外界环境变化引起的电池内阻、容量的变化会加剧这种不一致性，导致电池负载能力和使用能力的进一步下降。为了提高电池单体的一致性，提高电池能量利用率，必须对电池单体间的不一致性进行均衡管理。 本文为满足电动汽车工作时的大电流和高电压等需求，通过电池管理系统所收集到的数据加以分析，并推测出电池很难判别的电池状态。若能善用我们从管理系统中所能收集到的数据，那将有助于了解电池的状态，让电池管理系统的功能更齐全。"
"电池管理系统(Battery Management System, BMS)，通过检测动力电池组中各单体电池的状态来确定整个电池系统的状态，并根据它们的状态对动力电池系统进行对应的控制调整和策略实施，实现对动力电池系统及各单体的充放电管理以保证动力电池系统安全稳定地运行。典型电池管理系统拓扑图结构主要分为主控模块和从控模块两大块。具体来说，由中央处理单元、数据采集模块、数据检测模块、显示单元模块、控制部件等构成。一般通过采用内部CAN总线技术实现模块之间的数据信息通讯。基于各个模块的功能，BMS能实时检测动力电池的电压、电流、温度等参数，实现对动力电池进行热管理、均衡管理、高压及绝缘检测等，并且能够计算动力电池剩余容量、充放电功率以及SOC状态。  SOC表示电池的荷电状态，是用来反映电池的剩余电量。SOC由电池的剩余容量与基准容量的比值来表示： SOC = Q 1 / Q 0 (1) 式中，Q 1 为电池剩余容量；Q 0 为基准容量。 以SOC作为电池组均衡的标准，首先将电池组中各个单体电池的SOC的平均值作为均衡目标。当电池组充放电的时候，实时监测各单体电池的荷电状态，当检测出与其他电池SOC相差较大的电池时，启动电池均衡系统，进行均衡管理，直至差值小于设置的阈值。  以电压作为均衡的判断标准的前提是系统能够采集到精确的电池电压，当单体电池中的最大压差大于阈值电压时，启动均衡系统，通过控制策略以保证各个单体电池电压保持大致相同。 经实验分析表明，电池在充电的时候，刚开始时电池电压曲线斜率较大，充电速度快。当电池接近充满电时，其电压的曲线斜率平缓，充电速率降低；电池在放电时，起初各电池电压变化幅度较小，接近放完电时，电压变化幅度很大，因此从电池电压的曲线上就可以很直观地看出电池是否有过充电和过放电现象。当检测到各个电池电压不相同时，启动均衡控制系统使个别电池停止充电或者放电，从而防止了个别电池发生过充电或过放电，这样保护了电池，延长电池组的寿命。  以电池SOC为均衡标准虽然具有很好的均衡效果且控制简单，是一种较为理想的均衡，但只局限于理论上可行。目前世界上还没有能够准确计算电池SOC的方法，导致电池SOC的检测结果存在很大误差，这种均衡判断标准短时间不会采用。虽然现在利用建立电池模型可以估算电池的SOC，但模型十分复杂，加上与电池的物理化学过程有关，对估算电池的SOC处理器要求很高，使得其应用受到了限制。由于电池电压易检测并且比SOC测量精度要高得多。所以，目前大多采用电池电压为均衡的标准。"
"每个电池组在刚出厂时，都会选用特性较相近的电池单元做串联或并联，但电池经久放或多次使用后，容量会逐渐减少，称之为电池老化。这种现象会使得电池间状态差别变大，这时候我们需要电池管理系统来做调整。电池的总体容量的输出受限两种情况，第一种是当串联的电池组中，其中有一个电池单元因老化而容量小于其它电池单元，这个电池单元会最先充饱至截止电压及放电至截止电压，电池管理系统为了保护这个电池单元不会过充或过放而切断整个回路，这种情况无论在怎么作电池均衡，电池组所能放出的电容量也不会增加，所以电池组的容量就等于最低容量的电池单元，若电池老化太严重，电池容量不及原先的80%时，就有更换电池单元的必要。第二种情况是电池组因久放或其他原因，电池单元彼此间的电池电量状态(SOC)不一样，例如一组标称容量为6000 mAh的电池，若电池单元A比电池单元B少了1000 mAh，充电时电池单元B先充至过充截止电压，电池组停止充电，但电池单元A与单元电池B的容量有1000 mAh，所以只有5000 mAh的电容量，因此在放电时，当电池组放出5000 mAh的容量后，电池单元A会先放至过放截止电压，电池组就会停止放电，这样电池组就少了1安时的容量，若这种情况可依靠电池均衡系统将电池单元之间容量的差距渐渐缩小，电池组就能回复原先的容量，不需要更换电池单元。 磷酸锂铁(LiFePO 4 )电池的特色是电压大部分都维持在3.3 V左右，只有快充饱或快没电时电压才会明显变化，因此很难探查出电池间的不均衡，且大部分的信息需接上计算机才能观察，如果是装置在无仪表显示的负载上，更无法判别。就算接上计算机后还需再做充放电，并对每个电池单元逐一检查，甚是麻烦。 本文提出一个新的思路，以此对电池状态做快速判断，能知道是电池电量状态不均衡或是电池单元的过度老化影响电池容量，甚至还可以改善电压均衡的模式，让电池管理系统更加完善。将电池充放电的纪录存在内存中纪录的方式如图2。纪录了几个必要的信息过充电压(Cell Over Voltage, COV)电池的 ID、过放电压(Cell Under Voltage, CUV)的电池ID、剩余容量(Remaining Capacity, RM)、满充容量(Full Charge Capacity, FCC)，并从纪录到的数值去做分析。第一次充放电的FCC值是根据出厂时的标称容量做手动设定，当电池做完一组完整的充放电后将会跟新FCC的数值。左边为充电结束时瞬间的纪录，右边为放电结束时瞬间的纪录。首先定义均衡结束的状态如表1电池状态(a)为电池容量最少的状态，因其充放电时都最先达到COV和CUV的电压截止条件。电池状态(b) Cell 5和Cell6轮流出现在COV ID和CUV ID中出现，代表Cell5和Cell6为电池组中容量最少且容量相近。这里称均衡结束的状态为已均衡，代表无需再作电压均衡，后面会有详细的解释。 图2. 健康电池的充放电容量纪录 Table 1 ID(a) 第一次 第二次 第三次 第四次 第五次 ID(b) 第一次 第二次 第三次 第四次 第五次 过充电压ID Cell5 Cell5 Cell5 Cell5 Cell5 过充电压ID Cell5 Cell5 Cell6 Cell6 Cell6 过放电压ID Cell5 Cell5 Cell5 Cell5 Cell5 过放电压ID Cell6 Cell5 Cell5 Cell5 Cell6 表1. 电池状态 再来定义均衡结束的状态如表2，在本文称之为未均衡，意指仍需以均衡系统来调整容量。表2的电池状态(c)的COV ID皆为Cell5，而CUV ID为非Cell5且变换着不同的ID，电池状态(d)的CUV ID皆为Cell6而COV ID为非Cell6且变换着不同的ID，电池状态(e)的COV ID皆为Cell5而CUV ID皆为Cell6，状态(f)COV ID和CUV ID互不相同则皆变换着不同ID。 由以上定义我们可将状态分为已均衡和未平，出现已均衡的状态代表电池的容量受限于Cell ID所出现的电池单元，例如表2电池状态(a)，每次充放电到截止电压时，都纪录到Cell5，由此推想，Cell5容量最小，而且能将该电池单元的容量完全使用，电压均衡无论在如何启动，也增加不了此电池单元的容量，所以不需要再做均衡，遇到这种情况则不再对电池组的任何一颗电池单元做均衡，因此可以称作是已均衡，而表2电池状态(b)也有相同的意思，但是两颗电池单元的已均衡状态判别较为困难，若能发展出更好的辨别机制，则能推展至两颗电池单元以上。而表2电池状态(c)、电池状态(d)、电池状态(e)、电池状态(f)的电压截止条件不受限于单颗电池单元。表2电池状态(c)可以预估为Cell5电容量较多，而Cell6、Cell7、Cell8电容量偏少且相近，表2电池状态(d)为Cell2、Cell3容量较多且相近，Cell6容量偏少，表2电池状态(e)为Cell5容量较多，Cell6容量偏少，表2电池状态(f)为Cell5、Cell6、Cell7容量较多且相近，Cell2、Cell3、Cell4容量偏少相近。这些状态经由电压均衡机制仍可以调整容量，所以视为未均衡。 Table 2 ID(c) 第一次 第二次 第三次 第四次 第五次 ID(d) 第一次 第二次 第三次 第四次 第五次 过充电压ID Cell5 Cell5 Cell5 Cell5 Cell5 过充电压ID Cell2 Cell2 Cell2 Cell3 Cell3 过放电压ID Cell6 Cell6 Cell7 Cell7 Cell8 过放电压ID Cell6 Cell6 Cell6 Cell6 Cell6 ID(e) 第一次 第二次 第三次 第四次 第五次 ID(f) 第一次 第二次 第三次 第四次 第五次 过充电压ID Cell5 Cell5 Cell5 Cell5 Cell5 过充电压ID Cell5 Cell5 Cell6 Cell6 Cell7 过放电压ID Cell6 Cell6 Cell6 Cell6 Cell6 过放电压ID Cell2 Cell2 Cell4 Cell3 Cell3 表2. 电池状态 接着我们搭配着RM和FCC做观察，由FCC可以得知现在所能拥有的最大容量，若达已均衡状态如表1电池状态(a)而FCC而的容量已经低于原有容量的80%，代表Cell5老化严重需要更换电池；若是在尚未均衡的状态，则还有可能靠着均衡系统将电池组回复原先的容量，不用急于更换。图2此组电池出厂标定容量为12,000 mAh，由纪录数据可以看出电池至少还有90%的容量。又由于电池均衡系统本身的均衡电流有限，如果想要自行检修时，可以依不同状态快速做调整。以电池状态(c)来说，Cell5明显比其他电池的电容量还高，依据FCC的多寡跟原先的容量做比较，斟酌放电部分容量，电池状态(d)则可对Cell6充电，电池状态(e)则可同时对Cell5放电Cell6充电。图3为表1电池状态(b)的实验数据，图中显示出Cell4与Cell6容量状态相近，达已均衡的状态，此电池组出场时为6000 mAh的电池，而现今容量以不满80% (4800 mAh)，故此电池单元老化情况较为严重，可考虑更换电池单元。图4为图3第7次电压波形纪录，由图形上可以看到电池单元电压相当接近。 图3. 电池状态(b)的电压充放电纪录 图4. 图3的第7次充电电压曲线 由图5可以观察到此状态类似表2电池状态(d)，判断该电池的Cell7、Cell3和Cell1电池容量相近，而Cell5电池的容量较低。然后我们取其中一次的电压变化曲线，图6和图7为第10次充电、放电曲线，从图中可以看到Cell5电压明显较低，故Cell5电池的容量较低得以验证。由图8可以观察到此状态类似表2电池状态(e)，推断出Cell1电容量较多，而Cell5电容量较少，可由图9和图10得到验证。 图5. 电池状态(d)的电压充放电纪录 图6. 图5的第10次充电电压曲线 图7. 图5的第10次放电电压曲线 图8. 电池状态(e)的电池充放电纪录 图9. 图8的第10次充电电压曲线 图10. 图8的第10次放电电压曲线"
"动力电池的容量较一般3C产品所使用的电池来的大，想要加速均衡电池的容量状态，势必要加大均衡电流，但加大均衡电流后引申出一些问题，图11的均衡电流约达270~300 mA，其容量不但没有因均衡机制增加，反而使容量严重降低。 图11. 以12欧姆分流电阻做均衡实验的纪录图 其推断出两种可能的原因，第一种原因是当其中一颗电池单元电压高出最低的电池单元40 mA时，电压均衡机制启动，此时量测到该电池单元的电压因此降低，我们因加大均衡电流，使电压降更多，反而该颗电池所量测到的电压低于其它颗电池单元40 mA，其它颗电池单元的均衡机制也跟着启动，所以当其中一组电池单元电压均衡系统启动，会演变成全部皆启动的乱象，自然就不会有电压均衡的效果，反而会使的更不均衡。第二种原因是电容的问题，如图12当B1和B3的电压均衡系统启动时，所需电子开关数与单体电池数相同，电容器的个数比电池数少一个。每个电容通过双向开关与对应的电池并联。假定B1与B3的压差最大，且B1 > B3，压差大于阈值电压，开启均衡。电容充电过程：软件系统控制命令开关S1和S2拨向左侧，B1对C1进行充电，电容电压与电池电压持平时，充电过程结束。电容放电过程：软件系统控制命令开关S1和S2拨向右侧，C1对B2进行充电，二者电压持平时，放电过程结束。至此，完成电量从B1到B2的转移。然后电量再从B2转移到B3，转移过程同上。至此，均衡过程完成，由图13就可以看出因上述的作用，使得侦测到的电压一下子提高到截止电压3.75 V，导致电池被误判已充饱而停止充电。 图12. 线电阻影响电压侦测示意图 图13. 受线电阻影响的电压波形 为防范这些误差，将均衡机制做了一些调整，均衡机制若启动中，将不再判断其电池的电压状态，换句话说，同时判断所有电池单元的电压后，启动所有高于最低电池单元电压40 mV的均衡机制，等均衡结束后再休息5 s，让AD转换器能侦测到真实的电压，再进行下一次电压判断，将电压过高的电池单元做电流分流。接着第二项调整是针对线阻所造成的影响，由于设定上均衡持续20 s，休息5 s，因此在过充电截止电压的延迟时间设定为25 s，也就是当电池电压超过截止电压值持续25 s后，才会截止充电，这样可以避免线阻所造成的误差，但也为了防止延迟25 s才截止充电开关使得电池过充电，将过充截止电压值由3.75 V降至3.7 V。 综上所述，采用基于变压器的无损均衡作试验效果验证，下面就变压器无损均衡进行电路设计，电路如图14所示。均衡电路的核心为正激式变压器，采样双向DC-DC变换器。电池组由6块单体电池组成，每节电池通过功率开关管连接到变压器副边绕组。变压器的原边也通过开关连接到电池组总的正负极。假设第四节电池电压最高，且压差大于阈值电压，则均衡开启：MOSl、MOS3、MOS4导通，软件控制MOS2以200 kHz、85%的占空比导通变压器的副边，通过变压器电磁转换将第一节电池的能量转移到电池组上完成顶部均衡。同理，当第四节电池电压最低时，MOS4、MOS2、MOS3导通，软件控制MOSl以200 kHz、85%的占空比导通变压器的原边，将电池组的能量转移到第一节电池上，完成底部均衡。 图14. 基于变压器的无损均衡电路设计"
"实验收集并确定实验数据，在以电压的充放电纪录做验证，此数据可用于分析电池运行状况和评估老化，并能应用在辅助均衡机制，减少能源的浪费。另外，在对电池充电时，电池的电压均衡会影响电压读数的准确性，并且电池会过度充电或未充满电；如果均衡电流很大，则误差会增加，所以只是提升均衡电流来加速均衡效果反而会让AD转换器误判，但这与主动均衡有相同的问题，需要改变均衡机制或判断电压决定。而本文提出的均衡方案，成功的使电压误判的机率减少，同时增大均衡电流。"
