"本文利用Veryengine引警和Unity3D虚拟仿真技术设计了水生态环境模型和鱼类运动轨迹模型，并将两个模型进行叠加，构建了由水质指标查询模块、污染物迁移过程仿真模块和鱼类运动轨迹仿真模块的可视化仿真系统，对污染物进入水体过程中鱼类的运动行为响应情况进行了动态模拟。根据鱼类在不同水生态环境中运动轨迹变化情况，确定鱼类运动行为响应指并根据指标对水质状况进行评价，为水生态健康评价以及水生态修复效果评价提供参考依据。"
"Unity3D是一种可视化、跨平台的大型虚拟现实引擎，其通过计算机对复杂数据进行可视化操作与交互，能够实时处理大量的三维模型，形成具有交互式、多维化的信息环境，由于其具有高质量和高效能等特点而备受关注。虚拟仿真技术在教学中的运用是近几年的研究热点，特别是通过先进的计算机和网络技术对实验教学虚拟仿真技术的研发可以更好地展现实验过程，虚拟仿真实验系统具有逼真的视觉效果和良好的交互性正逐步取代传统的实验教学，并取得了许多研究成果。虚拟仿真实验教学可以将复杂、抽象的实验过程立体逼真地演示出来 [ 1 ] [ 2 ]，还可将有毒有害化学实验 [ 3 ] [ 4 ]、实验周期长 [ 5 ] [ 6 ]、无法在现实实验室中完成的实验 [ 7 ] [ 8 ] [ 9 ] 等直观、安全地展现出来。通过虚拟仿真实验，学生可以置身于虚拟环境中，有助于激发学生自主学习和构建思维。与传统的实验教学方法相比，虚拟仿真实验教学不仅无耗材，节约教学成本，还可以丰富课堂教学模式，增加课堂趣味，激发学生学习的主观能动性，有效地提高学生的学习成绩 [ 10 ]。近几年，虚拟仿真技术也逐步应用于山洪演变情景进行模拟 [ 11 ]、水污染应急进行模拟及演习仿真 [ 12 ]、矿井突水事故模拟 [ 13 ]、泥石流爆发仿真 [ 14 ]、突水通道演化过程仿真 [ 15 ]、环境灾害三维动态淹没模拟 [ 16 ] 等环境灾害以及环境生态等领域的研究。 鱼类是水域污染情况活的“监测器”。当水环境发生变化时，首先出现响应的是长期生存于水中的鱼类，鱼类会逃避不利其生存的环境，因此根据鱼类运动轨迹的前后变化情况能够实时反映水生态环境的健康状况。利用虚拟仿真技术对鱼类在水环境变化过程中发生的行为响应进行动态仿真，对水生态环境中的评价及预测具有明显的优势，主要表现在以下两个方面：一方面具有真实感和全新交互体验方式。虚拟仿真技术具有身临其境的真实感受，是对现实的虚拟仿真以及对现实中无法看到的鱼类行为进行虚构，是其它非仿真模型展示手段所不具备的；另一方面可以对水生态环境修复效果的检验和优化，这是传统的模拟江河等水资源污染推演模拟无法比拟的。 因此，本文通过利用Unity3D技术来构建不同水生态环境情况下鱼类运动行为响应的现实场景，将水生态环境三维模型和鱼类运动轨迹三维模型进行融合，对鱼类随水环境变化而发生的行为响应变化过程进行动态模拟，并可进行情景查询、漫游和飞行浏览等操作，从而达到通过鱼类运动行为响应来评价和预测水生态环境健康状况的目的。"
"万维引擎Veryengine是一款虚拟现实软件开发平台。通过文本编辑的开发方式，具有对程序编写修改且无须编译直接运行的效果。水质演变过程与鱼类运动轨迹的可视化仿真是在Veryengine程序编写的基础上，以Unity3D界面为载体，采用EXCEL表格编辑技术开发进行的虚拟仿真。鱼类运动行为响应可视化仿真系统构建架构如图1所示。 图1. 系统框架图  1) 水生态环境模型设计 为更真实地对展示鱼类在不同水环境中的行为响应，根据水域地形资料条件并利用3Dmax建模工具进行1:1等比例建模渲染，构建了地形、边界条件以及水动力特性的仿真模型(见图2)，实现湖泊三维场景交互式浏览。创建水质监测点并导入相应水质参数，可查询每个监测点水质变化过程。通过将模型数据导入Veryengine进行环境灯光效果、模型及相机等元素的调整，构建成水生态环境仿真模型(见图3)，可展现污染物在水中扩散、迁移过程，通过水体颜色的变化观察水生态环境的演变过程。 图2. 利用Unity3D创建的水生态环境模型 图3. 水生态环境仿真效果 2) 鱼类运动轨迹模型设计 将不同水生态环境的鱼类运动轨迹坐标导入万维引擎Veryengine，建立不同水环境下鱼类运动轨迹的可视化路径。利用EXCEL表格编辑技术，综合调整视角相机、语音简介等场景相关元素，展现鱼类在不同水生态环境的运动行为响应情况。 3) 模型叠加 将水生态环境演变过程的三维模型以及鱼类运动轨迹的三维模型进行叠加。用户可通过视频演示和操作说明，按照操作步骤快速熟悉仿真软件的基本环境及操作。可通过调整交互式场景以及键盘“WASD”键来控制视角前后、左右移动进行飞行模式，直观地浏览到污染物排入水体过程中水质变化对鱼类运动行为的影响，也可进行情景查询不同水质条件下鱼类运动轨迹信息，或者通过编辑修正水质指标来获取鱼类运动轨迹信息。"
"根据可视化仿真模型的不同功能设计，构建的功能模块有水质指标查询模块、污染物扩散迁移可视化模拟模块和鱼类运动轨迹可视化仿真模块。  水质指标查询模块可通过界面查询不同水生态环境的主要水质指标以及影响鱼类运动行为的水质指标(见图4)，也可通过输入水质指标查询相应的鱼类运动轨迹，由此来确鱼类运动行为响应指标如鱼类离污染物源距离、鱼类在水深方向的位置以及鱼类游泳速度等，并根据这些响应指标的变化对水生态环境的健康状况进行预测和评价。 图4. 水质指标查询  利用Untiy3D粒子特效技术，模拟污染物扩散、迁移过程(见图5)。可通过键盘“WASD”键控制视角前后、左右移动进行飞行模式，直观地浏览到污染物排入水体过程中水质的演变过程。 图5. 采用粒子特效技术对污染物迁移进行可视化  鱼类运动轨迹仿真模块可在浏览到水质演变过程中鱼类运动行为轨迹(见图6)。根据鱼类在不同水生态环境中的运动轨迹变化情况，确定鱼类运动行为响应指标。 图6. 鱼类运动过程可视化"
"鱼类在不同水环境中有不同的行为响应，根据其行为响应情况可对水生态健康状况进行评价。如在水体富营养化过程中，在贫营养阶段鱼类活动范围大；在中营养阶段鱼类运动轨迹表现为偏好于某一区域，且行为响应比较迟钝；在富营养阶段鱼类基本聚集于某处不动。在水体富营养过程中，鱼类运动轨迹是一个逐渐收敛的过程。 通过仿真系统查询鱼类运动轨迹变化情况来确定鱼类运动行为响应指标。如在水体富营养化过程中：1) 鱼类离污染源距离越来越远，说明水中污染物浓度逐渐升高；2) 鱼类运动轨迹由水域底层往表层迁移，这与垂线上溶解氧含量迅速下降、铜绿微囊藻毒素和非离子氨含量快速上升有关。3) 鱼类两个连续轨迹点之间距离的大小反映了鱼类游泳速度的快慢，距离大说明鱼类游泳速度快，反之则慢，而鱼类游泳速度的快慢与水中污染物浓度大小有关。因此，可通过查询鱼类两个连续运动轨迹点之间的距离大小，评价水中污染物浓度的变化情况。 根据鱼类在不同富营养阶段的行为响应变化，鱼类运动行为响应指标主要有鱼类离污染源距离、鱼类离水面距离和鱼类游泳速度，影响鱼类行为的主要水质指标为溶解氧、铜绿微囊藻毒素和非离子氨，且两者具有一定的相关性。根据鱼类运动行为响应指标与影响鱼类行为水质指标的相关性分析结果，构建鱼类运动行为的响应模型。对模型的拟合优度、显著性(F检验)以及回归系数的显著性(t检验)进行检验，用于鱼类在水质变化过程中的运动行为响应指标预测模型。根据预测模型反推影响鱼类行为的水质指标含量，从而达到对水体富营养状况进行预测与评价的目的。"
"可视化仿真系统是通过图形或图像方式来展示虚拟仿真的计算结果，通过鼠标在系统界面的操作，就可以完成整个实验研究成果的展示。可视化图形图像是虚拟仿真运算结果的核心，本文通过把实验研究数据以及计算机数值模拟的数据转换成可输出图表，即可形象直观地展现污染物排入水体过程中，水生态环境演变与鱼类运动轨迹的三维可视化效果，为水生态健康评价、水生态修复效果评价以及水污染变化趋势的准确性提供参考依据，也为水环境综合整治与管理走向定量化、科学化提供了新思路和技术支持。"
