"糖尿病导致高血压、血脂紊乱、心脑血管等疾病的主要原因，本文使用印度皮马女性有关糖尿病的数据集，使用基于逻辑回归的模型平均方法预测皮马女性五年内是否会患糖尿病。在选择模型时，经查阅资料，固定了口服葡萄糖耐量试验2小时后的血浆葡萄糖浓度、餐后2小时的血清胰岛素、糖尿病遗传函数三个指标进行建模，采用Mallows权重选择准则。实验结果表明模型平均相较于简单地逻辑回归方法预测误差率较低，效果较好。"
"糖尿病是由人体缺乏或相对缺乏胰岛素所导致的一种慢性代谢疾病，也是导致高血压、血脂紊乱、心脑血管等疾病的主要原因。目前，我国糖尿病患者已有1.3亿人，慢性肾病患者中不乏同时患有糖尿病的。现代人的生活饮食习惯的改变，使得火锅、甜品、奶茶等高盐、高糖、多油的食物愈加受欢迎，糖尿病前期症状隐匿，容易被忽视。这就使得进行糖尿病高危人群的预测十分有必要。 本文是基于模型平均对21岁及21岁以上的印度皮马女性糖尿病数据集进行分析建立模型，以此预测皮马女性糖尿病高危人群；在对数据集的分析建模过程中，不论用于模型的选择或是模型参数的估计，在统计学和经济学中模型平均应用广泛。在实际应用中，往往人们并不知道真实的模型，因此模型的选择至关重要，而选择的模型不论是过于简单亦或过于复杂都可能会使得估计或预测的方差偏大，显然当选择的模型不够准确时会使得估计或预测做的不够准确。而在数据集中又难免会出现离群点、破坏分布假定的点、对估计参数影响比例失衡的点我们统称这些点为强影响点。面对这类数据，除了进行数据预处理之外，模型的选择也至关重要。 模型平均是将所有备选模型通过加权的方法，通过组合估计或组合预测来降低模型选择错误带来的估计误差，避免损失原始数据信息，以此来提高估计精度。而根据数据集的不同，Zhang X.等 [ 1 ] 提出广义线性模型的模型平均方法针对处理本文使用的二分类被解释变量的数据集做模型平均。 在皮马女性糖尿病数据集中因被解释变量仅有两类取值，0表示未患糖尿病，1表示患糖尿病，面对这样的二分类被解释变量，本文选取的模型是基于逻辑回归算法。"
"逻辑回归是用以处理被解释变量为二分类数据的情况，即 Y ∼ b ( 1 , p ) 。如果用线性函数 y = x T β 做拟合容易受强影响点的影响，逻辑回归采用了Sigmod函数，即： g ( z ) = 1 1 + e − z 减弱强影响点的影响。Sigmod函数不仅将原先值域为 ( − ∞ , + ∞ ) 映射到 ( 0 , 1 ) 区间，并且输出的结果还具有统计学意义，如果认为被解释变量取1 (即事件发生)的概率为p，则用Sigmod函数输出的即为事件发 生的概率，即 p = 1 1 + e − x T β 。  模型平均是将所有的备选模型通过权重平均起来，避免将“所有的鸡蛋放在同一个篮子里”，以此来规避模型选择错误的风险 [ 1 ]。 广义线性模型的指数分布族有如下形式： f ( y i | θ i , φ ) = exp { y i θ i − b ( θ i ) φ + c ( y i , φ ) } 其中， θ i ， φ 均为参数， b ( ⋅ ) ， c ( ⋅ ) 均为已知的函数， θ i 具有形式 θ i = x i T β ，通过取分别 x i 的不同维的元素估计 β 。记 X = ( x 1 , x 2 , ⋯ , x n ) T ， Y = ( y 1 , y 2 , ⋯ , y n ) T ， θ = ( θ 1 , θ 2 , ⋯ , θ n ) T 。假设我们总共有S个备选模型，在第s个模型中，通过极大似然估计获得 β 的估计 β ^ ( s ) ， β ^ ( s ) 与获取的 x i 的维度相对应，对应未获取 x i 的维度数据的其它维值均为0。权重向量 ω = ( ω 1 , ω 2 , ⋯ , ω S ) T ， ω ∈ [ 0 , 1 ] S : ∑ i = 1 S ω i = 1 。 模型平均 β 的估计 β ^ ( ω ) : β ^ ( ω ) = ∑ s = 1 S ω s β ^ ( ω ) θ 的真值 θ 0 ，模型平均 θ 0 的估计： θ ( β ^ ( ω ) ) = [ θ 1 ( β ^ ( ω ) ) , ⋯ , θ n ( β ^ ( ω ) ) ] T = X β ^ ( ω ) 目前有许多权重选择准则，例如：张新雨等 [ 2 ] 罗列出基于信息准则权重选择方法的AIC和BIC、Mallows准则，本文使用的是Mallows准则。 Mallows权重选择标准为： G ( ω ) = 2 φ − 1 Β ( β ^ ( ω ) ) − 2 φ − 1 y T θ ( β ^ ( ω ) ) + λ n ω T k 其中， Β ( β ^ ( ω ) ) = ∑ i = 1 n b [ θ i ( β ^ ( ω ) ) ] ， λ n ω T k 为惩罚项， k = ( k 1 , k 2 , ⋯ , k S ) T ， k s 为第s个模型中参数的个数， λ n 为调整参数，常用的取值为2或者 log ( n ) ，本文 λ n   =   2 。 权重向量的求解： ω = arg min w G ( ω )  伯努利分布的指数分布族： f ( y ; p ) = exp { y a − log ( 1 + e a ) } 其中 a = log ( p 1 − p ) ， φ = 1 ， b ( a ) = log ( 1 + e a ) ， c ( y i , φ ) = 0 。 权重选择标准为： G ( ω ) = 2 ∑ i = 1 n { y i log ( 1 + exp ( x i T β ^ ( ω ) ) ) } − ∑ i = 1 n { 2 y i x i T β ^ ( ω ) } + 2 ω T k"
"本文所用的数据集是来自kaggle网站www.kaggle.com/uciml/pima-indians-diabetes-database上的有关21岁及以上的皮马印度女性的有关身体相关指标数据，根据数据预测皮马女性5年内是否会患糖尿病。该数据集指标分别为：口服葡萄糖耐量试验2小时后的血浆葡萄糖浓度x 1 、用餐2小时后的血清胰岛素x 2 (单位：μu/ml)、糖尿病遗传函数x 3 、怀孕的次数x 4 、舒张压x 5 (单位：mmHg)、三头肌皮褶厚度x 6 (单位：mm)、体重指数x 7 (体重(kg)/(身高(m) 2 )、年龄x 8 、类变量(0或1)。  数据集中存在诸如血糖、舒张压、三头肌皮褶厚度等数据都存在数据为0的情况，但显然这些数据为异常值，本文删除了这些带有异常值的样本，实际有效样本量为392个。口服葡萄糖耐量实验主要是检测机体对血糖的调节功能，经过检测得到的血浆葡萄糖浓度检测是判定是否为糖尿病的重要指标；用餐后2小时后的血清胰岛素指标用于检测胰岛β细胞功能，胰岛β细胞用于分泌胰岛素，因此该指标是可以用来预测胰岛功能的重要指标；糖尿病不论是一型还是二型都具有一定的遗传性，糖尿病遗传函数用于判定对每个家庭而言患糖尿病的家庭遗传情况。这三个指标在糖尿病判定中有着至关重要的作用，因此在进行模型平均的备选模型选择时，本文选择了包含这三个指标的所有模型。  因解释变量在选择时已经确定选择了口服葡萄糖耐量试验2小时后的血浆葡萄糖浓度x 1 、用餐2小时后的血清胰岛素x 2 、糖尿病遗传函数x 3 这三个解释变量，剩余的5个解释变量不确定包含哪些解释变量预测效果会更好，所以这样我们共有32个组合模型。又因为被解释变量为二分类变量，根据逻辑回归的变换得到的模型形如： p = ( 1 + exp ( − ( β 0 + β 1 x 1 + β 2 x 2 + β 3 x 3 + ⋯ ) ) ) − 1 ，所有模型如表1所示。 Table 1 备选模型 1 p = ( 1 + exp ( − ( β 0 + β 1 x 1 + β 2 x 2 + β 3 x 3 ) ) ) − 1 2 p = ( 1 + exp ( − ( β 0 + β 1 x 1 + β 2 x 2 + β 3 x 3 + β 8 x 8 ) ) ) − 1 3 p = ( 1 + exp ( − ( β 0 + β 1 x 1 + β 2 x 2 + β 3 x 3 + β 7 x 7 ) ) ) − 1 4 p = ( 1 + exp ( − ( β 0 + β 1 x 1 + β 2 x 2 + β 3 x 3 + β 7 x 7 + β 8 x 8 ) ) ) − 1 5 p = ( 1 + exp ( − ( β 0 + β 1 x 1 + β 2 x 2 + β 3 x 3 + β 6 x 6 ) ) ) − 1 6 p = ( 1 + exp ( − ( β 0 + β 1 x 1 + β 2 x 2 + β 3 x 3 + β 6 x 6 + + β 8 x 8 ) ) ) − 1 7 p = ( 1 + exp ( − ( β 0 + β 1 x 1 + β 2 x 2 + β 3 x 3 + β 6 x 6 + β 7 x 7 ) ) ) − 1 8 p = ( 1 + exp ( − ( β 0 + β 1 x 1 + β 2 x 2 + β 3 x 3 + β 6 x 6 + β 7 x 7 + β 8 x 8 ) ) ) − 1 9 p = ( 1 + exp ( − ( β 0 + β 1 x 1 + β 2 x 2 + β 3 x 3 + β 5 x 5 ) ) ) − 1 10 p = ( 1 + exp ( − ( β 0 + β 1 x 1 + β 2 x 2 + β 3 x 3 + β 5 x 5 + β 8 x 8 ) ) ) − 1 11 p = ( 1 + exp ( − ( β 0 + β 1 x 1 + β 2 x 2 + β 3 x 3 + β 5 x 5 + β 7 x 7 ) ) ) − 1 12 p = ( 1 + exp ( − ( β 0 + β 1 x 1 + β 2 x 2 + β 3 x 3 + β 5 x 5 + β 7 x 7 + β 8 x 8 ) ) ) − 1 13 p = ( 1 + exp ( − ( β 0 + β 1 x 1 + β 2 x 2 + β 3 x 3 + β 5 x 5 + β 6 x 6 ) ) ) − 1 14 p = ( 1 + exp ( − ( β 0 + β 1 x 1 + β 2 x 2 + β 3 x 3 + β 5 x 5 + β 6 x 6 + β 8 x 8 ) ) ) − 1 15 p = ( 1 + exp ( − ( β 0 + β 1 x 1 + β 2 x 2 + β 3 x 3 + β 5 x 5 + β 6 x 6 + β 7 x 7 ) ) ) − 1 16 p = ( 1 + exp ( − ( β 0 + β 1 x 1 + β 2 x 2 + β 3 x 3 + β 5 x 5 + β 6 x 6 + β 7 x 7 + β 8 x 8 ) ) ) − 1 17 p = ( 1 + exp ( − ( β 0 + β 1 x 1 + β 2 x 2 + β 3 x 3 + β 4 x 4 ) ) ) − 1 18 p = ( 1 + exp ( − ( β 0 + β 1 x 1 + β 2 x 2 + β 3 x 3 + β 4 x 4 + β 8 x 8 ) ) ) − 1 19 p = ( 1 + exp ( − ( β 0 + β 1 x 1 + β 2 x 2 + β 3 x 3 + β 4 x 4 + β 7 x 7 ) ) ) − 1 20 p = ( 1 + exp ( − ( β 0 + β 1 x 1 + β 2 x 2 + β 3 x 3 + β 4 x 4 + β 7 x 7 + β 8 x 8 ) ) ) − 1 21 p = ( 1 + exp ( − ( β 0 + β 1 x 1 + β 2 x 2 + β 3 x 3 + β 4 x 4 + β 6 x 6 ) ) ) − 1 22 p = ( 1 + exp ( − ( β 0 + β 1 x 1 + β 2 x 2 + β 3 x 3 + β 4 x 4 + β 6 x 6 + β 8 x 8 ) ) ) − 1 23 p = ( 1 + exp ( − ( β 0 + β 1 x 1 + β 2 x 2 + β 3 x 3 + β 4 x 4 + β 6 x 6 + β 7 x 7 ) ) ) − 1 24 p = ( 1 + exp ( − ( β 0 + β 1 x 1 + β 2 x 2 + β 3 x 3 + β 4 x 4 + β 6 x 6 + β 7 x 7 + β 8 x 8 ) ) ) − 1 25 p = ( 1 + exp ( − ( β 0 + β 1 x 1 + β 2 x 2 + β 3 x 3 + β 4 x 4 + β 5 x 5 ) ) ) − 1 26 p = ( 1 + exp ( − ( β 0 + β 1 x 1 + β 2 x 2 + β 3 x 3 + β 4 x 4 + β 5 x 5 + β 8 x 8 ) ) ) − 1 27 p = ( 1 + exp ( − ( β 0 + β 1 x 1 + β 2 x 2 + β 3 x 3 + β 4 x 4 + β 5 x 5 + β 7 x 7 ) ) ) − 1 28 p = ( 1 + exp ( − ( β 0 + β 1 x 1 + β 2 x 2 + β 3 x 3 + β 4 x 4 + β 5 x 5 + β 7 x 7 + β 8 x 8 ) ) ) − 1 29 p = ( 1 + exp ( − ( β 0 + β 1 x 1 + β 2 x 2 + β 3 x 3 + β 4 x 4 + β 5 x 5 + β 6 x 6 ) ) ) − 1 30 p = ( 1 + exp ( − ( β 0 + β 1 x 1 + β 2 x 2 + β 3 x 3 + β 4 x 4 + β 5 x 5 + β 6 x 6 + β 8 x 8 ) ) ) − 1 31 p = ( 1 + exp ( − ( β 0 + β 1 x 1 + β 2 x 2 + β 3 x 3 + β 4 x 4 + β 5 x 5 + β 6 x 6 + β 7 x 7 ) ) ) − 1 32 p = ( 1 + exp ( − ( β 0 + β 1 x 1 + β 2 x 2 + β 3 x 3 + β 4 x 4 + β 5 x 5 + β 6 x 6 + β 7 x 7 + β 8 x 8 ) ) ) − 1 表1. 备选模型列表 对于第s个模型通过极大似然估计得到 β 的估计值 β ^ s ，再通过模型平均的最小化目标函数 G ( ω ) 获取权重 ω 的估计，结果为表2。 Table 2数值 数值 数值 数值 5.4353e−07 6.1118e−07 0.4150 5.2252e−07 2.5956e−06 3.3889e−07 1.4697e−06 7.6433e−07 5.5971e−07 8.0781e−07 0.0009 4.6422e−07 0.4250 4.3690e−07 1.1934e−06 4.6151e−07 9.0619e−07 7.5702e−07 1.1224e−06 3.4192e−07 0.1591 2.7979e−07 5.9069e−07 4.2150e−07 4.4774e−07 5.6776e−07 1.0032e−06 1.6059e−06 3.9658e−07 3.6995e−07 7.7663e−07 7.8445e−07 表2. 权重ω 上表为由模型平均方法计算出对于各个模型的权重，权重依次按列排序，即对一个模型的权重即为第一列第一个值，第二个模型的权重即为第一列第二个值，依次类推。从表中可以看出相较于逻辑回归模型即备选模型的最后一个模型 p = ( 1 + exp ( − ( β 0 + β 1 x 1 + β 2 x 2 + β 3 x 3 + β 4 x 4 + β 5 x 5 + β 6 x 6 + β 7 x 7 + β 8 x 8 ) ) ) − 1 ，模型平均选择的模型主要集中在第4个模型、第6个模型、第19个模型以及第21个模型。  为了比较模型平均和逻辑回归的预测效果，将392个有效样本随机分为训练集和测试集，本文分别抽了总样本的50%、55%、60%、65%、70%、75%、80%、85%、90%作为训练集，对应剩下的样本作为测试集，对于相同比例的训练集，进行重复实验1000次，比较平均误差率。实验结果详见表3。 Table 3 模型平均平均误差率 逻辑回归平均误差率 0.2393 0.2422 0.2381 0.2407 0.2388 0.2414 0.2359 0.2386 0.2367 0.2401 0.2359 0.2380 0.2328 0.2351 0.2361 0.2383 0.2318 0.2345 表3. 模型平均与逻辑回归平均误差率比较"
"使用基于逻辑回归的模型平均方法对印度皮马女性糖尿病数据集进行建模，对比逻辑回归，模型平均的预测平均误差率一致比逻辑回归的预测平均误差率小，可以看出模型平均的估计效果要比逻辑回归的估计效果好，说明在预测皮马女性糖尿病时使用基于逻辑回归的模型平均方法相较于逻辑回归更为准确。"
