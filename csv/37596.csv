"电子元器件是电路的基本组成部分，有着广泛的应用。传统的人工检测存在很多不足，机器视觉尺寸测量技术由此应运而生，机器视觉由于自身具备高灵敏度、高精度及高耐用性的特性，对于提高工业自动化水平和工业生产效率有极大助力。根据课题要求，以单片机芯片为研究对象，以检测单片机芯片二维平面上的长度与宽度为研究目标，设计了基于机器视觉的单片机芯片检测系统的硬件方案，硬件组成包括光源与照明方式的选择，以及相机与镜头的选择。完成硬件平台搭建后，同时制作了应用于相机标定的标定板并在调试完成的硬件平台上拍摄了三十张左右的标定图片。利用MATLABR2016A作为系统的软件处理平台，一方面应用MATLAB标定箱对标定图做相机标定，另一方面编写用于单片机芯片尺寸测量的图像处理代码及测量代码。其中，在图像处理环节主要包括图像滤波、二值化处理和边缘提取等步骤。单片机芯片的尺寸测量实验完成后将实验结果与真实尺寸的对比，可以看出构建的基于机器视觉的电子元器件外形尺寸测量系统满足了课题设定目标。"
"随着我们科技迅速发展，生产工艺水平不断提高，产品质量把控也愈加严格。产品的尺寸测量工作是把控产品质量的一个重要环节，因此对测量提出了高精度与快速化的要求 [ 1 ]。过去，产品尺寸检测主要依赖人工的人眼观察以及简单的测量工具如卡尺、量规、轮廓仪来判断，这一方法已经无法适应目前大批量生产以及电子元器件外形越来越复杂的状况，且人工长时间的机械重复容易产生疲劳既不能保证检测效率又影响测量精确性 [ 2 ]。在这样的背景下，机器视觉测量技术应运而生，成为了现代化工业最受欢迎的检测技术，并且该技术已经成为目前工业界的研究热点。机器视觉测量系统具有高精度和高效率的独特优势，广泛应用于复杂元器件及小型元器件的尺寸测量。本课题应用机器视觉技术，设计了一个电子元器件尺寸检测系统，测量对象是单片机芯片的长度与宽度。课题研究内容主要包括相机标定、图像采集、图像预处理与边缘提取和芯片长宽尺寸测量等，其重点在于图像处理与尺寸测量两个部分。 本文对图像预处理与图像边缘提取方法研究作重点阐述，主要包括图像滤波、图像二值化阈值分割等预处理方法，边缘检测及连通域处理等边缘提取方法，并作对比分析。再次介绍单片机芯片尺寸测量实验，主要包括相机标定、尺寸测量与误差分析。最后总结课题完成过程并且检讨自己的不足并对将来研究机器视觉检测技术做出展望 [ 3 ] [ 4 ]。"
"本系统中的硬件设计所需要的设备有光源、相机、镜头和计算机，软件设计所需要的平台是MATLAB R2016A，电子元件选用的是单片机芯片。系统硬件应用顺序如图1所示。 图1. 硬件应用顺序图 系统总体方案的实施步骤是：首先选取适合电子元件尺寸测量的光源类型以及其对应的光照方式，在完成照明方案设计后选择合适的工业相机和镜头，将照明光源和相机、镜头固定在支架后，通过调节相机与被测物体的距离、相机镜头的放大倍数和光圈大小，确保待测单片机芯片可以完整清晰地呈现在计算机成像画面中，至此系统硬件平台的搭建工作完成。随后在成像画面中获取对比度高的单片机芯片灰度图作为尺寸测量系统软件部分的待处理图片 [ 5 ]。待处理的单片机芯片灰度图在MATLAB软件平台上经过图像增强、图像滤波、二值化、边缘检测等一系列图像处理方法后通过像素点计算获取芯片长宽尺寸。"
"照明方案设计对于视觉系统尤其重要，一方面可以提高采集到的图像的清晰度，另一方面减少环境光对测量系统的干扰。通过查阅资料和对比本课题实际测量的元器件尺寸，LED灯的综合性能最为优越；同时，经过在实验室环境下对各种光照方式实际对比，综合考虑到照明效果与可操作性，本文最终在前向照明、背向照明和环形照明这种光照方式；与CMOS相机相比，CCD相机有着更高的分辨率和灵敏度，本系统最终采用大恒图像MER-132-30GM面阵CCD相机，它支持水平镜像和垂直镜像，可直接连接HALCON、MERLIC、LabVIEW等第三方软件；镜头采用COMPUTAR公司生产的M0824-MPW2型号镜头 [ 6 ]。现在主流的视觉处理软件有：OpenCV、LabVIEW、HALCON、eVision、HexSight、RVB以及MATLAB。本课题选择了MATLAB的R2016a版本作为系统软件设计平台，MATLAB相比于其他图像处理软件学习成本低同时集成了许多图像处理函数，适合本科生选用作为毕业设计课题的开发软件。选择好硬件后，将硬件凑齐简单搭建平台即可开始软硬件调试以及后续工作。"
"本章将重点介绍图像预处理和边缘提取的流程，流程图如图2所示，包括图像滤波、图像二值化和边缘检测以及边缘检测的替代处理方法，同时在这几道流程中对比不同的算法带来的效果差别，并挑选出最适合单片机芯片尺寸测量的方法。 对比中值滤波、均值滤波和高斯滤波可以比较得出，高斯滤波的对于邻域内各点的权重分配类似于正态分布，所以高斯滤波对于服从正态分布的噪声的抑制效果非常好。由于采集的单片机芯片图像质量较好，故三种滤波效果均非太明显，最终采用高斯滤波。滤波效果如图3所示，并将其灰度反转为图像二值化作准备，灰度反转效果如图4所示。本课题对于单片机芯片的二值化处理，在使用最大类间方差法、平均值法和直方图阈值法后均未得出较理想的二值图像结果，由于待测图像样本量比较少，根据人工经验选择法的准则最终确定了阈值 [ 7 ] [ 8 ]。确定阈值为200，效果如图5所示。 在完成了上述一系列连通域处理步骤后，可以运用MATLAB软件中最小外接矩形函数计算待测单片机芯片的外接矩形，获取单片机四个角点坐标为最终尺寸测量作铺垫。单片机芯片最小外接矩形如图6绿线标注所示。 图2. 图像处理总体顺序 图3. 高斯滤波效果对比。(a) 原图；(b) 滤波后图 图4. 灰度反转效果 图5. 阈值为200效果 图6. 单片机芯片最小外接矩形"
"用棋盘格标定法将单片机芯片图像中的尺寸转变为现实的尺寸。棋盘格标定法的操作介于相机自标定法和传统相机标定法之间，没有传统相机标定繁琐的步骤。 本系统采用MATLAB标定工具箱对相机进行标定，相机标定流程如图7所示。 图7. 相机标定流程 利用相机内外参数将像素坐标转换为物理坐标，分别对单片机芯片两条长宽进行尺寸测算求平均值。本实验测量了四个不同型号单片机芯片的长度与宽度，并分别对四组长宽测量结果做误差计算 [ 9 ] [ 10 ]。利用尺寸计算的双边求平均值的做法降低误差，但通过对单片机芯片实际测量值与系统测量值的对比发现仍然存在细微的误差。对于单片机长度及宽度的终值计算仅依赖简单的双边求平均方法，仅能有限的降低误差无法做到彻底消除误差。"
"尺寸检测在工业中应用极其广泛，而电子元器件是工业待检测物体中占比重很大的门类。应用机器视觉技术的尺寸检测系统取代了以往的人工测量，节省了大量的人力与物力，为工业检测技术的发展增添了动力。基于机器视觉的电子元器件尺寸测量系统的测量对象是单片机芯片，系统主要包括相机标定、图像采集、图像预处理与边缘提取和芯片长宽尺寸测量等步骤，其重点在于图像处理与尺寸测量两个部分。选型之后重点工作在对图像处理方法的对比研究，包括图像滤波、图像二值化以及边缘提取等步骤。其中图像滤波进行了对高斯滤波、均值滤波及中值滤波的对比分析，图像二值化进行了对直方图阈值法、最大类间方差法及平均值法的对比分析并最终结合三种方法使用了人工经验选择法确定了图像分割的阈值。采用连通域处理的方法对图像进行孔洞填充、边界平滑以及面积过滤最终确定了单片机芯片的最小外接矩形。最后完成对单片机芯片的尺寸测量并进行了误差计算与分析。"
