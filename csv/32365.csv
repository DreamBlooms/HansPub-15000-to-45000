"超声波流量计直接测量得到的流速为超声波传播路径上的线平均流速，它与管道截面平均流速不同，为了获得流量的准确值，必须对测量得到的流速进行修正。本文建立了基于BP神经网络的多声道线平均流速修正模型，根据超声波流量计实测实验获得充足的实验数据作为数据样本，对建立的模型进行训练和验证，通过对训练后模型的验证发现，建立的修正模型可以准确修正超声波流量计的声道流速。 关键词 :流量测量，超声流量计，流速修正，BP神经网络 Copyright © 2019 by author(s) and Hans Publishers Inc. This work is licensed under the Creative Commons Attribution International License (CC BY). http://creativecommons.org/licenses/by/4.0/"
"超声流量计作为一种流量测量仪表，具有非接触测量、无可动扰流件、无压损、适用管径和流体范围广等优势 [ 1 ] - [ 6 ] 。超声流量计主要由安装在测量管道上的超声换能器、转换器及流量显示和累计系统组成，通过检测超声波脉冲信号在运动流体中沿顺流方向和逆流方向传播的时差、相位差或频差而算出流速与流量的，其中外夹式超声流量计安装方便，已经被广泛用于工业现场的流量测量 [ 7 ] [ 8 ] 。 超声波流量计测量得到的流速为超声波传播路径上的线平均流速，它与管道截面平均流速不同，为了获得流量的准确，必须对测量得到的流速进行修正。目前，对光滑圆管中的流体流速进行修正是通过获得流体动力学修正系数进行的，而该系数主要根据流体力学半经验公式，通过获得流体的雷诺数得到，然而雷诺数又是管路内流体流速的函数，因此该修正方法在准确计算流体雷诺数时具有一定难度。此外，以上修正方法针对的管道内流场稳定的情况，当管路内流场不再均匀时，上述修正方法的准确性不高。 本文建立了基于BP神经网络的多声道线平均流速修正模型，根据超声流量计线平均流速实测实验获得充足的实验数据作为数据样本，对建立的模型进行训练和验证，克服现有修正方法受雷诺数计算以及流场影响。"
"以时差法外夹式超声波流量计中常用的V法安装为例，其测量原理如图1所示，通过检测超声波脉冲信号在运动流体中沿顺流方向和逆流方向传播的时间差可以算出流速，进而计算出管道内的流量。 图1. V法超声流量计测量原理示意图 两台换能器接收到超声往返信号的时间不同，存在一个时差 Δ t 。若超声波顺流时从换能器TRA到达换能器TRB所需的时间为 t 1 ，逆流时从换能器TRB到达换能器TRA所需的时间为 t 2 ，则有： Δ t = t 1 − t 2 = 4 v L 3 c 0 2 − v 2 sin 2 θ 2 (1) 式中， θ 2 为超声波在流体中的折射角； c 0 为超声波在被检测流体中的声速。一般情况下，被测流体的流速为每秒几米以内，而流体中的声速约为1500 m/s，即满足 c 0 2 远大于 v 2 sin 2 θ 2 ，因此，线平均流速 v 的表达式如下： v = Δ t c 0 2 4 d tan θ 2 (2) 只需测得 t 1 、 t 2 (即 Δ t )，就能得到声道上各点流速的平均值，即线平均流速 v ，经过流速修正之后可以得到截面上流体的面平均流速 v ¯ ，进而可以计算满管圆管流的体积流量。 超声波流量计测量的流速为超声射线传播路径上的线平均流速，它与管道截面平均流速是不相同的，为了准确获得流量，必须对流速v进行修正。根据流体力学半经验公式，对于光滑圆管，超声线平均流速v与面平均流速 v ¯ 之间的关系为： v = k ⋅ v ¯ (3) 式中， k 为流量修正系数，在层流流动状态时( Re < 2300 )修正系数 k = 4 3 ；当流动状态是紊流时，它的值与光滑圆管阻力系数 λ 直接相关： k = 1 + 1.25 λ 8 (4) λ 是流体雷诺数的函数，它可以被表示为： λ = 0.0032 + 0.221 Re − 0.237 (5) 当雷诺数 Re 在 5 × 10 3 ~ 1 × 10 7 的变化范围内，超声射线的平均流速v与管道截面平均流速 v ¯ 之间的差值将在4%~8%之间变化。如果不进行修正，则可能造成较大的测量误差，从而难以保证测量精度。 本文利用BP神经网络对超声流量计多声道测量得到的线平均流速进行修正，使得超声流量计测量结果更加准确。"
"要对超声流量计多声道测量得到的线平均流速进行修正，使超声流量计测量结果更加准确，首先需要建立BP神经网络修正模型。建立的BP神经网络修正模型包括四个输入，一个输出，四个输入分别为超声流量计四声道线平均流速测量值，一个输出为标定实验中水流量标准装置的流速输出值，建立的超声流量计四声道线平均流速修正模型如图2所示。 神经网络模型具有强大的非线性逼近能力，可以模拟复杂非线性函数关系，尤其是BP(Back Propagation)神经网络具有结构简单的应用成熟的特点，而且三层BP神经网络已经被证明可以解决任意非线性函数的逼近问题 [ 9 ] [ 10 ] [ 11 ] 。基于BP神经网络的特点，建立三层BP神经网络作为多声道超声流量计线平均流速的修正模型，建立的三层BP神经网络结构如图3所示。 如图3所示，建立的BP神经网络模型具有四个输出和一个输出。输入分别为流量计实测实验获得的四声道线平均流速，输出为水流量标准装置输出的流体流速准确值。BP神经网络还包括多个隐藏神经 图2. 超声流量计四声道线平均流速修正模型 图 节点，通过反复尝试最终确定节点数为38时，平方和误差最小。隐层fhid传递函数选取tan-sigmoid函数，输出层fout则学选取pure-line函数。神经网络的训练过程是寻找网络最优参数值得过程，判断标准则是神经网络预测值与真实值之间的平方和误差最小 [ 9 ] [ 10 ] 。通过足够的数据样本对BP神经网络的训练，最终可以确定传递矩阵V ih 和W ho 。网络训练的收敛速度取决于训练算法的选择，trainlm是一种需要大量内存的优化算法，收敛速度更快，精度更高，这使得trainlm成为BP神经网络中的默认训练算法 [ 11 ] [ 12 ] [ 13 ] 。trainlm在收敛速度方面具有很大的优势，而学习速度越大，trainlm的收敛速度越快。本文使用trainlm函数训练建立的BP神经网络模型，并设置学习率为0.01。 超声流量计实测试验中，选择声道1、声道2、声道3和声道4进行超声流量计流量实测实验，四声道安装示意图及照片如图4所示。管路内流体介质选取水，流速为1 m/s。超声流量计选择唐山汇中外夹式超声流量计，按图4声道设置方式安装。实验在中国计量科学研究院流量实验室进行，实验装置为水流量标准装置，流量范围(0.3~500) m 3 /h，可以对内径(65~200) mm的流量计进行校准，该实验装置的原理为静态质量法，其最佳不确定度可达0.05% (k = 2)。 超声流量计实测试验时，管路内流体介质选取水，流速为1 m/s。实验开始后采集超声流量计四个声道的流速输出数据及水流量标准装置输出的流速值。实验共获得136组测量数据，选取其中116组作为BP神经网络模型的训练数据集，20组作为测试集。训练时，计算的目标精度设置为10 −4 ，模型经过37,793步运算，耗时57 s后进入收敛状态。 图4. 四声道安装示意图及实物照片 使用预留的20组数据对训练后的修正模型进行测试，BP修正模型预测结果如图5所示，从图中可以发现，训练后的修正模型可以以较小误差逼近流速的真实值，修正模型基本达到了修正声道流速值得目标。为了验证修正模型的修正效果，将BP神经网络修正模型的修正结果与传统的计算流体动力学修正系数的修正方法进行比较。比较结果如图6所示，从图中可以发现，本文建立的修正模型修正效果要好于传统方法。 图5. BP修正模型计算结果与水流量标准装置输出值对比图 图6. BP修正模型修正结果与传统修正方法获得结果比较"
"本文建立了基于BP神经网络的超声波流量计多声道线平均流速修正模型，并设计了四声道超声流量计实测实验。使用超声波流量计实测实验获得充足的实验数据作为数据样本，对建立的基于BP神经网络的四声道线平均流速修正模型进行训练和验证。通过对训练后的修正模型进行验证发现，本文建立的修正模型可以准确对超声流量计声道线平均流速进行修正，修正效果优于传统的计算流体动力学修正系数的修正效果。"
