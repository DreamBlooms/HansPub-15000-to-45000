"随着互联网技术的快速发展，信息化时代对测绘地理信息行业的人才培养提出了新的要求，培养具备熟练外业实践技能和创新自学能力的复合型人才成为各高校的目标。本文对测绘传统仪器教学模式进行分析，引入“互联网+对象全景技术”，利用JavaScript脚本语言开发全站仪三维仿真网页操作系统，实现对全站仪部件、测量原理、仪器操作的介绍和功能模拟，解决了测量仪器教学理论与实践难以融合，教师教学难，学生学习效率低的难题。此原型系统在我校测量仪器教学中进行了试验，结果表明结合该系统进行教学对于促进学生更好地掌握仪器的操作及原理具有明显的成效。 关键词 :仪器教学，全站仪，互联网+，全景技术，网页系统 Copyright © 2019 by author(s) and Hans Publishers Inc. This work is licensed under the Creative Commons Attribution International License (CC BY). http://creativecommons.org/licenses/by/4.0/"
"测绘工程是一个理论与实践紧密结合的专业，各高校对测绘专业学生的培养都是理论课程与实践课程相结合、并且在理论教学的基础上更加注重外业实践。张燕茹等 [ 1 ] 人认为实践教学是应用型人才培养的主要环节和关键因素，黄张裕 [ 2 ] 和郭敏 [ 3 ] 等人均对测绘的实践教学体系改革进行了探索。全站仪等测量仪器教学是外业实践的基础，利用有限的课堂教学时间，让学生理解仪器操作的原理并掌握仪器操作的步骤，一直是工程测量教学追求的目标。传统的解决方案是多媒体与实物教学相结合，随着学生人数的增加和理论课时的不断压缩，这种传统教学模式受到了极大的挑战，同时、受限于测量仪器价格昂贵，实训课上采用分组作业，无法实现人手一台仪器，不利于学习完整的仪器操作内容。 网络教学、在线课堂是“互联网+”时代的一种新兴教学模式，这种模式摆脱了传统教学特定时空的局限，能够无差别的将教学内容传达给每一位学生，并且能够同时面向更多的人，以较小的教学资源投入取得较高的教学效益。对象全景技术又叫虚拟现实全景技术，是一种视觉新技术，具有宽视角、图像真实和三维立体等特点，被广泛应用于多个领域。通过全景技术得到的图像是采用鱼眼镜头拍摄的真实图像，被拍摄的物体会显示出鲜明的纵深透视效果，利用软件进行处理后，可发布成为在网页上浏览的3D全景文件。 将互联网思维应用到日常实验教学环境中能够显著地提高教学及管理质量 [ 4 ] [ 5 ] [ 6 ] [ 7 ] ，邓兴升 [ 8 ] 认为虚拟平台下的摄影测量教学模式是克服实验设备短缺的有效途径，马春艳等 [ 9 ] 基于虚拟现实仿真技术对测绘仪器的模型设计进行了研究，赵强 [ 10 ] 提出将虚拟现实技术与测绘专业实践相结合，并基于该思想设计了一套虚拟实习系统。本文将“互联网+对象全景技术”引入测量仪器教学中，利用JavaScript脚本语言开发了全站仪三维仿真网页操作系统，为学生提供仿真的仪器操作练习场景，从而有效地改善传统测量仪器教学模式存在的弊端。"
"目前市面上制作全景的软件众多，其中Object2VR功能强大，支持皮肤自定义、热点加载和HTML5网页格式，本研究主要采用Object2VR软件。全景模型制作过程中会根据全站仪的各个部件建立交互热点，作为后期整合系统的编译接口，李华蓉等 [ 11 ] 已经对全站仪对象全景模型的制作原理及过程进行了详细的介绍，此处不再赘述。 图1. 系统设计流程图 全站仪三维仿真网页操作系统属于网页前端系统，通过开源代码中控制交互热点和图片调用的接口可将Object2VR软件制作好的全景模型嵌入网页操作系统中，与Dreamweaver CS6开发环境进行融合，完成全景视觉和操作系统的一体化，实现全系统的构建。系统中制作了不同的控制热区，基本的Bottom控件、仪器全景模型上的交互热点和控制热区都绑定了鼠标事件，通过事件交互完成页面之间的跳转和场景图像的综合处理，进而控制整个系统的运行。系统设计主要包括模块化功能设计、场景数据处理和网页布局设计三部分(如图1所示)。功能模块包括部件、测量原理及仪器操作三方面的仪器介绍模块和系统操作模块，其中部件介绍模块主要依托仪器全景模型，通过交互热点对各部件的功能、工作原理和使用方法进行介绍；测量原理和仪器操作模块分别借助多媒体课件和影音数据讲解仪器的基本测量原理和操作过程；系统操作模块是整个系统的核心，该模块基于全站仪各部件的功能，通过用户交互命令调用场景图像(如对中场景、整平场景和瞄准场景)，并对其进行平移、缩放、模糊化、叠置和虚化等一系列综合处理，从而模拟仪器各部件的功能及仪器对中、粗略整平、精确整平和瞄准观测过程。通过交互式窗体设计和辅助布局设计使网页操作界面更加的人性化，保障用户良好的操作体验。"
"该模块主要包括部件组成介绍、仪器全景外观展示和部件功能介绍三部分。部件组成介绍采用相对正反两张照片对仪器的部件组成及其名称进行说明，支持窗体和全屏两种模式；全站仪外观利用由仪器整体水平方向和照准部竖直方向两组张照片建立的全景模型进行形象直观的展示，通过热区事件控制水平和竖直两个状态的切换，支持旋转、缩放操作，模型上制作的交互热点会在鼠标移至部件区域时显示其名称；部件功能介绍将结合部件图片，同时辅以文字对全站仪各部件的功能、工作原理和使用方法教进行准确精简的说明。图2为部件介绍模块页面，其右侧嵌入了全景模型，通过模型上各部件的交互热点，实现对各部件的介绍，当用户点击模型上的某一部件时(如物镜)，系统将从数据库调取相应的网页显示在界面中间的窗体中。 图2. 系统部件介绍模块页面  测量原理及仪器操作模块结构相对简单，借鉴多媒体教学模式、突出影像动态教学特点，分别利用PPT和视频对全站仪基本测量原理和仪器操作进行介绍，两者的窗体布局设计相同，左侧均嵌入全景模型便于结合仪器进行介绍(如图3所示)。考虑到测量的基础数据来源和教学对象的广泛性，测量原理模块主要对全站仪的距离、角度和高程测量等基础原理进行介绍。由于系统模拟主要针对基本的对中、整平和瞄准过程，因此仪器操作模块的视频也分为安置仪器，对中、整平、再次对中和精平几部分进行讲解，其中结合理论和实践对仪器架设、快速对中整平的一些技巧进行了说明，便于学生快速学习仪器的基本操作。 图3. 系统测量原理模块页面  系统操作模块是整个系统的核心部分，其利用控制热区图像、基础背景及前景图像搭建操作控制平台、模拟仪器操作环境，通过控制热区和全景模型上的部件热点进行人机交互，调用可变场景图像并对其进行综合处理，模拟仪器各部件的功能和基本操作过程。该模块包含仪器对中、粗略整平、精确整平和瞄准观测四个子系统，页面左侧窗体的菜单用于在各子系统间切换，同时嵌入了动态旋转的全景模型，中间窗体对各子系统的操作方法进行说明，右侧窗体为仪器操作示意图(如图4所示)。各子系统的页面布局与主页相似，纵向包含三个窗体，左侧为切换菜单和对应的操作示意图，中间嵌入了仪器全景模型，其与右侧的场景窗体共同组成各子系统的操作控制平台。 图4. 系统操作模块主页  对中子系统的场景窗体由控制点背景图像、对中圆环前景图像和安置仪器的脚架控制热区图像组成，其中前景和背景图像模拟通过对点器所看到的场景，窗体右下角的控制热区图像用于模拟控制脚架的移动。该子系统的模拟操作包括对点器调焦和仪器对中两部分。① 调焦模拟：系统为前景和背景图像添加了模糊度属性，进入该子系统后，会分别赋予两张图像一个确定范围内的、随机的模糊度值。鼠标左右键单击仪器全景模型上对点器的目镜调焦螺旋和视野调焦螺旋可分别改变前景图像和背景图像的模糊度值，直至图像完全清晰，从而模拟对点器调焦过程。② 对中模拟：进入该子系统后，前景图像会被随机分配一个确定范围的坐标，控制热区图像上下左右四个区域绑定了相应的事件，鼠标点击这些区域表示脚架向对应的方向移动，对中圆环图像会随着点击位置的不同沿屏幕坐标轴方向移动，最终使对中圆环与控制点重合，实现仪器对中过程的模拟，图5分别为对中前和对中后的场景图像。  整平系统包括粗略整平和精确整平两部分，其场景窗体的构成较之对中子系统仅是更换了相应的图像，各场景图像的作用也基本一致，此处都不再赘述。该系统通过对气泡前景图像进行移动和虚化处理模拟全站仪调节气泡居中的整平过程。① 粗略整平模拟：进入系统后，圆水准气泡前景图像会被分配一个坐标(与前文对中过程相同)，圆水准器背景图被均分为三个扇形区域，利用控制热区图像中脚架的三个单脚控制气泡在圆水准器中移动，鼠标点击各单脚的上下部分对应于升降该单脚。利用某一确定单脚热区控制气泡移动时，其路径与气泡所处的区域有关，当气泡所处区域与单脚对应时可直接控制气泡居中，否则将沿其它规划路径移动、无法居中。此外，圆水准气泡图像添加了透明度属性，通过设置合适的透明度对其进行虚化，模拟气泡的通透性，下文管水准气泡同理。图6为粗略整平前后的场景。 图5. 对中前(左)和对中后(右)的场景 图6. 粗略整平前(左)和整平后(右)的场景 ② 精确整平模拟：与粗略整平模拟不同，该部分背景图像中的管水准器存在水平和竖直两个状态(如图6所示)，鼠标点击管水准器可以切换状态。管水准器处于水平状态时，与控制热区图像中左右两个整平脚螺旋平行，此时鼠标左右键点击平行的两个脚螺旋热区可控制管水准气泡沿管水准器水平移动，而当切换至竖直状态时，鼠标点击第三个脚螺旋可使管水准气泡沿管水准器在竖直方向上移动。两种状态的切换对应于将仪器旋转90˚，尽管两个状态是分开进行调节，但管水准气泡的位置坐标是统一进行管理，在水平状态调节第三个螺旋同样会改变气泡的竖直方向位置，将在管水准器切换到竖直状态时表现出来，反之亦然。图7分别为水平状态精确整平前(左)和竖直状态精确整平后(右)的场景。  瞄准子系统与对中子系统中运用的原理基本相同，此处不再赘述。具体实施上有两点差异，首先是场景窗口中没有控制热区图像，主要利用全景模型的交互热点进行控制。其次，该部分模拟了粗瞄和精确瞄准两个场景，背景分别为棱镜的远景和近景图像。进入系统时，首先呈现的是粗瞄场景(省略粗瞄过程，右键点击粗瞄器热点直接完成粗瞄)，鼠标点击目镜或物镜热点可切换至精确瞄准场景，进而模拟调焦和瞄准两个过程，控制目镜十字丝前景图像移动的部件热点为水平和竖直微动螺旋(默认制动螺旋已锁定)，模糊度控制为相应的调焦螺旋热点。图8分别为粗瞄场景瞄准前(左)和精确瞄准场景瞄准后(右)的界面。 图7. 精确整平过程中的相关场景 图8. 瞄准过程中的相关场景"
"全站仪三维仿真网页操作系统(如图9所示)在我校大二测绘专业《控制测量》及土木工程专业《工程测量》两门课程的全站仪教学中进行了应用，随机选择了这两个专业的部分班级进行试验。通过对结合该系统进行教学和利用传统仪器教学模式进行教学的不同班级的教学成效进行对比，以理论课后关于全站仪操作的调查报告成绩和全站仪课间实验的学生仪器操作情况作为评价指标，对该原型系统的教学应用进行了评价，最终结果表明结合该系统进行教学的班级仪器操作明显更加的熟练，学生对仪器操作的步骤和流程掌握的更好。 深入分析可知，该系统在三维全景模型的基础上，模拟了仪器对中、整平、瞄准等操作场景，能让学生以第一人称视角融入其中，教师结合该系统进行理论教学能让学生更好的理解方法原理、有助于掌握仪器的操作流程，并且支持学生课余时间自学测量仪器基本操作；网页系统能够形成兼具通用性、便携式和低成本的虚拟仪器，可以减少仪器设备的经费投入，便于实验室机房大量配置，将部分实训课程转化为室内课，保证单人配置进行仪器模拟操作，改善分组作业无法保证实训环节全面覆盖的弊端，而且虚拟仪器最大的优势是不怕损坏，对于学生刚接触仪器十分适用。 图9. 全站仪三维仿真网页操作系统主页"
"分析传统测量仪器教学存在的弊端，将“互联网+对象全景技术”应用于全站仪教学系统研究中，开发了兼具仪器介绍和功能模拟、教师教学和学生自学的全站仪三维仿真网页操作系统。该系统能够有效的改善传统测量仪器教学存在的弊端，提高教师教学效率，支持学生自学仪器基本操作，以较少的资源投入创造大量的教学收益，为信息化时代的仪器教学模式改革提供了一个方向，具有普遍推广和进一步研究的意义。目前该系统侧重于模拟仪器的基本操作，融入量测、计算功能对仪器进行深度建模，同时建立更加细致的矢量化场景模型，逐步实现仪器的完全虚拟化将是未来的进一步研究方向。"
