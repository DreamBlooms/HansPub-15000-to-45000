"光谱成像技术因其高准确率、高分辨率、连续性、遥感性等多方面优势，使其在农业、矿物识别、植物生态学、食品安全、医学诊断、航天等领域有着无可替代的作用，并且因其广泛的应用前景激发了众多研究者的研究兴趣。本文阐述了光谱相机的原理及遥感技术用于水质检测现状，为探究光谱相机用于探测水体污染物的可行性以及探测结果质量，设计并进行了模拟实验。采集图像分析后发现模拟的污水在绿光波段反射率最高，在红光波段和蓝光波段反射率不是特别高，相比之下红光波段的反射优于蓝光波段，同时利用灰度均值的计算结果找到了最佳观测点。此研究可作为实际中光谱相机监测水污染的一种参考。"
"多光谱成像技术是应用于很多不同的研究领域的一种新兴技术 [ 1 ]，多光谱成像技术可以得到目标各像素点的高分辨率光谱。 水的质量分类指标其中包括：色度、气味、浑浊度、PH值、COD (化学需氧量)、BOD (生化需氧量)等等 [ 2 ]。现阶段被广泛使用的水质监测技术有原子光谱技术、生物传感技术、化学分析技术、电化学分析技术、色谱分离技术和分子光谱技术等 [ 3 ] [ 4 ]。由于操作复杂、检测时间长、成本高、寿命短等不足，目前被使用最多的方法是分子光谱技术 [ 5 ]。目前水质监测技术的方法大多是利用传感器投入水中或者取样后进行检测，对面积较大的水域进行监测时，有工作量较大、周期长等缺点，很难做到宏观、准确地监测愈发严重的水体污染环境。遥感技术是通过传感器采集物体辐射、反射的光波，然后进行处理得到影像资料，以此对物体镜像进行探测、识别 [ 6 ]，这样就可以实时、迅速的得到水域环境的质量情况，将其应用于水体污染物的检测中可以发挥其测量精度高、测量范围广等优势，同时我们考虑将光谱相机获取的水样图像通过一种全新的分析方法BRDF (双向反射分布函数法)进行分析，由此来评测水样被污染的情况。遥感技术从诞生开始就获得了极高的关注度，在对地观测、空间探测方面研究人员想要同时得到目标物的光谱信息和影像信息，这就导致了光谱技术与成像技术互相融合，从而衍生出一种全新的技术即光谱成像技术 [ 7 ] [ 8 ] [ 9 ]。近些年由于无人机的兴起与蓬勃发展，多光谱技术和高光谱技术有了新的需求与发展，现如今人们正在将多光谱技术、高光谱技术应用于无人机上进行低空作业，包括农作物监测、水污染监测、土壤检测等等 [ 10 ] [ 11 ] [ 12 ]。"
"20世纪80年代，第一台成像光谱仪在美国被研制出来。光谱相机拥有多光谱相机、高光谱相机、超光谱相机等多种类型，其中多光谱相机可以在红外、近红外、紫外光等范围进行拍摄，利用滤光片、分光镜等设备对光线进行过滤、分解，可以在感光胶片上形成目标在不同波长的光波下的光谱图片，而且图片分辨率较高。光谱相机的基本结构由图像采集系统、光学系统、控制与信息处理器、探测器等装置组成。  BRDF最早是在光辐射角度进行定义，是用来描述光线如何在物体表面进行反射，表现其空间反射分布特性和光谱特性，其理论认为一个表面被一个方向光照射后会发生反射，但是在表面上方整个半球的每个方向都会有反射光出射，各个方向上反射的能量是不同的，BRDF表示的某个确定反射方向的光与指定方向入射光的关系： f ( l , v ) = d L 0 ( v ) d E l (2-1) 其中f就是BRDF函数，l、v分别为入射光和反射光的方向向量。 d L 0 ( v ) 反射光方向上的微分辐射率， L 0 ( v ) 是指表面上全部入射光对v这一个反射方向的辐射率，微分辐射率是指仅从l这一个方向入射的光对v方向的反射辐射率， d E ( l ) 是指仅从v方向上接收到l方向入射光的辐照度，E为v方向上接收到所有入射光的辐照度，而 d E ( l ) 同样是指特定为l入射方向的辐照度。 辐射功率是指单位时间内单位面积上的总辐射能，用Φ表示，单位为J/s，定义公式为： Φ = d Q d t (2-2) E表示的是辐射照度是指受照面单位面积上的辐射通量，定义如下： E = d Φ d A (2-3) L为辐射率，指的是某单位面积内的单位立体角的辐射通量密度，其中 d A ⊥ 是面积微分dA在与光线垂直方向上的投影，如下图1。 L = d Φ d ω d A ⊥ (2-4) 图1. 微分面积投影图 BRDF也可以用表面上半球建立球坐标系来表示，如下图2。θ为极角是指入射或反射光线与法线的夹角，同时在平面上建立一个坐标轴，入射反射光线在平面上投影与该坐标轴的夹角为ϕ，称为方位角。由此BRDF也可以用极角和方位角表示： f ( θ i , ϕ i , θ o , ϕ o ) ，对于各向同性的物质，可以用两光线投影的夹角ϕ来代替 ϕ i 和 ϕ o ，即 f ( θ i , θ o , ϕ ) 。 图2. 球坐标系"
"手机一部、红色滤光片、蓝色滤光片、绿色滤光片、一碗清水、一碗污水(模拟)、空碗、直尺、卷尺、量角器。  实验通过用手机摄像头以及滤光片组合模拟光谱相机，通过从对污水样本拍摄图像的方法来对污水进行分析，实验中用清水的拍摄图像作为对比，同时通过改变污水样本的位置、拍摄的方向，从而获得不同的图像。通过测量的极角、方位角来计算BRDF，对图像进行分析，得出结论。 通过一个模拟实验完成图像取样，模拟实验原理图如下图3所示。 图3. 模拟实验原理图 为了便于研究，设光源在地上的投影点O为坐标系原点，以此建立一个三维坐标系，X、Y、Z轴正方向由图中设计给出。从坐标轴X方向上选取3个点A、O、B，这样可以使BRDF中的方位角为0度，便于计算，设OA = L 1 ，OB = L 2 ，光源S到投影点的距离SO = H，将污水样本分别放置在A点、O点、B点，并且分别从A、B、O三个点上方平面上选取4个观察点，对污水样本进行无滤光片、有滤光片等4种情况下的图像获取工作，然后再对清水在同样的位置进行图像获取作为参考图像。以A点为例，从A点上方等高度平面上选取四个观察点图4、图5，四个观测点向XOY面的投影分别落在X、Y轴线方向上，这四个观测点同等高度设为h并且相对于Z轴距离相同设为l。 图4. XOZ平面上的两个观测点 图5. YOZ平面上的两个观测点 由相同的h以及相同的l可以得到在A点上方四个观测点观察时反射光线的极角相同，即 θ o 1 = θ o 2 = θ o 3 = θ o 4 = θ o A ，其他两个点O、B处的实验方法与A点相同。  首先利用手机摄像头和滤光片相结合的方式作为模拟成的光谱相机，然后向清水中加入酱油、醋、油、研磨后的汁液混合后作为模拟而成的污水样本，再向碗中加入相同深度的清水作为参照，再取一个干净的相同大小的空碗消除误差。使用家中的日常使用的汞灯灯管发光作为光源，光源点设定为灯管的中心点即为S,由测量得到SO之间的距离H为262.5 cm，取O两侧同一直线上的两个点作为A、B点，取点坐标为A (−70, 0, 0)、B (30, 0, 0)以及O (0, 0, 0)作为污水水样、清水、空碗放置点。 用手机作为拍照设备，将水样由污水、清水、空碗的顺序依次摆在A点、O点、B点，然后从四个观测点进行拍摄。由此选择观测点1、3向XOY面的投影在X轴上，观测点2、4向XOY平面的投影点连线垂直于X轴。以O点的4个观测点投影为例图6，A、B两点处的观测点选择方向相同，但A、O、B三点选4个观测点高度互不相同，即反射角不同。 图6. O点处四个观测点在XOY面上的投影 拍摄的图像如下表1~12所示： Table 1无滤光片绿色滤光片蓝色滤光片红色滤光片 表1. A点处观测点1拍摄的特征图片 Table 2无滤光片绿色滤光片蓝色滤光片红色滤光片 表2. A点处观测点2拍摄的特征图片 Table 3无滤光片绿色滤光片蓝色滤光片红色滤光片 表3. A点处观测点3拍摄的特征图片 Table 4无滤光片绿色滤光片蓝色滤光片红色滤光片 表4. A点处观测点4拍摄的特征图片 Table 5无滤光片绿色滤光片蓝色滤光片红色滤光片 表5. O点处观测点1拍摄的特征图片 Table 6无滤光片绿色滤光片蓝色滤光片红色滤光片 表6. O点处观测点2拍摄的特征图片 Table 7无滤光片绿色滤光片蓝色滤光片红色滤光片 表7. O点处观测点3拍摄的特征图片 Table 8无滤光片绿色滤光片蓝色滤光片红色滤光片 表8. O点处观测点4拍摄的特征图片 Table 9无滤光片绿色滤光片蓝色滤光片红色滤光片 表9. B点处观测点1拍摄的特征图片 Table 1 0无滤光片绿色滤光片蓝色滤光片红色滤光片 表10. B点处观测点2拍摄的特征图片 Table 1 1无滤光片绿色滤光片蓝色滤光片红色滤光片 表11. B点处观测点3拍摄的特征图片 Table 1 2无滤光片绿色滤光片蓝色滤光片红色滤光片 表12. B点处观测点4拍摄的特征图片"
"为了实验准确，我们让污水样本的液面高度与清水液面高度相同，由测量得到液面高度约为2.5 cm，通过量角器测量A点处的入射角为15˚、反射角为28.5˚，O点处的入射角为0˚、反射角为26.5˚，B点处的入射角为6.5˚、反射角为30.5˚。这里我通过使用matlab提取A了点第一观测点处的RGB值并与我们通过滤光片拍摄的图样进行对比，由于滤光片并不是专业的滤光片，所以图样并没有特别清晰，matlab中对RGB三种颜色提取的波段分别为700.0 nm左右的红光(R)，546.1 nm左右的绿光(G)，435.8 nm左右的蓝光(B)。 由图7和图8可以看出模拟的污水样本中的酱油、醋和菠菜汁液中的某些物质对光线中的红色波段-的光具有反射作用，这类物质在污水中通常需要化学试剂或微生物进行降解，即污水的COD、BOD指标，所以可以通过光谱相机的红色滤光片拍摄，从而监测污水中COD、BOD、水华等污染物的污染量及面积。 从图7、图9中可以看到提取的绿色主要来自菠菜汁液中的叶绿素，拍摄的图片虽然有些模糊，但还是显示出了污水中叶绿素的分布，通过光谱相机用绿色滤光片可以监测水质是否被叶绿素、藻类等浮游植物污染同时可以看出污染的面积大小。通过图7和图10中三幅图像的对比我们发现实验中透过蓝色滤光片拍摄所得到的污水中很难分辨出其污染物含量以及污染面积情况，利用matlab提取原污水图样的蓝色成分以后，所得到的图片只能看到叶绿素部分的轮廓，反射蓝色波长光的情况并不是很好，这也跟我模拟污水时并未加入反射蓝色光波的物质有关，但还是可以看到叶绿素稍微可以反射出少许蓝色光波，而且在污水监测时对藻类、水华等情况的监测时，藻类中的藻蓝素会对太阳光中435 nm左右波长的光(蓝光)反射，所以通过绿色和蓝色滤光片共同来监测水体水华、藻类等污染情况也不失为是一种很好的方法。 图7. 无滤光片时的拍摄图像 图8. 利用matlab提取红色后的图片、透过红色滤光片拍摄的图片 图9. 利用matlab提取绿色后的图片、透过绿色滤光片拍摄的图片 图10. 利用matlab提取蓝色后的图片、透过蓝色滤光片拍摄的图片 用matlab对3个点位12张无滤光片拍摄的照片进行了灰度处理，然后用matlab计算了A、O、B三个点位4个观测点方向的平均灰度值，由灰度原理可知，灰度均值越高图片亮度也就越高，间接的来表示该方向反射率的大小，通过测量并计算得到表13中的数据。 Table 1 3 观测点 BRDF表示 灰度均值 A点 1 f (15˚, 0˚, 28.5˚, 180˚) 110 2 f (15˚, 0˚, 28.5˚, 270˚) 95 3 f (15˚, 0˚, 28.5˚, 0˚) 87 4 f (0˚, 0˚, 28.5˚, 90˚) 86 O点 1 f (0˚, 0˚, 26.5˚, 180˚) 177 2 f (0˚, 0˚, 26.5˚, 270˚) 182 3 f (0˚, 0˚, 26.5˚, 0˚) 181 4 f (0˚, 0˚, 26.5˚, 90˚) 185 B点 1 f (6.5˚, 0˚, 30.5˚, 180˚) 195 2 f (6.5˚, 0˚, 30.5˚, 270˚) 190 3 f (6.5˚, 0˚, 30.5˚, 0˚) 192 4 f (6.5˚, 0˚, 30.5˚, 90˚) 190 表13. A、O、B点处的灰度及BRDF表示方法 由表中灰度均值分析可以看出，在A点(−70, 0, 0)处四个观测点方向，1号观测点的灰度值最高，即监测污水时获取的图片亮度、质量会更好一些，在O点(0, 0, 0)处观测点4的灰度值最高，拍摄出的照片亮度更好，在B点(30, 0, 0)处通过matlab计算出灰度值在观测点1进行拍照时，成像质量更好一些。 在利用matlab计算灰度时，由于在A、B两观测点拍摄的照片高度较O点高一些，所以用原始图片计算灰度均值时会有一些由碗、地瓷砖等不属于污水部分的物体产生的误差。由此我们通过截取碗中污水的一部分进行灰度值的对比分析，以此来观察污水在不同波段情况下的反射情况，减少非污水部分产生的影响。这里我们截取了A点处观测点1的四张图片的一部分(图11)，控制四张图片所包含的像素点和内容相同，图片分辨率为(194 × 153)，然后利用matlab对图像进行了灰度处理，接着从图片的所有像素点中随机提取了20个像素点，并且对四张图片的这20个像素点的灰度值进行了计算，以无滤光片情况为标准对其他三张图片做归一化处理，以此来提高三种波段的对比精度。 图11. 截取的四张污水图 用matlab处理后的图片像素数据是一个194 × 153的矩阵，其中每一个点就是一个像素点，我们随机提取的20个像素点坐标为(20, 30)、(25, 70)、(15, 100)、(10, 150)、(30, 180)、(50, 25)、(60, 80)、(40, 110)、(55, 140)、(45, 190)、(85, 35)、(70, 80)、(100, 115)、(90, 150)、(105, 185)、(135, 25)、(110, 75)、(145, 120)、(150, 165)、(125, 190)，将坐标点按上面顺序排为1~20号，以序号为横轴，灰度值为纵轴画出无滤光片时的图线如图12所示，将蓝、绿、红滤光片下的灰度值归一化后的图线如图13~图15所示，红、蓝色滤光片图像灰度值对比值如图16所示。 图12. 无滤光片时图像20个像素点的灰度值 图13. 蓝色滤光片图像归一化后的灰度值 图14. 绿色滤光片图像归一化后的灰度值 图15. 红色滤光片图像归一化后的灰度值 图16. 红、蓝色滤光片图像灰度值对比图 设A 0 为不加滤光片时图像的灰度值，A 1 为图3~9蓝色图片的灰度值，A 2 为图3~9中绿色图片灰度值，A 3 为图11中红色图片的灰度值。从图3~11中可以看出污水在蓝光波段(430~480 nm左右)处的灰度值与原始灰度值之比A 1 /A 0 在0.4上下浮动，通过计算灰度值的平均值A 1 = 29.55，而无滤光片图像的灰度值均值为A 0 = 82.4，可以看出我模拟的污水在蓝光波段的反射成像效果不是特别理想，可以说明模拟污水中并没有特别大量反射蓝色光的物质存在。从图14中我们发现归一化后的灰度值较高，整体灰度值基本都处于0.8~1之间的范围，由此可以说明污水中还有大量可以反射绿色波段光(510~530 nm左右)的物质。通过计算后的灰度值均值为A 3 = 31.8，成像质量也不是十分理想，但是比蓝光波段处的成像质量要好一些。这是因为污水中加入的酱油、醋等物质有对红色波段的光产生反射，对蓝光波段反射的物质较少。"
"由于世界水资源十分短缺、水污染急需治理和检测，遥感技术和光谱相机的快速发展以及广泛的应用前景，将光谱相机应用到水体污染物的监测中是可行的。 应用光谱相机的原理后进行了模拟实验，用手中现有的设备模拟光谱相机探测水体污染物，使用三种不同颜色的模拟滤光片获取了污水的图像信息，通过对比消除清水、空碗的影响，并通过matlab对图像进行了几种处理。发现模拟污水中COD、BOD成分用红色滤光片拍摄时分辨效果较好，用绿色滤光片采集的图片中叶绿素、藻类分辨效果较好，用蓝色滤光片采集的图样中分辨效果并不理想。同时用BRDF表示了实验中三个放置点分别的最佳观测点为f (15˚, 0˚, 28.5˚, 180˚)、f (0˚, 0˚, 26.5˚, 90˚)、f (6.5˚, 0˚, 30.5˚, 180˚)，利用排除影响因素后的拍摄图进行分析后发现模拟的污水在绿光波段(510~530 nm左右)反射率最高，在红光波段(600~720 nm左右)和蓝光波段(430~480 nm左右)反射率不是特别高，相比之下红光波段的反射优于蓝光波段，说明光谱相机监测水污染具有可行性。"
