"为评价瞬时最优AMD控制减震效果，建立了一栋20层结构瞬时AMD最优主动控制的理论分析模型，并利用Matlab语言编制了求解软件。计算结果表明：瞬时主动AMD控制具有明显的减振效果。可以通过调整权重参数Q、R达到目标减振效果。顶层控制力最大，当Q = 1e8、R = 0.1时减振效果较好，顶层控制力幅值为楼面重力荷载7.9%。瞬时最优控制及LQR控制可达到同样效果，动力反应时程几乎相同。LQR控制效果不受采样步长影响，瞬时控制效果受采样步长影响。瞬时最优控制效果受外扰力滞后效应的影响，动力反应有所放大。 关键词 :状态变量，瞬时最优控制，滞后，层间位移，龙格–库塔方法 Copyright © 2020 by author(s) and Hans Publishers Inc. This work is licensed under the Creative Commons Attribution International License (CC BY 4.0). http://creativecommons.org/licenses/by/4.0/"
"主动控制AMD [ 1 ] 一般是利用液压作动器向被控结构施加反作用力，减轻结构的地震动力反应，液压作动器一端连接到结构，另一端连接到质量块或另一个结构形成相互作用的结构 [ 2 ]。最优控制是为兼顾响应与控制两方面相互矛盾的要求而使其性能指标达到最优的一种控制。确定性的Ricatii开环 [ 3 ] 或开–闭环 [ 3 ] 最优控制中，需要预先知道下一步的荷载，而这通常是不可能的，而Ricatii闭环 [ 3 ] 最优控制中没有考虑外扰力的影响，因此也不能实现真正的最优控制。当系统存在随机内扰与外扰时，这种最优控制称为随机最优控制。对于高阶系统，确定最优控制是很复杂的，难以用解析的形式来表示。而具有二次型性能指标的线性系统的最优反馈控制律则能用解析的形式来表示，计算也相对简单，因而在现代控制理论中占有很重要的地位。瞬时最优控制不需预知外扰力，只与t时刻的外扰力d(t)与前一时刻(t − Δt)的状态量、控制力与外扰力有关，不需要求解Riccatii方程。1987年，J. N. Yang首次提出了瞬时最优控制算法 [ 4 ]；1998年谭平，阎维明，周福霖提出了主动变刚度(AVS)控制系统的瞬时最优控制算法 [ 5 ]；2003年杨飏，欧进萍研究了瞬时最优算法中时间间隔和权矩阵对结构控制反应的影响 [ 6 ]；2011年杨飏，寇捷推导出瞬时最优控制算法的能量平衡等式，进行基于能量法的瞬时最优控制算法的参数分析 [ 7 ]；2015年童少伟基于瞬时最优化控制推导了近似离散瞬时最优化控制算法 [ 8 ]；2016年童少伟，唐怀平基于改进遗传算法,对近似离散瞬时最优主动控制器位置优化进行了讨论 [ 9 ]；2017年李雪平，余超等针对受到非平稳地震激励作用下的连体结构提出一种基于时域显式法的瞬时最优控制算法 [ 10 ]；已有的文献大多偏向于理论研究，却很少对其具体控制效果及影响进行系统性分析，由于振动台试验的成本较高以及实际地震检验的长周期性以及缩尺试验与实际结构的差异性，实际中较难完成对其控制效果的真实模拟，本文以一栋20层结构设置主动控制AMD为例，采用瞬时主动最优控制算法，首先建立其数学模型，然后根据结构动力反应数值计算方法编写求解软件，根据计算结果分析瞬时最优主动控制AMD的减振效果。"
"同样可以根据虚功原理或拉格朗日方程建立系统的运动方程如下 [ 11 ]： M z ¨ ( t ) + C z ˙ ( t ) + K z ( t ) = − M { I } x ¨ g ( t ) + H u ( t ) (1) 其中M、K、C、 z ( t ) 、I、 x ¨ g ( t ) 与多自由度运动体系运动方程中的意义相同，H是控制力位置矩阵， u ( t ) 是控制力列向量。 u ( t ) = [ u 1 ( t )   u 2 ( t )   ⋯   u n ( t ) ] T 。 设 x ( t ) = [ z ( t )   z ˙ ( t ) ] ，则(1)式可转化为如下的状态方程 [ 12 ]： { x ˙ ( t ) = A x ( t ) + B u ( t ) + d ( t ) x ( t 0 ) = x 0 (2) 其中： A = [ 0 I M − 1 K M − 1 C ] , B = [ 0 M − 1 H ] , d ( t ) = − [ 0 { I } ] x ¨ g (t) 这时采用如下的瞬时二次型目标函数 [ 13 ]： J ( t ) = x T ( t ) Q x ( t ) + u T ( t ) R u ( t ) (3) 要求在 0 ≤ t ≤ t f 的每一瞬时确定 u ( t ) 使 J ( t ) 达到最小值(实际是在每一个采样时间点达到最小值)。通过对(3)式的求解可以得到： u ( t ) = − ( Δ t 2 ) R − 1 B T Q x ( t ) (4) x ( t ) = [ I + ( Δ t 2 ) 2 B R − 1 B T Q ] − 1 [ T D ( t − Δ t ) + ( Δ t 2 ) d ( t ) ] (5) 这样就确定了瞬时最优控制力 u ( t ) 及 x ( t ) 。可以看出 u ( t ) 只与同步的状态变量 x ( t ) 有关。将(5)代入到(4)中，又可以得到： u ( t ) = − ( Δ t 2 ) R − 1 B T Q [ I + ( Δ t 2 ) 2 B R − 1 B T Q ] − 1 [ T D ( t − Δ t ) + ( Δ t 2 ) d ( t ) ] (6) 由此可见，瞬时最优控制的动力反应状态变量x(t)只与前一步的动力反应 x ( t − Δ t ) 及前一步的控制力 u ( t − Δ t ) 以及同步的外扰力d(t)有关。同样，u(t)也只与前一步的动力反应 x ( t − Δ t ) 及前一步的控制力 u ( t − Δ t ) 以及同步的外扰力d(t)有关。这时只是一种名义上的瞬时最优控制，并不是完全的最优控制，其原因在于与控制力u(t)同步的外扰力d(t)或运动状态变量x(t)是不能预先知道的，实际采取的控制措施不可避免地存在时滞和误差。优点是在于求解x(t)时不需求解Ricatii方程，计算耗时可以极大缩短。使控制的时滞减小，容易实施。  对所采取的控制措施减震效果的检验及评价的途径有实际地震检验、振动台试验 [ 13 ] 和数值模拟。由于振动台试验的成本较高 [ 13 ] 以及实际地震检验的长周期性 [ 14 ]，在这里采用数值模拟的方法验证以上瞬时最优控制算法的减震效率。 将当前控制力 u ( t ) = − ( Δ t 2 ) R − 1 B T Q x ( t ) 施加到结构上，由于u(t)并不是最优控制力，因此这时在d(t)为已知的条件下，也不能采用 x ( t ) = [ I + ( Δ t 2 ) 2 B R − 1 B T Q ] − 1 [ T D ( t − Δ t ) + ( Δ t 2 ) d ( t ) ] 计算结构动力反应状态变量，而应该是将u(t)看作是一种外力，根据结构体系动力反应计算方法(如CDM法、Newark-β法、Runge-Kutta法)计算。"
"为评价瞬时最优控制算法的减震效果，最可行的办法是采用结构模型振动台试验，也可以采用数值计算预测的方法，根据计算结果检验瞬时最优控制算法的减震效果。在这里为方便起见，根据结构动力反应运动方程的预测结果，评价瞬时最优控制的减震效果。 以一栋20层建筑结构为例，如图1所示，简化成一个20个集中质量的离散多自由度系统。结构基本参数有 m i = 2933   t ， k i = 28950000   kN / m ，其前三阶振型如图2所示。阻尼矩阵采用振型阻尼比为0.05时的Rayleigh阻尼的形式 [ 15 ]。输入地震波为El-centro波，最大水平地面加速度为4.0 m/s 2 。 图1. 结构模型平面图 图2. 前三阶振型图 Table 1 层间 (楼层) Q = 1e8, R = 0.1 Q = 1e9, R = 0.1 无控制 层间位移/mm 效率 /% 楼层加速度/m∙s −2 效率 /% 层间位移/mm 效率 /% 楼层加速度/m∙s −2 效率 /% 层间位移/mm 楼层加速度/m∙s −2 0-1(1) 14.32 39.322 7.59 −190.80 4.30 81.78 8.02 −207.28 23.60 2.61 1-2(2) 14.13 39.356 7.79 −52.15 4.32 81.46 8.03 −56.84 23.30 5.12 2-3(3) 13.80 39.738 7.53 −1.89 4.34 81.05 8.06 −9.07 22.90 7.39 3-4(4) 13.35 40.135 8.16 13.38 4.35 80.49 8.09 14.12 22.30 9.42 4-5(5) 12.85 40.509 9.01 20.97 4.34 79.91 8.10 28.95 21.60 11.40 5-6(6) 12.39 38.297 9.20 28.68 4.31 78.54 9.00 30.23 20.08 12.90 6-7(7) 11.83 40.253 9.04 35.43 4.27 78.43 7.83 44.07 19.80 14.00 7-8(8) 11.14 40.108 9.97 32.18 4.19 77.47 7.64 48.03 18.60 14.70 8-9(9) 10.32 39.649 11.06 31.30 4.10 76.02 7.47 53.60 17.10 16.10 9-10(10) 9.48 39.231 11.75 32.08 3.98 74.49 7.27 57.98 15.60 17.30 10-11(11) 8.97 36.383 11.98 32.70 3.83 72.84 7.05 60.39 14.10 17.80 11-12(12) 8.49 34.692 11.82 33.60 3.65 71.92 6.90 61.24 13.00 17.80 12-13(13) 8.02 34.262 11.30 33.92 3.44 71.80 7.14 58.25 12.20 17.10 13-14(14) 7.50 33.628 10.46 35.43 3.18 71.86 6.89 57.47 11.30 16.20 14-15(15) 6.85 33.495 10.26 33.38 2.86 72.23 6.54 57.53 10.30 15.40 15-16(16) 6.04 32.889 10.25 34.30 2.47 72.56 6.49 58.40 9.00 15.60 16-17(17) 5.07 32.669 11.13 31.72 2.02 73.17 6.46 60.37 7.53 16.30 17-18(18) 3.95 32.363 11.99 33.02 1.54 73.63 6.45 63.97 5.84 17.90 18-19(19) 2.71 32.08 12.77 33.49 1.04 73.935 7.66 60.10 3.99 19.20 19-20(20) 1.37 32.178 13.17 34.15 0.53 73.762 8.62 56.90 2.02 20.00 表1. 控制方式与地震动力反应 注：某一控制方案的减震效率是指相对于无控制方案而言。 图3. 结构地震动力反应时程 从图3和图4及图5可以看出，当Q = 1e8, R = 0.1~1.0时，AMD瞬时最优控制具有明显的减振效果。若要达到理想的减振效果，可以通过调整权重系数Q、R来实现。最极端的状态是可以完全实现减振补偿，但也一定会付出极高的成本。当状态变量权重系数Q增大时，动力反应数值减小，减振效果增加，反之减振效果减小；当控制力权重系数R增大时，动力反应数值增大，减振效果减小，反之减振效果增加。实际控制系统设计时，需要根据目标减振效果与允许付出的成本，通过反复试算确定。 图4. 权重Q值与结构地震动力反应最大值 图5. 权重R值与结构地震动力反应最大值 结合表1及图5可以看出，采用瞬时最优控制后，底部楼层加速度反而有放大的现象，而上部楼层的加速度减震效果也没有位移及速度的减震效果明显，与LQR主动最优控制类似。这是因为二者都是以系统运动状态变量为控制目标，因此加速度反应减震效果不明显。 图6. 权重Q值及R值与楼层控制力幅值 从图6可以看出，每个楼层的控制力幅值随减振控制效果的提高而需要增大。最大的控制力发生在顶层。当取Q = 1e8、R = 0.1时(减振效果如表1最后一行所示)，顶层控制力的幅值达到2300 kN左右。为本层楼面重量(或等效重力荷载代表值)的7.9%，楼层越高，楼层控制力与楼层重力比值越大。楼层控制力占楼层地震反应惯性力的比值分布也基本遵从这一规律。 从图7及图8可以看出，理想瞬时最优控制反应(以同步外扰力作用计算得出)与实际瞬时最优控制动力反应(以前一步外扰力作用计算得出)存在一定的差别。由于二者存在时滞，因此实际瞬时最优控制相对于理想瞬时最优反应有所增大。但产生的误差对于土木工程结构控制来说也许可以接受。若要消除或减小误差，必须采用改进的控制策略。具体可参照实时拟动力控制中的处理方法。 本文考虑的情况是在每一楼层都设置AMD减震装置，只是为了将计算结果做一个全面、通用化的对比。在实际控制方案设计时不需要每一楼层都设置控制装置。这时只需要将相应AMD的质量、弹簧、阻尼器或AMD的控制力撤去，使其值为0，就可以计算相应的地震动力反应，考察评价其减振效果，这里不详细介绍。 图7. 理想瞬时与实际瞬时最优控制地震动力反应比较示意图 图8. 理想瞬时与实际瞬时最优控制地震动力反应比较示意图"
"1) 主动瞬时最优控制有明显的减振效果，可以通过调整权重参数Q、R达到目标减振效果。 2) 主动瞬时最优控制，顶层控制力最大，当Q = 1e8、R = 0.1减振效果较好时，顶层控制力幅值为楼面重力荷载7.9%。 3) 瞬时最优控制及LQR控制可达到同样效果，动力反应几乎相同，但LQR控制不受步长影响。瞬时控制结果受步长影响。瞬时控制受滞后效应的影响，动力反应有所放大。"
