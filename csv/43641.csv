"针对谐振点随机扰动下的伺服系统谐振抑制问题，采用优化设计陷波滤波器的方法，并结合控制图对二质量系统进行谐振抑制。首先，建立二质量系统数学模型，并对机械谐振机理进行分析；其次，对于随机扰动的谐振点，利用控制图原理，提出控制限的确定方法；然后，利用优化算法确定陷波滤波器参数，达到既能有效抑制谐振又能使相角损失最小，达到防止过度抑制的目的；最后，仿真与实验结果表明，该方法不仅能有效抑制谐振，保持系统的稳定性，而且避免手动调节参数耗时多的缺陷，可以准确、快速地抑制随机扰动的谐振。"
"伺服系统作为工业领域生产加工方面的核心部件目前被广泛应用。伺服系统主要由速度环、电流环以及二质量系统构成，二质量系统又由电机、负载以及他们之间的传动装置连接而成。然而，由于这些传动装置并不都是理想刚性结构，目前大多采用机械负载与旋转电机驱动之间的弹性耦合机械结构。弹性耦合机械结构包含固有的谐振频率，系统在执行高动态动作指令时可能会产生明显的机械振动 [ 1 ]，导致伺服系统定位精度与响应速度降低，长时间的机械振动会导致传动部件转矩过大而受损，降低设备的使用寿命，甚至会直接使设备报废，因此有效抑制机械谐振是十分重要的。 针对抑制谐振问题，有许多解决办法。这些解决方法主要有主动和被动两种方式。主动方式主要通过改变设计的控制器的参数或结构抑制机械谐振；被动方式则是在保持系统的其它设计不变的前提下，通过在伺服系统中串联陷波滤波器的方法达到抑制谐振的目的。主动方式主要分为基于PI的反馈控制 [ 2 ] [ 3 ]、PI控制 [ 4 ] [ 5 ] 以及其他许多高级算法 [ 6 ] [ 7 ] [ 8 ] 等。利用极点配置设计PI控制器，虽然可以利用改变闭环系统的阻尼系数改善伺服系统的性能 [ 9 ]，但这种方法也存在一定的缺陷。利用模型预测控制器也可以抑制机械谐振，这一方法可以通过对电磁转矩进行预测输出达到目的。这种方法可以抑制机械谐振，但是这种方法具有一定的局限性，这种方法在轴系刚度等电机参数已知的条件下才能使用，而实际上这些参数都是未知的而且又不易辨识，因此在工业领域的应用并不高 [ 10 ]。 控制图作为一种带有控制界限的图，在实际生产中常用分析和判断生产进程是否处于受控状态，目前被广泛应用于生产生活中，通过对未来的生产过程中产品的质量进行监控，判断该生产进程是否处于控制状态，以此制定相应的措施以保证正常的生产，防止过程持续失控产生不良影响。 在以往的文献中，许多学者都是考虑谐振点固定不变时的谐振抑制，本文在此基础上进行大胆探索，本文考虑谐振点随机扰动下的伺服系统谐振抑制问题。谐振点随机扰动是指由于系统随机性的影响，谐振点不再固定不变，而会因随机项的作用在一个范围内波动。通常认为随机项近似服从正态分布，根据正态分布的 3 σ 原则，谐振点会以99.73%的概率在以计算求解出的谐振频率点为中心，以 3 σ 为长度的邻域范围内波动，则实际的谐振频率也近似服从正态分布。当谐振点随机扰动时，如何利用陷波滤波器对扰动的谐振点进行抑制是本文主要研究的问题。本文提出了一种基于控制图的方法进行谐振抑制：对于随机扰动的谐振点，设计控制图，确定控制限，确保谐振峰值介于控制上限和下限之间；利用优化算法选择陷波滤波器的参数，可以避免手动调节参数耗时多的缺陷，能够准确、快速地抑制随机扰动的谐振。利用控制图对随机扰动的谐振点进行抑制，目前在相关领域还没有进行研究，日后将进行深入的探索研究。 对本文的结构如下：第2节建立二质量系统的数学模型；第3节根据控制图原理确定控制限，设计陷波滤波器，并介绍陷波滤波器的最优参数确定方法；第4节进行仿真与实验。"
"图1是简化的二质量系统的物理模型。 图1. 二质量系统模型 为了便于分析，设传动部分无间隙，忽略电机的摩擦转矩，可以得到如下的动力学方程： J m d ω m d t = T e − T s (1) J l d ω l d t = T s − T l (2) T s = K s ( θ m − θ l ) + K W ( ω m − ω l ) (3) θ ˙ m = ω m (4) θ ˙ l = ω l (5) 其中， J m 和 J l 分别表示伺服系统电机侧的等效电机惯量和等效负载惯量， ω m 和 ω l 分别表示电机侧和负载侧旋转的角速度， θ m 和 θ l 分别表示电机侧和负载侧旋转的角度位置， T e 表示电机的输出转矩， T s 表示弹性阻尼矩， T l 表示电机的负载转矩， K s 表示传动环节的传动刚度， K W 表示传动部分的粘滞阻尼系数。 传动部分的传递函数为： G ( s ) = 1 J m s × G r ( s ) = 1 J m s s 2 + 2 p ξ r ω n s + p ω n 2 s 2 + 2 ξ r ω n s + ω n 2 (6) 其中 G r ( s ) = s 2 + 2 p ξ r ω n s + p ω n 2 s 2 + 2 ξ r ω n s + ω n 2 为谐振环节， ξ r = ( J m + J l ) K W 2 4 K s J m J l ， ω n = K s ( J m + J l ) J m J l ， ω a n = K s J l ， p = J m J m + J l ω n 为传动部分的谐振频率， ω a n 为传动部分的反谐振频率， ξ r 为传动部分的谐振阻尼系数， p 为谐振反谐振比系数。二质量系统谐振环节的传递函数存在两个复共轭极点，根据控制系统的稳定性条件 [ 11 ]，当两个复共轭极点都有负实部即极点都在S左半平面时，系统稳定，不发生谐振；当实部大于0即极点在S右半平面时系统就不稳定，容易发生谐振。正是这两个共轭极点，才导致伺服系统机械谐振的发生。因此，有必要对机械谐振进行抑制。 由于系统随机性的影响，谐振点不再固定不变，而会因随机项的作用以一定的概率在一个范围内变化，因而谐振点也在一个邻域内随机变化，无法得到谐振点的真实值。根据概率统计知识，通常认为随机项近似服从正态分布，由正态分布的 3 σ 原则可知，谐振点会以99.73%的概率在以计算求解出的谐振频率点为中心，以 3 σ 为长度的邻域范围内波动，则实际的谐振频率就是一个近似服从正态分布的随机变量。由于无法得到真实的谐振频率，本文考虑设计一个控制图，使随机扰动的谐振峰值介于控制图的上限和下限之间时，利用一个陷波滤波器就可以达到抑制谐振的目的。"
"控制图作为一种带有控制界限的图，在实际生产中常用分析和判断生产进程是否处于受控状态 [ 12 ]。控制图在设计过程中主要需确定两个量：控制上限 U C L 和控制下限 L C L 。确定出这两个量，就可以根据实际问题具体分析，利用各时刻观测到的数据进行监控 [ 13 ]，构造统计量T，当统计量T的取值在控制上限 U C L 和控制下限 L C L 之间时系统处于控制状态 [ 14 ]。 在现有的文献中，大部分都是在谐振点固定不变的情况下研究谐振抑制问题的。然而，在实际应用中，谐振点会出现随机扰动，对于随机扰动的谐振点，本节提出一种基于控制图谐振抑制的方法：确定控制图的控制限，使随机扰动的谐振峰值处于控制状态 [ 15 ] [ 16 ]，设计一个陷波滤波器对随机扰动的谐振点进行抑制。  由式(6)可知，二质量系统在任意点处的幅值为： H ( ω ) = | G r ( j ω ) | = ( j ω ) 2 + 2 p ξ r ω n ( j ω ) + p ω n 2 ( j ω ) 2 + 2 ξ r ω n ( j ω ) + ω n 2 (7) 本文考虑惯量比 R = J l J m 、谐振反谐振比系数 p 、传动部分的粘滞阻尼系数 K W 和传动刚度 K s 都保持 不变，只考虑谐振点在由二质量系统参数已知时计算出的谐振频率 ω n 的 ε 邻域范围内随机扰动，其中 ε ∼ N ( 0 , σ 2 ) 。于是根据控制图原理，可将二质量系统在计算出的谐振频率 ω n 的 ε 邻域范围内的最大幅值的数学期望作为控制上限 U C L ，最小幅值的数学期望作为控制下限 L C L 。 在实际中，由于 U C L 和 L C L 的确定与随机扰动项 ε 有关，且 ε 是未知的，于是可以利用正态分布的 3 σ 原则， 3 σ 原则的原理是运用概率统计知识，根据随机变量的正态分布规律，在多次试验中，测量值落在区间 ( X − 3 σ , X + 3 σ ) 的概率为99.73%，落到 ( X − 3 σ , X + 3 σ ) 范围之外的概率仅有0.27% [ 17 ]。于是根据正态分布 3 σ 原则，可以保证在控制状态内同一个陷波滤波器抑制随机扰动的谐振点成功的概率为99.73%。 在 [ − 3 σ , 3 σ ] 区间内生成n个随机数，将这些数作为 ε 的取值，则随机扰动的谐振频率记为 ω = ω n + ε ，代入(7)式中可以得到n个幅值，筛选出其中的最大值和最小值，重复进行m次试验，将得到m个最大值和m个最小值，再将得到的最大值和最小值取数学期望，得到的数学期望值作为最终的控制图的控制上限和控制下限，即 U C L = E { [ H ( ω ) ] max } (8) L C L = E { [ H ( ω ) ] min } (9) 确定出了控制上限和控制下限，就可以针对随机扰动谐振点进行谐振抑制。  陷波滤波器作为一种带阻滤波器，目前是应用最为广泛的抑制谐振的方法。本文考虑谐振点随机扰动下结合控制图原理利用陷波滤波器进行谐振抑制。要保证二质量系统的谐振点在其 ε 邻域范围内随机扰动时的幅值均降到阈值以下，只需要将谐振点在 ε 邻域范围内的最大幅值降到阈值以下，从而使其 ε 邻域范围内的所有幅值都能够降到阈值以下。  典型的陷波滤波器的传递函数为： G N ( s ) = s 2 + 2 π ξ k s + ω 0 2 s 2 + 2 π k s + ω 0 2 (10) 其中， ω 0 是陷波滤波器的陷波中心频率， ξ 是陷波滤波器的深度参数， k 是陷波滤波器的宽度参数。图2是陷波滤波器的Bode图。 图2. 陷波滤波器的Bode图 将陷波滤波器与二质量系统级联 [ 18 ] [ 19 ]，并根据确定出的谐振频率对陷波滤波器的参数进行调节，可以达到抑制谐振的目的。级联陷波器的传递函数为： G 0 ( s ) = G r ( s ) G N ( s ) (11) 根据3.1节，当谐振点在由二质量系统参数已知时计算出的谐振频率的 ε 邻域范围内随机扰动时，将 ε 邻域范围内的最大幅值的数学期望控制在阈值以下，就可以达到对随机扰动的谐振点进行有效抑制的目的。  利用陷波滤波器进行谐振抑制需要确定如下参数：陷波滤波器的中心频率 ω 0 、宽度参数k以及深度参数 ξ ，其中中心频率 ω 0 就等于谐振频率。利用(7)式可以确定出最大幅值对应的频率 ω ′ ，即 H ( ω ′ ) = U C L ，则 ω 0 = ω ′ 。本节将重点分析陷波滤波器的宽度参数k和深度参数 ξ 对机械谐振的影响以及参数确定方法 [ 20 ]。 对式(10)选用不同的深度参数和宽度参数 [ 21 ]，陷波器的幅频特性曲线如图3、图4所示。 图3. 不同深度下陷波器的幅频特性曲线 图4. 不同宽度下陷波器的幅频特性曲线 由图3可知，当宽度参数固定时，深度参数逐渐增大，幅频特性曲线的凹口的范围逐渐减小，陷波中心频率处的幅值衰减逐渐增大；由图4可知，当深度参数固定时，宽度参数逐渐增大，幅频特性曲线的凹口的范围也逐渐增大，陷波中心频率处的幅值衰减逐渐增大。因此，如果深度参数和宽度参数选取过大，会导致系统不稳定。在设计陷波滤波器时应选择适当的宽度和深度参数，保证在抑制谐振的同时还能维持系统的稳定性。 设定一个阈值 H t h ，当中心频率 ω 0 处的幅值在阈值 H t h 以下时认为不发生谐振。如图5所示，二质量系统的幅频特性曲线与阈值 H t h 有两个交点，交点横坐标记为 ω 1 和 ω 2 。利用陷波滤波器对二质量系统进行谐振抑制，使其幅值衰减到阈值 H t h 以下，即需要使得级联陷波器在频率 ω 1 和 ω 2 之间所有的频率点以及中心频率 ω 0 处的幅值全都低于阈值 H t h 。 图5. 给定参考阈值下二质量系统的伯德图 由(11)式，级联陷波器的传递函数为： G o ( s ) = G r ( s ) G N ( s ) = s 2 + 2 p ξ r ω n s + p ω n 2 s 2 + 2 ξ r ω n s + ω n 2 ⋅ s 2 + 2 π ξ k s + ω 0 2 s 2 + 2 π k s + ω 0 2 (12) 令 s = j ω ，则级联陷波器在任一频率点处的幅值为： H 0 ( ω ) = | G 0 ( j ω ) | = ( j ω ) 2 + 2 p ξ r ω n ( j ω ) + p ω n 2 ( j ω ) 2 + 2 ξ r ω n ( j ω ) + ω n 2 ⋅ ( j ω ) 2 + 2 π ξ k ( j ω ) + ω 0 2 ( j ω ) 2 + 2 π k ( j ω ) + ω 0 2 (13) 由(10)式可以算出级联陷波器在中心频率 ω 0 处的幅值 H max ，可得到一个不等式组： { H max ≤ H t h H 0 ( ω i ) ω i ∈ [ ω 1 , ω 2 ] ≤ H t h (14) 解不等式组(14)，可以得到关于陷波的宽度k和陷波的深度 ξ 的不等式。 要达到最优谐振抑制的目的，考虑一个新的指标——相角损失 [ 22 ]，使其达到最小，则此时就会得到陷波滤波器的最优参数。加入的陷波滤波器引起系统剪切频率 ω c [ 23 ] 处的相角损失为： ϕ = arctan 2 π ( ξ − 1 ) k ω c ( ω 0 2 − ω c 2 ) 4 π 2 ξ k ω c 2 + ( ω 0 2 − ω c 2 ) 2 (15) 将不等式组(14)作为约束条件，式(15)作为目标函数，利用最优化方法可以确定出陷波滤波器的最优参数。确定出陷波滤波器的参数后，就可以对计算求解出的谐振频率点进行谐振抑制，这样可以保证谐振点在其 ε 邻域范围内随机扰动时，即幅值在控制图的上限和下限之间时该陷波滤波器都可以进行谐振抑制。"
"利用优化设计陷波滤波器的方法，并结合控制图可以达到谐振抑制的目的，现对抑制的结果进行仿真和实验，根据仿真和实验的结果说明该方法抑制谐振的有效性。  根据第3节中提出的控制限的确定和控制情况以及陷波滤波器的参数确定方法，现对控制图和陷波滤波器的结果进行模拟仿真。仿真过程中所用参数如表1所示： Table 1 参数 数值 单位 阈值 1.5 dB 电机惯量 0.0043 kgm 2 负载惯量 0.02 kgm 2 传动刚度 280 Nm/rad 粘滞阻尼系数 0.22 Nms/rad 表1. 伺服系统机械仿真的参数 根据公式(6)可以算出，谐振频率为 ω n = 281.2762 ，反谐振频率为 ω a n = 118.3216 ，传动部分的谐振阻尼系数为 ξ r = 0.1105 ，谐振反谐振比系数 p = 0.1770 。假设 ε ~ N ( 0 , 1 ) ，则由第3节可知陷波滤波器的中心频率为随机扰动后的谐振点，即 ω 0 = 283.2241 ，最优陷波深度为 ξ = 0.2661 ，陷波宽度为 k = 25.5910 ，控制上限 U C L = 3.7576 ，控制下限 L C L = 3.6882 ，于是当随机扰动的谐振点处幅值满足 3.6882 ≤ H ( ω ) ≤ 3.7576 时，选择中心频率为 ω 0 = 283.2241 ，陷波深度为 ξ = 0.2661 ，陷波宽度为 k = 25.5910 的陷波滤波器即可达到最优抑制谐振的目的，随机扰动的谐振峰值以及谐振点随机扰动时的Bode图如图6、图7所示。 从图6和图7可以看出，利用控制图可以将所有谐振点处的幅值控制在控制限内，在级联陷波滤波器后，二质量系统在 ω 1 与 ω 2 之间的所有频率点以及中心频率 ω 0 处的幅值均降到阈值 H t h 以下，此时认为系统不发生机械谐振，由此说明了机械谐振得到了有效抑制。 图6. 随机扰动的谐振峰值 图7. 随机扰动时的Bode图 图8. 仿真结果。(a) 电流响应仿真图；(b) 转速响应仿真图  为了验证基于控制图下谐振点随机扰动的伺服系统谐振抑制的有效性，在仿真基础上搭建了一个实验平台进行实验研究。实验装置图如图9所示，实验采用的DSP芯片为TMS320F28335芯片，采用CCS6作为开发工具，电机为沈阳高精数控生产的GJM010ADA2S永磁同步电机 [ 24 ]，电机参数如表2所示： Table 2 参数 数值 单位 额定功率 1.5 W 转矩 7.5 N∙m 额定转速 2000 r/min 额定电流 5.8 A 额定电压 220 V 表2. 永磁同步电机的参数 图9. 实验装置图 设置采样频率为1000 kHz，采样点为1024，得到的谐振点随机扰动时电流和转速响应如图10所示： 图10. 实验结果。(a) 电流响应实验图；(b) 转速响应实验图 抑制前后的FFT频谱图如图11所示： 图11. 频谱图。(a) 抑制前的频谱图；(b) 抑制后的频谱图 抑制前二质量系统的相角裕度为59.4815˚，利用优化的陷波滤波器进行谐振抑制，得到的相角裕度为51.2078˚，最小相角损失为2.8531˚。 由实验结果及电流、转速响应图和频谱分析可以看出，利用陷波滤波器对随机扰动的谐振点进行谐振抑制，二质量系统的电流响应与转速响应都趋于稳定状态，即系统的轻微抖动并不会影响伺服系统的的稳定性，同时FFT频谱图的幅值也相应下降，因此就说明了利用本文提出的谐振抑制方法有效可行。 通过对比实验结果和仿真结果，可以看出利用控制图进行谐振抑制，每次实验得到的谐振峰值都介于控制限之间，说明该模型可以很好控制随机扰动的谐振峰值，而且抑制后的谐振峰值也低于阈值，说明了谐振抑制有效。对比图10和图11可知，当谐振点发生随机扰动时，电机的电流响应和转速响应最终也会趋于稳定，仿真与实验的结果是一致的，由此也说明了谐振点随机扰动的合理性。"
"本文在利用陷波滤波器抑制机械谐振的基础上提出了一种将谐振抑制和控制图相结合的方法，对随机扰动的谐振点进行抑制，使谐振点在由二质量系统参数已知时计算出的谐振频率的 ε 邻域范围内随机扰动，当随机扰动的谐振峰值介于控制上限和控制下限之间时，利用同一个陷波滤波器就可以抑制 ε 邻域范围内的所有谐振点；同时本文在保证系统在等于阈值的频率点之间以及谐振频率处的幅值都降到阈值 H t h 以下的情况下，通过使相角损失达到最小，确定出陷波滤波器的最优参数，可以准确、快速地抑制随机扰动的谐振，提高了抑制谐振的效率，从而达到了最优谐振抑制的目的。仿真和实验中得到的响应图也表明了利用控制图对随机扰动的谐振点进行抑制的合理性。因此，本文提出的控制图的方法不仅能有效抑制谐振，保持系统的稳定性，而且避免手动调节参数耗时长的缺陷。由此会给企业工厂带来十分可观的经济和社会效益，具有一定的工程价值。"
