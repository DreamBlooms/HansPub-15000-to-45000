"火灾是当今生活中十分常见的自然灾害，因此及时检测火焰对预防火灾的发生十分重要。本文提出了一种基于背景差分和颜色、形状特征的火焰检测方法。该算法首先采用背景差分法，根据火焰燃烧的动态性实现对运动目标的提取，再根据火焰颜色特征的五条规则以及火焰的三个形状特征对目标区域进一步提取，得到最终的检测结果。该方法火焰检测率较高，具有较好的实用价值。 关键词 :火焰检测，背景差分，颜色特征，形状特征"
"不受控制而发生并威胁人身和财产安全的燃烧现象被称为火灾，火灾给国家造成巨大经济损失的同时，还严重危害了人民群众的生命安全。其中森林火灾造成的经济损失最为严重，林火监测技术主要包括地面巡护、近地面监测、航空巡护、卫星监测四种 [ 1 ] 。由于火灾是一种失控的燃烧现象，一般而言没有明显的规律可寻，火焰的燃烧过程分为：初燃阶段、火焰扩大燃烧阶段、剧烈燃烧阶段、火势下降和熄灭阶段，不同的阶段有着不同的特点。快速有效的火灾检测是火灾预防的重要手段，基于视频图像的火焰检测是目前的研究热点，与基于传感器的传统火焰检测系统不同，这种检测方式局限性小，可应用于大空间或复杂环境的火焰检测，具有更好的适用性。 火焰有自身的特征，总体上将火焰的特征分为动态特征和静态特征。火焰的静态特征是指火焰的颜色特征，矩形度，圆形度，重心高度系数等。火焰的动态特征有闪频特征、面积变化特征等。在有关火焰检测技术中对颜色空间应用研究日益增多。Chen [ 2 ] 等根据RGB颜色模型，结合火焰色颜色特征设计出能够区分火焰各种像素的规则，结合每种规则形成了提取火焰颜色特征规则模型。Toreyin [ 3 ] 等使用高斯混合模型提取背景并以火焰像素库为基础获得的RGB颜色检测模型来实现火焰存在检测。王莹 [ 4 ] 等提出了一种基于RGB，HSV，YCbCr三种颜色空间的火焰颜色模型，该模型提取的火焰区域比较完整，且能减少图像亮度变化的干扰；动态特征方面，王莹 [ 4 ] 等提出了一种利用图像的相关性探测火灾的发生，并指出火焰的相关性系数图是剧烈振荡的，而非火焰的相关性系数图是较平坦的。文献 [ 5 ] 针对红外火焰视频，采用红外图像中的火焰颜色特征检测算法实验并进行了研究。Horng等 [ 6 ] 选择 HSI 颜色空间的火焰颜色模型，并结合差分来获取火焰潜在区域目标。Habiboglu等 [ 7 ] 采用协方差矩阵训练支持向量机来识别火焰。文献 [ 8 ] 结合火焰颜色统计模型和序列模式挖掘的方法，能够检测出一幅图像中的火焰。Jenifer [ 9 ] 采用概率统计的方法，对火焰的颜色、面积、表面粗糙度、边界粗糙度、偏斜度进行统计，然后使用贝叶斯分类器进行决策。如若我们在视频图像中利用这些特征加以判断，则能检测出火焰区域。 火焰检测最简单的判别方式是阈值控制，但误检率很高。由于火焰在燃烧的过程中外形不停地变化，具有一定的动态性，将其运动区域检测出来再利用火焰的静态特征判别，能较好的提高火焰检测的准确率。 本文首先通过当前帧与背景帧进行背景差分得到差分图像，然后通过阈值判断提取运动目标区域，然后利用颜色特征和形状特征进一步提取出较为完整的火焰区域。实验结果表明，所提出的算法检测效果好，算法复杂度较低，具有较好的应用前景。"
"运动区域提取的目的是将不断运动的区域从背景图像中提取出来，是视频分析算法的关键基础环节，是目标定位、识别和跟踪的前提 [ 10 ] 。火焰在燃烧的过程中由于受到周围气流的影响，火焰会呈现出没有规律的持续运动。本文首先采用背景差分提取出运动区域，缩小检测区域，对运动区域进一步利用颜色特征提取，从而达到预期效果。 背景差分法又称为背景减法，其原理是将当前帧图像与背景图像差分得到运动目标区域，这种方法较帧差法能够更好地提取运动目标，是目前运动分割中最常用一种方法。该方法需要构建一幅背景图像，这幅背景图像必须不含有运动目标，还要能够不断地变化来适应当前背景的变化。构建背景图像的方法有很多种，其中常用的方法有基于单个高斯模型的背景图像构建、基于混合高斯模型的背景图像构建、基于中值滤波器的背景图像构建、平均背景图像构建等。在本文中所采用的是平均背景图像的构建。 如果不考虑噪声的影响，视频帧图像 为背景图像 和运动目标区域 的组合。其中x和y分别是像素点的横纵坐标。 (1) 由式(1)可得出运动目标区域 。 (2) 得到的运动目标需要根据判别规则进一步处理，最常用的处理方法就是阈值分割法，如式(3)所示。 (3) 公式(3)中的T为阈值，文中采用的背景差分算法原理流程如图1所示。"
"疑似火焰的提取主要通过建立火焰颜色模型，颜色空间主要有HSV、RGB、HSI、CHL、LAB、CMY等，Chen等 [ 2 ] 用RGB和HSI颜色空间对火焰进行分析，总结出了三条表达式。文献 [ 11 ] 对该方法进行改进，总结了5条规则，并建立了新的火焰颜色模型，解决了火焰内部空洞，减少了其他干扰物的影响，如式(4)所示。 (4) 其中 ， ， ， 是火焰的红色分量和绿色分量的阈值， 分别是 的阈值。通过公式(4)得到的候选火焰区域，再通过形态学处理方法腐蚀和膨胀处理，能较好地消除噪声并填补细小空洞。当 ， ， ， ， ， ， 时，不仅能排除天空中的白云、类似枯草的黄绿色区域，并且能填补火焰内部的空洞，进而得到较为完整的火焰区域，颜色特征提取结果如图2所示。"
"火焰具有长宽比、矩形度、圆形度、重心高度系数、纹理特征等形状特征。  圆形度表示物体边缘与圆的相似程度 [ 12 ] ，是一种物体边缘轮廓复杂程度的度量，通过物体边缘的总 图1. 基于背景差分的目标检测算法流程 图2. 火焰的颜色特征提取 长度和物体所在区域的面积，可计算出物体的圆形度值，其计算公式为： (5) 其中 为物体所在区域面积， 为物体所在区域周长，即区域边界的长度，该长度可从边界链码中得到。圆形度衡量了物体边缘的复杂程度，物体边缘越复杂，圆形度的取值越高。通过实验对火焰及其他干扰物圆形度进行举例分析，结果如表1所示。 从表1可以看出，与火焰颜色相似的干扰物圆形度值较低，火焰的圆形度值明显较高。  与圆形度相似，矩形度表示物体边缘与矩形的相似程度 [ 12 ] ，矩形度 的公式定义如式(6)所示： (6) 式中 为包含物体所在区域最小矩形的面积。矩形度反应了物体对其最小外接矩形的充满程度。通过实验对火焰及其他干扰物圆形度进行统计，结果如表2所示。 从表2中可以看出火焰的矩形度一般在0.5左右，而其他干扰物的圆形度的值一般与火焰区域矩形度差别较大。  重心高度系数体现了物体重心高度与物体总高度的关系 [ 13 ] ，其公式定义如式(7)所示： (7) 其中 为物体重心高度， 为物体总高度。 从表3中可以看出火焰的重心高度系数小于0.5，这是因为火焰的重心一般偏下。由此可区分火焰与一些重心偏上和靠近中央的物体，如白炽灯，但难以区分重心偏下的汽车尾灯。 Table 1 图像编号 1 2 3 4 5 火焰 19.342 18.376 18.251 17.246 18.367 白炽灯 3.475 4.825 4.935 3.575 3.657 汽车尾灯 2.542 2.582 2.792 3.142 2.905 表1. 火焰及其他干扰物的圆形度统计 Table 2 图像编号 1 2 3 4 5 火焰 0.562 0.553 0.475 0.489 0.505 白炽灯 0.948 0.952 0.958 0.948 0.944 汽车尾灯 0.208 0.210 0.205 0.212 0.208 表2. 火焰及其他干扰物的矩形度统计 Table 3 图像编号 1 2 3 4 5 火焰 0.464 0.465 0.462 0.471 0.470 白炽灯 0.574 0.575 0.577 0.578 0.577 汽车尾灯 0.421 0.431 0.438 0.439 0.440 表3. 火焰及其他干扰物的重心高度系数统计"
"本文的实验环境为Visual C++ 6.0，调用Opencv图像处理库编程实现火焰检测。基本配置为CPU：AMD A6-3400M APU with Radeon(tm) HD Graphics 1.4 GHZ内存：4G，实验中用火焰区域所占的比重来分等级，具体使用红、黄、绿表示火灾的级别，即高级、中级、低级。 在论文 [ 14 ] 中提出的多特征融合中只用了火焰的红色分量的阈值作为颜色特征的阈值，忽略了蓝色分量和绿色分量的干扰。通过以上三组不同环境下的视频的检测结果(图3~5)可以看出本文方法火焰的颜色 图3. 第一组视频检测结果 图4. 第二组视频检测结果 图5. 第三组视频检测结果 特征提取的火焰区域更加完整，更加准确，但是背景差分将固定的图像作为背景图像时，周围许多的环境因素会不同程度上影响到检测的准确性。实验结果也表明，一般情况下自然环境中的火灾重心高度系数会随着燃烧时间而变大，但是最大不会超过0.45。"
"本算法利用背景差分法结合火焰特征判断火焰区域的思想，首先利用背景差分提取出运动目标区域，之后利用火焰的颜色及形状特征进一步提取较为完整的火焰区域。在实际的火焰检测中背景差分取得的运动目标区域非常完整，但是在颜色特征的提取中阈值是通过多次试验来确定的，同时在检测中外界环境复杂，这些将会造成一定的误检或漏检。在下一步的实验中，阈值的控制仍然是一个重点。由于视频库视频数量有限，在以后的实验中将会适当的扩充实验视频数量，并引入其它有效特征以进一步研究多特征融合方法。"
