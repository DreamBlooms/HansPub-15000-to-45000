"针对传统照明系统的缺陷，设计了一种无线智能照明系统，主要由STM8F003单片机最小系统、无线通信电路、声音传感器电路、光控感应电路等组成；该系统具有声音感应、智能调光、手机蓝牙控制等功能，且成本低廉、无需布线、安装简便，可广泛应用于智能家居领域。 关键词 :无线智能照明系统，STM8F003芯片，光控感应，蓝牙通信"
"照明和照明控制以及楼宇自动化是当今人类的工作，学习和生活的必需品，伴随着人们生活水平的提高，它们逐渐成为了人们生活不可或缺的一部分，人们对照明控制提出了更高标准要求，同时通信、电子和计算机网络技术的发展提供了智能照明控制系统不可缺少的条件。发展智能照明技术不仅能够实现照明控制智能化，营造良好的光照环境，还能节约能源，提高照明系统的科学性和高效性 [ 1 ] 。 然而，现有的智能照明系统大多采用有线控制方式，其布线施工较复杂，系统可扩展性较差，移动性能欠缺，严重影响了智能照明系统的发展和智能家居的应用。伴随着网络、无线通信技术的发展，数字化家庭和智能照明的概念被提出。数字化家庭作为人类通信、网络、安全、建材、家居等全面发展的趋势，在社会各界引起了高度的关注，基于无线控制的智能照明系统在国内外已经得到广泛研究。近几年，短距离无线通信技术获得了迅速发展 [ 2 ] - [ 6 ] 。其中主流技术包括红外技术、蓝牙(Bluetooth)、Wi-Fi、UWB (Ultra Wideband)及ZigBee技术等，它们都有各自的标准、特点和相应的应用领域，其中Zigbee和蓝牙技术受到很多研究者的关注： 一、ZigBee技术 ZigBee是一种新兴的短距离、低速率、低复杂度、低功耗、低成本的无线组网技术；具有成本低、可靠性好、时延短、网络容量大、覆盖范围广、安全性高等特点，随着物联网技术的应用，基于ZigBee组网的无线照明系统得到广泛地研究 [ 7 ] - [ 11 ] 。 二、蓝牙技术 蓝牙技术是一种低功率短距离的无线链路技术标准的代称，建立了通用的无线空中接口及其控制软件的开放标准，使通信与计算机进一步结合，使不同厂家生产的便携设备在没有电缆或电线的情况下进行数据通信。由于现在众多便携设备(如手机、平板电脑等终端)都自带蓝牙功能模块，基于手机蓝牙技术的智能照明系统也得到广泛研究 [ 12 ] - [ 15 ] 。 考虑到手机应用的普遍性，文献 [ 9 ] 介绍了采用智能手机 + ZigBee网关 + ZigBee模块的控制方式，相比于文献 [ 9 ] ，本文提出的智能手机+主节点+子节点控制方式，具有成本更低、速度更快、实现更简单的优点；同时，与文献 [ 12 ] - [ 15 ] 相比，设计的无线照明系统更加智能，功能更多；本文主要针对智能家居领域，开发了一种具有手机蓝牙无线控制照明、声音感应、智能调光等功能的系统，具有成本低廉、无需布线、安装简便、易操作等优点。"
"硬件分为主节点与从节点。主节点以STM8F003为主控芯片，通过蓝牙HC-06与手机进行通信，主节点并通过HJ-WUS1无线串口模块判断子节点是否动作，用以实现在家中任何地方都能通过手机无线控制照明系统。子节点同样以STM8为主控芯片，通过HJ-WUS1无线串口模块与主节点通信。此外，与声音传感器模块YL-56、光控感应电路相连，可以实现当发出较大的声音时自动开启照明系统，音量低时自动关闭照明系统。在相应的光线照射到光敏电阻上时，灯光自动调节，使人可以处在一个舒适的光线中。设计的无线智能照明系统框图如图1所示。  设计的无线照明系统硬件主要包括：手机与主节点间通信模块、主子节点主控模块、主子节点间通信模块、检测模块、声音检测模块等。下面就几种硬件功能模块电路图进行介绍。  STM8、STC89C52、STM32这三种系列单片机都可用来作为系统主子节点主控芯片，但是由于主子节点间需要使用SPI通信协议，所以STC89C52系列单片机便不适合用作系统的主控芯片。而STM8系列单片机价格比STM32系列单片机低很多，所以选用STM8F003来制作此款无线智能照明系统。STM8F003最小系统硬件连接图如图2所示。 图1. 无线智能照明系统框图 图2. STM8F003最小系统硬件连接图  HC-06是主从一体化的蓝牙串口模块，主从可指令切换，指令少于HC-05，使用简单。供电电压3.3 V~3.6 V，灵敏度达到−80 dBm，自带蓝牙2.0芯片，内置2.4 GHz天线。具有低功耗、高性能无线收发系统、低成本、应用领域广等特点。非常适合与手机间进行数据传输。HC-06硬件连接如图3所示。  HJ-WUS1是基于串口的并且符合2.4 G标准的无线透传模块，其内置2.4 GHz无线芯片和STM8高性能单片机，用户无需了解无线发送和接收的过程以及原理，也不需要对模块进行编程，只需要将目标终端和无线模块串口连接起来就能够实现串口数据的无线透明传输。HJ-WUS1硬件连接如图4所示。  YL-56对周围环境声音强度非常敏感，它通常用来检测周围环境声音的强度。模块在环境声音强度无法达到所设定的阀值时，其D0口就会输出高电平，当外界声音强度超过我们所设定的阀值时，模块D0口就会输出低电平。由于它是数字量输出，所以它的D0口可以和单片机直接相连，单片机通过检测它的高低电平来检测环境的声音。除此之外，它还可以直接与继电器模块相连，组成一个声控开关。YL-56电路原理图如图5所示。"
"系统软件设计方面主要包括系统工作流程图、主、子节点流程图以及手机端程序流程图。  无线智能照明系统工作流程图如图6所示。 图3. HC-06硬件连接图 图4. HJ-WUS1硬件连接 图5. YL-56硬件连接 图6. 系统工作流程图  图7为主、子节点流程图。根据以上的流程图可知，主节点的串口和模块通过程序进行初始化后，一旦接收到手机端发送来的指令信息，根据指令发送相应的数据给子节点。子节点同样也需要对串口和模块通过程序进行初始化，然后会根据接收指令、光线的强弱以及声音的大小通过单片机共同协调、配合，最终实现小灯点亮或者熄灭的功能。  手机端程序流程图如图8所示。 图7. 主、子节点流程图 图8. 手机端流程图 手机端应用程序流程主要为：在蓝牙打开的情况下，对用户的按键的触电位置进行判断，从而判断其按下几号按键，一旦用户按下相应按键，则手机端将会通过蓝牙传送指令信息给单片机，最终通过单片机实现对小灯点亮或者熄灭的控制。"
"蓝牙采用的是点对点通信方式，与1个主节点进行通信；而主节点同时和多个子节点进行通信。测试中，仅需选取1个主节点、1个子节点进行实验验证。无线智能照明系统实物图如图9所示，蓝牙APP控制界面如图10所示，演示图如图11所示。经过测试，本设计系统各项功能测试均能稳定运行、响应快速、控制简便。"
"随着电子科技的发展，物联网应用已经渗透到各行领域，包括智能家居。可控电源属于智能家居的一小部分，也是不可或缺的一部分，近年来，基于ZigBee的无线组网系统得到广泛研究，其中就包括无 图9. 无线智能照明系统实物图 图10. 蓝牙APP控制系统 图11. 无线智能照明系统演示图 线智能照明系统的研究；文献 [ 9 ] 介绍了采用智能手机 + ZigBee网关 + ZigBee模块的控制方式，相比于文献 [ 9 ] ，本文提出的智能手机+主节点+子节点控制方式，具有成本更低、速度更快、实现更简单的优点； 本文设计的无线遥控智能照明系统具有声音感应、智能调光功能，并可通过手机终端APP控制照明，主打的是便捷、廉价、人性化，在数字化家庭市场中具有很好的应用价值。"
