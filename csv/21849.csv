"多回合整车装卸约束下的车辆调度问题是一种特殊的车辆调度问题，普通的车辆调度问题算法没有利用问题的特殊结构，计算效率低。首先通过分析多回合整车装卸车辆调度问题的特点，将其转换为多阶段网络流问题并建立模型；然后针对模型有后效性的特点，提出了基于禁忌列表的Bellman方程，并以此为基础，设计了基于动态规划算法的最小费用流求解算法。通过实例计算表明，模型和算法适合描述及求解多回合整车装卸车辆调度问题，能够较为快速高效地求解问题的优化行动方案。 关键词 :多回合整车装卸，车辆调度问题，多阶段网络流，动态规划，禁忌列表 Copyright © 2017 by authors and Hans Publishers Inc. This work is licensed under the Creative Commons Attribution International License (CC BY). http://creativecommons.org/licenses/by/4.0/"
"车辆调度问题是一类经典的NP难问题，对应的现实应用众多，分类也十分繁多 [ 1 ] ，在算法方面，以启发式算法为主流，确定性算法比较少 [ 2 ] [ 3 ] 。Rivera [ 4 ] 等人研究了多回合车辆路径问题的数学模型和精确算法，Novoa [ 5 ] 等人研究了车辆路径问题的近似动态规划方法求解，但是都是针对单车的。本文考虑一种多回合多车的整车装卸约束下的车辆调度问题。具体定义如下： 在图 中, 是点的集合， 是边的集合。点集 的子集包括停车场集合 ，仓库点的集合 ，物资需求点集合 ，普通道路节点的集合 ，且有 。平时车辆停放于停车场。车辆运送物资的特点是每次从仓库点仅能装载一个单位的物资。车辆从仓库装载货物后沿规划路径到达物资需求点卸货后，要再重复执行运送任务，因此，称之为多回合整车装卸的车辆调度问题。 由于问题是多回合的，在每个回合中，车辆都要到一个仓库装载物资然后运送到一个物资需求点，每个回合具有一定的相似性。因此，可以建立多阶段决策模型进行分析。 1) 状态定义 假设所有车辆需要完成物资运送的回合数为 ，则令多阶段决策模型的阶段数为 。令 代表模型的状态集合， 代表第 阶段的状态， 代表第 阶段状态的集合。则每个阶段的状态定义如下表1所示。 2) 状态转移 令 代表模型的决策变量集合。 代表第 阶段可以采用的某个决策变量。记 为状态 可取的决策变量集合。记 为在状态 采用决策 的时候所需要支付的费用，对应在 上两个点之间的距离。 记 函数 的集合，对 ，均有 。 从状态 开始，采用策略 的费用为 Table 1 阶段 状态集合 备注 0 虚拟的状态，是产生计算的起点 1 是停车场点到第1阶段状态的一一映射 2 是仓库到第2阶段状态的一一映射 3 是物资需求点到第3阶段状态的一一映射 4 是仓库到第4阶段状态的一一映射 … … … 是物资需求点到第 阶段状态的一一映射 是仓库到第 阶段状态的一一映射 … … … 计算的终点 表1. 多阶段决策模型的状态定义 其中，状态序列 是由以下系统的状态转移方程产生 对应某辆车的优化调度目标就是寻找最优策略 ，使得总的费用最少，也即其目标函数为 而问题本身要为多辆车规划路径，可以将车辆看作是模型中的网络流，而最终方案是网络上的可行流。 3) 网络流模型 令两个状态之间的弧上的单位流量费用为 ，则对应网络上停车场、仓库、物资需求点之间状态转移的费用均取其最短路的距离，虚拟状态与其他状态之间的状态转移费用根据其功能需求进行设置，具体取值如表1。弧的容量为 ，则对应网络上的从停车场出入的弧容量等于停车场处车辆的数量，其他弧的容量为1，参见表2。 这样，某辆车的最优调度方案对应网络流模型上的一个流量为1的可行流，此可行流必然是一个最小费用流，而反之，网络流模型的某流量为1的最小费用流却不一定对应的某个车辆的最优调度方案，此流量为1最小费用流还要满足经过的物资需求点不重复的约束，因此，通过求解网络流模型的最小费用流来得到车辆调度方案，必须要考虑一定的约束。这与网络流模型本身的结构有关。"
"令 为实值函数 的集合，记映射 。对于任一策略 定义映射 为 定义映射 为 Table 2 单位流量费用 容量 备注 … … 表2. 网络上弧的单位流量费用以及容量 其中 代表 与 在实际网络 中最短路的长度。 对于某函数 ，以及非静态策略 ，对于任一整数 ，定义函数 其中， 是复合函数，也就是 可被当作“N阶段费用函数”的表达式。 当然了， 和 必须要满足单调性 [ 6 ] ，Bellman方程才能够成立，否则，无法应用Bellman方程递推求解。 定义 [ 6 ] ：如果满足以下条件，则认为 和 具有单调性，或者说系统具有单调性： 如果 ，且 ， 那么 证明：多阶段决策网络流模型不满足单调性。 令 ， ，且有 根据约束条件，不考虑重复使用发射点(可以经过)，那么不妨设 并且有 现有 那么， 因此模型不满足单调性条件，Bellman方程不能直接应用。"
"按照逆向求解的思路从后至前依次分析。 1) 在第 阶段的物资运送任务中，从车辆当前的状态 开始，根据物资需求点不重复的约束，采用策略 只有在满足以下条件的时候才可行， 也就是说 和 两个状态不能对应同一个物资需求点。令禁忌列表 ，也就是其他任意阶段中，与状态 对应同一物资需求点的 状态的集合。 可行的最优方案为 其中， ， 是所有的执行后会使系统转移到 中状态的控制 决策变量集合。 记 其中， 是最优策略， 是最优策略上第 阶段的状态。 将最优策略 上第 阶段的状态 对应同一个物资需求点的所有状态加入到禁忌列表，令禁忌列表 。 2) 在第 阶段的物资运送任务中，从车辆当前的状态 开始，根据物资需求点不重复的约束，采用策略 只有在满足以下条件的时候才可行， 也就是说 和 两个状态不能对应同一个物资需求点。令禁忌列表 ，也就是其他任意阶段中，与状态 对应同一物 资需求点的状态的集合。 可行最优方案为 其中， 其中， 是所有的执行后会使系统转移到 中状态的控制决策变量集合。 将最优策略 上第 阶段的状态 对应同一个物资需求点的所有状态加入到禁忌列表，令禁忌列表 。 … (k)在第 阶段的物资运送任务中 从车辆当前的状态 开始，根据物资需求点不重复的约束，采用策略 只有在满足以下条件的时候才可行， 也就是说 和 两个状态不能对应同一个物资需求点。令禁忌列表 ，也就是其他任意阶段中，与状态 对应同一物资 需求点的状态的集合。 可行的最优方案为 其中， 其中， 是所有的执行后会使系统转移到 中状态的控制决策变量集合。 将最优策略 上第 阶段的状态 对应的禁忌列表加入本级禁忌列表，令禁忌列表 。 … 加入禁忌列表后，单调性满足了。  设计多回合整车装卸车辆调度问题的算法如下： 步骤1：依照基于禁忌列表的Bellman方程寻找一条可行的最优路径方案 作为最小费用增广链将 记录下来，扩充 的流量，并令 增加1。 步骤2：在多阶段网络流模型中去掉当前已经找到的最优路径方案所包含的需求点。 步骤3：重复步骤2和步骤3，直到没有办法找到最优路径方案。 算法计算过程中找到的所有最小费用增广链，构成车辆行动方案的一个集合。通过将最小费用增广链 上点之间的弧映射回实际网络中的最短路点序列，就可以得到一个车辆行动方案。下面通过一个算例来验证算法的性能和效能。"
"某导弹部队的导弹火力单元平时隐蔽待机于待机地p1和p2，两个待机地的火力单元数量分别是 和 ，现接收到3波次火力打击任务，每波次都有10个火力单元发射导弹。火力单元需要通过网络机动到某一个发射点 发射导弹，然后火力单元到导弹仓库 装载导弹后，再到下一个发射点 发射导弹，假设为了隐蔽起见，在整个火力打击任务中，所有的火力单元均不会第二次使用同一个发射点，直到所有的火力单元都完成多波次火力发射任务为止。各个地点的平面坐标数据如表3所示。 各点的位置及相互之间的道路连接情况如图1所示，两点之间道路的长度可以使用两点之间直线的距离进行估算。 在本问题中，导弹发射车是多回合整车装卸车辆调度问题中的车辆，发射点相当于物资需求点，导弹仓库相当于物资仓库，规划导弹发射车的多波次打击行动方案，相当于规划多回合整车装卸车辆调度问题中的车辆路径，可以采用本文提出的方法求解。 算法首先根据点的平面坐标计算的各个点之间的直线距离，然后计算任意两点之间的最短路的距离，可以建立此问题的多阶段网络流模型如图2所示。 在这样的一个网络流模型中，最小费用最大流对应多车多波次导弹火力打击任务的最优行动方案。这样，多车多波次导弹火力打击行动规划问题的最优行动方案，转化为在网络流模型中寻找最小费用最大流，按照所提算法求解，可以得到网络流模型的最小费用最大流，求解过程中所找到的所有最小费用增广链如表4所示。 图1. 网络中各点的位置及网络结构 图2. 多阶段网络流模型 Table 3 地点 x y 地点 x y 地点 x y 待机地p1 52.8 −1.7 发射点r19 42.1 57.0 交叉口c14 61.9 −1.7 待机地p2 45.9 55.5 发射点r20 50.8 10.5 交叉口c15 46.6 −2.0 仓库d1 64.6 14.5 发射点r21 51.1 27.1 交叉口c16 45.8 7.6 仓库d2 68.8 13.9 发射点r22 56.0 18.9 交叉口c17 70.5 30.3 仓库d3 44.6 7.6 发射点r23 14.7 21.7 交叉口c18 43.1 37.9 仓库d4 20.4 32.2 发射点r24 29.6 −7.9 交叉口c19 32.4 50.5 仓库d5 −2.5 44.1 发射点r25 −8.2 −2.3 交叉口c20 58.3 6.5 发射点r1 26.1 −7.0 发射点r26 9.7 29.2 交叉口c21 47.8 17.7 发射点r2 9.2 22.5 发射点r27 38.6 4.1 交叉口c22 50.2 37.3 发射点r3 39.3 −17.7 发射点r28 −12.3 5.6 交叉口c23 39.5 34.1 发射点r4 92.7 −9.3 发射点r29 −3.2 10.3 交叉口c24 62.0 23.8 发射点r5 54.7 31.1 发射点r30 33.1 18.3 交叉口c25 50.4 58.1 发射点r6 60.4 16.7 交叉口c1 75.4 4.6 交叉口c26 49.6 36.5 发射点r7 73.5 26.6 交叉口c2 50.0 24.3 交叉口c27 65.7 53.2 发射点r8 66.7 40.9 交叉口c3 69.6 25.5 交叉口c28 19.7 33.9 发射点r9 46.5 1.9 交叉口c4 39.8 0.8 交叉口c29 28.9 −0.7 发射点r10 72.2 19.1 交叉口c5 30.0 4.5 交叉口c30 6.5 31.2 发射点r11 58.1 36.9 交叉口c6 36.1 37.6 交叉口c31 37.0 10.2 发射点r12 44.0 16.5 交叉口c7 14.3 32.2 交叉口c32 45.6 16.3 发射点r13 66.3 40.2 交叉口c8 12.2 37.7 交叉口c33 −0.5 28.3 发射点r14 67.2 26.1 交叉口c9 11.7 31.5 交叉口c34 19.4 28.6 发射点r15 54.1 61.2 交叉口c10 29.6 35.1 交叉口c35 18.2 34.3 发射点r16 56.2 66.5 交叉口c11 44.5 23.1 交叉口c36 19.9 35.0 发射点r17 25.7 45.4 交叉口c12 86.5 2.9 交叉口c37 5.8 10.9 发射点r18 60.1 30.9 交叉口c13 65.2 23.2 交叉口c38 21.4 53.9 表3. 网络中各点的平面坐标数据 Table 4 阶段1 阶段2 阶段3 阶段4 阶段5 阶段6 阶段7 阶段8 阶段9 路径1 's' 待机点p1 仓库d3 发射点r9 仓库d3 发射点r20 仓库d3 发射点r12 'e' 路径2 's' 待机点p1 仓库d3 发射点r22 仓库d1 发射点r14 仓库d1 发射点r6 'e' 路径3 's' 待机点p2 仓库d4 发射点r2 仓库d4 发射点r17 仓库d4 发射点r26 'e' 路径4 's' 待机点p1 仓库d3 发射点r5 仓库d1 发射点r7 仓库d1 发射点r10 'e' 路径5 's' 待机点p1 仓库d3 发射点r21 仓库d1 发射点r13 仓库d1 发射点r8 'e' 路径6 's' 待机点p1 仓库d3 发射点r23 仓库d3 发射点r30 仓库d3 发射点r27 'e' 路径7 's' 待机点p1 仓库d3 发射点r19 仓库d1 发射点r11 仓库d1 发射点r18 'e' 路径8 's' 待机点p1 仓库d3 发射点r1 仓库d4 发射点r15 仓库d4 发射点r29 'e' 路径9 's' 待机点p1 仓库d3 发射点r24 仓库d4 发射点r16 仓库d2 发射点r4 'e' 路径10 's' 待机点p1 仓库d3 发射点r3 仓库d4 发射点r25 仓库d4 发射点r28 'e' 表4. 算法求解过程中所找到的最小费增广链 在上述路径中，相邻两点插入原图中的最短路方案，就可以得到发射车的火力打击行动方案。在这样的一个结果中，待机点p2仅派出了一辆发射车，而发射点p1派出了9辆发射车，究其原因，是因为p2点距离所有的仓库都比较远，大大降低了使用效率。因此，这样的计算结果，对于评估待机点或者仓库的选址位置的优劣，也是具有参考意义的。在计算机使用Matlab上实现以上算法，计算的时间为0.04秒。"
"本文研究了多回合整车装卸条件下的车辆调度问题。根据问题多阶段的特点，建立了多阶段决策网络流模型。为了克服动态规划方法求解的非单调性，提出了基于禁忌列表的Bellman方程，用于满足物资需求点不重复的约束，然后设计了基于禁忌列表的动态规划算法求解模型的最小费用流，属于精确算法，在收敛速度和优化效果方面都具有优势。"
