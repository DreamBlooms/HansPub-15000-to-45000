"过程控制系统具有的大滞后性给航站楼环境控制节能带来挑战。为提高航站楼内环境控制系统能效，开发基于STM32和Zigbee技术的航站楼环境参数实时无线监测系统。采用STM32F103ZET6微控制器制作低功耗检测节点，为降低系统损耗灵活调整数据传输周期。在Visual Studio平台通过开辟多线程实现监测软件高效率运行。实验和应用结果表明，该系统与固定周期数据传输系统相比，功耗显著降低，系统稳定性好；在提高能效方面，CO 2 浓度比温度随客流量变化更加灵敏，延迟时间短，可为航站楼空调系统提高能效作为参考依据。"
"据统计，大型机场的航站楼平均能源消耗占机场能源消耗总量的60% [ 1 ] [ 2 ]。降低航站楼能源消耗是机场节能减排的关键 [ 3 ] [ 4 ]。航站楼内环境控制系统存在的大滞后性给航站楼节能运行带来挑战。随着旅客出行对方便性、快捷性、舒适性的要求越来越高，精确测量航站楼主要环境参数，缩短环境控制系统滞后性，在提升旅客出行舒适度的同时，可以逐步降低能耗，实现节能环保。 传统监测系统多采用有线通信方式，存在布线复杂、维护困难、终端节点不能灵活部署等问题 [ 5 ]。因为低成本、可大规模部署节点、节点自动组网等优点，无线传感器网络开始大规模使用。如基于蓝牙的分布式温室监控系统 [ 6 ]，基于GSM的温室监测系统 [ 7 ]。以上无线传感器节点多数采取电池供电方式，电池电量有限，不能长久持续供电。鉴于此，提高传感器节点能源利用率、确保系统数据低功耗传输，使监控系统长时间稳定工作成为研究热点。 为解决现实存在的难题，根据ZigBee技术，使用STM32微控制器设计无线实时监测系统，实现机场航站楼内主要环境参数实时测量。根据碳浓度、温度等参数随旅客量变化，检测航站楼内碳浓度和温度，系统自动分析数据，优化航站楼内空调控制系统，不断降低能耗，实现节能目标。"
"本系统包括检测器节点、路由节点、协调器节点和上位机。航站楼环境参数：CO 2 浓度、温度等由检测器节点采集后发送至路由节点。寻找、建立以及修复路由信息由路由节点完成，并向协调器发送数据包。协调器在Zigbee网络中负责网络的建立和配置，接收路由节点的数据并通过串口RS232与上位机通信 [ 8 ]。上位机通过监测软件对采集数据进行存储、显示、分析，进行节点管理、历史数据查询。系统架构见图1。"
"检测器节点主要由电源部分、传感器部分、微控制器和无线模块等组成 [ 9 ]。检测器节点设计见图2。 图1. 系统架构图 图2. 检测器节点设计图  监测系统需要在航站楼内长时间运行，当采用普通电池供电，电量耗尽后会造成检测器节点停止工作。经常更换检测器的电池将会提高维护成本。航站楼多采用屋顶镂空设计，因此设计太阳能电池板在阳光充足时给锂电池供电 [ 10 ]，锂电池给检测器节点供电，可保证检测器长时间工作。 微控制器通过可控电源模块RT9167/A芯片控制锂电池仅在系统采样时向传感器等部件供电。在两个采用周期之间，通过关闭传感器等模块的电源实现降低检测器能耗 [ 11 ]。  选用COZIR-AX-5000型号CO 2 浓度传感器和DS18B20温度传感器作为检测器节点的主要传感器。该型号CO 2 浓度传感器测量范围为0~5000 ppm，测量误差小于±10 ppm。DS18B20测温范围大，在−55℃到+125℃之间，精度为正负0.5℃，优点有：精度高、体积小等。以上传感器均满足航站楼环境监测需求。  作为检测器节点的控制核心，微控制器负责控制各模块协调工作，其主要功能有：加入网络、环境参数检测、数据存储、数据分析后传输、接收指令等。微控制器接收指令后进入中断程序，主要实现的功能有：传输已采集的数据、参数设置、同步时间等。微控制器计算本周期数据与前一周期数据差值，差值在设置范围内则本次采集数据保留，差值大于设置范围则发送本次采集数据。当上位机收到数据时，实时显示数据；当上位机未收到本周期数据时，判定为环境参数未超出设置范围，显示前一周期数据；从而实现降低数据传输造成的能耗。检测器节点工作原理见图3。 图3. 检测器节点工作原理 图3中， Δ C 表示本周期CO 2 浓度与上一周期CO 2 浓度差值， Δ T 表示本周期温度与上一周期温度差值。系统初始化后，直接发送首个周期检测到的数据，不进行判断。 ε c 和 ε t 表示航站楼内CO 2 浓度和温度设定的参数变化阀值。 为确保检测器能够顺利实现上述功能，选择STM32F103ZET6作为微控制器 [ 12 ]。它具有SPI接口，能够满足无线通信需求。且STM32F103ZET6具有休眠模式，在两个采样周期之间进入休眠状态可以减低检测器功耗。因此，该款微控制器十分适用于实时监测系统 [ 13 ] [ 14 ] [ 15 ]。检测器实物见图4。 系统无线传输模块选用CC2420射频模块，它符合2.4 GHz IEEE802.15.4协议规范，是广泛应用与无线网络汇总的低功耗、低电压的射频收发芯片。CC2420通过SPI接口与微控制器进行数据读写、指令收发等通信。 图4. 检测器实物图"
"监测系统软件设计主要指上位机用户监测软件设计。选用基于微软Visual Studio平台的C#语言进行监测系统用户界面软件开发。Visual C#具有功能强大的用户开发环境，提供很多方便应用开发的工具，可以大大提高软件开发效率 [ 16 ]。 上位机监测系统软件设计主要有：实时数据显示功能和历史数据查询功能。实时数据显示功能包括：接收环境数据、分析数据、存储数据，通过图像和表格等多种形式实时、直观地显示航站楼中CO 2 浓度和温度等环境参数，还可通过操作按钮向节点发送指令。历史数据查询功能根据用户选择的日期和检测器节点读取历史数据并显示。 考虑到上位机接收数据时，如果仅采用单个线程，用户进行查询历史数据时，会造成数据接收延误，甚至爱数据丢失。为确保监测软件在查询历史数据的同时也可以实时接收数据，通过开辟新的线程实现历史数据查询功能。从而实现两个主要功能同时运行而不受彼此影响，保证上位机监测系统高效、快速运行。"
"选取天津滨海国际机场T2航站楼作为监测系统实验及应用场所。  将监测系统部署在天津滨海国际机场T2航站楼出发大厅。分别在E、F、G、H四个值机岛分别布置10个检测器节点，检测出发大厅环境参数。每个值机岛布置一个路由节点，整个系统设置一个协调器节点，上位机使用一台电脑运行监测软件实现功能。每个检测器的基本采样周期设置为5 min， ε c 设置为15 ppm， ε t 设置为0.5℃。为进行对比实验，部署第二套相同硬件的上述设备，设置其为固定周期传输数据。  在天津滨海国际机场T2航站楼出发大厅进行主要环境参数采集，根据采集过程中系统能耗和系统稳定性进行性能分析。  系统正常运行时，检测各模块功耗，结果见表1。 Table 1 模块 平均功耗(mW) CO 2 传感器 3.5 温度传感器 3.3 CC2420无线射频模块 57.4 表1. 各模块功耗统计表 根据表1得出：功耗最大的模块是无线射频模块，检测器能耗与发送数据量呈正比。实验期间，统计31天中两种模式(传统固定周期传输和变周期数据传输)下数据传输字符总长度，统计结果见图5。 图5. 数据字符长度累加对比图 实验结果显示：采用变周期传输模式比传统固定周期传输模式节能67.22%。变周期传输模式中监测系统传输数据总量大大小于传统传输模式，显著降低功耗。  为验证监测系统稳定性，采用变周期传输模式传输一组数据，重复30次，纪录上位机监测软件接收情况。对照组采用传统固定周期传输模式进行相同数据传输，系统稳定性测试结果见图6。 图6. 系统稳定性测试结果 分析上位机接收数据结果，传统固定周期传输模式下，所有检测节点相同周期发送数据造成数据传输网络堵塞，数据丢失率为2.3%。变周期传输模式下，避免重复数据传输，减小网络负荷，大大降低数据丢失率，数据丢失率仅为0.49%，数据传输稳定性好，系统更加可靠。  监测系统在航站楼中的应用主要包括：根据监测系统采集的数据，结合出发大厅内旅客量，进行参数延迟时间和变化率分析，可以为旅客提供舒适环境，并对提高环境控制系统能效提供参考依据。  出发大厅E、F、G、H四个值机岛中，H值机岛代理航空公司数量占机场运营航空公司总数的60%，因此选择布置在H值机岛H06节点检测的环境数据进行分析 [ 17 ]。使用监测软件通过历史数据查询功能，读取H06检测器节点内存储在EEPROM中的数据，读取3月31号CO 2 浓度和温度数据，如图7所示。 图7. 出发大厅内环境参数曲线 根据图7可以看出，当日CO 2 浓度参数曲线主要出现四个波峰，分别在10:00、14:55、16:30和18:10达到峰值525 ppm、543 ppm、549 ppm和522 ppm。CO 2 浓度值小于中国《室内空气质量标准》国标GB/T18883-2002中规定的CO 2 室内空气质量标准1000 ppm，航站楼内空气质量良好。但温度参数曲线仅存在两个波峰，在17:20达到主峰值23.3℃，在18:54达到次波峰23.2℃。监测上述指标，当CO 2 浓度高于室内空气质量标准，或者温度过高(过低)时，会给旅客带来不适，可以通过空调系统增加新风量降低CO 2 浓度，调节空调供冷(或供暖)来优化航站楼内环境质量。  为分析CO 2 浓度、温度随旅客变化规律，对出发大厅内客流量进行统计、分析。根据Gamma分布规律将相同时间段内每个航班旅客到达数量累加，取Gamma分布下形状参数为3.87，尺度参数为3.6，计算出发大厅内旅客数量 [ 18 ]。设出发大厅内旅客计算周期为监测系统固定采样周期5分钟。考虑旅客办理值机手续、托运行李等时间，旅客在出发大厅内平均停留时间为20分钟 [ 19 ]。根据3月31号航班计划离港信息可以得到T2航站楼出发大厅内旅客数量见图8。 图8. 出发大厅内旅客数量 根据图8可知：当日出发大厅中旅客最早到达和最晚离开的时刻分别是3:30和22:05。当日旅客数量变化曲线图共存在五个主要波峰，其中在8:50达到当日旅客最大峰值532人，在15:50达到当日第二个峰值378人 [ 20 ]。  结合客流量曲线图及监测系统采集的环境数据，分析CO 2 浓度和温度随旅客量变化存在的延迟时间。分析3月31号客流量开始增加的时刻、当日主波峰、次波峰时刻环境参数的延迟时间见表2。 Table 2 时刻 客流量/个 客流量状态 CO 2 响应时刻 CO 2 延迟时间/min 温度响应时刻 温度延迟时间/min 3:30 1 开始增加 4:30 60 6:40 190 8:50 532 主波峰 10:00 70 17:20 510 15:50 378 次波峰 16:30 40 18:54 184 表2. 延迟时间分析 根据表2可知：CO 2 浓度随客流量变化的平均延迟时间为57 min，温度随客流量变化的平均延迟时间为295 min。CO 2 浓度参数随客流量变化响应更快，比温度参数对客流量变化延迟时间缩短5.2倍，CO 2 浓度参数对客流量变化更加灵敏。  客流量在19:20时达到当日第五个波峰200人后逐渐减少，为掌握环境参数每个周期的变化情况，监测系统采用传统固定周期采集出发大厅环境参数，数据见表3，根据表3数据详细分析CO 2 浓度和温度数据变化规律。 Table 3 时间 温度/℃ 温度变化率/% CO 2 /ppm CO 2 变化率/% 19:20 23.3 516 19:25 23.2 0.43 494 4.26 19:30 23.2 0.00 481 2.63 19:35 23.2 0.00 475 1.25 19:40 23.2 0.00 449 5.47 19:45 23.1 0.43 480 -6.90 19:50 23.1 0.00 461 3.96 19:55 23.1 0.00 439 4.77 20:00 23.0 0.43 448 -2.05 20:05 23.0 0.00 465 -3.79 20:10 23.0 0.00 437 6.02 20:15 23.0 0.00 436 0.23 20:20 23.0 0.00 443 -1.61 20:25 22.9 0.43 426 3.84 20:30 22.9 0.00 437 -2.58 20:35 22.9 0.00 432 1.14 20:40 22.8 0.44 425 1.62 20:45 22.8 0.00 400 5.88 表3. 出发大厅环境参数 根据表3可知：温度和CO 2 均伴随客流量减小而逐渐降低。其中温度平均值为23℃，降低速率为0.13%；CO 2 浓度平均值为452 ppm，降低速率为1.40%，CO 2 浓度降低速率是温度降低速率的10.77倍，CO 2 浓度随客流量变化更迅速。"
"本文开发基于STM32和Zigbee技术的航站楼环境参数实时无线监测系统，完成变周期数据传输检测器节点的开发，在监测软件界面可以实时了解航站楼内环境参数。通过实验和航站楼实际应用，得出如下结论： 1) 与传统固定采样周期系统相比，变周期数据传输系统降低超67%的能耗，数据丢失率小于0.5%，系统更加可靠，功耗显著降低。 2) 监测系统在航站楼应用过程中，能够稳定、准确监测内CO 2 浓度和温度环境参数。CO 2 浓度参数比温度参数对客流量变化延迟时间缩短5.2倍，且CO 2 随客流量变化速率为温度变化速率的10.77倍。CO 2 浓度对客流量变化更加灵敏，显著降低航站楼内环境控制系统滞后性，可以作为航站楼环境控制系统提高能效的一项重要参数。 3) 通过检测CO 2 浓度，可以实时掌握旅客量变化情况。当旅客量逐渐增多时，提前向航站楼内增加新风量、进行温度调节。当旅客数量减小时，逐渐减小新风量和空调系统运行功率，可显著减低航站楼空调系统能耗。"
