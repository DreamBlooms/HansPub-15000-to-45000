"孤岛效应检测在并网光伏发电系统中具有重要的意义，特别是在逆变器输出与负载功率相匹配时，被动式检测不能有效地检测出孤岛效应，因此在频率偏移法的基础上进行改进，引入正反馈系数，进一步减小检测盲区，同时，在该方法中加入容错控制技术，对传感器的检测信号进行故障判断，提高孤岛检测的快速性和可靠性。 关键词 :孤岛效应，频率偏移法，容错控制技术"
"近年来，能源危机的不断加剧，人们对电能需求量的不断增大，对电能质量要求的不断提高使并网光伏发电系统得到了广泛的应用。由于并网光伏发电系统通过逆变器直接将直流电逆变成交流电供用户使用并馈送给电网，因此需要有各种完善的保护措施，除了通常的电流、电压和频率保护外，还需要考虑孤岛效应。所谓孤岛效应是指在电网故障断电或者维修停止供电时，负载和光伏发电系统形成了一个自给自足不受电网控制的孤岛。孤岛运行对系统以及人身安全都有威胁，因此，及时检测到孤岛效应的发生具有十分重要的意义。孤岛效应检测时为了避免因传感器的信号故障带来的误检和漏检而加入容错控制技术，对传感器的信号进行故障判断，确保传输给主控器的检测信号是正确的，保证孤岛效应检测的可靠性[ 1 ] 。"
"并网光伏发电系统结构示意图如图1所示。并网运行时，逆变电源与电网在公共点 处连接，共同为负载提供功率，可以得到： 电网供电，系统正常工作时，由能量守恒可知： (1) (2) 式中： ， 分别为负载的电压和角频率； ， 分别为并网光伏发电系统输出的有功和无功； ， 为负载正常运行时所需的功率； ， 分别为电网的有功和无功。 电网停止供电，孤岛发生，并网光伏发电系统单独向负载提供功率： (3) (4) 由式(1)和式(3)可知： (5) 图1. 并网光伏发电系统结构示意图 由式(2)和式(4)可知： (6) 当 时， 处的电压幅值在电网断电前后不变化；当 时，逆变器输出电压频率在电网断电前后不变化。 如果光伏发电系统输出的功率与负载所需功率相平衡，光伏发电系统馈送给电网的功率和电网给负载提供的功率 为零，当电网断电，即孤岛发生时，由式(5)可知断电前后公共点电压相等，逆变器输出电压不变，当 和 都为零时，式(6)可以改写成： (7) 从上式可知 ，当电网断电时，光伏发电系统输出功率全部供负载使用，公共点电压和频率基本不变，不然，公共点电压和频率将变化，根据电压和频率的变化情况，并通过合理阈值的设置，可以判断孤岛的发生 [ 2 ] 。"
"频率偏移法的原理是通过并网系统向电网注入略有畸变的电流，使负载的电压频率随之产生变化。电网正常工作时，由于电网的平衡钳制作用和锁相环的作用，公共点电压频率不发生变化；电网断网后，逆变器输出电流偏移使得公共点电压频率发生变化，当频率超出阈值时，孤岛现象被检测到。同时加入正反馈以达到快速检测孤岛效应的目的。频率偏移法的原理图如图2所示。 为加入死区时间，引入频率偏移法的截断系数 ，定义为加入扰动后电压和电流过零点之间的时间差与电压波形的半个周期之比，它表示系统受扰动强度。其表达式为： (8) (9) 式中， 为施加到逆变器的扰动系数， 为初始截断系数，K为正反馈系数， 为逆变器输出电流频率， 为电网电压频率。 为公共连接点电压， 为系统额定电压。 频率偏移法检测孤岛效应的流程图如图3所示：首先对公共点电压 进行采样，提取 相角和 图2. 频率偏移法原理图 图3. 频率偏移法的流程图 频率；再根据相角和频率信息，编写检测程序，生成扰动波形，计算扰动增益，并把这些信息发送给并网系统，如果 ，则认为负载性质为感性，扰动系数正反馈的作用公式为： ，如果 ，则认为负载性质为容性，扰动系数正反馈的作用公式为： ；同时对采集到的电压和频率进行判断，若 或 ，则说明电压超出阈值，过/欠电压保护动作，若公共点电压频率 或 ，则说明电压频率超出阈值，过/欠频保护动作，系统处于孤岛运行状态，触发继电器动作，断开光伏发电系统与负载之间的连接，使逆变器停止工作，实现孤岛保护 [ 3 ] 。"
"并网光伏发电系统孤岛效应检测原理框图如图4所示，主电路是并网光伏发电系统经逆变器后向负载供电同时把电能馈送给电网，除主电路之外还需要有传感器检测部分以及主控部分 [ 4 ] ： 1) 逆变器：逆变器是并网光伏发电系统能量转换的核心，其主要任务是将光伏发电系统输出的直流电转换成合乎标准的交流电供用户使用并馈送给电网。逆变器直接影响并网光伏发电系统的安全、稳定、高效、可靠的运行。逆变器的信号是通过检测公共点电压频率，并添加偏移量来给定的，因此采用SPWM控制的电压型逆变器，以输出与电网电压同频同相的高品质电流，并获得良好的动态响应 [ 5 ] 。 逆变电路如图5所示：直流电压经SPWM控制的三相逆变桥之后再经过LCL滤波器之后供给负载，逆变电路的仿真结果如图6所示。 图4. 并网光伏发电系统孤岛效应检测原理框图 图5. 逆变电路图 图6. 逆变电路的仿真 通过对三角波和正弦波进行比较输出等幅不等宽的SPWM波控制逆变电路，使逆变电路输出的电流近似正弦波。 2) 传感器：由于需要对公共点的电压和电流进行采样，所以采用霍尔电压和电流传感器，它们的工作原理相似，霍尔电流传感器检测的是电流信号然后转换成电压信号，而霍尔电压传感器检测的是电压信号，它们的输出信号经过RC滤波、电压跟随和限幅电路之后输送到主控器。由于信号采样对检测孤岛效应至关重要，它不能出现故障或扰动，为防误检或漏检，所以在此部分加入容错控制技术，以检测传感器的故障并作出相应的处理，保证系统的良好运行 [ 6 ] 。 霍尔电流和电压传感器的电路如图7和图8所示：传感器输出的电流信号对地接一个电阻使其转换为−2.5 V~2.5 V的电压信号，再与2.5 V的电压信号进行相加后转换成0 V~5 V的信号经过电压跟随并分压后通过限幅电路送给主控器。霍尔电流和电压传感器的输出结果如图9和图10所示，进过信号调理电路之后的输出结果如图11和图12所示。 霍尔电流或电压传感器输出的信号在[−2.5 V, 2.5 V]的范围内，频率为50 Hz，经过处理电路之后得到的信号范围为[0 V, 2.5 V]，频率为50 Hz，可以将此信号送给单片机进行进一步运算处理。与如图13所示的霍尔传感器输出信号经过处理后的仿真波形对比可知得到的波形符合要求。 3) 控制器部分：此部分的设计包括SPWM控制设计、防孤岛检测设计、容错控制设计。SPWM控制设计要使逆变器输出与电网电压同频同相的高品质电流，以达到检测孤岛效应的目的；防孤岛检测设计根据检测到公共点的电压或电流的频率，判断是否超出设定的阈值，如果超出阈值则断开S2使分布式发电系统停止向负载供电；容错控制的指导思想是在控制系统某个部件发生故障的情况下，而且这种故障可能会对系统的可靠性能有很大的影响，仍然可以保证系统的稳定性 [ 7 ] 。 SPWM波的是通过将正弦波与三角波比较输出的，正弦波是霍尔电流传感器检测到的波形，三角波的生成是通过滞回比较器和积分电路生成的，如图14所示，生成的SPWM波如图15所示。 图7. 霍尔电流传感器电路图 图8. 霍尔电压传感器电路图 图9. 霍尔电流传感器输出波形 图10. 霍尔电压传感器输出波形 图11. 霍尔电流传感器经过信号调理电路之后的波形 图12. 霍尔电压传感器经过信号调理电路之后的波形 图13. 霍尔传感器信号经过处理后的仿真波形 图14. 三角波发生电路 图15. 生成的SPWM波"
"当孤岛效应检测系统中的传感器发生故障的时，它检测到的信号是不正确的，如果把这个信号直接传送给主控部分，将可能引起孤岛效应检测系统的误动作，降低孤岛效应检测的准确性。因此，只有确定传感器检测信号的准确性才能有效地检测孤岛效应，所以在传感器检测部分运用容错控制技术来判断检测信号的故障与否。容错控制器的设计方法有硬件冗余和解析冗余方法。其中，硬件冗余容错控制是将几个功能相同的部件并联在一起完成同一任务，如果并联部分有一个部件发生故障将不影响系统的正常运行。由于硬件冗余技术在完成同一任务时需要多个部件，所以在提高系统可靠性的同时也带来了一些不足：1) 增加系统的成本、结构、重量和空间；2) 在某些情况下，硬件冗余技术受限制；3) 大型复杂系统是不可能全部采用硬件冗余技术的 [ 8 ] 。 解析冗余容错控制技术是利用控制系统不同部件之间的内在联系和功能上的冗余性，当系统中的某些部件失效时，用其余完好的部件部分甚至全部的承担故障部件所丧失的作用，以维持系统的性能在允许的范围之内。它不需要额外增加硬件设备，具有成本低和易于工程实现等许多优点，因此在容错控制中得到了广泛的应用 [ 9 ] 。 卡尔曼滤波器是基于解析冗余技术中的一个重要方法，它通过线性最小方差估计原理对被估计量进行动态估计。它是一种递推滤波器，由递推方程给出新的状态以及输出估计。因为卡尔曼滤波的计算量和对储存量要求不大而比较容易满足实时性的要求。可以利用卡尔曼滤波的方法，由前几个时刻的状态，对下一个时刻的状态进行预测与估计，修正因异常而引起的输出误差。 孤岛效应检测系统的容错控制技术原理框图如图16所示。首先，由两个局部滤波器K1、K2获得孤岛检测系统误差状态的局部估计值，再将这些局部估计值按最优准则组合起来，输入到主滤波器MF，从而得到整个孤岛检测系统误差状态的估计值，利用这些估计对孤岛检测系统进行反馈校正。 局部滤波器采用状态 检验法来确定各子系统是否发生故障。状态 检验法利用两个状态估计值的差异来对故障进行检测和隔离： 和 是由测量值 和 经卡尔曼滤波得到的， 和 是由状态递推器递推得到的。前者与测量信息有关，因而受系统故障信息的影响，后者与测量信息无关，不受系统信息的影响 [ 10 ] 。 图16. 孤岛效应检测容错技术原理框图 和 可视为高斯随机变量，定义估计误差为： (10) (11) (12) 的方差为： (13) 故障检测函数可选： (14) 服从自由度为n的 分布，即 。 故障判断准则为： 有故障； 无故障。 为设置的阈值，当限定漏检率 时，由 解出的阈值 可使漏检率 最小，因此 可由要求的漏检率 确定 [ 11 ] 。 当传感器没有故障时， 的均值为零。当 的均值大于阈值 时，则传感器发生故障，此时，故障传感器测量到的数据不能准确的反应运行状态，可以将此时局部滤波器的估计值按最优准则组合后输入到主滤波器，得到一个最优的全局估计值，再输入给检测系统，取代故障传感器的测量值，从而实现容错控制 [ 12 ] 。"
"本文对传统的频率偏移法进行了改进，引入了正反馈系数，克服了正偏移时负载呈容性或负偏移时负载呈感性的相位角带来的稀释作用，减小了检测盲区。该方法也可以减小注入的信号扰动量，提高了系统的电能质量。同时，运用了容错控制技术，对传感器部分的检测信号进行故障判断，防止误检，提高了分布式发电系统孤岛效应检测的可靠性。"
