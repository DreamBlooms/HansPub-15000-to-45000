"考虑的队列模型为具有随时间变化的到达率和服务台个数，服从 H 2 ∗ 服务时间分布，顾客放弃服从一般的概率分布。通过分析 G t / H 2 ∗ / s t + G I 队列模型的一个序列，对队首等待时间进行表示，建立队首等待时间的泛函弱大数定律，并给出证明。 关键词 :随时间变化，等待时间，忙期间隔，高负荷极限，胎紧性 Copyright © 2019 by author(s) and Hans Publishers Inc. This work is licensed under the Creative Commons Attribution International License (CC BY). http://creativecommons.org/licenses/by/4.0/"
"随着排队系统理论体系的发展，大量学者对不同的排队模型进行了研究。Liu, Y.N.和Whitt, W. [ 1 ] 建立了在服务时间为指数分布的情况下，多服务台队列模型的高负荷极限。Whitt, W. [ 2 ] 考虑 H 2 * 服务时间分布，建立了 G / G I / n / m 队列模型中队长、等待时间及溢出随机过程的高负荷极限。Pang, G.D., Whitt, W. [ 3 ] 通过建立双参数随机过程的高负荷极限，得到 G / G I / ∞ 队列的高负荷逼近。Liu, Y.N.和Whitt, W. [ 4 ] 用确定的流体模型来逼近多服务台 G t / G I / s t + G I 队列模型，并确定与时间相关的性能函数。Liu, Y.N.和Whitt, W. [ 5 ] 建立了 G t / G I / s t + G I 在高负荷下的泛函弱大数定律。Talreja, R., Whitt, W. [ 6 ] 通过建立二维的Puhalskii首达时间的不变性定理，得到带有放弃的多服务台队列的等待时间的高负荷极限。刘建民 [ 7 ] 通过引入奥伦斯坦–乌伦贝克过程和布朗运动，在高负荷条件下，得到 G I / G I / m 队列中负荷过程和队长过程的收敛极限。Whitt, W. [ 8 ] 建立了 G / G I / n / m 队列模型中队长的扩散逼近，通过用扩散过程的稳态分布得到队列模型测度指标的近似值，重点研究了稳态延迟率。谢瑞金 [ 9 ] 主要研究了 G / G / n / m n + G 队列模型中等待时间在高负荷下的随机过程极限。Halfin, S., Whitt, W. [ 10 ] 证明了关于s个服务台队列的两种不同的高负荷极限定理。Puhalskii, A.A. [ 11 ] 研究了在高负荷条件下，带有顾客放弃的具有周期性的多服务台队列中顾客数的极限。根据文献 [ 1 ]，建立服务时间分布 H 2 * 服务时间分布的 G t / H 2 * / s t + G I 队列模型，运用随机过程极限 [ 12 ] 及概率测度收敛 [ 13 ] 的相关知识，对 G t / H 2 * / s t + G I 队列模型中队首等待时间在高负荷期间的高负荷极限进行证明。"
"G t / H 2 * / s t + G I 队列模型，具有随时间变化的到达率和服务台数，一般到达过程且满足泛函中心极限定理(FCLT)， H 2 * 服务时间分布( H 2 * 服务时间分布是由以概率为p的指数分布和以概率为 1 − p 的零点集混合而成的)，顾客放弃服从一般的概率分布，有无穷等待空间且服从先到先服务的服务原则。 令S表示与 H 2 * 服务时间分布相关的量，设 H 2 * 服务时间分布与n是独立的， H 2 * 服务时间分布的均值为 1 μ ， 0 < μ < ∞ ，则负荷强度是关于n的函数，即 ρ n = λ n μ n ，设 H 2 * 服务时间分布中指数部分的均值为 1 v ，则有 1 μ = p 1 v 。设 D ≡ D ( I ) 表示在区间 I ∈ ℝ 上的左极限存在的右连续实值函数空间，属于 J 1 拓扑，即在区间I上的所有紧子区间中，都可以由连续极限得到一致收敛， ⇒ 表示依分布收敛。 考虑 G t / H 2 * / s t + G I 队列模型的一个序列，指数为n。在第n个模型中，具有一般到达过程，随时间变化的到达率为 λ n ( t ) ≡ n λ ( t ) ，独立同分布(i.i.d.)的 H 2 * 服务时间分布其累积分布函数(cdf)为 G ( t ) ≡ 1 − e − p μ t ，随时间变化的服务台数为 s n ( t ) ≡ ⌈ n s ( t ) ⌉ ，其中 ⌈ x ⌉ 表示大于等于x的最小整数，顾客在队列中等待进入服务的耐心时间是i.i.d.且具有一般的cdf F，假设F是可微的，其概率密度函数(pdf)为f，即 ∀ x ，有 F c ( x ) > 0 和 f ( x ) > 0 。 设 N n ( t ) 表示在 [ 0 , t ] 时间间隔内到达的顾客数，假设到达过程的序列 { N n } 满足具有随时间变换布朗极限的FCLT，即当 n → ∞ 时，有 N ^ n ( t ) ≡ N n ( t ) − n Λ ( t ) n ⇒ N ^ ( t ) ≡ c λ B λ ( Λ ( t ) ) (1) 其中 B λ 为标准的布朗运动(下标 λ 表示与到达过程相关)， Λ ( t ) 表示在 [ 0 , t ] 时间间隔内的总到达率，即 Λ ( t ) ≡ ∫ 0 t λ ( s ) d s ， c λ 2 是关于到达过程变量的参数。 设 X n ( t ) 表示系统中的随时间变化的总顾客数(包括在服务中和队列中等待的顾客数)，有 X n ( t ) ≈ n X ( t ) + n X ^ ( t ) = d N ( n X ( t ) , n σ X ^ 2 ( t ) ) (2) 其中， N ( m , σ 2 ) 表示均值为m，方差为 σ 2 的高斯分布， X ( t ) 为确定的流体逼近， X ^ ( t ) 是均值为0，方差为 σ X ^ 2 ( t ) ≡ V a r ( X ^ ( t ) ) 的高斯过程。 设 B n ( t ) 表示t时刻在服务中的总顾客数； Q n ( t ) 表示t时刻在队列中的总顾客数； X n ( t ) ≡ B n ( t ) + Q n ( t ) 表示t时刻在系统中的总顾客数； W n ( t ) 表示t时刻的队首等待时间(HWT)，即t时刻在队列最前面顾客的等待时间； V n ( t ) 表示t时刻的虚等待时间(PWT)，即t时刻新到达顾客后不放弃的等待时间； A n ( t ) 表示在 [ 0 , t ] 时间间隔内放弃的顾客数； D n ( t ) 表示在 [ 0 , t ] 时间间隔内服务完成后离开的顾客数； F ( x ) 表示进入队列但没有进入服务，按时间x放弃的比例。 假设服务台变化函数 s ( t ) 是可行的，即当 s ( t ) 减小时，不会有顾客被强制退出服务系统。 由流量守恒可得，当 t ≥ 0 时，有 A n ( t ) = X n ( 0 ) + N n ( t ) − D n ( t ) − X n ( t ) (3)"
"假设在该队列模型中， H 2 * 服务时间分布中指数服务分布的部分称为“忙期”，零点集分布部分称为“闲期”。假设系统中“忙期”与“闲期”是交替进行的。 假设系统是从忙期开始，为方便研究，给定一个特殊的初始条件，即所有服务台都是忙的且队列为空，即系统中的初始人数为 X ( 0 ) = B ( 0 ) = s ( 0 ) ，且有 Q ( 0 ) = 0 。 假设在忙期间隔 [ τ 1 , τ 2 ] 内，进入服务的速率大于0，顾客进入服务的速率是由服务台变空闲的量决定的，则当 τ 1 ≤ t ≤ τ 2 ，有 b ( t , 0 ) = s ( t ) p μ + s ′ ( t ) ≥ b inf > 0 (4) 在忙期间隔的服务速率为： b ( t , x ) = b ( t − x , 0 ) G c ( x ) 1 { x ≤ t } + b ( 0 , x − t ) G c ( x ) G c ( x − t ) 1 { x > t } 。 其中 G c ( x ) = 1 − G ( x ) = e − p μ x ， b ( t , 0 ) = s ( t ) p μ + s ′ ( t ) 表示在t时刻进入服务的速率， b ( 0 , x ) 表示初始进入服务的速率。 在忙期间隔内，队长主要在假设没有人进入服务的情况下通过队列中人数密度 q ˜ ( t , x ) 来分析，假设队列初始时为空队列，则 q ˜ ( t , x ) = λ ( t − x ) F c ( x ) ， x ≤ t 。 由文献 [ 4 ] 推论2可知，队长的密度为 q ( t , x ) = q ˜ ( t , x ) 1 { x ≤ w ( t ) } = λ ( t − x ) F c ( x ) 1 { x ≤ w ( t ) } (5) 引理1 (文献 [ 4 ] )考虑一个高负荷间隔 [ 0 , T ) ，如果 0 ≤ w ( 0 ) < ∞ ， λ inf ( t ) ≡ inf 0 ≤ u ≤ t { λ ( u ) } > 0 ，且当 w ( 0 ) > 0 时， q inf ( 0 ) ≡ inf 0 ≤ u ≤ w ( 0 ) { q ( 0 , u ) } > 0 成立，则队首等待时间w是常微分程 w ′ ( t + ) = Ψ ( t , w ( t ) ) ≡ 1 − b ( t + , 0 ) q ˜ ( t , w ( t ) − ) (6) 关于任何初值 w ( 0 ) 在 [ 0 , T ) 上的唯一解。 此外，w在 [ 0 , T ] 上是利普希茨连续的，即 ∀ t ≥ 0 ， u ≥ 0 ， t + u ≤ T ，有 w ( t + u ) ≤ w ( t ) + u 。 w是右可微的，右导数为 w ′ ( t + ) 由式(6)给出。 w也是左可微的，左导数为 w ′ ( t − ) = Ψ ˜ ( t , w ( t ) ) ≡ 1 − b ( t − , 0 ) q ˜ ( t , w ( t ) + ) (7) 由上可知，在除了有限多个点t外，w是处处连续可微的。 引理2 (文献 [ 4 ] )考虑一个高负荷间隔 [ 0 , T ) ，且 0 ≤ w ( 0 ) < ∞ ， λ inf ( t ) ≡ inf 0 ≤ u ≤ t { λ ( u ) } > 0 ，且当 w ( 0 ) > 0 时， q inf ( 0 ) ≡ inf 0 ≤ u ≤ w ( 0 ) { q ( 0 , u ) } > 0 成立， w ( 0 ) = 0 。若 ∀ t ≥ 0 ， υ ( t ) < ∞ ，则 υ 满足 υ ( t − w ( t ) ) = w ( t ) 或 υ ( t ) = w ( t + υ ( t ) ) , t ≥ 0 (8) 此外， υ 在点t是连续的，当且仅当 ∃ ε > 0 ，使得 w ( t + υ ( t ) + ε ) = w ( t + υ ( t ) ) + ε 。反之也成立，当且仅当 t + υ ( t ) ≤ u ≤ t + υ ( t ) + ε ，有 b ( u , 0 ) = 0 ，若 b ( ⋅ , 0 ) > 0 ，则 υ 是连续的。 由引理1，引理2可知，在 G t / H 2 * / s t + G I 队列模型中HWT w是下面常微分方程(ODE)的唯一解 w ′ ( t ) ≡ d w d t ( t ) = 1 − b ( t , 0 ) q ˜ ( t , w ( t ) ) = 1 − s ( t ) p μ + s ′ ( t ) λ ( t − w ( t ) ) F c ( w ( t ) ) (9) 由上述假设，可知上式中的分子与分母都是大于0的，因此有 在忙期期间， ∀ t ，有 − ∞ < w ′ ( t ) < 1 由式(9)的ODE可得 w ( t ) = ∫ 0 t ( 1 − b ( u , 0 ) q ˜ ( u , w ( u ) ) ) d u , t ≥ 0 (10) 由引理2可知，PWT υ ( t ) 是式(8)的唯一解，由式(8)也可以解得HWT w。 由式(4)可知， υ 是连续函数，事实上，w和 υ 除在有限多个点外都是可微的，由上式可得其导数为： υ ′ ( t − w ( t ) ) = w ′ ( t ) 1 − w ′ ( t ) 或 υ ′ ( t ) = w ′ ( t + υ ( t ) ) 1 − w ′ ( t + υ ( t ) ) (11) 由式(4)可知，上式是有界的。 在忙期间隔内，服务台都是满的，则在 [ 0 , t ] 时间间隔内完成服务离开的顾客数 D ( t ) = S ( t ) p μ ，其中 S ( t ) ≡ ∫ 0 t s ( u ) d u 。 在 [ 0 , t ] 时间间隔内放弃的顾客数为 A ( t ) = ∫ 0 t α ( s ) d s ，其中 α ( s ) = ∫ 0 ∞ Q ( s , x ) h F ( x ) d x (12) 是关于累积分布函数F的风险率函数，因为f是 D 中的元素，对所有x，有 F c ( x ) > 0 ，则 h F ( x ) 是有界的。 因为假设系统开始时为忙期，则忙期间隔为 [ τ 2 i , τ 2 i + 1 ] ， i ≥ 0 ，闲期间隔为 [ τ 2 i + 1 , τ 2 i + 2 ] ， i ≥ 0 ，有限多个这样的间隔可以覆盖整个区间 [ 0 , T ] 。现在用递归的方法考虑这些间隔，为方便表示，下文中记作 [ 0 , τ ] 。 先考虑一个忙期间隔 [ 0 , τ ] ，假设当 n → ∞ 时， X ¯ n ( 0 ) ⇒ X ( 0 ) ，有 X ( 0 ) = s ( 0 ) 。 通过分析进入服务的顾客数来研究队首等待时间。 设 E n ( t ) 表示在 [ 0 , t ] 时间间隔内进入服务的顾客数， ∀ t ， 0 < t < τ ，有 Λ ( t ) > D ( t ) 。则进入服务的人数与因完成服务而离开造成服务台空闲和服务台的变化量之和是渐进相等的。 即，当 n → ∞ 时， sup 0 < t < τ { | E n ( t ) − ( D n ( t ) + ⌈ n s ( t ) ⌉ − ⌈ n s ( 0 ) ⌉ ) | } = ο ( n ) (13) 对 E n ( t ) 进行刻画，有 E ¯ n ( t ) ≡ E n ( t ) n , E ^ n ( t ) ≡ n ( E ¯ n ( t ) − E ( t ) ) (14) 在 D 中，当 n → ∞ 时，有 E ¯ n ( t ) ⇒ E ( t ) , E ^ n ( t ) ⇒ E ^ ( t ) (15) 其中 E ( t ) ≡ D ( t ) + s ( t ) − s ( 0 ) ， E ^ ( t ) = D ^ ( t ) = B s ( D ( t ) ) 。 关于 E n ( t ) 还有另一种表示方式：因为进入服务的顾客是等待时间最长的顾客， Q n ( t ) = Q ˜ n ( t , W n ( t ) ) = ∑ i = N n ( t − W n ( t ) − ) + 1 N n ( t ) 1 ( τ i n + η i > t ) 表示在 [ 0 , t ] 时间间隔内进入服务的顾客数 (16) 其中 τ i n 表示在模型n中第i个顾客到达的时间； η i 表示第i个顾客的等待时间。 设 E n ( t , ε ) ≡ E n ( t + ε ) − E n ( t ) ，若时间间隔足够小的时候，放弃的人数可以忽略。 设 I n ( t , ε ) 表示在 [ t , t + ε ] 内从队列前面离开的顾客数， A n I ( t , ε ) 表示 I n ( t , ε ) 中放弃的顾客数 则 E n ( t , ε ) = I n ( t , ε ) − A n I ( t , ε ) (17) 其中 (18) 因为队列中顾客的等待时间是以速率1增加的，则有 W n ( t + ε ) ≤ W n ( t ) + ε 。 下证 A n I ( t , ε ) 是可以忽略的。 令 J n ( t , ε ) 表示在t时刻在系统中的顾客，在 [ t , t + ε ] 时间间隔内没有进入服务，在 t + ε 时刻之前会放弃的顾客数。 可知， I n ( t , ε ) − J n ( t , ε ) 的顾客数一定会进入服务，因为在 t + ε 时刻之前没有放弃。 首先考虑到达时间 τ i n ， 0 < τ i n < τ ，则 J n ( t , ε ) ≤ I n ( t , ε ) sup { P ( t + τ i n + η i ≤ t + ε | τ < τ i n + η i ) } ≤ I n ( t , ε ) sup 0 ≤ t ≤ τ { F c ( t ) − F c ( t + ε ) } ≤ I n ( t , ε ) ‖ f ‖ τ ε + ο (ε) 则 A n I ( t , ε ) ≤ J n ( t , ε ) ≤ K ε I n ( t , ε ) , K = ‖ f ‖ τ (19) 由式(13)和(16)等价，可以对队首等待时间 W n ( t ) 进行描述。 如果系统一直处于忙期，可以使用无穷服务台模型，如式(13)中，其误差可以忽略。 我们可以得到式(18)的另一种表达式 I n ( t , ε ) = n ∫ t − W n ( t ) t + ε − W n ( t + ε ) ∫ 0 ∞ 1 ( s + x > t ) d K ¯ n ( N ¯ n ( s ) , x ) (20) 其中 K ¯ n ( t , y ) ≡ 1 n ∑ i = 1 ⌊ n t ⌋ 1 ( η i ≤ y ) ， t ≥ 0 ， y ≥ 0 。 根据文献 [ 3 ] 可知 I n ( t , ε ) = I n , 1 ( t , ε ) + I n , 2 ( t , ε ) + I n , 3 ( t , ε ) (21) 其中 I n , 1 ( t , ε ) = n ∫ t − W n ( t ) t + ε − W n ( t + ε ) F c ( t − s ) d N ^ n ( s ) 。 I n , 2 ( t , ε ) = n ∫ t − W n ( t ) t + ε − W n ( t + ε ) ∫ 0 ∞ 1 ( s + x > t ) d R ^ n ( s , x ) (22) I n , 3 ( t , ε ) = n ∫ t − W n ( t ) t + ε − W n ( t + ε ) F c ( t − s ) λ ( s ) d s R ^ n ( s , x ) ≡ n K ¯ n ( N ¯ n ( s ) , x ) − N ^ n ( s ) F ( x ) − n Λ ( t s ) F (x) 定理(等待时间的泛函弱大数定律) 考虑一个忙期间隔 [ 0 , τ ] 。若 X ¯ n ( 0 ) ⇒ X ( 0 ) 成立，且 X ( 0 ) = s ( 0 ) ，则在 D ( [ 0 , τ ] ) 中，当 n → ∞ 时，有 W n ⇒ w (23) 其中w为式(9)中连续确定性流体模型函数的极限。 证明：为方便证明，我们考虑特殊的初始条件，即所有服务台都是忙的且队列为空。可知在忙期间隔离去过程与速率为 s ( t ) p μ 的非齐次泊松过程是渐进相等的。要证 W n ⇒ w 。通过利用判别紧性的方法(参考文献 [ 12 ]，第11.6节)来证W的泛函弱大数定律，我们需要先证明序列 { W n } 在 D ( [ 0 , τ ] ) 上是胎紧的，然后证明每个收敛子序列的极限相等。 先证 { W n } 的胎紧性 首先序列 { W n } 是有界的，因为 W n ( t ) ≥ 0 且 W n ( t ) 最大是以速率1增加的。所考虑的忙期间隔是在一个较大的有限间隔 [ 0 , τ * ] 中，因为系统假设是从忙期间隔开始且队列为空，则 W n ( t ) ≤ τ * 。 在闲期间隔内， W n ( 0 ) ⇒ 0 仍然成立，所以 lim n → ∞ sup W n ( t ) ≤ τ 。 因为对所有的t， W n ( t + δ ) − W n ( t ) ≤ δ ，则 W n ( t ) 的连续模有界。 设 I ¯ n , j ≡ I n , j n ，在 D ( [ 0 , τ ] ) 中， I ¯ n , 1 ⇒ 0 e ， I ¯ n , 2 ⇒ 0 e 则 ‖ I ¯ n − I ¯ n , 3 ‖ τ ⇒ 0 . (24) 由式(11)可知， I ¯ n , 3 ( t , δ ) − A ¯ n I ( t , δ ) ⇒ E ( t , δ ) ，则 A ¯ n I ( t , δ ) 是可以忽略的。 由对 λ 和F的假设，可知当 c ≡ F c ( τ ) λ inf ( τ ) > 0 时， I n , 3 的被积函数是有界的。 有 I ¯ n , 3 ( t , δ ) c ≥ W n ( t ) − W n ( t + δ ) + δ (25) 所以 W n ( t ) − W n ( t + δ ) ≤ I ¯ n , 3 ( t , δ ) c − δ ≤ E ¯ n ( t , δ ) c 。 则有 lim n → ∞ sup { W n ( t ) − W n ( t + δ ) } ≤ D ( t , δ ) + s ( t , δ ) c ≡ K δ ，K为常数。 (26) 即序列 { W n ( t ) : 0 ≤ t ≤ τ } 是胎紧的。 再说明 { W n } 收敛子序列的极限，由胎紧性可知每个序列都有一个收敛的子序列，则要证 W n ⇒ w ，现在只需证 { W n } 的每个收敛子序列的极限为w。即证w满足下式 w ′ ( t ) ≡ d w d t ( t ) = 1 − b ( t , 0 ) q ˜ ( t , w ( t ) ) = 1 − s ( t ) p μ + s ′ ( t ) λ ( t − w ( t ) ) F c ( w ( t ) ) 或 w ( t ) = ∫ 0 t ( 1 − b ( u , 0 ) q ˜ ( u , w ( u ) ) ) d u 因为 w 是上面方程的唯一解。 由式(13)和(16)可得 E ¯ n ( t , ε ) ⇒ E ( t , ε ) = ∫ t t + ε b ( s , 0 ) d s , n → ∞ (27) 在上式中，当 ε → ∞ 时，其极限接近于 b ( t , 0 ) = s ( t ) p μ + s ′ ( t ) 。 我们还需要考虑从队列中离开的顾客数。 I ¯ n ( t , ε ) 与 I ¯ n,3 ( t , ε ) 是渐进相等的。 对 I ¯ n , 3 ( t , ε ) 应用 W n ⇒ W 和连续映射定理可知，在 D ( [ 0 , τ ] ) 中， I ¯ n ( t , ε ) ⇒ I ( t , ε ) ≡ ∫ t − W ( t ) t + ε − W ( t + ε ) F c ( t − s ) λ ( s ) d s (28) 也就是说，一旦我们知道极限W就可以确定 I ( t , ε ) 的极限。 由上可得， A ¯ n I ( t , ε ) = E ¯ n ( t , ε ) − I ¯ n ( t , ε ) ⇒ A I ( t , ε ) ≡ E ( t , ε ) − I ( t , ε ) (29) 在给定极限W的条件下， I ( t , ε ) 和 A I ( t , ε ) 极限可以确定。 则 E ( t , ε ) = I ( t , ε ) + A I ( t , ε ) = ∫ t − W ( t ) t + ε − W ( t + ε ) F c ( t − s ) λ ( s ) d s + A I ( t , ε ) (30) 由式(19)可知，当 ε 任意小时， A I ( t , ε ) 可以忽略。 则 E ( t , ε ) = b ( t , 0 ) ε + ο ( ε ) = F c ( t − W ( t ) ) λ ( W ( t ) ) ( 1 − W ′ ( t ) ) + ο ( ε ) (31) 由引理1可知W满足式(9)，因为常微分方程有唯一解，则 P ( W = w ) = 1 。 因为以上结论对每个收敛子序列的极限都成立，则 W n ⇒ w 。 因为 W ⇒ w ，可以确定 I ( t , ε ) 和 A I ( t , ε ) 的极限，即用 w ( t ) 代替 W ( t ) 。 即 E ( t ) 可以表示为 E ( t ) ≡ E ( 0 , t ) 或 E ( t ) = D ( t ) + s ( t ) − s ( 0 ) = ∫ 0 t − w ( t ) F c ( t − s ) λ ( s ) ( 1 − w ′ ( s ) ) d s . □"
"本文是在特殊初始条件下对 G t / H 2 * / s t + G I 队列模型进行研究。通过将两种不同表达式等价，对队首等待时间进行表示。先证明队首等待时间序列的胎紧性，再说明每个收敛子序列收敛到同一个极限来证明队首等待时间的泛函弱大数定律。"
