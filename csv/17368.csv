"本文提出了一种综合运用混合高斯模型前景检测方法、Canny边缘检测、霍夫直线检测、颜色识别与重心检测方法，能较好的解决视频监控系统中行人越界检测的工程类问题。实验结果表明，此综合运用检测方法简单有效、易于实现，且检测准确率高、运行速度快。 关键词 :混合高斯模型，霍夫直线检测，颜色识别，重心检测"
"运动检测与物体识别技术是计算机视觉的热点研究领域，其中，基于运动目标检测的识别技术已广泛应用于各个领域。目前，运动目标检测识别领域的算法较多，简单的有基于特征的识别，如轮廓、颜色、边缘等特征识别；中等的特征有局部二值统计LBP [ 1 ] ，SIFT [ 2 ] 、SURF [ 3 ] 等特征识别；高等的有采用分类器对提取的特征进行分类，如人脸Haar检测 [ 4 ] ，行人检测(HOG) [ 5 ] 等。常见的运动目标检测方法有帧差法、背景减除法、光流法等 [ 6 ] 、自适应背景检测法、独立多峰模型法 [ 7 ] ，传统的运动目标检测方法在背景比较单一的情况下能取得较好的效果，识别的速度较快，但不能较好应用于复杂背景当中。一些比较复杂的算法，如行人检测、光流跟踪往往比较耗时，无法满足实时性需求。"
"本文提出的综合运用检测方法，克服以上传统方法的不足，较好解决行人越界检测问题。首先，采用Canny边缘检测 [ 8 ] 监控系统中的白色边界线，然后使用霍夫变换 [ 9 ] 检测直线，记录直线的两个端点，从而计算出边界线的位置，而后采用混合高斯模型 [ 10 ] 检测算法检测出运动物体，排除背景干扰，紧接着采用颜色统计法，监控两种特定行人(特定行人甲和特定行人乙)，由着色衣服进行区分允许或静止通行。通过分析着装衣服的RGB颜色属性，统计每帧图片中的衣服区域的颜色像素总和，估算出行人衣服轮廓的质心，最后，通过判断质心和边界线的位置关系来判定特定行人是否越界。整个算法流程如图1所示。  Canny边缘检测算法是一种优秀的边缘检测算法，能精确地检测出边缘来。边界线一般呈现白色，通过颜色过滤，通过统计边界线的R、G、B的范围，可将边界线的大致位置求出，再进行边缘检测，能减少算法运行时间。Canny边缘检测的主要步骤是：1) 去噪；2) 用一阶偏导的有限差分来计算梯度的幅值和方向；3) 对梯度幅值进行非极大值抑制；4) 用双阈值算法检测和连接边缘。图2(b)显示经过颜色过滤，再使用Canny边缘检测求出图2(a)中的边界线。  在监控视频中，特定行人乙越过边界线则进行报警。为了检测行人是否越界，首先要将边界线的具体位置计算出来。边界线的定位直接决定了检测行人越界的正确率。常见的边界线寻找方法有颜色标定法、直线检测法等。其中，颜色标定法对光照鲁棒性不好，各种噪声也会影响边界线的检测结果。边界线一般由白色的横条组，最好的检测方法是采用霍夫直线检测。 霍夫变换是图像变换中的一种重要的方法，主要是从图像中分离出具有相同属性的形状。霍夫变换寻找直线的方法比其他方法更好的减少噪声的干扰。霍夫变换检测直线的原理是：直角系坐标跟极坐标是在直角坐标系和极坐标系的对应关系，点、直线在两个坐标系中是对偶关系。即直角坐标系中的点是极坐标系中的线，直角坐标系中的线是极坐标系中的点。反过来也成立。检测图像中的直线，可以转化 图1. 行人越界检测算法流程 图2. 颜色过滤以及边缘检测后的结果 为统计检测极坐标系中的点 。图像中直线的表示，可由斜率和截距表示，而极坐标中用 表示。 (1) 对应于 空间的一条正弦曲线：多个点在 平面上就是多条正弦曲线，而多条正弦曲线会相交，交点就是直角坐标系中的直线。直角坐标系中的一条直线上的三个点对应于 空间中三条曲线，并交于一点。统计一个矩阵中多条线相交的点作为检测直线的极坐标表现形式，这样就能求出图像中存在的直线。在寻找边界线的时候，会有很多直线被检测出，在同一水平线上，去顶部和底部直线的中点，作为检测的边界线。  混合高斯模型是目前背景建模最成功的方法之一，运用混合高斯模型对样本的概率密度分布进行估计，而估计采用的模型(训练模型)是几个高斯模型的加权和。每个高斯模型就代表了一个类。对样本中的数据分别在几个高斯模型上投影，就会分别得到在各个类上的概率。然后我们可以选取概率最大的类作为判决结果，使用K (基本为3到5个)个高斯模型来表征图像中各个像素点的特征，在新一帧图像获得后更新混合高斯模型，用当前图像中的每个像素点与混合高斯模型匹配，如果成功则判定该点为背景点，否则为前景点。 混合高斯模型前景运动检测算法的流程是： 1) 每个新像素值 同当前K个模型按照下式进行比较，直到找到匹配新像素值的分布模型，即同该模型的均值偏差在 内 (2) 2) 如果所匹配的模式符合背景要求，则该像素属于背景，否则属于前景。 3) 各模式权值按如下公式更新，其中 是学习速率，对于匹配的模式 ，否则 ，然后各模式的权重进行归一化： (3) 4) 未匹配模式的均值 与标准差不变，匹配模式的参数按照如下公式更新： (4) (5) (6) 5) 如果第1步中没有任何模式匹配，则权重最小的模式被替换，即该模式的均值为当前像素值，标准差为初始较大值，权重为较小值。 6) 各模式根据 按降序排列，权重大、标准差小的模式排列靠前。 7) 选前B个模式作为背景，B满足下式，参数T表示背景所占比例 (7)  该步骤的详细算法是： 1) 设置三个标记矩阵，大小跟每帧图像的大小相同，分别用来标记特定行人甲、特定行人乙以及无人时的图像； 2) 依次遍历图像中的每个像素点，判断每个像素点的范围，当符合一定的范围，则在相应的标记矩阵中进行标记；其中，掩模M1的获取方法是通过统计特别行人甲的衣服像素范围得到，掩模M2的获取方法是通过统计特别行人乙的衣服像素范围得到，掩模M3是统计其他行人衣服的像素范围得到。这些不同人所穿的衣服颜色各不相同，通过统计衣服的颜色，就能获得相应的掩模。 3) 分别依次计算三个标记矩阵的像素总和以及重心，判断是否是M2 (特定行人乙)标记，如判定是，同时 标记矩阵过线，则进行报警。 如图3所示。 在行人越界监控系统中，平常行人跟特定行人的衣服着装是区分开来的，并且衣服颜色均是固定的。识别平常行人和特定行人最好的方法就是分辨其所穿着衣服的颜色。平常人衣服的颜色RGB值会呈现在一定的范围内，其着装衣服的颜色范围为 (8) 特定的行人的衣服颜色范围为 (9) 图3. 特定行人越界检测流程图 通过统计每帧图像中颜色的范围以及高斯混合模型前景运动检测算法检测出来的掩模，可以得到行人属性的二值图像，然后统计图像中标记像素的重心以及像素的个数，从而确定该行人属于正常人还是属于特定行人。重心计算的公式为： (10) (11) 其中，x%，y%，为计算后的重心横、纵坐标值， ， 为离散的横、纵坐标值。 在计算出重心坐标值后，需要辨别当前帧重心和前一帧重心以及边界线的位置的关系，判断重心是否超过了边界线。当边界线的位置，处于前一帧重心和当前帧重心中间时，并且通过颜色统计法检测出的运动行人是特定行人乙时，则报警。特定行人乙越界的关系示意图如图4所示。"
"为了验证本文的算法的可行有效性，采用VC++2010与OpenCV2.4.3进行试验实验。电脑配置为双核CPU主频2.0 GHz，图像大小1980 × 1020。实验视频采用自己拍摄的监控行人越界视频。其中，模拟正常人越界的视频100个，每个视频中正常人越界10次；模拟特定行人越界的视频100个，每个视频中特定行人越界10次。通过观察视频的处理效果以及正确识别率和识别时间，来验证本文算法相对于其他算法更具优越性。 如图5所示，对视频中的第一帧中的边界线进行检测。白线中的黑色细线则为检测到的边界线。通过确定边界线的位置，才能在以后的每帧中进行检测，判断特定行人是否越界。 图6是各种运动检测算法的检测效果图，分别为本文算法、基于自适应背景学习的运动检测算法、 图4. 特定行人乙越界示意图 图5. 边界线检测效果图 图6. 各种前景运动检测算法效果图 独立多模BGS [ 11 ] 运动检测算法。 从图6可以看出，本文所使用的运动检测算法能够有效的检测出运动的物体，并且得到非常干净的背景。其他算法都会产生一些噪声干扰，或者产生运动“鬼影”的现象。运动检测算法性能越好，以后的行人定位越精确。 表1是各种前景运动检测算法跟颜色、重心相结合检测特定行人所用的时间，统计的依据是对检测 Table 1 算法 本文 基于自适应背景学习的运动检测算法 独立多模 用时(毫秒) 19 24 24.3 表1. 本文算法与其他前景检测算法用时对比 Table 2 算法 本文 文献 [ 12 ] 文献 [ 13 ] 文献 [ 14 ] 文献 [ 15 ] 正确率(%) 100 94.6 98.1 96.2 93.3 用时(毫秒) 19 29 356 298 96 表2. 本文算法与其他相似算法用时和正确率对比 图7. 越界报警示意图 到的每一帧处理的时间进行统计，然后取这些帧的平均时间。从表1可以看出，本文算法的前景检测性能最好。 表2是本文算法跟其他相似算法在相同条件下正确率和使用时间对比，统计的依据是每次正常行人或者特定行人越界时，能依据衣服着装颜色，正确区分特定行人，特定行人乙越界则报警则，检测正确，否则错误。从表中可以看出，在高清摄像头拍摄的大图片中，本文算法性能优越，并且正确率非常高。 图7是特定行人甲和特定行人乙越界时的情景。当特定行人乙越过边界线后，则系统会发出报警确定为错误行人；特定行人甲越过边界线后，则系统不报警确定为正确行人。"
"本文提出了综合运用混合高斯模型前景检测方法、霍夫直线检测、颜色识别与质心检测方法，较好地解决了行人越界检测的工程类问题，通过一系列实验证明本方法能在高清摄像头与比较低端的电脑上达到良好的检测效果，具有检测正确率高、运行速度快、算法简单、易于实现等特点。但是，这种综合行人越界检测方法是基于检测行人底层特征进行的越界判定，受光照等因素的影响较大，需待进一步研究。"
