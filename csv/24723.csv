"燃料电池由于动态响应性能较差、功率密度低，需要与锂电池混合使用，用锂电池良好的动态特性弥补燃料电池的不足，因此需要能源管理方法管理能源分配。设计了一种燃料电池与锂电池混合动力能源管理系统综合实验平台，可以进行能源管理方法的教学、开发与测试。平台提供了两种能源管理算法，可以支持教学实验，并为学生自主开发能源管理方法提供了平台。 关键词 :燃料电池，锂电池，混合能源，实验平台，能源管理 Copyright © 2018 by authors and Hans Publishers Inc. This work is licensed under the Creative Commons Attribution International License (CC BY). http://creativecommons.org/licenses/by/4.0/"
"随着化石能源供应的日益紧张和环境问题的日益严峻，绿色能源受到越来越多的关注。氢是地球上含量最丰富的元素，与氧反应只生成水，不产生其他污染物；而且氢气密度低，泄漏时会自动飘离地面，不会像化石燃料一样聚集产生爆炸，是一种清洁、安全、高效的能源。 燃料电池是一种通过电化学反应直接将化学能转变为直流电的装置，即通过燃料和氧化剂发生电化学反应产生直流电和水 [ 1 ] [ 2 ] [ 3 ] [ 4 ] ，其原理是氧化还原反应。燃料电池由于气体传输，质子交换等原因，动态响应性能较差，而锂电池恰好具有良好的动态特性，可以弥补燃料电池的不足，这就要求不同能源的混合使用。混合能源必须经过有效的能源管理才能充分发挥各自的优势，而高效的能源管理方法是进行能源分配充分使用的关键 [ 5 ] [ 6 ] [ 7 ] [ 8 ] [ 9 ] 。 能源管理策略是混合能源管理系统的核心技术，能源管理策略可以分为基于规则的控制策略和基于优化的控制策略 [ 10 ] [ 11 ] [ 12 ] 。基于规则的能量管理控制策略又称为逻辑门限控制策略，其主要思路为通过定义一系列动力系统运行的规则来决定能源分配的状态 [ 13 ] 。基于规则的控制策略又分为确定性规则和模糊性规则, 确定性规则主要包括功率跟随方法、状态机方法，模糊性规则包括传统的模糊规则控制策略、自适应模糊控制策略和模糊预测控制策略等。基于优化能量管理算法是指在建立系统控制目标函数和约束条件后，通过使用优化算法对最优或次优控制策略进行搜索并应用的能量管理理论，一般表现为求取目标函数在可行域内的极小值问题 [ 12 ] 。基于优化的控制策略又包括全局优化和实时优化，全局优化一般要求在全局扰动(即功率需求)已知的条件下进行优化动作搜索，包括动态规划、遗传算法、线性优化等，实时优化方法是指在线对能量管理决策进行优化计算的方法，包括模型预测控制、等效氢耗最小模型预测和随机控制策略等。 本文设计开发了一套燃料电池与锂电池混合动力能源管理系统综合实验平台，可以用于能源管理方法的教学与测试，为混合能源管理算法的研究和开发提供实验平台。"
"实验平台由高压氢气瓶、流量计、燃料电池、锂离子电池、DC/DC转换器、电子负载、电流/电压传感器和STM32控制器等部分组成。氢气瓶通过流量计与燃料电池连接，为燃料电池提供高纯度氢气，流量计通过RS232串口将实时流量发送给控制器进行存储；DC/DC与燃料电池串连，控制器通过CAN总线监测DC/DC的输入功率和输出功率，并控制其输出功率大小；锂电池通过电流/电压传感器和DC/DC并联到电子负载上，锂电池功率由功率守恒P D = P fc + P bat 间接控制，传感器监测锂电池的输出状态，并传给控制器；控制器通过读取提前设定的需求功率剖面，通过RS232串口实时控制电子负载的需求功率，同时控制器通过监控能源状态和需求功率，在主动控制策略中，根据能源管理算法得到两种能源的功率分配情况，并控制DC/DC的输出功率以直接控制燃料电池的输出功率，间接控制锂电池的输出功率，系统框图见图1。  燃料电池的工作原理是氧化还原反应，还原剂为由氢气瓶提供的高纯度氢，氧化剂为空气中的氧气，其反应为水解反应的逆反应，反应式 [ 14 ] [ 15 ] 为： 阳极反应： H 2 − 2 e − → 2 H + 阴极反应： 1 2 O 2 + 2 e − + 2 H + → H 2 O 总反应： 1 2 O 2 + H 2 → H 2 O 燃料电池为上海攀业氢能源科技有限公司生产的EOS600型质子交换膜燃料电池，具体参数见表1。 燃料电池放电需要经过电化学反应、质子和气体的传递、电子传输等过程。尤其是质子传递速度相当慢，当电流需求功率瞬间增大时，燃料电池的电流变化慢，在燃料电池催化剂表面发生欠气，严重影响燃料电池的寿命 [ 16 ] [ 17 ] 。为了避免功率波动较大时，燃料电池动态响应不足对燃料电池造成损害，需要并联锂离子电池，用锂电池的良好动态特性弥补燃料电池不足。  DC/DC表示的是高压(低压)直流电源变换为低压(高压)直流电源，是整个能源管理系统的主要执行部件。它与锂电池并联，与燃料电池串联，有两个作用：一是调节输出电流，以控制燃料电池的输出功率，间接控制锂电池的功率输出；另一方面是稳定燃料电池的输出电压，因为燃料电池的电压随着电流的变化而变化，而且变化范围较大，如图2所示。 图1. 燃料电池/锂电池混合能源管理平台 Table 1 类型 参数 额定功率 额定电压 额定电流 电压范围 氢气纯度 600 W 24 V 25 A 20~40 V ≥99.95% 表1. 燃料电池参数 图2. 燃料电池伏安特性曲线  锂离子电池是一种二次电池(充电电池)，它主要依靠锂离子在正极和负极之间移动来工作。在充放电过程中，Li + 在两个电极之间往返嵌入和脱嵌：充电时，Li + 从正极脱嵌，经过电解质嵌入负极，负极处于富锂状态；放电时则相反。锂离子电池具有良好的动态响应性能、电压高、比能量大、循环寿命长、安全性能好。本文采用格式6S电池，容量5300 mAh，电压范围22.2~25.2 V。图3为所用锂电池的伏安特性曲线。  本实验平台采用STM32-F7开发板作为能源管理控制器，通过两路ADC来监测燃料电池与锂电池的电流、电压，进而得到各电源的输出功率，同时计算锂电池的荷电状态(State of Charge, SOC)，它是进行锂电池管理的重要物理量。控制器与流量计采用RS232接口进行通讯，监控氢气的使用情况。 能源管理算法实时计算出燃料电池的输出功率，然后通过CAN总线控制DC/DC的输出电流来达到控制燃料电池的输出功率的目的。图4为能源控制器系统框图。  本实验平台采用ZY8715可编程电子负载，用来模拟功率剖面的动态变化，功率命令由STM32控制板通过RS232接口控制，而且电子负载具有电流/电压测量功能，所以可以通过读取电子负载寄存器中的值来获得总线的电流、电压。"
"本平台采用两种能源管理算法：被动控制算法和状态机算法，这样在教学实验中，可以对两种能源管理算法进行对比分析。 被动控制能源算法即通过能源自身特性被动的输出功率，不对各能源的功率分配进行主动管理。本文中首先将DC/DC的电压设置为25 V，与锂电池的电压进行匹配，最大电流限制在22 A，避免需求功率下降时，燃料电池以大电流对锂电池进行充电损坏锂电池，对功率分配不进行主动的控制，通过锂电池和燃料电池自身的特性自动进行分配，以满足功率需求。 图3. 锂电池伏安特性曲线 图4. 能源控制器系统框图 状态机能源管理算法 [ 18 ] [ 19 ] 是在实验之前根据输入和输出制定确定的规则库，实验过程中控制器通过输入状态，查阅规则库确定输出状态，控制执行器件使得输出状态为设定状态。本文通过判断需求功率和锂电池状态SOC来决定以何种状态进行功率分配。当需求功率小于燃料电池的额定功率且锂电池电量较多时，由燃料电池提供全部功率；当需求功率超过燃料电池额定功率且锂电池电量较多时，燃料电池在燃料利用率最高功率点进行输出，其余不足部分由锂电池补充；当燃料电池可以满足需求功率但锂电池电量较少时，燃料电池输出功率超过需求功率，多余部分用来给锂电池充电。具体能源状态如表2所示。 其中，SOC Normal指SOC在范围[0.65,0.85]，SOC High指SOC > 0.9，SOC Low指SOC < 0.6，PD指需求功率，Pfc*指燃料电池的输出功率，Pchrg指锂电池的充电电流。500 W是燃料电池的最优输出功率。"
"1) 连接线路。按照图1连接设备，储氢装置关闭；电子负载断电；蓄电池断开。 2) 实验程序准备。设置锂电池初始SOC及初始容量，设置DC/DC初始电压和限制电流。然后进行编译、下载，确认下载成功后再进行下一步。 3) DC/DC初始化。DC/DC上电；打开氢气开关，燃料电池开始工作；重启控制器。测量DC/DC的输出电压是否初始化成功，若未成功再次进行初始，直到初始化成功为止。 4) 开始实验。插上锂电池插头；打开电子负载，并确认电子负载处于定功率输出模式；重启控制器开始实验。 5) 实验结束。程序持续到功率剖面结束为止，实验数据保存到存储单元。关闭氢气开关；断开锂电池插头；电子负载调节到2 A定电流输出，消耗掉燃料电池中剩余的氢气，氢气耗尽后燃料电池自动关闭；最后关闭DC/DC和控制器的电源，实验结束。"
"为了测试实验平台，进行了同一功率剖面下不同能源管理算法的实验，功率剖面为阶梯状，功率每20 s变化一次，具体为0-120 W-360 W-720 W-1200 W-720 W-360 W-120 W-0。 图5(a)和图5(b)分别为被动控制策略和状态机能源管理策略控制下的功率分配曲线。在0~10 s，被动控制时燃料电池因为没有限制而给以较大电流锂电池充电，而状态机策略下燃料电池以100 W功率为锂电池充电；在10 s~150 s，两种算法下燃料电池均以500 W左右的功率进行输出；在150 s时，被动控制情况下燃料电池功率变化平滑，而在状态机能源算法的控制情况下，燃料电池的功率突然下降至100 W，而且被动控制的锂电池充电功率最大超过了500 W，损坏锂电池寿命。图6所示为在被动控制和状态机控制两种能源算法下的氢气消耗量，状态机能源算法相对于被动控制，氢气消耗量节省9.6%。 状态机控制策略相对于被动控制策略能主动调节各能源输出功率，避免被动控制情况下燃料电池以大电流给锂电池充电，损坏锂电池的循环寿命，通过状态机管理算法的管理减少了能源的消耗。这证明了能源管理的必要性与实验平台的可靠性。 Table 2 状态 条件 功率分配 1 2 3 4 5 6 7 SOC High & PD < 100 W SOC High & PD∈[100 W, 550 W] SOC High & PD ≥ 550 W SOC Normal & PD < 500 W SOC Normal & PD ∈[500 W, 550 W] SOC Normal & PD ≥ 550 W SOC Low & PD < 550 W Pfc* = 100 W Pfc* = PD Pfc* = 550 W Pfc* = 500 W Pfc* = PD Pfc* = 550 W Pfc* = PD + Pchrg 表2. 状态机能源管理算法 图5. 功率分配情况 图6. 两种策略的氢气消耗"
"该实验平台很好地实现了燃料电池与锂电池的在线的功率和能量控制，可在低成本条件下，不仅可以满足燃料电池与锂电池能源管理实验的教学任务，而且还可以高效地完成在线能控策略的开发、改进和实验验证等研究工作。本实验平台已经在本校选修课《绿色能源飞行器总体设计》中进行了应用，并取得了良好的效果。"
