"模拟电路的基本特性使得模拟电路故障诊断非常困难。针对此问题提出一种融合小波包分解和克隆选择算法(CSA)的模拟电路故障诊断新方案。首先对模拟电路输出的各类故障电压信号进行小波包分解、重构以及频谱分析，获得相应频谱的频带能量作为故障特征样本，包括训练样本和测试样本。然后用克隆选择算法对训练样本进行自学习，得到各类训练样本的最优聚类中心。最后根据测试样本与聚类中心的欧氏距离对故障进行分类，实现电路故障元件定位。实验结果表明该方法有较高的诊断准确率和较短的收敛时间。 关键词 :故障诊断，小波包分解，克隆选择算法，聚类中心 Copyright © 2018 by authors and Hans Publishers Inc. This work is licensed under the Creative Commons Attribution International License (CC BY). http://creativecommons.org/licenses/by/4.0/"
"在电子电路的生产、检测和操作过程中遇到的错误大多数都是局部错误。据统计，这些错误约80%发生在模拟部分。 模拟电路故障诊断方法有很多，文献 [ 1 ] 改进了邻域覆盖算法，提出了一种基于领域搜索覆盖算法的模拟电路故障诊断方法，正确率提高了接近3个百分点。文献 [ 2 ] 针对模拟电路测试样本结构复杂的特点，设计了一种免疫克隆聚类的故障诊断算法，实验结果表明诊断效果良好等。但这些方法仍然存在一些不足，如诊断速度慢 [ 3 ]、计算量大 [ 4 ] [ 5 ] [ 6 ]、预测精度有待进一步提高 [ 7 ] [ 8 ] [ 9 ] 等。本文融合了小波包分解 [ 10 ] 和克隆选择算法，小波包分解通过对样本信号进行多通道滤波，将信号划分为不同的频段，减少信号间的干扰，从而提高诊断率，频谱分析能有效分析短样本信号，减少诊断时间。"
"将尺度空间 V j 和小波子空间 W j 用子空间 U j n 统一起来，令 { U j 0 = V j U j 1 = W j ,     j ∈ Z (1) 子空间 U j n 是函数 ω n ( t ) 的闭包空间，而 U j 2 n 是函数 ω n ( t ) 的闭包空间，使 ω 2 n ( t ) 满足下式： ω 2 n ( t ) = 2 ∑ k h ( k ) ω n ( 2 t − k ) (2) ω 2 n + 1 ( t ) = 2 ∑ k g ( k ) ω n ( 2 t − k ) (3) 式(2)和式(3)中， g ( k ) = ( − 1 ) k h ( 1 − k ) ，构造出的序列 { ω n ( t ) , n ∈ Z } 称为由基函数 ω 0 ( t ) = Φ ( t ) 确定的正交小波包。 小波空间分解公式： V i + 1 = V j ⊕ W j (4) 由式(4)可知： { U j + 1 0 = U j 0 ⊕ U j 1 ,     j ∈ Z U j + 1 n = U j 2 n ⊕ U j 2 n + 1 ,     j ∈ Z (5) 综上，小波包分解算法如下： 由 { d l j + 1 , n } 求 { d l j , 2 n } 与 { d l j , 2 n + 1 } 的公式 d l j , 2 n = ∑ k h k − 2 l d k j + 1 , n (6) d l j , 2 n + 1 = ∑ k g k − 2 l d k j + 1 , n (7) 小波重构算法如下： 由 { d l j , 2 n } 与 { d l j , 2 n + 1 } 求 { d l j + 1 , n } 的公式 d l j + 1 , n = ∑ k ( p l − 2 k d k j , 2 n + q l − 2 k d k i , 2 n + 1 ) (8) 式(8)中， p k 、 q k 分别是 h k 、 g k 的对偶滤波器。 一个三层小波包分解的结构如图1所示。 图1中信号S的分解关系为： S = A A A 3 + D A A 3 + A D A 3 + D D A 3 + A A D 3 + D A D 3 + A D D 3 + D D D 3"
"计算机领域的克隆选择算法 [ 11 ] [ 12 ] [ 13 ] 模型在1999年由巴西的De Castro和Von Zuben提出。该算法模拟生物免疫的学习与进化过程，涵盖的免疫机制包括： 1) 高频变异：变异率与亲和力成反比，变异函数定义为： M A b 11 _ V ′ = M A b 11 _ V + β ( A o ( i ) − M A b 11 _ V ) × N ( 0 , 1 ) (9) f i = 1 1 + D i (10) D i = ‖ M A b _ T ( i ) − A o ( i ) ‖ (11) 式中 M A b 11 _ V 为变异前的免疫细胞， M A b 11 _ V ′ 为变异后的免疫细胞， β = η / f i 为第i类免疫细胞的变异率， A o ( i ) 为第i类免疫细胞的聚类中心， f i 为第i类免疫细胞的亲和力， M A b _ T ( i ) 为第i类抗原， D i 为免疫细胞与第i类抗原的欧氏距离，代表抗原与免疫细胞的结合强度。 2) 克隆删除：免疫细胞经过变异后产生的低亲和力的免疫细胞，因得不到与抗原结合的机会而死亡。 3) 克隆增值：根据免疫细胞与抗原的亲和力大小对免疫细胞进行克隆繁殖，亲和力越高，克隆繁殖的机会越大，克隆的数目越多。克隆数目定义为： 图1. 小波包分解结构示意图 N c = r o u n d ( f i × K ) (12) 其中K为克隆规模， N c 为克隆数目。"
"基于克隆选择算法的模拟电路故障诊断具体步骤如图2。 1) 将所获得的故障样本归一化后，一部分作为训练样本 M A b _ X ( j ) ( j = 1 , 2 , ⋯ , 9 ) ，一部分作为测试样本 M A b _ T ( j ) ( j = 1 , 2 , ⋯ , 9 ) 。 2) 删除亲和力最低的10%的免疫细胞，选择亲和力为前90%的免疫细胞进行训练。 3) 根据式(12)确定抗体克隆数目并克隆选择出的免疫细胞，其中K取10。 4) 根据式(9)对克隆的个体进行变异。 5) 在变异后的免疫细胞中选择亲和力前10%的免疫细胞进入记忆细胞中和原来的记忆细胞集组成新的记忆细胞集。 6) 对抗体的聚类中心进行更新。直到满足终止条件，退出并保存抗体的聚类中心，否则转向步骤(2)。 7) 根据式(11)计算抗原与聚类中心的欧氏距离，实现模拟电路故障定位。"
"为了验证本文所提出方法的可行性和有效性，以图3所示的经典的Sallen-Key带通滤波器作为一个诊断电路实例，用Cadence软件对其仿真。 选择输出端V o 输出的电压响应信号构成故障特征向量。对电路中各分立元件进行灵敏度分析，确定对电路输出影响大的元件。灵敏度分析表明R 2 、R 3 、C 1 和C 2 的值变化对输出幅频曲线影响较大。因此确 图2. 流程图 定8种故障模式，再加上正常模式，获取这9种情况下的学习和测试样本，进行故障的分类和识别，如表1。 给电路输入端施加一个幅度为1V的AC交流电压信号源，对电路进行参数扫描分析。各个模式下的输出电压的响应信号如图4~图7所示。 以电路中元件R 2 为例，说明频率点选择的方法。在上图4的幅频特性曲线中，电路在三种状态下的谐振峰值对应的频率均不相同，其幅值响应在频率24 kHz和32 kHz处相差最大。在R 2 正偏或负偏类的故障中取R 2 的不同故障值，且在其他元件的误差范围内进行Monte Carlo分析，结果表明R2类故障的测试频率可选24 kHz和32 kHz。同样对C 1 、C 2 和R 3 的各类故障进行分析，最终选择频率为10 kHz、16 kHz、24 kHz、26 kHz、30 kHz，这些频率足够反映各类故障状态。在这些频率下测量响应电压幅值，构成故 图3. Sallen-key带通滤波器 Table 1 故障类 正常值 故障值 正常 - - R 2 ↑ 1k 1.5k R 2 ↓ 1K 0.5k R 3 ↑ 2k 3k R 3 ↓ 2k 1k C 1 ↑ 5n 8n C 1 ↓ 5n 2n C 2 ↑ 5n 8n C 2 ↓ 5n 2n 表1. Sallen-key带通滤波器电路故障模式 障特征向量。 在各个模式下对电路进行时域分析和134次的Monte Carlo分析，频率范围为1 kHz~1 MmegHz，采样点为1000个，得到1206组用于训练和测试网络的输入–输出样本集。对获得的数据进行3层小波包分解，得到2^3 = 8个小波包系数。根据分解过程选择的小波包滤波器，选其对偶滤波器进行重构。对每一段重构信号进行频谱分析，得到仅含特定频率信息的频谱获得相应的频带能量作为故障特征向量。用本 图4. 正常状态与R 2 (+50%)、R 2 (−50%)对比 图5. 正常状态与R 3 (+50%)、R 3 (−50%)对比 图6. 正常状态与C 1 (+50%)、C 1 (−50%)对比 图7. 正常状态与C 2 (+50%)、C 2 (−50%)对比 Table 2 故障类 正常值 正常 100% R 2 ↑ 100% R 2 ↓ 93.6% R 3 ↑ 89.4% R 3 ↓ 100% C 1 ↑ 96.4% C 1 ↓ 100% C 2 ↑ 94.5% C 2 ↓ 100% 平均 93.4% 表2. 仿真结果 Table 3 算法类型 神经网络 特征融合 本文算法 平均诊断率 90.40% 93% 93.4% 诊断时间/s 113.2 0.43 1.720 表3. 仿真结果对比 文提出的克隆选择方法对测试样本进行诊断，得到的诊断结果如表2所示。 将诊断结果与神经网络算法 [ 14 ] 和特征融合 [ 15 ] 的诊断结果作比较，如表3。 由表2和表3可看出，本文提出的方法与神经网络算法相比有较高的正确率和较短的诊断时间，与特征融合算法相比诊断率稍有提高，有待进一步改进。其中 R 2 ↓ 和 R 3 ↑ 的诊断率不太理想，因为 R 2 ↓ 的输出波形和 R 3 ↑ 的输出波形非常接近，两类故障类型的聚类中心也非常接近，对于这两类故障需要进一步研究。 6. 结语 针对模拟故障诊断的问题，提出了一种融合小波包分解与重构以及克隆选择算法的诊断方案。利用Sallen-Key带通滤波器作为实验电路，采用本算法可以有效提高诊断准确率。实验结果表明，该方法是可行的。"
