"海流是海洋水文的三大要素之一，海流流速的模拟和测量是研究海洋的基础，对国家的海洋战略具有重大意义。为了能够在实验环境下模拟海水的流动，文章设计了一种基于速度分解原理的海水垂直流和水平流的模拟平台。首先，介绍了平台的工作原理，对关键部件进行了强度计算与有限元仿真分析。其次，基于模糊PID控制方法设计了平台的伺服控制系统，并通过Simulink仿真比较了采用传统PID和模糊PID控制器的直线电机模型对于阶跃信号的响应。最后，对水平状态下的直线电机进行实验。有限元分析表明主支撑板的最大相对形变量为0.1196 mm，满足直线电机对主支撑板的形变要求，电机实验则表明，对采用模糊PID控制器的直线电机进行速度为10 mm/s的等速引导时稳态误差为0.17 mm/s，验证了模糊PID的有效性，稳态时电机的速度波动在2%以内，能够满足模拟海水流动的要求。 关键词 :流体流速模拟平台，有限元分析，永磁同步直线电机，模糊PID，Simulink仿真 Copyright © 2018 by authors and Hans Publishers Inc. This work is licensed under the Creative Commons Attribution International License (CC BY). http://creativecommons.org/licenses/by/4.0/"
"海流是海洋水文的三大要素之一，是海洋调查和物理学海洋的基础 [ 1 ] ，海流流速测量对海洋渔业 [ 2 ] ，航海 [ 3 ] ，海洋资源探索 [ 4 ] 都具有重要的意义。海流按照空间分布可分为水平流和垂直流 [ 5 ] ，一般海洋表层海水的水平流速为1~300 cm/s，而其垂直流速度为10 −3 ~10 −1 cm/s，维间差异较大，如何在实验环境下实现对维间差异较大的速度模拟及实际测量是研究海流的关键问题。合肥工业大学研制了三维海流传感器标定平台 [ 6 ] ，通过三个电机的配合运动，实现了传感器三个方向的移动，其重复定位精度为0.05 mm，但未对三轴联动的情况进行分析；韩国首尔大学基于宏/微结合的原理研制了一种宏微两级定位纳米平台 [ 7 ] ，宏动台是滚珠丝杆螺母传动方式，微动台采用柔性铰链结构，定位精度可达10 nm；南京航空航天大学研究的三坐标移动平台 [ 8 ] ，位移测量范围可达0~40 mm，位移分辨率为0.001 mm；哈尔滨工业大学研发了一套基于宏微驱动的纳米定位系统 [ 9 ] ，宏动台是气动悬浮平台，微动台采用压电陶瓷驱动，重复定位精度达到174.73 nm。 上述实验装置均采用多个电机相互配合运动，存在多轴间的耦合问题，且在运动过程中速度波动较大。为模拟维间差异较大的水平流和垂直流，本文设计了一种基于速度分解原理的流速模拟平台，该平台通过改变流速探测器 [ 10 ] 运动导轨的倾角实现对水平流和垂直流的模拟。 流体流速模拟平台最终测量精度主要取决于运动单元的速度平稳性，为避免流速探测器在运动过程中出现速度波动过大、上升时间太长等问题，需要在伺服控制系统中加入速度控制环节。工业中常用的速度控制器有PID，模糊PID [ 11 ] ，滑模PID [ 12 ] 等，模糊PID是建立在模糊控制概念的基础之上，可以根据被控对象的时滞、非线性和时变性具有一定适应能力的特点来弥补传统PID的不足。因此本文以模糊PID控制器作为模拟平台控制系统的速度环，改善了系统的动态性能和稳态性能，实现了对海流的模拟。"
"流速模拟平台结构如图1所示，通过改变平台运动导轨的角度可以使探测器获得沿斜面方向的运动速度，当运动导轨的倾角较小时，探测器沿斜面的速度可分解为数值相差较大的水平速度和垂直速度，以此来模拟水平流和垂直流。改变高度调整模组的高度差，主支撑板会绕着中间固定支撑点的轴线旋转一个角度，永磁同步直线电机固定在主支撑板上。为了使流速探测器在运动过程中始终保持竖直状态，在直线电机的动子与流速探测器连接处安装一个分度盘。当固定在主支撑板上的直线电机旋转一个角度时分度盘沿着相反的方向旋转一个相同的角度，流速探测器便可始终保持在竖直状态。将整个装置置于水环境中，调节水位使水位超过探测器运动轨迹的最高点，低于直线电机的底部。分度盘与流速探测器通过一个不可压缩的连杆连接，理想条件下可认为直线电机的动子与流速探测器的运动相同。 直线电机动子的运动是沿特定角度所成斜面的直线运动，其速度可分解为水平速度和垂直速度。由牛顿第三定律可知，流速探测器对水流的力和水流对探测器的力互为作用力与反作用力。流速探测器自身可以测量流体的水平流速和垂直流速，在理想条件下，认为水流是静止状态，流速探测器是运动的。将工字钢倾斜角度调节到一个合适的值，流体流速探测器便可获得一个和海流水平流与垂直流流速比相同的速度，这样便可模拟海流的运动。  直线电机的稳定运行需要支撑平面具有一定的平面度，故对底部主支撑板的最大形变提出了要求。本课题采用HIWIN的LMSA21型直线电机，其基座的安装平面度要求为0.01/300 mm，总长为4370 mm，宽为408 mm，高为231 mm。为加工方便本项目选择主支撑板支撑面尺寸为5000 × 500 mm，参考工字钢的结构设计中间主支撑板的结构，横截面如图2所示。上支撑板1，下支撑板4与中间支撑板2,3通过焊接连接在一起，上表面和下表面磨削加工，采用焊后加工，保证主支撑板的平面度。图2中，l1 = 150 mm，l2 = l3 = 20 mm，l4 = 260 mm，l5 = 300 mm。 由平行轴定理可计算出主支撑板的惯性矩I为： I = I 1 + ( l 3 + l 4 2 ) 2 × A 1 + I 2 + I 3 + I 4 + ( l 3 + l 4 2 ) 2 × A 4 = 2.26 × 10 8 m m 4 (1) 其中，I 1 、I 2 、I 3 、I 4 分别为板1、板2、板4及板4的惯性矩；A 1 、A 4 为板1、板4的面积。 主支撑板的受力表现为梁的受压变形，直线电机与主支撑板是由八组螺钉连接的，可近似认为直线电机的重力均匀分布在主支撑板上表面上，流速探测器随直线电机的动子一起运动，可以看作一个移动的向下的力；由材料力学知当动子带动探测器运动到两支撑点中点时支撑板形变最大。 由叠加原理 [ 13 ] 知最大形变量w为 w = 5 q l 4 384 E I + F l 3 48 E I (2) 其中：l为两支撑点之间的距离；q为支撑板所受均布载荷；F为支撑板上所受的力；E为主支撑板的弹性模量；I为主支撑板的惯性矩。 设支撑点总数为n，采用均匀分布的形式，直线电机重315 kg，动子和探测器共重50 kg。由于主支撑板的转动需要一个中间支撑点，故n取奇数，材料为45钢。当n = 3时最大形变量为0.01 mm，当n = 5时最大形变量为0.84 × 10 −3 mm。 图1. 整体结构方案 图2. 主支撑板横截面  为了验证主支撑板的最大形变满足项目要求，在重力场下对不同支撑点数的支架整体进行有限元分析；主支撑板和底部支架的材料选用45钢，屈服极限为355 MPa，抗拉强度为600 MPa，杨氏模量为209 GPa，泊松比为0.3，定义单元类型为solid185。分别采用三点支撑和五点支撑对支架整体进行静力学分析，此时主支撑板的倾斜角度为0˚，受力情况如2.2节所述。结果如图3所示。 图3. 支架沿重力方向的应变云图 由图3可以看出三点支撑时主支撑板沿重力方向的最大相对形变量为0.1196 mm，五点支撑时主支撑板沿重力方向的最大相对形变量为0.0649 mm，差异为45.7%，分析结果表明三点支撑的支撑板相对变形量满足直线电机对支撑面的形变要求，本项目采用三点支撑。"
"流体流速模拟平台主要由直线电机的动子带动流速探测器进行运动，设计平台的控制系统如图4所示。由上位机发出速度指令经由速度控制器进行计算后发送到DSP运动控制卡中，运动控制卡可根据接受到的指令转换成脉冲信号发送到直线电机伺服驱动器中。伺服驱动器根据接受到的不同频率的脉冲信号控制伺服电机产生相应速度的运动。动子带动流速探测器运动，信号采集系统对流速探测器的输出信 图4. 控制系统流程图 号进行采集。上位机根据采集到的速度和预设的速度进行计算得到误差。速度控制器根据误差和预设速度计算得出调节后的速度，再次发送到DSP运动控制卡中，循环往复直至误差减小到允许范围之内。 流速探测器测量速度的精确度取决于直线电机运行的平稳性，为了能使直线电机运行速度更加平稳，且不依赖于被控对象模型的精确性，本文采用模糊PID作为直线电机速度环的控制器。模糊PID控制器是将模糊控制规则存入计算机中作为知识库，误差e及其变化率ec作为输入， Δ k p ， Δ k i 和 Δ k d 作为输出。模糊控制器根据e和ec的变化利用模糊规则选择对应的策略计算得出 Δ k p ， Δ k i 和 Δ k d ，并根据式(3)计算控制系统K p ，K i 和K d ，最后利用PID控制器控制被控对象。 { K p = K p 0 + G p × Δ k p K i = K i 0 + G i × Δ k i K d = K d 0 + G d × Δ k d (3) 其中：K p 0 ，K i 0 ，K d 0 为常规PID调节之后的参数，作为初始预设值；G p ，G i ，G d 为 Δ k p ， Δ k i 和 Δ k d 的比例因子；K p ，K i ，K d 为最终作用于控制系统的参数； Δ k p ， Δ k i 和 Δ k d 为模糊控制器根据e和ec模糊推理获得的PID参数调节量。 在模糊控制算法中，从控制规则的灵活性和细致性综合考虑，将输入/输出量用七个语言变量值来描述{NB，NM，NS，ZE，PS，PM，PB}，即{负大，负中，负小，零，正小，正中，正大}。在模糊运算中，语言变量要根据相应的隶属关系以模糊集的形式表示出来。本文各个模糊语言变量的隶属函数采用均匀分布的三角分布型隶属函数，相邻模糊语言变量值之间存在交集，可保证输出的平滑性。通过模糊推理得到的输出量 Δ k p ， Δ k i 和 Δ k d 仍然是一个模糊集合，而控制系统的PID控制器所需要的三个增益系数 Δ k p ， Δ k i 和 Δ k d 为确定的值，需要对 Δ k p ， Δ k i 和 Δ k d 进行解模糊，本文解模糊采用的是工程中最常用的加权平均法 [ 14 ] 。"
"为了验证模糊PID对系统的控制效果，在MATLAB /Simulink环境下对直线电机进行建模仿真。本课题采用单轴直线电机，电机模型可简化为一个单轴模型，电机模型主要包括3个部分： dq轴模型。因为电机的励磁磁场和转矩磁场存在耦合 [ 15 ] ，为了实现线性解耦工业中常采用矢量控制，令d轴电流为0，得到： u q = L d i q d t + R i q + K e v (4) 推力模型。直线电机的推力和电流成正比，得到： F m = K t i q (5) 系统的机械运动模型。方程为： m d 2 x d t + B d x d t = F m − F f (6) 其中：u q 、i q 分别为q轴的电压和电流；R、L分别为电机的电阻和电感； K e 为电机的反电动势常数；v为电机动子的速度； F m 、 F f 分别为电机的推力和系统的扰动阻力； 为电机的推力常数；x为电机动子的位移；B为摩擦系数。 永磁同步直线电机的参数见表1所列，其中负载质量和摩擦系数可用正交实验法测量出来，电流环增益采用PI控制器，建立对应的直线电机仿真模型 [ 16 ] 如图5(a)所示。 首先采用传统PID用等幅震荡法 [ 17 ] 调试出Kp0，Ki0，Kd0三个值，并将这三个值作为模糊PID的初始值，之后根据文献 [ 18 ] 建立Kp，Ki和Kd的模糊规则，建立基于模糊PID的直线电机模型如图5(b)所示。为了便于观察，将传统PID和模糊PID两个仿真程序合并，通过同一个示波器显示出来。用单位阶跃信号作为输入信号。得到两者的结果如图6所示。 由结果可以得出两者的上升时间(tr)和超调量(σ%)，调节时间(ts)和稳态误差(ess)见表2所列，ts取达到稳态值的3%以内。由表2可知模糊PID的上升时间比普通PID要小57.9%，超调量也要小29.4%。仿真结果说明对于直线电机的速度环，采用模糊PID控制器，系统的上升时间更小，超调也更小，系统鲁棒性更好。 Table 1 推力常数/(N∙A −1 ) 反电动势常数/(V∙s −1 ) 电感/mH 电阻/Ω 质量/kg 摩擦系数 电流环增益 92.5 53.4 64 13.8 50 1.2 0.02 表1. 直线电机参数 图5. 采用模糊PID直线电机仿真模型 Table 2 控制方法 t r /ms σ% t s /ms e ss 传统PID 32.23 1.495 43.25 0.001 模糊PID 13.56 1.056 25.36 0.001 表2. PID和模糊PID控制时模型对阶跃信号的响应 图6. 直线电机实验图  为了进一步验证模糊PID的效果，本文分别采用传统PID和模糊PID作为直线电机速度闭环控制算法进行实验，将直线电机水平放置如图6。控制器采用凌华科技基于DSP的4/8轴高阶运动控制卡，实验设定速度10 mm/s，采样时间为10 ms，直线电机动子速度曲线如图7(a)所示。在流体流速模拟实验中，探测器与直线电动子采用刚性连接，故可认为探测器速度与直线电机动子速度相同，图7(b)为采用模糊PID控制器，速度为10 mm/s稳态时直线电机动子的速度响应曲线。 由图7可知当设定的速度为10 mm/s时两者的速度响应曲线上升时间(tr)，超调量(σ%)，调节时间(ts)和稳态误差(ess)见表3所列。由表3可以看出采用模糊PID作为直线电机的速度控制器得到的速度曲线调节时间更短，稳态误差更小，稳态时速度波动在2%以内。实验证明采用模糊PID控制器直线电机速度的稳态特性更好，鲁棒性更好。"
"本文介绍了流体流速模拟平台的结构及工作原理，并对其中的主支撑板进行了受力分析，分析结果表明主支撑板的最大相对形变量为0.1196 mm，满足直线电机对主支撑板的精度要求；设计了平台的速度控制系统并用MATLAB/Simulink对直线电机进行建模仿真，比较了直线电机速度环采用常规PID控制器和模糊PID控制器对于阶跃信号的响应情况，进一步用实验进行验证。仿真和实验结果表明采用模糊PID控制器，可以有效提高系统的稳态特性，直线电机稳态时速度波动在2%以内。分解后的水平速度和垂直速度的稳态速度波动和电机动子速度波动一致，能够很好地模拟海水的流动。"
