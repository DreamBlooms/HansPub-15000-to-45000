"立足于我国城市轨道交通快速发展和网络化运营的背景，为提高城市轨道交通运输计划编制质量、效率及管理水平，本文对城市轨道交通线网列车运行图编制一体化系统进行研究和设计。主要对系统总体架构、网络架构及功能结构进行了研究，重点对线网运输计划评估、列车运行图编制、列车衔接评估等主要功能进行了设计。"
"列车运行图是联结城市轨道交通运输生产活动的纽带，在很大程度上决定了城市轨道交通运输组织质量和水平。倪少权 [ 1 ] 等对列车运行图调整系统功能设计进行了讨论，申嵋 [ 2 ] 等采用Visual C++6.0对城市轨道交通辅助设计系统进行了设计，陈永生 [ 3 ] 基于数据库和矢量图形设计了城市轨道列车运行图自动生成系统，杨文韬 [ 4 ] 等针对既有车站与列车间隔时分查定方法的不足，提出运行图日常参数查定的需求，设计并实现了新的运行图参数测试系统，张德明 [ 5 ] 等通过对列车运行曲线，再生制动，以及车辆编组几点关键因素进行分析，系统性总结了调度系统的节能策略，许临翔 [ 6 ] 等针对铁路站段对列车运行图信息的需求特点，建立了基于站段的列车运行图信息发布系统。 尽管我国城市轨道交通已广泛采用第三方编图软件，克服了过去采用信号系统自带编图软件情况下所存在的不同线路编图软件各不相同、需要的编图人员多、自动化编制水平低等缺陷，但仍面临重大挑战，无法支撑城市轨道交通线网列车运行图的统一编制和管理，各线路间的列车运行图协同性差，效率及质量有待提高，亟需研究设计城市轨道交通线网列车运行图编制一体化系统，实现基于协同模式下线网列车运行图统一编制和管理，有利于线网运行图的协调匹配和衔接，提升城市轨道交通线网运输组织水平。"
"城市轨道交通线网列车运行图编制一体化系统，考虑线网旅客出行规律、换乘和首末班车衔接等技术条件，在进行城市轨道交通线网列车运行图数据统一管理基础上，实现城市轨道交通线网一体化条件下列车运行图的自动化协同编制和线网列车运行图管理。  本系统总体架构采用集中与分布相结合的信息共享架构。满足按各线路相对独立编制管理条件下城市轨道交通列车运行图编制管理的需要，同时可满足线网条件下城市轨道交通列车运行图实现统一编制管理的需要。系统的总体架构如图1。 应用层是城市轨道交通系统业务逻辑应用系统的集合、系统建设过程中的应用集成平台，它能够提高各业务数据的共享度，简化业务处理过程。 图1. 系统总体架构 数据资源层的核心任务是进行城市轨道交通运行图涉及到的资源利用和开发。按照业务系统的实际需求，在标准规范体系的指导下，进行资源建设。 计算机网络平台层主要是系统运行所需的软硬件平台。根据应用需要和资源需求，主要包括网络通讯平台、服务器及存储平台、系统软件/数据库平台。 标准规范体系、业务管理体系和安全保障体系提供系统各个方面各层次的保障。包括各种标准规范保障、组织与管理保障、安全措施与安全技术保障等。“三个体系”将管理形式和技术手段有机的结合在一起，使城市轨道交通运行图编制系统具备扎实的基础和坚实的保障。  为适应城市轨道交通线网列车运行图多用户协同管理、编制，采用C/S网络架构。为提高计算机网络条件下城市轨道交通运行图编制系统的网络传输可靠性，本系统采用TUXEDO中间件完成网络通信。网络架构方案如图2所示。 图2所示为网络架构方案，可将YS (运行图服务器，下同)与TS (TUXEDO服务器，下同)部署在同一台服务器上作为铁道部的编图服务器，各路局通过局域网或广域网与TS进行连接。在该结构中TS和所有的TC (TUXEDO客户端，下同)处于同一个TUXEDO域中，一台YS对应多台YC (运行图客户端，下同)，YS和YC均作为TUXEDO客户端。 图2. 网络架构基本方案"
"城市轨道交通列车运行图编制与调整功能的主要业务为城市轨道交通列车运行图的编制、调整及方案评估，主要包括线网运输计划评估、线网运行图编制和列车衔接评估等三大功能。 运输计划评估子系统的功能是基于客流计划及行车等数据，对各条线路运输计划进行评估，从而实现运力配置及衔接等计划调整建议，供线路优化计划运行图。其功能结构图如图3所示。 图3. 线网运输计划评估子系统功能结构图 线网运行图编制基于对基础数据的处理，实现列车运行图的自动编制及调整，并对列车运行图相关指标进行统计、计算，同时对列车运行图进行管理。基础数据是编制运行图的基础，运营单位需按要求提供编图所需的基础数据。线网运行图编制子系统的功能结构图如图4所示。 图4. 线网运输计划编制子系统功能结构图 图5. 列车衔接评估子系统功能结构图 列车衔接评估是评估线网各线路列车运行衔接情况的重要方法，为乘客提供路径查询、检索和路径可达性服务的支持。列车衔接评估子系统功能结构图如图5所示。"
"线网运输计划评估总共包含客流分析、列车开行方案、运行图技术指标和运量运力匹配性指标四个功能版块。 1)系统提供客流分析功能。能够实现客流数据的动态更新、历史数据的导入及客流数据的显示，具体包括以下内容： 一是，查看实时客流数据：自用户上线后系统能够自动从大数据中读取当日最近10分钟(默认时间范围)的客流数据，每隔2分钟重新向大数据系统查询，获取最新客流数据的更新情况并进行重新导入；并为用户提供切换实时客流查看时间范围的操作； 二是，导入历史客流数据：系统可以导入不同时间段的历史客流数据，包括最近10分钟、最近15分钟、最近半小时、最近一小时和指定时间，其中指定时间指的是大数据按照“年度”、“月”、“日”三种统计类型生成的历史客流数据； 三是，客流数据界面显示：OD客流表、区间断面客流表、车站上下客流表、线路表、车站换乘客流表、线路换乘客流表六种不同类型的客流表均可以通过系统界面显示，并且可以实现输出选定类型客流表至指定位置。 2) 系统提供城市轨道交通列车开行方案查询功能。系统可显示不同线路的相关信息，如额定载客量、最高运行速度、编组数等信息；并提供具体列车开行方案，包括：每个时段的始发站、终到站、始发时刻、终到时刻、开行间隔、列车径路和运行种类。 3) 系统提供运行图技术指标统计与评估功能。可对指标进行自动计算与评估，若有指标出现异常值，评估结果会给出相应的建议说明。 4) 系统提供运量运力匹配性指标统计与评估功能。针对导入客流数据中不同线路，自动计算高峰平均满载率、平峰平均满载率、全日平均满载率(含不同线路柱状图显示)、最大断面满载率、满载率高于100%的时间比等运量运力匹配性指标。若出现满载率严重偏大、偏大、偏小等情况，系统会根据计算结果在评估结果中给出说明和提示。系统可显示不同线路不同区间的运力情况。"
"线网运行图编制功能主要包括：数据管理、编图、绘图输出、时刻表输出、运行仿真等功能。  数据管理模块包括基础数据和编图数据管理功能。数据管理是实现系统业务功能的基础。编图和仿真功能的实现都需要用到相关的数据。具体包含线路数据信息、车站数据信息、基础时分、交路定义、开行方案和底图结构(显示分段参数)等。 1) 线路数据管理 线路管理模块实现线路的新建、插入、删除、改名及线路排列顺序的拖动调整。 2) 车站数据管理 车站管理模块实现线路车站的新建、插入、删除、修改、移动，实现城市轨道交通网络所有线路车站的拓扑结构、车场的布置形式、车站平面图结构、车站与线路的基础信息等数据的管理与维护：建立车站平面图CAD系统，根据需要以图形化界面方式方便地铺画车站的线路、道岔、渡线、信号机和其它设备；根据道岔间的连接关系，系统可自动生成各类列车进路。 3) 区间数据管理 区间管理模块实现线路区间的自动生成、新建、插入、删除、修改、移动。 4) 列车径路 列车径路管理模块实现列车径路的新建、删除、生成对向径路、修改包含区间，还可以设置列车径路的基本属性，基本径路在自动编图中将优先被采用。 5) 区间运行种类及时分 管理模块实现区间运行种类及时分的新建、插入、删除、修改、移动。区间标尺的默认运行种类有常规、高速、低速、越站。包括基础时间的设置。 6) 开行方案 开行方案管理模块实现用户对城市轨道交通网络所有线路全日列车开行计划的集成一体化管理：支持不均衡运输、多交路运营(如大小交路、Y型交路等)，快慢车等复杂情况下的列车运行计划的编制，开行方案管理模块实现列车开行计划的新建、插入、删除、修改。 7) 间隔约束 间隔约束管理模块实现线路车站和区间各种间隔数据的管理。线路间隔是指适用于线路上的所有车站的间隔。 8) 交路定义 列车交路可以通过列车开行方案来定义，具体的列车走行车站集合可以通过前述的列车径路进行定义，可以满足Y型、共线型线路等复杂线网的需要。车底交路管理模块实现车底交路的新建、删除、接续车次的修改等。 9) 列车管理 列车管理模块实现列车数据的维护管理，包括列车的车次、始发站、终到站、目的地码、列车径路、列车特征、起站到点、起站发点、到站到点、到站发点、还有列车在经过车站的到点、发点、占用到发线、停站时间和经过区间的运行种类、运行时分、区间长度等。 10) 底图结构 系统通过“显示分段参数”管理模块对底图结构进行管理，包括底图车站选择、车站顺序选择等。   自动编图是在线路、车站、区间等数据建立的基础上，系统根据开行方案的每一个时段开行计划自动计算生成运营列车和出入库列车。实现城市轨道交通网络所有线路列车运行图的集成一体化自动编制和单条线路列车运行图的自动化编制，即实现任意选定的一条或多条及全部城市轨道交通线路列车运行图的自动编制。为满足不同用户需求，系统具备按行车计划规定的起始时间和按满足乘客出行的服务频率编图两种编图模式。  系统提供包括列车到发点调整、列车平移、间隔调整、车次车底号修改、区间与站停时分修改、运行标尺修改、增减列车、站台使用方案修改等功能，还提供了“正向、反向、双向推线”、“擦线”、“正向、反向擦线”等列车调整功能。支持线网条件下选定线路的运行线集合的调整操作，并可实现基于线网协同的多条线路之间列车运行图协调匹配调整。  车底交路编制在列车运行图编制完成后采用。系统提供了新建、插入、删除车底交路、在指定车底交路中增加、插入、删除列车、建立、删除两列车之间的车底接续关系、删除交路上的列车、复制交路、按交路推线、整体平移等交路调整手段。  对列车运行计划编制结果进行合法性检查，包括列车在经由车站的出发时刻和到达时刻是否合理；是否满足间隔要求等。 在人机交互调整列车运行线时，系统将自动进行冲突检查，并提供冲突提示，包含在信息展示窗口显示冲突信息及列车运行线标示。  运行图输出实现满足多种需求的多形式多格式输出样式。 1) 列车时刻表输出，包括按车底、按车站、需求方提供的格式等排序的EXCEL格式输出。 2) 车底交路图输出，提供EXCEL格式。 3) 换乘时刻表输出，提供满足需求方要求的EXCEL格式。  该功能自动计算用户需要的各种指标参数。包括自动计算选定线路的列车指标、利用率、速度指标、车底运用指标等，并实现EXCEL格式输出。系统对于查询统计功能，提供Web Server标准接口对外提供服务。"
"列车衔接评估主要功能包括：系统首末车衔接查询展示、常规时间衔接查询展示、换乘服务水平查询、行车间隔查询、路径信息查询及数据管理功能。可提供对线网衔接情况的全面查询分析，为列车运行图的评估、运力运量匹配分析、乘客查询服务提供支持。 1) 首末班车衔接方案 系统将自动计算选中路网中线路的可行的首末班车方案，显示在界面上。内容包括：换乘站、源线路名称和行别、目的线路名称和行别、衔接列车、到达时刻、出发时刻、是否衔接、等待时间和评估结果。 2) 线路换乘衔接方案 系统将自动计算指定日期、线路和换乘站可行的换乘方案，显示在界面上。 3) 换乘等待时间查询 提供首班车换乘候车时间、末班车换乘候车时间、高峰期平均等待时间、平峰期换乘平均等待时间等相关信息。具体信息包括：枢纽名、车站名、线路名、方向、换出车站名、换乘线路名、换乘方向、换乘等待时间。 4) 常规时间衔接查询 系统能展示在常规时间点或者常规时间段内换乘站各个换乘方向的列车的到达时间、车次和换乘等待时间，评估业务人员可根据换乘等待时间分析列车运行在换乘站的衔接情况。如在该时间点的车次无法换乘，给出最晚的可换乘时间。 5) 出行路径信息查询 系统根据用户选择的线网中的起始车站、终到车站、出行的时间条件以及出行策略检索并展示出行路径信息。 6) 换乘服务水平评估 系统应能计算并展示换乘站各方向的换乘量和换乘总等待时间。 7) 列车行车间隔查询 系统计算并展示在指定时间段内换乘站各个方向的列车平均间隔时间。输入指定时间段，系统可自动根据时间段内列车发车总数计算列车平均间隔时间。"
"本文构建了集客流分析、运力分析配置、线网列车运行图编制、列车运行图评估、列车运行图信息共享与发布等于一体的地铁列车运行图编制管理协同化平台，实现全网范围各线协调、合理运输、高效疏解全网客流的线网列车运行图编制。"
