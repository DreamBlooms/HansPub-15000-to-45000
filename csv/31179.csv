"本文基于光敏三极管设计、制作了指端动态血压监测仪，该监测仪包括光信号发射/采集单元、信号处理电路和指尖固定装置。光信号发射/采集单元包括一个红色LED和两个光敏三极管，根据指端流动的血液对光吸收情况不同，该光敏三极管用于采集流经指端血液吸收后的光信号。基于光电效应，当接收到不同的光信号时，光敏三极管的基极电流将发生相应变化，引起电路输出电压变化，实现对脉搏信号的监测。信号处理电路部分完成两个光敏三极管构成的差分结构输出信号放大、滤波、A/D转换等，根据血压与脉搏波的关系，利用单片机对数据进行处理，分析给出血压动态变化情况并进行显示。结果表明该测试系统可实现血压测量，具有实时性和便携性的特点。 关键词 :光敏三极管，实时血压测量，脉搏信号处理电路 Copyright © 2019 by author(s) and Hans Publishers Inc. This work is licensed under the Creative Commons Attribution International License (CC BY). http://creativecommons.org/licenses/by/4.0/"
"血压是衡量人体健康和进行临床诊断的重要依据。测量人体血压的方法可分为两种，即压力式和光电式。目前市场上的血压计多为基于压力传感器的间歇测量式血压计，无法进行血压的实时监测，而临床上采用的动脉插管法虽可得到准确连续的血压值，但会对人体造成创伤。因此，无创连续测量血压成为了国内外临床医学研究的一个普遍趋势，尤其是基于脉搏波传导的血压测量 [ 1 ]。根据流动的血液对光的吸收程度随血压波动而改变的现象，本文给出了一种基于光敏三极管的指端动态血压监测仪，并分析了该监测仪的基本结构与工作原理，在此基础上完成了动态血压监测仪的制作与特性测试，最终对测试结果进行了分析和讨论。"
"图1(a)给出光敏三极管的基本结构，其基区作为感光区，通常不引出，而是裸露出来作为感光面，因此它的引出电极一般只有两个。为了提高光电转换效率，入射光应主要被基区吸收，因此在设计制作时通常将基区面积做得较大。图1(b)给出了光敏三极管的外部封装图，光敏三极管顶部为用于聚焦光线的玻璃透镜，当光敏三极管受到光线照射时，光线在透镜的作用下将聚焦在三极管的芯片上。 当光敏三级管接收到光照时，基区将产生电子–空穴对，少数载流子浓度增大，形成集电结反向饱和电流，即光生电流，该电流经过发射结放大形成集电极与发射极之间的电流，即光电流。当光通过光敏三极管的玻璃透镜照射到芯片上时，集电结的空间电荷区和一个扩散长度范围内将产生电子–空穴对，电子和空穴均对集电结反向电流作出贡献。没有光照时，流过光敏三极管的电流称作暗电流I CEO ，其大小为: I CEO = ( 1 + β ) I CBO (1) 图1. 光敏三极管基本结构：(a) 内部结构；(b) 外部封装 式中I CBO 为集电极与基极之间的饱和电流，β为共发射极直流放大系数。 根据上述公式可知，光敏三极管将光电流放大了(1 + β)倍，具有高灵敏度，适用于本文制作的指端动态血压监测仪。 采用参数分析仪(Keithley4200A-SCS)测得光敏三极管(3DU5C)输入–输出特性曲线，如图2所示。光照一定时，V CE 增加，I C 增大；V CE 一定时，光敏三极管集电极电流与基区受到的光照强度成正相关，可实现照度的测量。 图2. 光敏三极管输入–输出特性曲线 目前有许多类型的光敏三极管放大电路，运用较为广泛的为共发射极放大电路。当基极与发射极之间输入弱电压信号U I 时，在集电极与发射极之间可获得放大的输出电压U O ，输出功率大于输入功率。光敏三极管属于有源器件的一种，其输出功率通过直流电源转换获得。在直流电源下，光敏三极管将直流电能V CC 转换为交流电能U O ，而输入的信号U I 则决定了输出电压U O 的波形 [ 2 ]。 在电路中，为了让光敏三极管工作在放大区，发射极连接到负电位，集电极接到正电位，即发射结正偏，集电结反偏。以硅为基底的PN结导通电压为0.7 V，以锗为基底的PN结在0.3 V下导通，目前硅三极管较为常用。因此当U BE > 0.7 V时，三极管工作在放大状态，否则为截止状态，而当U CE > U BE 时，三极管则会进入饱和状态 [ 3 ]。  图3给出指端动态血压监测仪的基本结构，置于遮光指套内部上方的红色LED为发光源，置于遮光指套内部下方的感光光敏三极管T 1 为光信号采集端，遮光光敏三极管T 2 置于遮光指套暗处。测量时，被测者将手指置于指套内，LED发射的光线经过指尖血液吸收后被光敏三极管T 1 吸收，得到微弱的交流电压值。将两个光敏三极管的输出信号引出，并连接接口电路完成对采集信号的处理。 图3. 指端动态血压检测仪基本结构示意图 由于光在组织中的透过率远大于在血液中的透过率 [ 4 ]，因此通过测量透过指尖的光信号可间接得到血液对光的吸收情况。根据Lambert Beer定律，物质的浓度和厚度越大，对特定波长的光的吸收能力越强 [ 5 ]。血液透明度较低，浓度较高，对光线具有较高的吸收能力 [ 6 ]，相比于一般人体组织，光照在血液中的穿透性更低，且指尖相对人体其它组织更薄，光电容积脉搏波描记法是利用光的反射原理和透射原理，通过向手指发射光照，由光敏三极管接收通过指端反射或透射后的光照强度，从而监测血压值。 光敏三极管采集穿过手指微血管后随脉搏改变的光信号并将其转换为电信号，得到指端脉搏波形图，该波形图的幅值大小依赖于当前血压值，因此通过对波形图分析即可实现对血压的监测。研究表明，脉搏波的特征点可用于血压值的测量 [ 7 ]。血液在流动时会对血管壁产生压力作用，即血压 [ 8 ]。心脏收缩时，血液冲入主动脉，此时动脉管壁所受的压力称为收缩压，此时指端血液对光吸收程度最高，即透过指端的光线为最弱。在本文设计的电路中，差分输出电压值理论上应达到最小值；心脏扩张时，动脉管壁弹性收缩，此时动脉管壁上的压力称为舒张压，此时指端血液对光吸收程度最低，即透过指端的光线为最强，在本文设计的电路中，差分输出电压值理论上应达到最大值。 通过理论分析，本文采用提取多个输出信号最大值与最小值的方法 [ 9 ]，同时通过现有血压计测得当时的血压值，分别建立与舒张压和收缩压的回归方程，以供单片机进行数字信号的处理。"
"图4给出了指端动态血压监测系统框图，利用光敏三极管采集脉搏波并将其转换为电压信号输出，传感器输出的电压信号较小，因此必须通过信号放大电路将其放大，再将放大后的信号进行滤波处理，A/D转换为单片机易于处理的数字信号，最后通过对单片机编程来实现血压值的测量，并在LCD上显示测量结果。 图4. 信号处理电路设计框图  通过查阅相关文献可知，血液中血红蛋白对红光吸收效果最为显著，因此本文选用红色LED为主要光源。LED的发光强度取决于通过它的电流大小，其工作电流为5 mA~15 mA。在本文中，LM317用于构建10 mA恒流源电路作为红色LED的供电电源。光信号发生/接收电路的仿真由电路仿真软件Multisim14.0完成。本文选用光敏三极管(3DU5C)为信号采集端，为消除温度漂移及传感器自身的零点漂移 [ 10 ]，通过采用两个相同型号的光敏三极管构建互补差分电路结构，其中一只作遮光处理，另一只采集经指端动脉血液吸收后随脉搏变化的光信号。如图5所示，V O1 、V O2 为差分结构中的两个输出电压信号，差分输出电压V O 为： V O = V O 2 − V O 1 (2) 两个光敏三极管构成的互补差分结构可采集经人体指端血液吸收后的光照，并随吸收程度变化而产生不同的输出。由于光敏三极管对光照极为敏感，电路输出信号易受环境光干扰，为确保实验数据的可靠性与准确性，须保证光敏三极管采集到的光信号全部来自经人体指端血液吸收后的红光，因此将光信号发生/采集单元密封在黑色模具中作遮光处理。 图5. 光信号发生/采集单元 本文采用电路设计软件Altium Designer18.1.9设计信号处理电路原理图，如图6，电路主要包括信号放大电路、滤波电路、单片机处理电路和LCD显示电路。根据该电路原理图完成焊接后的实物图如图7。  本文选用Arduino UNO单片机开发板为调试平台，AVR单片机ATmega328P作为主控制器。单片机时钟频率为16 MHz，具备14路数字IO口，最大电流为40 mA，6路模拟输入为A0~A5，10位的分辨率，默认输入信号为0到5 V，EEPROM内存大小为1 K，ROM内存大小为2 K，Flash内存大小为32 KB集成开发环境为Arduino IDE。 图6. 脉搏波信号处理电路图 图7. 指端动态血压监测仪实物照片 在脉搏波信号处理电路中，通过单片机处理后得到的信息最后还要在LCD上直观地显示出来。本文选用型号为MSP3521的3.5寸TFT液晶屏，其分辨率为480 × 320，采用SPI串行总线，可大大减少IO口的使用。 图8给出了系统程序流程图。上电后，程序进行初始化处理。当有脉冲信号输入时，开始采集特征点，在采集特征点的同时，LCD屏上同步显示当前脉搏波波形图。本文设计LCD每刷新一次便将采集到的波峰值与波谷值代入方程中，通过计算得出血压值并实时显示，依此方式一直循环运行。 图8. 系统程序流程图 图9给出了单片机采集波峰波谷值原理，对A/D转换后的数字信号，脉搏波波形的波峰及波谷值。将每次采集到的数值存入浮点数max，将下一次采集到的数值y与之比较，若y大于max，则将y的值记为max，以此类推，LCD完成一次后将可得到该时间段内的最大值，即波峰值。同理，将每次采集到的数值存入浮点数min，将下一次采集到数值y与之比较，若y小于min，则将y的值记为min，以此类推，LCD完成一次显示后将可得到该时间段内的最小值，即波谷值。最终将波峰值与波谷值代入预先在程序中设定好的回归方程，分别计算得出舒张压和收缩压。 图9. 特征点提取流程图"
"本文选用220 V交流转±9.0 V直流恒压源模块(WA5-220D09D3)作为供电电源，测试时采用数字示波器(DS1102E)分别测试每一部分的电路输出情况，从而验证电路可行性。 将光信号采集电路输出端与脉搏波信号处理电路连接后，采用搭建好的测试系统对光信号采集电路输出的差分信号和信号放大电路进行测试，将数字示波器接在接光信号采集电路的输出端，得到如图10(a)的电压输出信号，由图可见电压信号幅值在±0.5 V以内，且其中掺杂着许多噪声，无法辨别出其中的有用信号。再将示波器的探头连接信号放大电路的输出，测得脉搏波信号放大5倍后的输出信号，由图10(b)可知，电压信号峰–峰值增大到5.0 V左右，验证了信号放大电路对信号的放大功能。继续将数字示波器接在一级低通滤波电路的输出端，得到如图10(c)的电压输出信号，二级低通滤波电路的输出如图10(d)。由图可见，由于已经在一定程度上滤除了10 Hz以上的噪声信号，采集到的电压信号已隐约出现了脉搏波波形轮廓。接下来将信号输入高通滤波电路，目的是将直流信号去除。将示波器的探头连接高通滤波电路的输出，如图10(e)，输出电压信号幅值回归到−2.0 V~2.0 V之间，验证了高通滤波电路对直流信号的滤除功能，然而该信号中仍50 Hz工频干扰信号。本文采用专门的50 Hz陷波电路模块将该电路滤除，并抬高电压，由图10(f)可知，陷波效果良好，且电压大小满足单片机A/D转换的要求。但通过测试发现，信号峰-峰值可从200 mV左右变化到4.0 V左右，这是由于测量时人体的姿态、生理状况等各种原因造成的，这种误差导致后续建立脉搏波特征值和血压值之间回归方程时存在着较大的难度。  采用指尖式血压计(HM10)、数字万用表(Agilent34461A)和本设计的指端动态血压监测仪构成整个测试系统。以指尖式血压计作为标准，通过采集被测者一天内不同时刻的血压值以及同一时刻测得的指端脉搏波波峰值Vmax和波谷值Vmin，经多次测量、记录，得到测量结果如表1。 Table 1 次数 V min (V) V max (V) SBP (mmHg) DBP (mmHg) 1 1.28 3.76 115 71 2 0.88 4.16 112 69 3 1.04 3.60 116 71 4 0.64 3.60 116 71 5 2.00 3.12 121 74 6 0.88 4.16 109 67 7 0.88 4.16 117 72 8 0.80 3.52 116 71 9 0.96 3.36 112 69 10 1.16 3.68 115 70 11 1.44 3.32 116 71 12 1.84 3.24 110 68 13 1.48 4.12 120 73 14 2.24 4.12 120 73 15 1.68 4.36 117 72 表1. 血压值与脉搏波波峰波谷值测量结果 图10. 电路输出结果：(a) 差分输出电压；(b) 放大输出；(c) 一级低通滤波输出电压；(d) 二级低通滤波输出电压；(e) 高通滤波输出电压；(f) 陷波输出电压 整理数据，利用Origin2017绘制波谷值与舒张压关系曲线、波峰值与收缩压的关系曲线，并对波谷值与舒张压关系曲线进行三阶多项式拟合，对波峰值与收缩压的关系曲线进行二阶多项式拟合。图11(a)给出波谷值与舒张压关系曲线及拟合结果，波谷值与舒张压拟合相关系数R 2 = 0.69232，图11(b)给出波峰值与收缩压的关系曲线及拟合结果，拟合相关系数R 2 = 0.82261。 图11. 测量结果：(a) 波谷值与舒张压的关系曲线；(b) 波峰值与收缩压的关系曲线 结果表明，本文设计制作的指端动态血压监测仪实现了连续血压测量，但仍存在一定误差，误差产生原因主要有两点：一是由于元件自身带有误差，无法得到实验恰好所需的元件值，因此在电路的各环节中都难以得到理想的效果；二是由于人体是一个复杂且开放的生理系统，在测量过程中，脉搏波信号会受测量时的人体姿态、生理状态、环境因素等影响 [ 11 ]，因此通过测试得到的血压值与脉搏波特征值之间的回归方程会存在误差，最终系统的测量结果也会存在一定的误差。"
"本文基于光敏三极管设计制作了指端动态血压监测系统，采集、处理人体指尖脉搏波信号，利用单片机提取脉搏波特征参数，并通过大量数据测量与统计建立了脉搏波特征参数与血压之间的回归方程，最终实现了血压值的测量与显示。实验结果表明，相比目前市场上的电子血压计，本文设计的指端动态血压监测仪可实现长时间血压的连续测量，并具有更高的便携性，为家用医疗设备、智能穿戴设备及临床医疗设备测量实时血压提供一定的参考。"
