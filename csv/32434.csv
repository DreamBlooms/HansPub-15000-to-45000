"为实现小米品质的快速鉴评，以“豫谷18”新米和陈米为研究对象，利用工业相机采集出样本的RGB图像，通过图像处理裁剪出同样大小感兴趣区域(ROI)图像块。由于新米与陈米在颜色方面差异较大，为更好提取颜色特征，将RGB图像转换到HSV颜色空间并提取HSV颜色空间下ROI区域的色调(H)和饱和度(S)对应的中心矩特征。根据特征值的分布图，筛选出更易区分的特征，组成特征向量作为分类器的输入，建立基于支持向量机(SVM)的识别模型。通过留一校验方法进行模型的训练测试，结果表明，当选择饱和度(S)中心矩特征作为特征向量输入模型时，识别率达到95%，且耗时较少，可以应用于小米的品质检测。 关键词 :机器视觉，小米分级，颜色特征，支持向量机(SVM)，特征选择，检测识别 Copyright © 2019 by author(s) and Hans Publishers Inc. This work is licensed under the Creative Commons Attribution International License (CC BY). http://creativecommons.org/licenses/by/4.0/"
"小米亦名粟，是我国古老的农作物之一，在中国主要产于北方干旱及半干旱地区。谷子脱壳后称小米，小米色泽金黄营养物质丰富。近年来，随着人们对饮食要求的不断提高，以绿色健康为主的农产品日渐走入人民的日常生活。小米作为饮食粗精搭配的载体，因其含有人体必需的多种维生素、氨基酸以及微量元素 [ 1 ]，并且营养素配比合理，同时又有良好的食疗效果 [ 2 ]。越来越受到人们的喜爱。 目前市场上小米品种多样，新小米和陈小米品质有很大差别，营养成分和价格也相差较大。传统分辨方法有理化分析、样品对比观察，甚至要做感官评定才能分辨 [ 2 ] [ 3 ]，极其繁琐和耗时。为了维护消费者合法权益和市场公平，迫切需要一种有别于传统的快速判别方法和相应设备 [ 4 ]。 机器视觉技术作为近年来人工智能在图像处理领域的重要应用，该技术模拟了人的视觉，具有快速无损的优势。其应用正向各个方面迅速发展 [ 5 ] [ 6 ] [ 7 ]。李庆中，张漫等通过提取苹果图像颜色特征，利用计算机视觉技术建立出苹果颜色实时分级系统 [ 8 ]。Noordam J. C., Otten G. W.，Timmermans T. J. M.，et al.通过提取图像的形状颜色等特征利用机器视觉技术实现了对马铃薯质量的高速检测和分级 [ 9 ]。张书慧，陈晓光，张晓梅，等通过搭建基于机器视觉图像采集分析系统并建立相应的特征数据库，在对100个富士苹果进行质量检测与分级中。准确率达到了96% [ 10 ]。 对于利用机器视觉技术实现小米快速检测与分级，目前国内外进行相关研究较少。本文根据新小米与陈小米在颜色方面的差异 [ 11 ] [ 12 ] [ 13 ]，通过提取样品图像的颜色特征，搭建基于机器视觉的分类模型，实现对新陈小米的快速检测与识别。"
"本研究以超市购得“豫谷18”新小米与陈小米作为研究对象。为了保证图像采样准确，取每种原料50 g定义为一个样品，置于一张整洁的白纸上 [ 14 ]，均匀摊开，为后面图像标准块的采集和实验数据获取做准备。图像采集设备见图1所示，光源为维视数字图像技术有限公司生产的AFT-RD230W漫反射圆顶光源，图像采集设备为MV-3000UC工业相机，有效像素300万pixel2，图像为格式是BMP，位深度是24位的RGB图像。后续图像处理、数据处理均在MATLAB R2014b软件(The Math Works Inc., USA)平台上完成。 图1. 图像采集系统  利用MATLAB软件，通过编程实现样品图像标准块(ROI)的自动裁剪，图像块大小为200 × 200 pixel2。采集图像见图2中(b)所示。 图2. 样品图像的采集与标准图像块的获取  颜色是图像的主要特征之一，本研究主要针对颜色进行特征提取和分析 [ 11 ] [ 12 ] [ 13 ]。工业相机采集的图像为RGB颜色空间图像，RGB颜色模型中R、G、B的像素值大小与光照条件有关，为了降低光照对颜色特征提取的干扰，将RGB颜色空间转换到HSV颜色空间 [ 16 ]，提取与颜色特征关系密切的色调(H)和饱和度(S) [ 3 ] [ 15 ]，通过提取H，S通道直方图的各阶矩，以此作为识别新小米与陈小米的颜色特征 [ 17 ]。对应的颜色模型示意图见图3所示。 图3. 颜色空间模型   由于对于颜色特征提取，HSV空间更有优势，故需将图像转换到HSV颜色空间中，RGB空间与HSV颜色空间转换关系式如下 [ 18 ] ； H = { G − B MAX − MIN × 60 ˚ , ( 2 + B − R MAX − MIN ) × 60 ˚ , ( 4 + R − G MAX − MIN ) × 60 ˚ ,                                                               ( R = MAX )                                                             ( G = MAX )                                                             ( B = MAX ) (1) S = MAX − MIN MAX (2) V = MAX (3) 式中：H对应是色调(Hue)取值范围为0~360˚，归一化到0~1范围，S对应是饱和度(Saturation)，V对应是亮度(Value)，MAX是RGB的3个分量中的最大值，MIN是最小值，R、G、B为对应RGB空间分量相应的像素值。  根据相关HSV颜色空间特性，颜色特征与H、S关系密切，这两者统称为色调。其中H反映了可见光的全部色谱，表示颜色属性，S反映了颜色的饱和度特性，S值越大，颜色的饱和度越大。 图像的直方图能够反映对应图像的统计学特征是描述图像的基本的方法，而且色彩直方图具有计算简单且随图像的大小、旋转变化不敏感等特点 [ 16 ]，虽然颜色直方图是表示颜色特征的常用方法，但是直方图的数据量过大，因此通过提取直方图对应的统计特征来简化颜色特征。 本次实验通过提取色调和饱和度这两个分量对应的色彩直方图，然后利用统计学规律提取对应直方图的数字特征,设一幅图像有M个像素，每个通道颜色空间被量化成N种不同的颜色灰度，则颜色直方图P定义为 [ 19 ] ： p ( z i ) = z i M (4) 式中： p ( z i ) 是第 z i 种颜色灰度在整幅图像中具有的像素数的概率估计值(频率)，i的取值范围为对应的1~N。  颜色特征可采用颜色直方图、颜色矩的方法表示，通过对比，本研究采用图像颜色矩的表示方法来描述新陈小米的颜色特征。颜色矩是将图像的颜色分布用它的矩来描述。此外，根据相关文献可知，颜色分布信息主要集中在低阶矩 [ 20 ] [ 21 ]，如一阶矩描述对应图像的平均颜色值、二阶矩反映对应图像颜色值的方差均匀性、三阶矩反映图像颜色的偏移性，本文以对应颜色通道的前三阶矩作为图像颜色分布的数字特征，对应通道的前三阶矩计算公式如下式所示 [ 20 ]。 μ 1 = ∑ i = 0 N − 1 z i p ( z i ) (5) μ 2 = ∑ i = 0 N − 1 ( z i − μ 1 ) 2 p   ( z i ) (6) μ 3 = ∑ i = 0 N − 1 ( z i − μ 1 ) 3 p   ( z i ) (7) 式中： z i 表示图像中对应灰度级的灰度值(离散随机变量)， p ( z i ) 是灰度值 z i 在整幅图像中具的概率估计值(频率)， μ 1 、 μ 2 、 μ 3 分别为对应的一阶矩、二阶矩、三阶矩，N为对应的灰度级数目。  面对分类问题，在诸多识别模式中，支持向量机(SVM)具有良好的分类特性 [ 22 ]，是一种有效的分类器。通过引入核函数映射的方法，可以把非线性问题转化为高维空间中的线性问题，继而在变换空间中求出最优分类面，从而实现数据特征的分类，本次试验，利用提取的颜色特征值组成特征向量作为分类器的输入，一个具体的特征向量可以描述为： ( c 1 , c 2 , ⋯ , c n ; d ) ，这里c i 表示样本对应的若干特征属性，d是对应的类标签，它标记相应样本对应的类别。通过对样本集中训练集训练学习，得出SVM分类器对应分类模型，将测试集输入得出的分类模型去验证模型的有效性，从而将最终所得到的分类模型用于后期的分析预测。"
"本文采用的试验样本为洛阳地区某超市的新小米与陈小米，即两个类别，每个类别10个样本，共20个样本，分别提取出对应的颜色矩特征作为模型的数据集。考虑到样本数量，使用留一校验(leave-one-out cross-validation)法获取识别率 [ 22 ]。留一法有很多优点，在样本数量较少情况下优势明显，其特点是，如在本次实验中样本集中有20个样本，则每个样本都单独作为一次测试，剩余19个样本则作为训练集，这样一共有20次，记录每次结果，最后算出20次的总体准确率，计算出的结果比较可靠。排除了样本集划分的不确定性和预测的随机性，确保实验过程是可以重复的，提高了说服力和可信度。  根据对应颜色空间的直方图，分别提取色调(H)和饱和度(S)通道中对应的3个颜色矩的值作为特征向量，然后通过0均值归一化(Z-score标准化)消除对应各阶颜色矩的量纲，使其特征值在数量上处于同一数量级，方便对比分析，为了直观上对新陈小米颜色特征进行分析，根据颜色的各阶矩特征，做出如图4对应的特征分布统计图。 图4. 新陈小米颜色特征值分布图 从色调对应的颜色矩特征分布图中，可以看出整体上新小米在一阶矩上要大于陈小米，二阶矩新小米要小于陈小米，三阶矩两者区分困难。 从饱和度对应的颜色矩分布图中，很明显可以看出新小米在一阶矩上要大于陈小米，二阶矩上，新小米整体上要小于陈小米，三阶矩上新小米也显然小于陈小米，从整体上观察，新小米的颜色矩随着矩的递增呈下降趋势，陈小米则随着矩的递增呈上升趋势。 对比色调(H)和饱和度(S)的颜色矩特征，发现饱和度(S)颜色矩特征对区分新陈小米要更有效。这是因为新陈小米都呈现黄色，故在色调上较为接近，而在颜色饱和度方面，新小米要比陈小米大的多。 观察颜色矩特征分布图，可以发现饱和度(S)对新陈小米的区分更有效，另外，可将色调和饱和度对应的特征串接为一个6维向量[H S]，作为组合特征 [ 15 ] [ 18 ] [ 23 ]。本次试验分两类，则对应的标签分别标记为1、−1，把向量特征值和对应种类标签值结合，构成实验的样本集，最后将训练集输入到SVM分类器中训练，建立分类模型，然后用测试集输入到模型中用于预测验证，其结果见表1所示。 Table 1 样本数据 实验方法 分类器 颜色特征 识别率/% 运行时间(s) 新小米(10张) 陈小米(10张) 留一校验法 SVM 色度(H) 75 0.100 饱和度(S) 95 0.110 [H, S] 95 0.139 表1. 小米图像特征分类识别的结果 由表1可知，3组特征向量对应的识别情况分别是，色度(H)的3个矩特征的识别率为75%，饱和度(S)的3个矩特征的识别率为95%，将色调和饱和度的颜色特征融合为一个6维特征向量，对应的识别率为95%。结果与图4中颜色特征值分布规律一致，说明提取的特征质量，对模型的识别率影响很大。 另外，从识别结果中可以看出，特征的数量增多，模型相对运行时间会相应增加，但是，识别率并非随着提取特征数量的增多而必然增大，从另一方面说明特征选择的必要性。 试验结果表明，当取新陈小米饱和度(S)的3个矩特征作为模型的特征向量时，不仅在运行时间上有优势，而且识别率方面也取得了良好效果。"
"本实验对新陈小米的检测与分级进行了研究，利用MATLAB在数字图像处理方面的应用，提取图像的色调(H)和饱和度(S)对应的颜色矩特征，利用泛化能力较强的支持向量机(SVM)在分类方面的优势 [ 22 ]，构建出新陈小米分类识别模型，经对比分析，得出饱和度(S)颜色矩特征对新陈小米的区分效果明显，将该特征值作为特征向量，作为分类模型的输入，通过留一校验的方法，最终识别准确率达到了95%，因此，本文构建的新陈小米检测识别模型，根据采集的图像，能够实现对新陈小米的检测与识别。 本文利用图像处理和机器视觉技术，对新陈小米的检测与识别进行了初步研究，取得了良好的试验效果。虽然在一般条件下利用小米的颜色特征能够很好地实现对小米品质的检测，但对于人为添加剂如色素等，则基于体表的颜色特征，明显不足以甄别和分类，需结合其它成像技术，如高光谱技术等 [ 24 ]，才能实现更好的检测效果。"
