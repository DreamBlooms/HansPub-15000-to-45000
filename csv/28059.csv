"为最大限度发挥自适应电火花加工能力，更加科学地解决加工稳定性与加工效率的矛盾，提出了智能自适应电火花加工。即在“感知”间隙中放电脉冲的基础上，对信号做进一步的“认知”处理，获得极间环境状态指标和加工状态指标，然后根据实时变化的加工环境，计算出“控制行为的指导思想”，即获得平衡加工稳定性和加工速率的放电状态期望值，最后，根据这个期望值，获得当前加工状态的最优控制。智能制造的核心是“控制行为的指导思想”，是最优控制行为的指导原则；由自适应控制具体实现最优控制行为。本文通过两个自适应控制系统，实现了智能自适应电火花加工，即一个自适应控制系统完成“控制行为的指导思想”，另一个自适应控制系统完成最优控制行为。实验结果表明，该智能自适应电火花加工成倍地提高了电火花加工的能力，特别是针对核工业、航空工业等的高温合金、超硬合金如钼钛锆合金、镍基718合金等，都能够实现稳定、快速地加工，展示了智能自适应电火花加工的强大加工能力。 关键词 :电火花加工，智能制造，自适应控制，高温、超硬合金 Copyright © 2019 by authors and Hans Publishers Inc. This work is licensed under the Creative Commons Attribution International License (CC BY). http://creativecommons.org/licenses/by/4.0/"
"随着航空、航天、核能等技术的发展、新型材料的不断涌现，对具有高熔点、高硬度和高强度的合金材料如钼钛锆合金，镍基718合金等的高效加工提出了新的挑战。由于新型材料的物理特性，传统切削加工难以快速、有效地加工这些材料。电火花加工理论上可以加工任何导电材料，但其加工过程的不稳定性限制了它的加工能力。电火花加工是在工具电极和工件之间施加高频脉冲击穿电介质后瞬时高温蚀除工件材料的一种加工方法 [ 1 ] 。与传统切削加工相比，电火花加工可以消除接触应力、颤动以及震动对加工精度的影响进而无视材料的硬度和强度。因此，电火花加工技术被广泛应用于航天、磨具、汽车等领域 [ 2 ] 。 近年来，自适应控制增强了电火花的加工能力 [ 3 ] [ 4 ] ，虽然加工效果显著，但是由于电火花加工环境与加工状态变化的复杂性，对自适应电火花加工提出了更高的要求，尤其是在加工一些高温合金和超硬合金时，加工环境变化极其复杂，加工状态极易恶劣，难以实现长时间的稳定快速地加工。 为了增强电火花加工的加工能力，更好地平衡加工稳定性和加工效率，本文提出了智能自适应电火花加工控制系统，该系统增加了对加工环境的控制，使自适应控制的电火花加工功效更高。实验结果表明该系统不仅可以维持有利于加工的加工环境，还可以在保证稳定加工的基础上，获得最大的加工速度。这种控制方式极大地提高了电火花加工的能力，可以有效地加工当前出现的高温、高硬度的难加工材料。"
"所谓“智能”，就是使加工设备产生“思想”，并在此“思想”指导下优化加工参数，解决加工环境和加工过程的复杂性和难控性。因此，智能制造应具备三项功能：“感知”、“认知并形成控制准则”和“合理的响应”，即在识别各种加工现象的基础上(感知)，制定加工环境优劣程度指标(认知)，计算未来短期加工环境下加工状态期望值(形成控制准则)，用加工状态期望值平衡加工速度与加工的稳定性，指导设备的参数优化，使加工状态(认知)跟踪加工状态期望值(合理的响应)，从而获得稳定、高效的加工。  “感知”是智能制造的基础，电火花加工的感知功能就是自动识别加工过程中放电间隙内所出现的各种放电脉冲，即开路脉冲、火花放电脉冲、瞬态拉弧脉冲、稳态拉弧脉冲、短路脉冲等。首先需要建立如图1的闭环控制系统，图中D/A代表模拟/数字转换、EDM代表电火花加工、A/D代表数字/模拟转换、IPC代表工控机。 图1. 闭环控制系统结构图 然后，对采集到的极间加工信号，根据各种放电脉冲的特点，如图2所示，通过设置不同的电压阈值和电流阈值可以对各种放电脉冲进行有效辨识 [ 5 ] ，图中V、I分表表示电压和电流、 V 1 、 V 2 、 、 V 4 和 I d 分表代表不同电压阈值和电流阈值。 图2. 放电脉冲辨识流程图  所谓电火花加工的“认知”功能，就是根据控制要求，找寻相应的控制指标，亦即根据感知功能所获得的放电脉冲信号构造相应的控制指标。  “认知”一：电火花加工放电状态指标－拉弧率 放电状态是电火花加工过程中反映间隙内加工情况的一个指标。以间隙中有害脉冲比率(也称为拉弧率或放电状态)作为反映间隙中加工状态恶劣程度的指标，即加工状态用量化的拉弧率表示。拉弧率的计算公式如下 [ 6 ] y 1 ( t ) = τ s t a b . a r c + τ s h o r t τ s p a r k + τ t r a n . a r c + τ s t a b . a r c + τ s h o r t + τ d e l a y (1) 其中， y 1 ( t ) 为拉弧率，也称为放电状态， τ s p a r k , τ t r a n . a r c , τ s t a b . a r c , τ s h o r t , τ d e l a y 分别表示在单位时间内的火花放电脉冲数、瞬态拉弧脉冲数、稳态拉弧脉冲数、短路脉冲数以及击穿延时数。拉弧率统计值越小，加工过程越稳定；拉弧率统计值越大，加工过程的稳定性越差，也越容易烧伤工件。这样就实现了加工过程的量化表达。 “认知”二：反应加工速度的控制指标－有效放电率 反应加工速度的指标之一是单位时间内的有效放电率，有效放电率由火花放电率和瞬态拉弧率组成。有效放电率的计算公式如下， (2) y 3 ( t ) 为有效放电率。有效放电率越大，加工速度越快；反之，有效放电率越小，加工速度越慢。 而放电率的计算公式是， y 2 ( t ) = τ s p a r k + τ t r a n . a r c + τ s t a b . a r c + τ s h o r t τ s p a r k + τ t r a n . a r c + τ s t a b . a r c + τ s h o r t + τ d e l a y (3) y 2 ( t ) 为放电率。由公式(1)、(2)、(3)可以看出， y 3 ( t ) = y 2 ( t ) − y 1 ( t ) (4) 从公式(4)可以看出，如果拉弧率 y 1 ( t ) 和放电率 都得到了有效的控制，有效放电率 也就得到了有效的控制，亦即，通过对拉弧率和放电率的控制，间接的控制了有效放电率。 “认知”三：加工环境指标 加工环境的优劣程度是一个连续变化的过程，“认知”的一项很重要的功能就是量化加工环境优劣程度，该指标与拉弧率有一定的关系。加工环境指标可以定义为拉弧率的相关函数，即 y 4 ( t ) = f c o r r ( y 1 ( t ) , y 1 ( t − 1 ) , ⋯ , y 1 ( t − m ) ) (5) 其中，m为测度。  “提供未来最佳行为准则”就是在所确定的加工环境优劣程度的基础上，加工环境所能允许的最佳放电状态期望值。该准则是平衡加工速度与加工稳定性最佳指标，是控制变量控制行为遵守的依据。因此，“最佳行为准则”是达到最优控制的“指导思想”。同时，在当前加工环境下提出的未来加工环境的行为准则，这项功能必须具备对未来环境的预测功能。  相应于放电状态，以抬刀周期 T ( t ) 作为控制变量对加工环境进行控制。由于抬刀周期是以控制放电时间来控制放电能量，公式(6)可以实现在机床设置的全范围调整。抬刀周期的放电时间的长短，直接影响加工环境的好坏，因此，抬刀周期是加工环境的控制变量。 W = U ⋅ I ⋅ T ( t ) ⋅ y 3 (6) 其中，W为放电总能量，U为放电电压、I为放电电流、 T ( t ) 为抬刀周期(放电时间)。控制有效放电率 y 3 最直接的方式是控制伺服电压。伺服电压的大小，决定间隙距离大小，进而决定放电率的高低，从而影响加工速度，进而实现了最优控制。本文由自适应控制系统完成最优控制。这样就得到了智能制造系统的控制原理图，如图3所示。 图3. 智能自适应电火花加工控制原理图，其中 (t) 为拉弧率， (t)为放电率， (t)为拉弧率期望值(也称作放电状态期望值)， (t)为放电率期望值，T为抬刀周期(也称作放电时间)，U为伺服电压 智能自适应电火花加工控制系统由内环和外环组成，内环为放电状态的自适应控制，外环为完成“提供控制行为准则”功能的自适应控制，亦即根据加工环境的变化提供未来放电状态的理想状态期望值，该期望值控制内环控制系统控制变量的自适应调整程度，使放电状态即拉弧率跟踪该期望值。这样就实现了对加工环境恶劣程度认知基础上的自适应控制，两套自适应控制系统串联。  两种模型采用一种表达形式，该模型由两部分组成，确定性和非确定性 [ 7 ] ，即 (7) 其中，q为前向移位算子， 为关于q的多项式， A i ( q ) = 1 + a i 1 q − 1 + a i 1 + a i n q − n ， B i ( q ) = b i 1 q − 1 + b i 2 q − 2 + ⋯ + b i m q − m ， C i ( q ) = 1 + c i 1 q − 1 + ⋯ + c i n q − n , i = 1 , 2 ，其中 n = 4 , m = 3 ， i = 1 为电火花加工模型， i = 2 为加工环境模型， e i ( t ) , i = 1 , 2 为方差 σ i 2 , i = 1 , 2 的白噪声。根据加权最小二乘准则最小值，推最小二乘算法被用于去估计多项式中参数 [ 8 ] 。 θ ^ t i = arg min θ ∑ k = 1 t β i ( t , k ) [ y i ( k ) − φ i T ( k ) θ i ] 2 (8) 其中， β i ( t , k ) = λ i ( t ) t − k , 0 ≤ k ≤ t − 1 ， λ i ( t ) 是遗忘因子，且 β i ( t , t ) = 1 ， φ i ( t ) 包含滞后的输入和输出变量，详细地过程见文献 [ 7 ] 。 根据文献 [ 8 ] ，让 R i ( t ) = ∑ k = 1 t β i ( t , k ) φ i ( k ) φ i T ( k ) (9) f i ( t ) = ∑ k = 1 t β i ( t , k ) φ i ( k ) y i ( k ) (10) 然后， θ ^ t i ( t ) = R i − 1 ( t ) f i ( t ) (11) 然后，为了消去装置 R i ( t ) ，让 P i ( t ) = R i − 1 ( t ) (12) 根据最小方差算法，在公式(7)中，过程模型的时变参数， ，可以递推估计为 { θ ^ y i ( t ) = θ ^ i ( t − 1 ) + L i ( t ) [ y i ( t ) − φ i T θ i ( t − 1 ) ] L i ( t ) = P i ( t − 1 ) φ i ( t ) λ i ( t ) + φ i T P i ( t − 1 ) φ i ( t ) P i ( t ) = 1 λ i ( t ) [ P i ( t − 1 ) − P i ( t − 1 ) φ i ( t ) φ i T P i ( t − 1 ) λ i λ ( t ) + φ i T P i ( t − 1 ) φ i ( t ) ] (13) 在以上所有公式中， i = 1 , 2 。  本文采用超前两步的控制策略 [ 9 ] ，一般来说，本文中使用的控制器可以表示为： R i u i ( t ) = T i u c i ( t ) − S i y i ( t ) , i = 1 , 2 (14) 公式(14)可以写成， u i ( t ) = T i R i u c i ( t ) − S i R i y i ( t ) , i = 1 , 2 (15) 其中， R i , S i , T i 是关于前移位算子q的多项式，这个控制策略表示为前置传递函数 T i R i 和负反馈传递函数 − S i R i 组成， u c i ( t ) 为参考输入，分别为加工环境期望值和加工状态期望值。将公式(14)中的 u i ( t ) 带入公式(7)中，得到拉弧率和放电率为 y i ( t ) = B i T i A i R i + B i S i u c i ( t ) + R i C i A i R i + B i S i e i ( t ) , i = 1 , 2 (16) 闭环系统的特征等式为 A c i = A i R i + B i S i (17) 其中， A c i 叫做闭环特征多项式 [ 10 ] 。 根据因果性和相容性原则，公式(16)、(17)中 R i , S i , T i 多项式应该满足以下两个条件， deg S i ≤ deg R i deg T i ≤ deg R i 同时还应满足 [ 10 ] ， deg R i ≤ deg A c i − deg A i deg A c i ≥ 2 deg A i − 1 由此，为获得最小阶次的系统，使公式(17)等式两端阶次相等，得到 deg A c i = 7 ， deg R i = 3 。 因为采用超前两步预测控制策略，闭环特征多项式 A c i 可以简化为 A c i = q d − 1 B i + C i = R i + B i S i (18) 其中， d = 2 ， B i + 是一个二阶的首一多项式，在Diophantine等式(18)中的多项式 B i + 可分解成 B i = B i + B i − 。根据等式两端相同阶次q的系数推导出 R i 和 S i ，然后将 R i 和 S i 代入公式(19)中， B i T i A i R i + B i S i = B i T i A c i = B m i A m i , i = 1 , 2 (19) 即可获得 T i 。 T i = B m i ( A i R i + B i S i ) B i A m i , i = 1 , 2 (20) 其中， B m i A m i 是参考模型传递函数。 这样得到超前两步控制策略： u i ( t ) = ( A i B m i B i A m i + S i B m i R i A m i ) u c i ( t ) − S i R i y i ( t ) , i = 1 , 2 (21)"
"加工特性分析 钼钛锆(TZM)合金是目前核工业应用最为广泛的一种高温合金，其主要成分如表1所示。该材料熔点高、硬度高、耐磨性好，导热导电性和耐蚀性能好，因而被广泛应用于机械、石油、航空航天、电子、核工业等诸多领域 [ 11 ] [ 12 ] [ 13 ] 。 Table 1 成分 Ti Zr C Si Fe Ni N Mo 含量 0.4~0.6 0.07~0.12 0.01~0.04 <0.006 <0.01 <0.005 <0.003 余量 表1. TZM合金的成分(质量分数%) 如表1所示，一定量Ti和Zr的加入极大地增强了钼钛锆合金的强度和硬度，从而给传统切削加工带来极大困难，如切削力大且加工过程中容易发生崩裂和断裂现象、加工出来的零件表面质量差，而且刀具磨损严重，从而引发加工效率差和加工成本高等问题 [ 14 ] [ 15 ] 。而电火花加工技术以其非接触式加工的特性使其成为加工钼钛锆合金的一种不可或缺的加工手段。 近年来，朱颖谋等 [ 16 ] [ 17 ] [ 18 ] 人通过DOE的方法设计了参数配置实验去探究电火花加工参数对加工钼钛锆合金的影响。虽然他们取得了一些效果，但是在这些实验中钼钛锆合金的加工深度只有2mm，离实际应用还有很大的距离。而且在这些实验中，加工参数都是固定不变的，而实际上在电火花加工过程中，加工状态和加工环境随着加工的进行不断变化着，固定的加工参数无法适应快速变化的加工状态和加工环境，因此无法真正实现有效加工。为使电火花加工能够钼钛锆合金，在加工过程中加工参数必须根据加工状态和加工环境的变化而相应地调整。 在这些加工参数中，放电能量是电火花加工钼钛锆合金的重要参数。由于钼钛锆合金的熔点高，硬度大，所以必须增大电火花加工过程中的放电能量才能对其进行有效加工。然而，大能量加工也能恶化加工环境和加工状态，容易产生大量拉弧脉冲，造成加工过程不稳定甚至停止加工。为了稳定加工过程，放电能量应该随着放电状态的变化而实时调整；同时，为提高放电能量的利用率，须优化放电率，使单位时间内的放电能量得到充分利用，这可通过间隙距离的优化得以实现，通过实时调节间隙距离的大小，进而实现优化放电率。另外，由于电火花加工钼钛锆时，加工环境的温度变化较快，容易使消电离的不充分，引起拉弧变化幅度较大，加工效率差的问题，甚至有可能产生大量拉弧脉冲停止加工。因此，需要根据加工环境得到加工状态期望值的短期超前预测值，平衡稳定、快速的加工过程。智能自适应控制系统刚好满足这一要求。 为验证智能自适应控制系统加工钼钛锆合金的加工能力，我们用直径16 mm的紫铜做电极，钼钛锆合金材料的长度96 mm，实验加工盲孔，加工深度设定为93 mm，加工条件如表2所示。 Table 2 开路电压(V) 峰值电流(A) 脉宽(μs) 脉间(μs) 抬刀高度(机床参数) 230 30 800 300 12 表2. 加工参数 智能自适应控制系统控制抬刀周期和伺服电压根据加工环境和加工状态的变化自适应地调整。本文分别选取有利于加工的加工环境和不利于加工的加工环境下的加工阶段来分析智能自适应加工过程。在每张图中，纵坐标从上到下分别表示拉弧率期望值、拉弧率、抬刀周期、放电率和伺服电压，横坐标表示电极抬刀次数。其中拉弧率和放电率均在在0~1内变化，抬刀周期在1~37之间按整数变化，值越大放电时间越长；伺服电压在2~37之间按整数变化，值越大，间隙距离越大，放电率越小以及排屑能力越强。 从图4(a)中可以看出，在有利于加工的加工环境下的加工阶段，排屑状况良好，加工环境变化不大，此时加工状态稳定，因此拉弧率期望值基本都在0.08左右。在期望值影响下，拉弧率也比较低，说明放电状态很稳定，此时大部分的抬刀周期也达到了30左右，放电时间长；同时，伺服电压基本维持在8左右，增大了放电率，此时的放电能量的利用率也比较高。在这一阶段，加工速度最快，且加工过程也非常稳定。 图4. 智能自适应加工过程中有利于(a)；不利于(b)加工的加工环境下的加工阶段 在不利于加工的加工环境下的加工阶段如图4(b)所示，排屑条件变差，此时间隙内积屑增多，加工环境极度恶劣，加工状态容易变得不稳定，这时拉弧率期望值大部分也自适应地调整到0.04左右，在期望值的作用下，虽然加工条件变恶劣了，但是拉弧率还是保持在一个较低的值，稳定放电状态，此时抬刀周期也大幅度下降，限制由于加工环境恶化导致的拉弧率升高；同时，伺服电压也普遍上升到24左右，减小放电率，缩小放电能量，以此减缓加工环境的进一步恶劣，稳定加工过程。虽然此时的放电能量减小了，但是仍然保持着一定的加工速度，此种现象说明该智能系统有效地解决了由于加工环境恶化引起的加工过程不稳定的问题，同时还折中了加工速度和加工过程稳定性。 整个加工过程中，平均加工速度基本保持2 mm/h的速度，加工深度到93.3 mm时停止，此时加工速度仍保持不变。由于这种材料超硬，很难切开，只能给出测量图。图5是加工核工业特制钼钛锆合金的实物图。 图5. 加工的钼钛锆合金实物图  Cr12模具钢是高碳高铬型冷作模具钢，含有极高量(质量分数)的C2.00%~2.30%和Cr11.00%~13.00%，属于莱氏体钢，有很高的淬透性、淬硬性和耐磨性，同时也具备抗冲击韧度差，导热性和高温塑性差的特点。 我们用直径16 mm的紫铜做电极，Cr12材料的长度130 mm，实验加工盲孔，加工深度设定为125 mm。为减少电极损耗，加工条件如表3所示。 Table 3 开路电压(V) 峰值电流(A) 脉宽(μs) 脉间(μs) 抬刀高度(机床参数) 230 30 800 300 12 表3. 加工参数 图6(a)是智能自适应电火花加工Cr12模具钢加工过程的一部分状态图，从该图中可以看出在智能自适应控制策略的作用下，实时调节抬刀周期，使得拉弧率实时跟踪并不超过拉弧率期望值；同时，在放电率指标的影响下，伺服电压也在实时地调节，两者相互配合，互不干扰，实现了一个稳定、快速的加工过程。 图6(b)是两种加工方法的实物对比图。开环加工该材料只能加工到34 mm便拉弧了，即无法继续加工，而该系统控制下的电火花加工能加工到125 mm且加工状态良好，能继续加工，电极损耗0.1 mm.在相同加工深度下该系统控制加工过程的加工速度是开环加工的2倍。 图6. (a)智能自适应加工Cr12模具钢加工过程的一部分状态图；(b) 开环和智能自适应加工Cr12对比图  此外，我们还用该系统加工超难加工材料镍基718合金并与开环加工作比较。Inconel 718是一种高强度耐热镍基合金，具有优良的高温强度、高温硬度和耐蚀性，在高温条件下能长期工作。我们用直径6 mm的紫铜做电极，实验加工盲孔，加工条件如表4所示。 Table 4 开路电压(V) 峰值电流(A) 脉宽(μs) 脉间(μs) 抬刀高度(机床参数) 230 7 150 40 11 表4. 加工参数 由于电火花加工Inconel 718加工过程中，加工环境变化复杂，加工状态变化剧烈，因此我们选择加工环境作为抬刀周期的控制指标，选择拉弧率作为伺服电压的控制指标，这样可以实时并且准确地控制加工环境和加工状态的变化，避免由加工环境恶劣引起的加工状态恶化，从而消除拉弧脉冲，稳定加工过程。 图7(a)是智能自适应电火花加工Inconel 718加工过程的一部分状态图。开环加工该材料只能加工到15 mm便拉弧了，加工速度为0.1504 mm/min。受材料尺寸限制，该系统控制下的电火花加工设置加工到60 mm，加工深度为开环的4倍，且加工速度比开环加工要快，为0.1917 mm/min。图7(b)是两种加工方法的实物对比图。 图7. (a)智能自适应加工镍基718合金加工过程的一部分状态图；(b) 开环和智能自适应加工镍基718合金对比图"
"为充分发挥电火花自适应加工的能力，特别是在加工高温合金等难加工材料如钼钛锆合金，Cr12和镍基718合金等，增强自适应加工的鲁棒性，特别研究了智能自适应电火花加工控制系统。该智能自适应系统能够实现智能制造的三项功能，即“感知”、“认知并提供未来行为准则”、“最优控制”。实验证明，电火花智能制造系统不仅拓展了自适应控制理论，同时还极大地拓展了电火花加工钼钛锆合金，Cr12和镍基18合金的加工能力，实现了稳定快速的加工过程，为加工高温、难加工材料提供了可行性。"
