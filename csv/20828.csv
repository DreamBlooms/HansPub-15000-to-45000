"在以太网无源光网络(EPON)中，某些业务数据流的突发，会在ONU产生大量的缓存占用。为了在高质量转发来自用户终端设备CPE (Customer Premise Equipment)的数据至OLT的前提下，降低ONU的缓冲区占用率，本文提出了一种流量控制方法，将CPE置于PON OLT的控制之下，对CPE上行数据流量进行调度与控制。ONU按照策略所述的CPE传输顺序，沿着PON上行信道依次发送CPE数据至OLT。同时ONU按照策略所述的可以开始向OLT传输的最早时刻，对CPE数据进行转发。仿真表明，该流量控制策略在保证合理丢包率的情况下，大大降低了ONU的缓冲器容量，优化了传输效果。 关键词 :配电通信网，EPON，流量控制策略，时序调度 Copyright © 2017 by author and Hans Publishers Inc. This work is licensed under the Creative Commons Attribution International License (CC BY). http://creativecommons.org/licenses/by/4.0/"
"配用电通信网是智能电网基础设施的关键组件，建设满足配用电业务通信需求的电力通信接入网络，是实现智能电网的重要先决条件。配用电通信网络承载的业务种类多元化，能够承载配电自动化，用户用电信息采集，配用电视频监控等业务。作为配用电通信网接入技术，应在多业务接入，业务的QoS保障，网络和信息的安全等几个方面满足需求，以适应现有及未来各种业务的发展。以太网无源光网络(EPON)技术作为目前在电力通信中被广泛认可并应用的接入网技术，利用光纤作为传输介质，具有高带宽和高QoS保障，与配用电网网络结构一致，不仅能够在上述几个方面很好的符合用户综合业务接入的需求，符合技术发展的方向，而且使基于以太网的接入传输系统成本大大降低 [ 1 ] 。 EPON网络在以太网之上提供多种业务，采用点到多点结构，一根光纤承载上下行数据信号，经过1：N分光器将光信号等分成N路，以光分支覆盖多个接入点或接入用户。EPON在OLT和ONU间采用单根光纤提供对称1.25 Gbps带宽，可传输数据、语音和视频业务。其中，其上行数据流采用时分多址(TDMA)技术，把上行的时间分成了许多的时间片，根据ONU分配的带宽和业务的优先级给ONU的上行数据流分配不同的时间片，每个时间点上光纤上只传送一个ONU的上行数据流。通过OLT和ONU之间协商，避免了ONU上行数据流之间的冲突，不会造成数据丢失 [ 2 ] 。 电力通信网的规模不断壮大及电网智能化应用向配用电侧延伸，配用电通信网络中接入的设备不断增加，网络的规模也在不断扩大，配电业务也将在原来的基础上发展和扩充，电力数据通信中的突发大数据流以及视频类业务给配用电通信网带来巨大的流量冲击，使得内部网络节点的堵塞。针对这种情况，实现配用电通信网业务流量的有效管控，可以缓解流量阻塞，降低传输时延，优化传输效果，从而提高业务质量。对于EPON系统而言，作为一种接入技术，必须使用流量控制技术以提供更好的服务质量的支持 [ 3 ] 。 文献 [ 4 ] 提出了一个有流量控制功能的EPON系统，其流量控制功能是用来处理交换机中的拥塞，平衡数据流在交换机中的传输压力，使数据流可以在尽可能小的延迟内得到处理的一种控制方法，在实际应用中可以按照用户的实际需求进行带宽的动态分配。文献 [ 5 ] 提出了采用一种PAUSE的拓展机制，根据不同的LUD来区分不同的PAUSE操作实体，利用它可以很好的解决由于缓冲区拥塞而发生帧丢失的问题，文献 [ 6 ] 分析了在以太网无源光网络系统中支持服务等级协定的必要性，根据双速率三色标记器原理，提出了基于光网络单元的逻辑链路标识进行流量控制的方案，解决用户业务流量控制相关问题。 本文研究了一种用于配用电通信网的EPON网络流量控制方法，通过将用户终端设备CPE (Customer Premise Equipment)置于PON OLT的控制之下，对CPE上行数据流量进行调度与控制，降低在ONU的缓冲区占用率，使得ONU在降低缓冲器容量的情况下，仍然可以高质量的转发来自CPE的数据至OLT，降低了ONU缓冲器的能量消耗。利用这种机制，PON上的OLT不仅可以对ONU的传输接入进行控制，而且决定了CPE何时向其相连的ONU传送上行数据。确保CPE数据在发送至ONU后可以不被阻塞的发送至OLT，减少在ONU处的缓冲流量，降低ONU的能量消耗。 首先，为每个ONU和每个CPE设置一个上行传输窗口，每个CPE在ONU上行传输总窗口中都有自己的子窗口，每个CPE上行传输子窗口各自独立，互无关联。根据窗口的尺寸大小，对CPE流量进行调度，ONU按照计算所得的CPE传输顺序，沿着PON上行信道依次发送CPE数据至OLT。同时ONU按照计算所得的可以开始向OLT传输的最早时刻，对CPE数据进行转发。 本文组织如下：第一章构建EPON网络模型；第二章对传输时延进行分析；第三章对导致的ONU缓存占用进行分析；第四章提出基于上行传输窗口的CPE流量时序调度策略；第五章给出仿真结果；第六章给出结论。"
"在一个PON无源光网络中，如图1所示，主要由光线路终端OLT、无源光分配网络ODN、光网络单元ONU和用户终端设备CPE四个部分组成。一个安装于中心控制站的OLT通过ODN与多个安装于用户安装场所的ONU相连，每个ONU又与多个CPE相连，CPE接入终端用户的网络需求。其中，OLT提供语音、数据、视频业务网络的互联接口，并实现网络管理的主要功能；ONU负责向CPE提供所需的业务接口。ODN负责连通OLT与所属的ONU，其主要功能是完成光信号功率的分配。各个终端用户发送上行数据至ONU，ONU对来自CPE的以太网数据进行缓存，并在OLT分配的上行传输窗口中向上行方向发送 [ 7 ] [ 8 ] 。 首先，为ONU设置一个上行传输窗口，其次，为每个CPE设置一个子窗口，且每个CPE上行传输子窗口各自独立，互无关联。各参数设置如下，V 1 表示CPE上行传输比特率。V 2 表示ONU上行传输比特率。E表示一个ONU所连的CPE个数。 表示CPE和其相连的ONU之间的单方向传播时延。 表示OLT和ONU之间的单方向传播时延。 表示CPE C的上行传输窗口。S表示最大数据包尺寸。 表示CPE C开始上行传输的时刻(在本专利中为零时刻)。 表示CPE C数据流量开始到达ONU的时刻。 图1. EPON网络结构示意图 表示ONU完成对CPE C数据流量的接收的时刻。 表示ONU开始上行传输CPE C数据流量的时刻。 表示ONU完成对CPE C数据的上行传输的时刻。 表示ONU开始依次传输CPE数据流量的时间。"
"计算连接到某个ONU的单个CPE X的总传输时间。 将CPE开始向上行信道发送消息的时刻设为零时刻。数据包大小为 的CPE数据需要通过CPE→ONU段和ONU→OLT段共两段。数据包的最后一位到达ONU后，该数据包的第一个位可以由ONU传输到OLT。设 表示最大的数据包大小(位)。用 表示CPE数据开始到达ONU时的时刻(并且开始占用缓冲区空间)，即， ONU完成接受最后一个数据包的时刻， ONU完成发送最后一个数据包的时刻， 单个CPE，整个传输时间表示为 。为了能够使ONU在时刻 开始传输最后一个数据包，所有先前的数据包必须已经由ONU在时刻 之前发送完毕。那么，ONU应当此时开始上行传输。 则ONU可以在时刻 之前完成了 位数据包的CPE数据传输。"
"计算单个CPE 传输在ONU处产生的缓存占用。 从CPE X上行传输第一个数据包到达ONU的时刻 开始，缓冲区占用以速率V 1 (bit/s)增长，持续到ONU开始上行传输的时刻 。从时刻 开始，当ONU开始上行传输时，ONU的缓冲区占用以速率( )开始下降，持续到时刻 (ONU完成所有的CPE数据接收)。从时刻 到时刻 ，缓冲区以速率V 2 下降。一般情况下， ，当ONU开始发送CPE数据时，在时刻 产生的最大缓冲区占用为 ， 与单个CPE X相连的ONU的缓存区占用变化方程为， 其余情况为0。对于多个CPE连接到一个ONU上的情况，ONU的缓存区占用变化方程为每个CPE产生的缓存占用的叠加，"
"本文提出一种基于上行传输窗口的CPE流量时序调度策略： 第一步：在每个CPE上行传输窗口各自独立的情况下，每个CPE X在ONU上行传输窗口中都有自己的子窗口,其中 。首先为ONU设置上行传输窗口大小，并为其所连CPE设置上行传输子窗口大小。 第二步：计算传输顺序。ONU按照计算所得的CPE传输顺序，沿着PON上行信道依次发送CPE数据至OLT。 CPE1与CPE2与同一个ONU相连，CPE与ONU距离较近，ONU与两个CPE之间的往返传播时延基本相同。若CPE1和CPE2的上行传输子窗口大小满足下列不等式，其中W 1 ,W 2 表示CPE1和CPE2的上行传输子窗口大小， , 分别表示ONU与CPE1，CPE2之间的往返传播时延。 则ONU首先传输CPE1的流量数据，其后传输CPE2的流量数据，可以使得总传输实验最短。即，对于上行传输子窗口较小的CPE的流量数据，ONU应先行发送。即在ONU→OLT段, ONU的传输顺序为 ， 。 第三步：计算ONU可以开始向OLT传输的最早时刻。ONU按照计算所得的CPE传输时刻，沿着PON上行信道发送CPE数据至OLT。在上行传输子窗口各自独立的情况下， 对于来自1个CPE的数据流量，ONU的最早开始传输时刻为： 对于来自2个CPE的数据流量，ONU的最早开始传输时刻为： 对于来自3个CPE的数据流量，ONU的最早开始传输时刻为： 对于来自E个CPE的数据流量，ONU的最早开始传输时刻为： 其中 表示ONU与N个CPE相连，其最早开始转发CPE数据流量的时刻， 。 表示CPE X的上行传输子窗口大小，V 2 表示ONU上行传输比特率。"
"为了检验本文所提EPON流量控制方法的有效性，通过OPENT软件搭建EPON网络模型进行仿真验证。参数设置如下： 该EPON系统中包含16个ONU，每一个ONU与8个CPE相连，总共128个CPE。CPE与ONU之间的上行传输比特率为80 Mbps。ONU与OLT之间的上行传输比特率为2 Gbps。ONU缓冲区大小为15 Mbyte。 为了模拟实际EPON系统中的数据源，仿真中采用了服从一定数据包数量的数据源。CPE各自独立生成数据包，每次仿真过程至少发送108个数据包。 此外，流量突发等级的变化也会影响缓冲占用情况，使用L参数表示流量突发等级，该参数分别取值为0.5、0.7和0.9，分别表示突发性低的流量，突发性一般的流量和突发性高的流量。 在经过长时间的EPON系统运行后，得到CPE缓冲区占用变化情况如图2 (取各CPE所产生的缓存占用的最大值)，ONU缓冲区占用情况如图3 (为各CPE缓存占用之和)，从左至右，流量突发性等级分别为0.5、0.7和0.9。 我们从这些图中观察到，在不加入任何流量控制机制的情况下，随着CPE持续不断的发送数据包，流量负载不断增加，缓冲区占用缓慢的增加，直到某个负载值，然后急剧增加。该负载值的取值取决于流量的突发等级。如果低于此负载值对应的缓冲区占有率就可以满足需求，则需要在达到此负载值时，降低发送流量的速率，否则会导致大量占用缓冲区的情况。在突发性等级较高的情况下，需要尽早的降 图2. CPE缓冲区占用图 图3. ONU缓冲区占用图 低流量发送速率，以避免导致缓冲急剧增加的现象。 我们可以观察到，在使用该流量控制方法后，在突发性等级较低时(L = 0.5)，ONU缓冲区占用仍然随着流量负载的增加而不断增加，但是速度有所放缓，直到达到上文所提负载值，缓冲区占用急剧增加的情况有所缓解。在突发性等级较高时(L = 0.7和L = 0.5)，ONU缓冲区占用不仅增速放缓，甚至有所下降。"
"以太网无源光网络(EPON)技术是目前在电力通信中被广泛认可并应用的接入网技术。本文将CPE置于PON OLT的控制之下，提出了一种基于上行传输窗口的CPE流量时序调度策略，实现控制从每个CPE到其连接的ONU的上行数据流。使得ONU按照计算所得的CPE传输顺序，沿着PON上行信道依次发送CPE数据至OLT。同时使得ONU按照计算所得的CPE开始向OLT传输的最早时刻，上行传输。该流量控制策略在保证合理丢包率的情况下，大大降低了ONU的缓冲器容量，优化了传输效果。"
