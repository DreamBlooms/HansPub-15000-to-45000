"目前在新型机场、高铁站等复杂建筑的建设中，通常采用钢架结构构建主体框架，而此类钢架结构的内部施工需要获取螺栓球体的中心点坐标、直径等几何要素。为了高效、精确地提取螺栓球体的各几何要素，本文基于三维激光扫描技术获取点云数据，提出使用随机采样一致法对球体半径参数进行提取，通过随机采样一致法与最小二乘法拟合结果对比，发现随机采样一致算法对球体信息进行提取稳定性更好，精度更高。 关键词 :三维激光点云，随机采样算法，螺栓球体，几何要素 Copyright © 2019 by author(s) and Hans Publishers Inc. This work is licensed under the Creative Commons Attribution International License (CC BY). http://creativecommons.org/licenses/by/4.0/"
"目前螺栓球状钢网架在复杂建筑的建设中得到越来越广泛的应用，此类钢架结构不仅构造简单，且具有受力明确、连接方便等特点。在实际建设过程中，钢架结构螺栓球体的中心坐标、球体半径等要素是内部施工以及工程后期装修的重要依据。因此如何高效、精确地提取螺栓球的球心坐标、半径等几何要素便成为一个关键问题。 螺栓球体的数据采集方法一般有两种，即全站仪法和三维激光扫描技术。在早期类似工程中，通常利用全站仪在球体的表面随机采集三个点的空间坐标来完成球体拟合，最终提取各几何要素。虽然全站仪法可以完成工程中的实际任务，但是其效率偏低，且在球体表面粗糙、不规则的情况下直接影响坐标精度，鲁棒性较差。相比于全站仪法，三维激光扫描技术具有速度快、精度高、非接触等特点，可适用于大型复杂实体的三维数据采集 [ 1 ]。 针对螺栓球体的拟合问题，可利用最小二乘法(Least Squares) [ 2 ] 或总体最小二乘法(Total Least Squares) [ 3 ] [ 4 ]，以及随机采样法(Random Sample Consensus)。权力奥等基于球体几何关系构造了球心到球截面圆心法线距离平方和的目标函数，以此函数值最小为条件完成了球心坐标等要素的提取 [ 5 ] ；万建鹏等提出将总体最小二乘法应用于点云数据进行球体拟合，并且通过实验得出顾及观测向量与系数阵相关性的总体最小二乘方法可以获取更优结果的结论 [ 6 ] ；最小二乘法利用球体表面的点云进行拟合并得到了较优结果，但未涉及如何处理外围噪声点云，适用性较差；而Ziv Yaniv [ 7 ] 利用随机采样法实现了如何在含有较多噪声点云的数据中拟合球体并得到其几何要素。在提取螺栓球几何要素的工程中，由于从钢架结构点云模型中切割出来的螺栓球体的点云数据含有很多的噪声点 [ 8 ]，相比以上的几种方法，随机采样法可以更好的适用于实际的类似工程任务中。 本文针对北京大兴国际机场钢架模型使用全站仪法及三维激光扫描技术采集数据，试验中通过比较“全站仪 + 最小二乘法”和“三维激光扫描 + 随机采样法”的提取结果，分析了随机采样的合理性和准确性，最终此方法成功应用于北京大兴国际机场钢架结构螺栓球几何要素的提取计算。"
"在对大量点云数据进行直线、对数、圆曲线以及球体等各类拟合时，通常采用经典的最小二乘法，本文运用此方法对全站仪采集的球体数据进行计算并得出球心坐标和球体半径。 根据球体方程有： ( x − a ) 2 + ( y − b ) 2 + ( z − c ) 2 = r 2 (1) 式中，a、b、c为球心坐标，r表示球体半径。 式(1)展开可得： x 2 + y 2 + z 2 − 2 a x − 2 b y − 2 c z + a 2 + b 2 + c 2 = r 2 (2) 令， A = 2 a ， B = 2 b ， C = 2 c ， D = a 2 + b 2 + c 2 − r 2 ，可将式(2)简化为： x 2 + y 2 + z 2 − A x − B y − C z + D = 0 (3) 最小二乘拟合是要保证 v = ∑ ​ ( x 2 + y 2 + z 2 − A x − B y − C z + D ) 2 中的v最小，可以使用对其求偏导的方 法，令其对各个参数的偏导均为零，最后解得： a = A 2 ,     b = B 2 ,     c = C 2 ,     r = a 2 + b 2 + c 2 − D (4)  该算法具有两大优势，一是它可以处理部分点云数据的异常值，二是应用简单。因此该算法广泛应用于鲁棒参数估计。随机采样算法主要分为三部分。首先，随机采集可以估算出所需提取参数模型的点云；再通过点数估计模型参数对每个数据元素进行筛选，并确定最大共识集；最后使用最大共识集估计出最佳模型参数。构造随机采样算法后通过输入离群值自由子集期望的概率p，得到一个离群自由子集。当一个新的子集通过迭代产生一个更大的一致集(更高的内层百分比)时，算法能够自适应的更新子集的数量N。随机采样算法所需参数如表1所示： Table 1 模块 参数 参数说明 输入 Data 含有异常值的数据(基数 = n) P 离群值自由子集的期望概率 S 估计模型M所用数据元素的最小数量 τ 阈值 输出 M 基于最大共识集合估计的模型 表1. 随机采样算法参数 具体模型参数估计如下： N维球体被定义为满足以下公式的一组点： ( p − c ) T ( p − c ) = r 2 (5) 其中，c是圆心坐标，r是半径，p是最大共识集。 假设所有的点都在球体上， p i ∈ R d ，有公式： ∀ i , j       ( p i − c ) T ( p i − c ) = ( p j − c ) T ( p j − c ) = r 2 (6) 因此 ( d + 1 ) 中每一对点提供了一个线性相关的方程： ( p i − p j ) T c = 0.5 ( p i T p i − p j T p j ) (7) 给定 d + 1 线性独立点，可得到一个规则矩阵方程，并求解方程组得到c。半径计算为 ，其中 p i 是从最大共识集点云中选择的。 对于d = 2和d = 3可以用卡姆法则来计算以下等式中的矩阵。 在d = 2中，随机的抽取三个点 然后便可以有公式(7)得到： [ ( p 1 x − p 2 x ) ( p 1 y − p 2 y ) ( p 1 x − p 3 x ) ( p 1 y − p 3 y ) ] [ c x c y ] = 0.5 [ ( p 1 x 2 − p 2 x 2 ) + ( p 1 x 2 − p 2 y 2 ) ( p 1 x 2 − p 3 x 2 ) + ( p 1 x 2 − p 3 y 2 ) ] (8) 求解的过程中需要用到逆矩阵，可以表示为： A = ( a b c d ) , A − 1 = 1 a d − b c [ d − b − c a ] (9) 当d = 3时，随机的在集合中取四个点 p 1 , p 2 , p 3 , p 4 方程组为： (10) 求解过程中的逆矩阵，可以表示为： A = [ a b c d e f g h i ] ,     A − 1 = 1 a ( e i − f h ) − b ( d i − g h ) + c ( d h − e g ) [ e i − f h c h − b i b f − c e f g − d i a i − c g c d − a f d h − e g b g − a h a e − a h ] (11) 给定 的m个点， m > ( d + 1 ) ，要将其拟合到一个球体，使平方代数距离之和最小。根据球体的定义公式(5)有： δ i = p i T p i − 2 p i T c + c T c − r 2 (12) 则最佳的球体参数计算如下： [ c * , r * ] = arg min c , r ∑ i = 1 m δ i 2 (13) 设 m = c T c − r 2 ，得到以下线性方程组 ( A x = b ) ： (14) 方程组的解决方案可最小化为： ∑ i = 1 m δ i 2 = ‖ A x − b ‖ 2 (15)"
"为了验证“三维激光扫描 + 随机采样算法”的有效性，本文采用RIEGL VZ-1000三维激光扫描仪对北京建筑大学北京大兴国际机场模型及其周围环境进行了点云数据采集和精密拼接，其拼接误差为2~4 mm。拼接后对模型做进一步的切割和去噪处理，得到所需实验区域的点云模型。本文实验采集的点云数量为1223万，点云模型精度为2 cm。利用Geomagic软件对所需螺栓球的点云进行粗略切割处理后，将点云数据导入到随机采样算法计算程序中，得到所需要的螺栓球体球心坐标和半径。 “全站仪 + 最小二乘法”是利用全站仪采集螺栓球体表面上的4个随机点，然后通过MATLAB编写的最小二乘法程序对数据进行计算，最终得到螺栓球的半径和球体中心坐标。 实验用以上两种方法随机拟合了100个钢架结构螺栓球，并分别与已知焊接螺栓球半径作比较(表2和表3)，求得绝对误差并作比较。图2为两种方法得到的绝对误差的统计分析。 实验方法如图1所示。 图1. 实验流程 Table 2 球体 坐标x 坐标y 坐标z 半径 真实半径 绝对误差 球01 12.2826 11.3622 3.07601 0.0473 0.045 −0.002 球02 12.4765 9.6414 3.04382 0.0469 0.045 −0.002 球03 11.6625 9.0698 3.19912 0.0449 0.045 0.000 球04 9.8151 11.9422 2.92174 0.0462 0.045 −0.001 … … … … … … … 球97 10.1226 14.9541 3.16862 0.0436 0.045 0.001 球98 9.89898 15.6271 3.20319 0.0475 0.045 −0.003 球99 10.8444 14.4996 3.21283 0.0464 0.045 −0.001 球100 10.9091 12.6175 3.08354 0.0450 0.045 0.000 表2. 随机采样发处理结果(单位： m) Table 3 球体 x坐标 y坐标 z坐标 半径 真实半径 绝对误差 球01 12.2901 11.3583 3.0700 0.0480 0.045 −0.003 球02 12.4731 9.6490 3.0418 0.0492 0.045 −0.004 球03 11.6672 9.0700 3.2000 0.0441 0.045 0.001 球04 9.8200 11.9475 2.9272 0.0456 0.045 −0.001 … … … … … … … 球97 10.1298 14.9571 3.1613 0.0474 0.045 −0.002 球98 9.8913 15.6212 3.2082 5.8790 0.045 错误 球99 10.8412 14.4915 3.2198 0.0523 0.045 −0.007 球100 10.9012 12.6112 3.0888 0.0490 0.045 −0.004 表3. 最小二乘法处理结果(单位： m) 图2. 两种实验方法误差统计 实验结果表明，利用随机采样算法处理螺栓球点云数据拟合得到的半径，其精度高于最小二乘法，且稳定性更好。表2中可以看出错误的测量点导致了部分拟合结果出现错误，而使用随机采样算法可对误差较大的点进行排除，削减意外噪声点对结果的影响。"
"北京大兴国际机场航站楼是世界上规模最大、技术难度最高的单体航站楼，由主航站楼核心区和向四周散射的五个指廊组成。航站楼屋盖钢结构采用空间网架结构体系，成不规则自由曲面，总共使用了6万多根钢架，1万多个螺栓球。 为了测定北京大兴国际机场11标段钢架结构中的螺栓球球心坐标，本文采用RIEGL VZ-1000三维激光扫描仪进行扫描和拼接点云模型(图3)后使用随机采样算法对1040个螺栓球进行了拟合，得到螺栓球圆心和半径求得其最低点的三维坐标(图4)。 图3. 国际机场点云 图4. 螺栓球最低点坐标 基于钢架螺栓球体最低点的三维坐标，完成了机场11标段机场内部天花板吊顶安装工作。其中施工前，现场如图5，完成天花板吊顶后的现场，如图6。 图5. 吊顶安装前的施工现场 图6. 完成天花板吊顶工作后的现场"
"实验分别用“全站仪 + 最小二乘法”和“三维激光扫描 + 随机采样法”两种方法实现了对钢架结构中螺栓球体特征信息半径和球心坐标的提取。并通过对北京新机场机场模型点云数据进行采集、提取拟合结果、对比数据、分析结果，可得出基于点云数据使用随机采样算法对球体拟合特征信息提取，不仅可以避免利用全站仪在外业人工测量时“飞点”导致内业处理数据的错误，而且可以提高工作效率。实验结果表明基于点云的随机采样算法对球体信息进行提取相对于全站仪打点运用最小二乘拟合球提取特征信息，稳定性更好，精度更高，对新型机场、高铁站等大跨度复杂建筑工程中具有很好的适用性。"
