"针对企业对铝合金板带产品几何尺寸精度要求的提高，本文提出了一种基于MATLAB优化工具箱的铝板带热粗轧机二次规划厚度分配优化方法，利用现场采集的数据对不同牌号的铝合金板带进行厚度分配仿真研究。通过与现场数据对比，结果表明该方法优于现场实际厚度分配效果，是一种较实用的在线厚度分配方法。 关键词 :二次规划，铝粗轧机，厚度分配，MATLAB"
"过程自动化系统的性能对铝合金产品的质量起着至关重要的作用[ 1 ] 。轧制规程计算是过程自动化系统的重要组成部分，并且厚度分配(又称负荷分配)是板带材轧制规程计算的核心部分，是轧制过程的关键环节[ 2 ] 。因此，寻求最优的厚度分配方案便可以提高过程自动化系统的性能。"
"二次规划是非线性规划中的一种特殊情形，由于二次规划算法比较简单便于求解，已成为求解非线性优化的一个重要方法。二次规划是指其目标函数为二次多项式而约束函数全部是线性函数的优化问题，标准的二次规划格式如下[ 3 ] ： 其中 ， 是对称阵。对 求导可以得到 在 处的一阶导数或梯度 ，将上式两边继续求导，可得 在 处的二阶导数或Hesse矩阵 。  轧制规程优化的目的是使轧制过程处于最优状态，保证设备合理使用，充分发挥轧机的性能并提高产品质量。因此，需要建立目标函数来实现铝板带热粗轧机轧制规程的优化。 由于通常情况下，轧制功率是板带入口厚度和出口厚度的函数[ 4 ] ，即 其中， ， 分别为第i道次板带入口、出口厚度。因此，通过优化各道次出口厚度可以使得轧制功率最小。各道次出口厚度的优化是在各道次出口厚度经验值的基础上，在较小的 邻域内进行优化。厚度经验值可由经验负荷分配法计算得出。 建立目标函数，首先需要把每个道次的出口厚度变化量合理的设置在目标函数 中。然后，才能利用二次规划算法对各道次出口厚度在小邻域内进行优化。为了以后计算方便，采用表示真正变形程度的对数应变。 式中 ， ， 分别为第 道次的对数应变(又称真正变形程度[ 5 ] )、入口厚度和出口厚度。将每个道次对数应变组合成矢量 ，即 式中 为引入的修正因子，以便于进一步调整达到设定的精度。  计算最优轧制规程，除了必须考虑提高产能、保证产品质量等因素外，还需要考虑轧机设备本身以及工艺方面的限制[ 6 ] 。根据铝板带热粗轧机的特点，通常需要考虑以下几个方面：最大(小)轧制力限制，最大轧制力矩限制，最大咬入角限制等。因此，我们根据设备和工艺限制条件，进行约束条件的设置。 等式约束条件 等式约束条件主要体现了所有道次总的真正变形程度的变化量。我们所期望的是各道次真正变形程度的总和，恰好等于所有道次预定的真正变形程度之和与据经验负荷分配方案得出的真正变形程度之和的差值。可用公式表示如下： 其中， 。 ， ， 。 上面公式中个变量的意义分别为： 为第1道次入口厚度； 为预定的最后道次出口厚度(即生产目标)； 为预定的总的变形程度。 不等式约束条件 不等式约束条件包含了最大/小轧制力限制，最大轧制力矩限制以及最大咬入角的限制。其矩阵形式可用公式表示如下： 首先，以最大轧制力限制为例，说明如何将上述限制设置到不等式约束条件中。显然，轧制力的允许变化量应小于最大轧制力限制值与实际轧制力的差值。可用公式表示如下： 其中， 。 ——第i道次轧制力的变化量； ——第i道次轧制力的灵敏度 ——第i道次最大轧制力的限制值 ——第i道次实际轧制力 同理，最大轧制力矩的限制也是同样设置。然而，最小轧制力限制条件的设置需要注意符号的变化。亦可用公式表示如下： 式中， ——第i道次最大轧制力的限制值。 对于最大咬入角的限制值设置稍有不同，其实质还是每个道次压下量的最大允许的变化量必须小于按最大咬入角计算的变化量与该道次实际压下变化量之差。咬入角相关各参数关系如图1所示。 图1. 咬入角参数设置示意图 可用公式表示如下： 式中 ——最大咬入角的限制值； ——粗轧机机架的工作辊表面半径。"
"在MATLAB优化工具箱中提供了求解二次规划算法的函数，求解二次规划的命令为quadprog，其完整的调用格式如下： [x,fval,exitflag,output,lambda]=quadprog(c,A,b,Aeq,beq,lb,ub,x0,options)。 各矩阵约束如果不存在，则应该用空矩阵[ ]来代替。最优化运算完成后，结果将在变量x中返回，最优化的目标函数将在变量fval中返回。exitflag为求解成功标志，若exitflag = 1表示求解成功，否则求解出现问题。  求解二次规划问题，程序采取“有效集”方法，将带约束的二次规划问题转化成无约束二次规划问题，并最终将问题转化成最小二乘问题，用QR (Quadratic Programming)分解的方法求解。在QP问题的有效集解法中，程序采用构造线性规划子问题的方法来获取问题的迭代初始解，并使用单纯形法求解[ 7 ] 。 文献[ 8 ] 中证明了QP问题有效集解法的收敛性。  调用MATLAB优化工具箱中二次规划优化函数进行负荷分配优化的具体操作步骤如下： 第一步：取得经验负荷分配方案，预设最大轧制力、最大轧制力矩以及最大咬入角的限制值； 第二步：设置Hasse矩阵 以及矢量 ； 第三步：根据约束条件公式，设置等式、不等式、边界约束条件； 第四步：调用quadprog()函数，求解x的最小值； 第五步：判断是否达到精度要求，如果满足，表明负荷分配成功；否则，跳到第二步再次计算，根据 值调整 以便于达到设定精度。"
"以国内某铝板带企业单机架可逆热粗轧机为研究对象。设备的实际参数和所选板带规格如下：粗轧机的工作辊尺寸： ；最大轧制力： ；最大轧制力矩： ；铝板带型号分别为：3104、5052、8079；其中，板坯初始化厚度分别为643.215 mm，641.48 mm，583.292 mm；中间坯厚度分别38.334 mm，26.20 mm，32.267 mm。 选用三种不同规格的铝合金材料，在入口厚度 和出口厚度 已知的情况下，可根据轧制参数的数学模型求出各个道次的负荷[ 9 ] ，对优化结果和现场实测数据进行对比，如图2、图3、图4所示，牌号3104和8079铝合金厚度分配方案略优于实际效果，牌号5052铝合金厚度分配方案接近于现场效果。 图2. 牌号3104铝合金厚度分配方案 图3. 牌号5052铝合金厚度分配方案 图4. 牌号8079铝合金厚度分配方案 通过对比分析可以得出，基于二次规划的负荷分配优化算法，收敛速度快，能在较短的时间内获得问题的最优解。是一种较为实用的铝板带粗轧机在线负荷分配方案，有利于提高企业的经济效益。"
