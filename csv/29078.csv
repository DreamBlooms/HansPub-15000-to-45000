"随着国家对纯电动汽车大力支持，纯电动汽车慢慢进入特殊行业里。地铁隧道施工，为了响应国家低噪音、环保作业，纯电动隧道牵引机车适应了这个特种行业的需求，是锂离子电池的最典型的应用实例。然而，在使用过程中依然需要对电池的性能进行实时监控，尤其对隧道牵引机车进行合理的定位，确保其运行安全，由此设计基于隧道机车的远程监控系统。本文着重介绍了隧道机车远程监控系统的设计思路、关键技术分析、构件交互方法以及具体实现手段。 关键词 :电动汽车远程监控系统，隧道定位技术，智能车载终端，锂离子电池信息采集和处理算法 Copyright © 2019 by author(s) and Hans Publishers Inc. This work is licensed under the Creative Commons Attribution International License (CC BY). http://creativecommons.org/licenses/by/4.0/"
"新能源行业中的电动汽车首先选用磷酸铁锂电池，其安全性和循环寿命保证了其使用条件及范围。特种行业里的纯电动隧道牵引机车延用电动汽车的相关技术，同时也依然存在锂电池组如何稳定运行，如何将故障率降为更低，如何在故障发生前预警这是需要人为去判断的一个问题，仅凭当前锂电池组管理系统是无法实现的，需要人为干预去分析锂电池组实时运营数据，实时状态等以达到故障预警效果。同样常规锂电池组仅能在故障发生时对电池组进行保护，或者在故障发生前对数据进行记录，这需要我们的工程师实时检测锂电池组管理系统实时工作状态，这就导致了人力物力的大量消耗。将在锂电池组运行信息采集及处理方面进行研究，首先通过本课题对纯电动隧道牵引机车电池组管理系统、整车相关信息进行采集，经过处理后先通过隧道内无线局域网传输到无线终端里，然后通过GPRS无线网络传送至监控中心服务器，由监控中心服务器完成信息存储及显示、报警。采集终端对锂电池组信息、整车信息进行可靠性分析，分析结果包括预警信息、故障报警信息等内容。其中，预警信息通过GPRS无线网络告之现场工程师锂离子电池组或整车可能存在运营风险，由现场工程师通过电话、短信等手段通知机车使用者可能存在的故障信息，并告知使用者应该作出何种判断或决策，以保证车辆的正常营运。无线局域网也提供了电动隧道牵引机车具体位置，可以更好的调度维保技术人员进行快速的提供服务 [ 1 ] [ 2 ]。随着此技术的成熟，可以更好的服务客户，创造价值。"
"本项目上位机系统主要采用C/S框架进行开发，服务中心应用程序主要采用JAVA [ 3 ] 进行开发，主要考虑JAVA在网络通信编程方面的优势；客户端应用程序主要采用.Net框架进行开发；数据库方面使用当前流行的oracle数据库，保证了数据存储的稳定性和效率。 图1是电动隧道牵引机车电池组远程监控系统网络架构图。 从组织和架构图一可以看出，整个系统架构分为以下几个部分： ①BMS(电池管理系统)：主要用来采集电池的数据信息和状态信息(主要包括，总电压，总电流，SOC等)及时上报给终端采集设备，传输方式通过CAN总线进行传输。同时还把电池组的相关信息发往CAN总线供终端采集设备等。 图1. 锂电池组远程监控系统网络架构图 ②终端采集设备：主要用来接收BMS上报的电池组的数据信息，以及故障信息同时把接收的数据包上报给GPRS模块然后通过无线传输给监控中心应用服务器，进行数据的解析以及存储 [ 4 ]。图2主要介绍了终端采集系统基本原理： ③应用服务器：主要用来接收终端采集设备上报的数据，应用服务器支持多个，目前应用服务器的标配是可以同时接收几千个GPRS模块上报的数据，应用服务器在接收数据时候必须具备延迟等待功能，必须等到一组数据包都接收完毕才开始解析存储数据。除此之外应用服务器还具备数据转发功能，把接收到数据分析后转发给实时显示客户端进行数据的实时显示 [ 5 ]。 ④数据库服务器：主要用来存储采集的数据信息，为后续数据挖掘做准备。 ⑤实时显示客户端：主要用来实时显示各个监控设备上报的设备信息以及故障状态，报警信息，地理位置等。 ⑥无线局域网输出传输及其定位：主要用来对隧道内相关BMS数据进行采集转发给采集终端设备，并定位机车在隧道里的位置。 ⑦远程终端配置软件：主要用来远程同步终端设备的基本配置信息 [ 6 ]。 ⑧本地终端配置和调试软件：主要用来本地同步终端设备的基本配置信息，然后把该信息通过RS232设置到相应的终端设备。同时增加了终端自动调试和维护功能，降低终端维修难度 [ 6 ]。 图2. 终端采集系统基本架构图  主要的技术路线为先通过隧道内无线局域网将数据传输到信息采集终端，信息包括锂离子电池组、位置信息及整车信息通过GPRS无线网络发送至监控中心服务器，且通过客户端单元对数据进行实时显示，显示内容包括电动汽车运行状态信息及预警、故障信息。监控中心服务器单元可通过电池组信息采集处理单元内的定位模块单元精准查出异常锂离子电池组地理位置，并第一时间进行处理。 1) 系统包括信息采集、数据分析、故障预警及告警、GPRS数据传输、远程定位、终端数据备份、数据显示及存储等功能 [ 7 ]。 2) 信息采集终端预留CAN/RS232/RS485总线以兼容不同接口的管理系统 [ 6 ]。 3) 信息采集终端对所采集的机车信息包括锂离子电池组及整车信息经过分析后将故障预警及告警信息通过无线局域网发送至监控中心服务器，为减少数据传输量，正常数据为定时发送。 4) 通过客户端单元对数据进行实时显示，显示内容包括电动汽车运行状态信息及预警、故障信息，并实时存储。 5) 监控中心服务器单元可通过电池组信息采集处理单元内的GPS模块单元精准查出异常锂电池组地理位置，并第一时间进行处理。  在系统设计时需要遵循一定的设计原则。 1) 先进性与实用性相结合 系统的设计应达到先进的水平，而系统中的具体设备选型则应该以技术成熟和性能可靠为标准。同时要最大限度的利用现有的环境、设备、通信和管理体制的资源。 2) 通用性和安全性相结合 在系统设计中，既要考虑系统的通用性，又要充分考虑系统的安全性，使其免受外来入侵和破坏。 3) 可靠性和可操作性 系统的设计应保证运行的稳定性和使用的方便性。 4) 高性能和可扩展性 系统的设计和实现技术应该尽量挖掘系统硬件资源的能力，在尽量降低硬件成本的基础上获得很好的服务性能。并且，系统的设计必须满足系统的服务容量和多级服务模式的扩展。 5) 模块化设计方式 系统的软硬件均采用模块化设计，尽量做到系统软硬件的通用性，以方便系统扩展和技术维护。"
"监控车载终端目的是对电池组运行状态进行监控，然后从电池管理系统中获取电池组信息，因此需与电池管理系统通讯，本监控车载终端提供CAN和RS232两种通讯方式与电池管理系统进行信息交互，使用ZigBee模块组成隧道内局域网，把相关数据传输到采集终端。使用GPRS网络与服务器进行信息交互，车辆位置信息通过ZigBee模块局域网获取。怎样准确的获取电池管理系统的信息和及时把数据发布到数据库是研究的重点。使用了汽车级的通讯总线CAN和UDP无线传输模式可以提供信息传输的精准度和速率 [ 6 ]。  隧道内数据传输及其定位选用基于CC2530 (2.4 GHz无线SOC)的Zigbee定位系统。其优越的性能，出众的性价比，在物联网领域具有出众的竞争优势！该系统运用先进的微功耗技术、RSSI信号强度检测技术、射频感知技术，内嵌集成独有的实时定位算法，采用高增益、抗干扰射频电路设计而成，可连续上电运行，满足工业等恶劣使用环境的功能要求。适用于各种场景下的定位解决方案。该系统模块采用高密度小体积SMD表面贴装，具有微功耗、小型化、远距离发射/接收的特点，满足各类典型定位应用场景需求。  监控车载终端从BMS中获取到电池信息后，将对这些信息进行分析，得出初步的电池健康状态，供监控人员做进一步判断。其中电池一致性为电池健康状态的重要指标，电池组一致性优劣直接表现在该组电池的压差大小上。本系统设计将对电池组压差进行静态和动态两种判断。这样可以综合、合理判断电池组的状态。  线程是系统分配处理器时间资源的基本单元，或者说进程之内独立执行的一个单元。对于操作系统而言，其调度单元是线程。一个进程至少包括一个线程，通常将该线程称为主线程。一个进程从主线程的执行开始进而创建一个或多个附加线程，就是所谓基于多线程的多任务。本系统采用了多线程技术，充分利用了CPU的空闲时间片，用尽可能少的时间来对用户的要求做出响应，使得进程的整体运行效率得到较大提高，同时增强了应用程序的灵活性。更为重要的是，由于同一进程的所有线程是共享同一内存，所以不需要特殊的数据传送机制，不需要建立共享存储区或共享文件，从而使得不同任务之间的协调操作与运行、数据的交互、资源的分配等问题更加易于解决。  本系统采用三层架构(3-tier application)来处理整个业务应用，将整个业务应用划分为：表现层(UI)、业务逻辑层(BLL)和数据访问层(DAL)三层。区分层次的目的即为了“高内聚，低耦合”的思想。图3介绍了三层架构的原理 [ 5 ]。 图3. 三层架构的原理"
"本地客户端主要设计思路和实现方法见图4、图5、图6： ①单套/多套系统实时数据显示，单套/多套系统报警显示，单套/多套系统故障报警显示，客户端带声音报警。 ②基本数据的配置：单位管理，区域管理(区域基本信息配置)，区域故障报警门限配置(设置区域的故障警级别)，终端采集设备配置(基本信息的配置，以及参数的配置，配置过滤ID，设备编号，以及心跳时长)车辆的配置，配置车辆的基本信息。 ③综合查询：单套/多套检测系统历史数据查询(可查询某个区域，某量车的历史数据)查询条件：区域，号牌号码，最高电压大于多少，总电压大于多少，剩余电量大于多少，时间段等条件，单套/多套系统历史故障信息查询，单套/多套系统在线不在线情况查询，单套/多套系统异常报警，消警情况查询数据交换单套/多套检测历史数据的导出，单套/多套系统历史故障信息导出，单套/多套系统在线不在线情况导出。如图7所示。 ④报表统计：单套/多套系统历史数据报表，单套/多套系统历史故障报表，单套/多套系统在线离线数据报表(报表分年报，月，周，日)，单套/多套系统在线，离线情况统计，单套/多套系统，故障率统计，单套/多套系统，电压，电流趋势图分析统计也按年，月，周，日，并生成统计图，折线图)。 ⑤系统管理：用户管理，角色管理，数据词典管理，参数配置管理，系统日志管理等。 这些本地客户端软件功能，最大限度的实现了电动汽车远程监控的功能，满足了实时监控电动汽车要求，并进行故障的预警、分析、处理等。同时实现了配置过滤数据ID名称、过滤ID数量，配置设备编号及通讯心跳时长，已配置过滤ID内容检测，读取已存储ID数量内容，具备数据同步获取功能，从中心服务器获取配置数据。等等以上远程配置功能。  系统的服务器细分为应用服务器和数据服务器。设计思路和实现方法均从应用服务器和数据服务器 图4. 本地客户端的实现 图5. 实时电流的图表 图6. 电动汽车信息表 图7. 综合查询的实现方法 中继承下来的。重点叙述应用服务器和数据服务器的实现过程。 图8是应用服务器主要功能： 图8. 应用服务器主要功能 主要用来接收终端采集设备上报的数据，应用服务器支持接收多个终端同时上报的数据。但是应用服务器在接收终端采集设备上报的数据时候必须具备延迟等待功能，必须等到一组数据包都接收完毕才开始解析存储数据。除此之外应用服务器还具备数据转发功能，把接收到数据分析后转发给实时显示客户端进行数据的实时显示。应用服务器还具备告警、数据比对等功能。比如服务器端接收到单包异常数据采用抛弃处理，同时记录异常次数，连续接收单套系统三次及以上异常需一级报警，连续接收单套系统十次以上异常需二级报警，连续接收三次以上正常数据，报警自动解除，需保证系统稳定工作；配置了大电流告警一级门限等参数，如果数据进行比对后，大于此门限就是一级告警等。 数据库服务器中数据处理流程，一般如图9所示： 图9. 数据处理方法 主要用来存储采集的数据信息，为后续数据挖掘做准备。对历史数据的永久保存，用户需求数据能永久存储6年 [ 5 ]。 在应用服务器和数据服务器中，系统管理的设计方法和实现是需要重视的。服务器稳定因素一般分为内部和外部。服务器的内部稳定是由软件工程师自我的编程素养决定的，同时离开不了反复的测试。然而服务器的外部稳定，是由网络环境决定的。相关资料表明，数据安全和稳定已经是开发者首先要面对的问题，其价值远远大于开发的产品。图10简单介绍了系统管理的方法： 图10. 应用服务器的系统管理 系统管理中各个模块均权限和访问的管理，和本地客户端一起有效的控制了数据的输出和处理 [ 8 ]。  使用ZigBee实现隧道内的数据传输和定位。ZigBee是基于IEEE802.15.4标准的低功耗局域网协议。ZigBee技术是一种短距离、低功耗的无线通信技术。其特点是近距离、低复杂度、自组织、低功耗、低数据速率。简而言之，ZigBee就是一种便宜的，低功耗的近距离无线组网通讯技术。通过ZigBee实现GPRS无线盲区里的数据传输，把机车的相关电池组、整车等相关信息，在ZigBee局域网的情况下，将数据传输到无线数据采集终端里(GPRS终端)，从而通过网络发送到服务器里进行相关数据处理。同样，为了解决隧道内机车定位问题，在ZigBee局域网基础上，在其通信协议栈和算法处理后可实现性价比极高的标签定位系统。定位精度可达3 m，局部地区精度1 m，完全满足纯电动隧道机车在隧道里的定位要求，实现客户定制化需求 [ 9 ]。图11示例为在某隧道ZigBee局域网布点里，动态ZigBee点的轨迹图。 图11. 动态ZigBee点的轨迹  总结电动汽车远程监控系统的设计思路，概况出此系统的主要技术指标： 1、实现对在运用电动汽车包括电动大巴及电动轿车的营运、状态数据监控，在故障发生前作出响应及处理，保证电动汽车的安全营运。 2、监控中心服务器一台最少能监控几千台采集终端所发送信息，并且保证7*24小时工作。 3、监控中心服务器数据自动备份及保存，要求数据保存不小于5年。 4、采集终端装车运行，寿命不小于5年。 5、采集终端采样频率小于100 ms，传输丢包率小于0.5%。 6、系统电磁兼容性符合国标要求。 7、GPRS模块必须能够可靠稳定运行，具备重连机制保证数据稳定传输。 8、系统必须具备，断开连接，自动重连功能保证通讯链路一直处于畅通状态，各个模块必须具备日志记录功能，能准确定位到模块中的异常未知。 9、对于精确查询，查询响应时间 ≤ 3秒。对于模糊查询，前端匹配与后匹配响应时间 ≤ 10秒，中间匹配响应时间 ≤ 30秒。 10、实时显示客户端接入容量。能同时满足20~30个实时显示客户端同时接入，显示数据。 11、系统界面人性化，操作简单、方便。 依据技术指标和设计思路，以及结合上文的实现方法，进行电动汽车远程监控系统的开发和运用。"
"基于隧道机车远程监控系统，用户终端7*24 H在线，自动发送现场工况实时数据，而且又能及时响应中心计算机的查询、控制指令。中心计算机配备网络数据库和强大数据处理软件，实现了广域网数据共享和主要领导移动办公。它克服了机车在售后存在的缺点，集所有优点于一体，是现在最先进的无线远程纯电动机车监控系统。该方案实现了对电动汽车单体电芯的电压、电流、温度等参数的集中监视、控制，可以大量的减少维护人员，提高企业的经济效益。传统上依靠人工定期到现场维护电动汽车，数据实时性、准确性和应用性等方面都有很大不足，人工成本也比较高。现代通信技术的飞速发展为满足上述技术要求提供了多种选择。选择合理的通信方式既要考虑数据传输的实时可靠性，又要考虑远程监控系统通信网络构建的经济性。系统中通信数据主要有两类：一类是周期性的召测数据；另一类是突发性的数据，如终端的报警信息。通过zigbee技术，将GPRS信号无法涉及的空间，将实时数据及其相关定位信息传输到采集终端，实现数据的盲区解决方案。与该系统均满足了以上设计要求。"
