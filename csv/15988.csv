"本文给出了七巧板凸多边形的完全几何不变量系统，并以此建立了相应的方程组以及约束条件, 从而给出了七巧板凸多边形计数问题的一个一般解决方案。 关键词 :七巧板，凸多边形，几何不变量"
"无论解析几何的内容和对象如何变化，其方法的精髓是确定的。从笛卡尔和费马开始，“数形结合”的主要目的之一，就在于有效地、一般化地、程序化地处理“形”的问题。本文给出了七巧板凸多边形计数问题的一个一般解决方案。其中可见，相应的几何不变量不仅仅在几何与代数的语言转换方面有显而易见的作用，也可以在代数演绎期间用以引导运算的方向。 本文中的七巧板凸多边形是指由有限副七巧板的部分或全部拼块所拼成的凸多边形。 如何确定一副七巧板的全部七个拼块所构建成的七巧板凸多边形的个数，1942年王福春和熊全治[ 1 ] 的经典之作已经提供了基本思路；2011年可见其汉译本[ 2 ] 。该文之中所提出的观察和分类过程，可以作为利用解析化方法有效处理几何问题的典范。其中，看似杂乱无章或无法言明的一些表象，被以比较直观的方式梳理得脉络清晰；在以解析化方式处理问题的整个过程中，相关的一些几何不变量和几何性质指引着相关代数运算的方向。由于该文行文简略，尚存在若干细节留给读者斟酌；有些需要在逻辑上进一步严格化，有些则需要进一步明确相关运算的几何内涵。在这两类细节上，本文也将提供一些具体修正和评注。 本文首先将七巧板凸多边形的解析表示进行一般化，借助于其几何不变量来确定基本拼接规则，并调整了建立这些规则的逻辑顺序。其次，注意到其完全几何不变量系统的构成方式，将问题归结于求解所指定的不定方程组在相应约束条件下的非负整数解。进而，对应构造出程序性算法，用以确定其完全几何不变量系统的全部取值，并使得所用算法的适用对象得以自然推广。最后，对于直接利用多边形形状而进行分类的其他操作过程[ 3 ] ，给予了相应的解析。"
"观察到七巧板七个拼块的几何结构的共性，在文[ 1 ] 之中将它们划分成16块互相全等的等腰直角三角形作为更基本的标准构件，如图1所示；为简便起见，下文中简称其中每一块为一个基三角形。本文沿用文[ 1 ] 之中的称呼，称基三角形的直角边为有理边，称斜边为无理边；并总取有理边的边长为单位长1，则无理边的边长是无理数 。此时，七巧板每个拼块的相应边长都分别确定，或者是正整数1或2，或者是 的1倍或2倍；相应面积也都确定，分别是1/2的正整数倍；七块的面积总和为8。同时，作为特殊的凸多边形，每个拼块的各个内、外角都分别是p/4的1倍或2倍或3倍。以上各个具体数值，需要时是易知的。 上述划分和观察提供了良好的标准化基础，使得后续讨论能够一致进行，也使得以后能够改动关于拼块数量的限制而将相应问题和结果推广。 定义2.1：由有限块基三角形作为拼块所能拼合成的凸多边形称为备选凸多边形，拼合所用基三角形的块数称为该备选凸多边形的阶数。 事实上，在文[ 1 ] 之中，首先考虑的是确定16阶备选凸多边形全体，共计20种；再在其中排除7种不能用七巧板拼块拼成的凸多边形，从而找到其中所有能用七巧板拼块拼成的凸多边形共计13种。 只要注意到任何凸多边形的外角和都是确定的2p = (p/4) ´ 8，易知文[ 1 ] 之中的引理3成立，并且可以自然推广为下列引理。 引理2.2：任一备选凸多边形，其边数不可能超过8。 证明：对于任一备选凸n边形，注意到它的每个外角只能取值为p/4的1或2或3倍，从而其外角和2p ³ (p/4)n，故结论成立。 注记2.3：文 [ 2 ] 的引理3、引理4译文欠妥，容易引起所讨论对象在层次上的混淆。图2所示的是一个14阶备选凸八边形；后文算法可确定16阶备选凸八边形不存在，所以由一副七巧板不能拼合出凸八边形。 注记2.4：多边形的有向外角之和恒定，而有向内角之和与边数有关；具有不变性的性质往往具有更深刻的本质，更值得加以注意。 为了进一步考虑文[ 1 ] 或 [ 2 ] 之中的引理4、引理2和引理1如何确保成立并适当予以推广，下面引入虚拟八边形表示的概念，用以统一表示所有备选凸多边形，其中自然包含了七巧板凸多边形。 定义2.4：对于正整数 ，如果某个凸n边形的n个顶点在可重复意义下按边界正向顺序标记为8个顶点P i ， ，其中约定P 0 = P 8 ，P 1 = P 9 ，使得按顺序所得的位置差向量P i - 1 P i 到P i P i + 1 的正向外角为p/4，则称该凸n边形具有虚拟八边形表示P 1 P 2 P 3 P 4 P 5 P 6 P 7 P 8 。 参见图3。本质上，对于具有虚拟八边形表示的某个凸多边形而言，每一个外角为kp/4的顶点都被表示成了k个重复标记的顶点，其中k = 1, 2, 3；这k个顶点之间的广义边长取值为0，而不重合的两个相邻顶点之间的边长非零。故由引理2.2及其证明过程得知下列推论。 图1. 七形 图2. 14阶备选凸八边形 图3. 虚拟八边形各边方向向量分布示意 推论2.5：任一备选凸多边形都具有上述虚拟八边形表示。 至此，对于七巧板凸多边形而言，如何确定对应的虚拟八边形表示并对该种表示加以有效分类，将决定相关问题是否能够沿此路径得以解决，同时决定是否将使该种解法具有一般性。 注意，虚拟八边形P 1 P 2 P 3 P 4 P 5 P 6 P 7 P 8 所具有的完全的几何不变量系统可以由相邻虚拟顶点P i 与P i + 1 之间的(广义)边长来确定；这些边长按顺序形成8元有序数组(P 1 P 2 , P 2 P 3 , P 3 P 4 , P 4 P 5 , P 5 P 6 , P 6 P 7 , P 7 P 8 ,P 8 P 1 )。该8元数组在位置轮换意义下等价，相当于在旋转变换下凸多边形边长对应相等；在完全倒序意义下也等价，相当于在轴反射变换下凸多边形边长对应相等。因此，下面将对备选凸多边形进行进一步观察，发现其所对应的虚拟八边形8元有序数组的进一步性质，并加以适当分类。"
"对应于文 [ 1 ] 或 [ 2 ] 之中的引理4和定理的证明过程，将其所采用的技巧进行一般化，将给出推广了的相应引理及其严格证明。下列引理是显然的，可参考图3。 引理3.1：对任意一个备选凸多边形及其虚拟八边形P 1 P 2 P 3 P 4 P 5 P 6 P 7 P 8 ，存在两个外接矩形M 1 M 3 M 5 M 7 和M 2 M 4 M 6 M 8 ，其中一个矩形的边与另一个矩形的边恰都相夹p/4角，使得虚拟八边形的8条边(或蜕化的顶点)分为两组{P 1 P 2 ，P 3 P 4 ，P 5 P 6 ，P 7 P 8 }和{P 2 P 3 ，P 4 P 5 ，P 6 P 7 ，P 8 P 1 }，其中每一组分别落在这两个矩形的边之上。 证明：给定备选凸多边形及其虚拟八边形P 1 P 2 P 3 P 4 P 5 P 6 P 7 P 8 ，不妨设边P 1 P 2 的长度非零，则可作该凸多边形的外接矩形M 1 M 3 M 5 M 7 使边P 1 P 2 落在M 1 M 3 之上。此时，注意到虚拟八边形的虚拟相邻边向量的每个夹角都为p/4，可使边(或蜕化的顶点) P 5 P 6 同时落在该矩形的平行边M 5 M 7 之上，可使其边(或蜕化的顶点) P 3 P 4 和P 7 P 8 分别同时落在该矩形的垂直边M 3 M 5 和M 7 M 1 之上。此时，进一步作该凸多边形的外接矩形M 2 M 4 M 6 M 8 使各边与矩形M 1 M 3 M 5 M 7 各边都相夹p/4角，则同理由虚拟八边形的定义可知{P 2 P 3 ，P 4 P 5 ，P 6 P 7 ，P 8 P 1 }相应落在矩形M 2 M 4 M 6 M 8 的四条边之上，从而结论得证。 定义3.2：称引理3.1中的两个矩形为相应备选凸多边形及其虚拟八边形的伴随矩形。 如图4所例示的凸七边形，其虚拟八边形具有一组重复标记的顶点P 7 = P 8 ，此时的M 8 也与该顶点重合。 备选凸多边形按引理3.1中所指定的方式分别内接于其两个伴随矩形之中。图5例示了一个备选凸五边形及其虚拟八边形的伴随矩形。该五边形最短边长为 时，对应虚拟八边形所具有的8元有序数组具有等价类代表 ，该组数在相差位置轮换意义下唯一，几何意义是对应边长按逆时针方向顺序计数；它与 所表示的备选凸五边形在轴反射意义下对应等价。此时，相应的两个伴随矩形分别具有边长组{5,3}和 。 至此，文 [ 1 ] 之中的引理4可以自然推广为下列引理。 引理3.3：备选凸多边形能够如此内接在其伴随矩形上，使得它落在一个伴随矩形上的边(或顶点)同是有理边(或相应蜕化的顶点)，而落在另一个伴随矩形上的边(或顶点)同是无理边(或相应蜕化的顶点)。 证明：由推论2.5和引理3.1，可设m阶备选凸n边形C m 具有虚拟八边形P 1 P 2 P 3 P 4 P 5 P 6 P 7 P 8 ，mÎN + ，其中{P 1 P 2 ，P 3 P 4 ，P 5 P 6 ，P 7 P 8 }依次落在伴随矩形M 1 M 3 M 5 M 7 的对应边上，同时{P 2 P 3 ，P 4 P 5 ，P 6 P 7 ，P 8 P 1 }依次落在伴随矩形M 2 M 4 M 6 M 8 的对应边上；参见图4。 下面将从两个角度分别考察C m 的面积值S m 的取值状况，借以发现8元有序数组(P 1 P 2 , P 2 P 3 , P 3 P 4 , P 4 P 5 , P 5 P 6 , P 6 P 7 , P 7 P 8 ,P 8 P 1 )的取值特征。 首先，作为m阶备选凸n边形，C m 面积值等于m块基三角形面积之和，即 (1) 图4. 备选凸七边形及其伴随矩形各边的对应示意 图5. 备选凸五边形及其伴随矩形示意 其次，由于C m 是由有限块基三角形所拼成的，其各个边都是由有限个有理边和有限个无理边拼接构成的，故可设其各个边长分别为： (2) 其中沿用约定P 0 =P 8 , P 1 =P 9 . 又记两个伴随矩形的边长分别为： (3) (4) 注意到等腰直角三角形斜边长与直角边长的关系，(3)~(4)式即可写为： (5) 其中各种变量按字母下标模8相等表示同一字符。因此可以取定有理数组： (6) (7) 于是，由伴随矩形扣除四个角部的等腰直角三角形来计算C m 面积，则对于全部的指标i都有 (8) 其中，注意到(1)式，可知无理数 的系数必为零，从而其4倍有下列利用(6)~(7)式的整理变形(变形过程中考虑到了各边在几何上的对称性以及在最终代数表达式中的对称性) 此时注意到(2)式之中所限定的整数组a i , b i 的取值非负范围，可知右端和式中的每一项都取得非负值，因而左端为0表明右端的每一项都只能为零。即得下列方程组： (9) 现在考虑方程组(9)在(7)式限制下的非负整数解，其中16个变量不能全都为零，否则(8)与(1)式将矛盾。 现若a 1 ¹ 0，则方程组(9)第一组式子蕴含着： 此时，(7)式蕴含着b 1 = b 5 ，结合上式并代回方程组(9)第二组式子则可得到： 于是，若再进一步有b 1 ¹ 0，则意味着： 从而 即顶点P 2 与P 3 、P 4 、P 5 重合，此处外角不小于p，与P 2 P 3 、P 3 P 4 、P 4 P 5 作为C m 的虚拟八边形三个邻边相矛盾！因此，若a 1 ¹ 0，则必有： 此条件下可直接验证方程组(9)各式都被满足，因而是方程组(9)在条件a 1 ¹ 0下的通解。此时8元有序数组： (10) 同理，若a 3 ¹ 0或a 5 ¹ 0或a 7 ¹ 0，则仍有(10)式成立；若a 2 ¹ 0或a 4 ¹ 0或a 6 ¹ 0或a 8 ¹ 0，则有： (11) 现若b 1 ¹ 0，则方程组(9)第二组式子蕴含着 并且由上面讨论过程得知必有a 1 = 0，此时(7)式蕴含着b 6 = a 5 = 0，以及进一步的b 4 = b 8 = 0，即仍有(11)式成立。同理，若b 3 ¹ 0或b 5 ¹ 0或b 7 ¹ 0，则仍有(11)式成立；若b 2 ¹ 0 或b 4 ¹ 0 或b 6 ¹ 0或b 8 ¹ 0，则仍有(10)式成立。 综合以上讨论可知，或者(10)式成立、或者(11)式成立；这说明C m 落在它的一个伴随矩形上的边或顶点同是有理边或相应蜕化的顶点；同时，落在它的另一个伴随矩形上的边或顶点同是无理边或相应蜕化的顶点，即结论成立。 注记3.4：在上述讨论过程中，关于 的方程组(6)式蕴含在方程组(7)式之中，没有给解的性质增加新的信息。 注记3.5：在顺序调整顶点下标标号的意义下，(10)式和(11)式是一致的，体现的是对应的虚拟八边形(广义)边长8元有序数组的轮换。 现在，文 [ 1 ] 之中的引理2可以自然推广为下列引理。 引理3.6：对于任一备选凸多边形，任意取定它的一条边，则该边或是由有限个基三角形的有理边所拼接而成，或是由有限个基三角形的无理边所拼接而成。并且，在备选凸多边形的各个顶点处，当外角为p/4或3p/4时，两条边一者为有理边所拼成、一者为无理边所拼成；当外角为p/2时，两条边或同为有理边所拼成、或同为无理边所拼成。 证明：只要注意到无理数与有理数之间不可能存在整数倍的关系，由引理3.3及其证明过程即得结论。 注意，文 [ 1 ] 之中的引理1的证明方法，对于16块基三角形的拼合而言，缺乏清晰的情形分类；对于只有7个拼块的七巧板而言，还是可以适用的。在此可对应修改为下列引理。 引理3.7：任一备选凸多边形一定能够如此拼合而成，使得每两个基三角形之间拼接时，或是沿完整有理边相接、或是沿完整无理边相接。 证明：不妨设所拼成的凸多边形对应有虚拟八边形满足(11)式，则沿着边长为无理数的4条边分别相应去除a 2 ，a 4 ，a 6 ，a 8 个基三角形，所余图形可以划分为有限个单位正方形小块；其中两个单位正方形小块之间总以相互完整单位边拼接，而每个单位正方形又可分割成沿无理边拼接的两个基三角形。易见，上述分割成的所有基三角形之间都是或沿完整有理边相接、或沿完整无理边相接的，证毕。 注记3.8：引理3.7说明，为了用有限个基三角形拼成凸多边形，拼接过程中只需要将任意两个基三角形或在有理边之间整边相接、或在无理边之间整边相接即可。换个角度去看，对于为了解决备选凸多边形分类问题的目标而言，如果不按这样的规则去拼接的话是否最后也能够拼合成某个凸多边形，就可以不予考虑了。 引理3.9：满足(6)~(7)式并以(11)式或(10)式顺序给定(广义)边长的虚拟八边形，都表示了一个对应的备选凸多边形。 证明：由引理3.7证明过程，结合引理3.3证明过程，可知结论成立。"
"定理4.1：取定m Î N + 。设m阶备选凸n边形具有虚拟八边形P 1 P 2 P 3 P 4 P 5 P 6 P 7 P 8 ，使(11)式成立。则变量8元组 的取值范围确定为方程组： (12) 在限制条件： (13) 之下的解全体。对应伴随矩形的边长分别确定为 和 ，其中： (14) (15) 证明：沿用引理3.3中的记号，在成立(11)式时，(6)~(7)式进一步简化为 以及(14)~(15)式，其中(14)式之中关于变元 的关系蕴含于(15)式之中。此时，将(1)式代入(8)式可简化为两种等价形式： (16) (17) 将(15)~(16)联立即得方程组(12)。反之，当非负整数组 是方程组(12)的解时，对应可直接验证(1)~(8)式都被满足，由引理3.9可知，其确实表示了某个m阶备选凸多边形。同时，m块基三角形所具有的有理边总数为2 m，无理边总数为m；这两个数值自然分别成为m阶备选凸n边形各条边上的基三角形有理边总数和无理边总数的上界，故结论成立。 注记4.2：上述面积公式有不同的等价表示，比如其中(16)式即为： (18) 注记4.3：方程组(12)的非负整数解按等价类与m阶备选凸多边形一一对应，等价关系可表示为： (19) (20) 几何意义分别对应于m阶备选凸多边形在平面的旋转变换和轴反射变换下对应全等。 定理4.1和注记4.3已经将几何问题转化为在所指定的有限范围内的非负整数解的求解和进一步甄别问题，使之具备利用人工技巧或者机械化枚举以寻求后续解决方案的良好基础，因而构成了该问题处理过程中的重要一环。在上述每个等价类中选取代表元时，可选择一些满足相应限制条件的解，以减少人工或者机械化求解的计算量。比如在文 [ 1 ] 之中，实质上是对于m = 16分别考虑了三种子情形而获得方程组(16)联立(15)的非负解共计20种等价类；分别为情形a: y 1 < y 3 且y 3 > 5 时，和情形b: y 1 = y 3 时，和情形c:y 1 < y 3 £ 5时。情形a和b是利用不等式估计技巧而获解，情形c是枚举推断(y 1 , y 3 )以及(a 2 , a 4 , a 6 , a 8 )的非负取值而获解。 一般地，关于备选凸多边形周长结构的估计有更为精细的结果。 引理4.4：在定理4.1的条件下有： (21) 证明：注意到引理3.6和3.7，考察所讨论的虚拟八边形的4条由有理边所构成的边，之上共计分布有 个基三角形，其中最多有4个是可能重复计数的。于是 ；化简既得结论。 推论4.5：取定mÎN + .设m阶备选凸n边形具有虚拟八边形P 1 P 2 P 3 P 4 P 5 P 6 P 7 P 8 ，使(11)式成立。则在等价关系(19)和(20)之下，变量6元组 的代表元选取范围可为 (22) 证明：由(12)~(16)式及其讨论过程，注意到引理4.4，将(12)式中b 5 ，b 7 的表达式代入(21)式之中并化简，即得(22)第2组第2式的限制条件。而作为伴随矩形的边长，得知y 1 > 0，y 3 > 0，x 2 > 0，x 4 > 0。同时，注意到凸性，四个广义梯形P 1 P 2 P 5 P 6 ，P 3 P 4 P 7 P 8 ，P 2 P 3 P 6 P 7 ，P 4 P 5 P 8 P 1 都分别包含在虚拟八边形P 1 P 2 P 3 P 4 P 5 P 6 P 7 P 8 之中，故其面积都分别不超过m/2 ，化简即得(22)第7~8式。 基于该推论的机械化求解程序是不难编制的。通过计算机的快速演算，可以获得指定阶数的备选凸多边形的各个相关数据，包括8条广义边长、4条伴随矩形的边长、边数等等。例如，当m = 1600即100副七巧板时，备选凸多边形的等价类个数为10,057。表1列出了阶数不超过32的备选凸多边形的等价类个数。"
"由于七巧板各个拼块的边长和面积限制不同，一个备选凸多边形能否由七巧板的若干拼块接合而成尚需进一步检验。 显然，七巧板各个拼块中面积最大的两块都具有直角边长2和斜边长 ，如果用以构建出备选凸多边形，则对应伴随矩形的边长分别必须满足： Table 1 m 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 个数 1 3 2 6 3 7 5 11 5 10 7 14 7 16 11 20 m 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 个数 9 17 13 22 12 25 18 27 14 24 20 31 18 36 26 37 表1. m阶备选凸多边形等价类个数例示 (23) 同时，七巧板所有拼块的边长总和为 ，对应备选凸n边形各条边上的基三角形有理边总数和无理边总数的上界即分别为20和10。因此，文 [ 1 ] 之中所考虑的完整七巧板所能构成的凸多边形只需在更强的条件下筛选即可，故推论4.5可改进如下。 推论5.1：设完整七巧板所能构成的凸n边形具有虚拟八边形P 1 P 2 P 3 P 4 P 5 P 6 P 7 P 8 ，使(11)式成立。则在等价关系(19)和(20)之下，变量组代表元可选取的范围为 (24) 按此推论筛选，全副七巧板所能构成的凸n边形的虚拟八边形的等价类仅具有16种可能，其中13种可实证拼成；而有3种尚需进一步排除，参见表2和表3。董 [ 3 ] 文采用直接利用多边形形状而按拼接规则(未予以严格证明)进行分类的办法，同样得到13种能用一副七巧板各块重组而拼成的凸多边形。该办法的解析化实质，就相当于在等价关系(19)和(20)之下求解(12)时，讨论当其中若干变量取零值时其他变量可如何确定。 利用一副七巧板或其一部分拼块所能拼成的凸多边形有多少种，郝四柱 [ 4 ] 曾探究该问题；其中，一级子类的划分方式与董 [ 3 ] 文类似。经过分类并“演示”后，他指出这些凸多边形在全等意义下共计有93种。实际上，考虑到当阶数m ³ 9时就会产生限制(23)，当阶数m ³ 5时就会产生限制y 1 ³ 1，y 3 ³ 1和x 2 ³ 0.5，x 4 ³ 0.5；利用上述寻求等价类代表元同样的办法，可程序性地在相应限制下预选出1至16阶 Table 2 m 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 个数 1 3 2 6 2 6 4 10 3 6 5 10 5 12 9 16 表2. 七巧板凸多边形个数上界 Table 3 m y 1 y 3 x 2 x 4 b 1 a 2 b 3 a 4 b 5 a 6 b 7 a 8 13 3 3 1.5 3 1 0 2 1 2 0 1 2 14 3 3 2 2 1 1 1 1 1 1 1 1 15 3 4 1.5 3 1 0 2 2 0 1 1 2 15 4 5 1 4.5 0 0 2 3 1 0 1 4 16 5 5 1 5 0 0 2 3 2 0 0 5 16 4 6 1 5 0 0 2 4 0 0 2 4 16 5 5 1 4 0 1 0 4 0 1 0 4 表3. 7种非七巧板凸多边形数据列示 备选多边形之中的100种，以之作为可拼成的凸多边形的实际检验对象，对应有表2。此时的个数上界与表1对比，相应的差异是有规律的，并且可以在几何直观上予以解释；所去除的只是若干“窄条”，可以根据(12)~(15)式严格证明。在上述100种预选对象中，有93种凸多边形可分别实证确实能够用一副七巧板或其一部分拼块来拼成(数据和图形略)；而另外7种却不能，所对应的部分数据如表3所示(图形略)。可见，不能拼成的理由由拼接规则、拼块结构及相应的几何不变量可以给出。 至此可见，七巧板凸多边形的分类问题采用上述解析化方法加以解决是具有一般性的。当相应问题推广到有限副七巧板或其一部分拼块的情形时，该方法自然可以适用；这体现出解析法的深层意义。在该解析方法建立过程之中，对于几何不变量的相应考察是不可或缺的。 注记5.2：当(23)式成立并且阶数m较高之时，预选范围(22)式之中的周长结构限制条件完全可以进一步强化，比如利用类似于引理4.4的计数可得到 。一般地，最小的无理边数 取值范围也可缩小，比如它具有上界 ，这里[x]指x的整数部分。 注记5.3：上述解析化方法将不变量系统中的角度状况对应转化为虚拟边长取值状况，适用于更一般的场合。"
"附录1. 100种预选对象数据表，其中标星号者将确认不是一副七巧板或其部分所能拼成的凸多边形 附录2. 100种预选对象所对应的凸多边形及其拼接实证图示"
