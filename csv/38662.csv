"本文主要讨论完全和部分可观察模糊离散事件系统的状态反馈控制。首先，给出了模糊谓词可观察的定义，并证明了对于预先给定的模糊谓词存在合理的控制器使得闭环系统的可达模糊谓词等于所给定模糊谓词的充要条件是给定模糊谓词可控且可观察；其次，在一定条件下，将部分可观察模糊离散事件系统转化为完全可观察模糊离散事件系统，并讨论了模糊谓词在两类系统之间的控制不变性和可控性。"
"离散事件系统(discrete event systems简记为DES)的控制理论首先由Ramadge和Wonham [ 1 ] [ 2 ] 提出，在该理论中DES以自动机为模型，并且将系统的控制分为事件反馈控制和状态反馈控制，DES的状态反馈控制是通过状态反馈控制器来控制系统的。在DES的状态反馈控制中，我们并非直接观察系统的状态，而是通过一个输出映射将状态集映射为一个符号集来观察相应的输出符号。如果每一个状态都有一个对应的互不相同的输出符号，我们便称这类系统为完全可观察DES；如果系统中的状态只有部分状态通过输出映射可以被观察到相应的输出符号，我们便称这类系统为部分可观察DES。早在20世纪90年代，Li Y.和Wonham W. M. [ 3 ] 便开始了对部分可观察DES的探究。随后，诸多学者对部分可观察DES进行了研究，例如，Xiang Yin和Stéphane Lafortune [ 4 ] 研究了部分可观察DES的最大允许控制问题；Liujuan Mei和Rongjian Liu [ 5 ] 给出了验证部分可观察DES不透明度的矩阵方法等等。 然而，在实际生活中还有许多系统用Li Y.和Wonham W. M.所提出的模型难以进行模拟，因为这些系统中含有不确定性或模糊性。于是，Feng Lin和Hao Ying [ 6 ] [ 7 ] 把模糊集理论引入到其中，给出了以模糊自动机为模型的模糊DES，并研究了模糊DES的可观察性和最优控制问题，在此基础上Yong Cao [ 8 ] 研究了模糊DES的状态反馈控制。此外，还有许多学者对部分可观察模糊DES的很多其他性质也进行了研究，例如可检测性 [ 9 ]，可预测性 [ 10 ]，可诊断性 [ 11 ] 和安全诊断 [ 12 ] 以及基于梯度的在线学习 [ 13 ] 等。 本文主要研究了完全可观察和部分可观察模糊DES的状态反馈控制。我们给出了模糊谓词可观察的定义，并证明了对于预先给定的模糊谓词存在合理的状态反馈控制器使得闭环系统的可达模糊谓词等于所给定模糊谓词的充要条件是给定模糊谓词可控且可观察；然后，在一定条件下将部分可观察模糊DES转换为完全可观察模糊DES，并讨论模糊谓词在两类系统之间的控制不变性和可控性。"
"本小节主要介绍部分可观察一般DES和部分可观察模糊DES的基本模型以及模糊DES状态反馈控制中的基本概念。 部分可观察一般DES与模糊DES的模型 部分可观察一般DES可表示为自动机 [ 3 ] G ¯ = ( Q ¯ , Σ ¯ , δ ¯ , q ¯ 0 , Y ¯ , h ¯ ) (1) 其中 Q ¯ 为状态集， Σ ¯ 为事件集， δ ¯ : Σ ¯ × Q ¯ → Q ¯ 为状态转移函数， q ¯ 0 为初始状态， Y ¯ 是可观察的输出符号集，而 h ¯ : Q ¯ → Y ¯ 是输出映射。 ∀ q ¯ , q ¯ ′ ∈ Q ¯ ， σ ¯ ∈ Σ ¯ ，当 δ ¯ ( σ ¯ , q ¯ ) = q ¯ ′ 时，称 δ ¯ ( σ ¯ , q ¯ ) 有定义，记为 δ ¯ ( σ ¯ , q ¯ ) ! 。 当 Y ¯ = Q ¯ 且 h ¯ 是一一映射时系统是完全可观察的，并记为 G ¯ = ( Q ¯ , Σ ¯ , δ ¯ , q ¯ 0 ) .(2) 部分可观察模糊DES可表示为自动机 G = ( Q , Σ , δ , q 0 , Y , h ) (3) 其中Q为模糊状态集， Σ 为模糊事件集， δ : Σ × Q → Q 为状态转移函数， q 0 为初始状态，Y是可观察的输出符号集，而 h : Q → Y 是输出映射。 与一般状态集 Q ¯ 相对应的模糊状态集Q中的元素表示为 q = [ α 1 , α 2 , ⋯ , α n ] ， α i ∈ [ 0 , 1 ] ( i = 1 , 2 , ⋯ , n ) 表示q属于 q ¯ i ( i = 1 , 2 , ⋯ , n ) 的程度； σ = [ β i j ] n × n ∈ Σ 且 β i j ∈ [ 0 , 1 ] ( i , j = 1 , 2 , ⋯ , n ) 表示事件 σ 发生后使系统从状态 q ¯ i 可以转移到状态 q ¯ j 的可能性；在G中， ∀ q ∈ Q ， σ ∈ Σ ， δ ( σ , q ) = q ∘ σ = [ α i ] 1 × n ∘ [ β i j ] n × n = [ λ t ] 1 × n ， λ t = max 1 ≤ j ≤ n { min 1 ≤ i ≤ n ( α i , β i j ) } ( t = 0 , 1 , ⋯ , n ) 。 状态反馈控制是利用状态反馈控制器来控制系统。为了使系统在预先给定的状态集中发生变化，将事件集 Σ 分为可控事件集 Σ c 和不可控事件集 Σ u 且 Σ c ∩ Σ u = ∅ 。定义控制输入 γ 为映射： Σ → [ 0 , 1 ] 满足 γ ( σ ) = 1 , σ ∈ Σ u ，记控制输入的全体为 Γ 。模糊状态反馈控制器f [ 15 ] 为 f : Q → Γ . (4) 由于系统是部分可观察的，其控制器应该基于观察到的输出符号来进行控制，即此时的控制器还应该满足 q , q ′ ∈ Q , h ( q ) = h ( q ′ ) ⇒ f ( q ) = f ( q ′ ) ，也就是说存在函数 g : Y → Γ ，称g为一个h-控制器。 对f及 σ ∈ Σ ，定义 f σ : Q → [ 0 , 1 ] 为 f σ ( q ) = f ( q ) ( σ ) (5) 显然f完全由 { f σ : σ ∈ Σ } 决定。 2.2. 基础概念 定义2.1 [ 14 ] 部分可观察模糊DES中的模糊谓词P定义为状态集Q上的一个函数： P : Q → [ 0 , 1 ] (6) 其中 ∀ q = [ α 1 , α 2 , ⋯ , α n ] ， P ( q ) = max 1 ≤ i ≤ n ( α i ) 。 记Q上所有模糊谓词组成的集合为 P ( Q ) ，定义 P ( Q ) 上的算子~(否定)、 ∧ (合取)、 ∨ (析取)如下： ( ~ P ) ( q ) = 1 − P ( q ) , ∀ q ∈ Q ; ( P 1 ∧ P 2 ) ( q ) = min { P 1 ( q ) , P 2 ( q ) } , ∀ q ∈ Q ; ( P 1 ∨ P 2 ) ( q ) = max { P 1 ( q ) , P 2 ( q ) } , ∀ q ∈ Q (7) 定义2.2 [ 15 ] 对模糊谓词P和事件 σ ∈ Σ ，模糊谓词变换 s p σ : P ( Q ) → P ( Q ) 定义为： s p σ ( P ) ( q ) = { max P ( q ′ ) , ∃ q ′ 使 得 q ′ ∘ σ = q , 0 , 否 则 (8) 与谓词变换 s p σ 的含义向反，我们定义模糊谓词P的另一模糊谓词变换如下： 定义2.3 [ 15 ] 对模糊谓词P和事件 σ ∈ Σ ，模糊谓词变换 w l p σ : P ( Q ) → P ( Q ) 定义为： w l p σ ( P ) ( q ) = max { P ( σ ∘ q ) ∧ D σ ( q ) , 1 − D σ ( q ) } , ∀ q ∈ Q (9) 其中模糊谓词 D σ : Q → [ 0 , 1 ] 为 D σ ( q ) = max ( q ∘ σ ) 。 显然，由定义2.3可知，若对 ∀ α ∈ ( 0 , 1 ] ， q ∈ Q ， P ( q ) ≥ α ，若 w l p σ ( P ) = 0 ，则 D σ ( q ) = 1 且 P ( δ ( σ , q ) ) < α 。 定义2.4 [ 15 ] 对模糊谓词P和事件 σ ∈ Σ 引入模糊状态反馈控制f，定义模糊谓词变换 w l p σ f : P ( Q ) → P ( Q ) 为： w l p σ f ( P ) ( q ) = max { w l p σ ( P ) ( q ) , 1 − f σ ( q ) } ， ∀ q ∈ Q .(10) 定义2.5 [ 15 ] 称模糊谓词 P ∈ P ( Q ) 是控制不变的，如果存在模糊状态反馈控制器f使得： P ( q ) ≤ w l p σ f ( P ) ( q ) ， ∀ σ ∈ Σ ， q ∈ Q .(11) 定义2.6 [ 15 ] 定义G在f控制下闭环统的可达谓词 Re ( f / G , Q ) : Q → [ 0 , 1 ] (12) 为 Re ( f / G , Q ) ( q 0 ) = 1 且 Re ( f / G , Q ) ( q ) = α ， α ∈ ( 0 , 1 ] 。存在 q 0 , q 1 , ⋯ , q m = q ∈ Q 及 σ 0 , σ 1 , ⋯ , σ m − 1 ∈ Σ 以及 γ i ( σ i ) > 0 ( γ i ∈ Γ , i = 0 , 1 , ⋯ , m − 1 ) 且 δ ( σ i , q i ) = q i + 1 ( i = 1 , 2 , ⋯ , m − 1 ) 满足： 1) min 0 ≤ i ≤ m − 1 D σ i ( q i ) ≥ α ； 2) min 0 ≤ i ≤ m − 1 f σ i ( q i ) ≥ α ； 3) 至少存在 k ∈ { 0 , 1 , ⋯ , m − 1 } 使得 D σ k ( q k ) = α 或 f σ k ( q k ) = α ； 4) 对其他任意不完全相同于状态 q 0 , q 1 , ⋯ , q m = q ∈ Q ，事件 σ 0 , σ 1 , ⋯ , σ m − 1 ∈ Σ 的状态 x j ∈ Q 及事件 σ ′ j − 1 ∈ Σ ( j = 1 , ⋯ , l ) 满足 δ σ ′ j ( r j ) = r j + 1 且 r l = q ，则有 min 0 ≤ j ≤ l − 1 D σ ′ j ( r j ) ≤ min 0 ≤ i ≤ m − 1 D σ i ( q i ) 且 min 0 ≤ j ≤ l − 1 f σ j ( r j ) ≤ min 0 ≤ i ≤ m - 1 f σ i ( q i ) 。 记 Re ( f / G , Q ) 为 f / G 的可达状态集。 定义2.7 [ 15 ] 设 P ∈ P ( Q ) 且 P ( q 0 ) = 1 。定义模糊谓词 Re ( G , P ) : Q → [ 0 , 1 ] (13) 为 Re ( G , P ) ( q 0 ) = 1 且 Re ( G , P ) ( q ) = α , α ∈ ( 0 , 1 ] 。存在 q 0 , q 1 , ⋯ , q m = q ∈ Q 及 σ 0 , σ 1 , ⋯ , σ m − 1 ∈ Σ 且 δ ( σ i , q i ) = q i + 1 ( i = 1 , 2 , ⋯ , m − 1 ) 满足： 1) min 0 ≤ i ≤ m − 1 D σ i ( q i ) ≥ α ； 2) min 0 ≤ i ≤ m − 1 P ( q i ) ≥ α ； 3) 至少存在 k ∈ { 0 , 1 , ⋯ , m − 1 } 使得 D σ k ( q k ) = α 或 P ( q k ) = α ； 4) 对其他任意不完全相同于状态 q 0 , q 1 , ⋯ , q m = q ∈ Q ，事件 σ 0 , σ 1 , ⋯ , σ m − 1 ∈ Σ 的状态 x j ∈ Q 及事件 σ ′ j − 1 ∈ Σ ( j = 1 , ⋯ , l ) 满足 δ σ ′ j ( r j ) = r j + 1 且 r l = q ，则有 min 0 ≤ j ≤ l − 1 D σ ′ j ( r j ) ≤ min 0 ≤ i ≤ m − 1 D σ i ( q i ) 且 min 0 ≤ j ≤ l − 1 P ( r j ) ≤ min 0 ≤ i ≤ m - 1 P ( q i ) 。"
"本节在文 [ 15 ] 所给出的模糊谓词定义的基础上，讨论了部分可观察模糊DES和完全可观察模糊DES的状态反馈控制。 定义3.1设 P ∈ P ( Q ) ，如果 ∀ q ∈ Q ， σ ∈ Σ u 有 P ≤ Re ( G , P ) ∧ w l p σ ( P ) (14) 则称模糊谓词P是可控的。 对任一模糊谓词 P ∈ P ( Q ) ， P ( q ) ≥ α ( q ∈ Q , α ∈ ( 0 , 1 ] ) ，首先给出输出映射h的一个逆像 h − 1 ，即 h − 1 ( h ( P ) ) = { q ∈ Q | h ( P ) ( h ( q ) ) ≥ α } . 定义3.2设 P ∈ P ( Q ) ，如果 ∀ q ∈ Q , σ ∈ Σ c 有 P ≥ h − 1 ( h ( s p σ ( P ) ∧ P ) ) ∧ s p σ ( P ) (15) 则称模糊谓词P是可观察的。 显然，模糊谓词 P ∈ P ( Q ) ， α ∈ ( 0 , 1 ] 可观察等价于存在满足 P ( q ′ ) ≥ α ， P ( q ″ ) ≥ α 的 q ′ , q ″ ∈ Q ， σ ∈ Σ c ， h ( q ′ ) = h ( q ″ ) 且 P ( δ ( σ , q ″ ) ) ≥ α ，则 P ( δ ( σ , q ′ ) ) ≥ α 。 定理3.1设模糊谓词P可控可观察当且仅当存在一个合理的h-控制器f使得 Re ( f / G , Q ) = P 。 证明 首先给出G的一个合理的模糊控制器 f σ ( q ) = { w l p σ ( P ) ( q ) ,               q ∈ Q , σ ∈ Σ c , 1 ,                                                                 q ∈ Q , σ ∈ Σ u . (16) 在给定上述控制器的前提下证明该引理。 充分性：假设P是可控且可观察的，下证 Re ( f / G , Q ) = P 。对任意的 q = [ α 1 , α 2 , ⋯ , α n ] ， α ∈ [ 0 , 1 ] ，则有 P ( q ) = max 1 ≤ i ≤ n α i 。记 max 1 ≤ i ≤ n α i = α ，下证 Re ( f / G , Q ) ( q ) = α 。由于P是可控可观察的且 P ( q 0 ) = 1 ，则 P ≤ Re ( G , P ) 成立。由定义2.7可知： ∃ m ≥ 0 ，状态 q 0 , q 1 , ⋯ , q m = q ∈ Q 及事件 σ 0 , σ 1 , ⋯ , σ m − 1 ∈ Σ ， δ m − 1 ( σ i , q i ) = q i + 1 满足： min 0 ≤ i ≤ m − 1 D σ i ( q i ) ≥ α 且 min 0 ≤ i ≤ m − 1 P ( q i ) ≥ α 。由定义2.6可知要证 Re ( f / G , Q ) ( q ) = α 成立，只需证 min 0 ≤ i ≤ m − 1 f σ i ( q i ) ≥ α 即可。 当 σ ∈ Σ u 时，由f的定义可知 f σ ( q i ) = 1 ≥ α 恒成立； 当 σ ∈ Σ c 时，利用反证法，假设存在k使得 f σ k ( q k ) < α ，则由f可知有 h ( P ) ( h ( δ ( σ k , q k ) ) ) < α 成立。由自动机 G ( P ) 的定义可知 P ( σ k ∘ q k ) < α 。这与定义2.7中的 min 0 ≤ i ≤ m − 1 P ( q i ) ≥ α 矛盾，因此 f σ k ( q k ) ≥ α 成立，即 min 0 ≤ i ≤ m − 1 f σ i ( q i ) ≥ α 成立。故而有 Re ( f / G , Q ) ( q ) = α ，即 Re ( f / G , Q ) = P 。 必要性：假设对任意的 q ∈ Q ，对上述所给合理的控制器f有 Re ( f / G , Q ) ( q ) = P ( q ) 成立，下证模糊谓词P是可控且可观察的。 由文 [ 15 ] 中定理3.2可知，存在合理的模糊控制器f使得 Re ( f / G , Q ) = P 成立时，P是可控的。 下证模糊谓词P是可观察的，即任给的 α ∈ [ 0 , 1 ] ，若存在某 σ ∈ Σ c ， q ′ , q ″ ∈ Q ，满足 δ ( σ , q ′ ) ! ， δ ( σ , q ″ ) ! ， P ( q ′ ) ≥ α ， P ( q ″ ) ≥ α ， h ( q ′ ) = h ( q ″ ) ， P ( δ ( σ , q ″ ) ) ≥ α 时，有 P ( δ ( σ , q ′ ) ) ≥ α 。 因为 Re ( f / G , Q ) = P ，所以只须证 Re ( f / G , Q ) ( δ ( σ , q ′ ) ) ≥ α 即可。 由 δ ( σ , q ′ ) ! ， δ ( σ , q ″ ) ! 且 h ( q ′ ) = h ( q ″ ) ，故而有 δ ( σ , q ′ ) = δ ( σ , q ″ ) 。又因为 P ( δ ( σ , q ″ ) ) ≥ α ，所以 Re ( f / G , Q ) ( δ ( σ , q ″ ) ) ≥ α ，由定义2.6可知 f σ ( δ ( σ , q ″ ) ) ≥ α 。又因为模糊控制器f是合理的，所以 f σ ( δ ( σ , q ′ ) ) ≥ α ，由f可知 w l p σ ( P ) ( q ) ≥ α ， max { P ( δ ( σ , δ ( σ , q ′ ) ) ) ∧ D σ ( δ ( σ , q ′ ) ) , 1 − D σ ( δ ( σ , q ′ ) ) } ≥ α ，故 P ( δ ( σ , δ ( σ , q ′ ) ) ) ≥ α ，所以 P ( δ ( σ , q ′ ) ) ≥ α ，因此模糊谓词P是可观察的。 综上所述，模糊谓词P是可控且可观察的。 证毕。 为进一步研究模糊DES的状态反馈控制，我们在给定下面条件A的基础上，将部分可观察模糊DES转化为完全可观察模糊DES。 条件A 对 σ ∈ Σ 及满足 P ( q ) ≥ α ， P ( q ′ ) ≥ α 的 q , q ′ ∈ Q ，若 δ ( σ , q ) ! ， δ ( σ , q ′ ) ! ，则 h ( q ) = h ( q ′ ) ⇒ h ( δ ( σ , q ) ) = h ( δ ( σ , q ′ ) ) 。 对可控可观察模糊谓词P，设 δ ( σ , q ) ! ，记 y = h ( q ) 。 G ( P ) = ( Y ∪ { Y J } , Σ , δ ′ , y 0 ) . (17) 其中 σ ∈ Σ ， δ ′ ( σ , y ) = { h ( δ ( σ , q ) ) , 若 存 在 P ( q ) ≥ α 且 P ( δ ( σ , q ) ) ≥ α , α ∈ ( 0 , 1 ] Y J ,   若 存 在 P ( q ) ≥ α 且 P ( δ ( σ , q ) ) < α , α ∈ ( 0 , 1 ] 无 定 义 ,       否 则 (18) 这里 Y J 为Y的一个虚设状态，而 y 0 = h ( q 0 ) 。对于任意可观察的模糊谓词P，由 G ( P ) 的转移函数可知 G ( P ) 中的每一个状态都会有相对应的输出符号，因此 G ( P ) 是一个完全可观察的模糊DES。 下面我们讨论 h ( P ) 作为 G ( P ) 的谓词与P作为G的谓词之间的关系。 定理3.2 设模糊谓词P满足条件A且可控可观察，则 1) P相对于G是控制不变的当且仅当 h ( P ) 相对于 G ( P ) 是控制不变的。 2) 若P相对于G是可控的，则 h ( P ) 相对于 G ( P ) 是可控的。 证明 (1)充分性：要证 h ( P ) 相对于 G ( P ) 是控制不变的，只须证对任给的 σ ∈ Σ u ， y ∈ Y ， δ ′ ( σ , y ) ! 且 h ( P ) ( y ) ≥ α ， α ∈ ( 0 , 1 ] ，则有 h ( P ) ( δ ′ ( σ , y ) ) ≥ α 即可。若对 ∀ σ ∈ Σ u ， y ∈ Y ， δ ′ ( σ , y ) ! 且 h ( P ) ( y ) ≥ α ，可知 ∃ q ∈ Q 且 P ( q ) > α ，使得 y = h ( q ) 且 δ ( σ , q ) ！ 。又因为P相对于G是控制不变的，则有 P ≤ w l p σ ( P ) ，即对 ∀ σ ∈ Σ ， q ∈ Q ， δ ( σ , q ) ！ ，若 P ( q ) > α ，则有 δ ( σ , q ) = q ′ 且 P ( δ ( σ , q ) ) ≥ α 。因此 δ ′ ( σ , y ) = h ( q ′ ) 且 h ( P ) ( δ ′ ( σ , y ) ) ≥ α 。 必要性：要证P相对于G是控制不变的，只须证对 ∀ σ ∈ Σ u ， q ∈ Q ， δ ( σ , q ) ！ 且 P ( q ) ≥ α ，则有 P ( δ ( σ , q ) ) ≥ α 即可。对任给的 σ ∈ Σ u ， q ∈ Q ， δ ( σ , q ) ！ 且 P ( q ) ≥ α ，记 y = h ( q ) ，由 G ( P ) 的定义可知 δ ′ ( σ , y ) ! 。又因为 h ( P ) 相对于 G ( P ) 是控制不变的，故而有 h ( P ) ( δ ′ ( σ , y ) ) ≥ α ，从而 P ( δ ( σ , q ) ) ≥ α 。 若P相对于G是可控的，则 P ≤ Re ( G , P ) ∧ w l p σ ( P ) 。由定义2.7知 ∃ m ≥ 0 ，状态 q 0 , q 1 , ⋯ , q m ∈ Q 及事件 σ 0 , σ 1 , ⋯ , σ m − 1 ∈ Σ , δ σ i ( q i ) = q i + 1 , q m = q ，满足 min 0 ≤ i ≤ m − 1 D σ i ( q i ) ≥ α 且 min 0 ≤ i ≤ m − 1 P ( q i ) ≥ α 。记 y i = h ( q i ) ，则 min 0 ≤ i ≤ − m − 1 D ′ σ i ( y i ) ≥ α 且 min 0 ≤ i ≤ m − 1 h ( P ) ( y i ) ≥ α ，所以有 h ( P ) ≤ Re ( Y , h ( P ) ) 。因此，结合(1)可知 h ( P ) 相对于 G ( P ) 是可控。 但其逆并不成立。例如，若P相对于G是可控，取 q J ∉ Q 但有 δ ( σ , q J ) = q J 且 h ( q J ) = h ( q 0 ) 成立，此时 q J 是不可达的，故有 P ∪ { q J } 是不可控的，但我们根据 G ( P ) 的定义可知 h ( P ) ∪ { q J } 却是可控的。"
