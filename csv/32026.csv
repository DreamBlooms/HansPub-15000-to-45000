"激光跟踪仪转站精度是影响飞机装配质量的重要因素。装配现场温度变化导致ERS点位置产生偏移，已经成为影响激光跟踪仪转站精度的最大误差源。为了提高转站精度，本文提出一种基于精密热变形理论的激光跟踪仪转站精度补偿方法，该方法通过比较ERS点的实际测量值和转站参数计算值，来估计ERS点在X, Y, Z方向上的形体热变形系数。利用迭代的方法对ERS点的实际位置进行修正，并逐步逼近真实的转站参数。工程实例证明本文所提出的补偿方法具有很好的补偿精度，其中最大转站误差最大降低38.6%，平均转站误差下降38.7%。 关键词 :激光跟踪仪，转站精度，公共观测点，热变形补偿 Copyright © 2019 by author(s) and Hans Publishers Inc. This work is licensed under the Creative Commons Attribution International License (CC BY). http://creativecommons.org/licenses/by/4.0/"
"飞机数字化装配技术以基于单一产品数据源的数字量协调体系为基本特点，其中数字化测量技术为实现数字化精确装配提供基础保障 [ 1 ] ，而测量系统的精度是决定飞机最终装配质量的重要因素 [ 2 ] 。激光跟踪仪因其测量技术成熟，测量精度高，技术配置灵活，在飞机数字化装配系统中得到广泛应用 [ 3 ] 。由于飞机部件尺寸较大、装配工装复杂，为了覆盖飞机部件所有特征点的测量，需要经常地移动激光跟踪仪设备。不同站位激光跟踪仪测量数据相互独立，需要通过转站的方法将测量数据转换到统一的参考坐标系下。激光跟踪仪转站是通过测量一组公共观测点(ERS点)进行匹配实现的，其目的是获得激光跟踪仪测量坐标系到装配坐标系的转换参数(转站参数)。显然，转站参数的误差是决定整个测量系统测量精度的直接因素。 ERS点作为现场参考坐标系的基准，被固定地安装在飞机装配平台或工装上，其理论位置应保持固定不变。然而装配车间温度的变化会导致整个装配平台发生热变形，ERS点的位置随之产生位移。此时ERS点的实际模型和理论模型产生偏差，导致转站后得到的坐标系偏离理论的参考坐标系。飞机装配平台尺寸可达数十米，温度变化引起装配平台尺寸的热变形是比较严重的。以钢材为例(取热膨胀系数为1.2e−5/℃)，当飞机装配平台整体长度为30米，室内温度达到5摄氏度时，平台尺寸的变化量即可达到1.8 mm。而我国西北地区年度温度可变可达到30多摄氏度，因此温度变化已经成为影响现场测量精度的最主要因素。通过构建恒温的装配车间可以有效抑制热变形，但是成本昂贵。因此，通过优化转站算法对热变形误差进行补偿无疑是一个经济有效的方法。Horn [ 4 ] 为了提高匹配精度，在转站算法求解过程中引入一个缩放因子s，来表示匹配点组的各项同性缩放比例，但是该算法并非严格基于热变形原理，只能补偿两个点组之间的整体相似度误差，因此该算法更适用于图像匹配领域。杨宝旒 [ 5 ] 通过有限元仿真的方法获得装配工装的线性热变形规律，利用单位温度热变形系数矩阵对ERS点的理论位置进行补偿，其缺点是有限元仿真结果不能准确反映真实工装的热变形情况。俞慈君 [ 6 ] 基于物体热变形理论建立工装的三维热变形模型，构建修正后的最小加权误差函数对转站误差进行优化，其在转站过程中采用3σ准则对ERS点进行删选，剔除异常点来提高测量精度，但是该方法中热补偿系数来自于算法估计，而非真实的测量数据。金涨军 [ 7 ] 对激光跟踪仪转站过程的误差传递进行分析，提出了转站参数误差的估计模型，但是该模型并没有考虑温度变化的影响。 为了提高激光跟踪仪的现场测量精度，本文提出一种基于精密热变形理论的激光跟踪仪转站精度补偿方法。本文首先介绍了激光跟踪仪转站误差补偿的基本方法，然后针对目前方法的不足之处，提出了一种基于精密热变形理论的转站精度热补偿方法。该方法通过ERS点的实际测量位置与转站参数计算值，分别估计ERS点在装配坐标系下X, Y, Z方向上的形体热变形系数；利用迭代算法对ERS点的实际位置进行修正，并逐步逼近求解真实的转站参数。最后通过工程实例证实本文提出的热补偿方法相比于目前所用的补偿方法具有更好的补偿精度。"
"在飞机装配现场，由于飞机部件尺寸较大和现场各种装配工装、设备的遮挡，需要多次移动激光跟踪仪到不同的站位来完成飞机装配过程的测量任务。每台激光跟踪仪具有独立的测量坐标系，为了融合来自不同站位的测量数据，需要通过转站的方法将激光跟踪仪测量坐标系转换到统一的参考坐标系下。激光跟踪仪转站是通过测量一组ERS点的实际位置来实现的(图1)，其本质是三维点组的刚体匹配问题。假设ERS点在装配坐标系下的理论坐标为y i ，在激光跟踪仪测量坐标系下为x i 。转站参数用 T ( x , y , z ) 和 R ( α , β , γ ) 来表示，其中T 表示激光跟踪仪测量坐标系相对于装配坐标系的平移向量，R 表示激光跟踪仪测量坐标系相对于装配坐标系的旋转矩阵，α，β，γ是相应的RPY角。 图1. 激光跟踪仪转站基本原理 通过构建所有ERS点的匹配误差Ʃ的最小二乘函数(公式1)，求解转站参数R和T的最佳估计值。 Σ = ∑ i = 1 N ‖ e i ‖ 2 = ∑ i = 1 N ‖ R x i + T − y i ‖ 2 (1) 其中N为参与转站的ERS点的数量。 SVD分解法 [ 8 ] [ 9 ] 、正交矩阵法 [ 4 ] 、四元数法 [ 10 ] 是常用的求解刚体匹配问题的解析算法。 为了提高点组的匹配精度，Horn [ 4 ] 在匹配过程加入比例因子s对匹配精度进行补偿，s是各向同性缩放因子，表示两组点集在匹配前后的整体相似程度： Σ = ∑ i = 1 N ‖ s R x i + T − y i ‖ 2 (2) 该方法运用于图像处理领域，可以很好的提高图像匹配的精度，但对于激光跟踪仪转站则存在很多局限。首先，ERS点热位移的存在会同时导致激光跟踪仪的平移参数和旋转参数估计值的变化，而Horn的方法只针对平移参数进行修正，而忽视了旋转参数，这与事实不符；其次，装配工装热变形情况复杂，不同尺寸方向上的形变和热变形系数是不同的，无法用一个单一的比例缩放因子s来表示。为了解决这些问题，本文提出了一种基于精密热变形理论的激光跟踪仪转站补偿方法。"
"对于精密仪器而言，随着测量技术的发展和测量仪器精度的提高，因温度变化引起的测量误差占测量总误差的比重越来越大，到20世纪末和21世纪初，温度引起的误差已经占到测量总误差的50%以上 [ 11 ] 。传统的物体热变形理论只考虑了几何尺寸、材料热膨胀系数、和温度三个因素，构建线性热变形理论模型。实际上，物体的热变形还受到其形体结构、组装方式等多因素的影响。为了提高精密测量精度，合肥工业大学费业泰教授提出了考虑形体结构影响的热变形误差模型 [ 12 ] [ 13 ] ： s t = f ( α , k ) k = φ ( L 1 , L 2 , ... L i , ... , L n , ) (3) 式中：s t 表示物体某尺寸L的形体热变形系数，α是材料热膨胀系数，k为形体结构因子，其值取决于物体的形体结构和其他关联尺寸L i 。L i 表示物体其他与尺寸L相关联的尺寸。根据该理论，物体不同尺寸之间以及连接结构对热变形存在相互耦合的影响，热变形后物体的尺寸变化并非是各向同性的。 对于一些形体结构复杂的物体，其形体结构因子计算是非常复杂的。因此，对于复杂物体某一尺寸的形体热变形量，可以通过实验测量的方法，通过公式(4)计算获得。 Δ L = s t L ( t 2 − t 1 ) (4)  由于材料、形状结构和连接方法的不同，装配平台在其主要尺寸(长宽高)方向上会表现出各向异性的热膨胀特性，布置在其上的ERS点也将随着装配平台展现出各向异性的热位移特性。由于装配平台结构复杂，从理论上计算形体结构因子是及其困难的。通过比较ERS点在温度变化前后的位置直接对形体热变形系数进行估计，是一个更为经济合理的选择。 假设ERS点P i 在装配坐标系下的理论坐标为P iA ，热变形后在装配坐标系中的实际位置为P iB ，则该ERS点在XYZ三个方向上的形体热变形系数为： { s i x = ( P i B x − P O x ) / ( P i A x − P O x ) s i y = ( P i B y − P O y ) / ( P i A y − P O y ) s i z = ( P i B z − P O z ) / ( P i A z − P O z ) (5) 式中，s x ，s y ，s z 分别表示ERS点在长宽高三个方向的形体热变形系数；P O 表示ERS点的热膨胀中心。 对于布置有N个ERS点的装配平台而言，为了减少形体热变形系数的计算误差，取每个ERS点的形体热变形系数的算术平均值，作为ERS点的整体形体热变形系数： { s x = ∑ i = 1 N s i x / N s y = ∑ i = 1 N s i y / N s z = ∑ i = 1 N s i y / N (6) 在式(5)中，ERS点在装配坐标系下的实际位置P iB 为是无法直接通过测量得到的，它需要通过激光跟踪仪的实际测量值和转站参数估计而得到： P i B = R ⋅ P L i B + T (7) 其中 L P iB 是该ERS点在激光跟踪仪下的实际测量位置。 由于转站参数R和T的理论值是未知的，是由ERS点的实测坐标通过匹配算法计算获得，而为了获得更高精度的转站参数，又需要使用转站参数来计算ERS点的形体热变形系数。显然，转站参数和ERS点的形体热变形系数之间相互影响，无法使用传统的解析方式求解。为了解决这个问题，本文开发了一种迭代计算方法，利用当前转站参数值来计算和逼近真实的形体热变形系数。  转站热变形补偿算法首先对原始测量数据进行匹配计算，获得相应的转站参数的近似值。然后使用该转站参数近似值估算ERS点的形体热变形系数，并对ERS点的实际位置进行修正。再使用修正后的ERS点的位置和理论位置进行匹配计算新的转站参数。如此循环往复迭代，直至转站误差达到我们事先设定的容差标准。其详细计算算法如下所示： 第一步，参数初始化：令初始迭代次数K = 1，形体热变形系数 s x 1 = s y 1 = s z 1 = 1 ，转站参数旋转矩阵R 1 为单位矩阵，平移矩阵T 1 为零矩阵。 第二步：使用ERS点的实际位置 与其理论值P iA 匹配，计算当前转站参数R K 和T K 最佳估计值。其中当K等于1时， P L i B 1 = P L i B 。 第三步：判断当前的转站误差是否符合测量容差要求。若转站误差已经满足容差要求或则迭代次数达到最大值K max ，则迭代结束，此时转站参数合理估计值为R K 和T K ；若转站容差尚未满足容差要求且迭代次数小于最大值K max ，则需要计算新的热形体热变形系数： { s x K + 1 = 1 N ∑ i = 1 N ( P i B x K − P O ) / ( P i A x − P O ) s y K + 1 = 1 N ∑ i = 1 N ( P i B y K − P O ) / ( P i A y − P O ) s z K + 1 = 1 N ∑ i = 1 N ( P i B z K − P O ) / ( P i A z − P O ) (8) 式中 P i B K = R K ⋅ P L i B K + T K ，表示ERS点在装配坐标系下的实际位置。 第四步：根据计算得到的形体热变形系数，对ERS点在装配坐标系下的实际位置进行修正： { P i B x ' K = P i B x K + ( s x K + 1 − 1 ) P O x s x K + 1 P i B y ' K = P i B y K + ( s y K + 1 − 1 ) P O y s y K + 1 P i B z ' K = P i B z K + ( s z K + 1 − 1 ) P O z s z K + 1 (9) 第五步：根据当前转站参数和经过修正后的ERS点的位置，对ERS点在激光跟踪仪坐标系下的实际位置进行修正。 P L i B K + 1 = ( R K ) − 1 ( P i B ' K − T K ) (10) 第六步：令K = K + 1，然后返回第二步继续。"
"以某型飞机中机身段的部件装配现场的测量数据为样本，对本文提出的激光跟踪仪转站热变形补偿方法进行了验证，测量现场如图2所示。实验中测量设备采用的是来自徕卡公司的激光跟踪仪AT-901 LR。在该部件装配现场，一共布置了10 ERS点，其编号和理论值如表1所示。激光跟踪仪通过测量这10个ERS点的实际位置完成转站。通过对测量数据和转站数据进行分析，验证本文提出的激光跟踪仪转站热变形补偿方法进行验证。本文试验中，膨胀中心为平台的几何中心位置(13982.000,0.000,0.000)。 图2. 激光跟踪仪现场转站测量 Table 1 编号 理论值 X (mm) Y (mm) Z (mm) DR1 13461.968 3057.356 −54542.795 DR2 13466.772 3054.398 −52879.890 DR3 13372.692 −5704.690 −53469.053 DR4 17868.137 −55702.911 −53471.318 DR5 24865.070 −55706.868 −52934.769 DR6 27871.058 −55709.286 −54273.616 DR7 13465.374 −53041.617 −52678.224 DR8 24775.934 −53046.248 −52798.255 DR9 27767.353 −53051.349 −54605.147 DR10 27776.304 −53050.347 −52914.038 表1. ERS点理论值 以其中某次转站测量数据为例，对本文算法的收敛性和补偿效果进行分析。表2所示为转站过程中ERS点的实际测量值及其对应的匹配误差，表3为经过热变形补偿后，ERS点的测量值及其对应的匹配误差。显然，在经过热变形补偿后，激光跟踪仪对ERS点的实际测量值已经非常接近其理论值，其匹配误差控制在0.3 mm以内。 Table 2 编号 实测值 匹配误差 X (mm) X (mm) X (mm) X (mm) Y (mm) Z (mm) DR1 7469.063 7469.063 7469.063 −0.506 0.199 −0.158 DR2 7471.955 7471.955 7471.955 −0.454 0.302 0.094 DR3 −1286.494 −1286.494 −1286.494 −0.622 −0.071 −0.021 DR4 −1351.244 −1351.244 −1351.244 −0.090 0.068 0.085 DR5 −1456.311 −1456.311 −1456.311 0.443 −0.200 0.005 DR6 −1508.002 −1508.002 −1508.002 0.512 −0.166 −0.170 DR7 1377.654 1377.654 1377.654 −0.597 0.042 0.036 DR8 1205.720 1205.720 1205.720 0.361 −0.109 0.044 DR9 1149.769 1149.769 1149.769 0.416 0.021 −0.033 DR10 1156.872 1156.872 1156.872 0.535 −0.086 0.119 表2. ERS点测量值与匹配误差 Table 3s after compenstio 编号 补偿后的测量值 匹配误差 X (mm) Y (mm) Z (mm) ΔX (mm) ΔY (mm) ΔZ (mm) DR1 13462.202 3057.309 −4542.635 0.234 −0.047 0.160 DR2 13467.016 3054.251 −2879.981 0.244 −0.147 −0.091 DR3 13372.826 −5704.464 −3469.015 0.134 0.226 0.038 DR4 17867.940 −5702.865 −3471.394 −0.197 0.046 −0.076 DR5 24864.940 −5706.614 −2934.776 −0.130 0.254 −0.007 DR6 27870.865 −5709.094 −4273.454 −0.193 0.192 0.162 DR7 13465.581 −3041.504 −2678.247 0.207 0.113 −0.023 DR8 24775.910 −3046.084 −2798.306 −0.024 0.164 −0.051 DR9 27767.171 −3051.345 −4605.126 −0.182 0.004 0.021 DR10 27776.101 −3050.233 −2914.169 −0.203 0.114 −0.131 表3. ERS点补偿后的测量值与匹配误差 通过分析转站热变形补偿算法过程中平均误差(式11)和最大误差(式12)的变化趋势情况(图3)，我们可以清楚的看到该算法整体上是收敛的，且具有很快的收敛速度。 A v e ( E ) = 1 N ∑ i = 1 N ‖ e i ‖ (11) M a x ( E ) = M a x ‖ e i ‖ (12) 图3. 热变形补偿算法迭代过程 对不同补偿方法下激光跟踪仪转站参数进行对比，表4给出了不同热变形补偿方法计算得到的转站参数。从表4中可以看出，Horn补偿方法只对平移参数进行修正，而本文提出的热变形补偿方法可同时对平移参数和旋转参数进行修正。 Table 4 补偿方法 X (mm) Y (mm) Z (mm) α (˚) β (˚) γ (˚) 不补偿 16375.954 −4375.457 −2964.166 90.84618 −0.20752 0.22825 Horn方法 16375.679 −4375.557 −2964.133 90.84618 −0.20752 0.22825 本文方法 16375.421 −4375.328 −2964.156 90.84568 −0.20743 0.22835 表4. 不同补偿方法下的转站参数 本试验在不同环境温度下对ERS点进行多次测量转站，比较本文提出的热变形补偿方法的补偿效果。 如图4和图5所示，相比于Horn补偿方法，本文所提出的热变形补偿方法可以获得更高的转站精度，其中最大转站误差相对于Horn补偿方法最大降低了38.6%，平均转站误差下降了38.7%。 图4. 不同热变形补偿算法平均误差比较 图5. 不同热变形补偿算法最大误差比较"
"由温度变化引起的ERS点位置偏移已成为影响激光跟踪仪转站误差的最主要因素。为了提高转站精度，本文提出了一种基于精密热变形理论的激光跟踪仪转站精度补偿方法。考虑装配工装复杂的结构、装配和连接方式，通过比较ERS点的理论值和实际测量值来估算其在X, Y, Z三个方向上的形体热变形系数。利用迭代的计算方式对ERS点的实际测量坐标进行补偿，同时结合匹配算法不断修正激光跟踪仪转站参数。工程实例证明本文提出的热补偿方法相比于目前使用的补偿算法具有更好的补偿精度。"
