"为了解决室外环境中由于光照不均或者大雾天气下，草地图像模糊不清，不能有效的识别和提取草地图像重要信息的问题，本文提出一种专门针对草地图像的图像增强算法。本文基于传统的Retinex理论，用小波变换的方法拆分图像的高频分量和低频分量分别进行处理，之后再将处理结果融合重构。实验结果表明，相比传统的MSRCR算法和直方图均衡化方法，本文的算法提高了图像清晰度并且有效的抑制了图像处理时产生的噪声。 关键词 :图像增强，Retinex理论，MSRCR算法 Copyright © 2017 by authors and Hans Publishers Inc. This work is licensed under the Creative Commons Attribution International License (CC BY). http://creativecommons.org/licenses/by/4.0/"
"图像是客观对象的一种相似性描述，但是在拍摄过程中，由于光照、气候等因素影响，往往造成图像的失真或者产生噪声。图像增强能在保留图像自身信息的同时突出某些特征信息，从而满足应用需求 [ 1 ] 。本文所设计的算法策略主要应用于智能割草机器人关于采集的草地图像预处理，由于割草机器人的工作环境所致，拍摄的图片会经常受到光照不均和大雾天气的影响。针对光照和大雾的影响，常见的图像增强算法主要有直方图均衡化方法，Retinex算法，梯度域增强算法等 [ 2 ] [ 3 ] 。 传统的图像增强算法，如直方图均衡化主要是通过对图像的非线性拉伸，使图像动态范围增大，对比度也增大，但是这些传统的方法多应用于灰度图像 [ 4 ] 。随着人们视觉感知模型的发展，Retinex理论也随之建立，经过40多年的发展，从最开始的单尺度Retinex算法(SSR算法)发展到多尺度加权平均Retinex算法(MSR算法)再到彩色恢复Retinex算法(MSRCR算法)。 MSRCR算法虽然能突出图像的细节部分，但也存在着缺陷，比如如果输入图像质量不高，噪声也会随着细节的突出而放大；处理完的图像会整体偏暗变灰等等 [ 5 ] 。为了解决这些问题，本文提出一种分别对高频分量和低频分量处理的办法，既能抑制高频的噪声放大，同时又增加低频分量的对比度，使图像清晰度增强。"
"小波变换是一种新的变换方法，它继承和发展了短时傅里叶变换的局部化思想，又克服了窗口大小不能随频率变换的缺点 [ 6 ] 。设 为基本小波， 为连续小波，对于 ，其连续小波变换为： (2.1.1) 其中，a不为0，b, t均为连续变量， 为 的复共轭。其逆变换为： (2.1.2)  Retinex理论认为物体的颜色不是由反射光的强度而是由不同频率的光的反射能力所决定的，所以光照不均会影响物体颜色的一致性 [ 7 ] 。所以，基于Retinex理论的算法其本质就是通过估计并去除图像照度分量来获取反应图像本质信息的反射分量，来还原物体本来的面貌 [ 8 ] 。Retinex理论认为，图像模型应该是： (2.2.1) 其中 是原始图像， 是反射分量，反射主要包含物体轮廓，纹理等高频信息，大多数的去噪算法都是针对这个反射分量进行处理。 是光照分量，主要包含环境光照强度等低频信息，大多数的去雾算法都是针对这个分量展开，目的是使得低频信息对比度增强，使图像更加清晰。 为了便于计算，通常对上面的公式进行取对数运算，变为： (2.2.2) 随着Retinex理论的发展，为了解决对某些图片处理完色彩失真的问题，研究者们提出了彩色恢复Retinex算法(Multi Scale Retinex with Color Restoration, MSRCR)，其表达式如下： (2.2.3) 其中 用来调节三个颜色通道颜色比例的色彩恢复函数，默认每个颜色所占比重都是1/3。其具体实现MATLAB代码部分如下(以R通道为例)： Img = double(f); [m, n] = size(f); aa = 125; for i = 1:m for j = 1:n C(i, j) = log(1 + aa * (Img(i, j)/I(i, j))); end end K = imfilter(Img, b); KK = imfilter(Img, bb); KKK = imfilter(Img, bbb); for i = 1:m for j = 1:n G(i, j) = 1/3 * (log(Img(i, j) + 1) − log(K(i, j) + 1)); G(i, j) = 1/3 * (log(Img(i, j) + 1) − log(KK(i, j) + 1)) + G(i, j); G(i, j) = C(i, j) * (1/3 * (log(Img(i, j) + 1) − log(KKK(i, j) + 1)) + G(i, j)); end end  均值滤波也称为线性滤波，采用的主要方法是邻域平均法，即用均值代替原图像的各个像素值。这种滤波方法非常简单易实现，但是会损失较多细节，不过基于草坪图像没有那么复杂的信息，所以对图像的高频分量用均值滤波的办法处理 [ 9 ] 。在坐标点(x, y)大小为m * n的矩形窗口 ，算术平均值是窗口 中被干扰图像g(x, y)的平均值，数学表达式如下： (2.3.1) 逆谐波均值滤波器表达式如下： (2.3.2) 其中，Q为滤波器的介绍，当Q为正数时，可以消除椒噪声；当Q为负数时，可以消除盐噪声。"
"本文针对草地图像的增强算法整体设计流程如图1所示。 因为草坪环境是室外环境，所以容易受到光照，天气等因素的影响，为了后续方便对草地图像进行分割、提取等操作，有必要对草地图像进行预处理。本文基于此需求，设计了这样一套预处理算法策略：先对拍摄的原始图像进行小波变换分解，抓取到图像中的高频分量和低频分量。针对高频分量，采取均值滤波的办法去除噪声；对于低频分量部分，采用MSRCR算法增强图像信息对比度，突出主要信息。在实际做实验的过程中，发现处理的效果不错，但是本文算法也有明显的不足，即MSRCR是对每个颜色通道分别处理再叠加，因此时间复杂度也相应的提高了。 基于时间复杂度的考虑并且针对算法目的，我们可以只对G通道进行卷积运算，R通道和B通道取得反射信息后直接输出即可。这样输出的图像虽然突兀，但是也能有效的去除草地上的雾气等，能为后续草坪边缘的识别提供保障。 图1. 本文算法整体流程图"
"本文所做的实验都是在win7 64位操作系统下，在MATLAB环境里进行测试，对比直方图均衡化方法和传统的自适应图像增强算法，对比结果如下图所示。 图2是带雾的而且光照条件也不相同的2幅草坪图像；图3是用直方图均衡化的方法进行处理后的结果；图4是用自适应增强算法处理后的结果；图5是本文的算法处理后的结果。通过观察可以发现，直方图均衡化算法处理后的图失真比较严重。图4是自适应增强算法，可以看到处理效果相对比较好，但是时间花费较长，每次运行时间大约是43 ms。图5是本文算法，处理近景的效果比较理想，但是远景对比度还是不太好，每次运行时间大约为27 ms。峰值信噪比(PSNR)和均方误差(MSE)是评价图像质量的两个客观标准 [ 10 ] ，PSNR表示信号最大可能功率和影响它的表示精度的破坏性噪声功率之间的比值，单位是dB，它的比值越大代表失真越少，而MSE越小，则代表预测模型有更好的精确度。选取第一幅图像作为参照，四种算法对比如表1所示。 图2. 原始图像 图3. 直方图均衡化 图4. 自适应增强算法 图5. 本文算法 Table 1 原始图像 直方图均衡化 自适应增强算法 本文算法 PSNR/dB 25.4 27.1 26.9 MSE 107.6 97.2 81.4 表1. 各种增强算法的PSNR和MSE"
"Retinex是一种建立在科学实验基础上的理论，本文为了能保证突出草地图像在各种天气和时间段内的重要图像信息，采用了以Retinex理论为基础的算法设计。通过实验发现，在大多数情况下，都可以对草地图像的重要信息进行强化。相比于其他方法，本文算法对草地图像的处理结果更好。但是本文在某些方面的问题还没有得到解决：远景雾气不能完全消除；处理后的图像整体发灰。"
