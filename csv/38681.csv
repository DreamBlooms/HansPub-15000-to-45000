"三轴立式加工中心是机械加工的重要装备，为提高其精度，本文利用齐次坐标变换建立了三轴立式加工中心的几何误差数学模型，开发了基于i5OS数控系统的误差补偿软件，为了简化误差检测时间和效率，选取对综合误差有主要贡献的直线度和定位误差进行补偿实验，结果表明，基于i5OS数控系统的综合误差实时性反馈补偿使数控机床的加工精度提高了38%以上，验证了模型的准确性和补偿软件的有效性。"
"精度是机床的重要指标，为了提高精度，“误差补偿”是目前常用的一种有效手段，所谓“误差补偿”是事先分析数控机床误差产生的机理，用数学的手段建立其误差数学模型，以此来预测机床工作时各空间位置的误差，最后利用软件处理的方式实现补偿，达到提高机床精度的目的 [ 1 ]。 数控机床综合误差数学模型是将数控机床空间误差用数学手段进行表达，从而能够预测其在数控机床整个空间位置上的误差。目前，主要手段是基于多体系统理论建立数控机床空间误差的数学模型。多体系统理论方法最大的优势在于其全面性以及通用性，将数控机床运动过程中的耦合因素进行综合考虑，适用于各种运动形式的数控机床 [ 2 ] [ 3 ] [ 4 ] [ 5 ] [ 6 ]。空间误差数学模型表达式的变量就是数控机床工作时的坐标值 [ 7 ]。 本文首先将利用齐次坐标法对三轴立式加工中心进行误差建模方法展开研究，采用激光涉仪实现误差的检测，最后基于国产数控系统i5OS开发出误差补偿系统并对模型进行有效性验证。"
"一般情况下，机床每一个移动轴均存在3项位移误差以及3项角度误差 [ 3 ]，并且三个移动轴两两之间还存在1项垂直度误差。三轴立式加工中心一共存在21项几何误差元素 [ 8 ]。本文采用沈阳机床i5 M1.4立式加工中心为研究对象，结构模型如图1所示，其运动形式为YXTZ型，即Y轴以及Z轴与床身固连，X轴与Y轴相连，工件台于X轴相连，而主轴以及刀具与Z轴相连。 按照多体系统理论描述为：① 刀具链分支：机床床身F→Z轴→主轴S→刀具T；② 工件链分支：机床床身F→Y轴→X轴→工件W。 以床身坐标系为参考坐标系，其刀具分支的运动链为：床身F→Z轴→主轴S→刀具T，则理想情况下，从床身坐标系到刀具坐标系齐次坐标变换关系如下： T F T = ∏ i = Z T T i − 1 i = T F Z T Z S T S T (1) 同理，工件分支的运动链为：机床床身M→Y轴→X轴→工件W，则理想情况下，从床身坐标系到工件坐标系齐次坐标变换关系如下： T F W = ∏ i = Y W T i − 1 i = T F Y T Y X T X W (2) 设刀尖点 t 0 在刀具坐标系中的位置坐标为 ( t x , t y , t z ) ，则理想情况下，刀尖点在工件坐标系中的位置坐标点 t w 为： [ t w T 1 ] = T W T [ t 0 T 1 ] = [ T F W ] − 1 T F T [ t 0 T 1 ] (3) 则进一步可以得到： [ t w T 1 ] = T X W − 1 T Y X − 1 T F Y − 1 T F Z T Z S T S T [ t 0 T 1 ] (4) 同理，在实际情况下，只需要在理想情况下齐次坐标变换过程中将各相邻体间误差矩阵引入表达式，即可得到实际情况下刀尖点在工件坐标系中的坐标点 t ′ w ，为： [ t ′ w 1 ] = T W T Δ T W T [ t 0 T 1 ] = ( ∏ i = Y W T i − 1 i Δ T i − 1 i ) − 1 ( ∏ i = Z T T i − 1 i Δ T i − 1 i ) [ t 0 T 1 ] (5) 因此， ε n = ( ε x , ε y , ε z ) 机床空间综合误差可以表达为： [ ε n T 0 ] = ( T i = Y T T i − 1 i ) − 1 ( T i = Z S T i − 1 i ) [ t 0 T 1 ] − ( T i = Y T T i − 1 i Δ T i − 1 i ) − 1 ( T i = Z S T i − 1 i Δ T i − 1 i ) [ t 0 T 1 ] (6) 由于单项误差元素都是微小量，忽略其高阶项，得到空间综合误差在X轴，Y轴，Z轴方向上的分量 [ 3 ]： { ε x = − δ x x − δ y x + δ z x − y ( θ x z + θ y z − ε x y ) − z ( θ x y + θ y y + ε x z ) ε y = − δ x y − δ y y + δ z y + x θ x z + z ( θ x x + θ y x − ε y z ) ε z = − δ x z − δ y z + δ z z − x θ x y + y ( θ x x + θ y x ) (7) 由上述数控机床的综合数学模型建模过程可知，刀具切削点的空间定位精度同时受到21项误差元素的影响。在机床误差的实际补偿中，如果对这21项误差元素都进行测量与补偿，往往会导致投入的时间与经济成本比较大，补偿效率不高。实际上，不同类型的机床由于其结构类型、运动行程大小、以及运动轴定位方式的不同，所面临的关键误差是不同的。对于立式加工中心而言，由于其运动轴行程短，角偏误差的影响往往比较小，可以忽略不计，定位误差以及直线度误差对误差有主要贡献。 图1. 沈阳i5 M1.4立式加工中心。(a) 机床结构示意图；(b) 机床误差检测实验现场"
"本文实验采用的误差测量仪器为Renishaw XL 80型激光干涉仪，对沈阳i5 M1.4立式加工中心X轴、Y轴进行误差测量。每个移动轴需要对线性定位误差以及直线度误差进行测量，需要用线性定位误差测量镜组以及直线度误差测量镜组。 实验中测量长度应为各移动轴的最长有效行程。但是受到被测数控机床结构的约束，各移动轴的测量行程分别为：X轴：0~500 mm、Y轴：−300~0 mm、Z轴：−300~0 mm。各移动轴从起始测点开始等间距选取51个测量点，且沿正、反向测量两次，再取其平均值。对于测量误差数据利用一次线性插值法进行单项误差建模。实验测量结果以及建模结果如图2所示。 图2. 实验测量结果以及建模结果。(a) X轴直线度和定位误差；(b) Y轴直线度和定位误差"
"沈阳机床(上海)智能系统研发设计有限公司i5OS数控系统通过Finch高速通信组件将机床CNC参数信息提供给上层应用软件访问，在上层软件中通过Finch高速通信组件访问CNC各轴位置反馈信息，再此时各轴位置信息写入误差模型中，处理计算得到此时误差补偿值，继而将其写入Finch高速通信组件，最后写入CNC运动控制模块，完成机床误差的补偿。Finch是一个主要用于i5OS本地以及局域网访问的高速通信组件，它位于应用软件中间层，主要依赖于动态链接库libfinch.so，具有很高的开放性。该组件不限制读取的参数数据，但是会限制参数的写入，根据CNC的运行状态和授权权限来决定能够写入的参数(图3)。 图3. Finch高速通信组件通信示意图 沈机(上海)智能系统研发设计有限公司i5OS数控系统通过Finch高速通信组件将机床CNC参数信息提供给上层应用软件访问，因此，在上层软件中通过Finch高速通信组件访问CNC各轴位置反馈信息，再此时各轴位置信息写入误差模型中，处理计算得到此时误差补偿值，继而将其写入Finch高速通信组件，最后写入CNC运动控制模块，完成机床误差的补偿。补偿原理如图4所示，这种补偿方法是一种基于数控系统的动态补偿，将数控机床空间误差与数控系统结合起来，通过外部补偿软件修正数控系统中的各轴位置反馈，实现对数控机床的空间误差补偿。 图4. 基于i5OS数控系统的位置反馈修正补偿方法"
"为验证上述误差补偿方法的有效性，对沈阳i5 M1.4立式加工中心X轴以及Y轴联动时圆弧插补运动进行了一组补偿实验，实验仪器选择Renishaw QC20_W型球杆仪。 实验时球杆仪球心坐标为(170, −150, −292.578)，与主轴相连，测量半径为100 mm，X轴，Y轴进给速度设为300 mm/min，先逆时针方向再顺时针方向旋转360度，完成正向与反向圆弧插补运动的误差检测。 按照JIS B 6190-4:2008版本的标准分析补偿前后球杆仪所测的误差数据，两次测量所得的运动误差轨迹及其圆度偏差分析分别如图5与图6所示。补偿前，XY平面内的圆弧轨迹最大圆度误差为17.9 μm，X轴、Y轴的垂直度误差为0.0934 μm/mm；补偿后XY平面内圆弧轨迹的最大圆度误差为10.3 μm，X，Y轴的垂直度误差为0.0576 μm/mm。最大圆度误差补偿率为42.45%，垂直度误差补偿率为38.33%。 图5. 补偿前圆弧轨迹精度 图6. 补偿后圆弧轨迹精度 表1显示了沈阳i5 M1.4立式加工中心在XY平面内圆弧插补运动在补偿前后的整体效果。 Table 1 误差项 补偿前 补偿后 提高百分比 最大圆度误差 17.9 μm 10.3 μm 42.45% 垂直度误差 0.0934 μm/mm 0.0576 μm/mm 38.33% 表1. 圆弧插补运动补偿前后的整体效果"
"通过齐次坐标转换的数学方法，以沈阳机床立式加工中心为研究对象，建立了21项误差组成的机床误差综合模型，利用机床厂商提供的接口文件，开发出基于i5OS数控系统的误差综合实时补偿系统，为了简化误差检测过程、节省时间和提高效率，选取对综合误差有主要贡献的直线度和定位误差进行补偿实验，结果表明，基于i5OS数控系统的综合误差实时性反馈补偿使数控机床的加工精度提高了38%以上，验证了模型的准确性和补偿软件的有效性。"
