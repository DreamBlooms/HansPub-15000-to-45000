"为确保潜航器在水下长时间安全连续航行，精准获取自身深度是必要的条件之一。本文基于MEMS微电子技术建立一体化的深度计探测系统，监测海水温度、盐度、密度、潜航器纵倾、横倾姿态等与深度有关的参数，构建多传感器的融合处理和补偿机制，以提升深度计系统整体探测精度，满足潜航器长航时的安全需求。 关键词 :MEMS，深度计，数据融合，海水密度 Copyright © 2019 by author(s) and Hans Publishers Inc. This work is licensed under the Creative Commons Attribution International License (CC BY). http://creativecommons.org/licenses/by/4.0/"
"海洋因为广阔的空间、丰富的资源，战略地位日益凸显。近年来，越来越多的国家加大了对海洋、特别是深海的探测研究，在潜艇、潜航器等潜航设备方面有了长足的进步。而对于海下航行，精确获取潜航器深度，是保证自身安全航行的重要因素之一。 现阶段，潜航器的深度获取，主要利用压力深度计来探测。它采用压力式的测量原理，通过监测潜航器外水压的变化，按照液体压力和密度基本公式，换算求得潜航器所在深度位置。由于海水密度一般都取海水密度标准定值，使得最终的计算精度往往不是很高。而精确获取船体所在深度位置要考虑的实际因素有很多，比如环境因素：包括水流、密度、温度等；比如状态因素：包括航向、速度、纵横倾角、加速度等。而这些环境参数、状态参数都是通过不同传感器进行获取。目前这些测量系统(设备)等传感器大都结构复杂、造价高、体积质量大，不便于装卸，有的传感器之间的部分监测功能还出现重复，但各检测数据结果又不一致，给获取参数的时效性、快捷性和精准性带来了很大的阻碍。微电子机械系统MEMS (Micro-Electro-Mechanical Systems)能够将各种微型机构、微型执行器、微型传感器以及控制电路和信号处理、直至接口、通信和电源进行一体化构建。同传统的各种传感器相比，其体积和价格可减少三四个数量级，精度也达到了使用要求 [ 1 ] [ 2 ] [ 3 ] 。 本文利用MEMS温盐传感器和MEMS陀螺仪芯片设计实现了一种基于MEMS微系统的深度计系统，通过准确获取海水密度，校正位置误差及传感器探测误差求得较为精准的深度信息。系统经过实验测量，同传统的压力式深度计相比，在一定程度上提高了2%~5%的探测精度。"
"基于MEMS微系统的深度计按微型化、模块化思想进行设计，系统组成见图1。 考虑到实用性和兼容性等问题，在不改变原有电子深度计的系统/设备的基础上，在原有的系统外部添加一个对外串行通讯接口以及一个与数据融合系统的MEMS通信接口获取压力数据。接口选用ADI公司生产的ADM2483芯片，ADM2483是ADI公司推出的基于其专利iCoupler磁隔离技术的隔离型RS-485收发芯片。较低摆率降低了不恰当的终端匹配和接头产生的误码，同时也消除了光电耦合中不稳定的电流传输率、非线性传输、温度和使用寿命等方面的问题。 图1. 基于MEMS微系统的深度计系统 温盐传感器采用专用传感器SBE9PLUS型温盐传感器，实测海水温度和盐度电导率，用于计算实际的海水密度值。 MEMS陀螺仪采用高精度高可靠性的电子陀螺仪芯片MPU9250，它由2部分组成，一组是3轴加速度还有3轴陀螺仪，另一组则是AKM公司的AK89633轴磁力计，融合了3轴加速度，3轴陀螺仪以及数字运动处理器(DMP)。其完美的I2C方案，可直接输出9轴的全部数据。 MEMS深度计系统通过压力传感器、温盐传感器、陀螺仪传感器及惯导系统对潜航器的压力、温盐、姿态等数据进行连续监测，通过数据综合处理模块计算求得更为精准连续的潜航器深度、纵横倾等综合姿态信息，最后采取直观友好的三维方式进行展示。"
"MEMS微系统深度计的综合深度计算，采用液体密度公式为基础，对相关参数进行实时测量并进行精度修正，并加入潜航器姿态位置变化校正得到。整体算法公式如下： H = ( P − A ) g × ρ + Δ H ( x , y , z , α , β ) + Δ H 动 态 (1) 式中：H为任意点水深(米)，P为绝对压力，A为大气压力， ρ 为海水密度，g为重力加速度， Δ H 为潜航器运动摇摆时，引起深度计位置变化的深度差值，其中， x , y , z 为深度计所在潜航器的相对空间位置， α , β 为纵、横倾角。 Δ H 动 态 为相关传感器实时测量的误差校正值。  为提高计算精度，重力加速度不采用标准值9.8米/秒，而是通过潜航器所在地理位置，按照地理纬度对重力加速度的影响，进行实时计算所得，修正公式如下： (2) 式中： Ч 为某点处的地理纬度的弧度单位。潜航器的GPS或北斗系统导航定位纬度值后，通过公式 Ч = w d / 57.29578 计算求得弧度单位值。  海水密度 ρ 在精度要求不高的时候，一般采用平均值1.025 g/cm 3 。但海水的温度、盐度和压力对密度有着很大影响 [ 4 ]，海水跃层就是因此而产生，这对潜航器安全航行有着致命影响。因此为提高精度，利用传感器实时测量海水盐度和温度等重要相关指标，采用TEOS-10海水热力学方程，精确计算获取潜航器所在的海水密度。 TEOS-10是全新的、高精度的综合公式，它基于海水的密度、温度与压强等关键性因素进行构建，采用世界大洋海水组成空间差异的绝对盐度，能够直接计算包括熵、焓、热容量等热力学变量。在绝大多数海域，精度同旧方程的密度差相比，超过了10 −2 kg/m 3 [ 5 ] [ 6 ] 。由于采取绝对盐度进行换算，适用范围为：0 ≤ S A ≤ 120 g/kg，−12℃ ≤ T ≤ 80℃，−0.1 Pa ≤ P ≤ 100 MPa，涵盖了高低温、高盐度、高压等极端环境 [ 7 ] 。 TEOS-10中计算海水密度公式如下： P = f ( S , T , P ) = ( g p ) − 1 (3) 式中， ρ 为海水密度；T为温度，P为压力，S为盐度，g p 为吉布斯函数对压强在绝对盐度和温度上的偏导数。TEOS-10中采取绝对盐度的计算思路，将海水吉布斯能分为水和盐两部分进行分别求解，然后相加求和。g p 计算公式如下： g p = g w ( T , P ) + g s ( S A , T , P ) (4) 吉布斯函数g又称热力势，是热力学的一种基本函数，由下式定义： g = h − ( T 0 + t ) / η (5) 式中：h为比焓，η为熵，T 0 = 273.15 K，即摄氏零度。 根据TEOS-10模型修正计算得到海水密度在不同盐度、温度的变化趋势见图2。 图2. 温度、盐度与密度关系图。(a) 温度–密度关系；(b) 盐度–密度关系 实际测量在同等压力P = 8 par情况下，海水密度条件1 (盐度S = 12%，温度T = 28˚)的深度值为80.0529米，海水密度条件2 (盐度S = 32%，温度T = 14˚)的深度值为81.5401米。相同压力不同海水密度，深度值差距在1.5米左右，误差达1.88%。可见，海水密度对深度值有着相当大的影响。  公式(4)中计算绝对盐度的T为T90温度标准。而有部分温度测量仪器采用T 68 温标进行测量，为降低误差，需将测量到的T 68 标准温度值转换成T 90 标准的温度值，转换公式如下： T 68 = 1.00024 * T 90 + 4.0 * 10 − 7 * T 90 2 (6) 根据测量的温度T 68 ，求解温标T 90 的二元一次方程，即可得到所需的温标T 90 的精准温度值。  以潜航器重心为原点(x 0 , y 0 , z 0 )建立位置坐标系，深度计在潜航器内部所在坐标位置为(x, y, z)。当潜航器在前后倾或者左右摇摆时，可认为船体是绕着原点位置进行转动。因此通过计算求得深度计因船体运动产生的高度差值，作为深度的误差修正。公式如下： Δ H = z + y * sin α − x * cos α * sin β (7) 式中， x , y , z 为潜航器内深度计的坐标位置，为已知； α 、β为船体的纵横倾角，可由MEMS陀螺仪芯片测量得到。  潜航器在海底连续航行时，都是通过陀螺仪和加速度计来判断运行轨迹。一开始通过一个起始基准点进行，随着长时间运行后，陀螺仪会产生误差积累，数据偏离值越来越大，这个时候就需要进行校正。而潜航器航行中的上浮下潜，深度变化值受船体纵倾角影响较大，因此主要考虑对纵倾角 α 进行校正。 单位时间t内的深度变化，可根据运动方程及潜航器纵倾角求得，用H 运动 表示，计算公式如下： H 运 动 = v * t * sin α (8) 同样，单位时间t内的深度变化也可对公式1按时间求导可得，用 d H 综 合 / d t 表示。 虽然一个是运动方程，一个是液体密度物理方程，计算角度不一样，但现实中潜航器的深度变化是相同的。因此，可建立门限值k，当两者差值大于k时，即误差超过允许范围，需要校正。则令 d H 综 合 / d t = H 运 动 ，由于速度v已知，最后可求得 α 值，将其作为陀螺仪的纵倾角最新校正数据。  由于各传感器的探测机理，在实时探测时，还会产生一定动态误差，包括时间延时，热延时和深沉效应。即： Δ H 动 态 = f ( 时 间 延 时 ， 热 延 时 ， 深 沉 效 应 ) (9) 其中，时间延时是由压力信号噪声引起的，它可以由滞后校准深度来进行修正；热延时主要是由于温度变化引起的，温度传感器因热传导问题，不可能瞬时得到精确温度数据，因此温度测量、电导率(盐度)测量具有一定的时间滞后特性，一般温度和电导率滞后时间为0.073秒(采样提前1.72个数据样本)溶解氧滞后2秒；深沉效应引起的误差主要是由上升、下降过速引起的数据出现尖峰打结现象，可以由数据的软件(编辑器标记)进行消除。从数据处理上该类误差无法修正，在上(下)速度0.2 M/S限制后，同层次重复来进行标准剔除。"
"建立测试环境进行算法验证，采样数据按论文 [ 8 ] 中提供的数据进行参考和比对。其中，压力P通过论文数据反推后得到实际值，在利用加压泵加压得到。海水密度 ρ 通过现场加盐和加热达到目标值。 论文 [ 8 ] 中变化数据为验潮仪在环境条件下，通过标准公式，代入密度求得的深度修正误差。因此，可根据公式进行反推，求得各深度点实际压力P，反推公式如下。 P = ( H + Δ H ) × g × ρ (10) 式中：H为验潮仪根据压力值10 dPa的计算观测值10米； Δ H 为论文给出的误差深度；g按论文9.8取值； ρ 取值1010~1030的密度范围。最后求得对应各点深度的实际压力值。 海水密度 ρ 按照世界大洋的平均盐度35%作为盐度定值，通过调节温度获得相关海水密度值，并在此基础上进行修正得到最终的海水密度数据。 将求得实际压力值P、经过修正后的海水密度 ρ 和重力加速度g，按MEMS深度计系统计算公式求得最后的综合深度。具体数据见表1。 Table 1 压力P 海水密度ρ 重力加速度g 深度H 9.8000 1.0100 9.7933 9.9077 9.8392 1.0120 9.7933 9.9277 9.8784 1.0140 9.7933 9.9476 9.9176 1.0160 9.7933 9.9674 9.9568 1.0180 9.7933 9.9871 9.9960 1.0200 9.7933 10.0068 10.0352 1.0220 9.7933 10.0264 10.0744 1.0240 9.7933 10.0459 10.1136 1.0260 9.7934 10.0653 10.1528 1.0280 9.7934 10.0847 10.1920 1.0300 9.7934 10.1040 表1. 融合数据表 融合计算后的深度误差值与论文中提供的数据误差比较见图3。 图3. 融合误差和论文数据误差对比 由图中可看出，由于原始数据采用一些定值进行测算，随着海水密度的变化，深度误差随之增大。而本文深度融合算法，在早期误差上有轻微波动，随着时间推移，自适应修正后，误差值趋于稳定。后经查证，恒定误差是由于在模拟环境下使用的加压泵设备老化，显示压力值和实际加压值有偏差而造成的，通过对压力传感器的误差补偿即可消除。"
"本文开展了基于MEMS微系统的深度计系统构建及精度控制的研究：首先利用MEMS技术，对潜航器已有部分传感器接口进行改造，并设计MEMS温盐度计、陀螺仪等微型传感器；其次，收集各MEMS传感器检测数据，并针对不同传感器进行动态误差校正，以保证监测值的精准连续；最后，根据建立的算法模型对各传感器探测数据进行整体关联，充分挖掘各传感器使用效能，减小误差和漂移，提高深度要素的探测精度。经过实测，MEMS深度计系统能够在不同温度、盐度、压力等条件下，得到更为精确的深度值。 随着硅微加工技术和MEMS技术的不断提高，MEMS传感器的各项性能参数的精度也在不断提高。在选用高精度MEMS传感器的基础上，还要进一步加大对多传感器的采集、控制和数据融合方面的研究，充分发挥各传感器优势，全面考虑所有影响潜航器深度的因素，切实提高潜航器获取深度位置和姿态参数的实时性和精准度，保证长航时稳定和安全。"
