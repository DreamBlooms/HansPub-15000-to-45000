"本文针对“X”型布局六旋翼飞行器的姿态控制问题，创建其简化数学模型，并结合PID与动态逆控制方法设计出一个姿态控制器。为了提高系统的鲁棒性，增加一个自适应矢量以补偿逆模型误差。仿真实验表明该控制器能达到快速响应并稳定跟踪指令的目的。 关键词 :六旋翼飞行器，动态逆，PID，姿态控制"
"由于六旋翼飞行器机动灵活、自主飞行的特点，在很多体力型及危险场合可以代替人来完成工作，因而得到了快速的发展。与四旋翼相比，它在遇到较强外力干扰时能表现出更好的稳定性和跟踪性，并且具有容错功能，单个甚至一对旋翼出现故障不能提供升力时，飞行器仍然能够实现安全降落 [ 1 ] 。因此，六旋翼飞行器将更加适用于在复杂、恶劣的环境下工作。如今，它的应用已涉足军用(军事侦察、边境巡逻、搜救、军事打击等)和民用(交通监测、商业航拍、突发事件现场图像采集、电力架线、快递投送、农药喷洒等)领域 [ 2 ] 。 六旋翼飞行器问世相对较晚，国内外针对它的研究多集中在建模与控制系统上。文 [ 1 ] 、 [ 3 ] 、 [ 4 ] 创建了“+”型布局六旋翼飞行器的数学模型，其中，文 [ 1 ] 采用PI和LQ方法控制六旋翼飞行器的姿态，PID和动态逆方法控制高度，PD方法控制水平位置，并通过仿真测试和分析了位置控制系统性能；文 [ 4 ] 使用PID控制姿态和位置，验证了控制器的可行性，但实验结果中目标值与实际值曲线只是近似重合。文 [ 5 ] 针对“X”型六旋翼飞行器进行研究，采用二阶滑模扰动观测器提供连续补偿，仿真验证提出的控制方法具有快速的收敛性和较强的鲁棒性。文 [ 6 ] 对四旋翼无人机控制算法进行调查研究，包括智能PID、LQR、H-infinite、滑模控制、反馈线性化、自适应控制、反演方法，分析了这些方法的优缺点，指出多种控制算法结合是未来的趋势，飞行控制算法应用的难点在于合理处理动态性能、稳态特性和控制器复杂性之间的关系。 本文以“X”型布局六旋翼飞行器为研究对象，在分析其所受力和力矩作用后，运用牛顿运动定律创建了它的简化数学模型。为了抵消系统的非线性，针对它的姿态控制设计了动态逆控制器，并增加自适应矢量以补偿模型逆误差，另外，采用PID控制器调节高度，建立了完整的姿态控制器。最后通过仿真实验证明控制器的效果。"
"为了简化六旋翼飞行器模型，作出如下假设： 1) 飞行器为一刚体，并且忽略旋翼的挥舞运动； 2) 飞行器关于机体系x、y、z轴对称； 3) 电机轴平行且垂直于飞行器上平面。 图1为“X”型布局六旋翼飞行器及其地面坐标系 和机体坐标系 ， 分别为飞行器的滚转角、俯仰角和偏航角。坐标系 和 间坐标旋转遵循Z-Y-X欧拉角顺序，通过矩阵 实现坐标变换及 实现角速度变换，有 (1) 式中的 、 分别代表cos、sin，以下类同 (2) 六旋翼飞行器飞行时受到重力 ，旋翼升力 ，空气阻力 的作用，如图2示；另外，还受到力矩的作用，包括气动力矩 、陀螺力矩 和阻力力矩 ，总力和力矩分别为 (3) 图1. 六旋翼飞行器坐标系统 图2. 六旋翼飞行器受力图 (4) 其中， 为推力因子 [ 7 ] ； 为单个旋翼转速； 、 分别为六旋翼飞行器在机体坐标系下的线速度和角速度； 和 分别为相应的阻力和阻力矩因子； 为电机、旋翼组件的转动惯量；而气动力矩分为滚转力矩、俯仰力矩和偏航力矩， (5) 分别引起六旋翼飞行器的滚转、俯仰和偏航运动，其中L为旋翼中心到机体中心的距离， 为旋翼反扭矩系数 [ 7 ] 。 牛顿–欧拉方程 [ 5 ] 在机体坐标系 下可表示为： (6) 由于近似认为飞行器关于机体系x、y、z轴对称，六旋翼关于质心的惯性张量I可简化为关于主轴的转动惯量 ，代入式(6)整理得： (7) (8) 经坐标变换，得到六旋翼飞行器的位置和姿态运动方程 (9) (10) 这样，式(7)、(8)、(9)、(10)就构成了六旋翼飞行器的非线性动态方程。"
"六旋翼飞行器的控制系统设计一般采取内、外环控制策略，内环控制姿态，外环控制位置。而位置控制的实质是维持高度值在期望的范围内，通过姿态的变化得到飞行器平移、侧滑及转向等运动。所以在六旋翼控制器的设计中，姿态控制是核心。下面建立六旋翼飞行器内、外两个回路动态逆控制器以响应姿态请求。 给定这样一种非线性系统 [ 8 ] (11) 其中， 为状态量， 为控制量， 为输出量，全局状态 可用于反馈控制，并且系统控制量与输出量维度一致。 为了响应输入 ，定义跟踪误差为 (12) 对输出求导 (13) 式中， ， 且可逆。 定义动态逆控制器 (14) 这里， 为逆动态模型的控制量，将式(14)代入式(13)得到误差动态系统 (15) 这时，可以很容易的选取 使系统稳定。  外回路响应姿态请求，定义姿态指令 与当前姿态角 的差值为 ，选取逆动态模型的控制量 (16) 根据六旋翼飞行器的姿态运动方程(10)得到动态逆控制器 (17) 式中， 为控制器外环各通道带宽； 为反馈线性化部分，这里并未出现。外回路动态逆控制器框图如图3示。  内回路控制飞行器的姿态角速率， 为内回路动态逆控制器的输出，式(8)可表示为 (18) 式中， 内回路控制器的输入请求为外回路控制器输出，即 。定义内回路的跟踪误差为 ，选取逆动态模型控制量 (19) 式中， 分别为PD控制器的比例、微分增益。 内回路动态逆控制器可描述为 (20) 该控制器框图如图4所示。  注意到上述动态逆控制器并未考虑外部扰动，对于角速率动态方程可描述为 (21) 其中， 描述参数不确定性或外部扰动引起的模型误差。 为了消除这个误差，考虑在逆动态控制矢量中增加自适应信号，可表示为 (22) 式中， 为PD控制器的输出； 为自适应信号。 继而有 (23) 图3. 六旋翼飞行器外回路动态逆控制器 图4. 六旋翼飞行器内回路动态逆控制器 这样就得到了带有不确定参数项 的误差动态系统。 作用于误差动态系统，会造成控制器对误差的收敛性。因此，可以构建基于误差 的自适应模型，以期消除 带来的影响 [ 9 ] 。这里，选取 ，其中， 为正定对角矩阵，并且认为 变化缓慢， 。 结合上述内容，创建图5所示动态逆控制器。 采用PID控制器调节飞行器的高度，这样完整的六旋翼姿态控制器可用图6描述。"
"为了验证上述动态逆控制效果，选取如表1所示六旋翼飞行器模型，并创建图7所示GUI仿真动画以更加直观的方式观察姿态响应。 在仿真开始后的0.5s、1s、1.5s分别给定滚转、俯仰及偏航角速率指令P c = 1 deg/s，Q c = −1 deg/s，R c = 1 deg/s，结果如图8所示。P c = 30 deg/s，Q c = −30 deg/s，R c = 30 deg/s时的曲线如图9所示。图中，内回路动态逆控制器对1deg/s角速度指令的响应时间为0.1 s左右，无稳态误差，而随着期望姿态角速率增大，响应时间增大，并且偏航通道对滚转、俯仰通道的影响也逐渐明显，但很快能恢复并跟踪目标，没有出现稳态误差。 图10为姿态控制器对姿态角和高度指令的响应曲线，在开始仿真后的0.5 s、1 s、2 s分别给定姿态角指令 ， 及高度指令 ，控制器对这些指令能够快速响应并且稳定跟踪，表现出很好的性能。 图5. 六旋翼飞行器动态逆控制器框图 图6. 六旋翼飞行器姿态控制器框图 Table 1 参数 m L I xx I yy I zz I r c T c q Kg mm kg∙m 2 kg∙m 2 kg∙m 2 kg∙m 2 N/(rad/s) 2 N/(rad/s) 2 数值 6.08 500 0.2972 0.2921 0.5823 0.0000784 表1. 六旋翼飞行器模型参数 图7. 六旋翼飞行器动画模型 图8. P c = Q c = R c = 1 deg/s时的姿态角速率响应 图9. P c = Q c = R c = 30 deg/s时的姿态角速率响应 图10. 姿态角及高度响应曲线"
"本文对“X”型布局六旋翼飞行器飞行中所受力和力矩进行分析，根据牛顿运动定律创建了它的简化非线性动态方程，并结合PID与动态逆方法设计了姿态控制器，并仿真验证控制效果。仿真结果表明控制器能够快速响应并且稳定跟踪指令，表现出很好的性能。"
