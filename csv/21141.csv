"EPON是配用电通信网中一种常用的通信和组网技术。在传输过程中，需要有效分配EPON网络的带宽，通常利用具有自适应周期的交错轮询方法分配传输时隙。为了解决固定轮询周期造成的等待和延迟，需要对ONU的流量进行分析和预测。本文以减小延迟为目的，提出了一种利用最小均方多项式和最小均方自适应滤波法预测单个EPON周期数据帧到达时间和周期持续时间的算法。利用分析得到的帧到达时间和下个周期持续时间，计算下个周期累积的数据量，进而分配对应的带宽和传输周期。仿真表明，该算法可以适应不同承载负荷与流量突发性网络，可以有效降低网络延迟。 关键词 :配电通信网，EPON，时延，流量分析，监控 Copyright © 2017 by authors and Hans Publishers Inc. This work is licensed under the Creative Commons Attribution International License (CC BY). http://creativecommons.org/licenses/by/4.0/"
"近年来，智能电网在国内飞速发展。智能电网作为现代化电力系统网络设施，利用自动化控制和现代通信技术，全面提高了电力和数据传输的效率、可靠性与设备安全性。智能电网的研究方向包括智能电网规划理论与方法、智能电网标准、智能调度体系、智能电力设备和智能电网通信技术等。配用电通信网是智能电网重要的组成部分，承担着电能分配、用电信息采集、电网质量监测等重要任务。配用电通信网大多采用光纤网络、电力线载波、无线公网等通信方式，其中，PON技术在安全性、实时性和传输带宽方面的性能更加优越，是配用电通信网组网中应用的重要技术。EPON是配用电通信网中常用的通信技术，因其具有高带宽、高可靠性、传输距离长、易于扩展、时延低、节省网络设备的优点，在配用电通信网骨干网建设中有着广泛的应用。EPON是基于PON技术和以太网协议的一种新的光纤接入技术，在物理层使用PON技术，在链路层则使用以太网协议。EPON通信系统一般由光线路终端(OLT)和光网络单元(ONU)和光分配网组成 [ 1 ] 。OLT提供PON光纤接口，ONU提供用户侧的业务接入服务 [ 2 ] 。多个ONU和OLT进行通信时，需要无源分光器进行信道分配和流量控制。为了控制多个ONU的接入和数据传输，提升网络性能，需要设计一种有效的带宽分配方法。目前的EPON网络建设中，常用的信道控制方法是具有自适应周期的交错轮询方法。该方法令OLT周期性地接收所有与之连接的ONU上的带宽请求，并根据此相应分配传输时隙。由于以ONU循环的方式进行时隙分配，没有考虑实时数据量的变化，会出现数据量较低的ONU在传输完成后仍然占用传输周期的情况，进而引发系统延迟。为了改进这种缺点，需要根据网络数据量情况，对EPON带宽或传输时隙进行合理分配，减少系统时延。 文献 [ 3 ] 利用进化算法遗传表达式设计了一种EPON流量分析方法，根据网络时间周期、数据包等待时间、当前带宽请求和历史带宽请求为每个传输周期进行动态带宽分配，以减少分组的传输延迟。该方法的优点是可以减少队列长度，增强网络QoS，缺点是并未考虑算法对于不同数据量的网络的适应程度和有效性。文献 [ 4 ] 研究了一种基于本地流量预测的动态带宽分配机制，该方法与静态带宽分配和交错轮询算法相比，可以提高上行传输的带宽利用率和平均分组延迟，缺点是并未验证算法对下行传输的性能影响。文献 [ 5 ] 提出了一种基于流量自相关的动态带宽分配方法，基于设置的动态阈值，对流量进行周期性预测，根据业务优先级分配带宽。该算法的优点是可以为不同优先级的业务分配不同的贷款资源，降低上行信道空闲时间，改善丢包率，缺点是未能研究应对突发性流量的带宽分配。文献 [ 6 ] 根据接入网性能数据、用户数量和QoS需求来预估所需数据量，但未考虑实时数据量和突发数据量的影响。文献 [ 7 ] 提出了一种基于自适应交错轮询方法的OLT输入流量的监测方法，以降低完整模拟EPON网络流量的复杂性。但该方法只考虑了输入流量，未考虑网络输出流量特点。文献 [ 8 ] 介绍了EPON自适应链路速率控制方法，根据业务量的不同切换下行速率，以节约网络整体能耗。该方法对业务量进行实时监测，但未考虑对网络时延的影响。文献 [ 9 ] 介绍了一种与hcDBA算法相结合的EPON流量预测方法，该方法在时延方面略有改进，但算法复杂性较高。文献 [ 10 ] 提出一种基于业务分类的动态带宽分配算法，将上行链路分为不同的传输周期，根据传输时间动态调整传输带宽。该方法可以提高EPON带宽利用率，但对网络整体性能提升不足。文献 [ 11 ] 提出一种针对ONU业务优先级排队的动态带宽分配算法，通过引入预测保障高优先级业务的时延，但未考虑网络整体时延性能和突发性业务的保障能力。 在本文中，基于之前提出的动态带宽分配和流量分析方法，提出了一种在单个EPON时间周期内应用的流量控制方法。该方法利用最小均方多项式，预测下一帧到达时间和下个传输周期的持续时间，并为下一个发送周期动态分配带宽。ONU根据两个时间量预计该阶段内缓存的数据量，并向OLT提出带宽分配需求。该算法应用于ONU内，可以兼容多点控制协议，并在较低的算法复杂度和实现成本下，实现对帧传输延迟的优化。 本文组织如下：第一章进行问题描述；第二章给出问题模型和关键参量的计算方法；第三章提出基于ONU的流量分析算法；第四章给出仿真结果；第五章给出结论。"
"本文设定一个OLT下连接多个ONU，且EPON的上、下行速率不等。EPON下行通信为连续方式，发送的以太网数据帧中载有ONU的标识逻辑链路标记，广播发送给每个ONU并实现数据帧的过滤 [ 12 ] 。当产生流量数据时，ONU提出带宽需求，由OLT进行仲裁和带宽分配。OLT和ONU遵从MPCP协议。光交换机聚合独立业务主站设备的数据帧，将输入流量馈送给ONU。业务主站设备与ONU之间以以太网连接，传输速率固定。每个业务主站设备有两种状态，分别为忙碌状态和空闲状态，忙碌状态产生流量，空闲状态不产生流量，两种状态始终交替出现。各个业务主站设备之间的状态彼此独立。因此，ONU的数据具备随机性和周期性，OLT可以预测ONU下个周期产生的数据，并分配给ONU相应的传输时隙和带宽。业务主站设备与ONU之间的网络模型如图1所示。业务主站设备将流量传输到OLT中，OLT遵循先到先得的服务原则，将这些流量按照到达时间进行排队。之后，通过分光器将输入流量馈送给ONU。ONU的缓冲区容量和下一周期的到达时间都会影响轮询周期中的等待时间。"
"对于每个业务主站设备，忙碌状态和空闲状态的分布如公式(1)所示。 (1) 其中，参数 和 分别与业务主站设备平均忙碌时间 和平均空闲时间 有关。本文假定业务主站设备产生的数据遵循帕累托效应。 和 的计算方法分别如公式(2)、(3)所示。 图1. EPON网络结构示意图 (2) (3) 分别是帕累托参数。每个时间周期对应于单个轮询时间，通过得到每个业务主站设备上的平均忙碌时间和空闲时间，再根据ONU的数量 、与每个ONU连接的业务主站设备数 和单个业务主站设备的负载 ，可以计算出网络需要提供的负载 ，如公式(4)所示。 (4) 定义 为ONU到OLT之间的距离， 是EPON的下行线路速率， 是ONU的上行链路速率， 是业务主站设备的链路速率。 LOT和ONU通过自适应周期时间的交错轮询方案进行通信。在每个周期中，OLT向EPON中的所有ONU发送携带带宽门限的授权信息。ONU按照门限消息中规定的协议方式响应并发送其数据，因此，在上行通信可以实现无冲突传输。除了发送ONU自身的数据之外，ONU还会发送通知消息，告知OLT它们的带宽需求，即ONU的缓冲区大小。在周期结束后，OLT会接收所有ONU的通知消息。此时，OLT开始执行动态带宽分配算法，计算下一个周期的带宽需求，并且进行新一轮的门限信息和通知信息的传送。 但是，动态带宽分配的过程需要考虑在轮询交错的时间点产生的数据及其带宽分配的影响。主要分为两种情况：第一种是已经在接近周期开始时产生的数据，这部分数据需要提前报告给ONU，并作为这个周期的缓存数据；另一种是在临近结束时产生的数据，这部分数据需要延迟报告给ONU，并作为下个周期的累积数据。这类突发性的数据可能会导致额外延迟和流量分析误差。对于这类情况，本文利用如下方法进行解决。首先，让每个ONU正好在生成当前周期的报告消息之前，通过估计其缓冲区的占用率进行预测，进而接收下一个周期的门限信息。然后，ONU可以使用报告信息将预测结果传达给OLT，而非向OLT报告当前的缓冲区大小。"
"本文提出一种ONU缓冲区的流量分析方法。定义瞬时ONU的缓冲区大小 ，下一个周期的门限消息到达时间为 。ONU设定日志，记录每次接收数据帧的大小 和到达的时间 。当数据帧到达时，对应的ONU缓冲器存储字节数 会增加。通过监控两次报告信息之间的发送数据帧来估算瞬时缓冲器的大小，如公式(5)所示。 (5) 在开始时刻，需要得到ONU初始队列大小 作为初始参数。之后根据到达时刻和数据帧的大小，利用 项多项式方程计算经过的时间 和缓冲区大小 ，如公式(6)所示。 (6) 公式(6)中的系数 为最小均方参数，可参考文献 [ 13 ] 、 [ 14 ] 的归一化最小均方算法。 各个ONU的缓冲区容量计算如公式(7)所示。 (7) 通过以上计算，ONU可以在给定的时间 预测将来的缓冲区容量。不过，当ONU创建通知信息时，下一个周期的门限信息到达时间并不确定，存在一定的随机性，因此ONU也需要预测门限信息的到达时间。本文通过归一化最小平方(NLMS)预测滤波器来预测ONU门限信息的到达时间。定义ONU预测的下一的周期的门限信息到达时间为 ， 的求解如公式(8)所示。 (8) 其中， 是归一化最小平方滤波器的阶数， 是在每个周期的滤波器系数， 的计算方法如公式(9)、(10)所示。 (9) (10) 其中， 是归一化最小均方算法的计算步长。 ONU缓冲区大小的预测算法归纳如图2所示。首先，不断监视日志文件中主机的传入流量，直到从OLT接收到门限通知消息。在接收到门限消息后，记录其到达时间 。利用流量记录来估计瞬时缓冲区大小，再利用先前的门限信息到达时间预测下一个门限信息的到达时间 。结合之前的缓冲区大小和 ，估计接收下一个门限信息时候的预期缓冲器大小。之后进行信息发送。首先发送接收到的门限信息中分配的帧数，然后发送携带带宽请求的报告信息。最后，将流量日志设置为剩余的缓冲区大小，并从算法第一步开始继续循环。"
"本文定义EPON网络架构为1个OLT连接8个ONU，OLT和ONU之间的距离固定为12公里。定义EPON上行速率为1 Gb/s，下行速率为10 Gb/s，业务主站设备的传输速率是100 M/s。定义共有15个 图2. 流量分析算法流程图 业务主站设备与光交换机相连，输入流量再从光交换机馈送给每个ONU。业务主站设备以1000字节的以太网帧形式传送数据。本文只分析多项式阶数为2的多项式预测算法。为了模拟不同通信流量突发情况，在仿真中，设计了高突发性、中等突发性和低突发性三种流量分布对应的参数，即分别设置参数 。仿真分析图分别如图3，图4所示。图3表示了在 时流量分析算法降低延迟的能力，图4表示了不同流量突发情况下分析算法的性能特点。 通过分析图3，可以得出，当网络流量相对平稳、中等负载的环境下，流量分析算法可以为网络节约25%的延迟。在低承载负荷条件下，算法的性能优化效果较低。负载越高，延迟降低程度越大。因此，该算法在平稳流量及中、高等负载的网络性能表现良好。 通过分析图4，可以得出，当网络的流量突发性增强时，算法的性能略有下降。通过对比可以看出，在三种流量突发性条件下，承载负荷在50%到70%的范围内，均可以降低25%以上的延迟，而对于流量突发性较强、承载负荷较高的网络，算法性能受到一定影响。产生这种现象的原因是，因为突发性流量持续的时间不规则，算法在计算下一个消息到达时间的过程中，会产生一定的误差。二阶多项式与一节多项式相比，在一定程度上可以增强预测的准确度，特别是在中等负荷的网络中，对延迟的降低还很明显。但在高负荷网络中，延迟降低程度有所下降，维持在10%左右。"
"EPON是配电通信网的一种常见通信方式。本文从降低通信延迟的角度考虑，设计了一种EPON流量分析算法，该算法利用多项式拟合和归一化最小均方算法，改进了基本的交错轮询时间周期算法，分别估算了瞬时ONU负载和轮询周期的持续时间，预测下一次传输时的ONU缓冲区大小，并报告给OLT。基于动态流量和时间估计，减少了轮询时间中的等待时间，进而降低时延，提高系统性能。仿真显示，该算法相比于将实时ONU缓冲区数据量报告相比，可以有效降低将EPON网络延迟降低20%，并且可以抵抗网络突发流量的影响。 图3. 中等突发性流量分布下使用流量分析算法的延迟对比图 图4. 流量分析算法在不同脉冲的流量下的延迟对比图"
