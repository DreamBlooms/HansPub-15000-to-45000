"本文通过研究给排水工程中管材造价与管径大小的关系，建立了一元线性回归模型与一元多项式回归模型，利用最小二乘法对模型的系数进行拟合，确定了管材造价与管径大小的公式，最后通过数值实验验证了算法的有效性。 关键词 :管材造价，回归模型，最小二乘法 Copyright © 2018 by authors and Hans Publishers Inc. This work is licensed under the Creative Commons Attribution International License (CC BY). http://creativecommons.org/licenses/by/4.0/"
"给排水管道工程是与工业生产、社会生活密切相关的工程之一，其工程投资占整个给排水工程投资的较大比重。在施工过程中，不同阶段的水流量大小不同，导致各管段采用的管材口径的大小不同。此外，由于不同口径的管材制作工艺不同，所以同材质的管材造价与管径的关系并不是一个确定的值。特别是随着科学技术的进步，各种新型特种管材纷纷被开发出来 [ 1 ]。如何确定管材造价与管径的关系便成为一个非常重要的问题。吴亚群 [ 2 ] 利用线性回归模型给出了球墨铸铁管造价公式，不过其中的管材材质，制作工艺都被限制，使得求出的一元线性公式，没办法进一步推广，难以有效的解决实际问题。刘瑞，姚青云，李铁军等人 [ 3 ] 管道承压来计算管道造价，给出了一种计算PVC管造价的新方法，但数据搜集相对麻烦，在实际应用时，有很大的弊端。本文利用工程中易于获取到的管径大小与单位长度的管材造价数据，基于实际应用问题，改进线性回归模型，提出利用多项式模型来拟合管径大小与单位长度管径造价的关系函数。最后，通过数据实验算例，证明了此方法的可行性。"
"在工程施工过程中，进行造价估算是一件非常重要的事。造价估算对原材料购买，施工队的人数，工程质量把握等都有着举足轻重的参考价值。 假设已知某给排水工程中所用的某种材质的管材的单位造价( y i )与管材口径的大小( x i )的价格表以及对应的不同口径的需求量( p i )，具体信息见表1。施工方已知不同口径管材的需求量( p i )，要估算本工程中这种管材消耗的资金。假设管材供应商所提供的价格表并不全面，管径大于 x n 的管材造价数据并未给出。问如何利用现有的数据推断出这种管材所消耗的资金M (元)。 首先，已知消耗的资金应该是这种管材不同口径所需资金的总和，目标函数应为： M = ∑ i = 1 t q i = ∑ i = 1 t p i y i 其次，由于管径大于 x n 的单位管材造价数据未知，所以 ∑ i = n + 1 t p i y i 未知。不过根据表1中数据，可以 Table 1 管材口径/mm 管材造价/(元/m) 需求量/m 资金/元 x 1 y 1 p 1 q 1 x 2 y 2 p 2 q 2 x 3 y 3 p 3 q 3 x n y n p n q n x t 表1. 管材的单位造价与管材口径的大小的价格表 假设管材的口径和管材造价之间存在某种隐藏函数关系 y ( x ) 。如果这种函数关系存在，目标函数为 M = ∑ i = 1 t q i = ∑ i = 1 t p i y ( x i ) 。 最后，求出管材口径大小与单位长度管材造价的隐藏的函数关系 y ( x ) ，就能得到总资金M。  要考察的一元线形回归模型为 { y = a + b x + ε E ( ε ) = 0 , D ( ε ) = σ 2 其中x是管材口径大小，y是管材的单位长度造价， a , b 是两个未知参数， ε 为其他随机因素对y的影响，并且 ε 是不可观察的、均值为0的随机变量。在该模型下，第i组观测值记为 ( x i , y i ) ，是一元线性回归方程的实验值，利用实验值对 a , b 作估值。 设有n组观测值： ( x 1 , y 1 ) , ( x 2 , y 2 ) , ⋯ , ( x n , y n ) 。将上述观测值代入一元线性回归模型： { y i = a + b x i + ε i , i = 1 , 2 , ⋯ , n E ( ε i ) = 0 , D ( ε i ) = σ 2 , ε i > 0 使用最小二乘法计算模型中的未知数 a , b 。 设函数Q是二元函数。 Q ( a , b ) 为偏离真实直线的偏差平方和。记 Q = Q ( a , b ) = ∑ i = 1 n ε 2 = ∑ i = 1 n ( y i − a − b x i ) 2 (1) 求 a , b 的估计值 a ^ , b ^ ，使得 Q ( a ^ , b ^ ) = Q min ( a , b ) (2) 然后(2)式分别对变量 a , b 求偏导数，得到这个函数的驻点，用 a ^ , b ^ 取代 a , b ： { ∑ i = 1 n ( y i − a ^ − b ^ x i ) = 0 ∑ i = 1 n x i ( y i − a ^ − b ^ x i ) = 0 (3) 由(3)式可解得 { a ^ = y ¯ − b ^ x ¯ b ^ = x y ¯ − x ¯   y ¯ x 2 ¯ − x ¯ 2 (4) 其中 x ¯ = 1 n ∑ i = 1 n x i , y ¯ = 1 n ∑ i = 1 n y i , x 2 ¯ = 1 n ∑ i = 1 n x i 2 , x y ¯ = 1 n ∑ i = 1 n x i y i 。 用上述方法求出得估计值 a ^ , b ^ 称为 a , b 的最小二乘估计。回归方程为： y = a ^ + b ^ x , y ¯ = b ^ ( x − x ¯ ) 其中， b ^ 为拟合直线的斜率， a ^ 为拟合直线在 x = x 0 的截距，实验值 ( x i , y i ) 的几何重心 ( x ¯ , y ¯ ) 落在拟合直线上。  对于已给出的实验值 ( x i , y i )   ( i = 1 , 2 , ⋯ , n ) ，可以构造出m次多项式 [ 4 ] f ( x ) = ∑ j = 0 m a j x j (5) 求多项式的系数 a j ，使得 f ( x i ) − y i 的平方和最小，设多项式函数P： P min = ∑ i = 1 n [ f ( x i ) − y i ] 2 = ∑ i = 1 n ( ∑ j = 0 m a j x j − y i ) 2 (6) 分别对多元函数P中的每个自变量 a j 求偏导数： ∂ P ∂ a j = 2 ∑ i = 1 n ( ∑ k = 0 m a k x i k − y i ) x i j       ( j = 0 , 1 , 2 , ⋯ , m ) (7) 求多元函数P的驻点，即令 a j 的偏导数都为0： ∂ P ∂ a j = 2 ∑ i = 1 n ( ∑ k = 0 m a k x i k − y i ) x i j = 0 (8) 对(8)式化简得到： ∑ k = 0 m ( ∑ i = i n x i j + k ) a k = ∑ i = i n x i j y i ( j = 0 , 1 , 2 , ⋯ , m ) (9) 可以将(9)式写成矩阵的乘积 [ 5 ] ： = [ c 0 c 1 ⋯ c m c 1 c 2 ⋯ c m + 1 ⋮ ⋮ ⋱ ⋮ c m c m + 1 ⋯ c 2 m ] × [ a 0 a 1 ⋮ a m ] = [ b 0 b 1 ⋮ b m ] (10) { c k = ∑ i = i n x i k , ( k = 0 , 1 , 2 , ⋯ , m ) b k = ∑ i = i n x i k y i , ( k = 0 , 1 , 2 , ⋯ , m ) (11) 设 C = [ c 0 c 1 ⋯ c m c 1 c 2 ⋯ c m + 1 ⋮ ⋮ ⋱ ⋮ c m c m + 1 ⋯ c 2 m ] ， A = [ a 0 a 1 ⋮ a m ] ， B = [ b 0 b 1 ⋮ b m ] ，(10)式可以表示为： C A = B 。解出多项式回归的系数 a j ( j = 0 , 1 , 2 , ⋯ , m ) 就能够得到拟合函数关系： f ( x ) = a 0 + a 1 x + ⋯ + a m x m = ∑ j = 0 m a j x j 其中x为不同管径的取值， f ( x ) 为不同管径下的管材造价。  一元线性回归模型简单易操作，相比多项式而言，所求的变量更少，并且解决方法更加直观，更好理解。但是在拟合的精确度方面，一元线性回归模型不能与多项式模型相比，特别是在比例系数发生变化的情况下，一元线性回归模型只能建立出一个粗略的函数模型。一元多项式回归模型 f ( x ) = a 0 + a 1 x + ⋯ + a m x m ， 拟合的精度高，能够表示的函数种类多。当 n = 1 时多项式模型就化为 y = a 0 + a 1 x ，所以可以使用多项式回归模型来表示一元线性回归模型。多项式回归模型的缺点是计算量太大，但利用计算机软件求解，过程将会大大简化，缺点比较容易克服。综上所述，一元多项式回归模型要优于一元线性回归模型。"
"某给排水工程中所用的石墨铸铁管材的单位造价与管材口径的大小的价格和不同口径的需求量均已给出，具体信息见表2。现在施工方已经确定了不同口径的管材的需求量，需要估算工程中这种管材所消耗的资金，但管材供应商所提供的价格表并不全面，管径大于500 mm的单位管材造价数据并未给出。要求利用现有的数据推断出这种管材所消耗的资金 [ 6 ]。 首先建立求解消耗资金的目标函数，然后利用回归模型建立单位长度管材造价与管材口径大小的函数关系，将原问题的自变量由管材造价转换为管材口径的大小，最后求解目标函数。  假设管材的口径和管材造价之间存在某种隐藏函数关系 y ( x ) ，可以把目标函数写为 M = ∑ i = 1 t p i y ( x i ) 的形式，求出单位管材造价与管材口径的函数关系 y ( x ) 即可。 1) 做出散点图 为了简便，计算时以50 mm为一个单位。首先确定回归模型，求出单位管材造价与管材口径的函数关系，利用MATLAB软件作图；如图1所示。 2) 确定数学模型 从散点图我们可以看出，数据近似线性函数，可以选择一元线性回归模型，多项式回归模型。 ① 一元线性回归模型。首先设 y i = a + b x i + ε i , i = 1 , 2 , ⋯ , n 再设 Q min = Q ( a , b ) = ∑ i = 1 n ε i 2 = ∑ i = 1 n ( y i − a − b x i 2 ) 然后经过(2)~(4)式，求解： Table 2 管材口径/50 mm 管材口径/mm 管材造价/(元/m) 需求量/m 1 50 96.97 30 2 100 102.5 50 3 150 138.27 70 4 200 186.27 60 5 250 241.91 120 6 300 295.47 300 8 400 410.62 150 10 500 563.8 200 表2. 石墨铸铁管材的单位造价与管材口径的大小的价格表 图1. 管材造价与管材口径的散点连线图 { a ^ = y ¯ − b ^ x ¯ b ^ = x y ¯ − x ¯   y ¯ x 2 ¯ − x ¯ 2 其中 x ¯ = 1 n ∑ i = 1 n x i , y ¯ = 1 n ∑ i = 1 n y i , x 2 ¯ = 1 n ∑ i = 1 n x i 2 , x y ¯ = 1 n ∑ i = 1 n x i y i 解得 { a ^ = − 4.1816 b ^ = 53.0580 所以一元线性回归模型为 y = 53.0580 x − 4.1816 ② 多项式回归模型 由于图1近似线性函数，所以多项式回归模型的最高次数为二次即可。设 f ( x ) = a 0 + a 1 x + a 2 x 2 记 P min = ∑ i = 1 n [ f ( x i ) − y i ] 2 = ∑ i = 1 n ( ∑ j = 0 m a j x j − y i ) 2 由(6)~(11)式的计算过程，我们可以得到计算的主要数据如下： C = [ 8 39 255 39 255 1953 255 1953 16371 ] ， B = [ 2035.8 13367 104080 ] 通过MATLAB软件求解，可得 C − 1 = [ 1.4610 − 0.5694 0.0452 − 0.5694 0.2673 − 0.0230 0.0452 − 0.0230 0.0021 ] 因此 A = C − 1 B = [ 64.4780 18.0544 3.1994 ] 故 a 0 = 64.4780 , a 1 = 18.0544 , a 2 = 3.1994 拟合的函数为 f ( x ) = 64.4780 + 18.0544 x + 3.1994 x 2  利用MATLAB软件做出两种模型分别拟合的函数值与原数据对比图，如图2所示，左边是线性回 图2. 两种拟合函数值与原数据对比图 图3. 两种模型的数值误差对比图 归模型拟合的函数值，右边是多项式回归拟合的函数值。 从图2可以看出，线性回归所拟合的函数值与原数据误差一直处于忽大忽小的状态，而多项式回归所拟合的函数值与原数据的误差越来越小，接近于0。通过图3对比两种回归模型对原数据的误差，很直观的看出在本算例中多项式回归模型的误差是远远小于线性回归模型的，这就说明，多项式回归是比线性回归更能拟合出管材口径大小和管材造价所隐藏的函数关系。因此本题采用多项式拟合的结果进行求解。  将拟合的函数为 f ( x ) = 64.4780 + 18.0544 x + 3.1994 x 2 代入 M = ∑ i = 1 t p i y ( x i ) 中，可得 M = ∑ i = 1 t p i ( 64.4780 + 18.0544 x + 3.1994 x 2 ) 。 通过上面求出的数学模型，施工方只需要知道管径大小(单位：50 mm)以及各自的需求量就能求出这种管材所需要的总资金。"
