"针对传统施工升降机平层过程需要人工判断、人工操作、精度较差、智能化不高的问题，提出了将改进的BP神经网络应用到施工升降机中的平层控制系统。该系统基于DSP主控制器，首次使用时通过自学习，记录相应楼层信息，利用优化的BP神经算法对设计的网络进行训练和仿真，在升降机的运行过程中，升降机在与设定楼层高差为L时自动减速，当到达设定楼层时自动精确停靠，实现自动平层过程。 关键词 :升降机，BP神经网络，平层控制 Copyright © 2020 by author(s), Yangtze University and Hans Publishers Inc. This work is licensed under the Creative Commons Attribution International License (CC BY 4.0). http://creativecommons.org/licenses/by/4.0/"
"随着我国基础设施建设能力的不断提高，建筑行业发展日益迅速，建筑难度持续提高，对施工技术的要求也越来越高 [ 1 ]。在建筑施工领域，施工升降机是运送垂直升降作业人员必要的设备，传统的施工升降机大多选用接触器或继电器作为开关，以直接启动和机械抱闸的原始方法进行启动和停止，整个过程大都依靠人工手动和人工经验控制来完成，存在精度低、效率低、舒适度差、智能化程度不高、机械损耗严重等很多缺点，难以满足当前高层建筑的施工要求 [ 2 ] [ 3 ] [ 4 ]。随着异步电机变频调速技术的进步，利用变频器 [ 5 ]，结合DSP芯片和智能神经网络进行精确的运算控制，可以有效地解决上述问题，获得良好的运行特性 [ 6 ]。各种信息技术的应用使施工升降机械的自动控制迎来了崭新机遇，各种传感控制技术、荷载自适应控制技术、自动平层控制技术等，大大提高了设备的耐久性和安全可靠性 [ 7 ] [ 8 ]。本文主要介绍一种智能化的自动平层控制系统，使其实现精确、高效的自动平层。"
"平层控制系统设计实现类似电梯功能的智能精确平层的目标功能，主要有三项关键技术： 1) 信息采集 系统通过光电编码器将电机输出轴上的旋转速度、运行方向和位置转换转变成脉冲或数字量，利用压敏器件，将升降机负载重量转换成连续电压信号，均上载至DSP主控制器，为平层制动距离的预测提供样本数据。 2) 制动距离预测 在特定情况下，假如光电编码器的输出脉冲或数字信号与存储器中储存的楼层高度信息吻合则执行机构电机停止转动。系统中的变频器是一个黑匣子系统，无法直接设定预测距离，神经网络通过自己对数据的泛化和系统的整定，能够模拟逼近任何输入输出所遵循的内在规律，并且能够通过自我优化学习，不断提高输出的准确性和抗干扰性，适合本系统制动距离的预测。因此，系统通过人工神经网络来预测平层时的制动距离，使平层控制更加智能化。 3) 电磁抱闸设计 DSP主控制器和抱闸系统协同控制平层的停车，在达到指定楼层位置时，电机停止转动，同时抱闸系统自动开启。为了提高停车的响应速度和线性平稳度，变频器设置为斜坡停车，继电器控制电磁抱闸吸合或断开，实现平层过程。"
"BP神经网络基于误差逆向传播思想，主要包括输入层、隐含层及输出层三层结构。网络传输包含两个阶段，即信号前向传输和误差逆向传输。输入信号在前向传输过程中，经过隐含层，在输出层得到输出信号。如果输出信号与预期设定的参数不一致，误差开始逆向传输，经输出层、隐含层、数层依次优化权值和阈值，降低误差，直到达到设定参数，即停止训练 [ 9 ] - [ 15 ]。图1为标准BP神经网络结构，各层神经元节点数分别为M、q、L。输入信号为 x 1 , x 2 , ⋯ , x M ，网络输出信号为 y 1 , y 2 , ⋯ , y L ，预期输出信号为 t k ( k = 1 , 2 , ⋯ , L ) ，误差信号为 e k ( k = 1 , 2 , ⋯ , L ) 。 图1. BP神经网络模型 根据上述原理，BP神经网络算法实现主要包括信号的正反两个传输过程 [ 10 ] [ 11 ]，具体如下： 1) 信号的正向传输过程。 隐含层第i个节点的输入 n e t i 为 n e t i = ∑ j = 1 M w i j x j + δ i (1) 隐含层第i个节点的输出 o i 为 o i = ϕ ( n e t i ) = ϕ ( ∑ j = 1 M w i j x j + δ i ) (2) 输出层第k个节点的输入 n e t k 为 n e t k = ∑ i = 1 q w k i y i + δ k = ∑ i = 1 q w k i ϕ ( ∑ j = 1 M w i j x j + δ i ) + δ k (3) 输出层第k个节点的输出 o k 为 o k = ψ ( n e t k ) = ψ ( ∑ i = 1 q w k i y i + δ k ) = ψ [ ∑ i = 1 q w k i ϕ ( ∑ j = 1 M w i j x j + δ i ) + δ k ] (4) 式中， x j 为j节点的输入， j = 1 , 2 , ⋯ , M ； w i j 和 w k i 分别为输入层到隐含层和隐含层到输出层的权值； δ i 和 δ k 分别为隐含层和输出层i节点和k节点的阈值； ϕ 和 ψ 分别为网络隐含层及输出层的激励函数； o k 为k节点的输出。 2) 误差的反向传输过程。 在标准BP神经网络中，输入样本p的误差可用如下函数表示： E p = 1 2 ∑ k = 1 L ( t k p − o k p ) 2 (5) 式中，L为网络输出层神经元节点数； o k p 和 t k p 分别为样本p条件下节点k的实际输出和目标输出。 为使网络收敛，各层网络权值沿着梯度下降最快的方向进行修正。由下降梯度法得隐含层与输出层神经元样本p作用时的加权系数增量公式，如式(6)~式(11)所示： w i j ( k + 1 ) = w i j ( k ) + η δ i p o j p (6) w k i ( k + 1 ) = w k i ( k ) + η δ k p o i p (7) δ k i ( k + 1 ) = η δ k i ( k ) (8) δ i j ( k + 1 ) = η δ i j ( k ) (9) δ k i p = o k p ( 1 − o k p ) ( t k p − o k p ) (10) δ i j p = o i p ( 1 − o i p ) ( ∑ k = 1 L δ k p ⋅ w k i ) (11) 式中， η 为学习速率， η > 0 ； o i p 和 o j p 分别为样本p条件下隐含节点i和输入节点j的输出。 BP神经网络与其他算法相比，计算量较小、网络相对简单、并行性较高。但这种算法也有一些弊端，如学习效率不高，易于产生局部极小值，收敛速度不快，不适合升降机在线平层控制，存在样本依赖。因此，标准BP神经网络算法改进势在必行。  为了有效改善网络性能，减小网络误差，在标准BP算法中添加动量项，使权值不断修正；自动调整学习步长，提高学习速率，形成改进的BP网络算法 [ 12 ] [ 13 ] [ 14 ] [ 15 ] [ 16 ]，如式(12)所示。 { w ( k + 1 ) = w ( k ) + η ( k ) [ ( 1 − α ) D ( k ) + α D ( k − 1 ) ] η ( k ) = 2 λ η ( k − 1 ) λ = sgn [ D ( k ) D ( k − 1 ) ] (12) 上述算法能够自动修正迭代过程中的学习步长，让误差函数以相对合理的步长沿着梯度曲面的各个方向逼近极小点。 BP网络在学习过程中沿着误差梯度变化最大的反方向不断修正网络阈值和权值，使网络误差达到最小，图2为网络具体的学习流程。 图2. BP网络的学习流程"
"平层的制动主要包括两个过程，即提前减速和停车，通过变频器可预先设置升降机的运行速度和减速时间 [ 2 ] [ 3 ]。由工作经验可知，制动距离主要与升降机货台的运行速度、货物载重量和上下运行方向等因素有关。以升降机上升运行为例，当升降机停止运行时，则平层有三种情况，如图3所示。 图3. 平层停车示意图 1) 理想情况：升降机吊笼平台与该楼层底板恰好平齐；2) 不理想情况：升降机吊笼平台还没有到达楼层地板的位置，与目标高度还有一段距离δ1，此时要重新启动电机，因此这种情况在实际运行中要绝对禁止；3) 正常情况：升降机吊笼平台超出楼层地面一段距离，记为δ2，表示吊笼平台与楼层恰好齐平时还没有完全停止，此时需要人工操作电磁抱闸系统实现平层过程。"
"为提高平层精度，降低机械磨损和能量损失，减少人工操作次数，系统引入智能BP神经网络实现制动距离L'的预测，使L'与实际制动距离L尽量相等，电磁抱闸时吊笼速度尽量为0。由于实际制动距离主要受升降机运行速度、载重和运行方向三个方面的影响，因此在设计神经网络时，输入信号为这三个变量，输出信号为要预测的制动距离，由于输入层和隐含层神经元个数M和q之间具有q = 2M + 1的近似关系，由M = 3，得q = 7。隐含层和输出层的传递函数分别选用tansig和logsig函数。确定了网络结构和训练方法后，在Matlab [ 17 ] 中，用标准BP算法和改进算法对网络模型分别进行仿真分析，训练样本和两种算法的误差性能曲线分别如表1和图4所示。 Table 1 速度(m/s) 载重(t) 运行方向(0/1) 制动距离(m) 0.5 0 1 0.252 0.5 1 1 0.268 0.5 2 1 0.312 1 0 1 0.401 1 1 1 0.512 1 2 1 0.689 1.5 0 1 0.692 1.5 1 1 0.803 1.5 2 1 0.962 0.5 0 0 0.269 0.5 1 0 0.315 0.5 2 0 0.358 1 0 0 0.439 1 1 0 0.594 1 2 0 0.726 1.5 0 0 0.738 1.5 1 0 0.801 1.5 2 0 0.991 表1. 训练样本表格 图4. BP神经网络的训练结果 当设置的误差参数ε = 10 − 4 时，标准BP算法需要训练460次，改进算法只需要7次即可达到设定的目标值，效率远远高于标准BP算法，实现了精准预测制动距离，以便能够快速抱闸平层，从而减小了能量损失和机械磨损，增加了平层精度。利用上述数据，结合已经训练好的BP神经网络，在Matlab中，得到制动距离预测曲面图，如图5所示。 图5. BP神经网络预测曲面图 图5中，xyz分别为升降机运行速度、车厢载重和上升过程中预测的制动距离L'，由图可知当速度和载重增加时，制动距离也跟着非线性增大，与选择的训练样本变化的趋势一致，符合基本的变化规律。"
"本文提出基于改进BP神经网络的施工升降机平层控制系统，首先介绍了智能平层控制系统的三个关键技术，其次对标准BP神经网络和改进神经网络算法做了简单介绍，将其引入到施工升降机制动距离预测的网络模型中，利用Matlab对设计的网络进行训练，得出训练结果与样本变化趋势一致，能够预测制动距离，可进一步将其应用到平层在线控制系统的设计中。"
