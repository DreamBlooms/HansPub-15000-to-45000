"本文描述的视频光照补偿系统在不更改用户现有视频监控系统的硬件基础上，通过终端嵌入视频处理系统软件，对视频信号进行光照补偿。本文定义了亮度系数的概念，确定了有效的亮度系数阀值，用以决定是否进入光照补偿模块。在光照补偿算法中，本文在视频帧间处理过程中通过计算两帧图像亮度系数差值来决定是否采用前一帧图像的亮度增量，从而有效的减少了程序运行时间。 关键词 :视频监控系统，光照补偿，亮度系数，嵌入式 Copyright © 2019 by author and Hans Publishers Inc. This work is licensed under the Creative Commons Attribution International License (CC BY). http://creativecommons.org/licenses/by/4.0/"
"视频监控现在广泛应用在交通、刑侦、银行、小区物业管理、工业生产监控等领域。天气晴朗时监控系统采集到的图像质量良好，能够达到预先设计的标准；但是在不良的光照条件下，例如夜间、清晨和黄昏，图像的质量严重退化，甚至目标模糊，难以辨认。这种情况严重影响了监控系统的稳定性，同时退化的图像还会影响到其它系统的正常工作。对于不良光照下各种监测系统中获取图像景物进行实时清晰化处理方法的研究具有重大的现实意义。 在图像的获取过程中，由于拍摄环境的复杂性，当光照条件(包括强度和光谱组成)变化时，采集的图像差别较大，影响图像的定性和定量分析，因而必须对图像进行光照补偿。目前，光照补偿技术广泛应用于印刷质量检测、目标跟踪、医学图像分析、智能交通等诸多关于图像处理的系统中。光照强度补偿主要是消除由于实际光照条件不均匀，偏光、侧光、高光等导致的过亮、过暗、阴影的影响。 视频采集过程受诸多因素影响，如夜间或者暗光拍摄条件下表现为光照不足、亮度偏低；光线遮挡使得形成的图像一部分明亮另一部分较暗，造成光照不均；反光或强光源使得获取的图像亮度分布不均勾，高亮区域细节模糊。光照不足或者光照不均一方面会造成图像主观效果不佳，难以满足人们视觉感官的需要，另一方面对于后续的图像处理比如模式识别 [ 1 ]、目标跟踪都会造成较大影响。由此出现图像增强技术对光照不均图像进行增强处理提高质量。图像增强技术根据图像质量情况和不同的应用釆用信号处理技术手段达到增强局部或者整体特征的目的 [ 2 ] 。针对光照不均匀图像的增强处理，常常采用的算法主要有：灰度变换方法 [ 3 ]、同态滤波方法 [ 4 ]、小波变换增强 [ 5 ]、基于Retinex理论的算法 [ 6 ] 等。 针对彩色图像，一些研究人员也进行了相关的研究 [ 7 ] [ 8 ] [ 9 ] [ 10 ] 。总结起来，现有彩色图像的光照补偿方法可以归结为两种：一种是对R、G、B三个通道分别进行色彩矫正 [ 9 ] [ 10 ] ；另一种是将RGB 彩色图像转换到其它彩色模型进行亮度分量的矫正 [ 7 ] [ 8 ] )。文献 [ 8 ] 中简略提到了这两种方法。 本文开发了一套软件系统，这种软件系统在不更改用户现有视频监控系统的硬件基础上，通过终端嵌入本发明的视频处理系统软件，对视频信号进行恢复和处理，克服光照的不良影响。该视频处理系统利用图像处理技术对视频流的每一帧进行处理来克服恶劣光照环境下图像退化造成的模糊，进行实时光照补偿。以保证视频系统全天候正常地工作以及系统的稳定性。"
"文献 [ 10 ] 提出一种基于色彩保持的低照度图像增强算法，采用抛物线函数增强亮度。低照度图像的首要特点是光照不充分、图像整体效果较暗，所以低照度图像增强的首要是增强每个像素的亮度。由于在RGB空间中，R、G、B三分量既包含颜色，也包含了亮度信息，如果把灰度图像增强方法直接用于彩色图像增强，在亮度发生改变的同时，颜色也会发生改变，但如果两个像素点、在RGB空间的值是成比例的，即： 那么这两点具有相同的颜色，只是亮度不同，且亮度增量为。所以要在保持色彩不变的前提下实现低照度图像增强，关键在于亮度增益的确定。所以先通过亮度增强，获得亮度增量，再调整每个像素的RGB值。 抛物线函数的特点，极低灰度区变换较大，从中灰度到高灰度变换幅度较小，不会由于亮度增益过大而引起色彩失真。灰度图像增强中常用对数函数，图1所示为对数函数与抛物线函数，从图1中可以看出，对数变换把极低灰度都变换到约灰度级50，灰度范围0~75约变换到50~200，所以拉伸较大，亮度增强幅度大，引起一定的颜色失真。抛物线函数变换，除了极低灰度区变化较大，中灰度区有小幅度变化，高灰度区几乎没有变化，所以，可以增强图像中暗区细节，同时避免高亮区(光源附近)的失真。 图1. 光照补偿模块流程图"
"其系统框图如图1。首先判定当前视频帧图像是否需要进行光照补偿；将当前图像转化的HSV空间，得到图像的亮度值V(i)，定义亮度系数： L = ∑ j = 1 255 i m ∗ n 其中变量i是通过判定条件： V ( i ) > [ V ( max ) − V ( min ) ] / 2 得到满足该条件每一亮度级的图像像素点的个数，m、n为图像的尺寸。本文通过计算大量光照不充分、整体效果较暗的图像的亮度系数L，总结出一个有效的亮度系数阀值L 0 = 0.2，当L < L 0 时，进入光照补偿模块。否则，进行下一帧的判定。对下一视频帧图像，本文通过计算它与前一视频帧图像的亮度系数差值来决定是否采用前一视频帧图像的亮度增量，从而有效的减少了程序运行时间。  (1) 读取当前视频帧图像 f ( x , y ) ，其亮度系数为L； (2) 采用HSV色度空间实现亮度和颜色分离，其中V分量为亮度信息。 (3) 在HSV空间中将图像按亮度信息灰度化，即： V 1 ( x , y ) = max ( R 1 ( x , y ) , G 1 ( x , y ) , B 1 ( x , y ) ) ， 其中， R 1 ( x , y ) ， G 1 ( x , y ) ， B 1 ( x , y ) 为原彩色图像的三个彩色分量。 (4) 获取亮度增量 λ ：采用抛物线函数对亮度进行非线性变换，即： V 2 2 = 2 p V 1 ， 其中p为抛物线的系数，V 1 为原灰度化图像的亮度。 亮度增量： λ = V 2 V 1 (5) 更改每个像素RGB值： R 2 = λ R 1 ， G 2 = λ G 1 ， B 2 = λ B 1 ， 由R、G、B三分量组合成RGB图像。 (6) 对进入光照补偿模块的下一帧图像 f 1 ( x , y ) ，它的亮度系数为L 1 ，求取它与前一视频帧图像 f ( x , y ) 亮度系数的差值 d = | L − L 1 | ， (7) 如果 d < 0.01 ，则用步骤(4)获得的 λ 处理该视频帧图像，否则重复步骤(2)。"
"本文描述的视频处理系统在不更改用户现有视频监控系统的硬件基础上，通过终端嵌入本发明的视频处理系统软件，对视频信号进行恢复和处理，克服监控视频复杂非线性光照积弱光照影响。系统具有自己的独创点。本文定义了亮度系数的概念，通过计算大量光照不充分、整体效果较暗的图像的亮度系数，总结出一个有效的亮度系数阀值 L 0 = 0. 2 ，当L < L 0 时，进入光照补偿模块。否则，进入下一帧的判定。在光照补偿算法中，本文在视频帧间处理过程中通过计算两帧图像亮度系数差值 d = | L − L 1 | 来决定是否采用前一帧图像的亮度增量 λ ，从而有效的减少了程序运行时间。"
