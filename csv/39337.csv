"以零件制造误差、装配误差为误差源，根据误差流理论计算零件误差在装配过程中的传递、累积；将装配过程分成串联和并联发散两种装配形式，基于误差流方法建立装配过程空间状态方程模型。以天线阵子模块为研究对象，确定零件误差分布类型，计算天线阵子模块装配各工序的误差传递和累积，判断装配精度是否达到要求。本文为天线阵子模块的静态精度分析提供了理论依据。"
"随着有源相控阵雷达的发展，尤其对于大口径、高频段的有源相控阵雷达天线，阵面结构安装精度要求越来越高，往往为亚毫米级 [ 1 ] [ 2 ]。雷达是典型的以“电”为目标、以“机械”为载体的综合集成装备，雷达结构安装精度对其电性能有着决定性的影响。如果精度达不到要求，将直接影响电性能指标，导致天线增益衰减，尤其是副瓣抬高，并最终影响雷达的整体的性能，例如，高频段的核心电子组件体积小、腔体复杂、腔壁和隔筋薄、刚强度低、对形变特别敏感，加工、精度和一致性控制难度高，如果装配质量无法保证，不仅影响后续的电子装联，还会导致部件性能变差甚至功能丧失。因此，如何正确分析与控制天线平面度的误差已经成为相控阵雷达天线结构设计的关键技术之一。 精度与零部件设计、制造以及装配过程中的误差传递、累积等因素相关 [ 3 ]。目前，工程中安装精度的研究方法主要采用误差流理论，同时对安装后实物进行精度测量。基于误差流理论的状态空间模型是描述多工序装配误差的有效方法。Hu [ 4 ] 等将装配类型分为串连形式装配和并联形式装配，并率先采用误差流理论分析汽车零部件的装配误差传递。Jin和Shi [ 5 ] 将误差流、状态空间方程用于车身装配误差分析。Shi等 [ 6 ] 分析了多工位系统质量控制中的偏差模型，提供一个包括建模、分析、监测、诊断、控制、检查和设计优化的新方法来解决多阶段系统的质量控制和改进问题。Liu [ 7 ] 比较了误差流理论与统计过程控制的异同。Tang等 [ 8 ] 提出一种计算多体系统几何偏差的模型，并研究偏差在各个工序的偏差累积情况，将SOV概念引入MAS的几何误差建模中，可以发现几何误差是如何产生影响的，以及偏差是如何累积的。罗振璧等人 [ 9 ] 基于迭代映射和突变论构造了两类加工误差流动态模型，提出了加工误差控制的原理、策略和方法。赵家黎等 [ 10 ] 将多工位装配过程视为一维离散时变系统，通过状态空间方程进行建模，得到了基于误差流理论的装配模型。田兆青等 [ 11 ] 借鉴控制理论中的状态空间方法，研究了多工位薄板装配过程中偏差流传递、变换和累积关系的状态空间模型，建立了多工位装配过程偏差流传递的状态方程。杜世昌等人 [ 12 ] 通过齐次变换方法，推导出了夹具误差、基准误差、安装误差和加工误差的累积、传递过程，构建了状态空间模型，建立了每个工位上的零件尺寸偏差与制造过程中各种误差之间的关系。张志英等 [ 13 ] 运用状态空间方程对船底分段装焊过程中的偏差流进行建模，分析了零件自身偏差、零件定位偏差和因焊接变形产生的偏差在工序间的变化、累积和传递过程。侯东旭等 [ 14 ] 以飞机结构中易变形的钣金零件和非金属薄壳零件为对象，研究了柔性零件表面形状连续性表达和几何协方差建模方法，在小变形、线弹性假设下研究了装配力与装配变形的分段线性力学模型，建立了飞机柔性零件装配偏差的统计分析模型。 尽管现有方法比较成熟，在行业内已获得广泛的应用，特别在汽车薄板类部件和机床零部件进行了成功应用，但难以有效分析复杂零部件三维误差传递与累积。针对雷达天线阵面安装精度需求，需要对现有方法进行改进和分析建模。本文通过最小二乘法拟合误差装配面方程，得到零件的转动误差；采用关键点误差和零件转动误差表征零件的误差分布，通过状态空间方程计算得到天线阵子模块的最终误差，并完成案例研究。"
"装配是利用某种连接方式、通过一系列装配工序将多个零件连接在一起的过程 [ 15 ]。装配过程中，制造误差、连接方式等都会引入误差，并随着装配工序传递、累积。为研究误差传递以及装配过程产生的最终误差，需要对误差源进行讨论。本文考虑的误差主要包括制造误差、装配误差、制造和装配过程的随机误差。  零件误差是指零件实际位置相对于理想位置的偏移量，包括沿x轴、y轴、z轴的移动和转动。由于零件上任意一点的位置会随零件的位置变化而变化，误差可以用零件上任意一点M的移动误差和零件的转动表示，本文将称之为关键点法。零件任一工位i的误差可以用6 × 1的矩阵 [ 10 ] 表示： X M ( i ) = [ Δ X M ( i ) Δ Y M ( i ) Δ Z M ( i ) α ( i ) β ( i ) θ ( i ) ] T (1) 式中 Δ X M ( i ) 、 Δ Y M ( i ) 、 Δ Z M ( i ) 分别表示在工序i上零件上点M沿x轴、y轴和z轴的移动距离； α ( i ) 、 β ( i ) 、 θ ( i ) 分别表示零件在工序i上绕x轴，y轴和z轴的转动角度。 对于一个给定的零件，零件的理想配合平面方程Z可以平面的一般方程表示： Z = a x + b y + c (2) 根据式(2)以及零件的误差范围，根据最小二乘法可得到零件的实际配合平面方程 Z ′ ： Z ′ = a ′ x + b ′ y + c ′ (3) 两平面的法向量分别为 ( a , b , − 1 ) ， ( a ′ , b ′ , − 1 ) ，根据两平面的法向量关系可知零件绕x轴、y轴、z轴的转动角度α、β、θ分别为： α = arccos b ⋅ b ′ + 1 b 2 + 1 b ′ 2 + 1 β = arccos a ⋅ a ′ + b ⋅ b ′ a 2 + 1 a ′ 2 + 1 θ = arccos a ⋅ a ′ + 1 a 2 + b 2 a ′ 2 + b ′ 2 (4)  制造误差包括尺寸公差、形位公差和位置公差。通常，尺寸公差大于位置公差；位置公差大于形状公差。本文只考虑零件的尺寸公差。装配过程中零件的尺寸公差会传递到与其配合的零件中。计算时，可以根据已知理想的平面方程和尺寸公差，由关键点法求出零件的制造误差。  本文中，装配误差考虑主要考虑零件装配时铆钉连接所产生的误差以及在连接过程中因粗糙度造成零件在z轴方向产生的误差。如图1所示，铆钉与铆钉孔都存在尺寸公差，因装配时使零件的位置误差，零件会在xoy平面发生移动和转动。 图1. 铆接装配误差示意图 { Δ X = ( T g + T h ) cos γ Δ Y = ( T g + T h ) sin γ Δ Z = T j (5) 式中，T g 为零件公差；T h 为零件定位孔误差；T j 为连接件之间粗糙度； γ 为零件与零件孔之间的接触定位角。 已知铆接点位置和数量的情况下，采用关键点法可求得因铆接使零件产生的装配误差。"
"零件的制造误差、装配误差以及在装配中的随机误差会随着装配环节的增加而传递、累积，最终影响产品质量。机械装配可分为串联装配和并联装配，其中并联装配又可以分为并联汇聚和并联发散两种装配形式 [ 16 ]。本文的案例中包含串联和并联发散两种装配过程。 本文的装配误差传递模型基于以下假设：参与装配的零件为刚性件；装配过程中不发生柔性变形；零件装配方式为铆接。  对于串联装配系统，每个工位上有且只有两个零件参与装配，如图2所示。 图2. 串联装配示意图 串联装配系统第i个装配工位上误差流传递的状态方程 [ 3 ] 表示为： { X ( i ) = C ( i ) , i = 1 X ( i ) = W ( i ) X ( i − 1 ) + W ( i ) P ( i ) + W ( i ) Q ( i ) + V ( i ) , i ≥ 2 (6) 式中，X(i)是任一工位i上的零件误差；A(i)是相邻两个工序之间的误差转换矩阵；P(i)和Q(i)是工序i上的零件制造误差和零件装配误差；B(i)、C(i)是控制矩阵，表示制造误差和零件制造误差对工序i误差的影响程度。 并联装配系统是指在某一装配工位上需要同时对多个零件进行装配。并联发散作为并联装配系统的一种表现形式，在某一工序进行并联装配后各零件分别以串联形式继续进行装配，该过程的状态空间方程 [ 3 ] 可以表示为： { X ( N 1 ) = A ( N 1 ) X ( N − 1 ) + B ( N 1 ) U ( N 1 ) + V ( N 1 ) X ( N 2 ) = A ( N 2 ) X ( N − 1 ) + B ( N 2 ) U ( N 2 ) + V ( N 2 ) ⋯ (7)   由关键点法可知，零件的误差可以由零件上任意一点的移动和零件的转动表示。当零件转动角度 Δ α 、 Δ β 、 Δ θ 较小时，同一零件上除关键点A以外任一关键点B的误差与A点的误差关系可以由以下公式表示： X B = W B , A X A (8) 将 W B , A 定义为关键点位置转换矩阵： W B , A = [ 1 0 0 0 − L z ( B , A ) L y ( B , A ) 0 1 0 L z ( B , A ) 0 − L x ( B , A ) 0 0 1 − L y ( B , A ) L x ( B , A ) 0 0 0 0 1 0 0 0 0 0 0 1 0 0 0 0 0 0 1 ] (9) 式中 L x ( B , A ) = X B − X A ， L y ( B , A ) = Y B − Y A ， L z ( B , A ) = Z B − Z A 。 图3. yoz面点误差示意图 证明：如图3所示，在yoz面上，A和B是某零件上的理想坐标点， A ′ B ′ 是零件发生移动后并绕x轴转动 Δ α 后的点坐标。 A ″ B 是与AB平行相等，与 A ′ B ′ 夹角为 Δ α ，此时B点的误差为： Δ X B 1 = Δ X A + ( − L A B ⋅ sin λ ⋅ Δ α ) = Δ X A − L y ( A , B ) ⋅ Δ α Δ Y B 1 = Δ Y A + ( L A B ⋅ cos λ ⋅ Δ α ) = Δ Y A + L z ( A , B ) ⋅ Δ α 同理，可求得零件绕y轴转动Δβ时，B点的误差量分别为： Δ X B 2 = Δ X A − L 2 ( A , B ) ⋅ Δ β Δ Z B 2 = Δ Z A + L x ( A , B ) ⋅ Δ β 零件绕z轴转动Δθ时B点的误差量分别为： Δ X B 3 = Δ X A + L y ( A , B ) ⋅ Δ θ Δ Y B 3 = Δ Y A − L x ( A , B ) ⋅ Δ θ 整理可得B点绕各轴偏转的误差量之和： Δ X B = Δ X A − L Z ( A , B ) Δ β + L y ( A , B ) Δ θ (10) Δ Y B = Δ Y A + L Z ( A , B ) Δ α − L x ( A , B ) Δ θ (11) Δ Z B = Δ Z A − L y ( A , B ) Δ α + L x ( A , B ) Δ β (12) 若A、B处于同一个零件上，其转动角度相等，将式(10)、(11)、(12)化成矩阵形式则得到式(9)。  对于相邻工序的两个零件，由于没有误差引入，在理想位置时可视为一个整体。此时关键点位置转换矩阵同样适用于相邻工序两个零件的关键点。结合关键点法可以对状态空间方程进行简化，将式(6)转化为： { X k 1 ( i ) = C ( i ) , i = 1 X k i ( i ) = W 1 ( i ) X k i − 1 ( i − 1 ) + W 2 ( i ) B k ′ ( i ) + C k ( i ) + v ( i ) , i ≥ 2 (13) 式中k i 是第i个工序上被装配零件的关键点误差；C k (i)是关键点制造误差；B(i)是装配点装配位置误差；W 1 是前道工序与后道工序关键点之间的位置矩阵，表示工序间的误差转换关系；W 2 是某一装配点到工序关键点之间的位置矩阵，表示装配误差对零件误差的影响程度。 对并联发散形式装配过程的参数做相同处理即可得到某一工序的状态空间方程。"
"本节分析某天线阵子模块的装配过程，并利用误差流理论中的状态空间模型分析装配过程误差传递。天线阵子模块主要由铰链、天线骨架、反射板以及并联的64个阵子组成，如图4所示。零件之间采用铆接，64个阵子并联在反射板上，其余零件之间通过串联连接，装配顺序为铰链–天线骨架–反射板–天线阵子。  本案例主要考虑零件的制造误差以及铆接误差。在各零件上取关键点，关键点坐标值如表1所示，零件及其关键点上的制造误差情况如表2。铆钉孔直径为3.0 mm，装配误差最大值为0.1 mm [ 14 ]，零件表面粗糙度为6.3 μm。根据式(5)可求得各铆接关键点误差铆接误差。 图4. 天线阵子模块示意图 Table 1 铰链P 1 铆接点Q 1 骨架P 2 铆接Q 2 反射板P 3 x 90 40 10 20 0 y 90 40 10 20 0 z 18 18 318 318 321 表1. 串联过程状态方程的关键点坐标/mm Table 2 零件 尺寸误差/mm 误差分布类型 误差分布参数 铰链 ±0.1 正态分布 σ = 0.1/3 天线骨架框架 ±0.2 正态分布 σ = 0.2/3 反射板 ±0.1 正态分布 σ = 0.1/3 表2. 串联过程中制造误差 根据式(3)和式(4)可求得零件由制造误差和铆接误差产生的转动误差，并用关键点法进行表示。根据式(9)可计算得到状态空间模型中的各工序制造误差转化矩阵 M 1 ( P 2 , P 1 ) 、 M 2 ( P 3 , P 2 ) 以及各工序间的铆接误差转化矩阵 M 11 ( P 2 , Q 1 ) 、 M 21 ( P 3 , Q 2 ) 。将零件误差和对应的误差转化矩阵带入式(6)，可得到串联情况下各工序的误差。 本案例对各工序的误差情况用Matlab多次取样。取样本中误差值最大的一组数据进行统计分析，如表3所示。 Table 3 误差 工序1 工序2 工序3 Δx/mm 0.0064 0.0099 0.0152 Δy/mm 0.0060 0.0128 0.0159 Δz/mm 0.0076 0.0151 0.0188 Δα/rad 6.3959 × 10 −6 3.5211 × 10 −5 4.0060 × 10 −5 Δβ/rad 9.5500 × 10 −6 2.0953 × 10 −5 2.4313 × 10 −5 Δθ/rad 0 0 0 表3. 各工序误差情况  64个天线阵子通过铆接连接并联在反射板上，根据式(9)可以计算得到各天线阵子的误差。由于64个阵子均匀分布且误差相同，对单个天线阵子进行误差计算，其余天线阵子的误差情况通过Matlab循环该过程即可得到。 天线阵子上制造误差为±0.1 mm，关键点坐标为(118.5, 73.0, 521.0)。铆接误差与上文相同。根据式(6)求得单个天线阵子的误差情况： X ( 4 ) = ( 0.0201 , 0.0272 , 0.0192 , 0.0017 , 0.0054 , 0 ) T (14) 对并联的64个阵子进行相同计算，得到64组数据，拟合可得到天线阵子拟合平面： Z ′ = 5.3628 x − 1.4092 y − 321.0554 (15) 零件在装配过程中的误差传递如图5、图6和图7所示。图5给出了x、y、z三个坐标轴方向安装误差累积图。图6给出了铰链–天线骨架–反射板串联安装过程中，绕x轴、y轴旋转误差累积图。图7给出了工序4天线阵子安装过程中，绕x轴、y轴旋转误差累积图。 由表3、图5、图6和图7可知：在正常情况下，随零件数量及装配过程的增加，天线阵子模块的误差不断增大。天线阵子在装配过程中产生的转动误差最大，表明在同精度条件下进行装配，尺寸较小的零件将产生较大误差，在制造过程中应该采用更高精度的工艺。 图5. 各工序关键点误差示意图 图6. 串联过程转动误差示意图 图7. 天线阵子装配过程转动误差示意图"
"本文针对相控阵雷达天线安装精度分析需求，提出了基于误差流理论的天线阵子模块安装精度分析方法，具体过程如下： 1) 以刚性零件上关键点在6个自由度上的误差表示零件误差，分析刚性零件装配过程中的制造误差和装配误差。将装配过程中分成两类，建立了串联连接的误差流状态空间方程和并联发散连接的误差流方程。 2) 在计算天线阵子模块在各装配工序产生的误差以及累积误差的基础上，拟合出天线阵子模块的拟合平面。通过分析各工序的误差传递、累积情况，可以评估天线阵子的装配质量，并为零部件的精度分配提供理论依据。 3) 在给定精度要求的情况下，若装配精度不能满足静态精度可靠性要求，则需要进一步分析超差的原因并对产品的设计精度、装配工艺加以调整及优化。 通过在高精密薄壁盒体加工(6个平面，6次装夹，多达1000个特征)与电子组件装配应用，可以很好地控制薄壁结构件的变形和尺寸偏差，包括孔尺寸偏差、间隙、平面度、水道尺寸等，同时，也有助于分析工艺参数和尺寸精度对于电子组件电性能的影响规律，从而主动地对装配过程进行质量预防控制，对于降低质量损失的价值非常明显。"
