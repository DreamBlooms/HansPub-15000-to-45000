"针对智能生产车间基于AGV的物料搬运系统的建立，确定AGV配置数量以及组合考虑缓存区容量、设施布局等问题至关重要。这类组合问题属于NP-Hard问题，往往难以求出精确解。因此本文提出了仿真优化的方法以获得问题的近优解。首先，对车间生产流程及AGV配置优化问题进行了描述；其次，基于Plant-Simulation仿真平台建立了具有MHS的智能生产车间的仿真模型；最后，通过仿真实验并对仿真结果的分析，总结了MHS最优配置方案，可为该智能车间设备配置、调度策略的制定提供决策支持。 关键词 :自动导引车，仿真，Plant Simulation，智能车间 Copyright © 2019 by author(s) and Hans Publishers Inc. This work is licensed under the Creative Commons Attribution International License (CC BY). http://creativecommons.org/licenses/by/4.0/"
"在当前以中高速、优结构、新动力、多挑战为主要特征的新常态下，发展智能制造不仅是我国产业转型升级的突破口，也是重塑制造业竞争优势的新引擎，被理论与实践各界普遍认为代表了制造业的未来方向 [ 1 ]。智能制造包括智能制造技术与智能制造系统，它通常具有高度自动化和自适应、自学习的功能。因此，为推动制造业的智能化进程，从智能装备、加工技术到资源管理、生产流程，都受到了国内外学者的关注和研究。特别的，其关键技术制造资源的优化调度已经成为了当今研究和应用的热点。 生产调度问题通常是指针对一项可分解的工作，在尽可能满足其约束条件的前提下，合理地分配其生产地点、生产时间和生产工序，以达到某些性能指标的最优化 [ 2 ]。随着传统的车间作业环境、柔性制造系统到复杂的分布式制造系统、面向服务的网络化制造环境 [ 3 ] 的发展，制造系统变得越来越复杂，系统的动态性和不确定性更加突出，使得解决复杂制造环境下的调度问题变得越来越困难。 调度研究的核心内容和重点是调度方法，归结为4种类型：基于运筹学的方法、启发式方法、基于仿真的方法和基于人工智能的方法 [ 4 ]。仿真调度方法是通过对仿真模型的运行来收集数据，并运用这些数据对实际系统进行性能和状态方面的分析，从而对系统采用合适的控制调度方法 [ 5 ]。 用仿真方法研究制造系统，就应该用仿真语言或者商用的仿真软件建立系统的仿真模型，这样的仿真模型比起解析方法来能更加全面地反映实际系统的特征，在此模型之上对不同的系统参数和策略进行仿真实验，仿真过程所做的就是得到该策略下系统的性能，从而对不同的策略进行评价；还可以通过仿真实验改变系统的一些参数来方便地进行系统各参数的灵敏性分析，并且以此为基础进行系统的优化 [ 6 ]。 本文以某智能车间自动导引车系统(Automated Guided Vehicle System, AGVS)的实际应用为背景，提出一种综合AGV路径、调度规则、交通管理以及电量管理等约束的AGVS仿真模型建立方法，并基于所建立仿真模型AGVS的参数设置，调度规则以及车间布局做出仿真评估，以实现AGVS资源的最佳配置和优化运行。"
"以AGVS在某动车车载雷达智能生产车间的应用为背景，车间布局如图1所示。 图1. 动车车载雷达智能生产车间布局示意图 目前，该车间只生产一种车载雷达产品。具体生产流程为：1) 根据订单制定生产计划，生产前先将所需全部物料在理料区理料。2) 理料完成后，由AGV将物料配送至物料柜。3) 在将所需全部物料配送至物料柜之后，AGV从物料柜中取出物料送往产线上料区，在完成上料后再将空托盘送回理料区。另外，当一个订单完成后，需要将余料送回理料区。4) 产线上料后系统开始运行，原材料进入产线后需经过10余道工序。其中，半成品在完成前道工序后，暂存于检测下料区；当暂存半成品数量满足老化测试批量时，由AGV送往老化测试区。完成老化测试后，再由AGV运回检测下料区重新上料，继续加工。5) 全部加工获得完成后，成品暂存在成品下料区。当暂存成品数量满足入库批量时，由AGV将成品运往成品库。仿真模型中，假定AGV运行速度为0.5 m/s，AGV蓄电池充电特性为每工作4 h需充电1 h。"
"AGVS由AGV、导引路径网络以及AGVS控制系统组成，在Plant Simulation仿真软件中，AGV和导引路径可分别用Transporter和Track等对象来表示。 总体上，AGVS控制系统可以分为AGVS中央决策层与AGV执行层。其中，中央决策系统主要由交通管理子系统、任务分配以及AGV调度子系统等部分组成；AGV执行层主要由自主路径规划子系统和电源管理子系统组成。AGVS控制系统的工作流程如图2所示。  当多辆AGV运行于同一各路径系统中时，不可避免地会存在相互干涉、冲突的现象。在单向路径网络中，AGV运行过程中常见的干涉如图3所示。 图2. AGVS控制系统工作流程 图3. AGV运行过程中常见的干涉现象 a) 在AGV执行任务过程中，经过某一路段时，在同一时间段两台AGV相向而行。 b) 在AGV执行任务过程中，在同一时间段两台AGV通过同一交叉路口。 c) 在AGV执行任务过程中，某台AGV在驶向目标任务点的路线上，已存在一辆或多辆AGV，已达到该路段可容纳AGV上限。 d) 该种冲突属于上述冲突类型的特殊情况，触发该种冲突时，对其进行减速、制动、等待、转向等措施均会引发其他冲突，因此需提前规避。 为避免AGV之间发生碰撞和冲突，需要在实际系统中可能出现干涉的区域设置传感器。通过传感器，由AGVS中央决策系统进行判断是否将发生碰撞，如将发生碰撞应立即停车并接受交通管理子系统的协调。 在Plant Simulation仿真软件中，传感器对应于Track对象中的sensor对象。AGV经过此对象时会触发相应的传感器事件(Method对象)，交通管理子系统涉及的各种控制算法均可以通过Method对象中的SimTalk仿真语言实现。  当系统中有多个待搬运任务或AGV空闲时，任务分配与AGV调度子系统将会负责给AGV分配搬运任务，具体流程如图2所示。 在本研究中，优先采用先到先服务(First In First Out，FIFO)策略。在Plant Simulation中，可以通过Table对象记录新的待完成搬运任务及其发布时刻。当系统中存在空闲的AGV时，立即取出任务记录、执行Table对象中最先被记录的搬运任务。另外，仿真模型中对任务设置优先级，当系统中存在多个任务待完成时，中央决策系统先根据其优先级完成任务排序，再给AGV分配任务。 任务优先级的设置规则如下：为维持产线正常运行、保证产线较高利用率，将产线上料任务定为最高优先级；检测下料任务与老化上料任务及成品入库任务具有次高优先级；当物料柜中有余料时，物料柜上料任务具有最低优先级，当物料柜中余料不足产线上料需求时，将物料柜上料任务调至最高优先级。  本项目中的AGVS均运行于双向路径网络。根据AGV当前位置及其目的地，可以确定AGV在各条路径段上的行驶方向，并且在该路径段上AGV的行驶方向不发生改变。各Track均存有路径网络，当AGV经过Track中的sensor对象时，读取该AGV当前所执行的任务信息，通过Dijkstra算法规划一条从当前位置到目标节点的最短有向路径，具体流程如图2所示。"
"根据车载雷达智能车间生产实际，随机生成多份订单待完成；AGVS中央系统获得订单后，将待加工原材料储存于理料区，并开始发布任务。AGV每次可载原材料12套，AGV运行速度为0.5 m/s，原材料取料及上料时间均为50 s，空托盘卸载时间为30 s，半成品托盘取料及上料时间均为60 s，成品托盘装卸时间为60 s。 为简化模型，设该生产车间共有三个加工单元，其中加工单元1与加工单元3生产节拍均为48 s，加工单元2完成老化测试，节拍为30 min。产线上料阈值设置为4套，即当线边暂存区库存低于4套时，发布产线上料任务。老化测试批量为100套，成品入库批量为150套。  AGV成本昂贵，AGV数量过多，不仅会造成资源浪费，也容易引起AGV之间的干涉和冲突，造成堵塞，增加调度的难度。反之，若AGV数量不足，将无法满足生产需求，造成设备等待和停机，影响车间的经济效益。 为此，本项目首先基于系统仿真模型和上述的参数设置，评估保证生产车间满负荷运行、稳定运行所需要的AGV数量，在此基础上制定AGV调度策略。仿真时，将系统中所需AGV数量作为可变参数，逐渐增加模型中的AGV数量。在每一种AGV数量下，运行仿真模型48 h，记录AGV执行运输任务的时间和各工位利用率等性能指标。 方案1：一辆AGV，先将全部物料配送至物料柜后再进行产线上料。 方案2：两辆AGV，先将全部物料配送至物料柜后再进行产线上料。 方案3：三辆AGV，先将全部物料配送至物料柜后再进行产线上料。 方案4：一辆AGV，同时进行物料柜上料与产线上料。 方案5：两辆AGV，同时进行物料柜上料与产线上料。 方案6：三辆AGV，同时进行物料柜上料与产线上料。 方案7：两辆AGV，交替运行，同时进行物料柜上料与产线上料。 Table 1 方案 各任务耗时/% 各工位利用率/% 产量/套 物料柜送料 产线送料 检测下料 老化上料 成品入库 充电 空闲 加工单元1 加工单元2 加工单元3 1 21.78 28.86 2.68 2.35 1.17 18.88 24.28 54.74 19.79 50.42 1691 2 13.89 16.15 1.81 1.43 0.71 18.86 47.15 61.69 23.96 60.94 2194 3 10.27 12.28 1.28 1.08 0.52 18.85 55.72 70.45 27.08 66.50 2244 4 18.63 37.58 3.54 2.82 1.45 18.88 18.63 65.12 25.00 61.26 2194 5 13.04 20.78 2.03 1.67 0.83 18.87 42.73 73.91 28.12 69.60 2494 6 11.60 14.25 1.42 1.18 0.60 18.87 52.07 74.27 30.20 72.38 2544 7 14.13 31.42 3.59 2.44 1.22 18.82 28.38 82.93 31.25 78.92 2782 表1. 仿真数据 由表1中的数据，可以得出以下结论： 1) 方案1至方案3区别在于：AGV配置数量不同。均采用将全部物料配送至物料柜后再开始上料规则。当AGV数量为1时，产线内各工位利用率及产出仍可提高，设备的加工能力并未得到充分利用。此时AGV数量不能满足生产任务需求，AGV数量是产能的制约因素。当AGV数量大于1时，AGV空闲率显著上升，且当AGV数量由1辆增加至2辆时，工位利用率及产出并未获得较大提高，说明此时AGV配置数量已能满足当前任务需求。此时，制约系统产能进一步提升可能的原因包括：生产前需将全部物料配送至物料柜，准备时间过长；AGV充电时无法完成上料任务。为此提出方案4至方案6。 2) 方案2与方案5区别在于：方案5采用同时进行物料柜上料与产线上料，即当物料柜有库存物料时开始向产线上料，产线上料任务优先级高于物料柜上料任务。从仿真结果可知：方案5与方案2相比，加工单元1利用率提升12.22%，加工单元2利用率提升4.16%，加工单元3利用率提升8.66%，产能提高300套。此方案改善了方案1至方案3生产前准备时间过长导致产出无法提升的制约。然而，方案5中AGV平均空闲率为42.73%，且AGV同时充电时无法完成任务产线停滞问题仍未解决，为此提出方案7。 3) 方案7与方案5区别在于：方案7配置2辆AGV，当任务数量过多时2辆AGV同时运行；当1辆AGV足以满足任务需求时，2辆AGV交替运行避免出现同时充电现象发生。 与方案5相比，方案7中加工单元1利用率提升了9.02%，加工单元2利用率提升3.13%，加工单元3利用率提升9.32%，产能提高288套。但是，AGV空闲率达28.38%，AGV运力没有充分利用。 基于上述研究，可以得出以下结论：在现有参数下，两辆AGV可以为车间提供有效服务，加工单元有较高的利用率，但AGV的空闲率比较高、仍有待进一步改善。 为此，在上述仿真方案的基础上，进一步开展AGV参数优化仿真。  本仿真实验通过改变AGVS中AGV的参数以及调度规则，以评估AGVS的最大服务能力。仿真模型的加工任务、加工单元性能和其它参数均与上节相同，AGV配置数量和运行策略与上节中方案7相同。 为评估AGV最大服务能力，改变以下模型参数：1) AGV运行速度；2) 产线上料阈值。在此基础上，评估AGVS的最大服务能力。 AGV运行速度与车间主要性能指标之间关系如表2所示。 Table 2 AGV速度(m/s) 各任务耗时/% 各工位利用率/% 产量/套 物料柜送料 产线送料 检测下料 老化上料 成品入库 充电 空闲 加工单元1 加工单元2 加工单元3 0.5 14.13 31.42 3.59 2.44 1.22 18.82 28.38 82.93 31.25 78.92 2782 0.75 15.43 28.27 3.28 2.42 0.98 18.83 30.79 83.43 31.77 79.48 2802 1 15.37 27.63 2.87 2.31 0.70 18.85 32.27 85.04 32.29 81.06 2823 表2. AGV运行速度与车间主要性能指标之间关系 由表2可以看出，提高AGV运行速度可以提高AGVS服务能力。当AGV速度由0.5 m/s提升到1 m/s时，各加工单元利用率分别提高了2.11%、1.04%、2.14%，产出提高了41套，提升并不显著，这是由于该AGVS路径网络较为简单，各节点间距离较短，路径柔性较低，提升AGV运行速度不能发挥应有的作用。 表3为在保持AGV运行速度不变，即AGV运行速度为0.5m/s，各节点装卸时间不变的条件下，通过改变产线上料阈值，车间主要性能指标的变化。 Table 3 产线上料阈值/套 各任务耗时/% 各工位利用率/% 产出/套 物料柜送料 产线送料 检测下料 老化上料 成品入库 充电 空闲 加工单元1 加工单元2 加工单元3 2 13.44 27.59 3.12 2.23 1.24 18.85 33.34 77.28 29.79 74.44 2644 3 13.39 31.35 3.36 2.72 1.29 18.87 29.02 80.60 30.56 77.28 2704 4 14.13 31.42 3.59 2.44 1.22 18.82 28.38 82.93 31.25 78.92 2782 5 16.44 30.33 3.12 2.59 1.28 18.91 27.33 84.31 32.29 80.22 2828 6 17.34 29.19 3.21 2.48 1.40 18.88 27.50 84.28 32.29 80.11 2824 7 17.51 29.15 3.36 2.72 1.40 18.90 26.97 84.82 32.29 80.80 2849 8 16.55 30.26 3.35 2.48 1.46 18.91 26.99 85.06 32.29 80.92 2854 表3. 产线上料阈值与车间主要性能指标之间关系 由表3可知：当阈值由2设置为5时，各加工单元利用率可获得较大提升，分别为7.03%，2.50%，5.78%，产出提高了184套；当继续增加阈值时，设备利用率并未获得显著提升，并且更高的阈值将会导致线边暂存区容量增大。  在某动车车载雷达智能制造车间物流输送系统建设时，充分参考了前述不同仿真参数配置组合下的仿真模型输出分析结论。在当前生产任务负荷水平下，选用了两台AGV进行物料配送的方案，经过3个月的试运行，物料配送准时率满足业务部门要求，达到了系统应用设计目标。"
"本文以Plant Simulation仿真软件为工具，以某动车车载雷达智能制造车间为研究对象，建立了系统仿真模型并完成一系列仿真实验，得到系统在各种参数配置和调度策略下系统的性能指标，详细分析了AGV数量、参数设置等与加工设备利用率、系统产能之间的对应关系。在此基础上得出结论：1) 两辆AGV可以为车间提供有效服务；2) AGV最佳运行速度为0.5 m/s；3) 产线上料阈值应为5套。在确定合理设计参数（如配置数量、运行速度）的基础上，应着重研究调度策略的合理性，以提高AGV的服务能力。后续的仿真研究可考虑将人工智能技术引入资源调度问题中，制定自适应性算法，使得调度系统能随时应变实际系统所发生的情况，以提高制造系统的运行效率。"
