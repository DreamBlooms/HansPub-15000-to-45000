"加工仿真是对真实产品制造过程进行的虚拟仿真，其通过三维动态数字模型展现产品制造流程。本文利用VERICUT软件建立五面加工中心几何模型及运动学模型，并根据实际应用机床对配置的Siemens 840D数控系统进行功能扩充，并使用VERICUT软件建立加工刀具库。进而通过在VERICUT软件中建立虚拟机床模型，调用和修改CNC控制系统对高速列车构架加工进行仿真演示，从而便于观察加工刀具轨迹是否符合预期要求，从而验证整个加工程序的正确性。 关键词 :虚拟仿真，高速列车构架，刀具轨迹 Copyright © 2019 by author(s) and Hans Publishers Inc. This work is licensed under the Creative Commons Attribution International License (CC BY). http://creativecommons.org/licenses/by/4.0/"
"Vericut软件是一套针对CNC机床运动仿真、NC程序验证、优化和分析的工具。从1988年以来，Vericut就已经成为数控加工仿真领域的行业标准。工艺工程师可以在仿真环境中完成待加工工件的所有数控加工过程，从而避免了实际加工中的试切，缩短了生产周期，降低了因程序错误带来的零件加工质量不良的风险 [ 1 ] [ 2 ] [ 3 ] [ 4 ] [ 5 ] 。 Li Han等人利用VERICUT进行了刀具半径补偿算法的验证 [ 6 ] ，杨莉等人针对航空薄壁零件的数控加工过程 [ 7 ] ，魏娟等人针对大型壳体零件的数控加工过程 [ 8 ] 利用VERICUT对加工过程进行了仿真验证等工作，证明了VERICUT在不同类型零件的数控加工过程中均能起到良好的效果。曹剑等人针对五轴数控机床虚拟样机建模 [ 9 ] ，李栋等人针对五轴卧式机床 [ 10 ] ，在VERICUT软件中进行了机床建模和加工过程分析，说明了在相关设备及加工工艺环境中，利用该软件进行加工仿真的过程和需注意事项。 高速列车构架采用H型结构，加工部位较多、涉及面较广、程序复杂，且Siemens840D系统中需要使用角代码，如RXX，从而给产品首件试制时带来一定的困难。无法详细周全地对加工刀具轨迹的正确性进行判断，易造成设备损伤、产品质量无法保证。为了保证高速列车构架加工的质量，我们引入Vericut软件对整个加工过程进行仿真。"
"针对车间现场使用的五面加工中心，提炼出其主要的结构，如左右运动部件X轴，上下运动部件Y轴，前后运动部件Z轴，主轴运动的旋转轴B轴和C轴等部件。依据各部件间的关系建立机床各部件之间的运动学模型，具体步骤如下： 1) 组件拓扑结构的设置 利用“组件树”功能(菜单：配置/组件树…/)，建立如图1所示加工中心组件树，描述各模块之间以及与各模块与机床整体的拓扑结构关系： 图1. 组件拓扑结构 2) 建立机床组件模型 参照机床组件物理尺寸和空间位置关系，继续建立机床各组件模型，包括床身、主轴、B轴、C轴等。建模过程中，需特别注意常发生干涉和碰撞的C、B轴的组件模型尺寸、相对位置关系等均须与现场加工中心的结构保持一致，以便在后续验证过程中进行校验。 3) 回转铣头的建立 由于加工及所产生的碰撞主要发生在回转铣头部位，因此主要把机床的回转铣头部分的模型建立起来。首先在UG或Catia等设计工具中建立回转铣头三维模型，如图2。其次，输出组件模型文件，输出STL格式文件时，保证参考坐标系和模型坐标系的匹配，最后，将组件模型导入Vericut。 图2. 回转铣头三维模型  已建立的机床不能直接进行仿真，需要初始化设置，对相关Siemens系统参数进行设置，具体步骤如下： 1) 设定机床有效行程参数（菜单：配置/机床设定…/行程极限），如图3所示： 图3. 机床行程设置 2) 设定机床相关参数(菜单：配置/机床设定…/表) 3) 保持机床文件(菜单：配置/机床/保存)→(菜单：配置/控制/打开或文字/地址…) Vericut提供了一个丰富的控制系统库，一般用户可以直接调用相应的系统进行仿真。有些特殊的指令需要根据指令的含义及用法规则，定义相关的字格式、地址。结合Vericut提供的宏程序进行配置或修改，同时可进行二次开发。五面加工中心配置了Siemens 840D系统，因Vericut自带的Siemens 840D系统的控制部分设置完全可以满足加工以及仿真的需求，因此可直接应用，具体需调用的指令如图4所示： 图4. 调用指令"
"双击项目树中“加工刀具”，刀具库中建立刀具的过程主要分为以下步骤。  根据机床所使用的各种规格套筒，Vericut刀具库中建立相同尺寸的刀套。复杂的刀套也可以在一般的三维软件中构建刀套三维模型，再通过STL格式文件导入Vericut中使用。  在Vericut中建立出所有加工刀具，再与对应的刀套装配在一起。  根据程序中刀具刀号或者刀具名称，重新给系统中刀具命名，确保与程序中一致。  根据实际工艺需求，设定装夹点，刀具管理如图5： 图5. 刀具管理 注意：在Vericut刀具参数中可以设定极限切削参数，Vericut在模拟过程中计算相应参数，并和其极限参数比较，如果超出该极限值，Vericut将会在Log中提示该错误，从而可以避免因为切削参数不合理或工艺余量不均所造成的刀具或零件损坏。"
"分别双击项目树中“Fixture”和“Stock”，导入相应模型文件。Vericut可以读入STL、PLY或IGS模型文件，也可以读入STP、CATPart、CATmodel等格式模型文件，还可以通过Vericut与CAM软件的接口直接将这些模型数据和其他相关加工资源传入Vericut，构架模型图如图6所示。  项目树中，选择“设置”，右键选择“G-代码”/设定/表。根据零件编程零点建立编程坐标系，并用该坐标系设定零点，设置零点如图7。 图6. 构架三维模型 图7. 刀具管理  在项目树中，分别双击“数控程序”和“数控子程序”，添加相应程序。添加程序时，须按照加工工艺过程顺序添加。 主程序如下： %_N_DF_ZIDTOU_MPF ;$PATH=/_N_WKS_DIR/_N_SFEZ06MORT__Z_001_WPD ;%SFEZ06M1-110-000 ;300KM-2 DONG CHE FANG ZHUANG ;HEARD TYPE 3 ;2009/11/26 EDIT ;PETUP-01 ;L204,now ;OPERACION 1 : N10 G517 G17 G90 G64 TRAORI(1) N20 M00 N30 T=10003 N40 M06 N50 ;(DIAN JI DIAO ZUO LI MIAN) N60 TRANS x=0 y=0 z=0 N70 g517 g0 x1450 y0 N80 g0 z380 D0 N90 B=270 C=180 N100 N110 d1 N120 N130 G19 G90 S400 F380 D1 …… …… …… N271 G0 X=R653 G0 Z=R651 G1 X=R652 f=600 G0 Z=r651+150 M09 GOTO N9000 N9000 M01 M17  在菜单：“配置/机床设定…/碰撞检测”中，可以设定在加工过程中可能发生碰撞的组件组合，给定安全距离值为2.5 mm。进而将零件加工过程所涉及的资源都设定好，可以保存该项目，以方便后面使用，如图8： 图8. 碰撞设置  运行Vericut，对构架进行模拟加工。在模拟之前，可以设定碰撞检查和行程检查，并结合信息栏和日志文件对模拟进行分析。 通过B轴和C轴的角度转换，可以方便的实现五面加工，进而模拟实际的加工状态，如图9： 图9. 模拟加工 当在加工过程中出现碰撞或报警，状态栏出现提示报警，同时通过设置可以实现程序仿真暂停，如图10： 图10. 暂停示意 同时在出现碰撞或过切的区域用设置的警示颜色表示出来(通常设置为红色)，以便于方便检查程序及过切部位。"
"加工程序仿真结束后，可以对仿真后的模型进行尺寸和形状的检查。使用Vericut中卡尺(X-Caliper)功能进行规则尺寸的测量，分析形状特征，自动测量如图11。 自动比对功能(AUTO DIFF)，用Vericut仿真生成的切削模型和导入进来的设计模型进行比较，设置过切容差或残余容差，进行计算，可快速分析出过切区域或残余区域，极大方便了程编人员对仿真结果的检查，再根据过切或残余情况调整程序。 图11. 自动测量"
"构架数控加工工序是高铁装备生产过程中的重要环节，通过Vericut对加工代码在实际加工前的仿真验证，是数字化制造的一个重要手段。相关工具的应用可以保证G代码的正确性，并通过分析加工过程，可实现优化工艺路径以及刀具加工轨迹等。其与生产效率的提升属于典型的磨刀不误砍柴工关系，可以在复杂零件数控加工过程中进行推广应用。"
