"睡眠呼吸暂停是一种与睡眠相关的呼吸障碍，如果同时引起慢性低氧血症及高碳酸血症，则通常被称为睡眠呼吸暂停综合征。睡眠多导图监测通常被用于睡眠呼吸暂停的判定和确诊，但睡眠多导图人工分析是一项耗时耗力的工作，因此自动判定睡眠呼吸暂停显得尤为重要。本文介绍了睡眠呼吸暂停的各种人工智能分类方法，包括基于统计规则的分类和基于深度学习的分类，而分析的数据可成单通道生理数据和多通道睡眠数据。通过对不同方法的分类结果进行对比讨论，显示基于深度学习对多通道数据进行多任务分析是未来关于睡眠呼吸暂停研究的主流方法。 关键词 :睡眠呼吸暂停，自动分类，机器学习，深度学习 Copyright © 2020 by author(s) and Hans Publishers Inc. This work is licensed under the Creative Commons Attribution International License (CC BY 4.0). http://creativecommons.org/licenses/by/4.0/"
"在睡眠相关疾病的研究中，睡眠呼吸暂停居于多数。睡眠呼吸暂停人群通常在夜间会出现打鼾、憋气等症状。患有睡眠呼吸暂停综合征的人在睡觉时会反复停止呼吸，呼吸停止时长通常为10~30秒，一晚上可达数百次。睡眠呼吸暂停可由气道的完全“呼吸暂停”或部分“低通气”阻塞引起 [ 1 ]，这两种情况均可能唤醒沉睡者。频繁的唤醒和无法达到或维持深度睡眠可能导致白天过度困倦并且继发不良影响，最常见的睡眠呼吸暂停症状是白天困倦、易怒、疲倦、注意力不集中和学习能力下降 [ 2 ]，夜间的症状多为打鼾、呼吸暂停、多汗等 [ 3 ]，这些症状通常会产生更严重的后果，包括工作场所的社会问题和交通事故。睡眠呼吸暂停还与心绞痛、夜间心律失常、心肌梗死和中风有关。此外，严重的阻塞性睡眠呼吸暂停可能导致日间高血压和严重的心血管健康问题，当睡眠呼吸暂停长期得不到到诊断或治疗不当时，这些并发症可能会导致死亡 [ 4 ]。 在临床应用中，呼吸暂停低通气指数(Apnea Hypopnea Index, AHI)广泛用于评估睡眠呼吸暂停低通气综合征患者的严重程度。AHI值超过5的对象通常被诊断为睡眠呼吸暂停低通气综合征。AHI的计算涉及大约16个主要生理信号的采集，包括心电图(Electrocardiogram, ECG)、脑电图(Electroencephalogram, EEG)、呼吸用力、气流信号和血氧饱和度等生理信号。通过测量睡眠期间平均每小时呼吸暂停和低通气事件的数量，对采集的信号进行分析以获得呼吸暂停低通气指数 [ 5 ]。这个过程被称为多导睡眠图(PSG)研究 [ 6 ]。PSG监测是一件比较繁琐的工作，医生对其结果的判读工作非常耗时耗力，所以对自动判定睡眠呼吸暂停的研究是临床所必要的。"
"睡眠呼吸暂停综合征是一种严重的睡眠类疾病，但是直到上世纪十年代，人们才逐渐重视这种疾病。早期，专业人员大多通过柏林问卷、威斯康辛睡眠问卷、Epworth嗜睡表和打鼾情况来对患者进行睡眠呼吸评估与判定。数字多导睡眠监测技术的诞生使得人们能够更加精确的从相关生理数据上去判定这种疾病。自此，PSG作为判定睡眠呼吸暂停事件的“金标准”被专业人员广泛使用。 PSG是一项针对动物和人所形成的睡眠研究的基本手段。自上世纪八十年代以来在睡眠呼吸紊乱如睡眠呼吸暂停、睡眠片段化、微觉醒、睡眠分期等睡眠相关疾病的判定上被大量使用。PSG的监测指标较多，一般包括EEG、眼电图、下颌肌电图、心电图双下肢肌电图、呼吸气流及呼吸运动、鼾声检测、血氧饱和度、体动等生理数据。 AHI是指每小时呼吸暂停和低通气的次数。此项指标通常用于诊断睡眠呼吸暂停和判定其严重程度。呼吸暂停的定义相对标准—气流消失或者接近消失的时间不小于10秒。但是低通气有不同的定义方法，早期关于呼吸暂停的研究只是针对阻塞性呼吸暂停。然而人们很快发现气流减弱也就是低通气，且同样具有临床意义。Block [ 7 ] 等人指出了低通气的重要性，并将其定义为气流减弱并伴随不小于4%的氧饱和度下降。Gloud [ 8 ] 等注意到，一些符合睡眠呼吸暂停综合征的临床表现的患者，其主要的呼吸事件不是呼吸暂停而是低通气。 为了规范呼吸事件判定，1992年发布了一个共识(芝加哥标准)。标准以阻塞性呼吸暂停/低通气事件表示，未将阻塞性呼吸暂停和低通气事件加以区分，理由是因两个事件具有相似的病理生理机制。通常情况下，睡眠呼吸暂停主要分为4个类型：中枢性呼吸暂停(centralapnea)、阻塞性呼吸暂停(obstructiveapnea)、混合型呼吸暂停(mixedapnea)及低通气(hypopnea)。低通气与睡眠呼吸暂停最初在医院的认定中是分别判定的，但是经过实验证明低通气对身体的损害和呼吸暂停一样严重，故将低通气也纳入了睡眠呼吸暂停低通气指数这一判断指标中。图1是睡眠呼吸暂停的分类。 图1. 睡眠呼吸暂停类别 成人不同种类的睡眠呼吸暂停判定规则 [ 9 ] 如下表1所示。 现阶段，针对睡眠障碍患者的睡眠呼吸暂停的分类和判定都是依据相关专家的经验来区分的，其中会受到个体差异等多方面主观因素或者客观条件的影响。虽然现在的PSG监测系统具有自动睡眠呼吸暂停判定功能，但是存在准确度不高、覆盖率不好等问题。针对这些问题，研究人员做了很多相关的研究，研究方法主要分为两个类，一类是基于传统的统计规则方法，另外一类是基于深度学习的方法。 本文将分别对使用这两类方法进行睡眠呼吸暂停自动判定的相关文献进行综述。所介绍的文章当中，有一些是基于开源数据库，另外一些则是自建的数据集，所以文章中提到的各项指标不具有横向比较的价值，仅作参考。 Table 1 呼吸暂停 满足以下全部条件时，判读为呼吸暂停： 1) 口鼻温度传感器(替代传感器)气流较基线水平下降不小于90%。 2) 持续时间不小于10 s。 3) 至少90%时间持续时间内必须符合呼吸暂停的波幅降低标准。 具体分型： 1) 阻塞型：睡眠呼吸暂停持续时间内存在吸气努力。 2) 中枢型：睡眠呼吸暂停期间无吸气努力。 3) 混合型：呼吸事件起始部分无吸气努力，后半部分出现吸气努力 (判定呼吸暂停不需要氧饱和度降低) 低通气 满足以下条件可以判定为低通气： 1) NP曲线(替代传感器)较基线波幅下降不小于30%。 2) 持续时间大于10 s。 3) 持续时间内至少90%以上的事件符合低通气的波幅降低标准。 4) 动脉血氧饱和度较呼吸事件基线水平降低不小于4%。 表1. 睡眠呼吸暂停判定标准  在睡眠呼吸暂停自动判定的研究领域中，数据是非常重要的，目前在文献中所用到的最多的开源数据库有以下几种： 1) Physionet Apnea-ECG Database [ 10 ]：该数据是在2000年心脏病学计算会议(CINC)和PhysioNet联合进行的一项竞赛中首次公开的。目的是评估ECG是否能在记录的每一分钟内检测到呼吸暂停。该数据集包含以100 Hz采样的70个导联ECG信号，长度在7到10小时之间。每个ECG信号由专家使用呼吸和血氧饱和度等附加信号逐分钟手动注释睡眠呼吸暂停和正常呼吸事件。遗憾的是，注释中没有指出低通气和呼吸暂停之间的区别。数据详细信息可以在https://www.physionet.org/中查找。 2) Sleep Heart Health Study (SHHS)数据库：该数据库中包含了各种不同的关于睡眠健康的数据，包括觉醒、睡眠呼吸障碍等相关的数据。在http://www.jhucct.com/shhs中可以查找该数据库中的详细情况。 3) Vincent’s University Hospital/University College Dublin Sleep Apnea Database (UCD database) (文森特大学医院/都柏林大学学院睡眠呼吸暂停数据库(UCD数据库))：该数据库中记录了25名(21名男性和4名女性)睡眠呼吸障碍疑似病例的整夜PSG记录。每个记录包含5.9至7.7小时的ECG和SaO 2 信号，并且数据库中给出了详细记录每个呼吸暂停/低通气事件的开始时间和持续时间的注释文件。在http://bigd.big.ac.cn/databasecommons/database/id/5216中可以查找到该数据库的详细信息。 4) Physionet2018竞赛数据库 [ 11 ]：该数据库主要是针对非呼吸相关的睡眠期间的觉醒判定所创建的。数据中也包含了和睡眠呼吸相关的一些标签，故可以用来做睡眠呼吸相关的一些研究。该数据集包括1985名受试者的13个通道的PSG数据，这些数据在MGH睡眠实验室进行监测，以诊断睡眠障碍。该数据集中的每个记录都包括多个生理信号，这些信号都以200 Hz的频率采样，并由MGH睡眠实验室的认证睡眠技术人员根据AASM指南手动评分。可以在https://physionet.org/content/challenge-2018/中查找到数据库的详细信息。"
"人在睡眠中有很多生理信号，其中包含了能够用来判定睡眠呼吸暂停的生理特征。为了开发出一个简单的自动判定睡眠呼吸暂停的模型，近几十年来，人们提出了各种不同的方法来自动区分睡眠呼吸暂停和正常呼吸事件。并且尽可能减少检测睡眠呼吸暂停所需的生物信号数量。这些研究大多是基于心电图(ECG)信号 [ 12 ] [ 13 ]、SaO 2 [ 14 ] [ 15 ]、呼吸 [ 16 ] 和打鼾 [ 17 ] [ 18 ] 信号。在多数的研究中侧重于从生理信号中提取时域、频域和非线性特征等作为特征，并通过特征选择来减少特征空间的维数。通常情况下，这些研究都是基于传统的机器学习，使用的方法包括多层感知机(Multi-layer Perceptron, MLP) [ 14 ]、支持向量机(Support Vector Machine, SVM) [ 17 ]、人工神经网络(Artificial Neural Network, ANN) [ 19 ]、模糊逻辑 [ 20 ]、线性判别分析(linear discriminant analysis, LDA) [ 21 ]、AdaBoost [ 22 ] 等分类器。由于文献中大多使用的生理信号为心电图(ECG)。所以，本文对基于统计规则的研究按照ECG信号和其它相关生理信号分为两个部分介绍。  Moody [ 23 ] 等通过研究提出了一种数据处理方法，它能够从普通的心电图中提取心电衍生呼吸信号(EDR)，从而能够依据ECG来判定睡眠呼吸暂停。为通过ECG信号判定睡眠呼吸暂停提供了一个新的思路。Khandoker [ 24 ] 等利用小波分解从心率变异性(HRV)和心电图衍生呼吸(EDR)中提取出相应的特征作为SVM的输入以进行睡眠呼吸暂停综合征的判定，并且取得了比较不错的效果，但该研究只是针对患者进行分类，没有针对具体的呼吸事件进行判定。Chen [ 25 ] 利用同样的SVM方法对患者进行分类，但他选择了一种新的中值滤波方法进行数据预处理，这种方法能够有效的减少个体效应和随机噪声，最终在针对患者的严重程度上取得的结果为：准确率92.87%，特异性98.99%，敏感性97.41%。 相较于直接针对患者的分类，更多的研究是针对数据片段进行分类。Bsoul [ 26 ] 等使用了支持向量机(SVM)对从1分钟长度的数据片段中经小波变换和傅里叶变换所得到的相关特征进行呼吸事件的判定。通过对不同核函数的SVM的对比得出使用RBF核时能够取得的最佳结果为：准确率89%，特异性85%，敏感性96%。Yildiza [ 13 ] 等使用离散小波变换和快速傅里叶变换(FFT)从HRV和EDR得到实验所需要的4~8个相关特征，再经由线性核的SVM进行分类可以达到86.7%的准确率，80%的特异性及90%的敏感性，该文还对30人进行测试验证，结果显示能将所有被试正确分类为呼吸暂停患者和正常人。Maier [ 27 ] 等在自建数据集上通过递归分析达到了77.5%的准确率、敏感性和特异性。Varon [ 28 ] 等使用RBF核的SVM作为分类器在每分钟事件上实现了85%的准确率，同时提出了两个新特征：第一个是QRS的主要成分分析，它描述了在呼吸暂停期间由于交感神经活动增加而引起的形态变化；第二个特征是使用正交子空间投影提取的呼吸和心率信息。 虽然不少文献均使用支持向量机作为分类器，但是其他的机器学习模型在睡眠呼吸暂停判定方面也有较好的效果。Khandoker [ 19 ] 等利用前馈神经网络对5 s的事件片段进行分类，在测试集上对正常和睡眠呼吸事件的分类准确率高达98%，此外还对低通气和呼吸暂停进行了区分，准确率达到96%。其整个实验的流程如图2所示。在正常呼吸事件和呼吸暂停事件判定中所采用的特征包括均值、香农熵 [ 29 ]、方差、偏度等总计45个特征。而在针对呼吸暂停和低通气的分类中选择了小波近似值、方差、香农熵值作为特征输入到模型中。从流程图中我们可以看到与其他文献不同之处在于，该文献作者选取了不同的特征针对呼吸暂停和低通气进行分类。虽然低通气和呼吸暂停对健康的危害是类似的，但细致的区分有利于医生能够更清楚地掌握患者的情况。 Mendez [ 30 ] 等利用K近邻(KNN)和神经网络(NN)两种分类器来对正常呼吸事件和呼吸暂停事件进行分类，其中KNN算法的准确率为88%、灵敏性为85%、特异性为90%，NN的准确率为88%、灵敏性为89%、特异性为86%。Nguyen [ 31 ] 等通过心率变异数据的递归量化分析(Recurrence Quantification Analysis, RQA统计量来测量心率复杂性进而提取出相关特征输入到NN和SVM中来进行呼吸暂停和正常呼吸的分类，经过训练最终结果分别为：NN的准确率83.23%，特异性79.09%、敏感性85.57%；SVM的准确率84.14%、特异性65.88%、灵敏性93.72%。Kesper [ 32 ] 等搭建了一个自动分析模块的基本框架，仅基于单通道心电图即可获得睡眠呼吸障碍和睡眠相关疾病的诊断信息。在睡眠呼吸暂停的判定中准确率达到80.5%，在对睡眠分期的分类中准确率只有57.7%。虽然两者的准确率都达不到临床要求，但是文中使用单通道的ECG信号进行多种类型的睡眠相关疾病的判定的思想值得借鉴。 图2. 任务流程图 Hassan [ 33 ] 等首次将极限学习机(Extreme Learning Machine, ELM应用于睡眠呼吸暂停自动检测中，他们提出了一种基于经验模式分解(Empirical mode Decomposition, EMD)特征和ELM的OSA自动检测算法。其准确率也达到了83.77%。并在后续文献中Hassan还对比了包括随机森林、AdaBoost、Bagging等融合模型，发现Bagging能够取得最好的结果，准确率达到85.97% [ 34 ]。Babaeizadeh [ 35 ] 等人用二次分类器在仅使用两个特征的情况下取得了84.7%的准确率。 3.2. 基于呼吸、SaO 2 等生理数据的分类 上述介绍的是使用ECG数据的睡眠呼吸暂停分类，同时，睡眠呼吸暂停与其他生理信号也具有较强的相关性。有不少研究是基于血氧饱和度、呼吸信号等相关生理信号来进行睡眠呼吸暂停判定的。 Marcosa [ 36 ] 等人利用血氧饱和度信号的频谱和非线性特征作为输入，对比了LDA、KNN和LR的分类效果，最终发现LDA分类器具有最佳的诊断能力，准确率为87.6%、敏感性为91.05%、特异性为82.61%。Hornero [ 37 ] 等使用动脉血氧饱和度(SaO 2 )数据中提取出来的近似熵作为特征输入来对患者进行分类，用测试数据集对该方法进行了前瞻性评估，获得了82.09%的敏感性和86.96%的特异性。Álvarez [ 38 ] 等利用夜间血氧饱和度的非线性分析来进行睡眠呼吸暂停的诊断，其中集中趋势测量(CTM)的敏感性为90.1%、特异性为82.9%，Lempel-Ziv (LZ)复杂度的敏感性为86.5%、特异性为77.6%。 Haitham [ 22 ] 等充分利用了呼吸信号这一生理数据，通过从呼吸努力信号的相位和幅度中提取特征，并与HRV和氧饱和度信号的其它特征进行比较和结合，来评估呼吸努力信号的整体正常期和呼吸暂停期的分类，在针对每分钟的事件进行分类时准确率为82.4%、敏感性69.9%、特异性91.4%，在针对个人进行睡眠呼吸暂停综合征的分类时准确率达到95%。 Kaimakami [ 39 ] 等从鼻插管气流、胸廓气流、血氧饱和信号中提取出来三个非线性指标：最大喇布拉斯指数、非趋势波动分析和近似熵，在使用C4.5作为分类器时对正常受试者和呼吸暂停患者的区分正确率达84.9%，进一步对患者的严重程度区分时，准确率为74.2%。Xie [ 40 ] 等基于心电图和血氧饱和度生理信号，实现了单独检测和联合监测，并在分类实验中使用了十几种机器学习模型，分类器组合使用Adaboost和决策树。在基于25个患者的检测中达到82%左右的灵敏度、特异性和准确性。 葛晓丽 [ 41 ] 等通过对睡眠时期的SaO 2 和HRV进行实时分析，探究了其在睡眠呼吸暂停判定上的可行性。通过实验发现，患者发生呼吸暂停时，SaO 2 和心率会出现周期性变化趋势。但与心率相比，SaO 2 对呼吸暂停时长的变化更为敏感且规律。 除了针对成人研究外，儿童呼吸暂停研究也很重要。代长敏 [ 42 ] 等评估了脉搏传导时间(PTT)提取婴幼儿睡眠相关特征潜力和血压追踪能力，并讨论了现有PTT存在的一些局限性。Cohena [ 43 ] 在自建儿童数据集中提取了血氧数据的均值、最小值、平均绝对变化率等特征，使用线性分类器得到的准确率为66.7%、特异性67%、灵敏性58.1%。虽然最终的结果尚未达到临床要求，但该文献是为数不多针对儿童睡眠呼吸暂停自动判定的研究。  总的来说，基于统计规则的睡眠呼吸暂停的自动判定需要经过数据处理、特征提取和分类器3个步骤。数据处理一般包括数据截取、中值滤波等。特征提取一般都是将ECG信号转换成心率变异率和心电衍生呼吸信号之后直接提取相关特征，或者用快速傅里叶变换、EMD和小波分析进行进一步的特征提取。分类器选择大多是基于传统的机器学习模型，SVM、KNN、NN、LR和随机森林、bagging、Adaboost等融合模型。表2列出具有代表性的基于统计规则的文献简介和表现。 Table 2 文章 数据集 方法 Acc (%) Sen (%) Spe (%) [ 24 ] Apnea-ECG(ECG) SVM 70 80 50 [ 40 ] UCD数据库(ECG+SaO 2 ) 多种机器学习方法 77.74 69.82 80.29 [ 27 ] 38例自建医院数据集(ECG) 递归分析 76.70 66.80 73.80 [ 33 ] Apnea-ECG(ECG) ELM 83.77 − − [ 34 ] Apnea-ECG(ECG) Bagging 85.97 − − [ 28 ] Apnea-ECG(ECG) SVM 84.74 84.71 84.69 [ 36 ] 自建187人数据集(呼吸+SaO 2 ) QD、LDA、KNN、Logistic 87.61 91.05 82.61 [ 30 ] Apnea-ECG(ECG) KNN、NN 88 86 89 [ 43 ] 自建儿童数据集(儿童SaO 2 ) 线性分类器 66 67 58.1 表2. 基于统计规则的模型表现 支持向量机(SVM)是在该领域使用最为广泛的机器学习模型，相较于递归分析、LR、LDA等模型往往能取得更好的效果，但在相同的数据情况下，Mendez在文章中使用神经网络(NN)和KNN能取得更好的结果，表明所用到的特征比较具有借鉴意义。在使用多个生理数据作为判定依据时，模型的敏感性会更高。"
"在深度学习得以实际应用之前，睡眠呼吸暂停的检测领域，如家庭检测阻塞性睡眠呼吸暂停(OSA) [ 44 ] 的分析设备，基于呼吸和氧测量信号 [ 44 ] 的分类方法，便携式监测分类系统 [ 45 ] 等检测和治疗方法均已有一定的研究。随着深度学习技术理论的极大发展 [ 46 ] [ 47 ]，近年的研究成果显示，使用深度神经网络比传统的机器学习在很多领域有显著的精度改进。而且随着计算机计算能力的加强以及GPU技术的出现，越来越多的深度学习项目取得了令人欣喜的成果 [ 48 ] [ 49 ]。在生物医学领域如睡眠分期 [ 50 ] [ 51 ]、微觉醒 [ 52 ] [ 53 ] [ 54 ]、睡眠呼吸暂停等方面，各种不同的深度神经网络也都取得了较高的分类准确率。由于睡眠数据具有非平稳、非线性的特点，传统的机器学习方法需要研究人员花费大量的精力去进行特征提取，而神经网络能够很好地解决此类问题，因而越来越多的研究者将神经网络技术应用于睡眠呼吸暂停的自动判定任务中。本节中根据研究人员所使用的网络结构不同分别介绍了基于卷积神经网络(CNN)、循环神经网络(RNN)和混合神经网络在呼吸暂停识别领域的研究成果。  卷积神经网络(CNN)是目前最常用的一种深度神经网络模型之一。通常由四种不同类型的层组成:输入层、卷积层、池化层、分类层(通常是带有softmax函数的全连接层)。还有批量标准化(BN)和dropout层也可以添加到卷积神经网络中。通常情况下，CNN是用来对图像进行分类的，但近年来有研究 [ 55 ] [ 56 ] [ 57 ] [ 58 ] [ 59 ] 采用一维CNN (CNN1D)网络进行信号分类也取得了很好的效果。Haidar等 [ 59 ] 使用三个数据通道一维信号，创建了具有三个通道输入的一维卷积神经网络。还有研究 [ 60 ] [ 61 ] 将一维信号转换为二维输入特征图，直接利用二维CNN (CNN2D)网络来进行训练。 Urtnasan [ 57 ] 等使用CNN1D (训练集有63名受试者，测试集有19名受试者)分析了单导联心电图(ECG)的信号。该信号被分割成10 s的数据片段，每个数据片段有2000个采样点，并且每个片段对应了相应的呼吸事件。网络由不同大小的卷积和池化层组成，然后经过dropout。文中研究了7个CNN模型，它们的层数从3层到9层不等。以分类准确率作为参考标准，实验发现六层CNN获得了最高的准确率(96%)。Urtnasan等 [ 56 ] 也使用CNN1D进行多个种类分类(正常、呼吸暂停和低通气)。该网络的输入为10 s长的ECG信号数据，包含2000个样本点。网络结构包括批处理标准化(BN)、一维卷积(conv1D)、最大池(Maxpool)、dropout和全连接层。六层CNN的准确率达到90.8%。显示出卷积神经网络在ECG信号上的优良性能。 Haidar等 [ 59 ] 探究了基于鼻气流分析的二元分类(呼吸暂停或正常)。该网络由3个卷积层组成，每个卷积层有30个过滤器，每个过滤器的内核大小为5 * 1，步长为5，每个步长后面是一个最大池化层，最大池化层为核大小为2，在网络最后有一个输出为2的全连接层。每个类有两个输出节点(正常或呼吸暂停)。该模型的平均准确率达到75%。此后，Haider等还测试了三个输入信号的CNN1D，信号包括口鼻气流、腹部和胸部运动信号，通过数据组合，分别测试了单通道，双通道和三通道的数据作为输入时的模型结果。结果显示，三信号通道模型的性能优于单信号通道和双信号通道模型，平均精度为83.5%。 用连续小波变换(CWT)和解析小波变换计算出的鼻气流信号的频谱图作为输入，McCloskey等 [ 61 ] 利用CNN2D搭建了自动判定呼吸事件的模型。该模型结构如图3所示。该网络有两个卷积层，激活函数选择ReLU函数，最大池化步长为2，模型的最后一层为全连接层，分类函数使用softmax。其中三个输出节点代表三个类(正常、呼吸暂停和低通气)。该模型的平均准确率达到79.8%。Chen等 [ 60 ] 使用CNN2D来进行研究，在实验中采取交叉验证。该实验有三个输入信号(血氧饱和度、口鼻气流、胸腔和腹部运动)，并附带有一秒注释。该网络由两个卷积层、两个池化层和一个连接到三个节点的输出层的全连接层组成。多类分类的总体准确率为79.61%。 王佳珺 [ 62 ] 利用卷积神经网络对不同呼吸暂停情况下的鼾声进行了分类，其识别准确率达到了89%。贺冲 [ 63 ] 通过对鼾声数据进行转换得到梅尔频谱图作为二维卷积神经网络的输入，得到的最好结果的准确率为89.1%。 图3. 卷积神经网络  RNN是具有循环连接的神经网络，其中隐藏节点输出 h t 的中间值根据前一个单位 h t − 1 和当前输入 x t 进行更新 [ 64 ]。基本上在论文中使用最多的是RNN的两种变体—长短时记忆(LSTM)和门控递归单元(GRU)。图4中展示了LSTM和GRU的结构以及内部流程图。 图4. LSTM和GRU结构 Steenkiste等 [ 65 ] 分析了利用胸部生物阻抗(bioZ)作为呼吸替代物的潜力。提出了一种基于双向长短时记忆(LSTM)深度学习算法的便携式事件检测装置。该装置使用设备的同步录音和传统的多导睡眠描记术对25例患者进行了基准测试。结果表明，仅使用bioZ，可获得46.9%的精确，与多导睡眠描记呼吸通道自动评分相当，其敏感性为58.4%、特异性76.2%、准确率72.8%。 Kang等 [ 66 ] 提出了一种基于长短时记忆(LSTM)的多类睡眠呼吸暂停/低通气事件分类的新方法，该方法使用光容积描记法(PPG)信号。三层LSTM模型采用批处理-归一化和dropout对正常、呼吸暂停、低通气等多类事件进行分类。通过对82例睡眠呼吸暂停患者7小时的夜间PSG描记术测量PPG信号，并将其用于模拟训练和评估。对63例患者的训练集和13例患者的测试集评价了该方法的性能。结果表明，LSTM模型对正常患者的阳性预测值为94.16%，对呼吸暂停患者的阳性预测值为81.38%，对低通气患者的阳性预测值为97.92%；对正常的敏感性为86.03%，对呼吸暂停的敏感性为91.24%，对低通气事件的敏感性为99.38%。 Cheng等 [ 67 ] 采用四层LSTM检测OSA，20名受试者用于训练，10名受试者用于测试，并使用RR-ECG信号。该网络由一个递归层和一个数据归一层组成，重复四次，然后是一个softmax层，平均准确率为97.80%。 Urtnasan等 [ 68 ] 采用归一化心电信号作为输入(74例用于训练，18例用于测试)，分别测试了6层LSTM和GRU的效果。LSTM和GRU的准确率分别为98.0%和99.0%。  虽然卷积神经网络和循环神经网络都具有很强的功能，并且在呼吸事件判定的领域取得了不错的结果，文献显示，混合神经网络继承了两者的优点，可能效果更好。 Biswal [ 69 ] 等使用气流、SaO 2 、胸腹部、传送带信号来评估联合使用的深度循环和卷积神经网络(RCNN)的性能。采用90%数据用于训练，10%数据用于测试的方法。使用波形表示和频谱图作为神经网络的输入，并结合CNN和RNN (RCNN)。使用频谱图作为输入的RCNN获得最高准确率为88.2%。 Banluesombatkul [ 70 ] 等提出了一种不同的模型结构，通过结合CNN1D，LSTM来检测睡眠呼吸暂停，输入数据是15秒从整晚睡眠数据中截取的数据片段，使用10倍交叉验证方法。其中每个卷积层之后是一个批处理的归一化层，ReLU作为激活函数。然后将LSTM (分别为128、128和64个单元)和周期性的dropout (0.4)进行叠加以提取时间信息。在网络的末端，一个具有全连通的层由大小为128、64、32、16、8和4个隐藏节点的层组成，然后用一个SoftMax函数进行分类。在针对睡眠呼吸暂停患者的严重程度分类中达到79.45%的敏感性、特异性和准确率。 Pourbabaee [ 71 ] 等运用DCRNN混合模型通过12通道PSG数据实现了多任务的睡眠相关任务的分类，包括睡眠呼吸判断、睡眠分期和微觉醒判定。在睡眠呼吸暂停综合征判断的任务中，平均AUPRC达到0.783，AUROC达到0.965。并且在模型中针对睡眠呼吸暂停/低通气综合征的严重程度给出判定。相比于其他研究，该文献主要针对微觉醒的一个竞赛写的，但是其主要优势在于采用了混合通道的混合模型针对混合任务进行了一系列的研究，其模型结构如图5所示。在该模型中，输出维度为4，经过不同的排列组合后可以对微觉醒/正常、睡眠分期、睡眠呼吸暂停等进行多任务分析。 除了使用生理数据之外，基于深度学习的相关问题研究还包括用人脸识别和数据增强的方法。Jayatilaka [ 72 ] 等提出了一种新的基于视频处理的睡眠呼吸暂停检测算法。该解决方案系非接触式，精确度高、重量轻，足以在单板计算机上运行。 Nikolaidis [ 73 ] 等设计了一个递归生成对抗网络，以生成真实的合成数据并扩充原始数据集。基于严重不平衡的数据集生成平衡数据集，这些解决方案被应用于睡眠呼吸暂停检测，并对K-近邻、随机森林、多层感知器和支持向量机四种著名技术的性能进行了评估。结果表明，针对不同的分类器数据增强后都能取得较好的效果，卡帕统计量增加在0.0072到0.00182之间。表明深度学习在处理生物医学领域数据不均衡问题的可行性。  总的来说，基于深度学习的睡眠呼吸暂停的研究方法更是多种多样，并且取得了较好的效果。表3显示了部分深度学习相关研究的模型及其表现。 图5. SleepNet网络结构图 Table 3 文章 数据集 模型方法 ACC(%) Sen(%) Spe(%) [ 57 ] 86位自建数据集(ECG) CNN1D 90.8 87 87 [ 55 ] 自建数据集 CNN1D 98.9 97.8 99.2 [ 58 ] 179份自建数据集(鼻压力) CNN1D 96.6 81.1 98.5 [ 61 ] 157份自建数据集 CNN2D 79.8 79.7 − [ 60 ] UCD数据库(SaO 2 +口鼻气流+胸腹腔运动) CNN2D 79.6 − − [ 67 ] 自建数据集(ECG) LSTM 97 − − [ 68 ] 92名自建数据集(ECG) LSTM 98.5 98 98 [ 68 ] 92名自建数据集(ECG) GRU 99 99 99 [ 70 ] MrOS睡眠数据库 CNN1D+LSTM 79.5 77.6 80.1 [ 69 ] 10000份自建数据(多通道PSG数据) RCNN 88.2 − − [ 71 ] Physionet2018竞赛数据库(多通道PSG数据) DCRNN 78.3 − − 表3. 基于深度学习的模型的表现 由于深度学习模型的优良特性，在基于深度神经网络的睡眠呼吸暂停判定的研究中，针对数据的处理很少，基本上可以实现端到端的事件判定，相较于传统的基于统计规则的方法来说比较方便，也具备更广阔的使用前景。在使用二维卷积时，一般是提取相关生理信号的频谱作为模型的输入。但是，从不同文献的对比可以发现，基于深度学习的文献大多是使用自建数据集，后续的研究人员很难复现其工作。并且多数文章并没有对其代码进行开源。大数据集上得到的结果反而不如小数据集所得到的结果。这表明在小数据集中数据标注可能更准确，不同类型呼吸事件之间的差别比较明显。但是越大的数据集越贴合实际，具有更高的研究价值。"
"本文综述了近年自动睡眠呼吸暂停判定的研究，包括基于传统机器学习和目前主流的深度学习的研究。 在早期的自动判定睡眠呼吸暂停的研究中，不少文献中已经提出了各种方法来解决该问题，其中大多数包括两个步骤：手工制作一组相关特性；开发合适的分类器，进而提供自动诊断。这些研究采用了k近邻(k-nearest neighbor, KNN)、支持向量机(SVM)、模糊逻辑、神经网络、线性判别分析(LDA)等分类器。虽然这些研究具有较高的准确率、特异性和灵敏度，但这些方法有两个主要问题：一是无限组合的特征集合，通常文中都会提到很多相关的特征来进行分类，但是这些特征并不是全部都能起到作用。使用适当的特征选择方法可以缓解这个问题，文献中已经提出了多种算法如统计估计、最小冗余最大关联、顺序正向选择(SFS)、主成分分析(PCA)以及遗传算法(GA)。第二个问题是需要在特定领域有相当多的知识来创建相关的特征提取算法和模型。 这两个问题可以通过使用深度神经网络来解决。深度神经网络通过从传感器的输入信号中寻找某种模式来自动生成特征。并且在很多相关的研究中是直接使用原始数据作为输入直接进行睡眠呼吸事件的分类的，即不需要再进行繁琐的特征提取。并且深度神经网络的应用能够有效地提升判定准确率。但是现阶段，这方面的工作也存在着一些不足。第一个是在不同的研究中研究人员所使用的数据不尽相同，导致了并不能单纯的从文章中所得到的结果进行对比，难以复现其中的模型。第二个是在使用深度学习来进行睡眠呼吸事件分类的研究尚没有一个很好的可解释性。另外还存在着睡眠数据不够多等问题。 近年的文献可以发现，在自动睡眠呼吸暂停模型的选择上，研究人员越来越倾向于选择深度学习模型来进行该领域的研究。由于深度学习的一些优良特性，未来睡眠呼吸暂停自动判定的研究更多将是一种端到端的基于深度学习为内核的一套判别系统的搭建。同时需要注意的是，模型的搭建上尽量选择开源的数据集进行验证，这样方便后续研究人员进行复现，以提升研究的可靠性。 在研究方向上，对多通道数据进行多任务分析分类将成为一种趋势，由于睡眠呼吸暂停中所用到的PSG数据也可以用在其他的睡眠相关的研究中，故单一模型的多任务分类也将是研究热点。另外，在针对睡眠呼吸暂停相关数据过少这个问题上，已经有研究 [ 73 ] 表明对抗生成网络能够有效地提升模型在睡眠呼吸暂停自动判定上的表现。所以未来生理信号上数据增强的研究也至关重要。 针对人体的各种生理信号大数据的分析，将为各种疾病的智能诊断和预测，提供强有力的分析工具。因此，利用人工智能技术，对PSG等大数据，进行睡眠状态分期和睡眠呼吸暂停等事件的自动分析，用于睡眠障碍、抑郁症等精神疾病的评估、预测、治疗和康复等各种医学过程，将是该研究下一步的重要发展方向 [ 74 ] [ 75 ]，有望将在一定程度上提高医护效率，节约医疗资源，并极大缓解精神医学专业资源服务稀缺的状况。"
