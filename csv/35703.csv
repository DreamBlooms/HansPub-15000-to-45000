"为解决公共自行车租赁点的自行车时空分布不均衡的现象，采用先装后卸和装卸一体两种思路，考虑租赁点的供需关系、卡车的额定载客量等约束条件，以总配送里程最少为目标，在单、多调度中心情形下，建立该问题的四类带时间窗混合整数线性规划模型。利用Cplex求解模型的精确解，结合一个算例，比较四类模型的方案差异，并给出了卡车配送路线，从而验证模型的正确性。 关键词 :公共租赁自行车调度，多调度中心，装卸一体，先装后卸，Cplex求解 Copyright © 2020 by author(s) and Hans Publishers Inc. This work is licensed under the Creative Commons Attribution International License (CC BY 4.0). http://creativecommons.org/licenses/by/4.0/"
"公共租赁自行车作为一种新型的交通方式，兼有公共交通和慢行交通的特点，越来越受到人们的青睐。由于城市的功能布局、经济发展差异，这引起租赁网络上的公共自行车供需关系在时间和空间上的不平衡，依靠人工调度方式几乎不可能在短时间内理顺它们之间的关系，进而不能将部分租赁点的多余自行车合理地提前调配至缺少自行车的租赁点，调度方式较粗放、低效率，可能出现部分租赁点的无车可借或车辆空闲、还车时车位已满等现象。因此，公共租赁自行车调度问题日渐突出 [ 1 ] [ 2 ]。 公共租赁自行车调度(Rental Bicycle Dispatching Problem，简称RBDP)属于车辆路径问题(Vehicle Routing Problem，简称VRP)的研究范畴，它们之间共性在于合理安排车辆访问客户或租赁点，其差异在前者考虑租赁点的装卸车辆数对供需关系影响而后者无须关注该问题，因而RBDP比VRP复杂的多，因而吸引了众多国内外学者的广泛关注。目前，RBDP分为先装后卸(卡车访问供应点装完自行车后，才访问需求点卸载自行车)、同时装卸(卡车同时访问供应或需求点，但是满足需求点的自行车需求)两种研究思路，前者比后者调度效率低，但是操作相对容易。同时装卸的RBDP的研究相对成熟，主要归纳如下：董红召等 [ 3 ] 针对公共自行车时空上分布不均衡问题，以服务点的满意度最大化为目标，建立模糊时间窗的公共慢行系统调度模型；鲍娜 [ 4 ] 系统地研究公共自行车租赁点选址决策与调度模型之间耦合关系；刘登涛等 [ 5 ] 将模拟退火算法和遗传算法混合起来求解公共自行车调度模型；张辉和郑彭军 [ 6 ] 提出了一种带模糊时间窗的城市公共自行车调度路径优化模型；徐建闽等 [ 7 ] 从时间分布和空间分布两方面分析了公共自行车高峰期潮汐需求规律及其与用地类型的关系，创新地提出以上层调度区域、调度小区和站点为主的多层次分区调度方法；胡列格等 [ 8 ] 研究公共自行车调度的车辆路径问题，并设计求解该问题的禁忌搜索算法；Szeto等研究了多车型的公共自行车调度，并设计求解大规模问题的启发式算法 [ 2 ] [ 9 ] [ 10 ]。先装后卸的RBDP的研究尚未被国内外学者深入研究，仅柳祖鹏等 [ 11 ] 借鉴货郎担问题动态规划的解题思路，研究一种先装后卸的公共自行车系统站间调度模型。由上可知，多调度中心的RBDP较少研究，既有研究均假设夜间提前调度，忽略各个租赁在不同时段的供需差异，虽然少量文献探讨配送时间窗对调度方案的影响，但是它们忽略了卡车在租赁点的装卸量是否满足供需关系，与实际不相符合。此外，现有先装后卸的RBDP不符合混合整数线性规划模型规范，无法借助Cplex等优化软件求解精确解。 综上所述，本文从运筹优化角度，针对租赁点的供需时空分布，考虑租赁点的配送时间窗因素，基于先装后卸和装卸一体两种模式，在单、多调度中心情况下，建立RBDP的四类混合整数线性规划模型。最后，以南通某区域公共租赁自行车调度为例，利用Cplex求解模型的精确解，比较了单和多调度中心、先装后卸和装卸一体的调度方案差异，从而验证模型的正确性。"
"(1) 与既有智能调度平台数据交互，收集所有租赁点在各个时间段的缺少或多余自行车数； (2) 所有供应点和需求点均在卡车配送路径中，并且只被允许一辆车访问； (3) 忽略卡车在租赁点的装卸自行车时间对配送线路的影响。  索引： i , j ：租赁点或调度中心； k ：车辆。 集合： N ：租赁点集合； O ：调度中心集合； K ：车辆集合。 变量： p j ：租赁点j的自行车需求量，若 p j > 0 ，则多余；否则，缺少； z j ：租赁点j的供需标识，若 p j > 0 ，则 z j = 1 ；否则， z j = − 1 ； d i j ：公共自行车租赁点i和j之间距离； q i k ：车辆k访问租赁点i后的自行车数量，即断面流量； t i k ：车辆k访问租赁点i的时间； [ l i , u i ] ：租赁点i的时间窗； C ：车辆的最大容量； D ：车辆的最大里程； M ：一个比较大的固定值。 决策变量： x i j k ：车辆k依次访问租赁点i和j； y i k ：车辆k是否访问租赁点i； p j k ：车辆k访问租赁点j时的装卸自行车数； U ik ：辅助变量。  min ∑ ∀ k ∈ K ∑ ∀ i ∈ N ∪ O ∑ ∀ j ∈ N ∪ O x i j k d i j (1)  ∑ ∀ i ∈ N y i k ≥ 1   ∀ k ∈ K (2) ∑ ∀ k ∈ K y i k = 1   ∀ i ∈ N ∪ O   ∀ k ∈ K (3) ∑ ∀ i ∈ N x i j k = ∑ ∀ i ∈ N x j i k = y i k   ∀ j ∈ N , ∀ k ∈ K (4) ∑ ∀ i ∈ O x i j k = ∑ ∀ i ∈ O x j i k = 1   ∀ j ∈ N , ∀ k ∈ K (5) U i k − U j k + ( | H | * x i j k ) ≥ | H | − 1 , ∀ i , j ∈ N ∪ O , ∀ k ∈ K (6) q i k + p j k − ( 1 − x i j k ) ⋅ M ≤ q j k   ∀ i , j ∈ N ∪ O , ∀ k ∈ K (7) q i k + p j k + ( 1 − x i j k ) ⋅ M ≥ q j k   ∀ i , j ∈ N ∪ O , ∀ k ∈ K (8) t i k + T i j − ( 1 − x i j k ) ⋅ M ≤ t j k   ∀ i , j ∈ N ∪ O , ∀ k ∈ K (9) t i k + T i j + ( 1 − x i j k ) ⋅ M ≥ t j k   ∀ i , j ∈ N ∪ O , ∀ k ∈ K (10) l i ≤ t i k ≤ u i   ∀ i , j ∈ N ∪ O , ∀ k ∈ K (11) (12) ∑ ∀ j ∈ N x 0 j k ⋅ p j ≥ 0   ∀ k ∈ K (13) ∑ ∀ j ∈ N x j 0 k ⋅ p j ≤ 0   ∀ k ∈ K (14) p j k ≤ p j     p j > 0   ∀ j ∈ N , ∀ k ∈ K (15) p j k = p j   p j < 0   ∀ j ∈ N , ∀ k ∈ K (16) q i k = 0   ∀ i ∈ O , ∀ k ∈ K (17) q i k ≤ C   ∀ i ∈ N , ∀ k ∈ K (18) ∑ ∀ i ∈ N ∪ O ∑ ∀ j ∈ N ∪ O x i j k d i j ≤ D   ∀ k ∈ K (19) 在模型中，式(1)是问题的目标函数，追求总的出行距离最短。式(2)~(19)是约束条件，其中：式(2)和(3)表示每辆车至少访问一个租赁点、每个租赁点仅被一辆车访问；式(4)表示每个租赁点不能被多辆车访问；式(5)表示每辆车从配送中心出发并返回该配送中心；式(6)表示避免出现车辆路径子回路；式(7)和(8)表示车辆访问相邻租赁点的断面流量变化关系；式(9)和(10)表示车辆访问相邻租赁点的到达时间变化关系；式(9)和(10)表示车辆访问租赁点的到达时间满足时间窗；式(12)表示车辆访问租赁点的顺序只有一个装卸分界点；式(13)和(14)表示车辆先访问供应租赁点后访问需求租赁点；公式(15)和(16)表示车辆在租赁点装卸自行车数约束；公式(17)表示车辆由调度中心空车出发并实现空车返回调度中心；式(18)表示车辆的载客量不超过其最大额定载客量；式(19)表示车辆的行程里程不超过其上限。 有上可知，若考虑约束式(12)~(14)，该问题是先装后卸的RBDP，否则是装卸一体的RBDP；若调度中心集合O的元素为1个，是单调度中心的RBDP，否则为多调度中心的RBDP。当不考虑约束式(9)~(11)，该模型与忽略租赁点在各个时间段的自行车供需差异，可以利用夜间调度一次满足所有租赁点的整个白天供需需求。在实际使用中，根据实际问题场景，可以选择设置不同模型参数和条件。"
"以南通某区域的公共自行车调度为例说明，总共2个调度中心(经纬度为120.912722~31.982706和120.898025~31.984626)和29个租赁点，它们的位置、时间窗和缺少或多余自行车数如表1所示，已知配送卡车的额定载客量和最大行程里程分别为30辆自行车和15 km。 Table 1 序号 租赁点名称 经纬度 供需量 时间窗 001 南通大学北 120.914518 31.981654 4 9:02~11:20 002 南通大学西 120.909212 31.976416 6 9:05~11:20 003 中南世纪城 120.906625 31.974701 6 9:00~11:20 004 体育会展中心 120.901163 31.973721 −1 9:00~09:50 005 烟草公司 120.897426 31.978376 −4 9:08~10:00 006 紫琅路崇文路口 120.885265 31.980144 −4 9:05~10:00 007 南通大学南 120.921185 31.97727 12 9:04~10:40 008 啬园 120.914057 31.974085 8 9:02~11:20 009 中央商务区 120.897459 31.975775 9 9:05~10:30 010 市行政中心西 120.894837 31.987502 13 9:08~10:40 011 七星花园东 120.909892 31.973556 4 9:02~10:00 012 园林路南郊路南 120.912224 31.966805 −3 9:09~09:45 013 新港花苑 120.916167 31.966602 2 9:03~11:20 014 朝阳桥西 120.921427 31.966675 −3 9:05~10:00 015 五山家园 120.909681 31.969983 12 9:00~10:00 016 市行政中心南 120.904624 31.985522 −1 9:05~10:10 017 大地物流 120.928794 31.966139 −2 9:10~10:20 018 冠达商城 120.929768 31.97537 2 9:02~10:30 019 崇川路世伦路口 120.924879 31.98304 3 9:05~10:30 020 崇川路园林路西 120.907221 31.980704 −3 9:08~10:10 021 工业博览城 120.939448 31.978007 5 9:02~10:30 022 通富路通沪大道口 120.930303 31.978849 −3 9:05~10:05 023 政务中心 120.893616 31.992992 −1 9:10~11:2 024 疾控中心 120.893009 31.995656 −2 9:15~09:55 025 文峰城市广场 120.891321 32.002879 2 9:05~10:00 026 红星路工农路西 120.889902 31.9968 −3 9:07~10:30 027 园林路通启路北 120.908396 31.993499 −3 9:20~10:25 028 世纪新城北 120.923522 31.990509 3 9:02~11:20 029 世纪新城 120.920157 31.987396 −2 9:25~10:15 表1. 租赁点的基本信息 通过C#和Cplex搭建基于百度地图的求解框架，当配送卡车数为3、4和5时，求解RBDP在单和多调度中心、装卸一体和同时装卸的四种模型调度结果如表2所示，从中可知：(1) 随着车辆数增加，四种RBDP模型的总配送里程和时间不断增大，这是由于车辆访问客户后返回调度中心，因而增加车辆数后导致总里程和时间不一定总是减少，计算结果符合实际；(2) 无论先装后卸或装卸一体情况下，多调度中心RBDP的里程和时间均比单调度中心的少，这是因为配送卡车可以选择从较近的调度中心出发从而节省里程和时间；(3) 无论单、多调度中心情形下，装卸一体RBDP的里程和时间均比先装后卸的少，这是因为先装后卸的RBDP先集中访问供应点装车在访问需求点卸车，这必然比同时访问租赁点装卸车多绕行路线。因此，多调度中心、装卸一体的RBDP是最优的。 有上可知，车辆数为3是四种RBDP的最优方案，给出它们的最优路线如图1~图4所示。"
"针对先装后卸的多调度中心公共自行车调度问题，考虑满足卡车的能力约束、租赁点的供需关系等限制条件，本文建立了一类混合整数线性规划模型，通过C#调用Cplex求解一个算例表明：随着车辆数增加，单、多配送中心的总行驶里程和时间都有较轻微的增加，多调度中心相对单调度中心总里程和时间减少，计算结果符合直观分析，从而验证了模型的有效性。 本模型的研究不足在于：(1) 调度目标比较简单，忽略乘客的满意度对调度结果的影响，尤其是供应小于需求；(2) 忽略调度中心选址对调度结果的影响；(3) Cplex无法求解大规模问题，亟待寻求求解该问题的启发式算法，如：蚁群算法、遗传算法等。 图1. 单调度中心的先装后卸配送线路 图2. 多调度中心的先装后卸配送线路 图3. 单调度中心的装卸一体配送线路 图4. 多调度中心的装卸一体配送线路 Table 2 车辆数 先装后卸 同时装卸 单调度中心 多调度中心 单调度中心 多调度中心 总里程 (km) 总时间 (min) 总里程 (km) 总时间 (min) 总里程 (km) 总时间 (min) 总里程 (km) 总时间 (min) 3 27.97 148 27.18 146 22.67 132 24.08 133 4 29.38 155 28.04 151 24.42 140 26.35 141 5 31.04 162 29.39 156 26.82 150 28.22 149 表2. 四种调度模型的方案对比"
