"在对中频模拟电路(分立或集成的)进行研究和分析时，相比基于经验的定性分析法，能够用小信号解析分析方法得到所需要的参数的准确值是至关重要的。传统的分析方法在有源器件数目增多时变得越来越复杂，甚至无法进行下去；为此，该文研究和验证了一种基于戴维宁和诺顿等效电路及Mason信号流图的方法。它简明有效，结果正确，物理意义清晰；其避免了传统方法写很多回路电压或节点电流方程进行求解的繁琐。因而有必要对其进行系统地研究和应用。该文通过将其与传统方法的结论对比，以及用Multisim仿真的手段，验证了它是正确的。并且其可用于各种类型的模拟电路，在实际工作中是一个有力手段。"
"在进行与传感器相关的模拟电路分析或集成电路设计等工作中，在计算电路参数(如放大倍数、输入输出电阻等)时，进行定性的、经验性的估算往往是不够的，甚至是错误的。而在进行小信号解析分析时，传统方法是将三极管或场效应管用其等效电路代替 [ 1 ] [ 2 ] (如h参数等效模型，混合π模型，或T模型等)，写出回路电压方程或节点电流方程进行求解。但这种方法在有源器件数目很多时变得非常繁琐，甚至难以求解；那有没有一种好的解析分析方法可以避免这个缺点，简明直观且物理意义清晰？关于定量的解析分析方法在很多经典文献中都有体现 [ 1 ] - [ 8 ]，但都没有系统性地介绍。本文希望能系统给出一种解析分析方法，这种方法可用于分析各种电路，如级联放大器、差分放大器、负反馈放大器等，同时它又计算简单。经过深入研究，我们在文献 [ 3 ] [ 9 ] 的思想基础上系统化地整理并提出了一种简明的分析方法；它通过渐进式地对有源器件应用戴维宁或诺顿等效电路的方式，只需要简单的变换和运算就可方便地得出结果，且可一次性地得出诸如放大倍数、输入输出电阻等各种参数。且可用来分析基于晶体三极管和场效应管的多级放大器、差分放大器、负反馈放大器等各种电路。在本文中将主要对这种方法进行研究，设法用理论分析、仿真的手段来验证其正确性；并研究其适用范围，将其完善和系统化，使其成为一种普适的、简单有效的定量解析分析模拟电路的方法(本文主要针对中频)。文献 [ 9 ] 有类似的做法，但没有用在较为复杂的电路，也不够系统。本文通过一个有代表性的例子说明这种方法的用法并验证其正确性。 有些文献主要对电路分析中的一些虚构的、复杂的电路进行了一些理论分析，如 [ 10 ] [ 11 ]；但对由晶体管和场效应管构成的实用型电路(如差分、负反馈放大电路等)的分析方法并没有进行探讨，在这方面的系统探索也非常少。因此本文努力弥补这一缺憾，将对电路分析理论中的经典方法(如戴维宁、诺顿等效电路法)如何应用于这些实用电路做深入探讨，并在这一重要领域做一些开拓性的研究。 在本文中使用国际上通用的符号表示方法。大写字母、大写下标的表示直流变量，如 V B E ；小写字母、小写下标的表示小信号变量，如 v b e ；小写字母、大写下标表示总变量，如 v B E = V B E + v b e ；大写字母、小写下标表示相量，如 V b e 。"
"根据( [ 1 ], P.96)知，晶体管的共射h参数等效模型如图1。其中 r c e 值在几百千欧以上。如果晶体管输出回路所接负载电阻 R L 与 r c e 可比，则在电路分析中应当考虑 r c e 的影响，否则可忽略。 图1. 三极管的共射h参数等效模型 下面我们通过一个例子来逐渐引入这种定量解析分析方法。这个例子具有典型性。如图2，第一级为差分放大器，第二级由三极管的基极和发射极输入，其既不是共射也不是共基电路，分析起来没有现成的结论可以利用。因此大家可以利用后面所介绍的方法。我们看参考书( [ 12 ], P.121)习题4.7，原题如下： 电路如图2所示，T1与T2管的特性相同，所有晶体管的 β 均相同， R c 1 远大于二极管的正向电阻。当 v i 1 = v i 2 = 0   V 时， v o = 0   V 。1) 求解电压放大倍数的表达式；2) 当有共模输入电压时， v o = ? 简述理由。 图2. 参考书 [ 12 ] 中的习题4.7附图 原书 [ 12 ] 解如下： 1) 在忽略二极管动态电阻的情况下 A u 1 ≈ − β ⋅ R c 1 ‖ r b e 3 2 r b e 1 A u 2 = − β ⋅ R c 2 r b e 3 A u = A u 1 ⋅ A u 2 = β 2 R c 1 R c 2 r b e 1 ( 2 R c 1 + r b e 3 ) (1) 2) 当有共模输入电压时， v o 近似为零。由于 R c 1 ≫ r d ， v c 1 ≈ v c 2 ，因此 v b e 3 ≈ 0 ，故 v o ≈ 0 。 原电路中的二极管D是用来设置 T 3 的直流工作点，使其处于放大工作状态；第一级是差分放大电路，第二级既不是共射电路也不是共基电路，而其输入信号是从基极和射极输入的。电路输入 v i 为差分放大器的差分输入电压。所以原书是由第一级差分放大电路的差分放大倍数 A u 1 和第二级共射放大电路的放大倍数 A u 2 来经验性地给出整个电路的放大倍数 A u 的。显然不能令人信服，由后面分析知其答案是有误的。下面我们用解析分析方法来给出准确的答案。"
"这种电子线路的小信号分析方法是传统方法，即将所有有源器件用它们的小信号模型代替，然后通过写出回路电压或节点电流方程组来求解所需的增益或阻抗等参数。但在有源器件数目增多时，求解过程变得非常复杂和不易掌握。 首先我们计算此电路的电压放大倍数。将3个三极管用其共射h参数等效电路代替(这也是很多书中采用的解析分析方法，如 [ 1 ] [ 2 ] )，则得到如图3的小信号交流电路。在其中， T 1 、 T 2 管的 r c e 由于远远大于与其并联的 R c 1 故可忽略；而 T 3 管的 r c e 暂时没有理由忽略。由差分输入性质，有 i b 1 = i b 2 ，故O点电位为0，相当于接地；另， r b e 1 = r b e 2 ， β 1 = β 2 = β 3 = β 。 图3. 图2的小信号交流等效电路 列出下列两方程，消去 i b 3 ，得 i o 和 i b 1 的关系，从而得到 A u 。 { ( i o + i b 3 + β i b 1 ) R c 1 + ( i b 3 + β i b 1 ) R c 1 = − i b 3 r b e 3                                                                                                   ( 2 ) ( i o + i b 3 + β i b 1 ) R c 1 = − [ i o R c 2 + ( i o − β i b 3 ) r c e ]                                                                                                 ( 3 ) 其中，(2)利用了 r b e 3 上压降与两个 R c 1 上压降的关系；(3)利用了e点电压的关系。 由(2)可得： i b 3 = − ( i o + 2 β i b 1 ) R c 1 2 R c 1 + r b e 3 带入(3)化简得： i o ( R c 1 + R c 2 + r c e + β r c e R c 1 2 R c 1 + r b e 3 ) = − [ β R c 1 + 2 β 2 r c e R c 1 − 2 β R c 1 2 2 R c 1 + r b e 3 ] i b 1 ∴ A u = v o v i = − i o R c 2 i b 1 ( 2 r b e 1 ) = [ β R c 1 + 2 β 2 r c e R c 1 − 2 β R c 1 2 2 R c 1 + r b e 3 ] R c 2 2 r b e 1 R c 1 + R c 2 + r c e + β r c e R c 1 2 R c 1 + r b e 3 由于 r c e 很大，故上式分子分母同除以 r c e 化简得： A u = β 2 R c 1 R c 2 r b e 1 [ ( 2 + β ) R c 1 + r b e 3 ] (4) 与(1)式对比可见两者差别极大。故基于经验的定性分析方法是不准确的，有必要采用定量解析的分析方法。 其次，我们计算此电路的输出电阻。为求输出电阻，在图3中，在 R c 2 两端加电压 v o ，令 v i = 0 。则有 i b 1 = 0 ，故 β i b 1 = 0 。故有如下等效电路图4(a)。而(a)即(b)。由(b)列出如下方程： { ( i c 2 + β i b 3 ) r c e + i c 2 R c 2 + i b 3 ( R c 1 + r b e 3 ) = 0                                                                                             ( 5 ) i b 3 ( R c 1 + r b e 3 ) R c 1 + i b 3 = i c 2                                                                                                                                           ( 6 ) 其中，(5)利用了回路电压的关系，而(6)利用了e点电流的关系。 图4. 求输出电阻时的等效电路 由(5)有： i c 2 = i b 3 ( β r c e + R c 1 + r b e 3 ) r c e + R c 2 带入(6)得： i b 3 ( R c 1 + r b e 3 R c 1 + 1 ) = i b 3 β r c e + R c 1 + r b e 3 r c e + R c 2 故有 i b 3 = 0 ，从而图4(b)转化为图4(c)。故可知输出电阻： R O = R c 2 ∥ ( R c 1 + r c e ) ≈ R c 2 (因为 r c e 很大) (7) 以上用传统方法，电路中虽然只有3个三极管，在求解时为了列出方程组也是颇费周折。可以预见当有源器件数量进一步增多时(即放大电路级数增多时)分析将更为繁琐，以致无法求解。为了克服这一困难，我们有下面的方法二，这种方法主要是基于戴维宁和诺顿等效电路法对放大电路逐级求解，且其计算非常简单，且每一级的物理意义非常清晰。"
"下面我们参考 [ 3 ] [ 9 ]，提出一种新的中频模拟电路解析分析法，其适用于各种类型的中频模拟电路分析。即基于戴维宁和诺顿等效电路 [ 10 ] [ 11 ]，并且把电路中的叠加原理扩展到对受控电源也成立，从而大大简化分析过程，可以用非常简单的变换和运算得到想要的参数(本文的分析与仿真验证了这种扩展是成立的)。由于使用了一些新的分析方法(如后面例子中的解耦的手段)，其结论的正确性需要验证。基于作者的研究，通过对很多类型电路(如多级放大、差分放大、负反馈放大电路等)的分析，用这种方法的分析结果和用上面方法一(传统方法)的分析结果，或和用Multisim仿真 [ 13 ] 结果对比，是完全一致的，因而验证了其的正确性，故可在工程实践中广泛应用。这种方法由于是对电路逐级(逐个三极管)进行分析的，因而避免了传统方法的繁琐。且每一级的电流或电压都可求得，各种电路参数(如放大倍数，输入输出电阻)可一并得到。 下面我们用这种方法对上面的例子进行求解。展示所用的技巧，并对这种方法的正确性进行验证。 4.1. 方法二原理简介 [ 3 ] 这里，三极管的小信号交流等效电路我们采用国际教材 [ 3 ] - [ 8 ] 常用的混合π模型或T模型(如图5)。 图5. (a) 混合π模型；(b) T模型 模型中的参数可由直流工作点确定，可证明有： g m = I C V T , r o = V A + V C E I C , r π = V T I B , β = i ′ c i b = g m v π i b = g m r π = I C I B , i ′ e = i ′ c α , α = β 1 + β , r e = r π 1 + β = V T I E 其中 I C 等为直流工作点的值，而 V T = k T / q 为热电压， V A 为early voltage [ 5 ] [ 7 ] [ 8 ]。和前面的h参数模型相比较可见有： r b e = r x + r π , r c e = r 0 作为一个例子，下面我们推导从三极管集电极看进去的诺顿等效电路。如图6(a)，基极和发射极之外的电路都等效为一个戴维宁等效电路。我们假设静态工作点都已设好且已知。我们将三极管用混合π模型代替得到图6(b)。从集电极看进去的诺顿等效电路如图6(c)所示。 i c ( s c ) 的值是将集电极节点接地时(即 v c = 0 )的短路电流。 图6. 推导从三极管集电极看进去的诺顿等效电路 有： i c ( s c ) = i ′ c + i 0 ≈ i ′ c 这里做了近似，假设 i 0 相比 i ′ c 很小，可忽略。由于 r 0 是个很大的电阻，这通常是一个很好的近似；但在求集电极端输出电阻时则不能随意忽略。在后面，当忽略 i 0 时我们称之为“做了 r 0 近似”。 由图6(b)可求得 [ 3 ]： i c ( s c ) = i ′ c = G m ( v t b − v t e ) 这里 G m 是个等效跨导，为： G m = 1 R t b + r x + r π β + R t e α = 1 R t b + r x β + 1 g m + R t e α = 1 R t b + r x β + r e + R t e α = β R t b + r i b = α r i e + R t e 而 r i c = r 0 ( 1 + β R t e R t b + r x + r π + R t e ) + ( R t b + r x + r π ) R t e = r 0 + r i e R t e 1 − α R t e / ( r i e + R t e ) 这里在求 r i c 时并没有做任何近似。 根据类似的原理可以推得从基极或发射极看进去的戴维宁等效电路，总结为下图7： 图7. 三极管集电极、基极、发射极等效模型总结 其中， r i b = r x + r π + ( 1 + β ) R t e = r x + ( 1 + β ) ( r e + R t e ) r i e = R t b + r x + r π 1 + β = R t b + r x 1 + β + r e 这些构成了我们用方法二解题时的基本公式。下面我们用方法二对前面的例题求解，可以充分体会它带给我们的便捷。  图2的小信号交流等效电路如图8。电流源相当于断路。差分放大器输入为差分信号 v i d ，我们求一下它的差分放大倍数 A u 及输出电阻 r o u t 。并和方法一的结果作个对照。第二级放大器是从 T 3 的基极和发射极同时输入的，为了应用此方法，我们需要解耦。将 T 3 的发射极电位 v e 3 看作为一个电压源，从 T 2 的集电极向外看出去的电路用一个戴维宁等效电路代替；同理，将从 T 3 的发射极向外看去的电路也用一个戴维宁等效电路代替(这是此方法的关键一步，且由本文的计算和仿真证明其是正确的)。则得到图9。我们在 v o 节点上连接一个测试电流源 i t 用来在后面计算输出电阻 r o u t 。 图8. 图2的小信号交流等效电路 图9. 图8解耦后的等效电路 已知 T 1 管和 T 2 管完全相同，从 T 2 管发射极看进去的电路可以用一个戴维宁电路等效；其次从 T 1 管集电极看进去的电路可以用一个诺顿等效电路等效；最后从 T 3 集电极看进去的电路可以用一个诺顿等效电路等效。以此得到各变量间的关系。首先，从 T 2 管发射极看进去的等效电路如图10(a) (虽然 T 2 集电极有一个受控电压源，但可证明图7的发射极等效模型依然成立)。有： v t b 1 = v i d 2 , R t e 1 = r i e 2 = r x 2 + r π 2 1 + β = r i e 1 = r x 1 + r π 1 1 + β v t e 1 = v t b 2 = − v i d 2 从 T 1 集电极看进去的等效电路如图10(b)，有： i c 1 ( s c ) = i ′ c 1 = G m 1 ( v t b 1 − v t e 1 ) 其中， G m 1 = α r i e 1 + R t e 1 = α 2 r i e 1 , r i c 1 = r 01 + r i e 1 R t e 1 1 − α R t e 1 / ( r i e 1 + R t e 1 ) = r 01 + r i e 1 1 − α / 2 从 T 3 基极向外看等效为一个戴维宁等效电路，有， v t b 3 = − i c 1 ( s c ) R c 1 ‖ r i c 1 ≈ − i c 1 ( s c ) R c 1 ,     R t b 3 = R c 1 ‖ r i c 1 ≈ R c 1 最后，从 T 3 集电极看进去的等效电路如图10(d)。其中 i c 3 ( s c ) = G m 3 ( v t b 3 − v e 3 ) , r i c 3 = r 03 + r i e 3 ‖ R t e 3 1 − α R t e 3 / ( r i e 3 + R t e 3 ) = r 03 (因为 R t e 3 = 0 ) 且有 G m 3 = α r i e 3 + R t e 3 = α r i e 3 ，而 r i e 3 = R t b 3 + r x 3 + r π 3 1 + β = R c 1 + r x 3 + r π 3 1 + β 注意，虽然 T 3 是PNP管，但其交流等效电路中 i c 3 ( s c ) 的方向选取了和NPN管同样的方向；则 T 3 管射极交流电流 i e 3 的方向应如图8所示，与NPN管方向相同。由图8知： v e 3 = i e 3 R c 1 − i c 2 R c 1 = i c 3 ( s c ) α R c 1 + i c 1 ( s c ) R c 1 这里应用了关系： i c 2 = α i e 2 = − α i e 1 = − α i c 1 ( s c ) α = − i c 1 ( s c ) (使用了 r 0 近似)。 由图10(d)求 v o 时，对电源 i c 3 ( s c ) 和 i t 运用叠加原理(即令 i c 3 ( s c ) 和 i t 分别为0求 v o )，得： v o = − i c 3 ( s c ) ( r i c 3 ‖ R c 2 ) + i t ( r i c 3 ‖ R c 2 ) ≈ − i c 3 ( s c ) R c 2 + i t R c 2 求解以上关系，我们可求出差分增益 A u = v o / v i d 。但为了计算更简洁清晰，下面我们用Mason信号流图的方法 [ 3 ] [ 14 ] 求 A u 和输出电阻 r o u t (当然类似地也可以同时求出输入电阻 r i n )。根据以上的关系，可以画出下面图11的信号流图： 图10. 对图9逐级等效简化后得到的电路 图11. 逐级求解图8时得到的Mason信号流图 计算 v o / v i d 时， v i d 是源节点， v o 是非源节点。计算此传输增益的公式是 [ 3 ] [ 14 ]： T = 1 Δ ∑ k     P k Δ k 图11只有一个反馈环路，故有： Δ = 1 + R c 1 α G m 3 = 1 + R c 1 r i e 3 从 v i d 到 v o 有4条前向通路，其传输增益分别为： P 1 = − 1 2 ( − G m 1 ) ( − R c 1 ) G m 3 ( − R c 2 ) ,       Δ 1 = 1 P 2 = − 1 2 ( − G m 1 ) ( R c 1 ) ( − G m 3 ) ( − R c 2 ) ,       Δ 2 = 1 P 3 = 1 2 G m 1 ( − R c 1 ) G m 3 ( − R c 2 ) ,       Δ 3 = 1 P 4 = 1 2 G m 1 ( R c 1 ) ( − G m 3 ) ( − R c 2 ) ,       Δ 4 = 1 故 A u = v o v i d = 1 Δ ∑ k P k Δ k = 2 G m 1 G m 3 R c 1 R c 2 1 + R c 1 r i e 3 = α 2 R c 1 R c 2 r i e 1 ( r i e 3 + R c 1 ) 根据共射h参数模型和混合π模型参数之间的关系有： r b e = r x + r π , 故 r i e 1 = r b e 1 1 + β , r i e 3 = R c 1 + r b e 3 1 + β , 另 外 α = β 1 + β 带入上式得： A u = v o v i d = β 2 R c 1 R c 2 r b e 1 [ ( 2 + β ) R c 1 + r b e 3 ] 结果和方法一的结果(4)式完全一致，从而验证了这种方法是正确的。 下面求输出电阻 r o u t = v o / i t 。在图8中 i t 为源节点(可以设想 v i d 为0)，则 Δ = 1 ，只有一条前向通路， P 1 = R c 2 ， Δ 1 = 1 ，故 r o u t = v o i t = R c 2 与方法一的(7)式完全一样。再次验证了方法二的正确性。 由于方法二是逐级等效求解，故计算始终保持为一个三极管不变；而级数增多时，结合Mason信号流图法可方便地求解出要计算的参数，且用一个流图就可计算出电路的所有参数(如放大倍数，输入输出电阻等)。这种方法计算过程明显简洁得多，尤其当三极管数目很多时更能彰显其优越性。而我们通过对各种类型的电路的分析，都验证了其与传统方法的一致性。这些研究限于篇幅，将在后续文章中陆续阐述。故这种方法可作为实际工作中的一个有力的分析工具。 4.3. 用Multisim [ 13 ] 对电路进行仿真验证 在仿真时首先对电路设置正确的直流偏置，使3个三极管都工作在放大工作状态。我们设置 I 0 = 1   mA , R c 1 = 10   kΩ, R c 2 = 20   kΩ 。 关于直流工作点的计算，限于篇幅，将另文阐述，这里就不展开了。要说明的是，由于采用了扩展的叠加原理，直流工作点的计算也变得非常便捷；而其正确性依然可以通过仿真验证。由于 r b e = r x + r π = r π = V T / I B (这里 r x 设置为0) 而仿真时 T = 300   K ，故 V T = 25.86   mV 。测出 I B 1 = 4.95   μ A , I B 3 = 0.893   μ A 。故 r b e 1 = 5.224   k Ω , r b e 3 = 28.959   k Ω 。又 β = 100 ，故 A u = v o v i d = β 2 R c 1 R c 2 r b e 1 [ ( 2 + β ) R c 1 + r b e 3 ] = 365 而通过仿真测得 A u = 345 ，这在误差允许范围内，因而仿真与理论结果是一致的。仿真还测得输出电阻为20 kΩ，即 R c 2 ，与理论分析完全一致。"
"由前述可见，传统的方法一相对来说是较麻烦的，尤其当有源器件数量增多时，求解变得非常困难。而方法二是对放大器逐级求解，变换和计算非常简单，且物理意义鲜明，对分析复杂的电路尤其有用；特别是结合Mason流图法辅助计算，更是大大简化了我们的计算过程，且所有参数可以用一个流图一次性全部求出。 由此我们找到了一种简洁的定量解析分析方法(即基于戴维宁和诺顿等效电路和Mason信号流图法)。它可以方便地用于各种类型的模拟电路分析，如差分放大电路、负反馈放大电路、场效应管电路分析等等。且其正确性都可以用理论分析和仿真的方法进行验证。限于篇幅，这些内容我们会在后续文章中再做详细研究和介绍。可见只要正确加以运用，这种分析方法是一种简单、实用的方法，必定会在工程实践中大显身手，帮助我们解决各种复杂的实际问题。"
