"针对注塑件表面缺陷的特点，提出了一种基于多特征值综合目标提取技术的表面缺陷检测方法。通过分析注塑件表面缺陷的特点，综合运用几何、纹理和变换系数目标提取技术，通过数据降维确定了13个类别差异明显的特征参数，提取了注塑件表面缺陷特征；基于13个特征值，运用类距离正态二叉树支持向量机作为表面缺陷的分类器进行缺陷判断。实验表明，采用的基于目标提取技术的表面缺陷检测方法，能够有效的进行综合目标提取，进而实现注塑件表面缺陷缺陷准确检测。 关键词 :注塑件，表面缺陷，图像特征提取，缺陷判别 Copyright © 2018 by authors and Hans Publishers Inc. This work is licensed under the Creative Commons Attribution International License (CC BY). http://creativecommons.org/licenses/by/4.0/"
"随着科学技术不断的发展进步，塑料作为一种高分子材料，广泛的应用到我们的生活当中。但注塑制品的加工过程中，注塑件表面会产生脱模导致的变形、燃烧效应、披锋(毛边)和裂纹等缺陷，这些表面缺陷严重影响零件的表面质量和使用性能。因此，对注塑件表面质量的检测有着重要的意义 [ 1 ] [ 2 ] [ 3 ] [ 4 ] 。 现有注塑制品的质量检测通常采用在线人工检测和离线抽样分析相结合的方式进行。这些传统的检测方法主要依赖其中在线人工检测对具有明显形状和表观缺陷的产品进行初步分拣，并在缺陷产品明显增多时对生产设备做出必要的调整，进而达到恢复生产的目的。但这种检测方式容易受到工人主观因素的影响，效率底下且差错率高 [ 5 ] [ 6 ] 。本文提出了一种基于多特征值综合目标提取技术的表面缺陷检测方法。通过分析注塑件表面缺陷的特点，综合运用几何、纹理和变换系数目标提取技术，通过数据降维确定了多个类别差异明显的特征参数，以提取注塑件表面缺陷特征；并基于特征值，运用类距离正态二叉树支持向量机作为表面缺陷的分类器进行缺陷判断。"
"图像表面特征是用来区别合格产品与带缺陷产品的特性集合，一般通过对其测量和处理得出相应的数据。每一幅合格产品图像都具有能够区别于缺陷图像的自身特征，一部分通过直观感受到的，比如亮度、纹理等；一部分则需要通过图像变换与处理才能得到的，如灰度直方图、小波系数等。  可用产品表面缺陷特征如图1所示。 针对以上缺陷特征，需采用相应方法进行特征的识别。  通常，对产品图像提取其表面特征有三种方式：统计分析法、代数矩阵法、变换系数法。统计分析 图1. 图像特征种类 法比较典型的是灰度统计直方图法，使用统计学中的矩对图像信息加以表达与描述；代数矩阵法通过不同的代数变换法或矩阵分解均可以用来提取图像的代数特征；变换系数法是对图像进行特征提取时，有些信息需要通过滤波变换如傅里叶变换、小波变换等转化为图像的频域信息加以表示。从变换后的系数中提取出部分表示能力更强的系数，或是这些系数的函数组合可以作为图像的变换系数特征。  完成图像目标分割后，可以利用目标轮廓信息来反映缺陷的特征参数，根据不同的特征参数值来判别不同的缺陷类型。 1) 周长(l)：描述目标区域的周长。可以利用图像分割处理后生成的二值图像，对图像边界上像素个数的统计来获取周长特征值。 2) 面积(area)：描述目标区域的大小。对于此特征值的提取可以利用目标边界内像素个数来获取面积的特征值。假设待检测产品图像f(x,y)的大小为M × N，经过二值化处理，用逻辑1表示目标部分，则面积的计算公式为： a r e a = ∑ x = 1 M ∑ y = 1 N f ( x , y ) (1) 3) 矩形度(rect)：表面缺陷含有毛边等涉及边界的缺陷，因此，可以用矩形度判别目标区域是否有缺陷。其计算式为： r e c t = a r e a A (2) 其中，A表示目标最小外接矩形面积。矩形度反映目标区域与矩形的偏离程度。当目标形状为矩形时，rect值接近1。 4) 线度(X)：反映单位边界长度所围成的目标区域面积的大小。其计算公式为： X = a r e a l (3)  图像中相隔某距离两像素间的灰度会存在一定的空间位置关系，纹理便是描述图像中空间位置上灰度重复出现的分布关系。常用灰度共生矩阵来研究灰度空间的相关性。 灰度共生矩阵中，元素h(i,j,d,q)表示在q方向上、相隔d个像素距离的一对像素分别具有灰度值i和j的出现概率。当确定了两个像素间的位置关系d后，便可以计算得出相应的灰度共生矩阵。矩阵形式如下： P d = [ P d ( 0 , 0 ) P d ( 0 , 1 ) ⋯ P d ( 0 , j ) ⋯ P d ( 0 , L − 1 ) P d ( 1 , 0 ) P d ( 1 , 1 ) ⋯ P d ( 1 , j ) ⋯ P d ( 1 , L − 1 ) ⋮ ⋮ ⋮ ⋮ P d ( i , 0 ) P d ( i , 1 ) ⋯ P d ( i , j ) ⋯ P d ( i , L − 1 ) ⋮ ⋮ ⋮ ⋮ P d ( L − 1 , 0 ) P d ( L − 1 , 1 ) ⋯ P d ( L − 1 , J ) ⋯ P d ( L − 1 , L − 1 ) ] 由于灰度共生矩阵结构较为复杂，在描述纹理信息时，不直接采用得出的矩阵分布予以统计，而是获取它的二次统计量。为了计算方便，先把各个元素P d (i,j)除以各个元素的和，得到都小于1的归一化值 P ^ d ( i , j ) ，组成归一化的共生矩阵。灰度共生矩阵有多个纹理特征。其中二阶矩J、对比度I、相关性C和熵H四个特征不相关，且具有较高的区分度，它们分别反映出纹理粗细程度(J)、纹理清晰程度(I)、图中各点灰度值的线性关系(C)和纹理的复杂程度(H)。在进行缺陷识别和分类过程中可根据不同方向纹理特征，从灰度共生矩阵中提取纹理特征值，输入模式分类器，进行缺陷判别。  变换系数特征提取方法是通过小波变换得到相应的图像频率特征，根据离散小波变换对图像进行二尺度小波分解。 分别使用低通和高通两个滤波器，对图像f(x,y)逐列采样滤波，得到2个N × N/2子图像，分别用L和H表示；对每个子图像重复上述操作，得到4个N/2 × N/2子图像，分别用LL 1 、LH 1 、HL 1 和HH 1 表示，为f(x,y)的一次小波分解，同理可以得到图像LL 1 的二次小波分解，用LL 2 、LH 2 、HL 2 和HH 2 表示。对图像进行小波分解后，各子带图像反映出的图像特点也不同。选取小波变换后各频带输出的L 1 范数、平均能量、熵值作为变换系数特征。L 1 范数： e = 1 M 2 ∑ m , n = 1 M x ( m , n ) (4) 平均能量： E n e r g y = ∑ m ∑ n x 2 ( m , n ) M × M (5) 熵： E n t r o p y = ∑ m ∑ n x 2 ( m , n ) log ( x 2 ( m , n ) ) M × M (6) 其中，M × M表示子带图像的大小，m和n分别表示子带图像的行和列，x为该频带下的小波系数。对图像进行K级小波分解，得到的特征矢量维数大小为(3 × K + 1)。"
"考虑注塑件四种典型缺陷(弯曲变形、毛边/烧结、凹陷/凸陷和喷射纹)，若每种缺陷选用10幅样本图像，每幅图像经过图像处理流程后提取41个特征值。如果将(40 × 41)个特征值直接送入分类器进行训练，数据维数较大。且系统进行分类器训练时的执行速度降低，影响后续分类精度。所以，为了优化特征值信息，首先对41个特征值进行数据降维。 在41个特征值中，4个为基于图像形状信息计算得出的几何特征；16个为基于图像灰度共生矩阵计算得出纹理特征；21个为基于图像小波变换得到的变换系数特征。相比较而言，4个几何特征只与图像边界长度、区域面积、区域形状有关，能够较为讯速地判断产品是否有缺陷和缺陷的种类。 对于灰度共生矩阵而言，采用 0 ∘ , 45 ∘ , 90 ∘ , 135 ∘ 四个方向纹理特征的均值和方差代替原先16个特征值，同时保留了4个方向上的信息而且数据降维率达到16/8 = 2，信息保持率将近100%。 而小波域特征值数目较多，共有18个特征值，其中频带信息熵值由于接近图像处理软件的数值极值点，因此在实际产品检测试验中不予考虑；同时，比较L 1 范数和平均能量计算式可知，两者相关性较强且平均能量值具有更高的区分度，因此，采用6个平均能量值的均值作为小波系数变换特征。最终选取的所有特征值如表1所示。"
"为了验证本文对注塑件表面缺陷检测方法的有效性，随机选取四类注塑零件表面缺陷图像作为检测的目标。采用1.2目标提取方法，根据表1特征值列表计算得到缺陷的主要特征参数值，如表2~表4所示。 选用 0 ∘ , 45 ∘ , 90 ∘ , 135 ∘ 四个方向特征值的平均值(M)和平方差(S)进行数据的降维，参考计算值如表3所示。 变换系数特征是通过小波变换得到相应的图像频率特征，离散小波变换对图像进行二尺度小波分解。 Table 1 特征类型 符号 数目 注释 周长 l 1 区域周长 面积 area 1 区域面积 矩形度 rect 1 区域矩形度 线度 X 1 区域线度 二阶矩均值 J_M 1 x,y,45˚,135˚方向的能量均值 二阶矩方差 J_S 1 x,y,45˚,135˚方向的能量方差 对比度均值 I_M 1 x,y,45˚,135˚方向的对比度均值 对比度方差 I_S 1 x,y,45˚,135˚方向的对比度方差 相关性均值 C_M 1 x,y,45˚,135˚方向的相关性均值 相关性方差 C_S 1 x,y,45˚,135˚方向的相关性方差 熵均值 H_M 1 x,y,45˚,135˚方向的熵均值 熵方差 H_S 1 x,y,45˚,135˚方向的熵方差 平均能量 En 1 6个频带的平均能量 表1. 实验特征值选取 Table 2 图像 周长(l) 1.6090 × 10 3 1.0320 × 10 3 1.3190 × 10 3 1.4580 × 10 3 面积(area) 1.0622 × 10 6 2.6409 × 10 5 2.6717 × 10 5 9.8486 × 10 5 矩形度(rect) 5.1560 3.1100 3.3786 1.0018 线度(X) 6.6020 × 10 3 2.5590 × 10 2 2.0255 × 10 2 6.7549 × 10 2 表2. 缺陷图像几何特征参数值 计算出四种缺陷图像的小波变换特征值，如表4所示。 将上述不同缺陷特征值输入模式分类器，使用基于类距离正态二叉树支持向量机的分类方法对表面缺陷进行判别和分类，检测结果如表5所示。 按照上述方法对80幅包含弯曲变形、毛边/烧结、凹陷/凸陷、喷射纹的表面缺陷图像进行检测，其中40个缺陷图像作为训练样本。各类缺陷的训练和识别率如表6所示。 实验数据表明该方法具有较好的提取表面缺陷图像特征的能力。"
"本文通过分析注塑零件表面缺陷特征，提出基于多特征值综合目标提取技术的表面缺陷检测方法。利用注塑件表面缺陷共性特征，对处理后的图像不同性质表面的特征进行综合目标提取，根据计算的特 Table 3 图像 J M:0.6265 M:0.7796 M:0.7820 M:0.6191 S:0.0020 S:0.1428 S:0.0012 S:0.0010 I M:1.1875 M:0.7413 M:0.7810 M:1.1024 S:0.0438 S:0.0186 S:0.0234 S:0.0248 C M:0.3181 M:0.0854 M:0.1761 M:0.1043 S:0.1086 S:0.0273 S:0.0528 S:0.0296 H M:0.0886 M:0.1604 M:0.1497 M:0.1337 S:0.0854 S:0.0694 S:0.1196 S:0.0531 表3. 缺陷图像纹理特征参数值 Table 4 图像 HL 2 _Energy 5.5274 31.9438 79.6689 8.0118 L 2 H_Energy 4.3493 16.1439 48.1222 10.9526 HH 2 _Energy 0.3904 1.7072 5.4037 0.8383 HL 1 _Energy 137.6855 527.3665 935.7748 108.9320 L 1 H_Energy 122.9422 335.3385 673.6829 169.4502 HH 1 _Energy 12.2677 50.6569 157.9440 23.5611 表4. 缺陷图像小波变换参数值 Table 5 图像 检测结果(缺陷名称) 弯曲变形 毛边/烧结 凹陷/凸陷 喷射纹 表5. 缺陷检测结果 Table 6 缺陷名称 训练样本数 正确识别个数 识别率 弯曲变形 10 9 90% 毛边/烧结 10 10 100% 凹陷/凸陷 10 9 90% 喷射纹 10 9 90% 合计 40 37 92.5% 表6. 检测识别结果 征值实现注塑件表面缺陷缺陷准确检测。由于本文采用算法简单、计算量减少，很容易实现硬件化，从而为表面缺陷在线检测提供了途径。"
