"随着LBM的不断推广，众多的使用者认为该方法占用过多计算机资源，其置信度和在PC上的可行性也有待验证。本文分别采用LBM和有限体积法计算了典型的汽车空气动力学问题，对比了两种方法的计算流程、结果、计算机资源占用和耗时。结果表明，在PC端上，LBM实现了汽车空气动力学问题的计算，发现格子的分布情况对计算结果有较大影响。流场结果表明，LBM与有限体积法的计算精度相当，在有些方面比有限体积法更有优势。 关键词 :空气动力学，格子玻尔兹曼方法，有限体积法，气动阻力 Copyright © 2017 by authors and Hans Publishers Inc. This work is licensed under the Creative Commons Attribution International License (CC BY). http://creativecommons.org/licenses/by/4.0/"
"在汽车空气动力学的CFD应用中，目前最普遍的方法依然是采用离散的纳维-斯托克斯(Navier-Stokes)方程的算法。作为流体力学的基石，纳维–斯托克斯方程已存在了一个多世纪，在通常尺度下，人们对此方程的物理可靠性及准确性并不持有异议 [ 1 ] 。但是在有些物理现象，比如紊流 [ 2 ] ，由于计算机能力的限制，直接求解纳维–斯托克斯方程，即采用直接模拟(DNS)往往不能实现。这类物理现象一般必须加入各种物理近似假设。 上世纪80年代末，格子玻尔兹曼方法(Lattice Boltzmann Method)问世 [ 3 ] ，计算流体力学有了新的发展方向。随着LBM其理论本质的完善，又因其物理背景清晰，易于并行计算、程序易于实现 [ 4 ] [ 5 ] 等优点，LBM逐渐成为一种求解流体动力学问题的功能强大的替代方法。在非平衡统计力学中，Boltzmann方程描述的是介观层面上的气体状态，因此和传统的流体力学方程而言，Boltzmann方程更加贴近物理真实，因此，LBM在模拟复杂现象，例如非牛顿流体、多相流、多孔介质流和燃烧问题等方面 [ 6 ] 比传统的流体力学方程有优势。 相比之前只能在大型计算机上使用的基于LBM的软件，随着PC多线程功能日益强大，现在又有了许多LBM工具可以用在多核PC机上解决汽车空气动力学的基本分析问题。随着使用者增多，众多研究者反应LBM计算结果差异较大。 在我国，LBM相关领域的研究起步相对较晚，相关中文文献比较少，而且应用方式范围和置信度不如传统CFD广泛。原因，1) 起步晚，2) 成熟商业软件少3) 硬件资源消耗大。4) 置信验证少。本文直接采用LBM对汽车的空气动力学进行模拟研究，研究其的可行性及基本的计算过程和方法。通过跟Fluent的计算流程、结果、资源占有和计算时间相比较，判断其的使用范围、优缺点和置信度。本文或许在相关方面能提供参考意见和指导。"
"Boltzmann方程是以动力学和统计学为基础发展而来的。Boltzmann方程可用以下微分方程 [ 7 ] 描述： ∂ f i ∂ t + c i ⋅ ∇ f i + F m ⋅ ∂ f i ∂ c i = Ω i ( f ) (1) 方程(1)又称为玻尔兹曼输运方程。其中F是系统受到的外力。f是粒子的分布函数，是位置r、速度c和时间t的函数。Ω称为碰撞算子，因为碰撞项Ω非常复杂，一般我们引入BGK [ 8 ] 近似碰撞算子模型，这个碰撞算子表示为 Ω i ( f ) = ω ( f i eq − f i ) = 1 τ ( f i eq − f i ) (2) 其中， ω = 1 / τ 。系数ω称为碰撞频率，τ称为松弛因子。局部平衡分布函数由 f eq 表示。可以证明，给定适当的粒子平衡态分布函数 f eq 后，可以通过玻尔兹曼方程推导出NS方程。因此，式(1)可以代替计算流体动力学中的NS方程。上述方程与宏观量密度(ρ)、速度(u)和内能(e)的关系可以表示为 ρ ( r , t ) = ∫ m f ( r , c , t ) d c (3) ρ ( r , t ) u ( r , t ) = ∫ m c f ( r , c , t ) d c (4) ρ ( r , t ) e ( r , t ) = 1 2 ∫ m ( c − u ) 2 f ( r , c , t ) d c (5)"
"分别用FVM和LBM两种方法模拟汽车外流场。计算用的是某车型的整车模型，模型去除了后视镜、进气孔道和雨刮器。车灯、门把手凹陷处及轮胎都保留下来，模型为全封闭几何体。LBM对模型要求低，需要是一个封闭的壳体。而FVM对模型要求高，为了照顾网格质量和计算资源，将车身上的一些凹陷处和曲率小的地方处理掉。  应用基于格子boltzmaan方法(LBM)的商业软件Xflow的虚拟风洞模式对流场进行数值计算，PC处理器为双核四线程的i5-4590。图1为计算区域。仿真工况为60 km/h，90 km/h，120 km/h。 表1为每个工况仿真次数及其格子尺度。汽车前端面是速度入口v = 25 m/s，后端为压力出口，地面为移动壁面。湍流模型选用Wall-Adapting Local Eddy [ 9 ] (WALE)粘性模型，这里采用自适应格子划分技术，当汽车周身和尾流的湍流发展时，Xflow能在初始格子分布的基础上自动划分格子。  利用Fluent软件，针对以上介绍的LBM，结合壁面函数法，采用结构体和非结构体结合的混合网格，对同一模型进行仿真，计算区域如图1。各个边界条件参数如表2。利用Fluent软件，针对以上介绍的 图1. CFD计算区域 Table 1 全局解析尺度(m) 车身近壁面细化解析尺度(m) 尾流细化解析尺度(m) 初始格子数量 1 0.8 0.05 0.05 301,782 2 0.8 0.025 0.05 700,138 3 0.5 0.03125 0.03125 992,429 4 0.6 0.01875 0.0375 1,311,641 5 0.8 0.0125 0.0125 2,184,183 表1. 每个工况仿真次数及其格子尺度 Table 2 区域 入口 出口 侧边和顶部 地面 边界条件 速度入口，v = 60 km/h， 90 km/h，120 km/h 压力出口，gauge pressure为0 pa 对称边界条件 移动壁面，无边界层 表2. 计算区域边界条件 LBM，结合壁面函数法，采用结构体和非结构体结合的混合网格，对同一模型进行仿真，计算区域如图1。各个边界条件参数如表2。"
"从图2中我们可以看到在车的前端，远方的来流由于受到车的阻挡，气流逐渐降低，气流的动压转化为静压，因此在汽车前端形成正压区。这股气流在车头前部分为两部分，一部分流向汽车的顶部，一部分流向汽车的底部。气流在汽车表面出现加速和减速的现象，因此，在车体表面一些特殊地方产生正压或者负压区，这些区域就是气动阻力、升力和侧向力的主要来源。从两种方法的计算云图中可以发现，LBM计算的车后尾流中的涡流清晰可见，更加真实的反应湍流的发展过程。 流向上方的气流按照图3所示的曲线在车身表面变化，其中曲线的两个转折点分别是汽车前后玻璃与车厢的连接处，在这个地方，由于曲率半径较小，气流来不及转折，出现局部气流分离，形成涡流区，从压力图上看，这两个点还是正压区，这是由于气流前进路径上车身的阻挡。在车顶处出现气流速度极大值和负压极值(分别见图3(a)的凸点和图3(b)的凹点)。流向车身底部的气流，由于气流通道狭窄，气流速度依然较快，所以理论上车身地面仍然是负压区，图3(b)的曲线证明车身底部绝大部分是负压区，而且气流在经过后轮地方时，由于截面积突然的减小，气流的流速变大，出现负压极值(见图3(b)凹处)。 从图4中可以看出车尾尾流中有很长一段拖曳涡，而且是向上卷曲，这是由于流过顶面气流的速度大于底部气流(图4(a)所示)，因而上面压强小，下面压强大，形成上卷漩涡。在这个区域，大量的能量耗散，形成低压区，引起压差阻力。  图5为在90 km/h工况下两种方法计算出来的气动阻力值的对比。可以明显的看出，不同的格子单元数量计算出的阻力值有明显的差异，其中格子数量最多的计算值和Fluent计算出来的非常接近，而且随着初始格子数量的增加，越接近Fluent计算值。 图5中Fluent计算的趋势线相比Xflow的平滑很多，这是因为，FVM的计算采用了所谓的时均方程加紊流模型，将瞬时变量在时间域上进行平均，再加上不可压缩的空气模型，使得曲线变得光滑。而LBM 图2. 对称面速度分布云图 图3. LBM对称面汽车上下表面速度压力分布 图4. 对称面速度矢量图 采用的是LES方法，从方程(4)可以看出，LBM中空气的密度是跟粒子的分布函数有关，所以，空气的密度不是常数，因此曲线具有波动性。LBM能实时的模拟湍流。 对于汽车或飞机的设计而言，除了空气作用形成的各个力和相应的力矩外，我们也关心空气所造成的其他多问题，例如，物体的气动噪音。噪音的大小往往也当做车型或机型的性能指标，而决定这些的 图5. 气动阻力值对比 重要指标的因素许多来自某些关键部位的几何形状，而流体对这些细小的几何变化敏感性和耦合性决定了用简化几何形状的途径来近似是不可靠的。LBM一方面不需要简化模型，又能实时的模拟湍流，因而在计算脉动压力和气动声学上有天然的优势。 取最后0.3s内的计算值计算平均气动阻力系数C d ，绘制表3，并与Fluent计算值比较误差(Fluent为网格数量)。 从表3可以看出，当格子单元数量相差较大时，有较大的误差，最大误差甚至可以达到56.1%，随着单元数量的增加，格子boltzmann方法的计算精度增加，与FVM计算的最小误差为2.56%，说明格子boltzmann方法有着与主流的有限体积方法相当的计算精度。由于汽车模型没有后视镜，车身上的一些凹凸处处理掉，车轮光滑没有旋转，而且模型与地面有一定的间隙，使得数值计算出来的气动阻力系数比较小。从图6可以看出，LBM无论是在低速还是高速区，都有比较好的准确性和稳定性。  和FVM的网格无关性分析一样，LBM的格子无关性分析也是判断计算结果的正确性指标。数值计算在90 km/h工况下进行，计算采用的格子数和阻力系数如表4。 这里计算采用的是格子数不变的方法。对于初始格子数200万的仿真，计算中最终格子数可以达到3000万之多，因此对比分析中的结果是有一定的可信度的。  表5给出了格子Boltzmann方法与FVM对内存的占有和计算时间，相比Fluent而言，Xflow在计算上的用时跨度很大，主要因为LBM计算采用的是LES方法。 在两种方案中用到的两个软件Xflow和Fluent，相比较而言，基于格子Boltzmann方法的Xflow在计算耗时上在达到同样计算精度的前提下，耗时长了很多，对硬件要求高，结果文件要占用很大的空间，对于大型的仿真计算不是一般人能用的。由于结果文件详细，中间计算包含所有的流场信息，所以在一些偶然的断电情况下，Xflow能实现断电续算，这点是Fluent不能具备的。"
"1) 计算结果可以看出，格子boltzmann方法与有限体积法的计算精度相当。在气动阻力系数的分析 图6. 计算阻力系数 Table 3 1 2 3 4 5 F 初始格子数量 301,782 700,138 992,429 1,311,641 2,184,183 2,901,331 工况及误差 60 C d 0.326 0.298 0.316 0.263 0.236 0.221 误差 47.5% 34.8% 42.9% 19.0% 6.79% ---------- 90 C d 0.323 0.295 0.297 0.277 0.228 0.234 误差 38.0% 26.0% 26.9% 18.4% 2.56% ---------- 120 C d 0.334 0.305 0.285 0.263 0.226 0.214 误差 56.1% 42.5% 33.2% 22.9% 5.6% ---------- 表3. 各工况下计算误差 Table 4 格子数 13,931,464 17,824,374 21,014,263 34,015,643 48,435,279 C d 0.287 0.271 0.234 0.227 0.227 表4. LBM格子无关性计算 Table 5 线程数(CPUs) 内存占有量(GB) 计算时间(h) 1 4 1.2 1.0 2 4 2.7 10.7 3 4 2.1 4.1 4 4 5.9 25.5 5 4 3.8 35 F 4 9.5 6.4 表5. LBM和FVM耗费资源的对比 中，与Fluent的计算值相比，LBM最大误差为6.79%，最小误差为2.56%，说明用格子Boltzmann方法计算空气动力学无论在低速还是高速区，都有比较好的准确性。只要格子数足够多，计算出的后紊流区特征更清晰，对车后流场分析有好处。 2) LBM对于瞬态，低马赫数，湍流特征强烈等条件下的流体问题，计算结果的稳定性较好。LBM一方面不需要简化模型，又能实时的模拟湍流，因而在计算脉动压力和气动声学上有天然的优势。 3) 相比于FVM，LBM对计算机资源耗用率高，内存硬盘占用空间大，计算时间较长，但是断电续算功能对于大型计算来说是不可忽视的的优点。 4) 于实现精确LBM计算，有如下几点经验：a) 车身周围和尾流区格子解析度对计算结果的影响非常大，解析度越小越好。b) 流场尽可能大。"
