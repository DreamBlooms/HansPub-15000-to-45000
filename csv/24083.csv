"本文针对海工装备在海上作业时受到海浪作用运动复杂难以控制的问题，专门研究并设计一套六自由度波浪运动发生补偿机器人，而且能够反向控制，补偿海浪运动对装备的影响，保证海工装备在海上作业的平稳性，方法采用并联机构方法求解的六自由度的运动，通过对六自由度平台的运动控制，使其模拟海浪运动，进行船舶运动仿真，并对其运动进行理论分析及设计研究。最后通过ADAMS进行运动仿真，对比理论推导和模拟数据的对比，从而验证此方法的有效性并用于工程实践。 关键词 :六自由度平台，船舶运动仿真，运动控制，波浪运动，并联机构机器人 Copyright © 2018 by authors and Hans Publishers Inc. This work is licensed under the Creative Commons Attribution International License (CC BY). http://creativecommons.org/licenses/by/4.0/"
"六自由度平台具有承载能力强、刚度大、精度高、系统动态响应快和累积误差小等特点，在航空航天、飞行模拟器、新型机床、航空宇航器对接等领域得到了广泛的应用，本文六自由度平台是用来模拟海洋中的波浪运动进行船舶运动仿真及运动补偿的机器人设备。该平台可以按试验要求实现三个自由度的平移运动和三个自由度的旋转运动及复合运动，从而可以在实验室中模拟船舶在海上航行时的各种摇摆的情况，将船舶在海洋中摇摆的姿态和运动真实地呈现出来 [ 1 ] [ 2 ] 。在此基础上，如果要使海工装备在船上能够平稳地进行作业，只要在海工装备与船体间加上该六自由度平台，并在下平台的正中间安装姿态传感器以实时的测得船体的运动情况，通过对测得的数据进行计算从而反向控制该六自由度平台来实现。 六自由度平台是一种发展快、应用广的典型运动模拟机器人，是一具有重大经济价值和国防战略意义的高精尖试验设备，而将其应用于主动式波浪补偿以解决海工装备在海上作业时受到海浪作用运动复杂难以控制的问题，对今后进行各种海上作业研究具有重要意义。 本文对六自由度并联平台进行了理论分析，通过建立并联机构的运动学和动力学方程求解其运动规律，对其六个运动发生器液压缸与平台之间的运动关系进行数学几何分析，找到了它们之间的运动规律，从而在实时测得下平台的运动数据的情况下，用主控计算机对实时数据进行计算处理，六个液压缸按计算结果进行轴向运动，使得上平台几乎保持平稳状态，实现补偿目的。应用MATLAB和ADAMS对平台运动进行了仿真研究，通过理论和实际的对比得到该方法的有效性。最后对该补偿运动进行了运动优化，以保证该平台在实际作业中能起到重要作用。"
"该平台一共有14个构件，其中下平台为固定构件，液压缸与上下平台之间用万向副连接，液压缸内部为圆柱副，所以该平台的自由度为 M = 13 × 6 − ( 12 × 4 + 6 × 4 ) = 6 ，确定六个液压缸长度，进而确定平台的姿态。平台体结构如图1所示。 其中：上平台的外接圆直径r 2 ，下平台的外接圆直径r 1 ，上平台处于中位时，上下平台高度差h，上平台处于中位时，液压缸投影长度c，上平台处于最高位时，上下平台高度差h 1 ，上平台处于最高位时，液压缸投影长度c 1 ，上平台处于最低位时，上下平台高度差h 2 ，上平台处于最低位时，液压缸投影长度c 2 。  六自由度平台的动力学仿真模型，采用ADAMS建立，结构如图2所示。"
"该机构俯视图如图3，图中包含两个坐标系，一个是定坐标系(原点在下平台中心，z轴垂直纸面向外)，另一个是动坐标系(原点在下平台中心，并与下平台固定在一起)，当平台处于中位时，两坐标系重合。 图1. 平台结构示意图 图2. ADAMS平台动力学仿真模型 图3. 各缸轴向位移曲线图  六自由度平台的几何模型如图3所示。 图中各变量用以下符号表示： l 1 , l 2 , l 3 , l 4 , l 5 , l 6 分别代表六个电缸长度， p 1 , p 2 , p 3 , p 4 , p 5 , p 6 分别代表六个液压缸的下端点，设平台处于中位时为初始位置，此时液压缸实际长度为 l ，经过空间几何分析计算获得下面公式。  假设上平台固定不动，若下平台相对于定坐标系的三个轴向位移分别为 x , y , z ，相对于动坐标系的旋转角度分别为 θ 1 , θ 2 , θ 3 (沿着坐标轴向原点看，以顺时针转动为正)。 α = π 6 − a cos ( r 1 ⋅ cos π 9 − c 2 − h 2 r 2 ) ,   l = ( r 1 ⋅ sin π 9 + r 2 ⋅ sin ( π 6 − α ) ) 2 + c 2 (1) 当平台处于中位时，计算得各液压缸与下平台连接点相对于定坐标系的坐标分别为： P 1 ( i 1 , j 1 , k 1 ) = P 1 ( − r 1 ⋅ sin 5 π 18 , − r 1 ⋅ cos 5 π 18 , 0 ) P 2 ( i 2 , j 2 , k 2 ) = P 2 ( r 1 ⋅ sin 5 π 18 , − r 1 ⋅ cos 5 π 18 , 0 ) P 3 ( i 3 , j 3 , k 3 ) = P 3 ( − r 1 ⋅ cos π 9 , − r 1 ⋅ sin π 9 , 0 ) P 4 ( i 4 , j 4 , k 4 ) = P 4 ( r 1 ⋅ cos π 9 , − r 1 ⋅ sin π 9 , 0 ) (2) P 5 ( i 5 , j 5 , k 5 ) = P 5 ( − r 1 ⋅ sin π 18 , r 1 ⋅ cos π 18 , 0 ) P 6 ( i 6 , j 6 , k 6 ) = P 6 ( r 1 ⋅ sin π 18 , r 1 ⋅ cos π 18 , 0 ) 首先分析三个旋转运动同时进行，将这六个点分别按照欧拉角XYZ顺序转换，得到旋转变换后的各点相对于定坐标系的坐标 [ 3 ] [ 4 ] ： P ′ 1 ( i ′ 1 , j ′ 1 , k ′ 1 ) , P ′ 2 ( i ′ 2 , j ′ 2 , k ′ 2 ) , P ′ 3 ( i ′ 3 , j ′ 3 , k ′ 3 ) , P ′ 4 ( i ′ 4 , j ′ 4 , k ′ 4 ) , P ′ 5 ( i ′ 5 , j ′ 5 , k ′ 5 ) , P ′ 6 ( i ′ 6 , j ′ 6 , k ′ 6 ) 欧拉角XYZ顺序转换公式如下： 于是可以通过两点间求距离的方法计算得到，当下平台平移变换和旋转变换同时进行且上平台保持不动时，各缸的轴向位移为： l 1 = ( r 2 ⋅ sin α + i ′ 1 + x ) 2 + ( r 2 ⋅ cos α + j ′ 1 + y ) 2 + ( k ′ 1 + z − h ) 2 − l l 2 = ( r 2 ⋅ sin α − i ′ 2 − x ) 2 + ( r 2 ⋅ cos α + j ′ 2 + y ) 2 + ( k ′ 2 + z − h ) 2 − l l 3 = ( r 2 ⋅ cos ( π 6 − α ) + i ′ 3 + x ) 2 + ( r 2 ⋅ sin ( π 6 − α ) − j ′ 3 − y ) 2 + ( k ′ 3 + z − h ) 2 − l l 4 = ( r 2 ⋅ cos ( π 6 − α ) − i ′ 4 − x ) 2 + ( r 2 ⋅ sin ( π 6 − α ) − j ′ 4 − y ) 2 + ( k ′ 4 + z − h ) 2 − l (4) l 5 = ( r 2 ⋅ sin ( π 3 − α ) + i ′ 5 + x ) 2 + ( r 2 ⋅ cos ( π 3 − α ) − j ′ 5 − y ) 2 + ( k ′ 5 + z − h ) 2 − l l 6 = ( r 2 ⋅ sin ( π 3 − α ) ) − i ′ 6 − x ) 2 + ( r 2 ⋅ cos ( π 3 − α ) − j ′ 6 − y ) 2 + ( k ′ 6 + z − h ) 2 − l"
"船体和该平台的下平台是固定在一起的，现在假设船体运动的六个变量( x , y , z , θ 1 , θ 2 , θ 3 )分别如下： x = 500 sin ( t ) , t ∈ [ 0 , 4 π ] y = 500 sin ( t ) , t ∈ [ 0 , 4 π ] z = 500 sin ( t ) , t ∈ [ 0 , 4 π ] θ 1 = π 18 ⋅ sin t , t ∈ [ 0 , 4 π ] (5) θ 2 = π 18 ⋅ sin t , t ∈ [ 0 , 4 π ] θ 3 = π 18 ⋅ sin t , t ∈ [ 0 , 4 π ] 通过前面推导的公式，可以在MATLAB中仿真出六个液压缸的轴向位移( l i )、轴向速度( v i )、轴向加速度( a i )随时间变化曲线。 六自由度平台的原理如图4所示。   通过推导公式计算获得各缸轴向位移输出曲线如图5所示。  通过推导公式计算获得各缸轴向速度曲线如图6所示。  通过推导公式计算获得各缸轴加向速度曲线如图7所示。  通过ADAMS进行补偿运动仿真，验证此方法的有效性。在ADAMS中建立好平台模型并加好约束后，设置欧拉角转换顺序为123，即按XYZ顺序；然后设置下平台的运动规律，即前面假设的船体运动的六个变量，从而模拟船体受海浪影响而发生的运动。 接下来设置每个液压缸的轴向位移随时间变化公式(该公式由前面推导)，即模拟补偿运动；最后进行运动仿真，如图8所示。 图4. 平台的补偿作用原理图 图5. 各缸轴向位移曲线图 图6. 各缸轴向速度曲线图 图7. 各缸轴向加速度曲线图 图8. 补偿运动仿真过程不同姿态图 通过测量上平台中心的运动规律得到如图9所示曲线图(图中标记从上往下依次为：沿定坐标系X轴、 图9. 补偿运动时上平台的运动规律 Y轴、Z轴位移量，绕自身坐标系X轴、Y轴、Z轴旋转角度)，可以很直观的看出上平台在补偿运动的作用下几乎保持平稳状态，从而验证该补偿方法的有效性。   由于该平台的液压缸长度有上限和下限，为了使平台在运动时不至于达到极限位置而对平台造成损坏，必须对平台的运动进行适当的约束 [ 5 ] [ 6 ] 。当上平台处于最高位时，液压缸长度达到上限 l max ，当上平台处于最低位时，液压缸长度达到下限 l min ，即： l max = ( r 1 ⋅ sin π 9 + r 2 ⋅ sin ( π 6 − α ) ) 2 + c 1 2 l min = ( r 1 ⋅ sin π 9 + r 2 ⋅ sin ( π 6 − α ) ) 2 + c 2 2 (6) 所以液压缸的长度必须控制在 l min 和 l max 之间，即液压缸的输入位移量 l i 必须满足条件： l min − l ≤ l i ≤ l max − l , i = 1 , 2 , 3 , 4 , 5 , 6 (7)  模拟仿真环节对六个液压缸采用的是开环控制，该控制在仿真软件中能达到理想的控制效果，但是在实际应用中会存在误差，会由于液压缸在相应的时间点没能伸长到指定长度，从而较大程度影响该平台的工作精度。因此，对该平台液压缸引入PID反馈控制，形成闭环回路，会大大的减小该误差从而提高平台的工作精度。 所引入的PID控制系统图如图10所示，r(t)为给定输出(即液压缸位移量)，y(t)为实际输出，e(t)为误差值，u(t)为控制输出，可转换为电信号传递给电液伺服系统来控制液压缸位移量。该PID算法可表示如下： u ( t ) = K p e ( t ) + K i ∫ 0 t e ( t ) d t + K d d e ( t ) d t (8) 图10. PID控制流程图 其中K p 为比例系数，K i 为积分系数，K d 为微分系数， e ( t ) = r ( t ) − y ( t ) ，具体系数大小要通过不断调试平台得出，比例、积分、微分这三种作用配合得当，可使系统快速平稳准确，提高平台工作精度。  1) 本文采用的新型算法对六自由度平台进行运动学和动力学分析，通过建立并联机构的运动学和动力学方程求解其运动规律，对其六个运动发生器液压缸与平台之间的运动关系进行数学几何分析，找到了它们之间的运动规律，从而在实时测得下平台的运动数据的情况下，用主控计算机对实时数据进行计算处理，六个液压缸按计算结果进行轴向运动，使得上平台几乎保持平稳状态，完成补偿目的。并通过ADAMS仿真验证了该算法的有效性。 2) 当海工装备在海上进行作业时，只要在海工装备与船体间加上该六自由度平台，在下平台的正中间安装姿态传感器以实时的测得船体的运动情况，并将测得的数据发送到主控计算机进行该算法计算，再将计算结果发送到电液伺服系统来控制各个液压缸的轴向位移，从而将上平台控制在平稳状态，即下平台为输入，上平台为输出，实现该平台上的装备进行平稳地作业，解决海工装备在海上作业时受到海浪作用运动复杂难以控制的问题。 3) 最后进行了运动控制的优化，一个是通过限制液压缸的行程，使平台在工作时不至于达到极限位置而损坏，从而达到优化运动控制的目的。另一个是通过PID反馈控制，减小各个液压缸的预定位移量与实际位移量之间的差值以减小位移误差，从而使平台的补偿作用达到预期的精度要求。"
