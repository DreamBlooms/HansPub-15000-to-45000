"轨迹规划是四足机器人研究的关键，合理的足端轨迹有助于减少四足机器人足端触地时的冲击，本文根据零冲击原则规划了三条四足机器人的足端轨迹。对各条足端轨迹进行虚拟样机仿真分析，根据功率最优原则，针对不同的步态选择相应最优的足端轨迹,为类似问题的实现开辟了新思路和新途径。 关键词 :四足机器人，步态规划，轨迹规划"
"轨迹规划是四足机器人研究的关键，合理的足端轨迹有助于减少四足机器人足端触地时的冲击，而且，足端轨迹对四足机器人的动力学特性有着重要影响。由于本论文所研究的四足机器人几何尺寸较大，系统需要的总功率较大，而过大的系统总功率会造成动力系统的质量和几何尺寸增加，对四足机器人的运动特性不利 [ 1 ] 。所以，减少驱动的功率，是本论文重要内容。这里提出的功率最优原则，即希望四足机器人在行走过程中的最大液压缸驱动功率最小。据此，可以降低系统总功率并减小动力系统的质量和几何尺寸。 本文将对四足机器人的足端轨迹进行规划。将数学中的复合摆线和多项式曲线引入到足端轨迹的规划中，根据零冲击原则 [ 2 ] ，规划出3条满足要求的足端轨迹，包括：复合摆线轨迹、八次多项式轨迹和分段五次多项式轨迹。并基于功率最优原则选择最优的足端轨迹。 论文基于功率最优原则的足端轨迹规划，仅针对walk步态进行，即间歇步态和协调步态这两种典型的静步态。这是由于walk步态的稳定性较好，不同的足端轨迹对walk步态行走稳定性的影响可以忽略不计，但trot步态属于动步态，通过虚拟样机仿真发现足端轨迹对trot步态的稳定性有一定影响，足端冲击会因为足端轨迹的不同而产生很大的变化 [ 3 ] 。因此，trot步态不适用于本章所进行的足端轨迹规划方法，本章的足端轨迹规划仅针对walk步态进行。"
"四足机器人的拓扑结构选择前肘后膝式 [ 4 ] [ 5 ] [ 6 ] ，驱动方案选择液压驱动，四条腿尺寸相同，前后和左右腿对称，四足机器人的三维结构如图1所示。四足机器人的躯体和四条腿的主体材料选择7075航空合金铝，7075航空合金铝具有密度小、强度高的特点，适合本课题四足机器人的使用。 如表1所示，为四足机器人的结构参数表。  令占空比 ，则在 ，足端处于摆动相，在 ，足端处于支撑相，这样便于绘制足端轨迹的曲线 [ 3 ] 。设水平方向为X方向，竖直方向为Y方向，根据四足机器人足端运动位置的要求，可确定足端轨迹在水平方向(X方向)和竖直方向(Y方向)的位移方程如下。 水平方向(X方向)： 图1. 四足机器人三维结构图 Table 1 参数 数值 长度 2066 mm 宽度 840 mm 高度 1517 mm 质量 183.8 kg 表1. 四足机器人结构参数表 (1) 竖直方向(Y方向)： (2) 为了减小四足机器人在摆动相和支撑相切换瞬间的冲击和惯性力，基于零冲击原则，希望在理想状态下足端触地时的速度和加速为零。那么，需要足端轨迹曲线在水平方向和竖直方向上的速度和加速度满足如下公式。 水平方向(X方向)： (3) (4) 竖直方向(Y方向)： (5) (6)"
"根据足端轨迹约束方程可推导满足要求的足端轨迹方程，并利用MATLAB绘制相应的足端轨迹曲线。设 ，在推导足端轨迹方程的过程中，用 代替 进行推导。设定步长 ，步高 ， 。   对于水平方向(X方向)，为了满足加速度约束条件，即公式(4)，可令水平方向轨迹的加速度函数为 。将上式对时间求积分，并代入水平方向速度约束条件，即公式(3)，可得到水平方向轨迹的速度函数为 。将上式对时间求积分，并代入水平方向位移约束条件，即公式(1)，可求得 ，水平方向足端轨迹曲线为 。对于竖直方向(Y方向)，当 时，为了满足加速度约束条件，即公式(6)，可令竖直方向轨迹的加速度函数为 。将上式对时间求积分，并代入速度约束条件，即公式(5)，可得到竖直方向轨迹的速度函数为 。将上式对时间求积分，并代入位移约束条件，即公式(5)，可求得 ，竖直方向足端轨迹曲线为： 。同理可得，当 时， 。 综上，复合摆线轨迹的摆动相足端轨迹曲线函数为： (7)  相比于摆动相的足端轨迹，支撑相的足端轨迹比较简单：支撑相水平方向的位移曲线与摆动相的关于 对称；竖直方向的位移始终为零。所以，复合摆线轨迹的支撑相足端轨迹曲线函数为： (8)  根据轨迹方程，利用MATLAB可得到复合摆线轨迹的运动曲线，如图2所示。   除了复合摆线轨迹，高次多项式轨迹也能够很好地拟合足端轨迹曲线，并满足约束条件。所以，可以通过多项式推导足端轨迹方程。 图2. 复合摆线轨迹运动曲线 对于水平方向(X方向)，约束条件有6个，则设水平方向足端轨迹为五次多项式： (9) 将上式代入到水平方向约束方程中，可得水平方向足端轨迹曲线为： 。对于竖直方向(Y方向)，约束条件有9个，则设竖直方向足端轨迹为八次多项式： (10) 将上式代入到竖直方向约束方程中，即公式(2)、(5)和(6)，计算得到竖直方向足端轨迹曲线为： (11) 综上，八次多项式轨迹的摆动相足端轨迹曲线函数为： (12)  相比于摆动相的足端轨迹，支撑相的足端轨迹比较简单：支撑相水平方向的位移曲线与摆动相的关于 对称；竖直方向的位移始终为零。所以，八次多项式轨迹的支撑相足端轨迹曲线函数为： (13)   八次多项式轨迹的竖直方向轨迹利用了9个约束条件，如果能够采用分段多项式轨迹的方法，可以利用12个约束条件，拟合效果更好。 分段五次多项式轨迹的水平方向(X方向)轨迹与八次多项式轨迹的相同，都是五次多项式轨迹；竖直方向(Y方向)采用分段五次多项式轨迹。 当 时，设竖直方向轨迹曲线为： (14) 将上式代入到竖直方向约束方程中，即公式(2)、(5)和(6)，计算得到竖直方向足端轨迹曲线为： (15) 同理可得，当 时，竖直方向足端轨迹曲线为 (16) 综上，分段五次多项式轨迹的足端轨迹曲线函数为： (17)  相比于摆动相的足端轨迹，支撑相的足端轨迹比较简单：分段五次多项式轨迹的支撑相水平方向的位移曲线与八次多项式轨迹的相同；竖直方向的位移始终为零。所以，八次多项式轨迹的支撑相足端轨迹曲线函数为： (18)"
"足端接触力(contact)的设置是ADAMS虚拟样机建模的重要内容。足端接触力由两部分力组成，即：接触正压力和摩擦力。接触正压力采用冲击函数法计算，摩擦力采用Coulomb法进行计算。  根据赫兹接触理论，计算接触正压力时，采用冲击(impact)函数构造的非线性等效弹簧-阻尼模型作为计算模型。在该计算模型中，接触正压力由两部分组成，即：两个构件由于弹性变形而产生的相互之间的弹性力，以及由于相对速度产生的阻尼力。接触正压力满足下式： (19) 式中： ——接触正压力(N)； ——赫兹接触刚度(N/mm 3/2 )； ——接触点的法向穿透深度(mm)； ——接触指数； ——阻尼系数(N∙s/mm)； ——接触点的法向相对速度(mm/s)。 接触刚度 表示接触面的刚度。一般情况下， 值越大，越能模拟接触的实际情况；但如果 值过大，会导致积分求解困难，仿真时间过长。对于旋转物体的碰撞， 值可根据下式来确定： (20) 式中： ——碰撞半径(mm)， ， 和 分别是两个构件在碰撞点的半径； ——碰撞弹性模量(MPa)， ， 和 分别代表两个构件的弹性模量， 和 分别代表两个构件的泊松比。 阻尼系数 表征碰撞能量损失的程度。当两构件开始接触后，阻尼系数 是法向穿透深度 的三次函数；当法向穿透深度增大到临界值 后，阻尼系数达到最大值 ，并且随着法向穿透深度的继续增大，阻尼系数保持 不变。接触指数 表征材料的非线性度，金属材料取1.3~1.5，橡胶材料取2~3。  接触力中的摩擦力可以表达为：接触正压力与摩擦系数的乘积，即： (21) 摩擦力是非线性摩擦力，静摩擦和动摩擦根据接触物体的相对滑动速度进行切换，摩擦系数 也随之变化。当相对滑动速度满足 时，即相对滑动速度小于静摩擦转变系数时，摩擦属于静摩擦，摩擦系数 随着相对滑动速度的增大而逐渐增大到最大静摩擦系数 ；当相对滑动速度的绝对值大于静摩擦转变速度 ，且不大于动摩擦转变速度 时，即 时，属于静摩擦向动摩擦的过渡状态，摩擦系数 随着相对滑动速度的增大而逐渐减小到动摩擦系数 ；当 后，即相对滑动速度大于动摩擦转变系数时，属于动摩擦状态，摩擦系数 保持动摩擦系数 值不变。  根据接触力模型原理，并参考其它文献中的相关内容，接触力(contact)模型的参数如表2所示。  利用第2节建立的四足机器人虚拟样机模型对规划的三种足端轨迹进行仿真，仿真时采用的步态为间歇步态和协调步态。步态参数：占空比 ，步长 ，步高 ，周期 ，仿真时长为4个步态周期。通过虚拟样机仿真得到液压缸驱动功率曲线，通过比较不同足端轨迹的驱动功率曲线，选出最优的足端轨迹。  以间歇步态对四足机器人虚拟样机进行仿真，得到左后大腿液压缸驱动功率曲线如图3所示。  以协调步态对四足机器人虚拟样机进行仿真，得到左后大腿液压缸驱动功率曲线如图4所示。  根据图3和图4可知，四足机器人的某一条腿在摆动相结束接触地面的瞬间，该腿上的液压缸驱动功率最大。这是由于足端接触地面时有冲击，液压缸推力瞬间增大造成的。通过比较图3的三条功率变化曲线，可以看出复合摆线轨迹的最大功率是三种足端轨迹中最小的；通过比较图4的三条功率变化曲线，可以看出分段五次多项式轨迹的最大功率是三种足端轨迹中最小的。所以，间歇步态采用复合摆线 Table 2 名称 数值 赫兹接触刚度 50 N/mm 3/2 阻尼系数 5 N∙s/mm 接触指数 2.2 接触点临界法向穿透深度 0.1 mm 最大静摩擦系数 0.9 最大动摩擦系数 0.9 静摩擦转变速度 1.0 mm/s 动摩擦转变速度 2.0 mm/s 表2. 接触力模型参数表 图3. 间歇步态左后大腿液压缸驱动功率曲线 图4. 协调步态右后大腿液压缸驱动功率曲线 轨迹，协调步态采用分段五次多项式轨迹。"
"本文首先从减少足端与地面接触冲击的角度，确定了四足机器人的足端轨迹约束方程。然后，在约束方程的基础上，规划了三种满足约束条件的足端轨迹：复合摆线轨迹、八次多项式轨迹和分段五次多项式轨迹。最后，建立四足机器人ADAMS虚拟样机模型，采用规划的间歇步态和协调步态，对三种足端轨迹进行虚拟样机仿真，并根据驱动功率最优的原则，优选合适的足端轨迹，即：间歇步态选择复合摆线轨迹，协调步态选择分段五次多项式轨迹。合理的足端轨迹规划和步态规划是四足机器人行走的必要条件，而基于驱动功率最优原则的足端轨迹规划，为四足机器人找到了最为节能的足端轨迹。"
