"针对频繁发生而难以得到有效治理的自行车盗窃问题，该文提出了基于北斗和地理围栏的公共自行车防盗系统。通过将北斗特有的短报文双向通信功能与新型的地理围栏技术相结合，实现了自动监测用户自行车是否超出围栏范围并进行报警追踪的功能。在本系统中，用户在上位机中个性设置的内容将会通过GPRS传输给单片机，同时北斗内核将定位到的自行车实时位置信息与用户设置的围栏范围进行对比。当检测到车辆超出围栏范围时，北斗内核发出短报文警告给用户并通过单片机触发蜂鸣器报警。用户接到短报文警告后，对自行车是否经过授权被移至围栏范围外的具体情况进行判断，从而做出相应对策。研究结果表明，该系统可以有效降低自行车被盗风险。 关键词 :北斗通信，公共自行车防盗，地理围栏，霍尔感应器 Copyright © 2017 by authors and Hans Publishers Inc. This work is licensed under the Creative Commons Attribution International License (CC BY). http://creativecommons.org/licenses/by/4.0/"
"北斗卫星导航系统简称为北斗系统(Beidou navigation satellite system, BDS)是我国正在实施的自主建设、独立运行的全球卫星导航系统。按照“先区域、后全球，先有源、后无源”的总体发展思路 [ 1 ] ，它的建设分为三步：第一步，在2000年初步建成北斗卫星导航试验系统，形成区域有源服务能力；第二步，在2012年建成“区域覆盖”的北斗卫星导航系统，形成亚太地区的区域无源服务能力；第三步，在2020年左右，建成“全球覆盖”的北斗卫星导航系统，形成全球无源服务能力。到目前为止，我国自主研发的北斗卫星导航系统已经成功发射了16颗卫星 [ 2 ] ，其中主要包括地球静止轨道卫星、中圆地球轨道卫星和斜地球同步轨道卫星，已实现对中国、西太平洋、东印度洋等部分区域的覆盖，并为这些区域提供了一些服务。在我国境内，可见的北斗卫星导航系统的卫星数量超过7颗，且位置精确强弱度(PDOP)均不超过5，这为本系统的定位和通信提供了技术方面的可行性。 随着轻便车辆盗窃问题的逐渐恶化，自行车盗窃案的处理与侦破已然成为了最棘手的问题之一，尤其是对于防范意识薄弱的大学校园。据某高校保卫处统计 [ 3 ] ，报案数量最少的一个月平均每天3起，此外每天还有许多没有报告的丢失案件。大学校园是个相对开放的场所，每天人来人往，无疑给案件的告破增添了难度。目前已有的基于射频识别(RFID)的自行车防盗系统 [ 4 ] 在一定程度上有效，但仍存在如下问题：①系统硬件环境要求比较严格，如要有成熟的社区管理以及车库环境才能实现防盗的目的；②系统报警功能需要人工进行，等到车主或者安保人员发现自行车丢失时可能已无法及时找回。因此，本文结合“地理围栏”方法，在校园周边架设虚拟区域围栏，使在非本人授权下“逃出”校园的自行车受到限制。 地理围栏 [ 5 ] (Geo-fencing)是基于移动位置服务(Location Based Service)的一种新应用，即用一个虚拟的栅栏围出一个虚拟地理边界。当进入、离开某个特定地理区域，或在该区域内活动时，设备可以自动接收通知和警告。有了地理围栏技术，位置社交网络就可以帮助用户在进入某一地区时自动记录。用户可以在自己车上比较隐蔽的位置安装本文设计的系统配套硬件报警器，之后在软件上通过可视化界面选定一定数量的点并连接成一个封闭范围作为对自己车辆的围栏检测范围，以学校为例，对进出校园的所有出入口进行采点并记录到系统中，将这些点抽象成较为规则的几何图形，作为校园边界，当用户的自行车超出边界时，便会通知用户自行车目前的位置，并要求用户确认是否为本人操作，之后进行后续相应的处理。 本项研究旨在结合北斗导航定位及通信技术，以校园周边为例，研究并架设地理围栏，监管在相对较为开放的环境下用户的个人财产安全，辅助地区安全工作的管理，从而为用户的学习、工作和生活保驾护航。"
"① 围栏范围：该变量用来描述用户设定的自行车安全范围。将用户在可视化地图界面上选取的关键点连接起来形成封闭的几何图形，可是一个圆形或多边形地理区域。 ② 位置信息：用经纬度来表示，double型。该变量主要用来描述用户自行车的实时位置信息。 ③ 通信公司ID：string型。该变量主要用来描述非北斗手机与北斗内核通信时所通过的通信公司的标识。 ④ 用户手机号：string型。该变量主要用来标识防盗系统内的各个用户。 ⑤ 被监控对象：被追踪的对象(自行车上的硬件)，必须是一个已存在的实体(entity)并上传轨迹(track)。一旦该实体进出围栏，都将触发报警。 ⑥ 观察者：接收该围栏报警的人(即用户)，必须是一个已存在的实体(entity)，但不需要上传轨迹。"
"本系统主要包括北斗卫星及由北斗内核、单片机、GPRS、蜂鸣器组成的报警器硬件和上位机控制软件等组成部分。主要工作分为两个部分：一是车辆是否在围栏范围内的检测阶段；二是自动报警后的后续处理阶段。这两个阶段的所有通讯均是通过北斗的短报文功能实现。 1) 车辆是否在围栏范围内的检测阶段 该阶段主要目的是检测车辆是否在围栏范围内。 首先，用户需要在上位机中设置围栏范围、手机号等内容。之后，上位机中设置的内容将会通过GPRS传输给单片机。同时，北斗内核将定位到的自行车实时位置信息与用户设置的围栏范围进行对比。当检测到车辆超出围栏范围时北斗内核发出短报文警告给用户，并通过单片机触发蜂鸣器报警。 2) 自动报警后的后续处理阶段 用户接到短报文警告后，对自行车被移至围栏范围外的具体情况进行判断。 若自行车是非自主超出围栏范围，那么可以判定是有人在车主不知情的情况下擅自挪动了车辆位置，这时用户便可以及时发送获取自行车位置信息的请求并进行持续追踪，以便追回车辆。 若自行车是自主超出围栏范围，那么用户可以通过发送“关闭蜂鸣器 + 硬件ID”的短报文请求来暂时关闭蜂鸣器，以节约资源。当根据实时位置信息检测到车辆重新回到围栏范围内后，通过单片机控制自动开启蜂鸣器。 以上过程适用于内置北斗通信模块的手机，对于没有内置北斗模块的手机，可以通过通信公司代收代发短报文，此时在上位机中还要设置代理通信公司的ID。基本原理如图1所示。 图1. 基本原理示意图。(1：用户设置；2：管理围栏；3：自行车定位；4：短报文通信)  影响自行车防盗系统性能的因素主要有如下两方面： 1) 地理围栏范围精度 卫星定位由于坐标系标准不统一及卫星钟差等原因常会产生定位漂移问题。目前，GPS信号误差对测量距离的影响为1.5 m~15 m [ 6 ] ；而北斗导航系统定位精度可达数10 ns的同步精度 [ 7 ] ，与GPS相当，若设备可以接收北斗增强信号，使用北斗自带的差分信息，则误差在2米左右。因此在围栏范围边缘地带会产生一定的误报警情况。此处可通过设置误差区间值来消除误报，例如对于误差在2米左右的情况，地理围栏范围误差经验值可设为正负3米，以减少自行车用户因误报产生的影响。 2) 请求响应的效率 北斗卫星短报文的基本原理 [ 8 ] 是首先由发送方将包含接收方ID号和通信内容的通讯申请信号加密后通过卫星转发入站。然后地面中心站接受到通讯申请信号后，经脱密和再加密加入持续广播的出站广播电文中，经卫星广播给用户。最后，接收方用户接受机接受出站信号，解调出站电文，完成一次通讯。其通讯传输时延约0.5秒，通讯的最高频率是1秒1次。因此，当过多用户同时发送请求时返回的位置信息以及蜂鸣器的开关控制会有一定的延迟，尤其是对于非北斗手机需要通信公司代理的情况。   上位机控制程序帮助用户通过可视化界面进行相应的设置，界面示意如图2所示。 其中，“管理”模块可以对自行车编号及硬件部分进行关联，“围栏”模块可以对地理围栏范围进行创建、更新和删除，“设置”模块可以输入手机号、通信公司ID等信息，“追踪”模块可以对发生异常的自行车进行轨迹记录。  报警器硬件装置主要由北斗内核、单片机、GPRS和蜂鸣器组成，以充电电池形式供电，安装在车座或车架等较为隐蔽的位置，且要防水防晒。各部分硬件的连通示意如图3所示。 图2. 可视化界面示意图 图3. 硬件结构设计示意图 硬件部分的设备具体选择如下： 北斗通信模块可采用电子科技公司开发的模块，该模块利用北斗一代通信卫星RDSS载荷进行通信，模块集成了RDSS射频收发芯片、功放芯片、基带电路等，可完整实现RDSS收发信号、调制解调全部功能。其集成度高、功耗低，非常适应于系统大规模应用的需求。 单片机选择采用stm32f4系列，其所具有的先进技术工艺和较高性能可以很好地满足设计需求，且该系列单片机兼容于stm32f2系列，便于用户扩展或升级产品。 单片机和北斗通信模块主要通过串口通信，实现短报文的发送、读取功能。发送功能是指由单片机利用相关的指令集，将特定内容的短报文发送给指定的接收方。读取功能是指在北斗通讯模块接收到短报文后，产生中断，单片机进入读取程序，将接收到的短报文按照约定的通讯规则进行分类并读取相应数据。 GPRS无线数传模块可采用LQ8110 GPRS-DTU，它是基于中国移动通讯运营商的GSM/GPRS通信网络的数据传输和远程监控终端设备，适用于GSM/GPRS网络覆盖范围内的各种室内或野外恶劣环境。其利用GPRS网络平台实现数据信息的透明传输，并可通过辅助手段来实现对DTU控制，组成用户专用数据网络，从而提供高速、永远在线、透明数据传输通道。 蜂鸣器可采用压电式有源蜂鸣器SFM-42-I型，重14 g，电压范围3~28 V，工作温度−20℃~+50℃。这里选择压电式蜂鸣器 [ 9 ] 主要因其体积小、重量轻、厚度薄、耗电省、可靠性好，造价低廉。相比于无源蜂鸣器，有源蜂鸣器主要有如下两个特点：①有源蜂鸣器内部带震荡源，所以只要一通电就会鸣叫；②程序控制方便，单片机一个高低电平就可以让其发出声音，而无源蜂鸣器却做不到。"
"首先，北斗手机用户在上位机中设置围栏范围、手机号等内容，非北斗手机用户还需设置代理通信公司的ID以便代收代发短报文。之后，上位机中设置的内容将会通过GPRS传输给单片机。同时，北斗内核将定位到的自行车实时位置信息与用户设置的围栏范围进行对比。当检测到车辆超出围栏范围时北斗内核发出短报文警告给用户，并通过单片机触发蜂鸣器报警。 用户接到短报文警告后，对自行车被移至围栏范围外的具体情况进行判断：若自行车是在用户不知情的情况下超出围栏范围，此时用户便可以及时发送获取自行车位置信息的请求并进行持续追踪，以便追回车辆；若自行车是在用户许可下离开围栏范围，那么可以通过发送“关闭蜂鸣器 + 硬件ID”的短报文请求来暂时关闭蜂鸣器。当根据实时位置信息检测到车辆重新回到围栏范围内后，通过单片机控制自动开启蜂鸣器。  在利用地理围栏的方式对自行车进行保护时，依然可能遭到不法分子的偷盗。比如偷盗者可能会强行拆除防盗报警器，对于类似情况，显然无法做到彻底根绝，但可以采取一定的措施对不法分子进行威慑。 首先，增加防盗报警器的拆除难度。拆除难度并非以所需技巧为指标，而应以拆除所需的最少时间为指标。因此，即使靠增加螺丝数量也可以达到增加拆除难度的效果。 其次，可以考虑关联霍尔防拆技术。霍尔传感器 [ 10 ] 是霍尔效应的原理制成的一种传感器，通过对位置变化或者磁性物体进行非接触性测量，来实现防拆检测，其内部电路如图4所示。在此应用中，将霍尔传感器安装在产品需要进行防拆保护的固定部分上，磁源则安装在可拆卸的移动部分上。正常情况下，由于磁源的磁场原因，霍尔传感器中会有电量产生，而当受保护的固定部分和移动部分由于拆卸发生分离时，引起磁源在固定部分霍尔传感器处的磁场减少，同样霍尔传感器的电量也会减小，而当完全分离时，霍尔传感器中电量为0。通过对霍尔传感器电量的变化进行比较分析，判断拆卸的状态，并将此消息发送给车主，以便及时采取相应措施。  基于北斗和地理围栏的自行车防盗系统旨在减小个人自行车被盗风险。风险的减小首先体现在该系统本身对不法分子的威慑，会使其放弃偷盗该车辆的想法，其次体现在当车辆被盗或防盗报警器遭到破坏时，车主能够及时地收到信息，进而采取下一步措施。 图4. 霍尔传感器电路图 因此，本系统虽无法彻底杜绝车辆被盗的可能，但可以很大程度上降低车辆被成功偷盗的可能性。尤其是对于价格不菲的高档山地车，使用本系统就更为必要。"
"1) 用户自定义设置围栏 通过上位机控制程序，用户可以在地图上自主绘制任意形状的围栏范围或是匹配某一地物范围，不限于默认的圆形围栏。用户还可以在常用停车区域，如住所自行车停车区和公司停车棚等处，设置固定围栏。 2) 利用北斗短报文功能进行互动 当自行车离开围栏范围时，北斗内核会向用户发送短报文报警提醒，若车辆的离开未经用户授权，此时用户可以立即通过短报文向北斗内核请求返回车辆的实时位置信息，从而根据轨迹追踪车辆动向并及时追回。 3) 蜂鸣器的智能控制 若自行车是经用户授权离开围栏范围，那么用户可以通过发送“关闭蜂鸣器 + 硬件ID”的短报文请求来暂时关闭蜂鸣器，以节约资源。当根据实时位置信息检测到车辆重新回到围栏范围内后，可以通过单片机控制自动开启蜂鸣器。   针对定位漂移所导致的围栏范围边缘误报警情况，可以考虑采用一种降低北斗卫星导航定位装置定位漂移的方法 [ 11 ] ，它包括如下步骤： · 获取一段时间内接收到的定位数据，并将其按照定位时间进行排序； · 从第一个定位数据点开始，计算相邻两个定位点之间的距离，并根据两个定位点之间的时间间隔计算车辆的行驶速度； · 如果所述车辆的行驶速度过高，超过了现实中可能达到的最大值，则将这两个定位点删除。 经过上述步骤最终得到的定位数据列表中的定位数据信息即为无漂移点的相对精确定位信息，可以有效降低北斗卫星导航定位装置定位漂移，提高定位数据的准确度。  自行车报警器往往需要全天候工作，这对仪器电源有较高要求，仅仅使用充电电源可能会带来诸多不便。一种理想方案是依靠自行车动力自发电，为报警器装置供能。目前已有能安装在自行车车轴上的小型发电机，但是极不常见，主要的瓶颈是发电机的功率很低，因此这方面还有待进一步探索。"
"本系统充分利用北斗卫星的导航定位技术及其特有的短报文通信功能，设计出基于北斗和地理围栏的公共自行车防盗系统，实现了自动监测用户自行车是否超出围栏范围并进行报警追踪的功能。采用上位机和单片机对数据的并发进行处理，通过软件技术克服硬件对网络并发请求处理不及时的问题，自行车监测系统搭建部署容易实现。通过分析，整个系统在技术、经济、法律等方面均具有较高的可行性且在硬件设计及报警器防拆卸方面创新性较强。此外，个人自行车防盗上的技术和经验可以转移到共享单车的管理中。通过设置各级围栏，对自行车进行管理，规范行业和民众习惯。在设备终端方面，针对不同用户习惯，可以考虑增加应用平台，提供微信公众号、IOS客户端、Android客户端等多种查询服务。"
