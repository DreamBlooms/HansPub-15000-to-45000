"水库防洪调度方案需要在满足控制目标和约束条件的同时，具有便捷性和可操作性。为此，提出以泄流设备运行状态变化次数最少为准则的防洪优化调度模型。根据水库泄流设备的设计参数和运行规则预先编制泄流设备启停策略表，将泄流设备组合方案作为基本计算单元，并设计一种简单且行之有效的计算流程从策略表中优选出调度期内所需的方案。以功果桥水库为实例的应用表明，该方法能够将调度结果从水库的下泄流量控制精细到泄流设备的操作控制，其调度结果不仅能够满足泄洪需求，还能避免泄流设备运行状态的频繁调整，有效提高防洪调度方案的实用性。 关键词 :水库，防洪调度，泄流设备，策略表 Copyright © 2017 by authors and Hans Publishers Inc. This work is licensed under the Creative Commons Attribution International License (CC BY). http://creativecommons.org/licenses/by/4.0/"
"水电站防洪调度可以提高水库自身防洪能力和缓解下游洪涝压力，同时为水电站增加经济效益提供保障。常见的防洪优化调度模型主要分两类：第一类旨在保障水库自身安全，目标函数主要包括动用防洪库容最小、最高水位最低和末水位控制等；第二类旨在保障下游防洪安全，目标函数主要包括最大下泄流量最小、洪水历时最短和分洪量最小等。在此基础上，文献 [ 1 ] 建立了洪灾损失最小的防洪优化调度模型；文献 [ 2 ] 提出防洪安全度函数，优化准则为系统防洪安全度最大；文献 [ 3 ] 基于“蓄水少的水库多蓄水，蓄水多的水库少蓄水”的调度思想，提出同步拦蓄规则，建立超额洪量最小的优化调度模型；文献 [ 4 ] 提出了一种水库群洪水补偿调度通用模型；文献 [ 5 ] 和 [ 6 ] 将上述常用的单目标耦合为一个复合型的目标函数。在模型求解方面，主要集中在新型算法在原理运用上的可行性 [ 7 ] [ 8 ] [ 9 ] ，以及对较为成熟的算法进行改进 [ 10 ] [ 11 ] [ 12 ] [ 13 ] 。此外，文献 [ 14 ] 提出了一种启发式逐步优化方法，将决策者预泄控制的实践经验和泄流状态持续性要求纳入模型的约束条件中；文献 [ 15 ] [ 16 ] 分别利用了大系统分解协调方法，先将调度对象分解为若干个独立子系统，然后再总体协调进行目标优化。 以往很多防洪调度优化模型以水库的下泄流量作为决策变量，通过求解优化模型得到整个水库的泄洪过程，实际操作中还需要根据优化后的流量去反推泄流设备的运行方式，为了满足目标流量很可能造成泄流设备运行状态频繁变动，所以制定合理有效的泄流设备启停计划是现阶段防洪优化调度面临的重要问题。文献 [ 17 ] 考虑了泄流设备的实际运行，但计算方法仍为先优化下泄泄量，再将流量分配到泄流设备，并未考虑泄流设备的可操作性；文献 [ 18 ] 提出了考虑泄流设备开启实用性的洪水调度仿真模型，但主要通过调度人员观察下泄过程线和水位过程线确定泄流设备的调整方案。建立以泄流设备运行状态为变量的优化模型可以有效解决调度方案的实用性，但面临复杂的混合整数规划模型求解问题，求解质量和时效性难以保证，且其应用中的也存在一些困难：① 不同水库之间泄流设备差别较大，难以确定一种普遍适用的求解方法；② 同一水库中不同泄流设备开启的条件、目的、原则和开度要求各不相同，且大型水库的泄流设备一般较多，如果将单个泄流设备作为调度单元直接进行优化计算，问题规模过大；③ 泄流设备的操作与工程经验、实际工况的结合非常紧密，调度方案必须具备实用性。 为了提高防洪方案的便捷性和可操作性，本文以整个调度期内泄流设备运行状态的变化次数最少为准则建ing立防洪优化调度模型，以泄流设备组合方案作为基本计算单元。一个方案通常包含两个要素——开启的对象和相应的开度，为了避免在计算过程中反复组合方案增加不必要的计算量，本文通过预先编制泄流设备启停策略表的方法辅助模型求解，并设计一套计算流程，能够从策略表中快速挑选出满足优化目标的方案形成最终的泄流设备启停计划。以功果桥为应用实例的调度结果表明，所提模型可以将防洪调度方案由水库下泄流量控制精细到泄流设备操作控制，其调度结果满足实际调度需求，避免泄流设备运行状态的频繁调整。本文所提方法现已应用于澜沧江下游梯级水电站群的实际调度中，有效提高了防洪调度方案的实用性。"
"该防洪优化调度模型的优化准则为在满足泄洪要求的前提下所需要泄流设备的运行状态变化次数最少。如果泄流设备的运行状态每进行一次变化就代表一个新的方案出现，那么整个调度期内泄流设备运行状态变化次数最少即为整个调度过程中所需要的方案个数最少。目标函数为： (1) 式中： 表示集合 中元素的个数； 分别为一次洪水调度过程中的方案。 目标函数式(1)虽然直观但不利于求解，实际求解时需要对目标函数进行适当转化。由于一次洪水的调度时段数是一定的，那么整个调度期内方案的个数最少意味着单个方案的持续时段数需要尽可能的长，基于此可将上述目标近似转化为一系列的子优化问题，该子问题描述为：给定调度期内的入库流量过程，在满足泄洪约束的情况下，从可运行方案的集合中选出所能持续时间最长的方案，其求解公式如式(2)所示： (2) 式中： 为可运行方案； 为可运行方案的集合， 为 中的方案个数； 为方案 在满足约束条件时所能维持的时段数； 为集合 中持续时段数最多的方案。 从 开始，按照式(2)求出方案 ，并保持方案 中泄流设备的开启状态不变进行调洪计算，直至其不能满足约束条件，并在约束破坏时段按照同样的方法求出方案 ，不断以前一个方案的结束时段作为下一个方案的起始时段采用同样的步骤迭代求出余留期的所有方案。  1) 水量平衡约束： (3) 式中： 为 时段的库容， 为 时段入库流量， 为 时段下泄流量， 为时段步长，单位h。 2) 水库水位约束： (4) 式中： 、 、 分别为水库在 时段水位及其水位上下限。 3) 下泄流量约束： (5) 式中： 为综合利用要求最小流量； 为最大泄洪能力限制。 4) 发电引用流量限制： (6) 式中： ， ， 分别电站 时段发电流量及其上下限。 5) 水库泄流平稳性约束： (7) 式中： 、 分别为下泄流量下降(上升)阶段的最大变幅。一般情况下， 。 6) 泄流设备出库限制： (8) 式中： 为泄流设备j在 时段的泄流，J为泄流设备总数。 7) 泄流设备泄流限制： (9) 式中： 为泄流设备j的泄流函数， 为泄流设备j的开度。 8) 泄流设备开启优先级： 泄流设备实际运行时，调度人员希望指定泄流设备的优先开启及关闭顺序。 (10) 式中：表示设备开启顺序优先级，数字越小表示优先级越高，反之优先级越低。"
"策略表的编制过程是将泄流设备的操作规则由文字化的信息转换成数字化的组合方案，为了便于从策略表中快速定位最优方案，本文引入了一个简单有效的定量指标——平均泄流能力(用 表示)作为策略表的查询索引。策略表以行作为记录单元，其中第2~(J + 1)列分别为泄流设备1~j的对应开度( 表示泄流设备j为关闭状态)，所有的泄流设备状态 构成一个泄流设备组合方案x，第1列为x所对应的 。 策略表的编制过程主要分为两步： 1) 结合水库信息列举方案 根据每个水库的泄流设备设计参数和运行规则列举可用作实际调度的方案。下面以功果桥水库为例进行详细说明，功果桥水库的泄流设备参数如下表1，运行规则为：① 表孔原则上对称开启，最小开度应不低于1 m；② 在一定程度上尽量使表孔均匀开启，避免单孔开度过大；③ 优先开启表孔，底孔只在汛期需要冲沙时，适时开启。 解读上述信息可得出以下结论：① 表孔2#和4#以及1#和5#的开度需尽量相同；② 为满足均匀开启避免单孔开度过大，可以选择最大开度的2/3处为临界值，即当单孔开启至13 m时停止继续加大开度，而是增开表孔数量；③ 开启优先级为——表孔3#→表孔2#和4#→表孔1#和5#→底孔。以1 m为泄流设备的调整步长，功果桥水库的方案列举过程分为5个阶段，如表2所示。采取表中的列举过程不仅能避免方案遗漏，还能使各个方案之间具有连贯性减少泄流设备的操作量，利于后续计算。 2) 计算各个方案的平均泄流能力 。 由式(9)可知，泄流设备的下泄流量函数是一个关于水位和开度的二元函数，但相比而言后者的影响更为显著，所以通过求平均值的方式弱化水位的影响， 的计算公式为： (11) 式中： 和 分别为某次调洪计算中水位的下限和上限。 可以描述方案泄流能力的大小，与方案一一对应并用来索引方案。但是 作为一个平均值只能应用于挑选方案，在泄洪计算时必须采用式(8)和(9)求解。 按照上述步骤即可完成策略表的编制，针对同一水库而言，其方案信息基本相同，所以策略表一旦编制完成便可存入数据库中，实际计算时结合实际工况对策略表中的部分信息进行初始化，例如，根据调洪计算的所设置的水位上下限计算 ；如果泄流设备j出现故障不能正常使用，则将J + 1列全部赋值为0；如果有冲沙需求，要求底孔全开，那么将相关列全部赋值为最大开度。  模型的求解结果为泄流设备启停计划，一般包括调度期内的所有方案以及各方案对应的起始操作时段。尽 Table 1 泄流设备类型 底坎高程(m) 泄流设备个数 泄流设备形式 孔口尺寸(宽 × 高) (m) 校核泄洪流量(m 3 /s) 设计泄洪流量(m 3 /s) 溢流表孔 1288.00 5 弧形门 15×19 15399 12657 底孔 1260.00 1 — 5×7 900 873 表1. 功果桥水库的泄流设备设计参数 Table 2 各阶段方案的列举说明 表孔(m) 底孔(m) 1# 2# 3# 4# 5# 阶段1 以1 m的步长，逐步开启表孔3至13 m 0 0 0 0 0 0 0 0 1 0 0 0 0 0 2 0 0 0 …… 0 0 13 0 0 0 阶段2 以1 m的步长，逐步开启表孔2和4至13 m 0 1 13 1 0 0 0 2 13 2 0 0 0 3 13 3 0 0 …… 0 13 13 13 0 0 阶段3 以1 m的步长，逐步开启表孔1和5至13 m 1 13 13 13 1 0 2 13 13 13 2 0 …… 13 13 13 13 13 0 阶段4 以1 m的步长，按照优先级逐步开启5个表孔至19 m 13 13 14 13 13 0 13 14 14 14 13 0 14 14 14 14 14 0 …… 19 19 19 19 19 0 阶段5 以1 m的步长，逐步开启底孔至最大开度 19 19 19 19 19 1 19 19 19 19 19 2 …… 19 19 19 19 19 7 表2. 功果桥水库的方案列举过程 管不同水库策略表中的方案信息各异，但是以方案作为计算单元其求解方法则相同，所面临的关键问题均为如何从表中快速选出一系列最优方案，其中单个方案的优选过程一致，主要分为两个阶段：首先，根据水位约束的破坏情况判断泄流设备的调整方向，在满足流量约束以及变幅约束的前提下先从策略表中挑选出部分方案构成备选集合(详见步骤6))；然后，从备选集合中选取在满足水位约束的情况下所能持续时段数最长的方案即为该阶段的最优方案(详见步骤7)和8))。不断将前一个最优方案的结束时段作为下一个方案的起始时段，迭代重复步骤6)~8)直至调度期末，便可得到最终的泄流设备启停计划，详细计算步骤如下：(下文中 、 分别为方案 的平均泄流能力和起始运行时段) 1) 设置约束条件。 包括水库的 、 、 、 、 和 等。 2) 初始化策略表。 在3.1节生成的策略表的基础上，结合实际工况对策略表中的部分信息进行初始化，并依据式(11)在 取值范围内计算各个方案的 。 3) 生成初始方案 。 ① 确定 的起始运行时段 ，因为水库只有在产生弃水时才需要开启泄流设备，所以 为 的最小时段(假设机组满发)； ② 根据“等来水量弃水”的原则，求得 时段所需要的平均泄洪流量 ，M的取值根据洪水的情况而定，计算公式为： (12) ③ 从策略表的第1列中选取与 最为接近的取值即为 ，操作步骤为：首先根据前一时段的出库 以及变幅约束 和 求出泄洪流量的取值范围 ；然后再从策略表中以 为标准挑选 ，并求出 与 绝对差值的最小值 ；最后求出 。公式表示为： (13) ④ 通过 索引到初始方案 。 4) 保持 中各泄流设备开启状态不变，采用调洪数值解法 [ 19 ] 逐时段求解，直至其破坏水位约束，标记水位为 。 5) 设置方案编号 ，从 开始计算。 6) 判断水位约束破坏情况： ① 若 ，说明所选方案泄流能力过小，需要加大开度，此时从策略表中选取 取值较大的方案作为可行方案，并构成备选集合 ，对 中的所有方案按照 的值从小到大进行排序，并依次编号为 ，最终构成备选集合 的表达式为： (14) ② 若 ，说明所选方案泄流能力过大，需要减小开度，此时从策略表中选取 取值较小的方案作为可行方案，并构成备选集合 ，对 中的所有方案按照 的值从大到小进行排序，并依次编号为 ，最终构成备选集合 的表达式为： (15) 7) 从 ， 开始，保持方案 中的泄流设备开启状态不变，采用调洪数值解法逐时段求解泄洪过程，并判断各时段的水位是否满足约束要求，如果满足，令 ，继续求解；如果破坏，则停止计算，标记方案 的水位约束破坏时间为 ，水位 。 8) 判断 和 的大小关系(其中 )，若 且 ，则令 ，转至7)继续计算；反之，停止计算，否则将会因为继续加大(减小)下泄流量造成约束提前破坏。方案 即为备选集合中在约束范围内持续时间最长的方案。此时， ， ， 。 9) 若 ，则令 ，转至5)继续计算，否则转至10)。 10) 合并所有方案 以及各个方案所对应的起始运行时段 形成该场洪水的泄流设备启停计划。"
"功果桥水库的正常蓄水位为1307.00 m，死水位为1303.00 m，校核洪水位为1309.50 m，一般水库水位控制在1303.00 m~1307.00 m之间运行，汛限水位为1308.50 m。 洪水基本信息见表3。在设置初始计算条件时，根据综合利用要求，最小出库流量为168.0 m 3 /s；因为功果桥无下游防洪要求，且自身库容较小，所以根据洪水的性质削峰率达到90%，即最大出库流量不能大于最大洪峰流量的90%；功果桥水库没有出库变幅要求，最终的设置信息见表3。 从表3中的调度结果统计信息可以看出泄洪过程均满足约束条件。图1为调度结果图，表4为泄流设备启 停计划表，其中包含4个方案，由于入库较大从第一时段便需要开启泄流设备即 。从图1中可以看出，每一次选取新的方案时水位均处于约束边界处：t = 19，Z 19 = 1306.39 m (水位上限)；t = 66，Z 66 = 1304.23 m (水位下限)；t = 94，Z 71 = 1304.05 m (水位下限)。通过出库过程可看出，如果在水位上限处，则下个方案的调整方 Table 3 洪水基本信息 洪水计算信息 性质 最大洪峰(m 3 /s) 平均入库(m 3 /s) 最高水位(m) 最低水位(m) 最大出库(m 3 /s) 最小出库(m 3 /s) 设计洪水P = 0.1% 12798.3 8725.9 初始条件设置信息 1306.50 1304.00 11518.5 168.0 调洪结果统计信息 1306.39 1304.05 11324.7 6106.9 表3. 功果桥水库洪水信息统计表 Table 4 方案 起始时段 表孔(m) 底孔(m) 1# 2# 3# 4# 5# x 1 0 0 5 13 5 0 0 x 2 19 13 15 15 15 13 0 x 3 66 0 13 13 13 0 0 x 4 94 0 6 13 6 0 0 表4. 功果桥水库泄流设备启停计划表 图1. 设计洪水的调度结果图 向为加大泄流能力，如果在水位下限处，则下个方案调整方向为减小泄流能力。通过水位变化过程可看出，水位在约束范围内均出现波动，表明每次所选取的方案都能够最大限度地利用防洪库容，若采用其他方案，则必定会因为提前突破约束，减少持续时段数。另外，从调度结果中的出库过程可以看出保持同一个方案进行泄洪时其下泄流量会随着水位的变化而浮动，例如图1中，在t = 19和t = 66之间采用的是同一个方案进行泄洪计算，但其出库并非固定不变，这表明在防洪优化调度研究时，如果先优化下泄流量再推算泄流设备运行方案，并将该方案的出库流量设为一个固定值参与多时段泄洪，这种方式并未考虑其出库也会随着水位的变化而改变，必然导致实际调度和调洪计算的结果出现偏差，削弱优化方案的参考价值，而以泄流设备作为决策变量可以充分利用泄流设备的自适应性，增强防洪方案的实际指导意义。 在上述调度结果中可知通过泄流设备运行状态变化次数最少模型求解得到的泄洪方案一般在某一时段集中进行泄流设备的启闭和开度调整操作，而集中操作的方式势必会导致出库流量陡增(减)，为避免此类现象可采用选取过渡方案的方法。例如在表4中第一个方案和第二个方案之间增加过渡方案(0, 13, 13, 13, 0, 0)，起始时段为t = 32。如果有实际需要调度人员可根据实际情况合理选取多个过渡方案。"
"为了增强防洪方案的实用性和可操作性，本文提出了泄流设备运行状态变化次数最少的防洪优化调度模型及其求解方法，以泄流设备组合方案作为基本计算单元，通过持续时段数最长选出各阶段的最优方案，其调洪结果为整个调度期内的泄流设备启停计划，以功果桥水库的应用结果表明： 1) 利用模型计算结果中的泄流设备启停计划表可以直接指导洪水调度，能够在满足安全泄洪的前提下，有效兼顾泄流设备操作的经济性和实用性，同时也减轻调度人员的工作量。 2) 编制策略表辅助模型求解，不仅可以保障求解时效，还能化解因泄流设备之间存在普遍差异性使得求解方法难以通用的难题。 3) 通过初始化策略表以及选用过渡方案的方法，能够充分考虑实际工况和人工经验，增加方案的可行性。"
