"螺纹检测是现代化工业检测范围内的一个重要组成部分，是保证产品质量的关键。本文设计了一套用智能化检测系统去检测小螺距螺纹参数的方法。与常规的检测方式相比，该系统具有快速、准确、非接触式的优点。文章还介绍了检测螺纹参数的数据采集与处理的具体方法，并通过试验证明该方法的可行性。 关键词 :快速，准确，非接触式的测量，数据采集，边缘检测"
"小螺距螺纹检测是现代化工业检测范围内的一个重要组成部分，是保证产品质量的关键，随着工业制造技术和加工工艺的改进，对高精度、高效率，操作方便的螺纹检测设备已迫切需求。就现状而言，国内螺纹参数的检测都是以传统的检测方法及仪器为主，已使用的新的光电技术螺纹参数检测法也只有在方便性及效率方面有所突破外，总体上还没有实质性的突破[ 1 ] [ 2 ] 。随着三坐标测量技术的发展，接触式三坐标测量机及非接触复合式三坐标测量机也被引入螺纹检测，但在检测精度及被检测螺距的大小规格方面受到一定程度的限制，而且仪器的使用成本较高。专用螺纹检测仪器因其检测成本较高，使用不方便，通用性较差，与传统的螺纹检测方法及检测仪器相比不具有太多优势 [ 3 ] 。本文针对以上情况，设计了一套用智能化去检测小螺距螺纹参数的方法，该方法具有检测功能全、效率高、精度高，操作简单，检测成本适中的优点。"
"本文设计的智能检测小螺距螺纹系统主要包括三大部分：图像获取部分；图形分析处理部分；运动控制部分，其组成结构如图1所示。具体硬件结构主要有：光源、镜头、CCD摄像机、图像采集卡以及计算机等部件。其中光源为测量系统提供了足够的亮度；镜头将被测场景中的目标成像到CCD的靶面上，将其转变为电信号；图像采集卡将电信号转变为数字图像信息，即把每一点的亮度转变为灰度级数据，并存储为一幅或多幅图像；计算机实现图像存储、处理，并给出测量结果和输出控制信号。"
"小螺距螺纹数据采集主要使用图像采集法，它主要是通过CCD摄像机和专用采集软件完成的。CCD摄像机属于工业相机，与普通数码相机相比具有快门速度高、光谱范围宽和图像质量高的优点 [ 4 ] [ 5 ] 。CCD摄像机采集到较为理想的原始小螺距螺纹的图像，同时把采集到的小螺距螺纹的图像通过图像采集卡显示在电脑屏幕上，并记录、调节采集来的参数。采集到的小螺距螺纹图像如下图2所示。  本文采用图像处理法对小螺距螺纹参数进行数据处理，其过程主要包括图像阈值处理、螺纹轮廓提取、螺纹轮廓边缘亚像素提取。图像阈值是利用图像中要提取的目标与背景在灰度特征上的差异来选取 图1. 系统组成结构图 图2. 采集到的螺纹图像 一个适当的阈值，通过判断图像中每一像素点的特征能否满足阈值要求从而确定为了确定图像中哪些像素点属于目标，哪些像素点属于背景，进而产生二值图像 [ 6 ] ，最终得到的螺纹二值图像如图3所示。 图像边缘轮廓的提取是测量螺纹参数的关键。图像边缘是指图像中表达物体的周围像素灰度发生阶跃变化的像素集合，它存在于目标与背景、目标与目标、区域与区域、基元与基元之间。边缘点是指图像中周围发生变化的像素点或者有阶跃变化的像素灰度，即灰度值不连续的结果就会产生边缘。常用的边缘检测算法有Roberts边缘算子、Sobel边缘算子、Prewitt边缘算子、Laplace边缘算子、Canny边缘算子等算法 [ 7 ] - [ 9 ] 。待处理像素为中心的邻域作为灰度分析的基础，从而实现对图像边缘的提取。本文采用的Canny边缘算子具有对噪声有着很好地抑制作用，而且能更好地检测边缘细节信息，采用Canny算子实现螺纹边缘检测的结果如图4所示。 边缘提取出的边缘线是不光滑的，测量精度还很低，螺纹牙的边界又多为直线，根据灰度分布函数的特点，利用直线函数对灰度分布作最小二乘拟合 [ 10 ] ，并根据拟合出的函数直线来确定灰度分布边缘点的位置，从而实现螺纹牙型轮廓的亚像素精确定位。"
"小螺距螺纹大径是螺纹中的最大直径，即与螺纹牙顶相重合的假想圆柱面的直径，在标准中定为公称直径。参照图5， 所在的行与 所在的行的差值即为螺纹的大径值。因此可以通过扫描全图，记录每一轮廓的像素点所在的行数；统计每行轮廓像素点的数目，数目总数位于前四位的即为螺纹齿顶和齿根所在的行，分别记录下Y坐标的最大值和最小值，并将这两行拟合成水平线即直线，计算两直线之间的差值，根据差值就能确定螺纹大径的尺寸。 图3. 二值图像 图4. Canny算子边缘检测结果。(a) 原始螺纹图像；(b) Canny算子 图5. 螺纹大径测量示意图  小螺距螺纹中径是通过螺纹轴向截面内牙型上的沟槽和凸起宽度相等处的假想圆柱面的直径，近似等于螺纹的平均直径。考虑到有的螺纹牙型角的不对称性，采用逐步扫描法确定平面上两直线交点的位置进而确定中径，如图6所示。绘制一条平行于轴线的直线L1，假设该直线方程为y = b1，对截距b1以0.01为步长，逐步递增，逐步扫描与牙型轮廓线的相交点，当 时，此时对应的截距 值即为满足条件的中径线。同理，在螺纹的另一侧绘制一条平行于轴线的直线L2，截距为b2，以同样的步长逐步扫描与牙型轮廓线的相交点，当 时，此时对应的截距值 即为满足条件的另一条中径线，则螺纹中径M为 。 图6. 螺纹中径测量示意图  小螺距螺纹是相邻两牙在中径线上相应两点之间的轴向距离，用p表示。螺距的测量是在与螺纹轴线平行方向的牙面位置上进行的。由前一步中得到的中径方程得到中径线与螺纹线的交点P，Q，R，T (如图7所示)，通过求它们之间的差值来确定螺距。 (1)  小螺距螺纹的牙型角是螺纹在轴向截面内，螺纹牙型两侧边的夹角，如上图8所示，用 表示。通常测量螺纹夹角可以通过测量螺纹牙侧面角来实现，螺纹侧面角是螺纹牙型的侧边与螺纹轴线的垂直平面的夹角。具体过程如下：首先对螺纹图像进行整体扫描，当扫描过程中像素有从黑像素到白像素的变化时，记录扫描得到的轮廓点坐标，再逐步扫描，记录下一个或下N个轮廓点坐标，对其进行直线最小二乘拟合，得出拟合直线方程 。之后从反方向扫描记录拟合得出拟合方程 ，根据两直线夹角公式，得出螺纹夹角 为： (2)"
"为了验证本文设计的智能化检测系统检测小螺距螺纹参数检测的正确性，对牙型角为 的螺纹标准件M16*2进行实验验证，借助于MATLAB对测量数据进行分析处理，得到螺纹主要参数如图9所示。 图中的测量数据来看，我们可以看出螺纹大径为 ，螺纹小径为 ；螺纹的牙型角平均值为 。与标准参数相比，测量值误差都在 或者 左右，相对而言都在合理的误差范围内。以上分析可知：本系统图像处理算法的精度可以满足螺纹参数的测量需求。"
"1) 在综合考虑测量精度和节约成本的前提下，本文设计完成了一套智能化、非接触式的检测小螺距螺纹参数的系统，能够实现快速、准确检测小螺距螺纹的几何参数； 2) 该系统可以对小螺纹进行边缘轮廓的提取，从而达到真正意义的对小螺距螺纹参数的非接触测量； 3) 考虑到小螺距螺纹几何参数的特点，本文重点对小螺距螺纹的大径、中径、螺距、牙型角等主要几何参数测量进行了着重研究，并通过试验进一步验证了该系统的智能化程度高和数据的准确性。 图7. 螺纹螺距测量示意图 图8. 牙型角示意图 图9. 螺纹测量结果"
