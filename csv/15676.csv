"随着高校信息化不断的进步，高校计算机安全实验室已经成为高校教育必不可少的配置，但老旧的实验室已经不能满足当前学生的需求，尤其计算机等级考试无法进行，直接影响到学生的切身利益。随着计算机教育教学的广泛应用，利用虚拟化技术优势，构建高标准的计算机实验室，有利于学生更好的学习，教师更好的教学，对学校的发展起到促进作用。本文通过对我校计算机实验室虚拟存储和网络设备的设计与配置，给出了具有实用价值的基于EMC的实验教学平台解决方案。 关键词 :EMC存储，计算机实验，教学环境"
"计算机教学是现在教学的重要组成部分，如何实现却各有各的方式，我校有两个计算机实验室，主要任务是实现教师网络教学和各种计算机考试，由于教学和考试对网络和服务器稳定要求较高，老旧的设备和配置已经无法满足需要，通过本次实验室重建，彻底解决存在的问题，使实验室更加安全稳定。网络稳定性需要通过购买高性能稳定的网络设备及合理配置来实现，而服务器的稳定需要通过服务器虚拟化技术和存储虚拟化技术来实现，安全防护主要使用学校的防火墙，然后把内部的电脑都设成静态IP地址，即要实现实验室内部电脑可以互通，又要把实验室跟外部隔离起来，在需要上外网时还要能够接通外网，让每台电脑都能够上网。服务器使用VMware虚拟服务器技术和EMC VPlex虚拟化存储技术来实现服务器的高稳定性，服务器虚拟化技术可以以极低成本构建先进的高校计算机实验教学平台[ 1 ] ，由于以前已经有了VMware，此次主要购买和配置EMC存储实现存储的虚拟化。"
"EMC(易安信)为一家美国信息存储资讯科技公司，主要业务为信息存储及管理产品、服务和解决方案。EMC公司创建于1979年，总部在马萨诸塞州霍普金顿市，1989年开始进入企业数据储存市场，2003年，EMC收购了VMware。二十多年来，EMC全心投注在各项新的储存技术，无论是全球外接RAID储存系统、网络储存亦或是储存管理软件等储存专业领域，EMC均是业界公认的领导厂商。 EMC作为全球领导厂商，帮助企业和服务提供商实现运营转型，交付IT即服务。这一转型的基础是云计算。EMC通过创新的产品和服务，加速云计算之旅，帮助IT部门以更灵活、更可信和成本效益更高的方式，存储、管理、保护和分析他们的最宝贵的资产——信息。 我校购买了2台EMC VNX5400，1台EMC VPLEX LOCAL，2台DS300B，用于搭建具体虚拟化平台系统的存储高可用。VPLEX和2台VNX5400存储都将接入SAN [ 2 ] 网络，通过VPLEX实现两台存储逻辑设备的镜像，从而实现对数据的双存储保护。  网络购买设备主要有1台汇聚，16台接入交换机。配置思路：每个实验室放8台接入交换机来接每台电脑，再把这16台接入交换机连到汇聚上，第一实验室接入汇聚前8口，第二实验室接入汇聚后8台，由于2台实验室要相互不干扰，而且有各自的主机和服务器，第一实验室主机和服务器分别接汇聚9口和10口，第二实验室主机和服务器分别接汇聚15口和16口。"
"最终系统拓扑结构图如图1所示，VPLEX完成存储的虚拟化后，将实现存储的高可用性，数据的可移动性。 由上图所示，此次实施的整个实验室的SAN环境由SAN FC交换机、EMC存储、服务器共同组成一个SAN网络，承担了实验室数据存储任务。所有链路及硬件都是冗余状态，无单点故障。"
"采用基于SAN的存储虚拟化技术，使用EMC VPLEX统一管理存储设备。实施前规划： IP规划，为了管理及维护方便，需要对存储及光纤交换机配置管理IP， EMC VNX5400-A IP地址：SPA: 10.11.20.11SPB: 10.11.20.12 EMC VNX5400-B IP地址：SPA: 10.11.20.21SPB: 10.11.20.22 2台交换机的IP分别为10.11.20.10和10.11.20.20 VPLEX IP: 10.11.20.60 子网掩码：10.10.10.192 网关：10.11.20.1 图1. 系统拓扑结构图 EMC实施步骤： 第一步，初始化存储，将规划的管理IP分配给存储的2个控制器，安装相关软件；更改光纤交换机的默认IP为规划IP， 第二步，更改光纤交换机的默认IP为规划IP，将存储、交换机的LAN网络联通，HBA、交换机以及存储、交换机之间的光纤连接完毕，交换机划zone，将服务器与存储之间的光纤链路联通。 第三步，主机安装agent、powerPath软件，agent软件的功能是将服务器的信息(主机名、IP、HBA的WWN)注册到存储，以方便存储端较容易区别服务器，PowerPath则是EMC的多链路聚合软件。 第四步：管理PC端通过IE登录存储，进行pool、RG、LUN的创建及主机映射，管理PC打开ie，输入存储控制器的IP后就能登录EMC存储的管理程序。  由于没有防火墙或路由器，所以无法作Nat设置，要想上外网只能使用公网地址，给2个实验室分配2段公网地址，每个实验室属于一个Vlan，保证实验室内部互通。接入交换机设置管理IP和路由，一个实验室间的交换机可以互通。交换机下联口设成access，上联口设成trunk，汇聚下联口设成trunk，下联口设成access，保证每一次都可以找到对应路由进行数据传输。 为了能够让每个实验室都能够独立控制而且能够上网，2个实验室分别给了一段ip地址段，第一实验室和第二实验室分别设置不同的Vlan，分别为Vlan 10和Vlan 20，2个Vlan的接口地址也就是电脑网关都设置在汇聚上，第一机房电脑连的8台接入交换机接到汇聚交换机的前8口上，即1~8口，接入交换机下连电脑的口设成access vlan 10，上接汇聚的口设为trunck，交换机管理vlan为100，设置管理地址及默认路由指向汇聚，第二机房的电脑连的8台接入交换机接到汇聚交换机的后8口上，即17~24口，接入交换机下连电脑的口设成access vlan 20，上接汇聚的口设为trunck，交换机管理vlan为100，设置管理地址及默认路由指向汇聚。汇聚前8口和后8口都配置成trunk口，汇聚上连的接口配为access口，汇聚上配置4个vlan接口地址，实验室1和实验室2电脑的网关接口地址，接入交换机管理的网关接口地址，汇聚上联口的vlan管理接口地址，最后把汇聚的默认网关设为汇聚上层的核心地址即可，到此完成了所有配置，这样2个实验室内的电脑就可以相互通信了，就实现了同一机房的接入交换机相互通信，不同机房的交换机相互隔离，每台电脑设置对应机房的ip地址，即可以实验同一机房电脑互通，又能够上网，满足了机房的要求。 该配置方案的核心是汇聚，汇聚是设计的重点，其它相对配置较对容易，汇聚关键代码如下： interface Vlan-interface101 ip address ***.***.19.254 255.255.255.0 interface Vlan-interface102 ip address ***.***.20.254 255.255.255.0 interface Vlan-interface200 ip address ***.***.12.62 255.255.255.224 interface Vlan-interface301 ip address ***.***.12.97 255.255.255.252 interface GigabitEthernet1/0/1 port link-mode bridge port link-type trunk undo port trunk permit vlan 1 port trunk permit vlan 20 102 …… interface GigabitEthernet1/0/13 port link-mode bridge port link-type trunk undo port trunk permit vlan 1 port trunk permit vlan 10 102 …… interface GigabitEthernet1/0/28 port link-mode bridge port access vlan 301 ip route-static 0.0.0.0 0.0.0.0 ***.***.12.98"
"根据预定方案完成了最终的建设与配置，所有机器都运行正常，起初没有发现问题，但是随着机房使用量的增加，问题就显现出来，经常出现教师机无法控制下面学生电脑的情况，尤其在向山学生电脑下发大的文件时，经常出现下发不成功。经过分析主要是因为在大文件同时向学生机下载时，由于教师机也接在一台接入交换机上，在这一台接着的学生机一般不出问题，不在同一个接入交换机的电脑出现问题，因为教师机在接入交换机接着，所以如果要把数据传到其它学生机，那么需要首先经过该接入交换机把数据传到汇聚，然后从汇聚再下发到其它接入交换机，接入交换机最终发送到各学生电脑上，这样如果数据较大，从接入到核心就会出现瓶颈，影响传输速度，严重时出现无法传输。了解到问题所在，根据问题制定了解决方案，把教师机从接入交换机上提到汇聚交换机，这样教师机发出的数据经汇聚直接分发到各接入交换机，再到学生机，这样大大提高了效率，经过调整，后期没有再出现无法传输数据或死机现象。"
"通过使用虚拟存储技术，使服务器数据存储更加安全，网络的有效配置提高了学生机访问服务器和上网的效率，达到了较好的预期。由于虚拟化是目前发展的趋势，所以各高校在实验室建设时要充分利用其优势[ 3 ] ，投入更多的人力物力到虚拟化建设研究中去，为虚拟化建设更成熟更完善去贡献自己的力量。"
