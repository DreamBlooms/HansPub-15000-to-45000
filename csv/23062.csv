"心理医生云平台旨在整合医院医生资源，帮助心理医生和患者之间建立有效就医的信息平台，移动端app的应用使得医患双方可以更加便捷的完成就医过程。本文介绍了该系统的需求分析建模和系统设计建模过程。在需求分析阶段，使用UML用例图和分析类图建模。在系统设计阶段，使用包图建立软件体系结构，使用设计类图完成软件功能的设计。 关键词 :心理医生，APP，OOAD，UML Copyright © 2017 by authors and Hans Publishers Inc. This work is licensed under the Creative Commons Attribution International License (CC BY). http://creativecommons.org/licenses/by/4.0/"
"心理疾病是很普遍的，在日常医院就医的过程中，每位患者由于病情的轻重缓急，往往不能合理安排检查顺序，同时医生不能对同一患者的病情跟踪治疗，导致效率低下，往往结果不令人满意。而患者本身也无法及时有效的得到医生的回馈的信息，对自身存在的问题也不自知。最为重要的是，虽然可提高检查顺序，但是医生一天检查患者数很多，难以准确记忆患者病情。因此，一个心理医生网上平台的需求就比较迫切。 为了解决上述问题，需要建立一个心理医生和患者之间的管理平台。通过该平台，患者可以及时对比查看各个医生的相关信息，也可以看到其他患者完成的对医生的评价，做出自己的选择。通过手机移动端直接进行预约就医，医生随时通过手机端看到预约信息，并接取用户预约，利用空档时间进行患者的诊断，或者在线即时回馈。在治疗完成后，患者可以对医生进行评价，方便之后的患者咨询就医时的参考。 项目实现的是心理医生云平台及移动端app系统，为医生和患者之间提供咨询就医的云平台及移动端的app，是心理医生业务信息管理中的一个重要环节，对心理医生开展业务，对患者快捷就医具有非常重要的理论意义和实际价值。项目分析设计过程采用软件工程方法 [ 1 ] ，面向对象分析设计过程建模 [ 2 ] ，使用UML作为建模工具 [ 3 ] 。"
"1) 医生注册信息时，为确保其身份的真实性，需要上传其资质证明图片，由平台方进行审核，通过后可以使用系统功能。 2) 医生根据自身情况安排，设定可被预约的时间，并发布到平台。 3) 患者可以查看医生就诊时间，选择医生进行预约，并支付预付款。 4) 患者也可以针对自身情况，对医生进行相关咨询。 5) 完成就医后，患者可以对医生进行服务评价，医生可以进行回复。 6) 医生可以查看历史记录，便于跟踪患者的病情历史情况。"
"业务参与者包括平台管理员、心理医生和患者。平台管理员是指整个平台系统的管理者。心理医生是指医生移动端app的使用者。患者是指患者移动端app的使用者。 可以使用业务用例图对整个系统进行业务分析建模 [ 4 ] ，见图1。 平台管理员负责系统基础数据管理，账号权限等系统管理，对心理医生进行身份认证审核管理等。心理医生和患者需要进行注册、登录等身份管理功能才能使用系统。心理医生可以发布预约信息，记录患者就医情况，查看患者病史，对患者的评价进行回复。患者可以选择医生并预约，支付预付款，完成就医后确认，对医生进行评价。医患双方可以查看就医的历史记录，查看就医统计信息。"
"对用例模型中的实体进行分析，明确实体之间的关系，确定了系统涉及的实体，包括： 平台管理员信息：用于存储平台管理员相关的数据信息，主要属性包括工号、姓名等信息。 心理医生信息：用于存储心理医生相关的数据信息，主要属性包括医生编号、姓名、年龄、资格证书图片等信息。 患者信息：用于存储患者相关的数据信息，主要属性包括患者编号、姓名、手机号码等信息。 账户信息：用于存储各用户的账户数据信息，主要属性包括账户号、密码、权限等信息。 权限信息：用于存储权限相关的数据信息，主要属性包括权限编号、权限值等信息。 审核记录：用于存储平台管理员审核医生的注册信息，主要属性包括编号、审核结果、审核日期、平台管理员、心理医生等信息。 预约信息：用于存储医患双方预约相关的信息，主要属性包括编号、心理医生、预约时间、发布时间、患者、预定时间、状态等信息。 付款类型：用于存储付款类别的信息，主要属性包括编号、名称。 图1. 系统业务用例图 预付款信息：用于存储患者预约后的预付款信息，主要属性包括预约信息、付款类型、金额、付款时间等信息。 疾病类型：用于存储就医记录的疾病类型信息，主要属性包括编号、名称。 就医记录：用于存储心理医生就医时对患者情况的记录，主要属性包括编号、心理医生、患者、疾病类型、记录内容、记录时间等信息。 确认信息：用于存储患者成功就医后对预约的确认信息，主要属性包括预约信息、确认时间等信息。 评价信息：用于存储预约结束后，医患双方评价的信息，主要属性包括预约信息、评价内容、评价分数、评价时间、回复内容、回复时间等信息。 使用分析类图对整个系统进行系统分析建模，见图2。"
"体系结构设计是软件设计的第一步，为满足系统平台软件和移动端手机app的开发，建立基于web api的n层体系结构设计 [ 5 ] 。 使用包图对系统进行系统体系结构设计，见图3。 图2. 系统分析类图 图3. 体系结构设计包图 Dal层实现对数据库的访问操作，Model层实现系统模型，Service层实现业务服务，Web Api [ 6 ] 层实现对外的服务，使用Json [ 7 ] 作为数据接口，Common层提供通用类服务，Web UI实现平台界面设计，App UI实现移动端app界面设计。"
"根据需求分析结果，结合软件体系结构设计，完成软件功能架构设计，见图4。"
"按照软件体系结构设计结果，结合软件功能架构，完成软件功能设计。 以就医预约用例为例，使用UML设计类图设计其软件功能，见图5。 1) 设计类 Appointment、Doctor、Patient类完成了预约功能的模型设计，为其他类提供数据模型。其中Appointment类为预约类，包含预约相关的信息内容，Doctor类和Patient类分别为医生类和患者类信息，设计类图中体现了模型中的标识(id)和模型之间的关系。 Appointment Dal类实现了预约功能中的数据访问，实现基础的数据库CRUD操作，提供了添加Add、修改Save、删除Remove、查询Query、查询全部Query All方法，为业务功能提供了数据访问服务。 Appointment Service类实现了具体的预约业务逻辑功能，包含发布预约Submit Appointment、预约Make Appointment、查询预约列表List Appointment、查询预约信息Get Appointment四个方法，为Web Api提供了底层业务服务。 Appointment VM是预约视图模型，进一步封装了Appointment、Doctor、Patient模型中的数据，为Web Api提供了数据接口。 Json Helper类实现视图模型类的序列化和反序列化，实现Json交互格式。 Appointment Web Api提供了对外的服务接口，由于采用Json作为数据传输格式，因此提供的服务也使用Json数据接口。 Appointment Views是平台Web端的页面，使用jquery访问Web Api提供的网络服务接口，通过解析Json完成数据视图展示。 Appointment App是移动端app的页面类，使用service访问Web Api提供的网络服务接口，完成对应的软件功能。 图4. 软件功能架构设计图 图5. 预约用例设计类图 2) 模型类之间的关系 Doctor类与Appointment类的关系是1：n，Patient类与Appointment类的关系是1：m。在设计类的属性时，要将类的关系体现，因此在Doctor和Patient类中定义List 属性，在Appointment类中定义Doctor和Patient属性。 在对应的数据表设计中，在Appointment表中增加Doctor和Patient类的主键做外键，如实现中采用EF框架 [ 8 ] ，则可以根据其关系自动建立数据库表及关系。"
"对软件界面进行设计并完成对应功能的测试用例，以预约功能为例，功能界面见图6。 测试用例主要是围绕选择不同月份，显示不同时间和对应时间段的是否选择展开。月份判断对闰年和非闰年中的12个月分别进行测试，保证日期时间正确。根据选择时间段是否被用户选中，判断能否正确的转入程序判断语句中，并给出对应的提示信息。 图6. 预约功能界面"
"本文运用面向对象的分析与设计方法，分析设计了一个心理医生云平台及移动端app系统。同类型项目多是围绕线上辅导或在线体检等功能展开具体业务，本课题则是采用医患双方使用移动端线上在线预约，患者预约后线下就医的模式，既可以充分利用医生资源，又为患者提供了便捷性，具有一定的理论意义和现实价值，为类似课题的分析设计过程提供了一些借鉴。"
