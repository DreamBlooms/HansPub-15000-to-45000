"在农田基本建设和农机作业中，作业面积是一个关键数据，在农机作业时尤为重要。为实时测量农田作业面积，提高测量效率和面积计算精度，设计了一种基于北斗的农田作业面积测量装置，并提出了一套根据作业区域形状而定的面积计算方法。装置以AT89S52作为主控制器，采用北斗接收模块UM220-Ⅲ作为定位模块，此外还包括按键，液晶显示屏，RS-232电缆等外围器件。使用者手持测量装置进行实时测量时，可根据不同情况选择相应的算法计算面积。在计算不规则作业面积时，提出了一种运算速度较快的面积计算方法，该方法可识别测量过程中产生的粗大误差，简化运算，减少程序冗杂。通过对测量装置进行的实验测试和分析，该装置能够测量任意形状农田的面积，相对测量误差在8%以内，并且测量面积愈大，测量的相对精度愈高。该装置可广泛运用于精细农业，很大程度上提高了测量农田作业面积的便利性。 关键词 :北斗定位系统，农田作业面积，精细农业，三角形分割法 Copyright © 2019 by author(s) and Hans Publishers Inc. This work is licensed under the Creative Commons Attribution International License (CC BY). http://creativecommons.org/licenses/by/4.0/"
"农业现代化是我国社会主义现代化建设的重要战略目标，其本质是农业的科学技术化，即以现代科技及其应用技术装备农业，从而推动我国农业由传统农业向现代农业转变。北斗作为中国自主研发的定位技术，近两年来在农业领域的应用开始普及。而农田面积是农业生产管理中最基础的数据之一。田块的大小直接决定了农药、种子、化肥等生产资料的投入量，也是农业机械进行田间作业计算工时和收费的主要依据。传统的农田作业面积大多都是靠人为估计或者人工使用米尺测量，但这种方法只适用于小面积矩形状田块，对于大面积且不规则的田块则费时费力、易出差错。由于国外GPS (Global Positioning System)定位系统早已成熟，农田信息管理与定位技术相结合已较为普及，国内对于该领域的研究虽然取得了一定的成果，但与国外相比仍存在一定的差距 [ 1 ] [ 2 ] 。 王海波等设计了农田作业面积测量系统，采用传感器测量收获装置行进的路程；赵金洲采用机械式测量面积，对车轮旋转周数进行计数并计算面积，给出了机械式的测量方法；浙江大学裘正军等开发基于GPS模块的农田面积测量系统；赵春江等设计了利用超声波测割幅的农田作业面积测量计价装置。但前人的算法大概采取两种方案：一是将不规则多边形进行人工修正，变为规则多边形进行运算。该方法时间周期较长，精确度也有待提高。二是在被测区域外选取一参考点，利用分割法计算面积。该方法虽然效率上得到了提高，但需要对分割的面积进行正负判断，也相对麻烦，且出错率也会相对提高 [ 3 ] 。 针对上述问题，本文设计的一种基于北斗的农田作业面积测量装置，能够实时测量各种形状的作业面积，并在显示屏上显示测量结果。对于一些不规则田块特别采用了改进的三角形面积分割算法，避免了在进行代数和累加的过程中进行正负判断，减少代码冗余，缩短了测量和计算的时间周期，同时也有利于提高测量精度。该测量装置对农业作业有直接的应用作用，对国民经济发展和该领域的研究工作有很大的推进作用。"
"测量装置硬件系统主要由AT89S52单片机、UM220-III北斗模块、电源模块、LCD1602液晶显示器、RS-232电缆、按键等部分组成。系统硬件结构图如图1所示。 图1. 测量装置系统结构图 AT89S52以其具有8 KB可重编程的FLASH存储器、结构简单、功能丰富、性价比高的优势，作为本系统的主控制器，采用7.2 V锂电池进行供电，定位模块接收卫星信号，并将定位信息通过RS-232串行口输出至通讯接口，通讯接口将RS-232电平的串行信号转换为TTL电平并输入单片机的串行口；单片机在程序的控制下对定位信息进行处理，接收键盘命令，将相应的运算结果存储到串行E 2 PROM存储器中并在液晶显示器上显示出来。  采用UM220-III/3-N的北斗模块，它具有并行64通道接收，这允许它们连续追踪每一颗卫星的信息。在双系统水平下其定位精度为2.5 m CEP (circular error probable)，在SBAS (Satellite-Based Augmentation System)水平下的定位精度为2.0 m CEP。可单北斗系统独立定位，也可双模联合定位；采用电压5 V供电，且自带电平转换，输出为RS-232电平。 采用点阵型LCD液晶显示屏LCD1602。该显示器是一种极低功耗显示器，它由若干个5 × 7或者5 × 11等点阵字符位组成，每个点阵字符位都可以显示一个字符，每位之间有一个点距的间隔，每行之间也有间隔，起到了字符间距和行间距的作用。 系统具体流程图如图2所示。"
"北斗作为中国自主研发的定位技术，近两年来在农业领域的应用开始普及。北斗导航及相关的遥感 图2. 测量装置系统流程图 技术作为我国有独立自主产权的高端技术，为精准农业在中国的发展提供了技术支持，它由3颗地球同步卫星、1个地面中心控制站、几十个分布在全国的参考标校站和北斗定位终端组成，可为我国及周边地区提供定位、授时和双方通信3个方面的服务。本研究采用麦宏科技推出的北斗接收机模块UM220-III/3-N，通过RS-232串行口以Unicore数据协议标准输出定位信息。Unicore数据协议是基于NAME (National Maring Electronics Association)协议标准而制定的。在本项目中，采用了推荐的$BDRMC语句格式。$BDRMC语句中包含了常用的北斗定位信息，如经度、纬度、速度、日期、时间、接收机状态等。该语句共由75字符组成，各个数据段在语句中的位置是固定的，如纬度数据位于字符串的第19至27字节，经度数据位于第31至40字节。读取相应区域的数据即可得到所需的定位信息，然后将经纬度字符串转换成数字，再进一步计算距离或面积 [ 4 ] 。"
"若被测农田为一边缘线平滑的规则多边形，如矩形，三角形等，测量人员可直接手持测量装置在区域顶点分别定位，每个顶点应至少进行10次有效的采集，将测量结果保存在存储器中。 设置静态过滤阈值S。采集时测量人员是静止不动的，但由于气候条件、周围建筑物以及磁场等因素干扰，返回的经纬度数据会产生漂移甚至失真，故需人为设置一个过滤阈值，以剔除采集数据时产生的粗大误差，使结果更加准确可信。设置时应考虑被测农田具体情况、精度要求、北斗模块参数设置等多方面因素确定阈值，以达到最优状态。具体方法是：开始测量前，选取一条已知的成直角状的路径进行多次测量，缓慢匀速行走，采集定位数据点，根据所采集到的数据点，观察其分布情况。测量人员应根据实时情况设置合理的过滤阈值。 对位置数据进行筛选和过滤。设连续测量起始点的位置数据15次，以此记为 D1 , D2 , ⋯ , D15 ，从D1开始对其余数据进行交叉比较，得到差值。当存在差值超过静态过滤阈值S时，则判断该数据为疑似粗大误差，怀疑值加一，当怀疑值超过有效测量次数的半数时，该点被判定为粗大误差点，将其剔除。依次循环比较直到最后一个位置数据与其他数据比较完，剔除掉所有的粗大误差点后，将剩余位置数据的算术平均值记为有效的多边形顶点定位值。 采集到所有顶点的准确位置信息后，即可根据该多边形面积计算的几何公式得到田块面积。  考虑到测量农田面积时，所围成的田块区域很多具有不规则性，上述几何公式法不再适用。下面介绍一种改进的三角形分割法测量面积。 设三角形AOB (如图3)，O为坐标原点，A点坐标为 ( X 1 , Y 1 ) ，B点坐标为 ( X 2 , Y 2 ) 。 图3. 边(线)两坐标点与原点O连接 故 | A O | = X 1 2 + Y 1 2 (1) | B O | = X 2 2 + Y 2 2 (2) 由勾股定理 | A B | = ( X 2 − X 1 ) 2 + ( Y 2 − Y 1 ) 2 (3) 经计算得三角形ABO的面积可由下式表示 [ 5 ] ： S Δ A B O = ± 0.5 ( X 1 Y 2 − X 2 Y 1 ) (4) 将公式(4)推广到多边形面积计算，多边形是由多条边围成，设多边形每条边的两端点分别与坐标原点连接(如图4)，形成多个三角形，多边形有几条边就有几个三角形，每条边都有一个三角形面积计算值，计算一个多边形面积实际上是连续计算多个三角形面积及其代数和的过程。 图4. 多边形分解为三角形 测量和计算步骤如下： 1) 确定参考点。将参考点选在被测区域内，为方便测量，测量人员就近往被测区域内部走1~2 m，将该点定为参考点。打开装置，采集多组该参考点的位置信息，对样本集中的数据进行过滤和筛选：首先使用格布拉斯准则判定粗大误差并予以剔除，再对剩余数据取平均值以抵消随机误差，得到最终的参考点坐标，设为 C ( x 0 , y 0 ) 。 2) 坐标转换。由于地球是一个椭球，为了精确计算距离或面积，一般采用投影的方式转换成平面坐标。在我国，对于大比例尺的地图通常采用高斯—克吕格投影进行转换，然而投影法计算十分复杂，难以在单片机中实现。为了简化计算，我们将地球视为正球体。由于农田测量中的距离较短，面积较小，通常小于1 km 2 ，因此由于简化带来的误差可忽略不计。取地球半径为6,371,116 m，则可转换成平面坐标： X = 2 π R x 360 (5) Y = 2 π R y 360 cos y (6) 式中：R为地球半径，X为经度/m，Y为纬度/m。 由于X、Y的数值较大，如果直接计算面积，会产生很大的计算误差。 3) 将参考点的坐标转化为平面坐标： X o c = 2 π R x 0 360 (7) Y o c = 2 π R y 0 360 cos y 0 (8) 4) 设置参考点平面坐标为相对坐标系的坐标原点，即 X 0 = 0 ， Y 0 = 0 。 5) 采集数据。人手持测量仪绕被测区域一周，结合测量人员的匀速行走速度，将接收机输出频度设置为2 Hz，使其每秒返回2组位置信息。采集完毕后，对数据进行过滤筛选。 6) 设置动态过滤阈值M。由于测量人员在采集数据时行走速度趋于匀速，故多边形每条边的边长应十分接近。设置动态测量的阈值，单片机依次算出各相邻两点的距离，与阈值M比较，筛选出粗大误差点并予以剔除。测量时根据测量点的具体情况，以及大气，周围建筑物的影响，规定动态阈值M为5 m。 7) 经筛选后的定位点则以上述相对偏移量形成新的坐标点，构成相对坐标系。 X i = X i − X 0 (9) Y i = Y i − Y 0 (10) 8) 该算法可进行随测随算，即只要确定了三个点，并判断三点定位值都准确无误后，可立即通过三角形面积计算公式(4)得出该分割块的面积。当测量人员绕待测区域走完一圈，三角形代数和运算也就结束。由于参考点为每个三角形的公共顶点，且在被测区域内部，故计算出来的三角形面积应皆为正值。则多边形面积公式可由公式(4)演变为： S 多 边 形 = 0.5 ∑ i = 1 n | X i Y i + 1 − X i + 1 Y i | (11) 9) 测量人员走完一圈，三角形面积累加完毕，多边形面积可当即计算出来并显示在液晶显示屏上。"
"为验证该算法的合理性，获得该测量装置的精度，我们选取了机械楼下足球场的中圈、矩形广场、以及自己划分的三角形区域这三处地方作为试验地点，测量其面积，以验证算法的可行性，得到相对误差。测量开始前，为减小环境误差，应在天气晴朗的情况下进行测量，到达测量地点前，应配置好北斗模块的输出语句，由于我们只需用到经纬度等信息，所以接收机只配置$BDGGA语句输出。测量时，手持测量仪，步行绕试验区域一周，尽量使速度缓慢且匀速。接收完成后，将数据移入Excel表格中进行处理，经过对数据进行筛选、剔除以及经纬度坐标的转换等根据上述算法计算出面积。计算完成后，人为测量出它们的实际面积，得到理论值。最后将直接测量值和定位测量值代入下式： δ = Δ L 100 % (12) 即可得到相对误差。 Table 1 区域形状 直接测量值(m 2 ) 定位测量值(m 2 ) 相对误差δ (%) 圆形 299.02 321.98 7.67 矩形 3102.00 2868.90 7.54 三角形 270.55 249.14 7.91 表1. 测量结果 定位输出经纬度经换算、米制换算得到的平面坐标如下图所示。 表1中，人工测量图形面积时存在许多随机误差及系统误差，因此应采取措施避免。为消除随机误差对结果的影响，每组图形的直接测量值应由不小于10次的重复测量值取平均值得到。为尽量减小系统误差，测量一种图形时应让同一个测量人员操作；尽量使用较高精度测量工具，事先研究好测量工具的系统误差，在数据处理时对结果进行修正，使其更加接近真值。实验结果表明：人工直接测量的面积值和北斗模块定位测量的面积值的相对误差都在10%以内，达到了预期效果，证明了算法的可行性。图5~7分别是根据采集到的矩形、圆形和三角形的定位数据所拟合的在平面坐标系下的多边形曲线。由拟合曲线图可看出，三角形的定位数据漂移较大，而矩形的定位数据则总体稳定。因此，在实验条件相同的情况下，待测面积愈大，定位精度愈高，测量结果也愈准确。 图5. 圆形区域定位点图 图6. 矩形区域定位点图 图7. 三角形区域定位点图  将本文提出的不规则多边形算法应用于测量江苏大学机械楼的占地面积中。地点在江苏大学机械楼，测量时，手持测量仪，步行绕机械楼进行测量，测量仪显示测量结果。每个测量点的经度和纬度数据存储在测量仪的E 2 PROM中，待测量完毕后通过串行口上传到计算机中。表2为测量装置对江苏大学机械楼进行5次测量的统计数据。 Table 2 测量次数(/次) 测量面积(m 2 ) 1 4080.102 2 3903.205 3 4023.894 4 4509.006 5 4709.877 表2. 机械楼的测量面积 将上表五个测量值取平均值得机械楼的面积大约为4245.3168 m 2 ，经人工测量机械楼的占地面积，得到机械楼的实际面积约为4021.6 m 2 ，得到机械楼面积的相对误差 δ 机 械 楼 为5.56%。"
"在精细农业生产管理中，农田面积的实时测量十分必需，传统的测量技术难以快速测量不规则形状农田的面积，不能满足精细农业的要求。本装置的研制为测量农田面积提供了一种新的方法，其主要特点是采用我国自主研发的北斗定位系统进行定位。不同于前人的是，该装置可根据待测农田形状是否规则而选择不同的算法，以提高测量速度。并且在计算不规则多边形区域面积时，打破将参考点选取在待测区域外的常规，将参考点选在区域内部，简化算法步骤，减少程序冗杂，提高计算速度，随走随测，走完即得结果，其精度在8%以内，达到最初预期。且价格便宜，易于实现。与传统的手工测量手段相比，利用北斗卫星系统定位进行面积测量有着巨大的优势：测量精度高、操作简便、全天候操作、信息自动接收、存储，减少繁琐的中间处理环节。不仅可以大大减少人力强度、节省费用，而且大大提高工作效率，测一个控制点只需几分钟。这是实现用现代科技及其应用技术装备农业，从而推动我国农业由传统农业向现代农业转变的一小步。"
