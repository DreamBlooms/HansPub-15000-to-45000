"本高速扫描振镜是激光加工装备的核心器件，振镜在高速运行中其控制系统的控制性能受到线性与非线性等多种因素的影响，其影响因素较为复杂且具有多变性，因此高速扫描振镜控制性能的研究较少，致使激光加工精度与稳定性研究受到影响。本文针对扫描式激光振镜打标系统平台，首先基于电机平衡方程与Stribeck摩擦模型建立了带摩擦的振镜电机动力学数学模型，其次在电机模型基础上添加电流环、速度环、位置环三环PID控制并采用负反馈构建振镜控制系统Simulink仿真模型。应用仿真模型对打标圆进行仿真。通过仿真结果和实验结果对比显示，仿真圆度误差与实验结果在误差大小和变化规律上都有较高的重合性，可以说明此振镜控制仿真模型与实际振镜控制系统匹配度较好，其控制性能与实际振镜十分一致，一定程度上可代替实际振镜控制系统来进行研究，为高速扫描式振镜控制系统的控制性能研究提供了新的思路。 关键词 :激光加工，振镜控制性能，Simulink仿真模型 Copyright © 2020 by author(s) and Hans Publishers Inc. This work is licensed under the Creative Commons Attribution International License (CC BY 4.0). http://creativecommons.org/licenses/by/4.0/"
"激光加工在工业领域中的应用日趋广泛，激光扫描器已经在各类加工任务中被广泛使用。其中振镜式激光扫描具有扫描范围大、转动惯量小、固有频率高、响应速度块、扫描精度高的特点，应用最为广泛且发展前景好 [ 1 ]。目前，国内振镜的应用越来越多，而相应的振镜电机的开发与控制性能研究却较为匮乏。 国外对振镜的研究相对较早，已形成了较成熟的商业应用，对振镜的研究也趋于完善。德国 SCANLAB振镜质量最佳、速度最快、性能最为稳定，应用于不同领域的振镜扫描头多达10个系列，且产品的更新迭代频率高，技术最为先进。目前国外生产的数字振镜在性能上已比传统的模型振镜有了大幅提升。国内对振镜的研究起步较晚，目前市场上的应用多采用国外的优秀振镜。国内对振镜的研究多放在应用扩展上，如振镜与CCD相机结合实现光学元件表面损伤检测 [ 2 ]；将扫描振镜应用于激光微焊接 [ 3 ] 等，其重点都不在于对振镜的控制，而只是作为应用工具来实现应用的目的。对现有的振镜研究总结发现目前存在一些问题 [ 4 ] [ 5 ]：(1) 在大多研究中研究者只通过阶跃响应匹配来反映电机的控制效果，且多是只对单轴电机进行研究，而未通过双轴电机扫描轨迹来展示。(2) 未将电机的运动控制和振镜扫描轨迹控制结合起来研究其控制性能。 本文中将对某国产振镜进行研究，通过建立电机运动学数学模型和三环控制系统构建了双轴扫描振镜控制系统Simulink仿真模型 [ 6 ]，对振镜控制系统的控制性能进行研究。通过仿真结果与实验结果进行对比验证。最终得出结论，本文所提出的振镜控制仿真模型具有较高的可靠性和准确性，对于振镜电机的开发与提高振镜系统控制性能研究提供了新的理论基础和研究思路。"
"振镜电机的执行部分主要包括电机定、转子和镜片，是振镜控制系统的主要控制部分。本文中振镜电机为动磁式结构，X、Y轴电机分别带动不同的反射镜片，镜片直接与转子轴相连。 此动磁式振镜电机的镜片和永磁体的转子轴相连，定子为绕组线圈。X、Y轴电机只有镜片大小不同，内部结构基本完全相同，所以此处以单轴电机为例介绍电机的模型建立。 电机的电磁平衡方程 v f = R f i f + L f d i f d t + v b # (1) 电机的电磁机械平衡方程 J m d ω d t = T m − T L − b m ω # (2) 电机的电磁转矩 T m = k a i f # (3) 反电动势 v b = k e ω # (4) 将式(1)、(2)经拉普拉斯转换，按照输出线性叠加，输出的 ω 等于输入 v f 和负载 T L 叠加之和，得出关于电机的开环结构如图1所示，输入为电压 v f ，角速度 ω 后加上一个积分项输出转换为偏转角 θ 图1. 电机开环结构图  二维扫描振镜中各有两个电机控制驱动器，分别控制X、Y轴电机运动。控制器接收指令信号，控制电机运动，再由位置传感器生成反馈位置信号从而形成完整的闭环控制结构。 本文中控制系统仿真模型采用负反馈控制来建立闭环伺服控制系统，单轴控制器结构图如图2所示。 图2展示了控制系统的三环控制系统 [ 7 ]，包括电流、速度、位置，依次从内向外组成控制结构。 根据三环控制结构和电机简化模型得出单轴振镜电机控制系统简化模型 [ 8 ]，如图3所示。 图2. 电机控制器结构图 图3. 振镜电机控制系统结构图 输出量即被控量需要被检测并转换为与输入信号相同类型的电压信号才能形成有效的闭环负反馈控制系统，因此在控制系统里添加两个参数，电流采样系数和角度–电压系数。  机械系统中的摩擦因素是不可避免的，而以往的较多振镜研究中，摩擦往往被忽略。在高精运动控制中，摩擦是很重要的影响因素。本文考虑到摩擦的复杂性与非线性，采用Stribeck摩擦模型 [ 9 ] [ 10 ]，此模型在许多应用中都非常有效，且摩擦与角速度相关。 为方便研究，将摩擦模型简化如下 F f = F c sgn ( ω ) + k v ω # (5) 因为摩擦力的大小与角速度相关，且对电机的驱动力矩有影响，所以将摩擦模型添加到电机控制系统模型的速度环中，如图4所示为带摩擦模型的Simulink控制仿真模型。 在实际的二维扫描振镜中，X、Y轴电机的摩擦模型参数是不同的，本文中分别选取 F f X = 0.004 sgn ( ω ) + 0.006 ω ， F f Y = 0.006 sgn ( ω ) + 0.009 ω 。  将单轴振镜电机动力学仿真控制模型拓展到双轴，就得到二维扫描振镜控制系统Simulink仿真模型，如图5所示，其中单轴电机模型如图5所示。"
"激光打标系统作为振镜最基础也最简单的应用，其各方面的研究已十分常见，打标过程也即扫描振镜的控制过程，因此本文将以打标效果来反映振镜控制性能。常见的打标运动有直线和圆运动，其中圆打标运动是个封闭的轨迹，且因其圆半径在各个方向上都相同，所以能很直观的反映振镜的精密控制性能。本文将对打标系统的圆运动来进行实验与仿真来研究振镜控制系统控制性能研究。 图4. 振镜控制系统Simulink仿真模型 图5. 二维振镜Simulink控制仿真模型  为了更好地对圆打标加工效果进行判断常常会对打标圆的圆度误差进行分析，通常将圆度误差图放大来分析研究 [ 11 ]。要想得到圆度误差图，圆的轮廓轨迹坐标是必需的。为获取打标圆轨迹坐标，本文采用基于CCD相机的机器视觉检测方法来检测打标圆的外轮廓，从而得到轮廓轨迹坐标。机器视觉检测有着非接触、高精度、实时性等优点 [ 12 ]，在各个领域有着广泛的应用。 首先要搭建视觉检测实验平台，由于打标平面是水平面，故将相机垂直放置。在确定相机焦距和视场大小后，将相机在垂直方向固定，同时将视觉检测需要的光源找准打光位置一同固定。 本文使用的是天策激光打标机，打标软件为Ezcad。获取圆度误差的具体步骤如下： 1. 分别在打标铝片上以顺时针和逆时针方向打标半径为10 mm的圆轨迹(国内振镜常见打标速度为2000 mm/s)； 2. 将铝片放置到相机视场内，调好焦后对圆轨迹进行拍照； 3. 将照片经过OpenCV软件处理，找到轮廓轨迹； 4. 输出轨迹坐标，通过MATLAB软件进行数学处理，得到轨迹圆的圆心和半径，并求出圆度误差图。  为了完善仿真系统，需要获取仿真系统中的参数。其中振镜电机控制系统的部分参数可直接测量得出，如电阻、电感等，而有些参数必须借由间接方法测得：等效转动惯量与阻尼由最小二乘法辨识得到 [ 13 ]；转矩常数与电流采样系数由力学原理搭建测量平台间接测得；反电动势通过获取稳定的转子角速度间接得到 [ 14 ]；电压–角度系数则由光路几何原理搭建测量平台测得 [ 15 ]。最终测得的参数数据如表1所示。 Table 1 参数名称 值(X轴/Y轴) 定子线圈电阻R f 2.78 Ω 定子线圈电感L f 150 μH 转矩常数k a 0.0075 Nm/A 等效转动惯量J m 1.5 × 10 −7 /1 × 10 −7 Kg∙m 2 等效阻尼b m 1.54 × 10 −4 /1.5 × 10 −4 N∙m∙ (rad/s) −1 电流采样系数 0.5386 V/A 反电动势系数k e 0.0078/0.008 V/(rad/s) 表1. 振镜电机参数"
"论上文中已将振镜电机控制系统仿真模型建立完毕，各项参数也都得到。接下来将利用Simulink仿真模型对打标圆运动进行打标仿真，打标依然为半径为10 mm的圆，打标速度为2000 mm/s。 将指令电压信号经MATLAB数学处理分别以顺逆时针方向输入到二维振镜控制系统Simulink仿真模型中，得到输出的位置反馈电压。为了得到打标仿真圆轨迹，需要将反馈电压信号转化为位置坐标信号，之后将电压值转换为电机偏转角度，再由偏转角与打标位置的几何关系得出最终的仿真圆轨迹坐标。 二维振镜扫描系统中激光束的偏转与打标平面上光束的位置关系可由图6所表示。 图6中，X、Y振镜电机轴垂直相距为 ，Y轴电机轴距打标目标平面为 ，初始状态，双轴电压为0，偏转角均为0.激光束在目标平面点原点处。当电机偏转时，有激光束的路径得出激光轨迹坐标与电机偏转角度的关系如下： { x = d t a n 2 θ Y y = ( d 2 + y 2 + e ) tan 2 θ X (6) 其中距离单位为mm，角度为rad。 = 254 mm，e = 19 mm。 图6. 激光束电路图 角度与电压的关系由角度–电压系数k p 来表示：偏转角度与输出反馈电压的比值。其值已经测得为0.4545V/°。 k p = V p θ # (7) 由式(6)和式(7)可将电压值转换为圆轨迹坐标值，经MATLAB软件数学处理后得出仿真圆与圆度误差。 最终得到实验打标圆圆度误差与仿真圆圆度误差，较为直观的表现仿真模型匹配效果，如图7所示。 图7. 圆度误差对比图 图中红色轨迹即为仿真圆的圆度误差，蓝色轨迹为打标实验圆度误差，其误差单位为mm。 由图7可知仿真圆的圆度误差与实际打标圆的圆度误差重合度较好，其重合偏差最大处仅有7 μm左右。仿真结果在顺时针与逆时针方向上各象限交界处其圆轨迹呈现出明显凹凸变化，其误差最大有20 μm。 这一变化称之为过象限误差，是由于双轴电机在高速运行时由于响应速度的快慢而造成的动态误差，其误差大小决定了振镜控制系统控制性能的好坏。 本文添加了非线性摩擦这一动态误差的影响因素，经过仿真得到的过象限误差规律与实际加工所得基本一致。仿真与实验结果对比表明：在振镜系统高速运行过程中，打标结果所表现出的过象限性误差规律已很好的体现在本文所建立的控制模型中。在实际加工生产中要减小过象限误差，提高控制系统精度，可先对本文所提供的控制模型进行研究改进，根据改进后的仿真结果将相应的改进应用到实际控制系统中，并可对动态误差的各类主要影响因素进行单独研究为不同类型的振镜控制系统研究提供了方便。"
"本文所提出的振镜电机控制系统仿真模型在建立时获得了较为完整的电机参数，并加入了非线性的摩擦模型，建立了完善的Simulink仿真模型。通过实验验证，仿真圆度误差与实际打标圆度误差重合度较好，其过象限误差变化规律也基本一致。但在电机控制系统参数测量时由于测量条件与方法，参数数据会有偏差，总体来说，此振镜电机控制系统仿真模型具有较好的准确性，在一定程度上可代替实际振镜控制系统进行研究，对于振镜电机的开发与高速扫描振镜控制系统的控制性能研究提供了一条可行的研究思路。"
