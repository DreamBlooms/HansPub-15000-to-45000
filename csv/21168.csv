"本文采用电流分配网络(CDN)和电流控制电流传输器(CCCII)实现了数字可编程电流传输器(DPCCCII)，与传统的电流控制电流传输器相比，该器件可通过编码的方式来改变CCCII中的寄生电阻(Rx)，从而可以实现数字可编程的功能。本文采用DPCCCII为有源器件实现了一种多功能的数字可编程滤波器电路，并对该滤波器进行了非理想分析以及蒙特卡洛分析。PSPICE的仿真结果验证了该电路的可行性和正确性。 关键词 :电流控制传输器，数字可编程，电流模式，滤波器 Copyright © 2017 by authors and Hans Publishers Inc. This work is licensed under the Creative Commons Attribution International License (CC BY). http://creativecommons.org/licenses/by/4.0/"
"跟电压模式电路相比，电流模式电路因具有宽频带、动态范围大、高频性能好、非线性失真小、工作电压低等优点而成为国内外学术界研究的热点课题 [ 1 ] - [ 10 ] 。电流模式滤波器已成为一个引人注目的研究方向，并在通信电路中得到了广泛地应用 [ 7 ] 。此外，数字可编程在许多应用中有至关重要的作用，它能补偿一些由干扰参数引起的不必要的误差。例如，滤波器的转折频率会随温度的变化而变化，这时就可通过数字可编程来选择合适的转折频率来减少温度对其的影响 [ 11 ] [ 12 ] 。 随着集成电路技术的发展，以电流为传输变量的电流模式电路相继出现。大量的电流模式电路，如电流模式滤波器、电流模式正弦波振荡器、电流模式模拟乘/除法器相继出现 [ 13 ] [ 14 ] [ 15 ] 。文献 [ 1 ] 中提出了可调谐电流模式高频正弦波振荡器，通过该变电流控制电流传输器的偏置电流以及电容值来改变振荡器的振荡频率，该振荡器具有频率高、功耗低、电路简单等优点。不足之处是调谐的频率范围比较窄。文献 [ 8 ] 中提出了一种电流模式带通滤波器，该电路工作电压仅为1.2 V，具有低功耗的优点。文献 [ 9 ] 中提出了一种新的电流模式数字可编程多功能滤波器以及一种可编程正交振荡器，该电路通过R/2R阶梯电阻网络来实现数字可编程，能通过数字编程控制滤波器的中心频率及振荡器起振时间和振荡频率，但该电路需要多个电阻来实现R/2R阶梯电阻网络，不易于集成。 针对以上存在的一些问题，本文提出了一种数字可编程电流控制电流传输器，该器件具有无需外接电阻，便于集成，工作电压比较低、功耗小等优点。此外，本文基于该器件实现了一种通用的数字可编程滤波器，并对该滤波器进行了PSPICE仿真，分析了温度对该电路的影响，仿真结果验证了数字可编程滤波器的可行性与正确性。"
"电流分配网络是一种可以通过编程来改变输出电流大小的电路结构，它的输入电流可以通过二进制加权流向不同的分支，然后将这些分支汇合得到输出电流，从而可以通过编码的方式来改变输出电流，该电流分配网络的电路符号和内部实现电路如图1(a)和(b)所示，电路中CMOS管的宽长比均为20 um/0.18 um。 对该电路进行分析后，得到输出电流I out 的表达式为： (1) 图1. CDN的电路符号及实现电路；(a) 电路符号；(b) 电流分配网络(CDN)内部实现电路 其中， 表示分流比，d i 表示第i个数字位。  本文设计了一种数字可编程电流控制电流传输器，该器件是由电流分配网络(CDN)与电流控制电流传输器(CCCII)组成，该器件的电路符号和内部实现电路如图2(a)和(b)所示。电路中CMOS管沟道宽长比如表1。 该电路的理想输出端口特性为： ， ， (2) 式(2)中：I Z + 为同相输出，I Z - 为反相输出，R X 为DPCCCII器件X端口的寄生电阻。 假设图2(b)中CMOS管均工作于饱和区，则根据CMOS管工作于饱和区的特性表达式，可得到其漏极电流I D 的表达式为： (3) 式(2)中， 表示跨导系数，W和L分别为CMOS管的沟道宽度和长度，V GS 为CMOS管的栅源电压，V TH 为阈值电压。 分析该电路可知，M 1 ~M 4 构成跨导线性环，且 ，根据跨导线性原理，可得： (4) (5) 图2. DPCCCII的电路符号及实现电路；(a) 电路符号；(b) 数字可编程电流控制电流传输器(DPCCCII)的内部实现电路 Table 1 CMOS管 沟道宽长比(um) M1~M2 60/0.18 M3~M4 90/0.18 M5~M6 20/0.18 M7~M11 28/0.18 M12~M14 8/0.18 M15~M19 25/0.18 表1. CMOS管的宽长比 由式(3)~ (5)可得： (6) 式中，k p 和k n 分别为PMOS和NMOS的跨导系数，W i /L i 表示第i个CMOS管的沟道宽长比。 当选择适当的CMOS管沟道宽长比时，即 ， (7) 将式(7)代入式(6)，对方程式进行变形化简，则可得到该电路的X端寄生电阻为： (8) 由式(8)可知，DPCCCII电路的X端寄生电阻与 的平方根成反比关系，即可通过编码的方式来调节寄生电阻R X 。"
"提出的通用滤波器的方框图如图3所示，其中K 1 、K 2 为反馈通道的反馈系数，G 0 为正向通道增益系数，根据Mason法则可得出该电路的传输函数为： (9) (10) (11) (12) 其中， (13) 由式(13)可知，G 0 为增益，即 ，所以该式在S域的左半平面有2个共轭极点，能实现滤波功能。由(9)、(10)和(11)式可知，该三个端口可分别实现高通、低通以及带通的滤波功能。由式(12)可以看出I HP 与I LP 相减可实现带阻滤波器。 根据图3的方框图，采用DPCCCII为有源器件实现通用滤波器如图4所示，该电路结构简单，仅包含3个有源器件、两个接地电容和一个接地电阻。其中I in 为电流输入端口，I HP 、I LP 、I BP 、I BR 为电流输 图3. 通用滤波器的方框图 图4. 基于DPCCCII的数字可编程通用滤波器的实现电路 出端口。C 1 和DPCCCII(2)、C 2 和DPCCCII(3)分别构成电流积分器，对应的时间常数分别为 ， 。反馈系数分别为 ， ，增益 。将时间常数、反馈系数以及增益的表达式代入(3)~(7)可求出输出端口的传输函数： (14) (15) (16) (17) (18) 其中， (19) 根据该电路的传输函数可知，通用滤波器的极点频率和品质因素为： (20) (21) 由式(20)、(21)可以看出，通用滤波器的极点频率和品质因素都与DPCCCII的偏置电流有关，因此，通过编码的方式可改变该滤波器的极点频率和品质因素。"
"根据 ，由式(20)、(21)可求出极点频率和品质因素对电路中的有源和无源元件的灵敏度： ， 。显然，该电路具有很低的有源和无源灵敏度。 当考虑DPCCCII的非理性因素时，其端口特性可表示为： ， ， ， (22) 式中： ， 分别表示DPCCCII器件内部电压和电流的传输函数，通过对图2(b)的电路进行仿真分析，当 时，改变其编码数，多次仿真可得到 ， ， ， 。利用式(22)对图4的电路重新分析可得到： (23) 从而可以计算出： (24) (25) 从式(24)中可以看出，当电路的工作频率远远小于 和 时，这些误差很小，可以忽略。"
"为了验证该电路的可行性，对提出的电路进行了仿真分析，仿真时DPCCCII采用图2(b)所示内部电路，图中COMS采用0.18 um TSMC的工艺参数，电源电压为±1.65 V。编码从0000~1111，从而偏置电流的可调范围为300 uA~1200 uA，电容值为 且 ，得到中心频率的范围是585 KHz~1.04 MHz，以第三个DPCCCII为编码的参数，可得到各个功能的滤波器的仿真结果如图5所示。 图5. 数字可编程通用滤波器的仿真结果图；(a) 带通；(b) 低通；(c) 高通；(d) 带阻  为了检测温度对电路的影响，本文对该电路进行了温度分析。在进行温度分析时，设置温度分别为20℃、30℃、40℃、50℃，固定编码数为1111，再对电路进行PSPICE仿真，仿真结果如图6(a)~(d)所示。  为了检测电路中无源器件的参数容差对电路的影响，需对该电路进行蒙特卡洛(MC)分析。由式(20)~(21)可知，电容C 1 、C 2 与滤波器的截止频率及品质因素相关，而电阻R还与增益有关，因此可对电容C 1 、C 2 、R进行蒙特卡洛分析。假设电容C 1 、C 2 的容差值为5%，电阻R的容差值为5%，参数的变化规律为遵循Gauss分布，分析次数设置为50次。得到MC分析结果如图7(a)~(d)所示。"
"本文采用DPCCCII为有源器件设计出一种多功能数字可编程电流模式的滤波器，并用PSPICE仿真分析，结果表明提出的电路正确有效。考虑到电路中的参数对其电路的影响，分析了该滤波器的非理想分析以及蒙特卡洛分析，并得到了蒙特卡洛分析结果图。本文设计的多功能可编程滤波器具有数模混合 图6. 温度对数字可编程通用滤波器的影响(“ ”代表20℃，“ ”代表30℃，“ ”代表40℃，“ ”代表50℃)；(a) 带阻；(b) 高通；(c) 低通；(d) 带通 图7. MC分析结果图；(a) 带阻；(b) 高通；(c) 低通；(d) 带通 的优点，同时能实现四个功能的滤波器，该电路可通过4位控制字来控制这四种滤波器的截止频率和品质因素。此外，该电路与同类滤波器相比，该电路结构简单，仅用三个DPCCCII和两个电容以及一个电阻，易于集成。"
