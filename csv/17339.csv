"作为第三代海浪模式的典型代表，WAVEWATCHIII (WWIII)应用广泛，被诸多海洋部门用作预报模式，其版本已于2014年更新至4.18版。新的版本中添加了诸多过程，且安装方案更为细致，对于海洋波浪要素的分析也更为具体。本文简要阐述了WWIII v4.18和v3.14的不同点，同时以建立v4.18的版本模型，计算2015年8月份的一次海浪过程。 关键词 :WWIII，4.18版本，海浪模式"
"我国滨临太平洋，有逾300万平方公里的海上疆域和1.8万余公里的海岸线，所属海区地处中低纬度带，该区域台风活动频繁，台风巨浪对东南沿岸的经济、军事等领域影响甚巨。对于海浪的研究和模拟，多以经验统计或动力等方案为主，随着计算机的出现，数值模拟成了解决这一问题的有力手段。WAM模式的诞生标志着第三代海浪模式的出现，此后，海浪的模拟和研究多以第三代海浪模式为主要参考。 随着计算方案和物理过程的不断更新，以WAM、WW-III和SWAN为代表的第三代海浪模式也不断发展，作为较为成熟的海浪计算和预报手段，WW-III应用广泛 [ 1 ] - [ 5 ] 。其稳定性及预报能力已经获得了广泛的认可，并广泛的应用于大浪生成传播 [ 5 ] - [ 7 ] 、波浪能资源评估 [ 8 ] 等方面。WW-III的优越的性能能为我国的“21世纪海上丝绸之路”战略的推进、拓展海上活动范围和提升远海保障能力提供支撑和参考 [ 9 ] 。"
"作为第三代海浪模式的代表，WW-III从波作用量出发，模式综合考虑了地形、海流、海气温差、波浪浅水形变等多种要素，其基本方程 [ 10 ] 如下： (1) 式中 为波作用的密度谱， 为输入源函数， 表示时间， 为水平拉普拉斯算子， 为波数， 为波向， 为圆频率， 为波包群速， 为环境流速， 为水深， 与波向同向， 与 垂直，方程与v3.14 版本的基本不变，式中正体为矢量，算子“ ”表示 。较为不同的是方程(1)中第四式与 v3.14版本在等式右端中括号内符号相反，在3.14 [ 11 ] 中，该项等式为： (2) 该处的推导过程如下： (3) 对流场考虑不可压近似，同时将考虑 以及 关系式： (4) 展开可得： (5) 式(5)可以化为： (6) 式中 ，同时考虑 ， ， 为波数的方向角， ： (7) 将式(6)、(7)代入式(3)第二式： (8) 此时，等式两边同时乘以 或者 ，即可得到式(1)的第三、四式。 此外，在v3.14中，源函数的输入项为： (9) 在v4.18当中，相较于(9)，源函数的输入项为： (10) 式(10)相较于式(9)多出了 与 两项，两项分别涉及海冰和近岸及冰山对海浪的作用。 此外，相较于3.14版本，v4.18许多过程都有了改进，这些改进使得海浪的分析更为具体，海底和海气及表层对海浪的影响也更为直观，同时，尤为值得注意的是，v4.18版本增加了潮汐分析的过程，这将有利于风暴潮的研究。"
"相较于3.14 [ 11 ] 等早期版本，v4.18 [ 10 ] 不仅提供了传统的安装方式，还提供了更为流行的svn安装手段 [ 12 ] ，相较于v3.14，新版WWIII在安装上显得更为人性化，同时也有利于使用者对版本进行更新。  在3.14版本中，外强迫场输入一般采用十进制文件的形式，同时在inp文件中配置网格、时间步长等信息，inp文件中还含有对外强迫场的输入文件的描述信息；此外，文件的输入和配置一般是比较让人头疼的，而在新版本当中，对于输入的强迫场数据形式增加netcdf的选项，同时在WWIII编译的过程当中提供了NetCDF的编译选项，下面，我们将介绍这一新增的数据输入方案。 WWIII所支持的NetCDF版本包括NetCDF version 3.x及4.x两个系列，在模式当中分别被简写成NC3和NC4，在编译前，使用者所要做的是设置一个描述型的环境变量WWATCH3_NETCDF，其值为WWATCH3_NETCDF=NC3或者NC4。当选取NC3时，在环境变量当中需要包含NETCDF_LIBDIR和NETCDF_INCDIR这两个变量，两个变量的值分别对应NetCDF-3的libraries和include的位置；当选取NC4时，NETCDF_CONFIG为所需设置的环境变量，该信息对应NetCDF-4的“nc-config utility program”路径信息。 在此基础之上，模式编译完成后的数据接口便是基于NetCDF数据格式的。相较于3.14版而言，v4.18增加了NetCDF数据输出的选项，这一功能为数据发布和共享以及耦合接口等的编辑提供了一个较为便捷的处理方式。 WWIII提供NetCDF接口功能的位置包括ww3_bound边界处理程序，其inp文件名称为ww3_bound.inp，在inp文件当中边界文件可以写为SPECTRA_NC/ww3.62163_spec.nc，这一处理过程在v4.18当中可以独立处理。 改动较大的是强迫场的输入，在v3.14当中，输入文件处理程序为ww3_prep，这一处理程序在v4.18被保留下来，同时，增加了含有相同功能的ww3_prnc处理程序。其inp文件对于变量的描述也较为简洁，例如：文件当中需要描述维度名称信息，如longitude和latitude，对于所需变量也需进行描述；当所需的是文件当中的风矢量时，只需给出对应在NetCDF当中的名称，如U及V；最后只需给出文件的名称，如“wind.nc”即可。 对于输出文件的处理，v4.18增加了与ww3_outf功能相似的输出为NetCDF格式的ww3_ounf处理程序，及ww3_ounp处理程序。程序及数据流程见图1。 V4.18在模式输出的变量种类上也较v3.14丰富，v3.14的输出变量包含：波高、平均波长(周期/波向)等海浪信息，而v4.18的输出则包含有上述信息，同时还对涌浪、平均波周期进行了更为细致的划分，此外还包含能流、风能输入、白冠破碎、波浪辐射应力、斯托克斯输运等信息，这些信息对于海浪分析和工程应用有着重要的意义。 图1. 基本过程及数据流  在早期版本中，网格的设置采用编译和ww3_grid.inp相结合的方式，当在switch当中选择LLG时，则采用经纬度网格坐标；而在v4.18中，这一处理过程被从switch当中移出，改在ww3_grid.inp进行设置，设置选项包括RECT(正交)和CURV(曲线)两种网格，其中还存在经纬网格和笛卡尔网格的调整，此外，还在设置当中加入了闭合条件。 同时，新版WWIII提供了多种方案，在传播方案中增加了二阶和三阶方案；在通量计算中增加了新的拖曳系数计算方案，其计算公式如式(11)： (11) 对于输入和耗散项的处理，v4.18提供了ST4 (Ardhuin et al. (2010) source term package)和ST6 (BYDRZ source term package)两种方案，对于非线性相互作用的过程则提供了广义多步DIA算法，选项对应于NL3。底摩擦项则增加了SHOWEX bottom friction formulation等处理方案，较原来的处理过程更为丰富。 模式还新增了海冰对海浪的影响，在switch当中增加了海冰过程选项，及折射选项，这些选项的加入使得WWIII对于近岸的海浪折射现象和海冰对海浪影响等物理过程的描述更为细致。新增的switch选项还包括TIDE(潮汐)的相关选项。"
"在此，我们利用4.18版本建立经纬度范围为(100˚E~140˚E, 0˚~40˚N)的中国近海区域，网格采用正交经纬度网格，模拟区域地形数据采用Etopo5地形，地形如图2所示。模拟区域包含渤海、黄海、东海、南海及西太平洋海区部分海区，模拟区域内ETOPO5识别最大水深为9383 m，平均水深为2695 m左右。模拟区域模式空间分辨率为0.25˚，可以较好的反映模拟区域的地形特点。 模式所采用的风场为欧洲中心高分辨率风场，其空间分辨率为0.25˚，时间分辨率为6小时，所选取时间段为 2015 年 8 月 14 日 08 时 至26日02时(北京时)，该时段为台风“天鹅”的活动期，时间步长分别设为900 s、950 s、900 s、300 s。其余设置采用基本设置。 台风“天鹅”：台风“天鹅”为2015年第15号台风， 8 月 12 日 于西太平洋低纬海区生成的热带扰动，于14日发展成热带低压，15日17时在马里亚纳群岛附近加强为热带风暴，并被命名为“天鹅”。台风“天鹅”经历了三次增强和三次减弱，三次增强的时间分别为17日、19日、23日，且三次均达到超强台风级。台风路径也较为异常：21日移向右偏近90˚，台风后期，在高纬区域路径发生较为少见的西折现象。本次台风过程，沿海区域降水较为显著，例如：台风“天鹅”影响期间，上海嘉定曾录得日降水量170.1 mm，小时雨强则达58.2 mm，其大风对于近岸风浪影响较为显著，是今年来较为少见的台风。  本文的对比数据采用多卫星融合资料的有效波高数据，数据来源于AVISO (Archiving Validation and Interpretation of Satellite Oceanographic data)的有效波高资料，该资料利用Loess滤波方案和空间平滑外插得到1˚ × 1˚的全球海浪每日一次的有效波高数据，资料下载地址： http://www.aviso.oceanobs.com/en/data/products/wind-waves-products/mswhmwind/index.html。周水华等利用该资料分析对比浮标站资料发现，该资料精度与浮标站资料相当 [ 13 ] 。 由于AVISO资料空间分辨率较低，有些区域资料缺失，在此，我们将21日至23日有效波高分布绘制如图3 (图中黑色实线为4 m波高线)： 图2. 模拟区域地形 图3. 实况有效波高与模拟有效波高对比(左侧为实况，右侧为模拟) 在这里，我们将模式输出的数据采用逐日平均与AVISO数据进行比对，从图3可以看到，本次模拟基本还原了模拟区域的台风浪过程。由于AVISO数据来自多星融合，且时空分辨率存在优化，所以该数据所反映的实况可以反映当天海浪的分布状态，由于卫星轨道及分辨率等问题，AVISO数据无法完整还原海浪过程，这点我们从图3当中的陆点数据可以看出。在20日08时，台风抵近巴士海峡，南海西南部地区受西南季风影响，有明显大浪区生成；此后，受西南季风和台风抽吸作用，南海南部风浪逐渐加大和台风涌的传入，南海海区海浪逐渐增大；至23日08时，南海西北部海区海浪逐渐减小，南海海区海浪回落，东南部受季风影响依然维持一个较强的海浪场。"
"相较于WWIII v3.14，v4.18考虑了更为详尽的物理过程，在模式控制方程上，修改了存在于手册上的一个错误，同时，简化了初始网格生成的编译和设置问题，将曲线网格引入模式当中。在数据接口和输出上，采用了气象海洋上较为常用的NetCDF格式，并支持多种格式输出。在处理涉及海浪的物理过程上，增加了海冰过程和反射作用等涉及高纬海区和近岸的物理过程，考虑更为详尽，输出的参数更为详细。在未来的研究中，可将先进海浪模式应用于“21世纪海上丝路”建设 [ 14 ] - [ 18 ] 、南海岛礁建设 [ 19 ] - [ 21 ] 等，为迈向深蓝、人类的共同繁荣进步作贡献。"
