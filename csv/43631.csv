"X射线成像可以获得待测物体内部清晰的组织结构，但是X射线无法对物体边缘精准成像。为了得到待测物体更完整的图像，需要引入可见光成像技术，将两种图像融合。本文首先用交互式配准方法及仿射变换对采集到的可见光图像与X射线图像进行配准，然后对可见光图像进行边缘检测提取图像边缘，再采用像素加权平均进行融合，分别计算融合前后的图像的熵并比较。得出融合图像的熵比可见光及X射线图像的熵值小，说明可见光图像的边缘代替X射线图像的边缘导致融合图像灰度值减小。"
"X射线成像检测能够直观清晰地准确表征被射线探测环境中物体的内部结构及其存在的形貌和缺陷，但是X射线成像不能准确完好地呈现物体边缘的形貌。边缘部分的成像效果模糊，X射线图像会自动平滑，不易精准地区分，即使经过图像处理，也很难发现细微之处的破损和缺陷。为了能够更完整地对被测物体整体成像，需要引入可见光成像技术对物体边缘精准成像，可见光图像融合X射线图像检测，以克服X射线对表面及边缘成像的自身缺陷。从不同传感器获取的异源图像所提供的互补或冗余信息，可以直接提供或者补充可见光谱中没有的信息，比任何单个传感器图像都能更好地显示图像 [ 1 ]。 将可见光图像与X射线图像融合，不仅可以获得物体内部的结构，还可以得到物体边缘的准确信息，进而对待测物体有着更准确的检测结果，使融合图像的信息更加丰富。本文首先用交互式配准方法及仿射变换对采集到的可见光图像与X射线图像进行配准，利用Canny边缘检测算法提取可见光图像的边缘，然后采用像素加权平均进行融合，再计算可见光图像、X射线图像和融合后图像的熵，比较X射线图像与融合图像的图像熵，以评价融合图像的质量。"
"图像配准是图像融合的前提。图像配准是将两幅或者多幅从不同视角、在不同条件或时间下获得的关于同一场景的图像进行最佳匹配的过程，进行对齐和叠加使得相同目标在不同的图像上具有相同的坐标 [ 2 ]。此处需要使用MATLAB的图像处理工具箱将可见光图像和X射线图像进行配准，通过交互界面选取两张图像中的特征点对，指定为成对的控制点，选择要使用的变换类型，并根据控制点对推算出变换参数。对待配准的图像进行空间几何变换，使之对准 [ 3 ]。 交互式配准方法分别在参考图像和待配准图像上选取特征点对，这个过程是人为主观选取的。对于可见光图像和X射线图像的配准，由于它们在灰度和特征信息上还存在着较大的差别，很难通过自动配准的方法精确地选取到一致的特征点，所以本文采用交互式配准的方法。  边缘检测的目的就是找到图像中亮度变化剧烈的像素点构成的集合，表现出来往往是轮廓，图像边缘检测大幅度地减少了数据量，并且剔除了可以认为不相关的信息，保留了图像重要的结构属性。 本文采用Canny边缘检测法 [ 4 ]，提取可见光图像的边缘图像。Canny边缘检测是一种一阶微分算子检测算法，是边缘检测算子中最为常用的一种。Canny边缘检测在一阶微分算子的基础上，增加了非最大值抑制和双阈值两项改进利用非极大值抑制不仅可以有效地抑制多响应边缘，而且还可以提高边缘的定位精度，利用双阈值可以有效减少边缘的漏检率。  图像融合是指将不同成像系统采集到的关于同一目标的图像数据经过图像处理和计算机技术等，最大限度的提取各自图像中的有利信息，最后综合成高质量的图像，将来自不同传感器的图像信息进行整合，能够得到图像中更复杂和细节的信息，以提高图像信息的利用率。加权平均法图像融合算法 [ 5 ] 对原图像的像素直接取相同的权值，然后进行加权平均得到融合图像的像素值，得到一幅新的融合图像。像素加权平均融合算法如下： y = w 1 × f + w 2 × g ( m , n ) (1) 式中f、g分别为需要融合可见光图像和X射线图像，y为融合后的图像，m、n为图像的行数和列数，w 1 、w 2 为加权系数且两系数的和为1。 由于本文要对可见光图像和X射线图像进行融合，并且两种图像属于不同类型的图像，可见光图像是RGB彩色图像，X射线图像是灰度图像，一般对于维度不同的图像进行运算时，需要将两种图像转换成同一类型，加权平均法不需要对两个图像进行任何变换，也不需要考虑像素之间的关系，所以本文使用加权平均法来实现图像融合。"
"本文的图像不是标准的融合图像，因此在图像的融合过程中，需要判别一个图像融合结果的优劣，对两种图像融合后的图像质量进行评估，于是就引出了图像熵的概念，绝大多数时候，图像熵都被用来作为评价图像的一个量化标准。图像熵是一种特征的统计形式，它反映了图像中灰度信息的情况。通过计算源图像与融合图像之间的灰度信息分布情况，从而评价融合图像的质量 [ 6 ]。分别计算可见光图像、X射线图像以及融合后的图像熵。"
"本文以分辨率板作为研究对象，获取了分辨率板的可见光图像和X射线图像，提取了可见光图像的边缘，并与X射线图像进行了融合，对结果进行了分析。使用手机相机和X射线成像设备获取可见光图像和X射线图像，如图1所示，相比X射线图像，可见光图像的边缘清晰。 在MATLAB软件中输入cpselect并读取两个图像，出现交互界面，以X射线图像作为基准图像，可见光图像为待配准图像，分别在两图像上手动选取特征点，此处选取4对特征点，将4对特征点的数据保存到工作区，使用cp2tform函数，对特征点数据进行仿射变换，推算出变换参数，对待配准的可见光图像进行空间几何变换。经过交互式配准及仿射变换，得到配准后的可见光图像如图2。 Canny边缘检测提取了可见光图像中分辨率板的边缘，调整窗宽和窗位，提取可见光图像的边缘如图3。 将提取的可见光图像边缘与X射线图像加权融合，得到融合图像如图4。 图1. 可见光图像与X射线图像 图2. 配准后的可见光图像 图3. 可见光图像的边缘检测图像 图4. 像素加权平均图像 引入图像熵客观评价融合图像的质量，计算并比较X射线图像与融合后的图像熵，得到的图像熵如表1： Table 1 图像 熵 可见光图像 6.6406 X射线图像 6.2614 融合图像 6.1903 表1. 融合前后的图像熵 从表1中得知，融合图像的熵比可见光图像和X射线图像的熵值要小，这是因为将可见光图像的边缘提取出来，可见光图像边缘像素与X射线图像的边缘加权平均，融合了X射线图像原有的边缘像素，灰度值明显减小；而且对可见光图像进行边缘检测需要将图像转变为灰度图像，这也导致在边缘提取阶段图像熵就有所减小；此外，两图像的加权系数同样会影响融合图像的熵，边缘图像的加权系数越大、X射线图像加权系数越小，融合图像的熵越小；边缘图像的加权系数越小、X射线图像加权系数越大，融合图像的熵越大。"
"本文针对X射线成像对边缘成像的缺陷，提出利用可见光成像辅助X射线成像。将可见光配准，提取可见光图像的边缘，与X射线图像进行加权平均融合，得到融合图像，计算图像熵作为评价融合图像质量参数。可见光图像及X射线图像的熵均大于融合图像熵，表明可见光图像提取的边缘融合了X射线图像，使图像整体的灰度值减小，在保证X射线图像内部信息的同时，也针对了图像边缘，使边缘部分的灰度更大，更便于观察测量。"
