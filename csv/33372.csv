"炼钢过程中的脱氧合金化是钢铁冶炼中的重要工艺环节。本文研究建立了关于碳锰元素收得率预测模型，仿真优化检验，定义出控制空间定理来评判模型预测准确率。其次，使用BP神经网络和拟合两种方法，分别建立出脱氧合金化过程的合金元素收得率预测模型，缩短学习训练时间，提高模型预测精度，得出BP神经网络预测值均在85%以上，拟合预测值均在82%以上，结果表明：随机选取100炉次的生产数据进行仿真优化，根据控制区间定理知，拟合的预测准确率达到84%以上，BP神经网络预测准确率均在89%以上，BP神经网络预测模型更符合生产要求。 关键词 :碳锰含量，BP神经网络，拟合，仿真优化 Copyright © 2019 by author(s) and Hans Publishers Inc. This work is licensed under the Creative Commons Attribution International License (CC BY). http://creativecommons.org/licenses/by/4.0/"
"随着计算机技术的发展，国外早已研究出以合金收得率预测及成本优化算法为主体的自动配料模型，该模型可实现自动脱氧合金化的目的。目前，国内部分车间引进这一技术并成功应用于生产，但总体上，与国际先进国家相比仍有较大差距。 对于不同的钢种在熔炼结束时，需加入不同量不同种类的合金，以使其所含合金元素达标，最终使得成品钢在某些物理性能上达到特定要求。随着钢铁行业中高附加值钢种产量的不断提高，如何通过过程控制模型，在线优化控制投入合金种类及数量，在保证钢水质量的同时最大限度地降低合金钢的生产成本，是各大钢铁企业提高竞争力所要解决的重要问题。向钢中加入一种或几种与氧亲和力比铁大的元素，夺取钢中多余的氧的操作为脱氧。脱氧合金化是指在不同钢种熔炼结束后，向钢中加入不同量、不同种类的合金，以使其所含合金元素达标，最终使得成品钢在某些物理性能上符合规程要求的操作。在脱氧合金化过程中，合金元素损失的途径有：主要为元素被钢水中的氧化物氧化以及元素残留在钢渣中而没有进入钢水。影响合金氧化程度的因素有很多，在在合金化过程中，最重要的因素为：钢液氧活度、渣中不稳定氧化物活度、钢渣碱度、吹氩搅拌强度、钢水温度以及钢水质量。 本文研究建立了关于碳锰元素收得率预测模型，仿真优化检验，定义出控制空间定理来评判模型预测准确率，建立BP神经网络模型和拟合模型去预测碳锰元素的收得率，得出最佳预测结果。 由于收集了大量历史炼钢数据，可采用BP神经网络和拟合等预测方法，对收得率进行预测，在根据控制区间定理，对预测出的收得率进行仿真优化检验，使C，Mn等元素含量达到国家标准 [ 1 ]。"
"预测C、Mn两种元素的收得率并且使之预测准确率最大限度地提高 [ 2 ]。通过阅读文献知，需定义一个控制区间定理来评判预测准确率，最后通过仿真实验来检验预测模型的好坏。 规定控制区间定理是指已知某合金元素含量达标范围为 [ a % , b % ] ，若预测出该合金元素含量在 [ a % + b % 2 − b % − a % 4 , a % + b % 2 + b % − a % 4 ] 区间内，则该预测值准确率达到90%以上，若预测值接近于 a % + b % 2 ，则该预测值准确率趋于100%。 给出具体评判预测准确率方法后，通过建立BP神经网络和拟合两种模型分别预测某种合金元素i的收得率，根据如下公式求出某种合金元素i含量；再利用控制区间定理，来判定某种合金元素i含量是否达到国家标准要求。 合 金 元 素     i     量 = 目 标 出 钢 含 量     i − 吹 止 成 分     i 元 素     i     收 得 率 × ( 钢 水 净 重 − 合 金 总 质 量 )  BP神经网络是一种非线性动力系统，包含输入层、隐含层、输出层三层单元。设输入向量为 X = ( x 1 , x 2 , ⋯ , x n ) T ，隐含层输出向量为 Y = ( y 1 , y 2 , ⋯ , y m ) T ，输出层输出向量为 G = ( g 1 , g 2 , ⋯ , g k ) T ，则有期望输出向量为 D = ( d 1 , d 2 , ⋯ , d l ) T ，输出层到隐含层之间的权值矩阵用V表示， V = ( v 1 , v 2 , ⋯ , v m ) ，其中列向量 v m 为隐含层第m个神经元对应的权向量，隐含层到输出层之间的权值矩阵用W表示， W = ( w 1 , w 2 , ⋯ , w i ) ，其中列向量 w i 为输出层第i个神经元对应的权向量 [ 3 ]。 { G j = f ( n e t j ) , j = 1 , 2 , ⋯ , k ,   输 入 层 n e t j = ∑ i = 0 m ω i j g i , j = 1 , 2 , ⋯ , k ,   隐 含 层 f ( x ) = 1 1 + e − x ,   转 移 函 数 f ′ ( x ) = f ( x ) [ 1 − f ( x ) ] 其中，转移函数 f ( x ) 均为单极性Sigmoid函数， f ( x ) 具有连续性可导性。 网络误差的定义与权值更新 [ 4 ]。当网络输出与期望输出不等时，存在输出误差E，给出定义如下： E = 1 2 ( D − G ) 2 = 1 2 ∑ i = 1 k ( d i − g i ) 2 (1) 将以上误差定义式展开至隐含层，有： E = 1 2 ∑ i = 1 k [ d i − f ( n e t i ) ] 2 = 1 2 ∑ i = 1 k [ d i − f ( n e t i = ∑ i = 0 m w i j g i ) ] 2 (2) 进一步展开至输入层，有： E = 1 2 ∑ i = 1 k { d i − f [ ∑ i = 0 m w i j f ( n e t i ) ] } 2 = 1 2 ∑ i = 1 k { d i − f [ ∑ i = 0 m w i j f ( ∑ i = 0 n v i j g i ) ] } 2 (3) 由上式可以得出，网络误差是各层权值 w i j ， v i m 的函数，因此调整权值可改变误差E。 显然，调整权值的原则是使误差不断地减小，因此应使权值的调整量与误差地梯度下降成正比，即： Δ w i j = − η ∂ E ∂ w i j , i = 0 , 1 , 2 , ⋯ , n ; j = 1 , 2 , ⋯ , k Δ v m i = − η ∂ E ∂ v m i , m = 0 , 1 , 2 , ⋯ , l ; i = 1 , 2 , ⋯ , n (4) 式中，负号表示梯度下降，常数 η ∈ ( 0 , 1 ) 表示比例系数，在训练中反映了学习速率 [ 5 ]。  由问题一求出C，Mn收得率的数据组，将数据组分成90%的训练集，构建出三层网络层 [ 6 ] ；输入向量为 X = ( x 1 , x 2 , ⋯ , x n ) T ，隐含层输出向量为 Y = ( y 1 , y 2 , ⋯ , y m ) T ，输出层输出向量为 G = ( g 1 , g 2 , ⋯ , g k ) T 。 任意100炉次中Mn收得率的真实值与预测值见图1： 图1. Mn的真实值与预测值对比图 该模型对100炉终点成分Mn的预测值均达到85%以上，部分预测值超过了95%，甚至趋于100%；同时，可得出Mn的100组误差值，部分误差值趋于零，95%以上的误差值不超过区间 [ − 0.1 , 0.1 ] ，但有个别误差点小于−0.1，因此，仍可通过仿真预测进一步优化预测值。 任意100炉次中C收得率的真实值与预测值见图2： 图2. C的真实值与预测值对比图 该模型对100炉的终点成分C的预测值大部分达到85%以上，少数预测值超过了87%，另外，可得出C的100组误差值，大部分误差值趋于零，所有误差值均不超过区间 [ − 0.1 , 0.1 ] 。  从历史收得率中随机抽取10组数据进行拟合分析，见表1： Table 1 1678 1640 1651 1656 1661 1668 1693 1651 1672 1647 0.865 0.951 0.945 0.876 0.941 0.917 0.937 0.926 0.930 0971 表1. 10组年份(年)与收得率(%) 设曲线拟合函数为： y = a 1 + a 2 x + ⋯ + a n x n − 1 (5) 若使残差的平方和最小，在近似值贴近于真实值，故有： ∑ i n δ i 2 = min 可先选定一组函数 r 1 ( x ) , r 2 ( x ) , ⋯ , r m ( x ) , m < n ，特别地，取 { r 1 ( x ) , r 2 ( x ) , ⋯ , r m ( x ) } = { 1 , x , x 2 , ⋯ , x m − 1 } (6) 令 φ ( x ) = a 1 r 1 ( x ) + a 2 r 2 ( x ) + ⋯ + a m r m (x) 确定 a 1 , a 2 , ⋯ , a m ，使得 J ( a 1 , a 2 , ⋯ , a m ) = ∑ i n δ i 2 = ∑ i n [ φ ( x i ) − y i ] 2 = ∑ i n [ ∑ k = 1 m a k r k ( x i ) − y i ] 2 (7) 要使 J ( a 1 , a 2 , ⋯ , a m ) 最小，即对它求偏导数： ∂ J ∂ a k = 0 ( k = 1 , ⋯ , m ) (8) 矩阵形式为： ( ( r 1 , r 1 ) ( r 1 , r 2 ) ⋯ ( r 1 , r m ) ( r 2 , r 1 ) ( r 2 , r 2 ) ⋯ ( r 2 , r m ) ⋮ ⋮ ⋱ ⋮ ( r m , r 1 ) ( r m , r 2 ) ⋯ ( r m , r m ) ) ( a 1 a 2 ⋮ a m ) = ( ( y , r 1 ) ( y , r 2 ) ⋮ ( y , r m ) ) 若记 Q = [ r 1 ( x 1 ) ⋯ r m ( x 1 ) ⋮ ⋱ ⋮ r 1 ( x n ) ⋯ r m ( x n ) ] ， a = [ a 1 ⋮ a 2 ] ， y = [ y 1 ⋮ y n ] 此时正则方程组为： ( Q T Q ) a = Q T y 。 图3. 两影响因子与C收得率的三维关系示意图 从而有两影响因子与C收得率的三维关系，见图3，因此可得出预测收得率，取出任意十组C的预测值分析，给出如下表格，见表2： Table 2 温度(℃) 1678 1640 1651 1656 1661 1667 1693 1681 1672 1647 预测值(%) 0.829 0.951 0.946 0.876 0.941 0.917 0.937 0.926 0.930 0.971 表2. C元素拟合预测值与真实值分析 结论：十组预测数据中碳的收得率最低值为0.829377，最高值为0.971045，预测率在82%以上，所以拟合的预测效果比BP神经网络预测更差 [ 7 ]。 根据影响Mn收得率的两大因子转炉终点温度和转炉终点C，以温度为x轴，转炉终点C为y轴，收得率为z轴，得出三维空间关系图如下，见图4： 图4. 两因素与Mn收得率的三维关系示意图 因此可得出预测收得率，取出任意十组Mn收得率分析，给出如下表格，见表3： Table 3 温度(℃) 1684 1663 1705 1639 1571 1710 1692 1645 1668 1655 预测值(%) 0.937 0.943 0.950 0.894 0.846 0.912 0.920 0.931 0.941 0.951 表3. Mn元素拟合预测值与真实值分析 结论：十组预测数据中锰的收得率最低值为0.845525，最高值为0.951274，预测率在82%以上，所以拟合的预测效果比BP神经网络预测更差。"
"通过分析转炉炼钢生产过程的反应机理，根据附件提供的大量数据，计算出C和Mn历史收得率并分析出转炉终点温度和转炉终点C为C、Mn收得率的主要影响因素。采用10组HRB400B钢号数据进行仿真实验来检验BP神经网络模型与拟合模型预测的准确性和可靠性。 以合金元素i含量作为预测结果的评价指标，该合金元素i含量公式如下： 合 金 元 素     i     量 = 目 标 出 钢 含 量     i − 吹 止 成 分     i 元 素     i     收 得 率 × ( 钢 水 净 重 − 合 金 总 质 量 ) 目标出钢含量即为钢产品达标目标值，故由目标出钢含量 i = 0.23 ，吹出成分i为转炉终点i。 求出预测值的平均值为0.21285，见表4，由定义的控制区间定理得该均值在 [ a % + b % 2 − b % − a % 4 , a % + b % 2 + b % − a % 4 ] = [ 0.205 , 0.245 ] 区间内，故收得率的预测准确率达到90%以上。 Table 4 第一组 第二组 第三组 第四组 第五组 第六组 第七组 第八组 第九组 第十组 0.2168 0.1906 0.2331 0.1902 0.1965 0.2256 0.1846 0.1964 0.2531 0.2416 表4. 拟合模型预测的合金碳元素含量 求出预测值的平均值为1.47364，见表5，由定义的控制区间定理得该均值在 [ a % + b % 2 − b % − a % 4 , a % + b % 2 + b % − a % 4 ] = [ 1.375 , 1.525 ] 区间内，故收得率的预测准确率达到90%以上。 Table 5 第一组 第二组 第三组 第四组 第五组 第六组 第七组 第八组 第九组 第十组 1.3567 1.4596 1.6012 1.5137 1.451 1.3984 1.486 1.3908 1.5706 1.5084 表5. 拟合模型预测的合金锰元素含量 根据BP神经网络模型知，C和Mn的仿真值图如下，见图5： 图5. C、Mn仿真检验图 结论：根据控制区间定理可知，BP神经网络对碳和锰的仿真优化误差规定内，预测准确率达到89%以上，而且BP神经网络预测出的合金元素i含量比拟合预测出的合金元素i含量更加靠近于 a % + b % 2 ，因此BP神经网络预测出的收得率更加靠近于真实值。"
"结合大数据思维，利用数据深度处理分析各个变量对合金元素收费率的影响，随机抽取实际生产数据，用BP神经网络模型得出的理论预测值误差与拟合模型预测值进行仿真对比分析，确保了BP神经网络预测模型的可靠性，再根据建立出脱氧合金化过程的合金元素收得率预测模型，缩短学习训练时间，提高模型预测精度，得出BP神经网络预测值均在85%以上，拟合预测值均在82%以上，结果表明：随机选取100炉次的生产数据进行仿真优化，根据控制区间定理知，拟合的预测准确率达到84%以上，BP神经网络预测准确率均在89%以上，BP神经网络预测模型更符合生产要求 [ 8 ]。 随着钢铁行业中高附加值钢种产量的不断提高，通过历史数据对脱氧合金化环节建立数学模型，以实现在线预测、优化投入合金的种类和数量，在保证钢水质量的前提下，最大程度上降低合金钢的生产成本，是提升各大钢铁企业竞争力和获得长远发展利益的决定性保障。"
