"在现在人们的生活中，家用电器的使用已经成为必不可少的一部分。但仍然常常出现用电不合理、人走忘记断电、浪费严重的情况，加剧了能源供需不平衡的矛盾，而且存在着安全隐患。随着国家智能电网的建设、峰谷分时电价的推行，使得节能环保、绿色低碳以及智能用电等需求更加引人注目。如果能够尽量在用电低谷时段启用家用电器(如洗衣机等)，从而科学用电，这样不但能够节省能源，还将对削峰填谷压力的缓解起到积极的促进作用。智能家居能效管控系统具有方便、高效、安全、节能、智能化的特点，对于改善居民的生活质量有着非常重要的影响。"
"智能家居(Smart Home)是计算机技术、网络技术、控制技术向传统家居渗透发展的必然结果 [ 1 ] 。目前通常把智能家居定义为利用网络、移动设备、电脑和综合布线技术，将与家庭生活有关的各种子系统有机地结合的一个系统在家庭信息管理平台的基础上。  1984年美国联合科技公司将建筑设备信息化、整合化概念应用于美国康乃狄克州哈佛市的City Place Building，出现了首栋“智能家居建筑”，从此揭开了全世界建造智能家居的序幕 [ 2 ] [ 3 ] 。1998年3月，IBM, Intel, Hp, Microsoft，及日本的一些公司共同制定了“家用无线网络标准”——家庭射频(HomeRF) [ 4 ] 。随后，基于HomeRF的PC卡、适配卡、打印机、无线电话等设备相继面世，其发展势头备受关注。1998年家庭电话线网络联盟(HomePNA)提出利用传统电话网络提供宽带数据接人服务。该标准利用Tut公司的技术不会对正常的电话业务产生干扰，并且将允许在家中使用随机制非结构性电话线。2004年，“家庭插电联盟”创造了共同的家庭电线网络通讯技术标准，实现了“电力线上网”，基于电力线上网技术推出的新型的电力变压器和Modem可以使笔记本电脑和PC的使用者轻松连接家中的供电网络。另外，值得一提的是，在智能家居的发展历程中，x-10技术(电力载波通讯协议，即plc)是最耀眼的明星 [ 5 ] 。从20世纪70年代开发并获得专利至今，已经有很多大公司在美国生产、销售x-10产品，例如stanley, ra-dioshack, honeywell, leviton等等；在当今美国家庭自动化控制规格领域中x-10控制规格已成为的主要领导者。  1999年，深圳首届高交会上，外商永泰峰公司带着其ApBus产品参展，代表着国外智能家居产品开始进入中国市场 [ 6 ] 。在国内，利用电力线做家庭信息的传输介质的研究较电话线早，1999年中国电力科学院研制出45 Mbps的电力线高速通信产品。2002年北方工业大学运用单片机控制电话收发芯片MT8880和语音芯片ISD4004，研制出一种基于公共电话网的智能家居系统，此系统可以实现电话远程控制家电、语音提示、留言和自动报警等功能 [ 7 ] 。泛安公司自主开发了家庭控制器——e家网关 [ 8 ] 。它本身是小型嵌入式Web服务器并且可以采集和发送信息，用户如果想要了解家中情况，可以通过在Internet上浏览其内部HTML网页来实现。除此之外，用户还可以通过这种方式进行消息传送和远程控制。由于e家网关能够与Internet互联，直接连接到宽带网，因此该系统己经不是传统意义的小区智能化管理系统，而可以发展成为社会化的管理系统 [ 9 ] 。2004年，中国通信标准化协会(CCSA)提出要开展家庭网络标准的研究工作 [ 10 ] 。5月，由信息产业部电信研究院牵头，包括中国电信、中兴通讯、上海贝尔阿尔卡特、华为科技、UT斯达康、西门子等8家公司参加的家庭网络总体研究课题组。他们对家庭网络进行了全面综合研究，提出了电信制造和运营商对未来智能家居新时代的发展规划、对策与看法，并向CCSA提交了《家庭网络总体研究(V1. 2)》报告 [ 11 ] 。2005年，国家信息产业部正式批准发布了对于家庭网络的推荐标准，并于9月1日开始实施 [ 12 ] 。"
"根据对智能家居能效管控Web系统的整体架构设计、数据库设计、系统整体流程的确定，该项目釆用面向对象的C#语言，在.NET平台下，基于SQL Server 2008数据库，结合Socket通信技术并选用普遍使用的Windows 7操作系统，开发了B/S模式下面向智能用电的智能家居能效管控Web系统平台。  本系统基于由ASP.NET和SQL Server 2008搭建的软件开发平台。ASP.NET采用分层配置系统，具有良好的跨平台性。SQL Server 2008不仅功能强，而且易学、易用。能都与ASP.NET紧密集成，对动态网站提供了强有力的支持。  Microsoft. NET Framework开发平台具有很强的综合性。在这个平台之上不仅能够实现ASP.NET Web应用系统的开发，也可以开发Windows桌面应用系统、Mobile移动式网络应用系统以及Web Service服务系统。 .NET Framework所包含的ASP.NET，是微软公司的一项技术，是一种嵌入到网页当中的脚本。其可以在通过HTTP请求文档时，通过因特网服务器执行的服务器端脚本技术，再在Web服务器上动态地创建它们 [ 13 ] 。 通过在实际工程中的不断摸索以及ASP.NET和Web应用程序的技术特点，得到了一种基于ASP.NET技术的三层Web应用程序开发设计模型。这种模型把Web应用程序划分为三个基本的层次：用户界面层、业务逻辑层和数据访问层 [ 14 ] 。其结构如图1所示。  SQL Server 2008在Microsoft的数据平台上发布，它可以存储数据以及管理、更新、查询关系型数据 [ 15 ] 。数据库中能够对数据进行报告查询、同步、搜索和分析等操作，此外，在其中也可以直接存储非结构化、半结构化和结构化的文档文件。 SQL Server 2008允许使用Microsoft.NET和Visual Studio开发的自定义应用程序中使用数据，在面向服务的架构(SOA)和通过Microsoft BizTalk Server进行的业务流程中使用数据。信息工作人员可以通过日常使用的工具直接访问数据。   STM32F103是ST公司出品的以Cortex-M3为内核的处理器芯片，它具有丰富的接口和不小的内置存储器。它的计算性能相比16位产品有大幅提升，而价格却相差不大。由于有内部Flash，因此当不需要进行大数据存储时，可以省略外接ROM以简化系统。其实物图如图2所示。 图1. Web应用程序三层设计模型 图2. STM32F103实物图  DHT11数字温湿度传感器应用了专用的数字模块采集技术和温湿度传感技术。它的内部由一个感湿电阻和一个NTC测温部件组成，精度较高，可以用于提高监测的可靠性和卓越的长期稳定性。其实物图如图3所示。  Marvell所提供的通信方案是一个综合成本比较低的方案。集成度高、成本低是该芯片的优点，虽然设计难度属于中等，但是它比较符合本设计的要求。 该模块支持速度为1和2 MbPs的IEEE802.n协议，速度为5.5和11 MbPs的IEEE802.1lb协议，还有速度为6、9、12、18、24、36、48、54 Mbps的IEEE802.lla/g协议。支持Infrastructure和Ad-hoc两种操作模式，在MAC层上；支持DCF和PCF两种介质访问控制方式；支持开放系统认证和共享密钥认证两种认证服务；支持IEEE的省电模式；支持Marvell的2、3、4线的蓝牙共存仲裁机制。Marvell 88W8686 WIFI模块如图4所示。  OV2640是OV (Omni Vision)公司生产的一颗1/4寸的CMOS UXGA (1632 * 1232)图像传感器。提供单片UXGA摄像头和影像处理器的所有功能。其实物图如图5所示。 图3. DHT11温湿度传感器实物图 图4. Marvell 88W8686 WIFI模块实物图  由于光敏电阻的光电特性并不是理想的线性关系，所以并不可用作高精度检测元件。另外，光敏电阻十分容易被不可见光(主要为红外线和紫外线)影响而导致误操作。BH1750FVI提供三种灵活的工作模式：低分辨率模式、高分辨率模式1和高分辨率模式2。在低分辨率模式下，它能够检测1~65535 lux的光照强度，测量用时仅为16 ms，分辨率为4 lux。高分辨率模式1下，它能够检测1~54612 lux范围的光照强度，测量时间一般为120 ms，分辨率为0.5 lux。在高分辨率模式2下，它能够检测1~54612 lux范围的光照强度，测量时间一般为120 ms，分辨率1 lux。其实物图如图6所示。  MQ-2型传感器的最高工作温度一般在300℃至400℃，检测浓度范围为300至10000 ppm，它对液化气等气体的灵敏度比较高，此外也能够对天然气和烟雾等有害气体进行检测。其实物图如图7所示。 图5. OV2640摄像头模块实物图 图6. BH1750FVI光强传感器实物图 图7. MQ-2烟雾传感器实物图"
"家庭智能化的出现已经有将近20年的历史，智能家居系统通过智能化建设，以家庭综合布线为基础，以计算机网络和无线通信网络为桥梁，全面实现家庭智能化生活。  本文将主要功能模块分为六部分，包括用户信息管理模块、信息模块、安防模块、窗帘模块、电器模块和照明模块。这些模块在第二章中已做了简单介绍。下面将对各个模块的功能需求进行详细的说明。  1) 用户信息管理模块 能够实现用户的注册和登录功能； 2) 信息模块 综合显示温度、湿度、光照以及相关用电建议等相关信息，同时可以控制用电器的启停和查看电器的详细信息； 3) 安防模块 显示室内的实时影像，并显示摄像设备的用电量和用电情况折线图； 4) 窗帘模块 显示室内的温度、湿度和光照强度，控制窗帘的开关，同时显示智能窗帘的用电量和用电情况折线图； 5) 电器模块 综合显示电器信息，并可通过链接查看指定用电器的详细用电信息； 6) 照明模块 显示照明设备的用电量和用电情况折线图。  1) 系统用例图如图8所示。 2) 系统结构图9所示。 图8. 系统用例分析图 图9. 系统结构图  1) 数据精确度 本系统的数据信息通过硬件传感器传回，受室内温度、湿度、光照强度影响并能反映其变化趋势。同时本系统能作到对信息的实时更新，本系统的数据信息精确度是可以得到保证的。 2) 时间特性 系统正常的前提下，保证响应时间在5秒以内。 3) 灵活性 系统具有灵活的操作方式，键盘和鼠标都可以实现对系统的操控。 4) 可拓展性 为了适应新的用电器加入等方面的更新扩展，系统必须具有良好的可拓展性。"
"在上一章中，给出了智能家居能效管控Web系统的功能需求和性能需求等，本章将对应用层各软件模块进行详细设计分析，并对其中需要用到的相关技术和工作原理进行详细的说明。  1) 家庭网络 家庭网络是智能家居系统的基础。家庭中不同功能的异构网络彼此分离，没有形成通信与互联。通过解决各种家电的控制和互连问题，将一种标准的交互语言提供给家电，实现家庭网关与第三方应用程序之间的通信，以实现控制家庭内部的电器，并且实现其它智能家居功能的要求。 家庭网关不仅要完成家庭智能控制和因特网接入功能。而且还负责各种类型子网之间的协议转换和数据共享。对于能耗管理，家庭网关还应具有用电数据采集、存储和处理，能耗管理策略实施等功能。 2) Internet接入 家庭能耗管理系统方便用户通过Internet网络远程操控智能家电。可以随心所欲对家居家电进行开关控制 [ 16 ] 。并能为用户提供用电信息查询，也可以为用户提供对其属性的操作。实现用电详情的远程实时分析，让居民对其的控制不再受时间和地域的限制。 3) 智能家居控制 普通家电通过红外转发器，红外遥控器，无线中继模块等方式，使用户能够非常容易、方便地对非信息家电实现的控制。 通过与红外转发器通信可以完成红外家电的遥控器功能；而通过与智能插座通信可以完成普通家电的开关。信息家电自带有网络接口，与能耗管理系统可直接进行无线通讯，能方便对其的控制管理 [ 17 ] 。 系统通信结构图如图10所示。  家庭内部署有智能家居服务器。用户可以通过PC来控制户内的智能家居设备。智能家居的系统结构示意图如图11所示。 1) 应用层 作为人机交互界面，注重界面的友好度与用户的体验度。能将用户的意图反馈给管理层。主要包含移动终端、PC等可视化设备。 2) 管理层 作为系统核心，负责网络的管理和信息的处理，承接应用层和感知层之间的信息交互。包括智能网关和智能家居服务器。 图10. 系统通信结构图 3) 感知层 作为动作执行设备，执行号管理层下发的动作命令，以便于更好地将用户的意图在应用层中实现。作为信息获取部分，监控环境的变化，并将相关信息发送给管理层，以便于根据环境信息实现用户意愿。  智能家居系统的流程如图12所示。 图11. 系统结构示意图 图12. 智能家居系统流程图   系统软件包括：计算机及网络操作系统、应用软件和实时监控软件等。 1) 系统软件应具有很高的可靠性和安全性 [ 18 ] 。 2) 系统软件应当操作简单方便，采用多媒体技术，采用中文图形界面，使系统具有处理图像和数据的能力。用户操作界面要友好，以保证能够适应不同层次的用户。 3) 系统软件应符合国际、国家标准以及行业标准，便于支持新硬件产品和多次升级。 4) 系统软件应具有功能上的可拓展性。  系统设计工作应该由总体结构的设计到各个模块的设计逐层完成。总体设计主要是指对整个系统的功能进行划分，软硬件配置、数据存储和整个系统实现等方便的合理布局。系统软件功能结构如图13所示。"
"Microsoft Visual Studio 2010； Microsoft SQL Server 2008。  家庭网关的功能设计位于软件架构的应用层。主要功能模块则分为六部分，包括用户信息管理模块、信息模块、安防模块、窗帘模块、电器模块和照明模块。这些模块在第二章中已做了简单介绍。下面将对各个模块的工作流程和功能的实现进行详细的说明。 图13. 系统软件功能结构图  对用户信息是否正确的审查代码全部写在登录按钮的on-click方法中。 程序先检测用户名是否为空。当用户名为空时，点击“登录”按钮将提示“请输入有效的用户名”。否则继续判断密码是否为空。当密码为空时，提示“请输入密码”，如果密码和用户名均不为空，则和数据库中的已有用户信息进行比对，比对成功，进入首页，否则提示“密码错误！”。用户信息管理模块程序设计流程如图14所示。界面如图15、图16所示。 图14. 用户信息管理模块程序设计流程图 图15. 用户登录界面  1) 主界面结构设计 图17为面向智能用电的智能家居能效管控系统主界面。其中主要分为5个模块，分别是：信息模块、 图16. 用户注册界面 图17. 系统主界面 安防模块、窗帘模块、电器模块和照明模块，用户可以根据需要进入相应界面进行信息的查询和对设备进行控制。页面顶部欢迎语句由Session中获得用户名，再通过if else语句进行相应的判断具体方法如下： if (Session[“uid”] == null)//判断session是否为空，如果为空则证明是直接访问该页面，那么将跳转到登录界面。 {Response.Redirect (“Userlogin.aspx”);} else{Response.Write (“欢迎”+ Session[“uid”].ToString());//用来获取左上角欢迎语句。}} 2) 响应式界面 变换窗口大小后，首页的响应式界面如图18所示。  该模块综合显示各类信息，包括温度、湿度、光照强度、用电建议、电器用电量等。其中运用数据挖掘技术对采集到的负荷数据进行分析，给出用能统计曲线，并分析其合理性及节能潜力，给出节能措施和建议；用户需要，可以手动或依据策略进行智能化的电器启停控制，使用电最优化，节能环保。界面设计主要运用DIV + CSS的布局方式，结合响应式Web设计的方法实现的界面效果如图19所示。 图18. 响应式首页界面 图19. 信息模块界面  系统能根据用户需要实时传回视频信息。可以显示监控器的用电情况折线图。用户也可以根据需要控制监控器的开关。安防模块界面如图20所示。  用户可以根据需要控制窗帘的开关，结合定时控制器，不需要再为每天开关窗帘而心烦，使用定时开关能够实现电动窗帘的自动开关。例如每到天亮时自动打开，晚上就自动关闭。也可以通过查看PC端室内光照强度信息手动控制窗帘的开关。电动窗帘可以通过遥控器、触摸屏控制，遥控器轻松一按，窗帘自在掌控中。窗帘模块界面如图21所示。 图20. 安防模块界面 图21. 窗帘模块界面  电器模块主要实现对家居内电器的开关控制和各个电器用电信息的查看。通过用智能电器插座、定时控制器等智能产品的组合，不需要改造现有的普通家用电器，就能轻松实现对家居内电器的集中控制、电脑控制、无线遥控、定时控制等多种智能控制等。而且可以查看每个电器的详细用电信息。 用户对家居设备下发控制请求时，网关服务器上的处理器设备控制程序接收并解析用户控制请求，它根据用户请求的内容到网关的数据库中查询所要控制设备的信息，检查命令的合法性和设备ID号。同时生成相应的控制命令，然后向网关上的串口下发控制命令。电器模块界面如图22所示。  照明模块可以显示照明设备的用电量。同时可以显示照明设备的用电情况折线图。用户也可以根据需要控制照明设备的开关，例如智能家居内的吊灯、吸顶灯、壁灯、台灯、落地灯等。照明模块界面如图23所示。"
"智能化逐渐走进了每个人的生活，颠覆了传统家居的理念，同时带给人们全新的生活理念。从网络家电概念到今天的物联网家居，从最早简单的安全报警设备到目前的移动视频监控，从独立到互联、从模拟到数字、从有线到无线，智能家居技术已趋于成熟。智能家居控制器是一项复杂而又庞大的系统工程，涉及通信、家电、建筑、网络服务等诸多领域，整个系统的功能以及具体实现上还需要进一步的完善和加强，该系统离真正家居智能化的要求还有一段距离。 图22. 电器模块界面 图23. 照明模块界面 到目前为止，一个比较简洁、实用的面向智能用电的智能家居能效管控Web系统已经基本实现。但是由于个人能力有限，所以只实现了智能家居系统中的一些基本功能，包括远程控制功能、Wi-Fi数据传输功能、设备管理功能等。但一个完善的智能家居系统涉及到生活中的方方面面，所以还有很多后续的研究工作需要开展： 1) 在智能家居系统的功能定位上，可以向着家庭影院、智能场景控制等多功能综合平台方向发展； 2) 在智能家居中Wi-Fi的组网方式上，可以考虑其他更多的拓扑结构，这样有利于保障通信，例如采用树型结构可以使网络的适应性和健壮性更强； 3) 想要智能家居系统真正地做到实用，那么网络安全问题就必须要得到解决。对于智能家居系统来说，防止外部入侵以及数据的完整性是网络安全的重点，而针对这两方面，要做的工作还有很多。"
