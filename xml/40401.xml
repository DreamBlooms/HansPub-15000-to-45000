<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE article  PUBLIC "-//NLM//DTD Journal Publishing DTD v3.0 20080202//EN" "http://dtd.nlm.nih.gov/publishing/3.0/journalpublishing3.dtd"><article xmlns:mml="http://www.w3.org/1998/Math/MathML" xmlns:xlink="http://www.w3.org/1999/xlink" dtd-version="3.0" xml:lang="en" article-type="research article"><front><journal-meta><journal-id journal-id-type="publisher-id">CSA</journal-id><journal-title-group><journal-title>Computer Science and Application</journal-title></journal-title-group><issn pub-type="epub">2161-8801</issn><publisher><publisher-name>Scientific Research Publishing</publisher-name></publisher></journal-meta><article-meta><article-id pub-id-type="doi">10.12677/CSA.2021.112033</article-id><article-id pub-id-type="publisher-id">CSA-40401</article-id><article-categories><subj-group subj-group-type="heading"><subject>CSA20210200000_12947502.pdf</subject></subj-group><subj-group subj-group-type="Discipline-v2"><subject>信息通讯</subject></subj-group></article-categories><title-group><article-title>
 
 
  射频负离子源引出电源控制和采集系统设计
  Design of Control and Data Acquisition System for Extraction Power Supply of Prototype RF Ion Source
 
</article-title></title-group><contrib-group><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>赵</surname><given-names>远哲</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>胡</surname><given-names>纯栋</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>刘</surname><given-names>伟</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>崔</surname><given-names>庆龙</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib></contrib-group><aff id="aff2"><addr-line>中国科学院等离子体物理研究所，安徽 合肥</addr-line></aff><aff id="aff1"><addr-line>null</addr-line></aff><pub-date pub-type="epub"><day>08</day><month>02</month><year>2021</year></pub-date><volume>11</volume><issue>02</issue><fpage>326</fpage><lpage>333</lpage><permissions><copyright-statement>&#169; Copyright  2014 by authors and Scientific Research Publishing Inc. </copyright-statement><copyright-year>2014</copyright-year><license><license-p>This work is licensed under the Creative Commons Attribution International License (CC BY). http://creativecommons.org/licenses/by/4.0/</license-p></license></permissions><abstract><p>
 
 
   
   中性束注入系统是磁约束核聚变研究中重要的等离子体加热、电流驱动和等离子体控制的手段之一。射频负离子源因其中性化效率高、使用寿命长，成为中性束发展的必然选择。引出电源负责在离子源引出电极与等离子体电极间形成一定的电势差，从而将负离子从等离子体发生器中引出。引出电源输出精度、投放时刻、上升时间和稳定性将直接关系到负离子束的匹配引出及恒定负离子束流的维持。本文设计了一套射频负离子源引出电源控制和采集系统，实现对引出电源高精度输出控制和关键参数的实时采集。测试结果表明引出电源控制和采集系统满足射频负离子源实验需求。 Neutral Beam Injection (NBI) is one of the important ways of plasma heating, current driven and plasma control in the research of magnetic confinement fusion. Because of high neutralization efficiency and long service life, NBI becomes the inevitable choice for the development of neutral beam. The extraction power supply is responsible for forming a certain potential difference between extraction grid and plasma grid, so as to extracted negative ions from plasma generator. Output precision, delivery time, rise time, and stability of the extraction power supply are directly related to the matching extraction of negative ion beam and maintenance of constant negative ion beam. In this paper, a control and acquisition system for RF ion source is designed to realize high precision output of power supply and real-time acquisition of key parameters. The test results show the control and acquisition system can meet the experimental requirements of RF ion source. 
  
 
</p></abstract><kwd-group><kwd>中性束注入，射频负离子源，引出电源，控制和采集, Neutral Beam Injector</kwd><kwd> Negative Ion Source</kwd><kwd> Extraction Power Supply</kwd><kwd> Control and Data Acquisition System</kwd></kwd-group></article-meta></front><body><sec id="s1"><title>摘要</title><p>中性束注入系统是磁约束核聚变研究中重要的等离子体加热、电流驱动和等离子体控制的手段之一。射频负离子源因其中性化效率高、使用寿命长，成为中性束发展的必然选择。引出电源负责在离子源引出电极与等离子体电极间形成一定的电势差，从而将负离子从等离子体发生器中引出。引出电源输出精度、投放时刻、上升时间和稳定性将直接关系到负离子束的匹配引出及恒定负离子束流的维持。本文设计了一套射频负离子源引出电源控制和采集系统，实现对引出电源高精度输出控制和关键参数的实时采集。测试结果表明引出电源控制和采集系统满足射频负离子源实验需求。</p></sec><sec id="s2"><title>关键词</title><p>中性束注入，射频负离子源，引出电源，控制和采集</p></sec><sec id="s3"><title>Design of Control and Data Acquisition System for Extraction Power Supply of Prototype RF Ion Source<sup> </sup></title><p>Yuanzhe Zhao, Chundong Hu, Wei Liu, Qinglong Cui<sup>*</sup></p><p>Institute of Plasma Physics, Chinese Academy of Science, Hefei Anhui</p><p><img src="//html.hanspub.org/file/8-1542025x4_hanspub.png" /></p><p>Received: Jan. 17<sup>th</sup>, 2021; accepted: Feb. 12<sup>th</sup>, 2021; published: Feb. 19<sup>th</sup>, 2021</p><p><img src="//html.hanspub.org/file/8-1542025x5_hanspub.png" /></p></sec><sec id="s4"><title>ABSTRACT</title><p>Neutral Beam Injection (NBI) is one of the important ways of plasma heating, current driven and plasma control in the research of magnetic confinement fusion. Because of high neutralization efficiency and long service life, NBI becomes the inevitable choice for the development of neutral beam. The extraction power supply is responsible for forming a certain potential difference between extraction grid and plasma grid, so as to extracted negative ions from plasma generator. Output precision, delivery time, rise time, and stability of the extraction power supply are directly related to the matching extraction of negative ion beam and maintenance of constant negative ion beam. In this paper, a control and acquisition system for RF ion source is designed to realize high precision output of power supply and real-time acquisition of key parameters. The test results show the control and acquisition system can meet the experimental requirements of RF ion source.</p><p>Keywords:Neutral Beam Injector, Negative Ion Source, Extraction Power Supply, Control and Data Acquisition System</p><disp-formula id="hanspub.40401-formula56"><graphic xlink:href="//html.hanspub.org/file/8-1542025x7_hanspub.png"  xlink:type="simple"/></disp-formula><p>Copyright &#169; 2021 by author(s) and Hans Publishers Inc.</p><p>This work is licensed under the Creative Commons Attribution International License (CC BY 4.0).</p><p>http://creativecommons.org/licenses/by/4.0/</p><p><img src="//html.hanspub.org/file/8-1542025x8_hanspub.png" /> <img src="//html.hanspub.org/file/8-1542025x9_hanspub.png" /></p></sec><sec id="s5"><title>1. 引言</title><p>中性束注入(Neutral Beam Injection, NBI)作为托卡马克核聚变装置四种辅助加热手段中加热效率最高、物理机制最清楚的加热方式，在国际和国内的磁约束核聚变装置上得到广泛应用 [<xref ref-type="bibr" rid="hanspub.40401-ref1">1</xref>] [<xref ref-type="bibr" rid="hanspub.40401-ref2">2</xref>] [<xref ref-type="bibr" rid="hanspub.40401-ref3">3</xref>]。为满足未来大型磁约束聚变装置对高能量、高功率和稳态中性束注入系统的需求，世界上磁约束聚变领域的主要研究单位均启动了大功率强流负离子源的研发工作。ITER和CFETR中性束注入加热系统均将采用MeV量级的射频负离子源，在中国科学院等离子体物理研究所正在开展射频负离子源样机的研制。</p><p>大功率射频负离子源由产生大面积、稳定、均匀的高密度等离子体的等离子体发生器和用于引出等离子体中负离子并加速形成束的束引出系统组成。引出电源负责在引出电极与等离子体电极间形成一定的电势差，从而将负离子从等离子体发生器中引出。引出电源输出精度和稳定性将直接影响引出负离子的束流光学特性。同时，由于大功率负离子源相比正离子源具有负离子分布面积较大、密度较低的特点，其对于负离子束的稳定、可靠引出提出了比正离子束引出更高的要求，故需通过对束引出过程引出电源进行高精度输出控制、电压闭环反馈控制和电压快速切断控制，保障引出电源高精度、稳态运行，从而实现大功率负离子束的高效、聚焦、稳态、可靠引出。因此射频负离子源的稳定可靠运行对引出电源提出性能稳定、高可靠性、纹波小、动态性能好等要求。</p><p>根据引出电源性能需求，结合引出电源(16 kV/20A)建设成本和电压等级，引出电源结构设计采用安全、可靠、高效、低谐波的PSM (Pulse Step Modulation)结构，由8台PSM 100 V/20A模块和19台PSM 800 V/20A模块串联组成 [<xref ref-type="bibr" rid="hanspub.40401-ref4">4</xref>] [<xref ref-type="bibr" rid="hanspub.40401-ref5">5</xref>] [<xref ref-type="bibr" rid="hanspub.40401-ref6">6</xref>]。为保证大功率负离子束稳定、高效、聚焦引出，要求引出电源输出电压纹波小于1%、调整精度为100 V；同时，为保障大功率负离子束引出时具有良好而稳定的离子光学特性，要求引出电源与加速电源系统匹配工作，根据加速电源上升时间小于80 ms的设计指标，引出电源电压上升时间设计为50 us~100 ms，且可调。因此本文针对射频负离子源束引出控制需求开展了引出电源控制和采集系统研究，包括引出电源控制和采集系统总体设计、硬件设计、软件设计、及相关性能测试。</p></sec><sec id="s6"><title>2. 引出电源控制和采集系统总体设计</title><p>基于射频负离子源束引出对引出电源运行需求分析，在实验运行前给引出电源上电，配电柜自检状态无故障，则可在人机交互界面上按下合闸按钮为引出电源供电，然后电源系统即可按照本地或者远程设定值输出电压 [<xref ref-type="bibr" rid="hanspub.40401-ref7">7</xref>] [<xref ref-type="bibr" rid="hanspub.40401-ref8">8</xref>]。为保障负离子束引出时具有稳定而良好的离子光学特性，要求引出电源稳定性好、纹波小，且上升时间可调，因此引出电源总体设计指标如表1所示。</p><table-wrap id="table1" ><label><xref ref-type="table" rid="table1">Table 1</xref></label><caption><title> Design specification for extraction power supply system of negative ion sourc</title></caption><table><tbody><thead><tr><th align="center" valign="middle" >序号</th><th align="center" valign="middle" >项目</th><th align="center" valign="middle" >主要参数</th></tr></thead><tr><td align="center" valign="middle" >1</td><td align="center" valign="middle" >输入电压</td><td align="center" valign="middle" >三相AC380 V，50 Hz</td></tr><tr><td align="center" valign="middle" >2</td><td align="center" valign="middle" >输出电压</td><td align="center" valign="middle" >0~−16 k VDC</td></tr><tr><td align="center" valign="middle" >3</td><td align="center" valign="middle" >输出电流</td><td align="center" valign="middle" >0~20 A</td></tr><tr><td align="center" valign="middle" >4</td><td align="center" valign="middle" >纹波</td><td align="center" valign="middle" >&lt;1%</td></tr><tr><td align="center" valign="middle" >5</td><td align="center" valign="middle" >稳定度(输出电压精度)</td><td align="center" valign="middle" >&lt;1%</td></tr><tr><td align="center" valign="middle" >6</td><td align="center" valign="middle" >输出电压调整分辨率</td><td align="center" valign="middle" >100 V</td></tr><tr><td align="center" valign="middle" >7</td><td align="center" valign="middle" >上升时间</td><td align="center" valign="middle" >0.05~100 ms可调</td></tr><tr><td align="center" valign="middle" >8</td><td align="center" valign="middle" >关断时间</td><td align="center" valign="middle" >≤100 μs</td></tr><tr><td align="center" valign="middle" >9</td><td align="center" valign="middle" >故障切除时间</td><td align="center" valign="middle" >≤5 μs</td></tr><tr><td align="center" valign="middle" >10</td><td align="center" valign="middle" >运行模式</td><td align="center" valign="middle" >稳态</td></tr><tr><td align="center" valign="middle" >11</td><td align="center" valign="middle" >电压电流测量精度</td><td align="center" valign="middle" >&lt;1%</td></tr><tr><td align="center" valign="middle" >12</td><td align="center" valign="middle" >保护机制</td><td align="center" valign="middle" >过压、过流</td></tr></tbody></table></table-wrap><p>表1. 负离子源引出电源的总体设计指标</p><p>根据射频负离子源束引出控制需求，引出电源控制和采集系统需满足以下功能：引出电源高精度输出控制，满足低纹波和上升沿微秒量级可调需求；高速实时采集，为输出电压闭环反馈控制提供可靠数据源；可视化人机交互界面，实现电源系统运行参数的设定和系统运行状态的实时监控。由此确定引出电源控制和采集系统总体框架结构如图1所示，其主要由模块控制器、高压侧控制单元(包括故障检测、信号转换)、低压侧控制单元(包括光电转换控制箱、CPCI工控机下位机、PC机上位机)。引出电源控制和采集系统具备本地和远程两种运行模式，本地运行模式下根据本地人机交互界面设定的输出值输出电压，远程运行模式下则通过网络通讯接收NBI总控发送的电压设定值输出需求电压。</p><p>图1. 引出电源控制和采集系统总体架结构示意图</p></sec><sec id="s7"><title>3. 引出电源控制和采集系统硬件设计</title><p>引出电源控制和采集系统硬件结构及原理框图如图2所示，数据采集设备主要包括霍尔传感器、电阻分压器、保护电路板、V/F和F/V转化单元、CPCI采集卡等。通过电阻分压器和霍尔传感器对引出电源电压和电流进行测量，然后通过V/F转化器将电信号转化为光信号进行传输，以有效屏蔽电磁干扰 [<xref ref-type="bibr" rid="hanspub.40401-ref9">9</xref>]，最后电压电流信号经F/V转化器转换成电信号由PXI-9846采集卡进行采集，同时电流信号同步发送到保护电路板，保护电路板对电流信号处理后通过光纤传送到硬件连锁保护模块作为过流保护的依据。</p><p>图2. 引出电源控制和采集系统硬件结构及原理框图</p><p>通过光纤传输实现高压隔离和控制模块与引出电源之间的通信，CPCI7249作为引出电源的控制核心，用于实现27台电源模块的开通和关断、电源反馈状态的接收、系统高压输出的闭环调节等，同时所有模块的开关也均通过CPCI-7249板卡数字输出接口进行控制。对于保护阈值的设定则通过CPCI-6208板卡来实现，同样通过V/F和F/V转换模块对8路模拟信号设定值进行隔离传输。</p></sec><sec id="s8"><title>4. 引出电源控制和采集系统软件设计</title><p>引出电源控制和采集系统软件包括控制模块软件和数据采集软件，其运行于Linux操作系统下，为引出电源提供本地和远程两种运行模式，本地运行模式下通过本地运行界面对引出电源输出电压值、上升时间、过流阈值等进行设置，远程运行模式下则通过TCP网络通讯从NBI总控系统获取响应配置信息。</p><sec id="s8_1"><title>4.1. 控制模块软件</title><p>如图2所示，引出电源配电柜和PSM模块受控制模块驱动，控制模块根据本地或者远程配置信息控制PSM模块的开/关，并对引出电源输出电压进行反馈控制。电源控制模块软件包括上位机软件(客户端)和下位机(服务器)软件。下位机软件和数据采集软件均运行于CPCI-3510控制器中，具体实现则应用C语言来实现。上位机采用普通PC机，应用LabVIEW图形化编程语言实现可视化人机接口，上位机主要用于电源运行参数的设定和运行状态的监控，其与下位机通过TCP协议进行数据交互。</p><p>在射频负离子束引出实验过程中引出电源状态信息、电源输出设定参数等信息需要下位机软件进行处理，并上传给上位界面和下传给电源模块。因此下位机软件需实现以下功能：通过网络通讯接收上位机配置的引出电源运行参数，并根据参数配置情况计算各电源模块投入数量和投入顺序；根据过流阈值设置情况，实时获取各电源模块状态信息，发送到上位机进行远程监控，并在系统故障时采取相应连锁保护策略；根据采集到的引出电源电压，实现输出电压的闭环反馈控制。下位机软件设计流程如图3所示。下位机软件采用多线程技术实现对板卡输入端口的检测、输出端口的赋值和网络通讯等多个任务的同时调度,通过共享内存技术实现多个进程间数据读写的快速共享。</p><p>图3. 下位机软件设计流程图</p><p>引出电源的主要性能参数是对电压上升沿(50 us~100 ms，可调)及稳态精度(纹波小于1%)的控制，因此设计了高精度电压输出控制程序，通过CPCI-7249控制电源模块的开通和关断，CPCI7249芯片特点是响应速度快，处理速度快，可拓展的模块数目多，为以后模块数目升级提供了很大空间。电源模块的投入运行原理框图如图4所示，电源控制模块在接收到上位软件或者NBI总控发送的电压设定值(Uset)后，为降低输出电压上升沿的超调量，利用前馈控制分批次开通电源模块，使电源的输出电压达到电压设定值的90%，然后进入电源输出电压闭环反馈控制阶段，提高输出电压的控制精度，通过对输出电压闭环调整再开通剩下的10%的电源模块直到电源输出电压达到设定值，之后电源一直运行在输出电压闭环反馈控制模式。</p><p>图4. 电源模块投入运行原理框图</p></sec><sec id="s8_2"><title>4.2. 数据采集软件</title><p>如上所述，通过CPCI-3510控制器来实现对数据采集软件的处理，数据采集软件在Linux操作系统下应用C语言来进行编程。数据采集应用凌华PXI-9846采集卡，具有4个16位独立模拟采样通道，采用双缓冲异步操作方式，通过PXI-9846集成库功能编程实现数据采集。通过软件对板卡进行初始化配置后，PXI-9846板卡即可对引出电源电压、电流信号进行收集，最终通过WD_AI_VoltScale函数将数字数据转化为输入的物理信号值，用于监控显示和闭环控制。</p><p>数据采集软件运行流程如图5所示，软件运行后首先对板卡进行初始化配置，包括板卡的注册、时钟源配置、触发模式设置、数据读取方式及采集模拟输入电压范围设置等，配置完成后即可通过双缓冲模式读取数据，并按照一定的比例关系计算出引出电源系统实际输出的电压和电流值，用于实时显示和输出电压的反馈控制。</p></sec></sec><sec id="s9"><title>5. 性能测试与结论</title><p>本文设计的引出电源控制和采集系统已成功应用到射频负离子源实验运行中，实现对引出电源不同输出电压的控制，通过前馈控制和反馈控制相结合的方式实现电压上升时间与超调量间的平衡，在尽可能满足输出电压有较低电压过冲的同时又保障输出电压拥有较快的上升速度。引出电源模块响应测试如</p><p>图5. 数据采集程序流程图</p><p>图6. 引出电源模块响应测试图</p><p>图7. 不同上升沿响应时间测试图</p><p>图6所示，蓝线为控制信号，粉色为电源系统在接收到控制信号后输出的电压波形。引出电源16 kV/20A输出时，不同上升沿响应时间测试如图7所示，上升时间为50 us和200 us，测试结果表明本文设计的引出电源控制和采集系统满足射频负离子源束引出需求。</p></sec><sec id="s10"><title>基金项目</title><p>中国科学院合肥物质科学研究院院长基金青年“火花”项目(YZJJ2019QN11)、国家重点研发计划(No. 2017YFE0300101)资助。</p></sec><sec id="s11"><title>文章引用</title><p>赵远哲,胡纯栋,刘 伟,崔庆龙. 射频负离子源引出电源控制和采集系统设计Design of Control and Data Acquisition System for Extraction Power Supply of Prototype RF Ion Source[J]. 计算机科学与应用, 2021, 11(02): 326-333. https://doi.org/10.12677/CSA.2021.112033</p></sec><sec id="s12"><title>参考文献</title></sec></body><back><ref-list><title>References</title><ref id="hanspub.40401-ref1"><label>1</label><mixed-citation publication-type="other" xlink:type="simple">Wesson, J. (2011) Tokamaks. 4th Edition, Clarendon Press, Oxford.</mixed-citation></ref><ref id="hanspub.40401-ref2"><label>2</label><mixed-citation publication-type="other" xlink:type="simple">Xie, Y.H., Hu, C.D., Liu, S., et al. (2012) Erratum: “Arc Discharge Regulation of a Megawatt Hot Cathode Bucket Ion Source for the Experimental Advanced Su-perconducting Tokamak Neutral Beam Injector” [Rev. Sci. Instrum. 83, 013301 (2012)]. Review of Scientific Instruments, 83, Article Number: 129903. &lt;br&gt;https://doi.org/10.1063/1.4772571</mixed-citation></ref><ref id="hanspub.40401-ref3"><label>3</label><mixed-citation publication-type="other" xlink:type="simple">Brown, I.G. (2004) The Physics and Tech-nology of Ion Sources. 2nd Edition, Wiley-VCH, Weinheim, 937-941.</mixed-citation></ref><ref id="hanspub.40401-ref4"><label>4</label><mixed-citation publication-type="other" xlink:type="simple">Ma, S.X., et al. (2014) A Control System Based on PXI Technology for the ERCH Power Supply of J-TEXT. IEEE Transactions on Plasma Science, 42, 1709-1713. &lt;br&gt;https://doi.org/10.1109/TPS.2014.2320288</mixed-citation></ref><ref id="hanspub.40401-ref5"><label>5</label><mixed-citation publication-type="other" xlink:type="simple">Barp, M., Gaio, E. and Toigo, V. (2012) Studies on the ITER NBI Residual Ion Dump Power Supply System. IEEE Transactions on Plasma Science, 40, 659-664. &lt;br&gt;https://doi.org/10.1109/TPS.2011.2180930</mixed-citation></ref><ref id="hanspub.40401-ref6"><label>6</label><mixed-citation publication-type="other" xlink:type="simple">Xu, W.D., et al. (2012) Development of 8 MW Power Supply Based on Pulse Step Modulation Technique for Auxiliary Heating System on HL-2A. Plasma Science and Technology, 14, 263. &lt;br&gt;https://doi.org/10.1088/1009-0630/14/3/14</mixed-citation></ref><ref id="hanspub.40401-ref7"><label>7</label><mixed-citation publication-type="other" xlink:type="simple">杨雷. EAST辅助加热系统高压电源研制[D]: [博士学位论文]. 合肥: 中国科学院等离子体物理研究所, 2010.</mixed-citation></ref><ref id="hanspub.40401-ref8"><label>8</label><mixed-citation publication-type="other" xlink:type="simple">潘圣民, 傅鹏, 蒋力, 杨雷. 采用DSP和CPLD的100kV高压脉冲电源控制系统[J]. 高电压技术, 2009, 35(7): 1667-1671.</mixed-citation></ref><ref id="hanspub.40401-ref9"><label>9</label><mixed-citation publication-type="other" xlink:type="simple">张小丹. NBI控制系统关键参数数据处理软件设计[D]: [博士学位论文]. 合肥: 中国科学院等离子体物理研究所, 2015.</mixed-citation></ref></ref-list></back></article>