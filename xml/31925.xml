<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE article  PUBLIC "-//NLM//DTD Journal Publishing DTD v3.0 20080202//EN" "http://dtd.nlm.nih.gov/publishing/3.0/journalpublishing3.dtd"><article xmlns:mml="http://www.w3.org/1998/Math/MathML" xmlns:xlink="http://www.w3.org/1999/xlink" dtd-version="3.0" xml:lang="en" article-type="research article"><front><journal-meta><journal-id journal-id-type="publisher-id">SA</journal-id><journal-title-group><journal-title>Statistics and Application</journal-title></journal-title-group><issn pub-type="epub">2325-2251</issn><publisher><publisher-name>Scientific Research Publishing</publisher-name></publisher></journal-meta><article-meta><article-id pub-id-type="doi">10.12677/SA.2019.84081</article-id><article-id pub-id-type="publisher-id">SA-31925</article-id><article-categories><subj-group subj-group-type="heading"><subject>SA20190400000_34410967.pdf</subject></subj-group><subj-group subj-group-type="Discipline-v2"><subject>数学与物理</subject></subj-group></article-categories><title-group><article-title>
 
 
  基于马尔科夫和ARIMA模型的销量预测
   Sales Forecast Based on Markov and ARIMA Models
 
</article-title></title-group><contrib-group><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>周</surname><given-names>静曦</given-names></name><xref ref-type="aff" rid="aff1"><sup>1</sup></xref><xref ref-type="aff" rid="aff2"><sup>2</sup></xref></contrib></contrib-group><aff id="aff1"><label>1</label><addr-line>null</addr-line></aff><aff id="aff2"><label>1</label><addr-line>湖南农业大学信息科学技术学院，湖南 长沙</addr-line></aff><pub-date pub-type="epub"><day>02</day><month>08</month><year>2019</year></pub-date><volume>08</volume><issue>04</issue><fpage>711</fpage><lpage>723</lpage><permissions><copyright-statement>&#169; Copyright  2014 by authors and Scientific Research Publishing Inc. </copyright-statement><copyright-year>2014</copyright-year><license><license-p>This work is licensed under the Creative Commons Attribution International License (CC BY). http://creativecommons.org/licenses/by/4.0/</license-p></license></permissions><abstract><p>
 
 
   
   许多商家对于因货物存量不足而导致的补单问题存在极大的困扰，且补单问题主要存在两个问题：对现金流的占用和库存问题。因此，有效解决合理的补单策略是商家们急需解决的问题。本文基于某商家的历年销量数据，在数据预处理的基础上，从模型假设、模型建立与求解等几个方面对该商家的销售量数据进行ARIMA模型的建立，并根据ARIMA模型对未来几天的销售量进行拟合和预测分析，然后用马尔可夫模型进行结果检验，为该商家的补单及存货提供理论依据。 Many merchants are deeply troubled by the problem of filling orders caused by insufficient stock of goods, and the problem of filling orders mainly has two problems: the occupation of cash flow and the problem of inventory. Therefore, effective and reasonable replenishment strategy is an urgent problem for merchants. Based on the sales data of business over the years, and on the basis of data preprocessing, this paper studies the sales volume of a business from several aspects, such as model hypothesis, model establishment and solution. According to the establishment of ARIMA model, and according to ARIMA model, the sales volume in the next few days is fitted and predicted, and then the results are tested by Markov model, which provides a theoretical basis for the replenishment and inventory of the merchant. 
  
 
</p></abstract><kwd-group><kwd>ARIMA模型，销售预测，Matlab软件，马尔可夫模型,  ARIMA Model</kwd><kwd> Sales Forecast</kwd><kwd> Matlab Software</kwd><kwd> Markov Model</kwd></kwd-group></article-meta></front><body><sec id="s1"><title>基于马尔科夫和ARIMA模型的销量预测<sup> </sup></title><p>周静曦</p><p>湖南农业大学信息科学技术学院，湖南 长沙</p><p><img src="//html.hanspub.org/file/16-2580528x1_hanspub.png" /></p><p>收稿日期：2019年8月7日；录用日期：2019年8月21日；发布日期：2019年8月28日</p><disp-formula id="hanspub.31925-formula9"><graphic xlink:href="//html.hanspub.org/file/16-2580528x5_hanspub.png"  xlink:type="simple"/></disp-formula></sec><sec id="s2"><title>摘 要</title><p>许多商家对于因货物存量不足而导致的补单问题存在极大的困扰，且补单问题主要存在两个问题：对现金流的占用和库存问题。因此，有效解决合理的补单策略是商家们急需解决的问题。本文基于某商家的历年销量数据，在数据预处理的基础上，从模型假设、模型建立与求解等几个方面对该商家的销售量数据进行ARIMA模型的建立，并根据ARIMA模型对未来几天的销售量进行拟合和预测分析，然后用马尔可夫模型进行结果检验，为该商家的补单及存货提供理论依据。</p><p>关键词 :ARIMA模型，销售预测，Matlab软件，马尔可夫模型</p><disp-formula id="hanspub.31925-formula10"><graphic xlink:href="//html.hanspub.org/file/16-2580528x6_hanspub.png"  xlink:type="simple"/></disp-formula><p>Copyright &#169; 2019 by author(s) and Hans Publishers Inc.</p><p>This work is licensed under the Creative Commons Attribution International License (CC BY).</p><p>http://creativecommons.org/licenses/by/4.0/</p><p><img src="//html.hanspub.org/file/16-2580528x7_hanspub.png" /> <img src="//html.hanspub.org/file/16-2580528x8_hanspub.png" /></p></sec><sec id="s3"><title>1. 引言</title><p>商家在原来已有订单基础上，买家又追加订单，就是补单。有时补单也特指因品质异常而不能满足客户要求导致的补单。商家的补单主要与现金流的占用和库存问题等原因有关。商家的补单数量的多少将直接影响客户需求。过于乐观的补单将造成大量的库存，库存的积压带来的不仅是仓储成本的增加，更为严重的是要考虑清仓问题，清库存的方式无非是加大营销力度，以更低的成本清理货物，这时候不仅资金的流转变慢，而且低价的清仓也会拉低品牌溢价，而过于悲观的补单则会导致货不够卖而造成资源的浪费和利润的流失，这又是企业不愿意看到的，所以若能够将商家的日均销售量预测出来，科学的根据企业自身情况合理制定补单模型和计划也显得尤为重要，这也将极大地减少商家的流动资金占用、库存压力及仓储成本问题。</p></sec><sec id="s4"><title>2. 数据来源与模型假设</title><p>本文选取某厂家2018年7月~2019年3月的销售量数据作为研究对象，数据来源于2019年第12届华中地区数学建模邀请赛。为简化建模过程，本文做出以下假设：</p><p>假设题目所给未指定日期的销售量都为零；</p><p>假设问题所给数据真实可靠，并且筛选掉的数据不会对本文的研究结论做出影响；</p><p>假设未考虑的影响因素不会令模型的预测效果产生大幅度偏差。</p></sec><sec id="s5"><title>3. ARIMA预测模型建立与求解</title><p>本文选取基于ARIMA模型的时间序列分析预测 [<xref ref-type="bibr" rid="hanspub.31925-ref1">1</xref>] [<xref ref-type="bibr" rid="hanspub.31925-ref2">2</xref>] [<xref ref-type="bibr" rid="hanspub.31925-ref3">3</xref>] 。ARIMA模型的基本思想 [<xref ref-type="bibr" rid="hanspub.31925-ref4">4</xref>] 是首先将非平稳时间序列转化为平稳序列，然后通过对因变量的滞后项和随机误差项进行回归建立预测模型。它的具体形式可以表达成ARIMA (p, d, q)，其中：p表示自回归过程的阶数；d表示差分阶数；q表示移动平均过程的阶数。</p><p>1) 数据预处理及平稳性检验</p><p>我们首先随机选取某一个货号作为研究对象，利用SPSS软件将一该货号的销售量根据日期进行缺失值的填补，然后做出时序图，如图1所示。</p><p>根据时序图可知，原始数据并不平稳，因此，对该非平稳时间序列进行数据预处理，采用差分处理方法使序列平稳。首先采用一阶差分，若效果不好，则采用二阶差分，以此类推并观察动态结果，选择出最优差分解，发现当采用一阶差分时序列图再数值0上下波动，符合平稳序列的特点(见图2)，因此，我们初步判定差分次数d的值为1。</p><p>图1. 选取某一货号的销售量时序图</p><p>图2. 某一货号销售量数据的一阶差分处理图</p><p>2) 模型识别与定阶</p><p>经过处理差分后的数据已具备平稳序列的要求，接着，再根据ARIMA相关性的特征，读取平稳时间序列差分后的自相关图和偏自相关图初步识别p、q值。图3中ACF第一阶后呈截尾状，PACF第四阶后呈拖尾状，因此可初步判断差分后序列适合ARIMA (3, 1, 3)模型。</p><p>图3. 序列差分后的ACF图和APCF图</p><p>重复拟合ARIMA (p, d, q)模型中p和q的各种取值，并计算相应参数对应的显著性Sig.、R的平方来初步判定模型的最佳结束，计算结果见表1。</p><table-wrap id="table1" ><label><xref ref-type="table" rid="table1">Table 1</xref></label><caption><title> Test results of fitting model for each parameter in ARIMA mode</title></caption><table><tbody><thead><tr><th align="center" valign="middle" >参数(p, q)</th><th align="center" valign="middle" >R的平方</th><th align="center" valign="middle" >显著性Sig.</th></tr></thead><tr><td align="center" valign="middle" >(3, 3)</td><td align="center" valign="middle" >0.484</td><td align="center" valign="middle" >0.104</td></tr><tr><td align="center" valign="middle" >(3, 4)</td><td align="center" valign="middle" >0.474</td><td align="center" valign="middle" >0.062</td></tr><tr><td align="center" valign="middle" >(1, 4)</td><td align="center" valign="middle" >0.472</td><td align="center" valign="middle" >0.184</td></tr><tr><td align="center" valign="middle" >(1, 3)</td><td align="center" valign="middle" >0.471</td><td align="center" valign="middle" >0.195</td></tr><tr><td align="center" valign="middle" >...</td><td align="center" valign="middle" >...</td><td align="center" valign="middle" >...</td></tr></tbody></table></table-wrap><p>表1. ARIMA模型中各参数的拟合模型检验结果</p><p>观察表中的观测值，综合比较表中的各个指标，表中参数(3, 3)对应的相关系数R的平方最大，且显著性水平Sig.大于0.05，对参数(3, 1, 3)作模型拟合效果图(如图4所示)，观察实际拟合效果较好，因此，本实验选中ARIMA模型的参数估计为p = 3，d = 1，q = 3。</p><p>3) ARIMA模型预测</p><p>根据上述得出的ARIMA模型，其R的平方为0.484 (如图5所示)，达到的拟合程度较好，AR，MA的系数分别是0.065和0.503。因此，我们认为得到ARIMA模型结果为：</p><p>Δ x t = 0.033 Δ x t − 1 + ε t − 0.562 ε t</p><p>图4. ARIMA模型参数(3, 1, 3)对应的模型拟合图</p><p>图5. ARIMA (3, 1, 3)模型拟合结果</p><p>我们选近5天的销售量作为预测目标，首先在SPSS中增加5个自变量，采用预测建模方程，得到分析结果如图6所示，由此，我们可以得出结论：未来5天的货物销量分别为：3，3，2，2，3。</p></sec><sec id="s6"><title>4. 马尔可夫预测模型的建立</title><p>马尔可夫模型是一种常见的简单随机过程，该过程是研究一个系统的状况及其转移的理论。它通过对不同状态的初始概率以及状态之间的转移概率来研究，来确定状态的变化趋势，从而达到对未来进行预测的目的 [<xref ref-type="bibr" rid="hanspub.31925-ref5">5</xref>] 。</p><p>1) 马氏性检验</p><p>将某一货号销售量进行等级划分假设。设销售量为t。当 0 &lt; t ≤ 10 时，认为销量很差；当 10 &lt; t ≤ 20 时，认为销量较差；当 20 &lt; t ≤ 30 时，认为销量一般；当 30 &lt; t ≤ 40 时，认为销量较好；当 t ≥ 40 时，认为销量很好。由此可以将销售量划分为5个状态等级，如表2所示。</p><p>图6. ARIMA模型预测未来5天的销售量图</p><table-wrap id="table2" ><label><xref ref-type="table" rid="table2">Table 2</xref></label><caption><title> Sales grade status divisio</title></caption><table><tbody><thead><tr><th align="center" valign="middle" >状态</th><th align="center" valign="middle" >销量</th><th align="center" valign="middle" >等级</th></tr></thead><tr><td align="center" valign="middle" >1</td><td align="center" valign="middle" >0 &lt; t ≤ 10</td><td align="center" valign="middle" >很差</td></tr><tr><td align="center" valign="middle" >2</td><td align="center" valign="middle" >10 &lt; t ≤ 20</td><td align="center" valign="middle" >较差</td></tr><tr><td align="center" valign="middle" >3</td><td align="center" valign="middle" >20 &lt; t ≤ 30</td><td align="center" valign="middle" >一般</td></tr><tr><td align="center" valign="middle" >4</td><td align="center" valign="middle" >30 &lt; t ≤ 40</td><td align="center" valign="middle" >较好</td></tr><tr><td align="center" valign="middle" >5</td><td align="center" valign="middle" >t ≥ 40</td><td align="center" valign="middle" >很好</td></tr></tbody></table></table-wrap><p>表2. 销售量等级状态划分</p><p>由此计算出初始概率，可得：</p><p>f 1 = ( 190 7 4 1 2 9 8 4 2 1 3 6 3 1 2 1 1 3 0 3 2 2 1 4 12 )</p><p>系统在时刻t从状态m出发，经过i步后处于状态n的概率为状态转移概率，其中一步转移后形成的矩阵称为一步转移概率矩阵。各步转移概率为：</p><p>p 1 = ( 0.9314 0.0343 0.0196 0.0049 0.0098 0.3750 0.3333 0.1667 0.0833 0.0417 0.2000 0.4000 0.2000 0.0667 0.1333 0.1250 0.1250 0.3750 0 0.3750 0.0952 0.0952 0.0476 0.1905 0.5714 )</p><p>p 2 = ( 0.9310 0.0394 0.0099 0.0099 0.0099 0.4583 0.2083 0.2083 0.0417 0.0833 0.1333 0.2667 0.2000 0.1333 0.2667 0 0.7500 0 0.1250 0.1250 0.1429 0.0476 0.2381 0.0476 0.5283 )</p><p>p 3 = ( 0.9163 0.0591 0.0148 0.0049 0.0049 0.4167 0.2500 0.1250 0.0833 0.1250 0.2143 0.0714 0.2143 0.2143 0.2857 0.2500 0.1250 0.3700 0 0.2500 0.1905 0.1905 0.0952 0.0476 0.4762 )</p><p>p 4 = ( 0.9261 0.0493 0.0148 0.0049 0.0049 0.4167 0.2917 0.0833 0.1250 0.0833 0.2143 0.0714 0.2857 0.0714 0.3751 0.2500 0.1250 0.2500 0.1250 0.2500 0.1000 0.2000 0.1500 0.0500 0.5000 )</p><p>p 5 = ( 0.9212 0.0493 0.0246 0.0049 0 0.3750 0.2500 0.1667 0.0833 0.1250 0.2857 0.2143 0.1429 0.0714 0.2857 0.2500 0.1250 0.1250 0 0.5000 0.1579 0.1579 0.0526 0.1579 0.4737 )</p><p>经Matlab检验，给定显著水平 α ， χ 2 = 2 ∑ i = 1 m ∑ j = 1 m f i j | ln p i j p . j | &gt; χ α 2 ( ( m − 1 ) 2 ) ，可认为序列符合马氏</p><p>性，因此，可对该序列用马尔科夫模型。接下来可利用马尔科夫模型进行预测工作。(Matlab程序见附录三)</p><p>2) 马尔可夫模型预测及分析</p><p>首先计算各阶段自相关系数及权重。采用自相关系数作为相依关系强弱的度量，第s步的自相关系数为：</p><p>r s = ∑ t = 1 n / s ( X t − X &#175; ) ∑ t = 1 n / s ( X t − X &#175; ) 2</p><p>由此求得序列各阶自相关系数 r = ( 0.7091 , 0.6558 , 0.6131 , 0.6331 , 0.6448 ) 。</p><p>将自相关系数规范化可得各步马尔科夫的权重：</p><p>ω s = | r s | ∑ t = 1 l | r s |</p><p>计算出的权重为 ω = ( 0.2178 , 0.2014 , 0.1883 , 0 , 1944 , 0.1980 )</p><p>因此，根据以上数据可预测得到未来5天的销售状态等级：</p><table-wrap id="table3" ><label><xref ref-type="table" rid="table3">Table 3</xref></label><caption><title> 2018/12/08 sales grade forecas</title></caption><table><tbody><thead><tr><th align="center" valign="middle" >初始日期</th><th align="center" valign="middle" >初始状态</th><th align="center" valign="middle" >滞后阶数</th><th align="center" valign="middle" >状态1</th><th align="center" valign="middle" >状态2</th><th align="center" valign="middle" >状态3</th><th align="center" valign="middle" >状态4</th><th align="center" valign="middle" >状态5</th></tr></thead><tr><td align="center" valign="middle" >2018/12/03</td><td align="center" valign="middle" >1</td><td align="center" valign="middle" >5</td><td align="center" valign="middle" >0.9212</td><td align="center" valign="middle" >0.0493</td><td align="center" valign="middle" >0.0246</td><td align="center" valign="middle" >0.0049</td><td align="center" valign="middle" >0</td></tr><tr><td align="center" valign="middle" >2018/12/04</td><td align="center" valign="middle" >1</td><td align="center" valign="middle" >4</td><td align="center" valign="middle" >0.9261</td><td align="center" valign="middle" >0.0493</td><td align="center" valign="middle" >0.0148</td><td align="center" valign="middle" >0.0049</td><td align="center" valign="middle" >0.0049</td></tr><tr><td align="center" valign="middle" >2018/12/05</td><td align="center" valign="middle" >1</td><td align="center" valign="middle" >3</td><td align="center" valign="middle" >0.9163</td><td align="center" valign="middle" >0.0591</td><td align="center" valign="middle" >0.0148</td><td align="center" valign="middle" >0.0049</td><td align="center" valign="middle" >0.0049</td></tr><tr><td align="center" valign="middle" >2018/12/06</td><td align="center" valign="middle" >1</td><td align="center" valign="middle" >2</td><td align="center" valign="middle" >0.9310</td><td align="center" valign="middle" >0.0394</td><td align="center" valign="middle" >0.0099</td><td align="center" valign="middle" >0.0099</td><td align="center" valign="middle" >0.0099</td></tr><tr><td align="center" valign="middle" >2018/12/07</td><td align="center" valign="middle" >1</td><td align="center" valign="middle" >1</td><td align="center" valign="middle" >0.9314</td><td align="center" valign="middle" >0.0343</td><td align="center" valign="middle" >0.0196</td><td align="center" valign="middle" >0.0049</td><td align="center" valign="middle" >0.0098</td></tr><tr><td align="center" valign="middle" >Pi</td><td align="center" valign="middle" ></td><td align="center" valign="middle" ></td><td align="center" valign="middle" >0.9254</td><td align="center" valign="middle" >0.0459</td><td align="center" valign="middle" >0.0168</td><td align="center" valign="middle" >0.0059</td><td align="center" valign="middle" >0.0060</td></tr></tbody></table></table-wrap><p>表3. 2018/12/08销售等级预测</p><p>由表3可知，2018/12/08销售量为状态1的概率最大，故符合我们ARIMA模型预测结果。经过同样计算验证，得出2018/12/09至2018/12/12销售状态等级也为1，符合ARIMA模型估计。</p></sec><sec id="s7"><title>5. 模型检验</title><p>对ARIMA模型的参数p = 3，d = 1，q = 3进行残差分析检验，图7中可以看出残差图基本上都是平稳的，且预测出的观测值基本都在预测值的预测区间之内(见图8)，因此，我们认为ARIMA (3, 1, 3)模型是合理的，且判定其拟合效果较好。</p><p>图7. ARIMA (3, 1, 3)模型残差的ACF和PACF图</p><p>图8. ARIMA (3, 1, 3)模型的预测拟合效果图</p></sec><sec id="s8"><title>6. 结论</title><p>本文通过运用ARIMA模型对某厂家的销售量进行预测，同时采用马尔科夫模型进行检验，两种模型相结合，结果基本相一致，且所达到的预测结果较好。该文提出的预测结果也将有利于相关厂家指定相关的补单和存货方案来应对不同的订单问题所带来的后果，做到防患于未然。但本文目前所提出的两种销量预测模型仍有一些地方需要进一步改进，以提高预测的准确度与稳定性。</p></sec><sec id="s9"><title>文章引用</title><p>周静曦. 基于马尔科夫和ARIMA模型的销量预测 Sales Forecast Based on Markov and ARIMA Models[J]. 统计学与应用, 2019, 08(04): 711-723. https://doi.org/10.12677/SA.2019.84081</p></sec><sec id="s10"><title>参考文献</title></sec></body><back><ref-list><title>References</title><ref id="hanspub.31925-ref1"><label>1</label><mixed-citation publication-type="other" xlink:type="simple">葛娜, 孙连英, 赵平, 万莹. 基于ARIMA时间序列模型的销售量预测分析[J]. 北京联合大学学报, 2018(8): 28-33.</mixed-citation></ref><ref id="hanspub.31925-ref2"><label>2</label><mixed-citation publication-type="other" xlink:type="simple">魏杰, 张璇, 王柳, 汪丽萍. 基于灰色预测和ARIMA模型的疾病分析与预测[J]. 数理医药学杂志, 2018, 31(12): 1739-1742.</mixed-citation></ref><ref id="hanspub.31925-ref3"><label>3</label><mixed-citation publication-type="other" xlink:type="simple">徐梦茹, 王学明. 马尔可夫与ARIMA组合模型对地区降雨量的预测研究[J]. 计算机应用与软件, 2019, 36(3): 34-37.</mixed-citation></ref><ref id="hanspub.31925-ref4"><label>4</label><mixed-citation publication-type="other" xlink:type="simple">董大勇, 刘珂言. 基于ARIMA模型的工业品出厂价格指数预测与分析[J]. 统计与决策, 2016(1): 179-181.</mixed-citation></ref><ref id="hanspub.31925-ref5"><label>5</label><mixed-citation publication-type="other" xlink:type="simple">数学建模之马尔可夫预测[J/OL].  
&lt;br&gt;https://wenku.baidu.com/view/4bc708f66e1aff00bed5b9f3f90f76c660374c53.html, 2018-02-04.</mixed-citation></ref></ref-list></back></article>