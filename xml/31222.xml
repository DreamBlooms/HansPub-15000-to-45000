<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE article  PUBLIC "-//NLM//DTD Journal Publishing DTD v3.0 20080202//EN" "http://dtd.nlm.nih.gov/publishing/3.0/journalpublishing3.dtd"><article xmlns:mml="http://www.w3.org/1998/Math/MathML" xmlns:xlink="http://www.w3.org/1999/xlink" dtd-version="3.0" xml:lang="en" article-type="research article"><front><journal-meta><journal-id journal-id-type="publisher-id">NST</journal-id><journal-title-group><journal-title>Nuclear Science and Technology</journal-title></journal-title-group><issn pub-type="epub">2332-7111</issn><publisher><publisher-name>Scientific Research Publishing</publisher-name></publisher></journal-meta><article-meta><article-id pub-id-type="doi">10.12677/NST.2019.73013</article-id><article-id pub-id-type="publisher-id">NST-31222</article-id><article-categories><subj-group subj-group-type="heading"><subject>NST20190300000_76048899.pdf</subject></subj-group><subj-group subj-group-type="Discipline-v2"><subject>工程技术</subject></subj-group></article-categories><title-group><article-title>
 
 
  RINSIM仿真平台与S2000虚拟实物系统接口软件的设计与开发
  The Design and Development of Interface Software between RINSIM Simulation Platform and S2000 Emulation System
 
</article-title></title-group><contrib-group><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>李</surname><given-names>飞</given-names></name><xref ref-type="aff" rid="aff1"><sup>1</sup></xref><xref ref-type="corresp" rid="cor1"><sup>*</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>冯</surname><given-names>蔚</given-names></name><xref ref-type="aff" rid="aff1"><sup>1</sup></xref><xref ref-type="aff" rid="aff2"><sup>2</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>张</surname><given-names>侃</given-names></name><xref ref-type="aff" rid="aff1"><sup>1</sup></xref><xref ref-type="aff" rid="aff2"><sup>2</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>华</surname><given-names>志刚</given-names></name><xref ref-type="aff" rid="aff1"><sup>1</sup></xref><xref ref-type="aff" rid="aff2"><sup>2</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>杨</surname><given-names>勇勇</given-names></name><xref ref-type="aff" rid="aff1"><sup>1</sup></xref><xref ref-type="aff" rid="aff2"><sup>2</sup></xref></contrib></contrib-group><aff id="aff1"><addr-line>中核武汉核电运行技术股份有限公司，湖北 武汉</addr-line></aff><aff id="aff2"><addr-line>null</addr-line></aff><pub-date pub-type="epub"><day>08</day><month>07</month><year>2019</year></pub-date><volume>07</volume><issue>03</issue><fpage>91</fpage><lpage>97</lpage><permissions><copyright-statement>&#169; Copyright  2014 by authors and Scientific Research Publishing Inc. </copyright-statement><copyright-year>2014</copyright-year><license><license-p>This work is licensed under the Creative Commons Attribution International License (CC BY). http://creativecommons.org/licenses/by/4.0/</license-p></license></permissions><abstract><p>
 
 
   
   RINSIM仿真平台是基于Windows/Linux环境，广泛应用于国内各类核动力装置、核电厂模拟机、工程仿真机及设计仿真验证平台，能够提供核电仿真开发运行维护全寿期支持。S2000是机组数字化仪控系统(DCS)T2000在模拟机上的应用，能够实现全范围模拟机的实物模拟和虚拟实物模拟。本论文介绍了基于RINSIM仿真平台与S2000接口软件的功能和设计实现。在开发过程中采用了面向对象建模、模块化程序设计的方法，使用Visual Studio 2010和UML作为开发工具，利用多线程、Socket网络通讯等技术，实现了RINSIM仿真平台与S2000的常见教控命令及数据通讯。 The RINSIM simulation platform is based on the Windows/Linux environment and widely used in various domestic nuclear power plants, nuclear power plant simulators, engineering simulators, and design simulation verification platforms. It can provide nuclear power simulation development, operation and maintain the whole life support. S2000 is the application of the power plant distributed control system (DCS) T2000 on the simulator. It can realize stimulation and emulation in FSS. This paper introduces the function and design implementation of the interface software based on RINSIM simulation platform and S2000. In the development process, the method of object-oriented modeling and modular program design was adopted. Using Visual Studio 2010 and UML as development tools, multi-threaded, Socket network communication and other technologies were used to realize Simulator Control Functions and data transfer between RINSIM simulation platform and S2000.
    
  
 
</p></abstract><kwd-group><kwd>RINSIM仿真平台，S2000，Socket通讯，UML, RINSIM Simulation Platform</kwd><kwd> S2000</kwd><kwd> Socket Communication</kwd><kwd> UML</kwd></kwd-group></article-meta></front><body><sec id="s1"><title>RINSIM仿真平台与S2000虚拟实物系统接口软件的设计与开发<sup> </sup></title><p>李飞，冯蔚，张侃，华志刚，杨勇勇</p><p>中核武汉核电运行技术股份有限公司，湖北 武汉</p><p><img src="//html.hanspub.org/file/4-3150138x1_hanspub.png" /></p><p>收稿日期：2019年6月19日；录用日期：2019年7月4日；发布日期：2019年7月11日</p><disp-formula id="hanspub.31222-formula35"><graphic xlink:href="//html.hanspub.org/file/4-3150138x5_hanspub.png"  xlink:type="simple"/></disp-formula></sec><sec id="s2"><title>摘 要</title><p>RINSIM仿真平台是基于Windows/Linux环境，广泛应用于国内各类核动力装置、核电厂模拟机、工程仿真机及设计仿真验证平台，能够提供核电仿真开发运行维护全寿期支持。S2000是机组数字化仪控系统(DCS)T2000在模拟机上的应用，能够实现全范围模拟机的实物模拟和虚拟实物模拟。本论文介绍了基于RINSIM仿真平台与S2000接口软件的功能和设计实现。在开发过程中采用了面向对象建模、模块化程序设计的方法，使用Visual Studio 2010和UML作为开发工具，利用多线程、Socket网络通讯等技术，实现了RINSIM仿真平台与S2000的常见教控命令及数据通讯。</p><p>关键词 :RINSIM仿真平台，S2000，Socket通讯，UML</p><disp-formula id="hanspub.31222-formula36"><graphic xlink:href="//html.hanspub.org/file/4-3150138x6_hanspub.png"  xlink:type="simple"/></disp-formula><p>Copyright &#169; 2019 by authors and Hans Publishers Inc.</p><p>This work is licensed under the Creative Commons Attribution International License (CC BY).</p><p>http://creativecommons.org/licenses/by/4.0/</p><p><img src="//html.hanspub.org/file/4-3150138x7_hanspub.png" /> <img src="//html.hanspub.org/file/4-3150138x8_hanspub.png" /></p></sec><sec id="s3"><title>1. 引言</title><p>T2000数字仪控系统(DCS，Distributed Control System)广泛应用于国内外很多核电站。实践表明，核电站机组是否能够安全和可靠的运行，在很大程度上依赖于操作员操作DCS的能力及维修工程师设计和维护DCS系统的能力，对于功能负责的T2000系统尤其如此。因此全范围模拟机采用实物模拟和虚拟实物模拟的技术，不仅可完成电厂操纵员的培训和取证考试的相关工作，还能够实现对机组DCS系统进行功能验证、人机界面优化、一二层逻辑组态等技术支持功能 [<xref ref-type="bibr" rid="hanspub.31222-ref1">1</xref>] 。为了实现这样的全范围模拟机，需要设计并开发出基于RINSIM仿真平台的接口通讯软件，实现与S2000仿真系统的运行、冻结、复位IC/BC，同步、故障等教控命令及AI/AO/DI/DO四种类型数据的传递。</p></sec><sec id="s4"><title>2. 核电站全范围模拟机接口系统概述</title><p>在全范围模拟机系统中，RINSIM仿真平台和DCSFSS的接口软件主要包含如下三个部分：</p><p>1) RINSIM仿真平台和非安全级的DCSFSS之间的接口部分，即与S2000系统之间的接口软件；</p><p>2) RINSIM仿真平台和安全级的DCSFSS之间的接口部分，即与TXS系统之间的接口软件；</p><p>3) RINSIM仿真平台和后备盘台，应急盘台的设备之间的接口软件；</p><p>RINSIM仿真平台和DCSFSS的接口系统结构如图1。</p><sec id="s4_1"><title>2.1. RINSIM仿真软件</title><p>仿真支撑软件是构筑在Windows/Linux操作系统之上的一个供仿真机开发运行软件环境，是一台仿真平台的基础。仿真支撑软件的建立是为了提供对全范围模拟机开发运行全寿期的支持，它将操作系统的相关系统调用、函数库等与全范围模拟机系统的开发、运行、调试环境集成为一套软件工具，使模拟机开发者不用直接编写与操作系统相关的程序代码就能完成一整套全范围模拟机的开发、调试和运行 [<xref ref-type="bibr" rid="hanspub.31222-ref2">2</xref>] 。RINSIM仿真软件综合起来有以下几个特点：</p><p>1) 具有功能强大的仿真数据库。支持网络和分布式数据库。</p><p>2) 支持I/O数据管理，具有配置管理功能。</p><p>3) 支持同时存在多用户分调测试环境和实时仿真机环境。</p><p>图1. RINSIM仿真平台和DCSFSS的接口系统结构</p></sec><sec id="s4_2"><title>2.2. S2000仿真平台的结构及功能</title><p>S2000系统主要有实物仿真Level2 OM690(操纵员终端OT、处理单元PU、历史服务器单元SU等)、虚拟实物仿真的Level1 EMU，工程组态站(ES680，ES685，ENG)等系统组成。其中在EMU服务器上虚拟出实际机组的AS620，负责支持成组或单个控制级别的各项制动控制任务，采集过程控制测量值，完成开环和闭环控制，并传递来之OM690系统的指令。OM690系统为整个电厂的人机接口，是对整个核电站工艺过程进行操作和监测的窗口。ES680与电厂总线(Plant Bus)及终端总线(Terminal Bus)相连，完成AS组态及代码的下装和OM690系统的画面修改、传输等相关功能 [<xref ref-type="bibr" rid="hanspub.31222-ref3">3</xref>] 。</p></sec><sec id="s4_3"><title>2.3. RINSIM仿真平台与DCSFSS的接口概述</title><p>RINSIM仿真平台和S2000系统之间的接口软件采用的是C/S模式，即RINSIM仿真平台上的通讯软件是客户端，S2000系统为服务器端，两者之间的数据交互通过数据通讯程序软件来实现，RINSIM仿真平台与S2000系统的通过教控命令通讯软件。接口软件主要包含以下三个方面的功能：</p><p>虚拟实物Level 1仿真系统与RINSIM仿真平台的数据信号的交互；</p><p>虚拟实物Level 1仿真系统与教练员工作站软件的教控命令的传递；</p><p>二层人机界面(OM690)与教练员工作站软件的教控命令的传递；</p><p>二层人机界面与虚拟实物Level 1仿真系统的数据通过UDP发送和接收的方式来实现。</p><p>TELEPERM XS系统是核电厂安全级的DCS部分，通过虚拟实物模拟的方式将机组的TXS工程数据集成到RINSIM仿真平台中，TXS模型作为单独的受控模块运行在仿真平台。</p><p>盘台接口设备采用研华的工控产品。工控接口计算机通过socket通讯与RINSIM仿真平台进行数据交互，同时通过Modbus通讯协议进行数据的交互。</p></sec></sec><sec id="s5"><title>3. RINSIM2.0仿真平台与S2000系统接口设计</title><p>RINSIM仿真平台和S2000系统的所有的通讯都是点对点的TCP/IP的通讯模式，包括教控命令和数据的通讯。在这通讯模式中，一个提供监听(服务器)，另一个创建通讯进行连接(客户端)。</p><p>S2000系统主要包括2台虚拟实物Level 1仿真系统和OM690系统(图2)。</p><p>图2. 教练员工作站与模型计算机，虚拟实物Level 1仿真系统和OM690系统点对点的通信图</p><p>1) 教控命令的传递</p><p>教练员工作站通过RINSIM仿真平台发送教控命令到S2000系统。在这种模式中，RINSIM仿真平台为客户端，S2000系统为服务器端。</p><p>2) 数据的传递</p><p>RINSIM仿真平台和虚拟实物Level 1仿真系统直接进行数据传递。在这种模式中，RINSIM仿真平台为客户端，虚拟实物Level 1仿真系统为服务器端。所有的客户端软件都需要连接到服务端所提供的通讯端口，所有的IP地址和端口号都可以在模拟机系统中进行配置。</p><sec id="s5_1"><title>3.1. 传输报文的设计</title><p>RINSIM仿真平台和S2000系统之间教控命令传输的报文信息主要包括如下3个部分：</p><p>第一部分是报文头，这部分的格式是每种报文都必须包含的信息。</p><p>第二部分为时间部分，主要包含当前计算机和模拟机的时间信息。</p><p>第三部分为数据区，其长度在报文头中进行了说明。第3部分如果在运行，冻结命令状态下长度为0。</p></sec><sec id="s5_2"><title>3.2. 教控命令通信设计</title><p>在通信的设计上主要考虑了数据的通信采用高效的方式，因此所有的教控命令都通过通信软件进行传递，传递给S2000系统的虚拟实物Level 1仿真系统和OM690服务器。</p><p>RINSIM仿真平台和S2000系统之间的教控命令主要有运行，冻结，慢时，保存IC/BC，复位IC/BC，重演等。教练员工作站和S2000系统的OM，虚拟实物Level 1仿真系统通过TCP/IP协议进行教控命令的传递。</p></sec><sec id="s5_3"><title>3.3. RINSIM仿真平台和S2000系统的数据传递设计</title><p>在整个通讯设计中，S2000系统作为服务器端，RINSIM仿真平台作为客户端，RINSIM仿真平台创建socket建立与S2000系统的链接，S2000系统接收RINSIM仿真平台的socket请求。</p><p>RINSIM仿真平台和S2000系统之间所需要传递的数据在进行传递前会进行同步确认，确保2个系统之间的数据是一致的。</p><p>通讯协议提供了I/O数据的报文格式来实现通讯。这样的报文格式中包含了S2000系统数据的配置信息。在通讯成功建立后，仿真系统将会发送这样的报文到每台的虚拟实物Level 1仿真系统上。在虚拟实物Level 1仿真系统接收到I/O数据的报文数据后，如果数据符合Emulation的预期，将会返回I/O数据的报文给RINSIM仿真平台；反之则会断开通讯链接，通讯建立不成功；初始化的步骤主要包括创建通讯链接，交换I/O数据的报文，并相互就进行数据交换做好准备；周期性的数据交换只有在初始化的步骤完成后才能开始。在每个周期内，虚拟实物Level 1仿真系统和RINSIM仿真平台都会发送和接收包含当前值的I/O数据的报文；</p><p>虚拟实物Level 1仿真系统和RINSIM仿真平台的数据传递按照如下的规则进行：</p><p>虚拟实物Level 1仿真系统周期性的发送当前的输出数据到RINSIM仿真平台；RINSIM仿真平台周期性的发送当前的输出数据到虚拟实物Level 1仿真系统；只要模拟机处于启动的状态，数据的交换会周期性的进行，不论模拟机是处于运行还是冻结状态；周期性的数据传递是每100 ms进行一次；在该项目中有2台虚拟实物Level 1仿真系统，其数据处理的方式是一致的，具体流程如图3。</p><p>图3. 教控指令通讯概要图</p></sec></sec><sec id="s6"><title>4. RINSIM2.0仿真平台与S2000系统接口开发</title><p>在模拟机启动的过程前，首先启动S2000系统，之后教控命令通讯软件创建与S2000系统的通信连接。建立通信连接后，发送启动命令到S2000，并获得成功的反馈后，表示S2000可以进入正常教控命令的收发。教员在教练员工作站上发出的复位IC，冻结，运行的命令，S2000都能够接受其报文数据并给出相应的反馈。教控命令通讯软件收到反馈后，通知RINSIM仿真平台和教练员工作站。教员通过存储命令保存IC，BC。RINSIM仿真平台和非安全级的DCSFSS时间同步通过同步指令来实现，在模拟机正常启动后，每30秒实现一次同步。模拟机使用结束后，在关闭模拟机的时候发送关闭指令关闭的通信链接。具体如图4。</p><p>图4. I/O数据通信概要图</p></sec><sec id="s7"><title>5. 结论</title><p>在接口软件设计中，运用了模型化和软件系统开发的图形化语言UML，设计了教控命令和数据的通讯。在开发过程中采用了面向对象建模、模块化程序设计的方法，基于Windows的RINSIM仿真平台上，使用Visual Studio2010作为开发工具，利用多线程、Socket网络通讯等技术，实现了与S2000仿真系统的运行、冻结、复位IC/BC，同步、故障等教控命令及AI/AO/DI/DO四种类型数据的传递。本接口软件的实现，为全范围模拟机顺利交付提供了保证，对于其他DCS仿真平台接口软件的设计、开发、调试等提供了技术借鉴意义。</p></sec><sec id="s8"><title>文章引用</title><p>李 飞,冯 蔚,张 侃,华志刚,杨勇勇. RINSIM仿真平台与S2000虚拟实物系统接口软件的设计与开发The Design and Development of Interface Software between RINSIM Simulation Platform and S2000 Emulation System[J]. 核科学与技术, 2019, 07(03): 91-97. https://doi.org/10.12677/NST.2019.73013</p></sec><sec id="s9"><title>参考文献</title></sec></body><back><ref-list><title>References</title><ref id="hanspub.31222-ref1"><label>1</label><mixed-citation publication-type="other" xlink:type="simple">侯雪燕. 基于RINSIM平台的核电站模拟机DCS一层仿真[C]//中国计算机用户协会. 2015全国仿真技术学术会议论文集. 南京: 中国计算机用户协会, 2015: 149-151.</mixed-citation></ref><ref id="hanspub.31222-ref2"><label>2</label><mixed-citation publication-type="other" xlink:type="simple">王云伟. 虚拟TXP控制系统软件设计与开发[J]. 核动力工程, 2008, 29(6): 128-131.</mixed-citation></ref><ref id="hanspub.31222-ref3"><label>3</label><mixed-citation publication-type="other" xlink:type="simple">孙琦. 数字化仪控TXP系统在田湾核电站模拟机上的成功应用[C]//中国核能行业协会. 2011核能行业仿真技术及应用研讨会论文集. 北京: 中国核能行业协会, 2011: 222-238.</mixed-citation></ref></ref-list></back></article>