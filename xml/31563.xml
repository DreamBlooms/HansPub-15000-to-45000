<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE article  PUBLIC "-//NLM//DTD Journal Publishing DTD v3.0 20080202//EN" "http://dtd.nlm.nih.gov/publishing/3.0/journalpublishing3.dtd"><article xmlns:mml="http://www.w3.org/1998/Math/MathML" xmlns:xlink="http://www.w3.org/1999/xlink" dtd-version="3.0" xml:lang="en" article-type="research article"><front><journal-meta><journal-id journal-id-type="publisher-id">JISP</journal-id><journal-title-group><journal-title>Journal of Image and Signal Processing</journal-title></journal-title-group><issn pub-type="epub">2325-6753</issn><publisher><publisher-name>Scientific Research Publishing</publisher-name></publisher></journal-meta><article-meta><article-id pub-id-type="doi">10.12677/JISP.2019.83025</article-id><article-id pub-id-type="publisher-id">JISP-31563</article-id><article-categories><subj-group subj-group-type="heading"><subject>JISP20190300000_69523556.pdf</subject></subj-group><subj-group subj-group-type="Discipline-v2"><subject>信息通讯</subject></subj-group></article-categories><title-group><article-title>
 
 
  水下微孔气泡群的图像分割及特征检测
  Image Segmentation and Features Detection of Submerged Microporous Bubbles
 
</article-title></title-group><contrib-group><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>覃</surname><given-names>若琳</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>金</surname><given-names>良安</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>苑</surname><given-names>志江</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>高</surname><given-names>可心</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib></contrib-group><aff id="aff2"><addr-line>大连舰艇学院航海系，辽宁 大连</addr-line></aff><aff id="aff1"><addr-line>null</addr-line></aff><pub-date pub-type="epub"><day>02</day><month>07</month><year>2019</year></pub-date><volume>08</volume><issue>03</issue><fpage>194</fpage><lpage>201</lpage><permissions><copyright-statement>&#169; Copyright  2014 by authors and Scientific Research Publishing Inc. </copyright-statement><copyright-year>2014</copyright-year><license><license-p>This work is licensed under the Creative Commons Attribution International License (CC BY). http://creativecommons.org/licenses/by/4.0/</license-p></license></permissions><abstract><p>
 
 
  
    目前，检测水下大气泡群特征的主要方法是用数字图像处理技术处理高速摄像机采集到的气泡群图像。本文针对高速摄像机采集到的斜上方投光的水下小孔气泡群图像，研究了基于改进分水岭算法的气泡群图像分割和基于区域生长算法的气泡群特征检测方法，解决了图像中粘连、重叠气泡的分割及特征检测，较常用的阈值分割方法检测气泡群特征更准确；同时，解决了斜上方投光拍摄的气泡群图像噪声多、气泡亮度不均匀造成的传统分水岭算法产生过度分割的问题。
    At present, the main method for features detection of submerged bubbles is Digital image pro-cessing of bubbles images photoed by high speed camera. In this paper, we develop a bubbles segmentation algorithm based on improved watershed algorithm as well as an algorithm for bub-bles features detection based on regional growth method, which solves the segmentation and fea-tures detection for adhesive and overlap bubbles for the bubbles image photoed by high speed cam-era with oblique-upper irradiation. It is more accurate to detect the features of bubbles than tradi-tional threshold segmentation. The algorithm in this paper also eliminates ultra-segmentation of classical watershed algorithm caused by noise and uneven brightness of bubbles. 
  
 
</p></abstract><kwd-group><kwd>航海技术与装备工程，气泡图像分割，分水岭，区域生长, Navigation Technology and Equipment Engineering</kwd><kwd> Bubble Image Segmentation</kwd><kwd> Watershed</kwd><kwd> 
Regional Growth</kwd></kwd-group></article-meta></front><body><sec id="s1"><title>水下微孔气泡群的图像分割及特征检测<sup> </sup></title><p>覃若琳，金良安，苑志江，高可心</p><p>大连舰艇学院航海系，辽宁 大连</p><p><img src="//html.hanspub.org/file/11-2670196x1_hanspub.png" /></p><p>收稿日期：2019年7月6日；录用日期：2019年7月24日；发布日期：2019年7月31日</p><disp-formula id="hanspub.31563-formula5"><graphic xlink:href="//html.hanspub.org/file/11-2670196x5_hanspub.png"  xlink:type="simple"/></disp-formula></sec><sec id="s2"><title>摘 要</title><p>目前，检测水下大气泡群特征的主要方法是用数字图像处理技术处理高速摄像机采集到的气泡群图像。本文针对高速摄像机采集到的斜上方投光的水下小孔气泡群图像，研究了基于改进分水岭算法的气泡群图像分割和基于区域生长算法的气泡群特征检测方法，解决了图像中粘连、重叠气泡的分割及特征检测，较常用的阈值分割方法检测气泡群特征更准确；同时，解决了斜上方投光拍摄的气泡群图像噪声多、气泡亮度不均匀造成的传统分水岭算法产生过度分割的问题。</p><p>关键词 :航海技术与装备工程，气泡图像分割，分水岭，区域生长</p><disp-formula id="hanspub.31563-formula6"><graphic xlink:href="//html.hanspub.org/file/11-2670196x6_hanspub.png"  xlink:type="simple"/></disp-formula><p>Copyright &#169; 2019 by author(s) and Hans Publishers Inc.</p><p>This work is licensed under the Creative Commons Attribution International License (CC BY).</p><p>http://creativecommons.org/licenses/by/4.0/</p><p><img src="//html.hanspub.org/file/11-2670196x7_hanspub.png" /> <img src="//html.hanspub.org/file/11-2670196x8_hanspub.png" /></p></sec><sec id="s3"><title>1. 引言</title><p>舰船气泡尾流场是尾流自导鱼雷追踪、打击舰船的主要检测目标，因此尾流消隐技术对提高舰船的隐身性能具有重大意义。人工大气泡消泡法是舰船尾流消隐的重要方法，即向尾流区释放人工生成的毫米级大气泡群(下文简称为大气泡群)，利用大气泡对微小尾流气泡的聚并、携带作用实现气泡尾流场的消隐。生成可控的大气泡群是人工大气泡消泡法的关键，需要充分研究消泡装置生成大气泡群的规律，因此要对水下大气泡群的数量、尺度、形态等特征进行检测。</p><p>目前检测水下大气泡群特征的主要方法是利用高速摄像机采集气泡图像，再用数字图像处理的方法从图像中提取出气泡群特征。一般用于水下气泡特征检测的方法有边缘检测、阈值分割、基于模型的检测以及分水岭分割。边缘检测和阈值分割对于气泡与背景对比度高的背投光条件下拍摄的气泡图像有较好的检测效果，但对气泡与背景对比度较低、噪声较多的侧投光和顶部投光图像无法准确地检测出气泡群特征，而且阈值分割对于气泡独立的气泡群图像而言有较好地分割效果，但对于存在大量气泡粘连、重叠的气泡群图像分割效果较差；基于模型的检测主要有Hough变换和Snake活动轮廓 [<xref ref-type="bibr" rid="hanspub.31563-ref1">1</xref>] ，但毫米级的大气泡在水中会因形变而产生不规则形状，因此该方法不适用 [<xref ref-type="bibr" rid="hanspub.31563-ref2">2</xref>] [<xref ref-type="bibr" rid="hanspub.31563-ref3">3</xref>] [<xref ref-type="bibr" rid="hanspub.31563-ref4">4</xref>] [<xref ref-type="bibr" rid="hanspub.31563-ref5">5</xref>] ；为了避免经典分水岭算法应用于气泡群图像时的过度分割问题、适应不同实验条件下拍摄的气泡群图像，国内外学者研究了多种改进的分水岭分割方法，但到目前为止还没有一种通用于所有气泡群图像的分水岭分割，需要根据具体的图像情况做一定的改进 [<xref ref-type="bibr" rid="hanspub.31563-ref6">6</xref>] [<xref ref-type="bibr" rid="hanspub.31563-ref7">7</xref>] [<xref ref-type="bibr" rid="hanspub.31563-ref8">8</xref>] [<xref ref-type="bibr" rid="hanspub.31563-ref9">9</xref>] 。另外，目前的文献中大多只研究了如何将气泡与背景、气泡与粘连气泡分割出来，但对于分割后如何统计气泡的数量和尺寸分布没有详细的研究。</p><p>在实验室条件下搭建水下小孔气泡群图像采集系统(如图1)，空气压缩机产生的空气流入直径10 mm的导气管，经导气管末端0.7 mm的小孔排入水中生成气泡群，用GOPRO BLACK6高速摄像机在气泡群侧面采集气泡群图像，空气流量5.0 SLM，高速摄像机拍摄帧率为240帧/s。本文针对上述条件下采集到的斜上方投光的水下小孔气泡群图像，用预处理滤波、图像增强以及前背景标记的方法对传统分水岭算法进行改进，对气泡群进行分割和计数，并用区域生长算法提取气泡群的尺寸分布信息。结果表明本文研究的气泡群图像分割及特征检测算法能够较准确地对斜上方投光的水下小孔气泡群图像进行分割及特征检测。</p></sec><sec id="s4"><title>2. 传统分水岭分割算法</title><p>传统分水岭算法基于三维地形学的思想，将图像根据其像素灰度值大小转化成“地形图”，根据类比思想的不同分为“模拟泛洪法”和“模拟降水法”两种方法。</p><p>图1. 实验装置示意图</p><p>1) 模拟泛洪法</p><p>如图2所示的一幅灰度图转换而成的地形图，灰度值的大小对应地形的高低。假设在每个地形低洼处的最低点打一个洞，让水通过洞从低到高向上浸没，不同区域的水会在边缘处汇集，若在各区域水面汇集处建起水坝阻隔水的汇集，这片地形就被分成了不同区域，这些区域在分水岭算法中叫做汇水盆地，水坝连成的线就对应分水岭的分割线，也就是分割结果 [<xref ref-type="bibr" rid="hanspub.31563-ref10">10</xref>] 。</p><p>图2. 模拟泛洪法原理示意图</p><p>2) 模拟降水法</p><p>模拟降水法原理示意图如图3所示，假设雨水落在地形表面顺着山势向下流动。落在山脊的水滴会等概率地流入周围区域；如果两滴落在不同位置的水滴最终流入同一个局部最低点，则这两滴水最初降落的位置属于同一个区域。最终，水滴降落在其上能流到相同局部最低点的表面形成一个分割区域，山脊就是分割线 [<xref ref-type="bibr" rid="hanspub.31563-ref10">10</xref>] 。</p><p>分水岭分割算法能够对微弱边缘有较好地响应，能够精细地分割图像，同时能够对粘连目标进行分割。但是分水岭分割算法对图像中的噪声非常敏感，因为噪声会严重恶化梯度图像使分水岭分割出的边缘产生偏移；同时，图像中的噪声、纹理等细节会形成很多局部最小值，导致过度分割。图4(a)~(b)分别是气泡群图像原图及传统分水岭算法的分割结果，可见传统分水岭算法运用到斜上方投光的气泡群图像中会产生严重的过度分割现象。针对传统分水岭算法的弱点，本文基于预处理滤波、图像增强和前背景标记的方法对传统分水岭算法进行了改进。</p><p>图3. 模拟降水法原理示意图</p><p>图4. 气泡群原图及传统分水岭分割；(a) 气泡群原图，(b) 传统分水岭分割结果</p></sec><sec id="s5"><title>3. 改进的分水岭算法</title><p>传统分水岭分割算法的误差主要由图像中的噪声引起，因此本文采用预处理滤波和图像增强的方法来抑制图像噪声、突出目标气泡；同时引入前景标记和背景标记，将气泡与背景及微小噪声区别开来，使改进后的分水岭分割更准确。</p><p>1) 预处理滤波</p><p>原始拍摄图像由于气泡及水中微小杂质对光线的散射等原因存在较大噪声，为了降低图像中的噪声，需要对图像进行滤波处理。传统的平滑滤波器在抑制噪声的同时也会模糊图像的边缘信息，而气泡的边缘信息是分割图像的主要依据，因此，本文采用一种改进的平滑滤波器，即保持边缘滤波器。</p><p>保持边缘滤波器的原理为，在待处理像素周围的n &#215;n板块中，选择k个与待处理像素的灰度值之差最小的像素，用这k个像素的灰度值均值作为待处理像素的灰度值。如图5，取待处理像素为中心的3 &#215; 3板块(图中灰色区域)，在板块里的9个像素中，求与待处理像素灰度值之差最小的5个像素的灰度值的均值，作为待处理像素的灰度值(图中，与待处理像素灰度值之差最小的5个像素的灰度值分别为114，111，107，124，100；均值为111，于是待处理像素灰度值由114变为111)。</p><p>图5. 保持边缘滤波器原理示意图</p><p>保持边缘滤波器在抑制高斯噪声和椒盐噪声的同时，由于不会出现两个区域信息的混叠平均，对图像目标及目标边缘的清晰度保持程度较传统的平滑滤波器有明显提高 [<xref ref-type="bibr" rid="hanspub.31563-ref11">11</xref>] 。滤波前后的灰度图像如图6(a)~(b)所示，可见用这种保持边缘滤波的方法在滤除噪声的同时能较好地保持边缘清晰度。</p><p>图6. 改进分水岭分割算法各步骤结果；(a) 滤波前气泡群图像，(b) 滤波后气泡群图像，(c) 均衡化后气泡群图像，(d) 重建后气泡群图像，(e) 前景标记，(f) 背景标记，(g) 梯度幅值图像，(h) 改进的分水岭分割结果</p><p>2) 灰度均衡</p><p>为了增大目标气泡与背景的对比度，弱化噪声，使后续分割更准确，对滤波后的灰度图像进行灰度均衡化处理，将图像的灰度扩展至0~255范围。将图像各像素的灰度值按照式(1)映射成新的灰度值，映射不改变像素灰度值的相对大小，但是会增大灰度的对比度。灰度均衡化前后的图像如图6(c)所示。</p><p>f ( x , y ) = f 0 ( x , y ) 2 max ( f 0 ( x , y ) 2 ) &#215; 255 (1)</p><p>3) 标记前景对象</p><p>为了避免噪声引起的过度分割，只对气泡区域进行分割，对图像中的前景目标(即气泡)进行标记。注意到气泡是图像中的局部高亮区域，因此可用标记灰度图像中的局部最大值的方法来做前景标记。图像中的残留噪声有可能会被标记，同时气泡本身亮度的不均匀容易导致同一个气泡检测出多个局部最大值，造成重复标记。为了避免上述影响后续分割准确性的问题，使用形态学重建的方法对灰度均衡化后的图像进行清理，接连使用形态学中基于开的重建和基于闭的重建，对重建后的图像求补，形态学重建后图像如图6(d)所示，可见形态学重建可以均匀气泡灰度，消除气泡周边由于散射光线产生的细小突刺以及图像噪声，在每个气泡内部创建灰度的单位极大值，突出气泡中心的高亮区域，为后续用检测局部最大值的方法标记气泡奠定基础。</p><p>在重建后的气泡图像上检测局部最大值，检测出的局部最大值图像是二值图像，对它进行形态学闭操作，以将局部最大值之间细微的断点连接上，进一步杜绝同一个气泡检测出多个局部最大值的情况，接着用形态学腐蚀操作来清理标记连通域的边缘毛刺并收缩标记连通域，得到最终的局部最大值标记结果。图6(e)为局部最大值图像叠加到原图像的比对图，可见通过局部最大值可较准确地标记前景气泡。</p><p>4) 标记背景对象</p><p>背景对象就是图像中除气泡外的黑色区域，在较准确地前景标记的前提下，不需要背景标记非常接近目标对象的边缘，可以通过计算背景骨架影响范围来做背景标记。本文先用Canny边缘检测器对重建后的图像进行边缘检测，用形态学闭操作将间断的边缘连接起来，接着对检测出的边缘进行孔洞填充，得到一个将气泡区域与背景区域区别开来的二值图像，对二值图像进行距离变换，用变换后图像的分水岭脊线作为背景标记，为了更好地观察背景标记的情况，将背景标记叠加到上述二值图像上，如图6(f)。</p><p>5) 分水岭分割</p><p>分水岭算法一般是对原图像的梯度图像进行分割，而梯度图像的局部最小值就对应“地形图”中的局部最低点。为了防止残留噪声产生的局部最小值影响分割结果，用前景标记与背景标记对梯度图像进行形态学重建，使梯度图像只在前景标记和背景标记不为零的时候有局部最小值，修改后的梯度幅值图像如图6(g)。对修改后的梯度幅值图像进行分水岭分割得到气泡分割图像，为了验证上述分割算法的准确性，将分割出的气泡边界叠加到气泡群原图像上，检验分割边界与原图像气泡边界的吻合度，如图6(h)，可见对比图4(b)传统分水岭算法的分割结果，本文研究的改进分水岭分割算法较好地解决了过度分割问题，能够较准确地对实验室条件下的斜上方投光水下小孔气泡群图像进行分割。</p></sec><sec id="s6"><title>4. 气泡群特征检测</title><p>对气泡群图像进行分割后，就可以根据分割结果进行气泡数量和尺寸分布的特征检测了。图6(e)中已对图像中的气泡进行了标记，统计标记图像中非零连通域的数量，就可得到图像中的气泡数量，图6(e)中气泡数量为286个。</p><p>本文采用基于边界的区域生长算法对气泡尺寸分布进行检测。基于边界的区域生长算法的原理为，在分水岭分割提取出的边界图像中，在每个区域内部标记一个种子像素，本文选取的种子像素为前景标记图像中气泡高亮连通域中任意一个像素，从这个种子出发向周围扩展该种子的连通域并统计每个连通域的像素大小，直至扩展碰到边界为止，此时由该种子扩展出的直至边界的连通域就是一个气泡，该连通域的像素大小就是气泡的像素大小。给每个连通域赋予不同的灰度值显示出来，可以观察用基于边界的区域生长分割出的气泡群图像的分割结果，如图7所示。用式(2)计算出气泡的等效像素直径，为气泡的等效直径，为气泡的像素面积。</p><p>d 0 = 4 S π (2)</p><p>图7. 基于边界的区域生长算法分割结果</p><p>检测除了气泡的像素大小，要计算其实际大小，需要对图像的像素大小进行校正。高速摄像机拍摄到的原始图像中包含实验装置中的直径10 mm导气管，用边缘检测方法检测出导气管的像素直径为77 pixels，那么图像的像素比例为1 pixel = 0.13 mm。从而可得到图像中气泡群的尺寸分布如图8所示，气泡等效直径大致成正态分布，等效直径集中在0~1.5 mm，平均直径为1.099 mm。</p><p>图8. 气泡群尺寸分布</p></sec><sec id="s7"><title>5. 总结与展望</title><p>本文针对高速摄像机采集到的斜上方投光的水下小孔气泡群图像，研究了基于改进分水岭算法的气泡群图像分割和基于区域生长算法的气泡群特征检测方法，将分割结果与原图像比对，结果表明本文研究的算法能够对气泡群图像进行较准确地气泡群分割，解决了图像中粘连、重叠气泡的分割及特征检测，较常用的阈值分割方法检测气泡群特征更准确；同时，引入预处理滤波、图像增强和前背景标记对传统分水岭算法进行改进，解决了斜上方投光拍摄的气泡群图像噪声多、气泡亮度不均匀造成的传统分水岭算法产生过度分割的问题。</p><p>本文改进的分水岭分割算法能够较准确地对毫米级气泡群图像进行分割，但分割的准确度依赖于背景标记过程中Canny边缘检测的阈值，对于不同的气泡图像要设置相适应的阈值，自适应能力仍有不足，未来将对算法进一步改进，使算法能够自动确定气泡群图像Canny边缘检测的阈值，提高算法的自适应能力和智能程度。</p></sec><sec id="s8"><title>文章引用</title><p>覃若琳,金良安,苑志江,高可心. 水下微孔气泡群的图像分割及特征检测Image Segmentation and Features Detection of Submerged Microporous Bubbles[J]. 图像与信号处理, 2019, 08(03): 194-201. https://doi.org/10.12677/JISP.2019.83025</p></sec><sec id="s9"><title>参考文献</title></sec></body><back><ref-list><title>References</title><ref id="hanspub.31563-ref1"><label>1</label><mixed-citation publication-type="other" xlink:type="simple">丛培盛, 孙建忠. 分水岭算法分割显微图像中重叠细胞[J]. 中国图象图形学报, 2006, 11(12): 1781-1783.</mixed-citation></ref><ref id="hanspub.31563-ref2"><label>2</label><mixed-citation publication-type="other" xlink:type="simple">Davidson, J.F. and Schuler, B.O.G. (1997) Bubble Formation at an Orifice in a Viscous Liquid. Chemical Engineering Research and Design, 75, S105-S114. https://doi.org/10.1016/S0263-8762(97)80008-1</mixed-citation></ref><ref id="hanspub.31563-ref3"><label>3</label><mixed-citation publication-type="other" xlink:type="simple">Leibson, I. and Holcomb, E.G. (1956) Rate of Flow and Mechanics of Bubble Formation from Single Submerged Orifices. AIChE Journal, 2, 297-300.</mixed-citation></ref><ref id="hanspub.31563-ref4"><label>4</label><mixed-citation publication-type="other" xlink:type="simple">Ramakrishnan, S., Kumar, R. and Kuloor, N.R. (1969) Studies in Bubble Formation 1 Bubble Formation under Constant Flow Conditions. Chemical Engineering Science, 24, 731-747.</mixed-citation></ref><ref id="hanspub.31563-ref5"><label>5</label><mixed-citation publication-type="other" xlink:type="simple">Mccannt, D.J.R. and Princes, G.H. (1971) Regimes of Bubbling at a Submerged Orifice. Chemical Engineering Science, 26, 1505-1512. https://doi.org/10.1016/0009-2509(71)86042-6</mixed-citation></ref><ref id="hanspub.31563-ref6"><label>6</label><mixed-citation publication-type="other" xlink:type="simple">邵建斌, 陈刚. 基于分水岭算法的气泡图像分割[J]. 西安理工大学学报, 2011, 27(2): 185-189.</mixed-citation></ref><ref id="hanspub.31563-ref7"><label>7</label><mixed-citation publication-type="other" xlink:type="simple">王娅. 血液红细胞图像自适应标记分水岭分割算法[J]. 中国图象图形学报, 2017, 22(12): 1779-1787.</mixed-citation></ref><ref id="hanspub.31563-ref8"><label>8</label><mixed-citation publication-type="other" xlink:type="simple">杨程. 图像分析技术用于液相中气泡群粒径分布的检测[D]: [硕士学位论文]. 南京: 南京大学化学工程系, 2015.</mixed-citation></ref><ref id="hanspub.31563-ref9"><label>9</label><mixed-citation publication-type="other" xlink:type="simple">伍雁鹏, 彭小奇, 等. 基于峰谷分析的气泡形状特征计算方法[J]. 中南大学学报(自然科学版), 2014, 45(9): 3038-3042.</mixed-citation></ref><ref id="hanspub.31563-ref10"><label>10</label><mixed-citation publication-type="other" xlink:type="simple">刁智华, 赵春江, 等. 分水岭算法的改进方法研究[J]. 计算机工程, 2010, 36(17): 4-6.</mixed-citation></ref><ref id="hanspub.31563-ref11"><label>11</label><mixed-citation publication-type="other" xlink:type="simple">王维. 舰船尾流微小气泡幕光学测量技术研究[D]: [博士学位论文]. 西安: 中科院西安光学精密机械研究所, 2015.</mixed-citation></ref></ref-list></back></article>