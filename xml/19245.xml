<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE article  PUBLIC "-//NLM//DTD Journal Publishing DTD v3.0 20080202//EN" "http://dtd.nlm.nih.gov/publishing/3.0/journalpublishing3.dtd"><article xmlns:mml="http://www.w3.org/1998/Math/MathML" xmlns:xlink="http://www.w3.org/1999/xlink" dtd-version="3.0" xml:lang="en" article-type="research article"><front><journal-meta><journal-id journal-id-type="publisher-id">MSE</journal-id><journal-title-group><journal-title>Management Science and Engineering</journal-title></journal-title-group><issn pub-type="epub">2167-664X</issn><publisher><publisher-name>Scientific Research Publishing</publisher-name></publisher></journal-meta><article-meta><article-id pub-id-type="doi">10.12677/MSE.2016.54016</article-id><article-id pub-id-type="publisher-id">MSE-19245</article-id><article-categories><subj-group subj-group-type="heading"><subject>MSE20160400000_22989688.pdf</subject></subj-group><subj-group subj-group-type="Discipline-v2"><subject>经济与管理</subject></subj-group></article-categories><title-group><article-title>
 
 
  带充电设施的电动班车路径规划问题研究
  Research on Electric Shuttle Bus Routing Problem with Recharging Station
 
</article-title></title-group><contrib-group><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>邢</surname><given-names>芳芳</given-names></name><xref ref-type="aff" rid="aff1"><sup>1</sup></xref><xref ref-type="corresp" rid="cor1"><sup>*</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>贾</surname><given-names>永基</given-names></name><xref ref-type="aff" rid="aff1"><sup>1</sup></xref><xref ref-type="aff" rid="aff2"><sup>2</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>蒋</surname><given-names>琦</given-names></name><xref ref-type="aff" rid="aff1"><sup>1</sup></xref><xref ref-type="aff" rid="aff2"><sup>2</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>郑</surname><given-names>瑶</given-names></name><xref ref-type="aff" rid="aff1"><sup>1</sup></xref><xref ref-type="aff" rid="aff2"><sup>2</sup></xref></contrib></contrib-group><aff id="aff1"><addr-line>东华大学旭日工商管理学院，上海</addr-line></aff><aff id="aff2"><addr-line>null</addr-line></aff><author-notes><corresp id="cor1">* E-mail:<email>862722525@qq.com(邢芳)</email>;</corresp></author-notes><pub-date pub-type="epub"><day>15</day><month>12</month><year>2016</year></pub-date><volume>05</volume><issue>04</issue><fpage>149</fpage><lpage>156</lpage><permissions><copyright-statement>&#169; Copyright  2014 by authors and Scientific Research Publishing Inc. </copyright-statement><copyright-year>2014</copyright-year><license><license-p>This work is licensed under the Creative Commons Attribution International License (CC BY). http://creativecommons.org/licenses/by/4.0/</license-p></license></permissions><abstract><p>
 
 
  针对公司班车运行的实际情况，考虑电动班车续航能力有限、客户预约服务时间窗不同等因素，构建了带充电设施的电动班车路径规划问题的混合整数规划模型，该模型可以提高电动班车运行的准时性，并提高其使用效率。然后，提出了求解该模型的遗传算法，测试结果表明，本文提出的算法是有效的。
   According to the actual situation of company shuttle bus, considering the limited range of electric shuttle bus and the different customers’ reservation time windows, a mixed integer programming model for the electric shuttle bus routing problem with recharging station is constructed. By this model, the operation time and the utilization efficiency of the electric shuttle bus are improved. Then, a genetic algorithm is proposed to solve this model, and test results demonstrate that the algorithm proposed in this paper is efficient.
 
</p></abstract><kwd-group><kwd>充电设施，电动汽车，车辆路径问题，遗传算法, Recharging Station</kwd><kwd> Electric Vehicle</kwd><kwd> Vehicle Routing Problem</kwd><kwd> Genetic Algorithm</kwd></kwd-group></article-meta></front><body><sec id="s1"><title>带充电设施的电动班车路径规划问题研究<sup> </sup></title><p>邢芳芳，贾永基，蒋琦，郑瑶</p><p>东华大学旭日工商管理学院，上海</p><disp-formula id="hanspub.19245-formula25"><graphic xlink:href="http://html.hanspub.org/file/1-2330220x6_hanspub.png"  xlink:type="simple"/></disp-formula><p>收稿日期：2016年11月25日；录用日期：2016年12月9日；发布日期：2016年12月15日</p><disp-formula id="hanspub.19245-formula26"><graphic xlink:href="http://html.hanspub.org/file/1-2330220x7_hanspub.png"  xlink:type="simple"/></disp-formula></sec><sec id="s2"><title>摘 要</title><p>针对公司班车运行的实际情况，考虑电动班车续航能力有限、客户预约服务时间窗不同等因素，构建了带充电设施的电动班车路径规划问题的混合整数规划模型，该模型可以提高电动班车运行的准时性，并提高其使用效率。然后，提出了求解该模型的遗传算法，测试结果表明，本文提出的算法是有效的。</p><p>关键词 :充电设施，电动汽车，车辆路径问题，遗传算法</p><disp-formula id="hanspub.19245-formula27"><graphic xlink:href="http://html.hanspub.org/file/1-2330220x8_hanspub.png"  xlink:type="simple"/></disp-formula></sec><sec id="s3"><title>1. 引言</title><p>随着汽车行业的高速发展，全球汽车的保有量不断增加，燃油汽车带来的能源紧缺、环境污染、城市交通等问题日益凸显。为了缓解城市交通压力、保护环境，很多公司会在早晚派送班车接送员工上下班，公司员工可以选择在合适的班车站点等待班车。但经常出现班车抵达不及时、某一时刻班次人员过多或过少的状况，不仅会造成员工等待时间过长、不能按时抵达公司等问题，在一定程度上也会导致班车利用率过低。因此，对公司班车行驶路线进行优化，可以在较大程度上解决此问题。</p><p>在政策的支持和引领下，很多公司把电动汽车引入到班车运营中，以进一步降低能耗、保护环境。电动汽车因其清洁、节能等显著优势，逐渐成为重要的交通工具 [<xref ref-type="bibr" rid="hanspub.19245-ref1">1</xref>] 。在北京、上海、广州等城市的公共交通中，以电动汽车为代表的新能源公交车都得到了大规模示范运营。然而，电动汽车由于续航里程短，在服务一部分客户后需要到充电设施进行充电，传统的车辆路径规划理论不再适用于电动汽车路径规划问题。</p><p>目前，一些学者已经开始对电动汽车路径规划问题展开研究。Samanta S等 [<xref ref-type="bibr" rid="hanspub.19245-ref2">2</xref>] 提出了带时间窗口的电动汽车和传统燃油车的混合车队的车辆路径规划模型，但并没有真正在模型中加入充电设施。Schneider M等 [<xref ref-type="bibr" rid="hanspub.19245-ref3">3</xref>] 研究了成本最优的电动汽车路径问题，考虑了容量限制、客户时间窗口和充电时间，并采用禁忌搜索和变邻域相结合的混合启发式算法进行求解。Geoke D [<xref ref-type="bibr" rid="hanspub.19245-ref4">4</xref>] 提出了求解大规模混合车队带时间窗口路径规划问题的邻域搜索算法，比较了不同目标函数下解的变化以及电动车辆的调度成本。Wang H等 [<xref ref-type="bibr" rid="hanspub.19245-ref5">5</xref>] 研究了电动公交车辆的调度问题，通过对以往公交车的行驶路径进行分析，提出了总空闲时间最小的目标函数，给出了电动公交车出发时刻表及优化后的行驶路径。Li J Q [<xref ref-type="bibr" rid="hanspub.19245-ref6">6</xref>] 研究了可更换电池或快速充电的电动公交车调度问题，提出了分支定价算法和基于列生成和局部搜索的启发式算法来求解该问题。刘华旭 [<xref ref-type="bibr" rid="hanspub.19245-ref7">7</xref>] 研究了基于电动汽车技术的共同配送调度优化问题，考虑电动汽车续驶时间有限和充电时间约束，并采用蚁群算法求解。杨珺等 [<xref ref-type="bibr" rid="hanspub.19245-ref8">8</xref>] 研究了带容量限制的电动汽车电池换电站选址与路径优化问题，同时确定电池交换站的选址策略和电动汽车的最优行驶路径，并设计了求解该问题的禁忌搜索算法，与CPLEX求解结果的比较结果表明该算法更加有效。</p><p>本文对带充电设施的电动班车路径规划问题展开研究，首先在第二节提出了该问题的混合整数规划模型，以优化电动班车的行驶路径，然后在第三节提出了求解该模型的遗传算法，在第四节对一个算例进行了仿真测试和分析，最后一节是结论。</p></sec><sec id="s4"><title>2. 电动班车路径规划模型</title><sec id="s4_1"><title>2.1. 问题描述与基本假设</title><p>电动班车路径规划问题的典型描述如下：</p><p>电动汽车从停车场出发，将各个客户点的员工送至公司。班车到达客户点的时间需满足客户时间窗口，提前到达需等待并承担等待成本，延迟到达需承担惩罚成本。班车在运行过程中由于电池容量有限，当出现剩余电量不足以支撑车辆到达下一个客户点时，需要立即到充电设施充电，然后继续服务下一个客户，直至服务完所有客户，最后返回停车场。</p><p>电动汽车路径规划问题的基本假设如下：</p><p>1) 车辆从停车场出发或到充电设施充电之后，电池都拥有最大电量；</p><p>2) 电动班车车辆类型相同，拥有相同的载客能力和电池容量；</p><p>3) 车辆耗电系数固定，耗电量与行驶距离成正比；</p><p>4) 充电系数固定，车辆在充电设施处的充电时间与到达充电设施时的剩余电量线性相关；</p><p>5) 车辆行驶速度恒定。</p></sec><sec id="s4_2"><title>2.2. 决策变量与参数定义</title><p>假设0为停车场；<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2330220x9_hanspub.png" xlink:type="simple"/></inline-formula>为每个服务点乘客数量集合；<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2330220x10_hanspub.png" xlink:type="simple"/></inline-formula>为服务点集合；<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2330220x11_hanspub.png" xlink:type="simple"/></inline-formula>为各服务点要求送达的时间集合；<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2330220x12_hanspub.png" xlink:type="simple"/></inline-formula>为公司；<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2330220x13_hanspub.png" xlink:type="simple"/></inline-formula>为充电设施；<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2330220x14_hanspub.png" xlink:type="simple"/></inline-formula>表示单个服务点，<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2330220x15_hanspub.png" xlink:type="simple"/></inline-formula>，<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2330220x16_hanspub.png" xlink:type="simple"/></inline-formula>代表出发点；<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2330220x17_hanspub.png" xlink:type="simple"/></inline-formula>为车辆集合，<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2330220x18_hanspub.png" xlink:type="simple"/></inline-formula>；<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2330220x19_hanspub.png" xlink:type="simple"/></inline-formula>表示服务点<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2330220x20_hanspub.png" xlink:type="simple"/></inline-formula>到<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2330220x21_hanspub.png" xlink:type="simple"/></inline-formula>的距离，其中<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2330220x22_hanspub.png" xlink:type="simple"/></inline-formula>；<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2330220x23_hanspub.png" xlink:type="simple"/></inline-formula>表示车辆从服务点<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2330220x24_hanspub.png" xlink:type="simple"/></inline-formula>到<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2330220x25_hanspub.png" xlink:type="simple"/></inline-formula>的时间；<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2330220x26_hanspub.png" xlink:type="simple"/></inline-formula>为车辆的最大载客量；<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2330220x27_hanspub.png" xlink:type="simple"/></inline-formula>为车辆最大行驶里程(对应电池最大容量)；<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2330220x28_hanspub.png" xlink:type="simple"/></inline-formula>表示车辆续驶里程(对应电池剩余电量)；<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2330220x29_hanspub.png" xlink:type="simple"/></inline-formula>表示点<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2330220x30_hanspub.png" xlink:type="simple"/></inline-formula>允许的最早服务时刻；<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2330220x31_hanspub.png" xlink:type="simple"/></inline-formula>表示点<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2330220x32_hanspub.png" xlink:type="simple"/></inline-formula>要求的最晚服务时刻；<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2330220x33_hanspub.png" xlink:type="simple"/></inline-formula>表示车辆<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2330220x34_hanspub.png" xlink:type="simple"/></inline-formula>到达服务点<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2330220x35_hanspub.png" xlink:type="simple"/></inline-formula>的时刻，其中<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2330220x36_hanspub.png" xlink:type="simple"/></inline-formula>；<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2330220x37_hanspub.png" xlink:type="simple"/></inline-formula>为各点乘客要求的服务时间；<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2330220x38_hanspub.png" xlink:type="simple"/></inline-formula>表示完成点<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2330220x39_hanspub.png" xlink:type="simple"/></inline-formula>员工接送服务所需的时间；<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2330220x40_hanspub.png" xlink:type="simple"/></inline-formula>为0-1决策变量，当车辆<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2330220x41_hanspub.png" xlink:type="simple"/></inline-formula>从服务点<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2330220x42_hanspub.png" xlink:type="simple"/></inline-formula>到<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2330220x43_hanspub.png" xlink:type="simple"/></inline-formula>时取值为1(<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2330220x44_hanspub.png" xlink:type="simple"/></inline-formula>)，否则为0；<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2330220x45_hanspub.png" xlink:type="simple"/></inline-formula>为0-1决策变量，经过充电设施<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2330220x46_hanspub.png" xlink:type="simple"/></inline-formula>时取值为1，否则为0。</p></sec><sec id="s4_3"><title>2.3. 目标函数与约束条件</title><p>电动班车路径规划模型的目标函数与约束条件如下：</p><disp-formula id="hanspub.19245-formula28"><label>(1)</label><graphic position="anchor" xlink:href="http://html.hanspub.org/file/1-2330220x47_hanspub.png"  xlink:type="simple"/></disp-formula><disp-formula id="hanspub.19245-formula29"><label>(2)</label><graphic position="anchor" xlink:href="http://html.hanspub.org/file/1-2330220x48_hanspub.png"  xlink:type="simple"/></disp-formula><disp-formula id="hanspub.19245-formula30"><label>(3)</label><graphic position="anchor" xlink:href="http://html.hanspub.org/file/1-2330220x49_hanspub.png"  xlink:type="simple"/></disp-formula><disp-formula id="hanspub.19245-formula31"><label>(4)</label><graphic position="anchor" xlink:href="http://html.hanspub.org/file/1-2330220x50_hanspub.png"  xlink:type="simple"/></disp-formula><disp-formula id="hanspub.19245-formula32"><label>(5)</label><graphic position="anchor" xlink:href="http://html.hanspub.org/file/1-2330220x51_hanspub.png"  xlink:type="simple"/></disp-formula><disp-formula id="hanspub.19245-formula33"><label>(6)</label><graphic position="anchor" xlink:href="http://html.hanspub.org/file/1-2330220x52_hanspub.png"  xlink:type="simple"/></disp-formula><disp-formula id="hanspub.19245-formula34"><label>(7)</label><graphic position="anchor" xlink:href="http://html.hanspub.org/file/1-2330220x53_hanspub.png"  xlink:type="simple"/></disp-formula><disp-formula id="hanspub.19245-formula35"><label>(8)</label><graphic position="anchor" xlink:href="http://html.hanspub.org/file/1-2330220x54_hanspub.png"  xlink:type="simple"/></disp-formula><disp-formula id="hanspub.19245-formula36"><label>(9)</label><graphic position="anchor" xlink:href="http://html.hanspub.org/file/1-2330220x55_hanspub.png"  xlink:type="simple"/></disp-formula><disp-formula id="hanspub.19245-formula37"><label>(10)</label><graphic position="anchor" xlink:href="http://html.hanspub.org/file/1-2330220x56_hanspub.png"  xlink:type="simple"/></disp-formula><disp-formula id="hanspub.19245-formula38"><label>(11)</label><graphic position="anchor" xlink:href="http://html.hanspub.org/file/1-2330220x57_hanspub.png"  xlink:type="simple"/></disp-formula><disp-formula id="hanspub.19245-formula39"><label>(12)</label><graphic position="anchor" xlink:href="http://html.hanspub.org/file/1-2330220x58_hanspub.png"  xlink:type="simple"/></disp-formula><disp-formula id="hanspub.19245-formula40"><label>(13)</label><graphic position="anchor" xlink:href="http://html.hanspub.org/file/1-2330220x59_hanspub.png"  xlink:type="simple"/></disp-formula><p>其中，式(1)表示行驶总路程最小，为目标函数；式(2)表示从停车场出发的车辆数不超过<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2330220x60_hanspub.png" xlink:type="simple"/></inline-formula>；式(3)和(4)表示访问的唯一性约束，即一个预约服务点只能被一辆车服务一次且仅一次；式(5)表示每辆车从停车场出发，并在结束所有任务后返回停车场；式(6)表示每辆车载客总数量不超过其最大载客量；式(7)到(8)表示电动班车的时间窗约束，式(7)表示班车抵达某点的时刻要不大于该点的最早服务时刻，式(8)表示整个服务的结束时刻应早于最晚服务时刻，否则需要增加惩罚因子；式(9)表示车辆的剩余电量与行驶路程的关系，即如果车辆从点<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2330220x61_hanspub.png" xlink:type="simple"/></inline-formula>驶入点<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2330220x62_hanspub.png" xlink:type="simple"/></inline-formula>，那么车辆到达节点<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2330220x63_hanspub.png" xlink:type="simple"/></inline-formula>时剩余电量等于离开节点<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2330220x64_hanspub.png" xlink:type="simple"/></inline-formula>时剩余电量减去从节点<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2330220x65_hanspub.png" xlink:type="simple"/></inline-formula>行驶到节点<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2330220x66_hanspub.png" xlink:type="simple"/></inline-formula>消耗的电量；式(10)和(11)分别表示车辆在离开停车场和经过充电设施充电后其电量为满电；式(12)表示车辆在任意节点电量非负；式(13)表示0-1决策变量。</p></sec></sec><sec id="s5"><title>3. 基于遗传算法的模型求解算法</title><p>遗传算法是一类借鉴生物界的进化规律演化而来的随机搜索方法，通过对种群重复不断地进行选择、交叉、变异等基本遗传操作，以进化过程中得到的最大适应度个体作为最优解输出 [<xref ref-type="bibr" rid="hanspub.19245-ref9">9</xref>] 。其中，遗传算法通过不断迭代搜索，最终得到了整个种群中最优的染色体相对应的车辆行驶路径，该车辆行驶路径即为整个问题的相对最优解，从而完成了带时间窗和容量限制的电动班车路径规划问题的路径寻优过程。</p><sec id="s5_1"><title>3.1. 染色体编码</title><p>假设k辆车用于服务n个客户点，染色体编码为(<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2330220x67_hanspub.png" xlink:type="simple"/></inline-formula>)，其中0代表停车场，两个0之间的自然数序列表示一条子路径。</p><p>例如，使用3辆车服务8个客户点，9表示公司，得到的遗传编码为027390516904890，即表示第一辆车从停车场出发，依次到达客户点2,7,3后到达公司9，形成子路径1；同理，第二辆车从出发点出发后，依次到达客户点5,1,6后集中到达公司9，最后又回到出发点，形成子路径2；而第三辆车从出发点出发，依次到达客户点4,8之后集中到达公司9，最后同样回到出发点，形成子路径3。因此，对应的三辆子路径为：</p><p>子路径1：0→2→7→3→9→0</p><p>子路径2：0→5→1→6→9→0</p><p>子路径3：0→4→8→9→0</p><p>本文问题中所需派出的车辆的数量事先并未确定，因此在编码中的路径分隔符0可以直观地将各个路径分隔开来，从而判断派出的车辆的数量。</p></sec><sec id="s5_2"><title>3.2. 适用度函数和选择操作</title><p>电动班车路径规划问题的优化目标是要找到总行驶距离最小的行驶路线，因此，本文将目标函数作为遗传算法的适用度函数</p><disp-formula id="hanspub.19245-formula41"><label>(14)</label><graphic position="anchor" xlink:href="http://html.hanspub.org/file/1-2330220x68_hanspub.png"  xlink:type="simple"/></disp-formula><p>选择操作采用遗传算法的标准选择方法，即轮盘赌法，选择生命力强的个体繁殖后代产生新的种群，这是一种基于适应度比例的选择策略，假设<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2330220x69_hanspub.png" xlink:type="simple"/></inline-formula>为种群数目，<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2330220x70_hanspub.png" xlink:type="simple"/></inline-formula>为某个个体<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2330220x71_hanspub.png" xlink:type="simple"/></inline-formula>的适应度值，则该个体被选择的概率为</p><disp-formula id="hanspub.19245-formula42"><label>(15)</label><graphic position="anchor" xlink:href="http://html.hanspub.org/file/1-2330220x72_hanspub.png"  xlink:type="simple"/></disp-formula></sec><sec id="s5_3"><title>3.3. 交叉操作和变异操作</title><p>本文研究的基于电动班车路径规划问题采用了客户点排列的自然数编码方式，所以交叉算法采用实数编码交叉方法。从种群中选出适用度强的个体，即行驶路程最短的个体，交叉后产生2个新的个体。根据算法设置的交叉概率<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2330220x73_hanspub.png" xlink:type="simple"/></inline-formula>决定是否进行交叉，在<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2330220x74_hanspub.png" xlink:type="simple"/></inline-formula>范围内产生随机数<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2330220x75_hanspub.png" xlink:type="simple"/></inline-formula>，如果随机数<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2330220x76_hanspub.png" xlink:type="simple"/></inline-formula>的值小于交叉概率<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2330220x77_hanspub.png" xlink:type="simple"/></inline-formula>，则进行交叉操作。第<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2330220x78_hanspub.png" xlink:type="simple"/></inline-formula>个染色体<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2330220x79_hanspub.png" xlink:type="simple"/></inline-formula>和第<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2330220x80_hanspub.png" xlink:type="simple"/></inline-formula>个染色体<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2330220x81_hanspub.png" xlink:type="simple"/></inline-formula>在第<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2330220x82_hanspub.png" xlink:type="simple"/></inline-formula>个位置的交叉方法 [<xref ref-type="bibr" rid="hanspub.19245-ref10">10</xref>] 为</p><disp-formula id="hanspub.19245-formula43"><label>(16)</label><graphic position="anchor" xlink:href="http://html.hanspub.org/file/1-2330220x83_hanspub.png"  xlink:type="simple"/></disp-formula><p>其中<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2330220x84_hanspub.png" xlink:type="simple"/></inline-formula>是<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2330220x85_hanspub.png" xlink:type="simple"/></inline-formula>之间的随机数。</p><p>同样，按照设置的变异概率<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2330220x86_hanspub.png" xlink:type="simple"/></inline-formula>决定个体是否进行变异操作，在<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2330220x87_hanspub.png" xlink:type="simple"/></inline-formula>范围内产生随机数，如果随机数小于变异概率，选择个体中的一个染色体进行变异，以产生更加优秀的个体。第<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2330220x88_hanspub.png" xlink:type="simple"/></inline-formula>个个体的第<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2330220x89_hanspub.png" xlink:type="simple"/></inline-formula>个染色体<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2330220x90_hanspub.png" xlink:type="simple"/></inline-formula>进行变异操作的方法 [<xref ref-type="bibr" rid="hanspub.19245-ref10">10</xref>] 为</p><disp-formula id="hanspub.19245-formula44"><label>(17)</label><graphic position="anchor" xlink:href="http://html.hanspub.org/file/1-2330220x91_hanspub.png"  xlink:type="simple"/></disp-formula><disp-formula id="hanspub.19245-formula45"><label>(18)</label><graphic position="anchor" xlink:href="http://html.hanspub.org/file/1-2330220x92_hanspub.png"  xlink:type="simple"/></disp-formula><p>其中，<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2330220x93_hanspub.png" xlink:type="simple"/></inline-formula>是基因<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2330220x94_hanspub.png" xlink:type="simple"/></inline-formula>的上界，<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2330220x95_hanspub.png" xlink:type="simple"/></inline-formula>是基因<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2330220x96_hanspub.png" xlink:type="simple"/></inline-formula>的下界；<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2330220x97_hanspub.png" xlink:type="simple"/></inline-formula>为一个随机数；<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2330220x98_hanspub.png" xlink:type="simple"/></inline-formula>是当前迭代次数；<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2330220x99_hanspub.png" xlink:type="simple"/></inline-formula>是最大迭代次数；<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2330220x100_hanspub.png" xlink:type="simple"/></inline-formula>为<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2330220x101_hanspub.png" xlink:type="simple"/></inline-formula>之间的随机数。</p></sec></sec><sec id="s6"><title>4. 测试与分析</title><sec id="s6_1"><title>4.1. 测试实例</title><p>本文中的实验数据选用Solomon设计的车辆路径规划问题标准测试库 [<xref ref-type="bibr" rid="hanspub.19245-ref11">11</xref>] ，对测试实例做以下假设：客户要求“最早服务时间 + 要求服务时间 <inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2330220x102_hanspub.png" xlink:type="simple"/></inline-formula> 最晚到达时间”，同时应当满足每个服务点的预约员工数量应小于电动班车的总载客量。设停车场有4辆电动班车从停车场出发，需要服务17个客户点，这些客户点的最早服务时间、最晚到达公司时间及服务时间都不同，电动班车的终点为公司，电动班车完成任务后返回停车场，区域内有一个充电站。</p><p>假设电动班车载客量为20人，车辆的最大行驶里程为60 km，同时设定了车辆超过时间窗到达服务点的单位时间惩罚成本为30，单位距离成本为1，单位时间等待成本为20。停车场、充电站和客户点信息的具体数据如表1所示。</p></sec><sec id="s6_2"><title>4.2. 测试结果分析</title><p>利用matlab 2014a编写本文提出的求解电动班车路径规划实例的基于遗传算法的模型求解算法，设置交叉概率为0.7，变异概率为0.6。为了使测试实例得到的路径规划结果更具科学性和有效性，对遗传算法中迭代次数和种群规模设置不同的参数。当迭代次数为500次时，设置种群规模为1000；当迭代次数150次时，设置种群规模为500。</p><p>对于上述两种情况分别进行20次测试后的求解结果如图1和图2所示。从中可以看出，当迭代次数为500、种群规模为1000时，测试得到平均最低总成本为292.0759 (波动非常小)；而迭代次数为150次，种群规模为500时，测试得到平均最低总成本超过300 (波动非常大)。</p><p>综合上述情况，在求解过程中，尽管迭代次数500次、种群规模为1000时求解过程花费的时间稍长，</p><table-wrap id="table1" ><label><xref ref-type="table" rid="table1">Table 1</xref></label><caption><title> Data of test instanc</title></caption><table><tbody><thead><tr><th align="center" valign="middle" >节点坐标</th><th align="center" valign="middle" >X坐标</th><th align="center" valign="middle" >Y坐标</th><th align="center" valign="middle" >乘客数</th><th align="center" valign="middle" >最早时刻</th><th align="center" valign="middle" >最晚时刻</th><th align="center" valign="middle" >服务时间</th></tr></thead><tr><td align="center" valign="middle" >始发点</td><td align="center" valign="middle" >30</td><td align="center" valign="middle" >1</td><td align="center" valign="middle" >-</td><td align="center" valign="middle" >-</td><td align="center" valign="middle" >-</td><td align="center" valign="middle" >-</td></tr><tr><td align="center" valign="middle" >需求点1</td><td align="center" valign="middle" >24</td><td align="center" valign="middle" >15</td><td align="center" valign="middle" >3</td><td align="center" valign="middle" >15</td><td align="center" valign="middle" >195</td><td align="center" valign="middle" >20</td></tr><tr><td align="center" valign="middle" >需求点2</td><td align="center" valign="middle" >28</td><td align="center" valign="middle" >12</td><td align="center" valign="middle" >5</td><td align="center" valign="middle" >5</td><td align="center" valign="middle" >165</td><td align="center" valign="middle" >25</td></tr><tr><td align="center" valign="middle" >需求点3</td><td align="center" valign="middle" >21</td><td align="center" valign="middle" >6</td><td align="center" valign="middle" >4</td><td align="center" valign="middle" >30</td><td align="center" valign="middle" >255</td><td align="center" valign="middle" >18</td></tr><tr><td align="center" valign="middle" >需求点4</td><td align="center" valign="middle" >37</td><td align="center" valign="middle" >16</td><td align="center" valign="middle" >2</td><td align="center" valign="middle" >5</td><td align="center" valign="middle" >255</td><td align="center" valign="middle" >30</td></tr><tr><td align="center" valign="middle" >需求点5</td><td align="center" valign="middle" >36</td><td align="center" valign="middle" >36</td><td align="center" valign="middle" >6</td><td align="center" valign="middle" >5</td><td align="center" valign="middle" >195</td><td align="center" valign="middle" >10</td></tr><tr><td align="center" valign="middle" >需求点6</td><td align="center" valign="middle" >27</td><td align="center" valign="middle" >13</td><td align="center" valign="middle" >8</td><td align="center" valign="middle" >5</td><td align="center" valign="middle" >165</td><td align="center" valign="middle" >20</td></tr><tr><td align="center" valign="middle" >需求点7</td><td align="center" valign="middle" >38</td><td align="center" valign="middle" >28</td><td align="center" valign="middle" >3</td><td align="center" valign="middle" >5</td><td align="center" valign="middle" >205</td><td align="center" valign="middle" >40</td></tr><tr><td align="center" valign="middle" >需求点8</td><td align="center" valign="middle" >34</td><td align="center" valign="middle" >25</td><td align="center" valign="middle" >7</td><td align="center" valign="middle" >5</td><td align="center" valign="middle" >165</td><td align="center" valign="middle" >18</td></tr><tr><td align="center" valign="middle" >需求点9</td><td align="center" valign="middle" >30</td><td align="center" valign="middle" >14</td><td align="center" valign="middle" >2</td><td align="center" valign="middle" >5</td><td align="center" valign="middle" >195</td><td align="center" valign="middle" >25</td></tr><tr><td align="center" valign="middle" >需求点10</td><td align="center" valign="middle" >20</td><td align="center" valign="middle" >18</td><td align="center" valign="middle" >1</td><td align="center" valign="middle" >5</td><td align="center" valign="middle" >225</td><td align="center" valign="middle" >18</td></tr><tr><td align="center" valign="middle" >需求点11</td><td align="center" valign="middle" >37</td><td align="center" valign="middle" >33</td><td align="center" valign="middle" >9</td><td align="center" valign="middle" >5</td><td align="center" valign="middle" >165</td><td align="center" valign="middle" >18</td></tr><tr><td align="center" valign="middle" >需求点12</td><td align="center" valign="middle" >36</td><td align="center" valign="middle" >23</td><td align="center" valign="middle" >2</td><td align="center" valign="middle" >30</td><td align="center" valign="middle" >255</td><td align="center" valign="middle" >20</td></tr><tr><td align="center" valign="middle" >需求点13</td><td align="center" valign="middle" >38</td><td align="center" valign="middle" >17</td><td align="center" valign="middle" >4</td><td align="center" valign="middle" >15</td><td align="center" valign="middle" >255</td><td align="center" valign="middle" >30</td></tr><tr><td align="center" valign="middle" >需求点14</td><td align="center" valign="middle" >26</td><td align="center" valign="middle" >22</td><td align="center" valign="middle" >3</td><td align="center" valign="middle" >30</td><td align="center" valign="middle" >255</td><td align="center" valign="middle" >15</td></tr><tr><td align="center" valign="middle" >需求点15</td><td align="center" valign="middle" >29</td><td align="center" valign="middle" >10</td><td align="center" valign="middle" >4</td><td align="center" valign="middle" >30</td><td align="center" valign="middle" >225</td><td align="center" valign="middle" >12</td></tr><tr><td align="center" valign="middle" >需求点16</td><td align="center" valign="middle" >22</td><td align="center" valign="middle" >11</td><td align="center" valign="middle" >2</td><td align="center" valign="middle" >0</td><td align="center" valign="middle" >165</td><td align="center" valign="middle" >20</td></tr><tr><td align="center" valign="middle" >需求点17</td><td align="center" valign="middle" >19</td><td align="center" valign="middle" >25</td><td align="center" valign="middle" >8</td><td align="center" valign="middle" >5</td><td align="center" valign="middle" >255</td><td align="center" valign="middle" >15</td></tr><tr><td align="center" valign="middle" >终点</td><td align="center" valign="middle" >35</td><td align="center" valign="middle" >45</td><td align="center" valign="middle" >-</td><td align="center" valign="middle" >-</td><td align="center" valign="middle" >-</td><td align="center" valign="middle" >-</td></tr></tbody></table></table-wrap><p>表1. 测试实例数据</p><p>图1. 进化500次成本变化曲线</p><p>但其20次试验中得到的结果非常稳定，波动极小，其求解效果优于迭代次数为150、种群规模为500的情况。</p><p>最优实验结果如图3所示，最佳方案是使用4辆电动班车进行服务。其中，停车场为4辆电动班车的出发点和完成所有服务后返回的终点；1~17为客户需求点，18为公司。客户需求点分配及电动班车服务客户点顺序的描述如下：</p><p>路径1：停车场→需求点9→需求点8→需求点16→需求点13→需求点14→公司→停车场，抵达公</p><p>图2. 进化150次成本变化曲线</p><p>图3. 电动班车路径规划图</p><p>司时载客量为18人，在需求点14处需充电；</p><p>路径2：停车场→需求点15→需求点1→需求点17→需求点7→需求点12→公司→停车场，抵达公司时载客量为20人；</p><p>路径3：停车场→需求点2→需求点4→需求点11→公司→停车场，抵达公司时载客量为16人；</p><p>路径4：停车场→需求点6→需求点5→需求点10→需求点3→公司→停车场，抵达公司时车辆载客量为19人。</p></sec></sec><sec id="s7"><title>5. 结论</title><p>针对公共交通中较为普遍的公司班车服务中遇到的一些问题，将电动汽车引入班车服务以替代传统燃油班车，以缓解城市交通压力，并节约能源。考虑到电动汽车续驶里程有限，需要在服务中到充电设施充电的特点，如何规划班车行驶路线、确定班车充电策略，就成为电动班车路径规划中的关键。</p><p>本文首先提出了带充电设施的电动班车路径规划问题的混合整数规划数学模型，既考虑了电动班车的最大载客量、客户时间窗口等传统约束，又考虑了电动班车续航里程、充电策略等电动汽车特有的约束。该模型能有效提高电动班车的使用效率。然后，提出了求解该模型的遗传算法，并进行了仿真测试。测试结果表明，本文提出的遗传算法是求解此类电动班车路径规划问题的有效算法。</p></sec><sec id="s8"><title>基金项目</title><p>中央高校基本科研业务费专项资金(16D110815)。</p></sec><sec id="s9"><title>文章引用</title><p>邢芳芳,贾永基,蒋琦,郑瑶. 带充电设施的电动班车路径规划问题研究 Research on Electric Shuttle Bus Routing Problem with Recharging Station[J]. 管理科学与工程, 2016, 05(04): 149-156. http://dx.doi.org/10.12677/MSE.2016.54016</p></sec><sec id="s10"><title>参考文献 (References)</title></sec></body><back><ref-list><title>References</title><ref id="hanspub.19245-ref1"><label>1</label><mixed-citation publication-type="other" xlink:type="simple">欧雯要, 叶瑞克, 鲍健强. 电动汽车的节能减碳价值研究[J]. 未来与发展, 2012, 2(5): 36-40.</mixed-citation></ref><ref id="hanspub.19245-ref2"><label>2</label><mixed-citation publication-type="other" xlink:type="simple">Samanta, S. and Jha, M.K. (2011) Multi Depot Probabilistic Vehicle Routing Problems with a Time Window: Theory, Solution and Application. International Journal of Operations Research &amp; Information Systems, 2, 40-64.  
&lt;br&gt;https://doi.org/10.4018/joris.2011040103</mixed-citation></ref><ref id="hanspub.19245-ref3"><label>3</label><mixed-citation publication-type="other" xlink:type="simple">Schneiderm, M., Stengera, A. and Goeke, D. (2014) The Electric Vehicle-Routing Problem with Time Windows and Recharging Stations. Transportation Science, 48, 500-520. &lt;br&gt;https://doi.org/10.1287/trsc.2013.0490</mixed-citation></ref><ref id="hanspub.19245-ref4"><label>4</label><mixed-citation publication-type="other" xlink:type="simple">Goeke, D. and Schneider, M. (2015) Routing a Mixed Fleet of Electric and Conventional Vehicles. European Journal of Operational Research, 245, 81-99. &lt;br&gt;https://doi.org/10.1016/j.ejor.2015.01.049</mixed-citation></ref><ref id="hanspub.19245-ref5"><label>5</label><mixed-citation publication-type="other" xlink:type="simple">Wang, H. and Shen, J. (2007) Heuristic Approaches for Solving Transit Vehicle Scheduling Problem with Route and Fueling Time Constraints. Applied Mathematics &amp; Computation, 190, 1237-1249.  
&lt;br&gt;https://doi.org/10.1016/j.amc.2007.02.141</mixed-citation></ref><ref id="hanspub.19245-ref6"><label>6</label><mixed-citation publication-type="other" xlink:type="simple">Li, J.Q. (2014) Transit Bus Scheduling with Limited Energy. Transportation Science, 48, 521-539.  
&lt;br&gt;https://doi.org/10.1287/trsc.2013.0468</mixed-citation></ref><ref id="hanspub.19245-ref7"><label>7</label><mixed-citation publication-type="other" xlink:type="simple">刘华旭. 基于电动汽车技术特征的共同配送调度优化研究[D]: [硕士学位论文]. 北京: 北京交通大学, 2012.</mixed-citation></ref><ref id="hanspub.19245-ref8"><label>8</label><mixed-citation publication-type="other" xlink:type="simple">杨珺, 冯鹏祥, 孙昊, 等. 电动汽车物流配送系统的换电站选址与路径优化问题研究[J]. 中国管理科学, 2015, 23(9): 87-96.</mixed-citation></ref><ref id="hanspub.19245-ref9"><label>9</label><mixed-citation publication-type="other" xlink:type="simple">玄光男, 程润伟. 遗传算法与工程优化[M]. 北京: 清华大学出版社, 2004.</mixed-citation></ref><ref id="hanspub.19245-ref10"><label>10</label><mixed-citation publication-type="other" xlink:type="simple">郁磊, 史峰, 王辉, 胡斐, 等. MATLAB 智能算法30个案例分析[M]. 北京: 北京航空航天大学出版社, 2015.</mixed-citation></ref><ref id="hanspub.19245-ref11"><label>11</label><mixed-citation publication-type="other" xlink:type="simple">VRPTW Benchmark Problems. http://w.cba.neu.edu/~msolomon/problems.htm</mixed-citation></ref></ref-list></back></article>