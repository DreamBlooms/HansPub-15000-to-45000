<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE article  PUBLIC "-//NLM//DTD Journal Publishing DTD v3.0 20080202//EN" "http://dtd.nlm.nih.gov/publishing/3.0/journalpublishing3.dtd"><article xmlns:mml="http://www.w3.org/1998/Math/MathML" xmlns:xlink="http://www.w3.org/1999/xlink" dtd-version="3.0" xml:lang="en" article-type="research article"><front><journal-meta><journal-id journal-id-type="publisher-id">CSA</journal-id><journal-title-group><journal-title>Computer Science and Application</journal-title></journal-title-group><issn pub-type="epub">2161-8801</issn><publisher><publisher-name>Scientific Research Publishing</publisher-name></publisher></journal-meta><article-meta><article-id pub-id-type="doi">10.12677/CSA.2018.812198</article-id><article-id pub-id-type="publisher-id">CSA-27987</article-id><article-categories><subj-group subj-group-type="heading"><subject>CSA20181200000_79391609.pdf</subject></subj-group><subj-group subj-group-type="Discipline-v2"><subject>信息通讯</subject></subj-group></article-categories><title-group><article-title>
 
 
  基于动态曲线的车道检测算法
  Lane Detection Algorithm Based on Dynamic Curve
 
</article-title></title-group><contrib-group><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>高</surname><given-names>严</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>郭</surname><given-names>洪强</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>王</surname><given-names>钧</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>季</surname><given-names>玉洁</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib></contrib-group><aff id="aff2"><addr-line>聊城大学机械与汽车工程学院，山东 聊城</addr-line></aff><aff id="aff1"><addr-line>null</addr-line></aff><pub-date pub-type="epub"><day>13</day><month>12</month><year>2018</year></pub-date><volume>08</volume><issue>12</issue><fpage>1791</fpage><lpage>1797</lpage><permissions><copyright-statement>&#169; Copyright  2014 by authors and Scientific Research Publishing Inc. </copyright-statement><copyright-year>2014</copyright-year><license><license-p>This work is licensed under the Creative Commons Attribution International License (CC BY). http://creativecommons.org/licenses/by/4.0/</license-p></license></permissions><abstract><p>
 
 
   
   针对无人驾驶技术中关于复杂车道线的检测问题，本文提出了一种基于车道线的颜色梯度变化和视频每帧图像的关联性的复杂车道线检测算法。该算法通过梯度检测的方法对原图像进行边缘像素提取，通过动态曲线的限制对所得的边缘像素进行特征点提取，筛选出目标边缘像素，去除非目标边缘像素。最后通过曲线拟合检测出车道线位置。通过现场实测表明，此算法最终能够通过曲线拟合得到较为准确的复杂车道线的位置信息。同时，实测结果也说明了此算法相比于其他算法而言具有更好的是实时性和鲁棒性。 Aiming at the detection of complex lanes in unmanned driving technology, this paper proposes a complex lane detection algorithm based on the color gradient change of lanes and the correlation of each video frame. The algorithm extracts the edge pixels of the original image by gradient detection method, extracts the feature points of the edge pixels through the restriction of dynamic curve, filters out the target edge pixels and removes the non-target edge pixels. Finally, the lane location is detected by curve fitting. Field measurements show that the algorithm can finally obtain more accurate location information of complex lane lines through curve fitting. At the same time, the measured results also show that this algorithm has better real-time performance and robustness than other algorithms.
    
  
 
</p></abstract><kwd-group><kwd>复杂车道线，梯度检测，动态曲线，曲线拟合, Complex Lane</kwd><kwd> Gradient Detection</kwd><kwd> Dynamic Curve</kwd><kwd> Curve Fitting</kwd></kwd-group></article-meta></front><body><sec id="s1"><title>基于动态曲线的车道检测算法<sup> </sup></title><p>高严，郭洪强，王钧，季玉洁</p><p>聊城大学机械与汽车工程学院，山东 聊城</p><p>Email: 1570079892@qq.com, 2044369540@qq.com, 393900678@qq.com, 609404334@qq.com</p><p>收稿日期：2018年11月26日；录用日期：2018年12月6日；发布日期：2018年12月13日</p></sec><sec id="s2"><title>摘 要</title><p>针对无人驾驶技术中关于复杂车道线的检测问题，本文提出了一种基于车道线的颜色梯度变化和视频每帧图像的关联性的复杂车道线检测算法。该算法通过梯度检测的方法对原图像进行边缘像素提取，通过动态曲线的限制对所得的边缘像素进行特征点提取，筛选出目标边缘像素，去除非目标边缘像素。最后通过曲线拟合检测出车道线位置。通过现场实测表明，此算法最终能够通过曲线拟合得到较为准确的复杂车道线的位置信息。同时，实测结果也说明了此算法相比于其他算法而言具有更好的是实时性和鲁棒性。</p><p>关键词 :复杂车道线，梯度检测，动态曲线，曲线拟合</p><p>Copyright &#169; 2018 by authors and Hans Publishers Inc.</p><p>This work is licensed under the Creative Commons Attribution International License (CC BY).</p><p>http://creativecommons.org/licenses/by/4.0/</p><p><img src="//html.hanspub.org/file/1-1541215x5_hanspub.png" /> <img src="//html.hanspub.org/file/1-1541215x6_hanspub.png" /></p></sec><sec id="s3"><title>1. 引言</title><p>随着国内交通领域和经济的飞速发展，汽车在人们生活中得到了广泛的普及，随之而来的却是交通事故发生率不断攀升，每年都有许多人由于驾驶中的疏忽大意丧生于交通事故中或给他人造成伤害。汽车给人们带来便利的同时，也给人们的生命和财产带来了巨大损失。经汽车安全专家指出：约有50%的汽车交通事故是因为汽车偏离正常的行驶车道引起的，并且多发于复杂车道，例如弯道行驶。究其原因主要是驾驶员心神烦乱、注意力不集中或驾驶疲劳。由此，无人驾驶技术和智能驾驶辅助系统得到了飞速发展，大大降低了由于司机疲劳驾驶引起的交通事故率。本文研究的重点是复杂车道检测算法，该算法在无人驾驶中应用广泛，是其必不可少的一部分，广泛应用于自动泊车、路径规划、自动避障等多个无人驾驶领域。</p><p>当前基于无人驾驶有关直道的车道线检测技术日趋成熟，人们用不同的方法在直线检测上取得了较好的成果。文献 [<xref ref-type="bibr" rid="hanspub.27987-ref1">1</xref>] 提出基于Snake的车道线检测方法，通过利用车道线消失点的结构特征进行车道线检测，并用Snake方法对车道线进行迭代拟合；文献 [<xref ref-type="bibr" rid="hanspub.27987-ref2">2</xref>] 提出基于随机抽样一致性的车道线检测方法，此方法利用车道线平行的结构特征进行车道线检测；文献 [<xref ref-type="bibr" rid="hanspub.27987-ref3">3</xref>] 中提出利用形态学图像处理技术，基于形态学变换的道路检测方法，能够应用形态学变换、Canny边缘检测与Hough变换检测出直线道路车行道的边缘线。</p><p>然而，现有的技术仍然无法准确的检测复杂车道线以及非标准车道线，对复杂车道线及非标准车道线的检测方法研究是无人驾驶中的一个难局。文献 [<xref ref-type="bibr" rid="hanspub.27987-ref4">4</xref>] 提出一种基于机器视觉的车道检测与重建方法。采用链码算法检测分道线，用链码来记录车道线轮廓信息，再基于曲率模型的卡尔曼递推估计方法来估计当前的车道线位置，同时用来预测和检测下一时刻的车道线位置，并建立了车道数学模型。文献 [<xref ref-type="bibr" rid="hanspub.27987-ref5">5</xref>] 提出一种基于多特征信息融合优化的鲁棒性车道线检测算法。首先构建了基于二次曲线空间道路模型图像中左右车道线数学模型；然后融合像素梯度值、梯度方向、像素灰度以及车道线结构等多特征信息，构造后验概率函数；最后采用基于免疫克隆策略的改进粒子群优化算法优化车道线模型参数，实现车道线提取。文献 [<xref ref-type="bibr" rid="hanspub.27987-ref6">6</xref>] 提出利用Hough变换来实现对车道检测的直道检测。而对于弯道部分的检测，通过统计较小区域的目标像素数目，设置感兴趣区域(ROI)来判断车道的弯曲方向，并在该方向上进行弯道像素的搜索，采用多段折线的方法对弯道部分进行重建。</p><p>实际道路状况复杂多变，各种干扰因素加大了车道检测的难度。国内外学者对于不同的干扰因素已提出了诸多算法，例如针对交通场景中运动车辆的车道检测方法 [<xref ref-type="bibr" rid="hanspub.27987-ref7">7</xref>] 、基于车载单色摄像机提供的图像检测和跟踪车道的鲁棒方法 [<xref ref-type="bibr" rid="hanspub.27987-ref8">8</xref>] 、基于可控滤波器进行车道检测的方法 [<xref ref-type="bibr" rid="hanspub.27987-ref9">9</xref>] 、针对夜间的车道检测算法 [<xref ref-type="bibr" rid="hanspub.27987-ref10">10</xref>] 。</p><p>当今现有的车道检测算法实用性和鲁棒性低，检测复杂车道线及非标准车道线的准确度及鲁棒性低，为了更好地解决这一问题，突破车道检测的困局，本文基于视觉处理将多种算法进行融合，构建了一个相对完善的视觉处理系统，能够有效地适用各种不同的行车环境，降低天气、光照等因素对车道检测的影响，通过实测与比较发现该方法提高了车道检测的准确性、实用性和鲁棒性。无人驾驶的技术难局在于感知周围环境，车道检测算法的进步对无人驾驶的发展起着不可忽视的推动作用。</p></sec><sec id="s4"><title>2. 本文提出的车道检测算法</title><sec id="s4_1"><title>2.1. 车道检测基本原理</title><p>由于当前车载摄像头多为广角摄像头，在摄像头采集图像范围增大的同时，因为透镜自身的原因又会导致图像产生畸变，通过计算相机校正矩阵和失真系数获得相机的内外参数和图像的畸变参数，根据这些参数对图像进行校正。</p><p>为了降低颜色对检测结果的影响，提高算法的鲁棒性和准确性，减少算法的计算量，本文采用了梯度检测的方法对灰度图进行处理得到二值图像。由于实际道路的复杂性，单一的方法并不能很好地提取出车道线的边缘像素点，但过多的方法会加大算法的计算量。为解决这一难题，本文算法对视频的第一帧图像采用多种方法结合得方式提取车道边缘像素点，进而推算出车道线位置。在前一帧图像的基础上得到四条动态滑动曲线，通过这四条滑动曲线来限制提取车道线边缘像素点的区域。经验证，这种动态滑动曲线的方法在保证了算法的准确性的同时减少了算法的计算量。</p><p>最后，对所得到的边缘像素点进行曲线拟合来推算出车道线位置。车道检测基本原理图如图1所示。</p><p>图1. 车道检测基本原理图</p></sec><sec id="s4_2"><title>2.2. 相机标定</title><p>在实际状况下，由于透镜本身的制造误差以及组装工艺上的偏差会造成图像的径向畸变和切向畸变。畸变是对直线投影的一种偏移，简单来说就是一条直线投影到图片上不再是一个直线。由于摄像机的镜头畸变不可避免，为了降低图像畸变的影响和提高车道检测的准确性，需要对所获得的图像进行矫正。</p><p>本文利用平面棋盘格标定法 [<xref ref-type="bibr" rid="hanspub.27987-ref11">11</xref>] 对图像进行校正。该标定方法介于摄像机标定法和自标定法之间，既克服了摄像机标定法需要高精度的三维标定物的缺点，又解决了自标定法鲁棒性差的难题。标定过程中，只需要一个棋盘格标定板，并且从不用方向拍摄几组图片即可，具有实用灵活、准确性高、鲁棒性好等特点，是目前主流的标定方法。</p></sec><sec id="s4_3"><title>2.3. 边缘保留滤波</title><p>边缘保留滤波 [<xref ref-type="bibr" rid="hanspub.27987-ref12">12</xref>] [<xref ref-type="bibr" rid="hanspub.27987-ref13">13</xref>] [<xref ref-type="bibr" rid="hanspub.27987-ref14">14</xref>] 是一种非线性滤波器，与其他滤波器相比，对于图像的边缘信息具有更好的保存效果。边缘保留滤波也是通过卷积模板对图像进行加权平均来更新每个像素的灰度值。卷积模板中的系数W为一个与空间距离相关的高斯函数与一个与灰度距离相关的高斯函数相乘。</p><p>空间距离指的是当前点与中心点的欧系距离。空间域高斯函数 W σ s 其表达式为：</p><p>W σ s = e − ( x i − x c ) 2 + ( y i − y c ) 2 2 σ 2 (1)</p><p>式(1)中： ( x i , y i ) 为当前点的位置， ( x c , y c ) 为中心点的位置， σ 2 为空间域标准平方差。</p><p>灰度距离指的是当前点灰度与中心点灰度的差的绝对值。值域高斯函数 G σ r 其表达式为：</p><p>W σ r = e − ( g r a y ( x i , y i ) − g r a y ( x c − y c ) ) 2 2 σ 2 (2)</p><p>式(2)中： g r a y ( x i , y i ) 为当前点的灰度值， g r a y ( x c , y c ) 为中心点的灰度值。</p><p>两者对应的权重系数相乘(即 W = W σ s &#215; W σ r )得到最后的权重系数。将校正过的图像转为灰度图像，并使用直径为2的卷积模板对该灰度图像进行边缘保留滤波。在图2中图2(a)、图2(b)和图2(c)依次示意了滤波前的像素分布、有边缘时的权重系数分布和最后的滤波的结果，从图2(b)中可以看出权重系数在边界处有很明显的分界。因而，对图像进行边缘保留滤波时，以边界处为分界，滤波后的某个像素值几乎只和与该像素同属一侧的像素值有关。</p><p>图2. 边缘保留滤波原理图</p></sec><sec id="s4_4"><title>2.4. 梯度检测</title><p>车道线具有明显的颜色特征，将原图像转换为灰度图像后，车道线的边界处会有显著的灰度变化，即梯度。Sobel算子在梯度检测上具有较好的表现，并且Sobel算子对图像的“噪声”敏感性低，因此本文选用Sober算法进行车道线检测。</p><p>检测方法为：首先，以图像的左上角为坐标原点，以图像右侧为x轴正方向，以图像下侧为y轴正方向建立图像坐标系，由于车道线的梯度变化主要体现在x轴方向上，所以仅对x轴方向的梯度进行检测，其中，x轴方向上Sobel的卷积因子为：</p><p>G x = [ − 1 0 + 1 − 2 0 + 2 − 1 0 + 1 ] (3)</p><p>然后，用卷积因子 G x 对滤波后的图像作卷积运算，以检测车道边缘；最后，设置一个梯度阈值，对梯度检测所得到的图像进行二值化，突出车道线边缘像素。</p><p>这是由于相机本身的原因，根据梯度阈值所得到的二值图像会存在一定的噪点，即一张图片生成时会或多或少存在一些“不应该存在的杂质”，因此噪点的多少可作为图片的质量评测项目之一。</p><p>数学形态学腐蚀可以除去图像中细小的噪点，可以采用 ( 2 &#215; 2 ) 的结构元素对原图进行腐蚀操作来减小图像噪点对检测结果的影响。结构元素不宜过大，否则会大大减少车道边缘像素点。图3中图3(a)~图3(b)是最终所得到的二值图，这些二值图基本上不存在细小噪点。</p><p>图3. 数学形态学处理后的二值图像</p></sec><sec id="s4_5"><title>2.5. 特征点及曲线拟合</title><p>利用梯度阈值和数学形态学腐蚀所得的二值图像中仍存在许多非车道线边缘像素点。单一的方法并不能很好地排除这些非目标像素点，因此本文对第一帧图像的二值图像采用多种方法结合的方式来提取出车道线边缘像素点。</p><p>左右车道线会在一定范围内变化，利用两条斜直线将左右车道线分别固定在一定区域。排除区域外非车道线像素点，增强检测效果。</p><p>在图像的前视野中，左车道线像素的x坐标随着y坐标的增大而逐渐减小，右车道线像素的x坐标随着y坐标的增大而逐渐增大。另外车道线像素的x坐标与y坐标之比在一定范围呢。利用这些关系可以排除非车道线边缘像素点。</p><p>计算出所提取边缘像素点的平均数和中位数，设置一个阈值来排除一些非车道线边缘像素点。</p><p>将上述方法结合可以较好地提取出车道线的边缘像素点，但这种方式的计算量比较大，不符合实时应用的要求。为了解决这一难题，本文提出动态滑动曲线提取特征点的方法。第一帧图像利用多种方法结合的方式提取车道边缘像素点，后续图像利用动态曲线提取车道边缘像素点。</p><p>首先，构建前一帧图像的边缘像素点的车道曲线，其表达式为</p><p>x = A y 2 + B y + C (4)</p><p>设置一个常数 ( D = 15 ) ，得到动态曲线的表达式：</p><p>x = A y 2 + B y + C &#177; D (5)</p><p>将每两条动态滑动曲线之间的像素点作为车道线边缘像素点。</p><p>然后，将二次函数作为车道线的函数模型，以解决一次函数难以较好拟合弯道的边缘像素点的问题。</p><p>最后，对所得到的车道线边缘像素点进行最小二乘法拟合得到式(4)中的A、B、C。在图像的前视野中每相隔一定的距离便选取一个y坐标，根据式(4)来推算每个y坐标所对应的x坐标。最后，根据所推算的车道线特征点在原图像绘出车道线。</p></sec></sec><sec id="s5"><title>3. 实验结果分析</title><p>如图4中图4(a)~图4(b)所示，依次对在强光下的道路、昏暗环境下的道路、车道线不清晰的道路、有障碍干扰的道路图像进行了处理，能够有效检测到车道线的边界，为自动驾驶提供有效依据。因此，本文提出的方法能够较为准确地提取出车道线的边缘像素并推算出车道线的边界位置，并对不同的路况以及各种复杂的行车环境具有良好的适应性、鲁棒性。</p><p>图4. 车道检测结果图</p></sec><sec id="s6"><title>4. 结论</title><p>无人驾驶技术的核心部分在于感知周边行车环境以做出正确的决策，而车道线是行车环境中的基础组成。本文基于车道线的颜色梯度变化和每帧图像的关联性提出了一种基于动态曲线的车道检测算法。实测结果表明，该算法能够较为准确地检测出不同环境下的车道线，具有较好的鲁棒性。</p></sec><sec id="s7"><title>文章引用</title><p>高 严,郭洪强,王 钧,季玉洁. 基于动态曲线的车道检测算法 Lane Detection Algorithm Based on Dynamic Curve[J]. 计算机科学与应用, 2018, 08(12): 1791-1797. https://doi.org/10.12677/CSA.2018.812198</p></sec><sec id="s8"><title>参考文献</title></sec></body><back><ref-list><title>References</title><ref id="hanspub.27987-ref1"><label>1</label><mixed-citation publication-type="other" xlink:type="simple">Wang, Y., Teoh, E.K. and Shen, D. (2004) Lane Detection and Tracking Using B-Snake. Image &amp; Vision Computing, 22, 269-280. &lt;br&gt;https://doi.org/10.1016/j.imavis.2003.10.003</mixed-citation></ref><ref id="hanspub.27987-ref2"><label>2</label><mixed-citation publication-type="other" xlink:type="simple">Borkar, A., Hayes, M. and Smith, M.T. (2010) Robust Lane Detection and Tracking with RANSAC and Kalman Filter. IEEE International Conference on Image Processing, Cairo, 7-10 November 2009, 3225-3228.</mixed-citation></ref><ref id="hanspub.27987-ref3"><label>3</label><mixed-citation publication-type="other" xlink:type="simple">朱彤, 阎莹, 袁志业. 一种基于形态学变换的车道检测方法[J]. 山东交通学院学报, 2006, 14(1): 16-19.</mixed-citation></ref><ref id="hanspub.27987-ref4"><label>4</label><mixed-citation publication-type="other" xlink:type="simple">陈勇, 黄席樾, 唐高友, 等. 基于机器视觉的车道检测与二维重建方法[J]. 仪器仪表学报, 2007, 28(7): 1205-1210.</mixed-citation></ref><ref id="hanspub.27987-ref5"><label>5</label><mixed-citation publication-type="other" xlink:type="simple">林国余, 陈旭, 张为公. 基于多信息融合优化的鲁棒性车道检测算法[J]. 东南大学学报(自然科学版), 2010, 40(4): 771-777.</mixed-citation></ref><ref id="hanspub.27987-ref6"><label>6</label><mixed-citation publication-type="other" xlink:type="simple">李明, 黄华, 夏建刚. 基于Hough变换的车道检测改进算法研究[J]. 计算机工程与设计, 2012, 33(4): 1638-1642.</mixed-citation></ref><ref id="hanspub.27987-ref7"><label>7</label><mixed-citation publication-type="other" xlink:type="simple">Cheng, H.-Y., Jeng, B.-S., Tseng, P.-T., et al. (2006) Lane Detection with Moving Vehicles in the Traffic Scenes. IEEE Transactions on Intelligent Transportation Systems, 7, 571-582. &lt;br&gt;https://doi.org/10.1109/TITS.2006.883940</mixed-citation></ref><ref id="hanspub.27987-ref8"><label>8</label><mixed-citation publication-type="other" xlink:type="simple">Zhou, Y., Xu, R., Hu, X., et al. (2006) A Robust Lane Detection and Tracking Method Based on Computer Vision. Measurement Science &amp; Technology, 17, 736. &lt;br&gt;https://doi.org/10.1088/0957-0233/17/4/020</mixed-citation></ref><ref id="hanspub.27987-ref9"><label>9</label><mixed-citation publication-type="other" xlink:type="simple">Liu, W., Wen, X.Z., Duan, B., et al. (2007) Rear Vehicle Detection and Track-ing for Lane Change Assist. Intelligent Vehicles Symposium, Istanbul, 13-15 June 2007, 252-257. &lt;br&gt;https://doi.org/10.1109/IVS.2007.4290123</mixed-citation></ref><ref id="hanspub.27987-ref10"><label>10</label><mixed-citation publication-type="other" xlink:type="simple">Borkar, A., Hayes, M. and Smith, M. (2009) Lane Detection and Tracking Using a Layered Approach. Lecture Notes in Computer Science, 5807, 474-484. &lt;br&gt;https://doi.org/10.1007/978-3-642-04697-1_44</mixed-citation></ref><ref id="hanspub.27987-ref11"><label>11</label><mixed-citation publication-type="other" xlink:type="simple">Zhang, Z. (2000) A Flexible New Technique for Camera Calibration. IEEE Transactions on Pattern Analysis and Machine Intelligence, 22, 1330-1334. &lt;br&gt;https://doi.org/10.1109/34.888718</mixed-citation></ref><ref id="hanspub.27987-ref12"><label>12</label><mixed-citation publication-type="other" xlink:type="simple">刘权, 吴陈, 潘舒, 等. 边缘保留的图像滤波方法[J]. 微计算机信息, 2007, 23(9): 309-310.</mixed-citation></ref><ref id="hanspub.27987-ref13"><label>13</label><mixed-citation publication-type="other" xlink:type="simple">唐继勇. 基于边缘保持滤波的Canny彩色图像边缘检测方法[J]. 现代电子技术, 2012, 35(11): 81-83.</mixed-citation></ref><ref id="hanspub.27987-ref14"><label>14</label><mixed-citation publication-type="other" xlink:type="simple">徐勇. 边缘结构保持型的图像滤波算法研究[D]: [硕士学位论文]. 合肥: 合肥工业大学, 2011.</mixed-citation></ref></ref-list></back></article>