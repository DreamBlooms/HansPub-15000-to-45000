<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE article  PUBLIC "-//NLM//DTD Journal Publishing DTD v3.0 20080202//EN" "http://dtd.nlm.nih.gov/publishing/3.0/journalpublishing3.dtd"><article xmlns:mml="http://www.w3.org/1998/Math/MathML" xmlns:xlink="http://www.w3.org/1999/xlink" dtd-version="3.0" xml:lang="en" article-type="research article"><front><journal-meta><journal-id journal-id-type="publisher-id">SEA</journal-id><journal-title-group><journal-title>Software Engineering and Applications</journal-title></journal-title-group><issn pub-type="epub">2325-2286</issn><publisher><publisher-name>Scientific Research Publishing</publisher-name></publisher></journal-meta><article-meta><article-id pub-id-type="doi">10.12677/SEA.2019.83016</article-id><article-id pub-id-type="publisher-id">SEA-30869</article-id><article-categories><subj-group subj-group-type="heading"><subject>SEA20190300000_71972647.pdf</subject></subj-group><subj-group subj-group-type="Discipline-v2"><subject>工程技术</subject></subj-group></article-categories><title-group><article-title>
 
 
  物联网下网络视频丢包率到用户体验质量的数学映射模型
  Mathematics Mapping Model of Network Video Packet Loss Rate and the Quality of Experience under the Internet of Things
 
</article-title></title-group><contrib-group><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>侯</surname><given-names>义斌</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>王</surname><given-names>进</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="corresp" rid="cor1"><sup>*</sup></xref></contrib></contrib-group><aff id="aff2"><addr-line>北京工业大学信息学部软件学院，北京</addr-line></aff><aff id="aff1"><addr-line>null</addr-line></aff><pub-date pub-type="epub"><day>14</day><month>06</month><year>2019</year></pub-date><volume>08</volume><issue>03</issue><fpage>131</fpage><lpage>140</lpage><permissions><copyright-statement>&#169; Copyright  2014 by authors and Scientific Research Publishing Inc. </copyright-statement><copyright-year>2014</copyright-year><license><license-p>This work is licensed under the Creative Commons Attribution International License (CC BY). http://creativecommons.org/licenses/by/4.0/</license-p></license></permissions><abstract><p>
 
 
  物联网和网络视频丢包率到用户体验质量的映射模型是学术界和工商界的热点话题。为了研究视频在网络传输过程中丢包对QoE的影响并建立丢包率到QoE的映射，搭建了NS2 + MyEvalvid实验仿真平台，重点研究丢包对用户体验质量QoE的影响并建立丢包率到用户体验质量QoE的映射。仿真结果表明，丢包对用户体验质量QoE有着显著影响，丢包率和用户体验质量QoE呈现一元非线性关系。因此，在研究丢包对QoE有显著影响的基础上，采用一元非线性回归分析的方法建立丢包率到用户体验质量QoE的映射。
   The mapping model of the network and network video packet loss rate to the quality of user expe-rience is a hot topic in the academia and the industry and commerce. In order to study the influence of packet loss on QoE and establish the Mapping model of packet loss rate and the Quality of experience when the video transmits in the network, this paper builds an NS2 + MyEvalvid simula-tion platform, focuses on the influence of packet loss on QoE and establishes the Mapping model of packet loss rate and the Quality of experience. Simulation results show that packet loss has a sig-nificant influence on Quality of experience. Packet loss rate and the Quality of experience present a nonlinear relationship. Therefore, based on the study, packet loss has a significant influence on Quality of experience, using a nonlinear regression analysis method to establish the Mapping model of packet loss rate and the Quality of experience.
 
</p></abstract><kwd-group><kwd>丢包，丢包率，影响，用户体验质量，映射模型，网络视频M, Packet Loss</kwd><kwd> Packet Loss Rate</kwd><kwd> Influence</kwd><kwd> Quality of Experience</kwd><kwd> Mapping Model</kwd><kwd> Network Video</kwd></kwd-group></article-meta></front><body><sec id="s1"><title>物联网下网络视频丢包率到用户体验质量的数学映射模型<sup> </sup></title><p>侯义斌，王进</p><p>北京工业大学信息学部软件学院，北京</p><p><img src="//html.hanspub.org/file/5-2690360x1_hanspub.png" /></p><p>收稿日期：2019年5月30日；录用日期：2019年6月14日；发布日期：2019年6月21日</p><disp-formula id="hanspub.30869-formula19"><graphic xlink:href="//html.hanspub.org/file/5-2690360x5_hanspub.png"  xlink:type="simple"/></disp-formula></sec><sec id="s2"><title>摘 要</title><p>物联网和网络视频丢包率到用户体验质量的映射模型是学术界和工商界的热点话题。为了研究视频在网络传输过程中丢包对QoE的影响并建立丢包率到QoE的映射，搭建了NS2 + MyEvalvid实验仿真平台，重点研究丢包对用户体验质量QoE的影响并建立丢包率到用户体验质量QoE的映射。仿真结果表明，丢包对用户体验质量QoE有着显著影响，丢包率和用户体验质量QoE呈现一元非线性关系。因此，在研究丢包对QoE有显著影响的基础上，采用一元非线性回归分析的方法建立丢包率到用户体验质量QoE的映射。</p><p>关键词 :丢包，丢包率，影响，用户体验质量，映射模型，网络视频</p><disp-formula id="hanspub.30869-formula20"><graphic xlink:href="//html.hanspub.org/file/5-2690360x6_hanspub.png"  xlink:type="simple"/></disp-formula><p>Copyright &#169; 2019 by authors and Hans Publishers Inc.</p><p>This work is licensed under the Creative Commons Attribution International License (CC BY).</p><p>http://creativecommons.org/licenses/by/4.0/</p><p><img src="//html.hanspub.org/file/5-2690360x7_hanspub.png" /> <img src="//html.hanspub.org/file/5-2690360x8_hanspub.png" /></p></sec><sec id="s3"><title>1. 引言</title><p>目前，国际信息化的发展促使国际间人们的交流日益广泛，网络视频业务也日益增多。在信息产业中，网络视频业务正成为当今计算机网络界最流行的应用，从国际国内交流到生活和娱乐，视频渗透到我们生活的各个方面。然而网络本身并不完善，本质上是一种失真网络。因此，引起了学术界和工业界的广大专业人士思考是什么原因导致视频质量下降以及如何评估网络视频的质量。为此，我们建立视频质量评估模型对视频的质量进行评估。网络TCP/IP协议本身只是一种尽力而为的协议 [<xref ref-type="bibr" rid="hanspub.30869-ref1">1</xref>] [<xref ref-type="bibr" rid="hanspub.30869-ref2">2</xref>] ，在这种服务模型下，所有业务流公平地去竞争网络资源，不能满足对带宽，延迟，抖动等有特殊要求的新型应用。这些新型应用促成了服务质量(Quality of Service, QoS)概念的出现。网络视频失真将严重影响用户体验质量QoE。因此，为了满足用户的终端体验质量需求，需要建立优化的视频质量评估模型。QoE的评价方法中主观方法操作起来十分的困难，因此客观QoE评价方法即将测量得到的丢包率映射为QoE成为一种新的方法。通过对网络视频失真深入的分析，可以知道网络视频传输失真的主要表现形式是延迟、丢包和抖动。其中，延迟几乎对视频的质量没有影响，而网络的抖动所导致的效果就是丢包，所以统一采用丢包率衡量网络的性能。因此，我们研究丢包对QoE的影响并建立丢包率到QoE的映射。</p></sec><sec id="s4"><title>2. 相关工作</title><p>文献 [<xref ref-type="bibr" rid="hanspub.30869-ref1">1</xref>] 提出一套基于PSNR值的通过对视频源编码，传输，修复，比较评价等模块实现对视频传输及评价整个过程的仿真的视频评测框架EvalVid。文献 [<xref ref-type="bibr" rid="hanspub.30869-ref2">2</xref>] 说明了在H.264视频中区分了I，P，B帧的优先级并提高了视频质量，但没有深入的分析每一帧对用户体验的不同影响。文献 [<xref ref-type="bibr" rid="hanspub.30869-ref3">3</xref>] 得出影响MPEG2视频质量的主要因素有编码率和丢包等,但是没有丢包率到PSNR值的映射。文献 [<xref ref-type="bibr" rid="hanspub.30869-ref4">4</xref>] 选用MPEG4，H.264，H.263三种视频格式在Evalvid框架下分析不同位置丢包对QoE的影响。文献 [<xref ref-type="bibr" rid="hanspub.30869-ref5">5</xref>] 为了支持大规模的部署，提高精确性和可行性，建立了一种数据包丢失与失真视频关系的评估模型。文献 [<xref ref-type="bibr" rid="hanspub.30869-ref6">6</xref>] 说明由于分组过程中视频数据包的损失，QoE/QoS (体验质量/服务质量)的服务可以强烈的退化。它验证了一个单一的I帧数据包丢失导致视频减值，并显着性降低视频质量。文献 [<xref ref-type="bibr" rid="hanspub.30869-ref7">7</xref>] 为了说明丢包对视频质量的影响，设计了一个实时的数据包分析系统去监测数据包丢失。文献 [<xref ref-type="bibr" rid="hanspub.30869-ref8">8</xref>] 介绍一种模型来说明QoS参数对用户感知的视频质量的影响，分析了在各种网络配置下MPEG-4视频传输的QoS参数，得到了QoS参数如何影响用户感知的视频质量。</p></sec><sec id="s5"><title>3. 丢包对QoE的影响</title><p>通过深入分析失真网络，我们知道网络视频传输失真的主要表现形式是延迟、丢包和抖动。其中，延迟几乎对视频的质量没有影响，而网络的抖动所导致的效果就是丢包，所以统一采用丢包率衡量网络的性能。本节主要是在使用MPEG4编码器的基础上研究丢包对QoE的影响。MPEG是Moving Pictures Experts Group (动态图象专家组)的简称，是国际标准化组织(ISO)成立的专责制定有关运动图像压缩编码标准的工作组所制定的国际通用标准。其中MPEG1是VCD的视频图像压缩标准；MPEG2是DVD/超级VCD的视频图像压缩标准，MPEG4是网络视频图像压缩标准之一。MPEG4之优势在于其压缩比(最大可达4000:1)，低位元速率，较少之核心程式空间，加强运算功能，及强大之通讯应用整合能力，己成为影音数位视讯产业，最重要之功及标准格式。日本NTT制定标准，让动态影像能以不同通信速率传递。国际电脑界推出了适合电视动画、移动通讯、电脑互动影片、随选视讯的第四代动态影像解压缩协定——MPEG4，这一协定将使得动画影像应用范围更加广，画面更加自然。VCD可以在符合第一代动态影像解压缩协定(MPEG1)的多媒体电脑上播放，如果透过网络传输播放影像，大约要通过64 K以上的数据专线或整体服务数据网络，才能够观看到比较自然的影像。高画质电视或高容量DVD则使用第二代动态影像解压缩协定(MPEG2)，电脑如果要看DVD光盘，除了DVD光驱外，还要加装动态影像解压卡(当然，CPU + 3D加速卡，完全可以以软解压的方式来实现)，因为高画质电视处理资料量为普通动画影像的6倍，若在网络上传输，至少要用3 Mbps的专线，相当于两条T1专线，根本无法普及化。因此，日本NTT移动通信网公司主导国际电信标准组织，在包括松下、东芝、富士通、恩益禧等电脑通讯业者参与下，着手开发宽频移动通信，又称为下一代移动通信，让不同速率的通信传输都可结合MPEG4播出，也搭配制订了MPEG4标准。NTT在日本电脑展上展示了以28,800 bps传输，每秒播放10个176乘144画面的迷你画面，适用于视讯电话或远距监视；若改用流行的56 Kbps猫，传输的画质会更好，还能校正解压缩错误，避免影像漏失；如果用384 Kbps数据专线，就可以每秒15至30画面速度播放，画面大小为352乘288；若是2 Mbps专线就能播出完整的720乘480画面，每秒30个画面，这和当时电影、电视效果就完全相同了。MPEG4影音数位视讯产业己在台湾异军突起，悄悄地在市场中展现具潜力之商机。MPEG4是一个影音串流视讯压缩技术及商业标准格式，继MPEG2、MP3、VCD、DVD之后，MPEG4之优势压缩比(最大可达4000:1)，低位元速率，较少之核心程式空间，加强运算功能，及强大之通讯应用整合能力，己成为影音数位视讯产业，最重要之功及标准格式。亚洲国家(主要以日本、中国台湾、韩国及大陆为主轴)是一个不论在IT、IA及无线通讯产品设计、研发及生产上成长最快速之市场；台湾厂商在此产业动向，更扮演其重要之角色。继台湾在传统夕阳产业及科技人力密集之生产制造基地，转移至海外，其中以大陆为最大之产业外移地区，台湾产业生态必然受到冲击及转型，研发，设计，IP (智慧财产)及专业之系统整合俨然成为台湾产业必经之定位，从美商Intel及Phoenix至台湾设立研发中心，不难看出其端倪。MPEG4影音数位视讯产业所研发，设计及系统整合方面，藉著产业世代交替阶段中，孕育出丰富之商机，其MPEG4影音数位应用商机可分为三大类：一、以安全系统，数位监视系统(Surveillance)为主--MPEG4的高压缩比，能够让数位录(放)影机传输更快，存取空间更少。并可透过Internet传输，播放较佳的影像品质，其中IC晶片厂商有TI及淩阳为主；因主要是在监控应用可搭配一般的数位或类比监视系统应用中，此数位监视系统或数位监控录影——DVR (Digital Video Recorder)可与宽频网际网路(Internet)及无线通讯(WLAN)结合，衍生出更多之MPEG4应用商机；国内有潜力之厂商包括：悠克、慧友、镇宇、……二、以数位相机(DSP)，一般数位DV摄录影机(CCD)，可携带型MPEG4 (或DivX)多媒体影音(录)放，影机(Portable MPEG4/DivX Player or Viewer)为主，此应用领域需较高品质之影像解析度或画素，通常为百万画素，彩色液晶萤幕以1.5吋、2.5吋及3.5吋为主，影音动画可达到160 &#215; 120/320 &#215; 240 (DSP)或运用DXP讯号处理(CCD)加入了MPEG4影音录功能，使其增加更多的空间；录制高品质之影像和语音，此应用领域可与手机或PDA整合加入MPEG4影音压缩功能，并可与无线通讯(Blutooth及WLAN)整合，成为便利之无线影音应用产品。国内有潜力之厂商包括：天瀚、明碁、致伸、东雅、金宝、建邦……此市场供应商一直是以日本为主，主要厂商包括：Sharp、Sony、Panasonic、Nikon、FujiFilm、Olympus、Canon……三、以可携带型之行动数位影音录放影机DVR、数位电视/视讯广播机上盒DVB (Digital Video Broadcasting)及STB (Set-Top-Box)为主，从类比到数位，从一般的广播到录放功能，MPEG4己在数位影音录放领域扮演革命性的角色；其中最大的特色是有HDD硬碟或CD-RW整合到系统中，MPEG4己逐渐地在数位影音录放领域中取代了MPEG2的地位；虽然DVB STB以MPEG2为其为其标准之压缩规格，主要DVB晶片供应厂为ST (5518)及Fujitsu (2250)为主流，其中PVR (Personal Video Recorder)功能己运用到STB，但市场尚未打开；同时市场己有以MPEG2之外接式DVR；将来MPEG4整合HDD及CD-RW之外接用DVR，即可取代MPEG2 DVR，同时也会刺激MPEG4跨入DVB STB之压缩技术升级。</p><sec id="s5_1"><title>3.1. 实验环境</title><p>由于在真实的网络上，无法量化的去模拟网络不同程度的损伤。为此，在windows上搭建cygwin + NS2的网络仿真环境，通过改变QoS参数的方法去模拟网络不同程度的损伤。再将NS2和Evalvid进行整合得到MyEvalvid。MyEvalvid使得Evalvid能通过myEvalvid，my_UDP，my_Evalvid_Sink这三个接口程序与NS2做沟通，介绍如下。1) myEvalvid：读取经VS程序处理过后的影片记录文件，把记录文件中的每一个画面切割成较小的片段，并在用户在Tcl Script中设置好的时间内把这些区段往较底层的UDP层传送出去。2) my_UDP：基本上my_UDP Agent只是UDP Agent的延伸。这个新的Agent把封包传送时间、封包的识别和封包负载大小记录在Tcl Script中所设置的文件中。3) myEvalvid_Sink：接收由my_UDP所传送出去的封包，并且记录接收时间、封包的识别和封包负载大小，记录在Tcl Script所设置的文件中。</p></sec><sec id="s5_2"><title>3.2. 拓扑结构描述和高清视频选择</title><p>有线拓扑结构一共有4个节点，n0与n1和n2与n3之间是双工链路，链路的频宽是10 MBps，延迟的时间设置为1 ms。n1和n2之间是单工链路速度，频宽是640 kb，延迟的时间设置为1 ms。单工和双工的队列管理机制都采用DropTail，且队列的长度都是50个封包大小。在n0上建立UDP Agent，封包大小设置为1500 bytes，在n3上建立NULL Agent，封包大小设置为1500 bytes。最后，将两个Agent设置好联机。仿真时间是10 s。无线网络的拓扑结构总共有4个无线节点，n0~n3这四个无线节点n0 (200, 400)，n1 (200, 300)，n2 (400, 300)，n3 (400, 400)。n0设置为移动节点，在模拟的第5 s的时候，以5 m/s的速度从起始位置移动到(300, 400)位置，然后在第25 s的时候，再移动到(200, 400)，也就是n0的起始位置。在n0上建立udp1 Agent，在n3上建立null1 Agent，然后在这个上面建立联机。仿真时间是50 s。我们选取高清视频源进行实验，高清视频源主要有525序列和625序列。在充分了解高清视频的基础上，选出人类剧烈运动，内容复杂度高的视频src13_hrc1_525.yuv和风景，内容复杂度低的src22_hrc1_525.yuv两个视频。高清视频即现在的HDTV，HDTV是DTV标准中最高的一种，即High Definition TV，故而称为HDTV。HDTV规定了视频必须至少具备720线非交错式(720 p，即常说的逐行)或1080线交错式隔行(1080 i，即常说的隔行)扫描(DVD标准为480线)，屏幕纵横比为16:9。音频输出为5.1声道(杜比数字格式)，同时能兼容接收其它较低格式的信号并进行数字化处理重放。HDTV的规格：HDTV规定了视频必须至少具备720线非交错式(720 p，即常说的逐行)或1080线交错式隔行(1080 i，即常说的隔行)扫描(DVD标准为480线)，屏幕纵横比为16:9。音频输出为5.1声道(杜比数字格式)，同时能兼容接收其它较低格式的信号并进行数字化处理重放。HDTV有常见的三种分辨率，分别是：720 p (1280 &#215; 720P，非交错式 欧美国家有的电视台就是用这种分辨率)，1080 i (1920 &#215; 1080，隔行扫描)，1080 p (1920 &#215; 1080，逐行扫描)，其中网络上流传的以720 p和1080 p最为常见，480 p属于标清，480 p效果就是市面上的DVD效果！480 p是一种视频显示格式。字母p表示逐行扫描 (progressive scan)，数字480表示其垂直分辨率，也就是垂直方向有480条水平线的扫描线；而每条水平线分辨率有640个像素，纵横比(aspect ratio)为4:3，即通常所说的标准电视格式(standard-definition television, SDTV)。帧频通常为30赫兹或者60赫兹。一般描述该格式时，最后的数字通常表示帧频。480 p通常应用在使用NTSC制式的国家和地区，例如北美、日本、台湾等。480 p 60格式被认为是准高清晰电视格式(enhanced-definition television, EDTV)。1) REMUX：提取原版Blu-ray和HDDVD视频进行无损封装，AVI视频部分不重编码，音频一般采用原片音轨，可能采用DVD提取的国粤语和其他音轨；2) AVI：所谓封装格式就是将已经编码压缩好的视频轨和音频轨按照一定的格式放到一个文件中，也就是说仅仅是一个外壳，或者大家把它当成一个放视频轨和音频轨的文件夹也可以。随着网络传输质量的不断提高，在三网融合的大环境下，CC视频及时推出了码率1024、分辨率1280 &#215; 960的超高清视频服务，带领视频行业跨入全新的高清高品质时代。AVI是微软1992年推出用于对抗苹果Quicktime的技术，尽管国际学术界公认AVI已经属于被淘汰的技术，但是由于windows的通用性，和简单易懂的开发API，还在被广泛使用。AVI的文件结构、分为头部, 主体和索引三部分。主体中图像数据和声音数据是交互存放的。从尾部的索引可以索引跳到自己想放的位置。AVI本身只是提供了这么一个框架，内部的图像数据和声音顺据格式可以是任意的编码形式。因为索引放在了文件尾部，所以在播internet流媒体时已属力不从心。很简单的例子，从网络上下载的片子，如果没有下载完成，是很难正常播放出来。另外一个问题是AVI对高码率VBR音频文件支持不好。VBR全称是Variable BitRate，就是动态比特率，可以根据当前的需要定义不同的比特率，避免了浪费，并且提高了利用率。随之问题也就来了，因为容器里的图像和声音是分开的，所以播放时需要一个图像和声音的同步过程，如果CBR音轨的话因为码率是定值，同步不成为问题，可是VBR音轨是不断的在变换，而AVI没有时间戳去让VBR音轨和图像同步，这样就会产生图像声音不同步的问题。后来VirtualDub提出了一种新的方法扩充了AVI对VBR音频的兼容，但是在高码率时会产生丢失数据的问题，从而导致有损音效，这一点问题到如今都没有比较完美的解决方法。并且更加令人遗憾的是，对TrueHD，DTS-HD等音效更是完全不能支持。3) TS：现今网上大多流传以TS封装的HDTV remux版，PS封装只能在HDDVD原版才看到，所以我们来着重分析一下TS封装格式。电视节目是你任何时候打开电视机都能解码(收看)的，所以，MPEG2-TS格式的特点就是要求从视频流的任一片段开始都是可以独立解码的。从结构上来说，TS是由头文件和主体所组成的，扩充过的TS流还包括时间戳。这样不管是什么格式的VBR音轨，都很容易通过时间戳来同步图像。当然，对新的声音格式来说，需要新的分离器，解码器来实现解码。如今正在不断改进开发中。除了REMUX版本之外(Remux的意思是无损的提取出HD-DVD和 BluRay-DVD里面的视频数据和音频数据，封装到我们熟悉的TS或者AVI文件中)，有不少HDRIP (重新编码，即有损压缩过之后的片)使用的封装格式一般是AVI，MKV和MOV。AVI封装自然不需要介绍了，MOV是Quicktime封装，这一封装和AVI几乎是同一时代的，缺陷也不少，如今很少有人使用。而使用MKV是Matroska的简称，它是一种新的多媒体封装格式，比较常见的搭配是X264 + MKV。</p></sec><sec id="s5_3"><title>3.3. 仿真实验</title><p>这个实验首先采用高清视频src13_hrc1_525.yuv和src22_hrc1_525.yuv使用MPEG4编码在有线环境下进行。首先，我们假设封包遗失率对用户体验质量没有影响。其次，我们假设视频内容复杂度对用户体验质量没有影响。实验结果如图1和图2所示，做拟合曲线图如图3和图4所示。</p></sec><sec id="s5_4"><title>3.4. 仿真结果的分析</title><p>观察图1和图2可以发现，封包遗失率不同，用户体验质量不同，因此假设1不成立，即封包遗失率对用户体验质量有影响。对比两个图可以发现，相同丢包率情况下，用户体验质量不同，这是由于两个视频的内容复杂度不同，因此，假设2不成立，即视频内容复杂度对用户体验质量有影响。观察图3和图4两个结果图发现两个图都是随着丢包率的增大，用户体验质量先是增加，然后减小，最后再增大，并且存在两个拐点。并且对比两个图可以知道，视频内容复杂度越小，用户体验质量越差。但是</p><p>图1. Src13丢包率和PSNR图</p><p>图2. Src22封包遗失率和PSNR值图</p><p>图3. Src13视频的拟合曲线图</p><p>图4. Src22视频的拟合曲线图</p><p>src22_hrc1_525.yuv视频的第一个拐点并不是很明显。两个图的横坐标都是封包遗失率，纵坐标都是PSNR值。对于src22视频，延迟时间设置对用户体验质量和封包遗失率没有影响。链路速度的下限是10 MB和74 kb。封包大小的下限是540 kb，上限是2050 kb。量化参数的范围是0.01~255。因此，封包遗失率极少取到0.6~1之间。在第一个拐点的左侧和第二个拐点的右侧，丢包率越大，用户体验质量越好。造成这种现象的原因是视频的内容复杂度如较大的空间复杂度和时间复杂度会对编码失真产生掩盖效应，而视频失真主要是由编码失真和网络传输失真组成。在这里我们用时域复杂度和空域复杂度代表视频的内容特性，用丢包率来衡量网络传输失真，当视频内容复杂度很大也就是时域复杂度和空域复杂度很大时，它对编码失真的掩盖效应远远大于编码失真和网络传输失真的总和，因此，丢包率越大，用户体验质量越好。在第一个拐点的右侧和第二个拐点的左侧，丢包率越大，用户体验质量越差。造成这种现象的原因是当双工和单工链路速度较小时，尤其在小于实际传输速度范围内传输时，双工和单工链路速度设置的越小，网络会越加拥塞，丢包率会越大，用户的体验质量越差。封包的大小设置的越小，则封包的数量越多，在封包的错误率相同的情况下，封包的遗失率越大，则用户的体验质量QoE越小。压缩的量化参数越大，需要较多的封包去传送，封包遗失率越大，压缩出来的视频质量越差。GOP越大，其等待下一个Ｉ帧到来的时间会比较长，故恢复时间会比较长，用户体验质量越差。并且当时域复杂度和空域复杂度不大时，它对编码失真的掩盖效应远远小于编码失真和网络传输失真的总和，因此，丢包率越大，用户体验质量越差。通过上面的图3和图4我们可以发现，在不同的视频的情况下，丢包对QoE的影响程度不同，视频的内容越是复杂，视频的QoE越大。得出结论不同的视频内容对视频的QoE有影响。造成这种现象的原因是视频内容运动越是复杂，时间复杂度和空间复杂度越大，对编码失真产生掩盖效应，因此，用户体验质量越好。总体来讲，得出的结论是不同的内容复杂度和不同的丢包率对用户体验质量有显著的影响。</p></sec></sec><sec id="s6"><title>4. 建立丢包率到用户体验质量QoE的映射</title><p>在研究丢包对用户体验质量QoE的影响基础上，进行建立丢包率到视频质量QoE的映射。众所周知，QoE的评价方法主要有主观的方法和客观的方法，主观方法操作起来十分的困难。因此客观QoE评价方法即将测量得到的丢包率映射为用户体验质量QoE成为一种新的思路。</p><sec id="s6_1"><title>4.1. 相关理论</title><p>根据丢包率和PSNR值关系的散点图，经过线性，平方，混合，对数，幂，三次方等模型匹配后发现丢包率和PSNR值之间存在三次方关系。形如： y = a x + b x 2 + c x 3 + d 。在此，以src13_hrc1_525.yuv为例，建立回归方程： y = a x 3 + b x 2 + c x + d 。由这个表达式我们可以看出，这个是一元非线性方程，可以采用一元非线性拟合的方法求出方程的系数。它也可以看作是一元三阶多项式拟合。在此，我们求出一元非线性拟合求出回归方程的系数和src13_hrc1_525.yuv视频的丢包率到PSNR值的散点图的拟合曲线图。实验环境和高清视频选择与上一部分相同。</p></sec><sec id="s6_2"><title>4.2. 仿真实验</title><sec id="s6_2_1"><title>4.2.1. 回归方程</title><p>对于src13_hrc1_525.yuv视频，建立的回归方程如下，即丢包率和PSNR值之间的映射关系如下所示。有线环境： y = 21.54 x 3 − 35.5 x 2 + 15.12 x + 13.35 ，无线环境： y = 13090 x 3 − 150.4 x 2 + 21.31 x + 11.86 。</p></sec><sec id="s6_2_2"><title>4.2.2. 拟合曲线图</title><p>对src13_hrc1_525.yuv视频的丢包率和PSNR值关系的散点图在有线环境下采用一元非线性回归分析进行拟合后得到的拟合曲线如图5所示。无线环境下如图6所示。</p></sec></sec><sec id="s6_3"><title>4.3. 模型的分析</title><p>通过观察拟合曲线，发现封包遗失率和用户体验质量QoE确实呈现一元非线性关系。对于src13_hrc1_525.yuv视频，将散点图拟合成曲线后，它的各个性能指标如表1所示。</p><p>由于残差平方和SSE较小，所以均方根误差RMSE也较小，调整的判定系数R-Square则较大，因此可以认为拟合的效果较好，拟合有效。对拟合得出的方程的检验主要是通过拟合优度检验(判定系数R<sup>2</sup>的检验)。其中，判定系数R<sup>2</sup>的是判定回归模型拟合程度优劣最常用的数量指标，越是接近1，则模型的拟合程度越高。对于src13_hrc1_525.yuv视频，判定系数R<sup>2</sup>是0.3885和0.6779，接近1，模型的性能良好。实验结果表明，这种模型正确性高，易于操作，可实时检测丢包对用户体验质量的影响。</p><p>图5. Src13有线网络环境</p><p>图6. Src13无线网络环境</p><table-wrap id="table1" ><label><xref ref-type="table" rid="table1">Table 1</xref></label><caption><title> Src13 performance inde</title></caption><table><tbody><thead><tr><th align="center" valign="middle" >视频</th><th align="center" valign="middle" >R-square</th><th align="center" valign="middle" >RMSE</th><th align="center" valign="middle" >SSE</th></tr></thead><tr><td align="center" valign="middle" >Src13_hrc1_525.yuv (有线)</td><td align="center" valign="middle" >0.3885</td><td align="center" valign="middle" >0.2284</td><td align="center" valign="middle" >3.337</td></tr><tr><td align="center" valign="middle" >Src13_hrc1_525.yuv (无线)</td><td align="center" valign="middle" >0.6779</td><td align="center" valign="middle" >0.06808</td><td align="center" valign="middle" >0.1669</td></tr></tbody></table></table-wrap><p>表1. Src13性能指标</p></sec></sec><sec id="s7"><title>5. 总结与展望</title><p>综上所述，本文主要研究了丢包对QoE的影响和丢包率到QoE的映射模型的建立。本文的主要贡献是首先研究得到丢包对视频有显著的影响。其次，研究并建立了丢包率到用户体验质量QoE的映射。下一步工作是建立考虑网络丢包的视频质量无参评估模型，在考虑丢包率的基础上考虑其他因素，建立考虑网络丢包的视频质量无参评估模型，更加精确地预测用户体验质量QoE是今后的工作方向。</p></sec><sec id="s8"><title>致谢</title><p>感谢善于学术的侯义斌导师的帮助。</p></sec><sec id="s9"><title>文章引用</title><p>侯义斌,王 进. 物联网下网络视频丢包率到用户体验质量的数学映射模型Mathematics Mapping Model of Network Video Packet Loss Rate and the Quality of Experience under the Internet of Things[J]. 软件工程与应用, 2019, 08(03): 131-140. https://doi.org/10.12677/SEA.2019.83016</p></sec><sec id="s10"><title>参考文献</title></sec></body><back><ref-list><title>References</title><ref id="hanspub.30869-ref1"><label>1</label><mixed-citation publication-type="other" xlink:type="simple">Siller, M. and Woods, J. (2003) QoE Improvement of Multimedia Transmission. Proceedings of the IADIS International Conference, 2, 821-825.</mixed-citation></ref><ref id="hanspub.30869-ref2"><label>2</label><mixed-citation publication-type="other" xlink:type="simple">Yu, C.-Y., Ke, C.-H., Chen, R.-S. and Shieh, C.-K. (2008) MyEvalvid_RTP: A Evaluation Framework for More Realistic Simulations of Multimedia Transmissions. International Journal of Software Engineering and Its Applications, 2, 21-32.</mixed-citation></ref><ref id="hanspub.30869-ref3"><label>3</label><mixed-citation publication-type="other" xlink:type="simple">Volk, M., Guna, J., Kos, A. and Bester, J. (2008) IPTV Systems, Standards and Archi-Tectures: Part II-Quality-Assured Provisioning of IPTV Services within the NGN Environment. IEEE Communications Magazine, 46, 118-126.  
https://doi.org/10.1109/MCOM.2008.4511660</mixed-citation></ref><ref id="hanspub.30869-ref4"><label>4</label><mixed-citation publication-type="other" xlink:type="simple">Tao, S., Apostolopoulos, J. and Guérin, R. (2008) Real-Time Monitoring of Video Quality in IP Networks. IEEE Transactions on Networking, 16, 1052-1065. &lt;br&gt;https://doi.org/10.1109/TNET.2007.910617</mixed-citation></ref><ref id="hanspub.30869-ref5"><label>5</label><mixed-citation publication-type="other" xlink:type="simple">Dai, Q. and Lehnert, R. (2010) Impact of Packet Loss on the Perceived Video Quality. 2010 2nd International Conference on Evolving Internet, Valcencia, Spain, 20-25 September 2010, 206-209.  
https://doi.org/10.1109/INTERNET.2010.51</mixed-citation></ref><ref id="hanspub.30869-ref6"><label>6</label><mixed-citation publication-type="other" xlink:type="simple">Chen, N., Jiang, X., Wang, C. and Su, J. (2011) Study on Relationship between Network Video Packet Loss and Video Quality. 2011 4th International Congress on Image and Signal Processing, Shanghai, 15-17 October 2011, 282-286.  
https://doi.org/10.1109/CISP.2011.6099995</mixed-citation></ref><ref id="hanspub.30869-ref7"><label>7</label><mixed-citation publication-type="other" xlink:type="simple">Zečić, J., Hadžialić, M. and Hasković, A. (2012) An Approach to Estimate Corre-lation between QoS and Perceptual Video Quality in Packet-Switched Networks. 2012 Proceedings of the 35th International Con-vention MIPRO, Opatija, Croatia, 21-25 May 2012, 573-578.</mixed-citation></ref><ref id="hanspub.30869-ref8"><label>8</label><mixed-citation publication-type="other" xlink:type="simple">Reibman, A.R., Vaishampayan, V.A. and Sermadevi, Y. (2004) Quality Monitoring of Video over a Packet Network. IEEE Transactions on Multimedia, 6, 327-334. &lt;br&gt;https://doi.org/10.1109/TMM.2003.822785</mixed-citation></ref></ref-list></back></article>