<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE article  PUBLIC "-//NLM//DTD Journal Publishing DTD v3.0 20080202//EN" "http://dtd.nlm.nih.gov/publishing/3.0/journalpublishing3.dtd"><article xmlns:mml="http://www.w3.org/1998/Math/MathML" xmlns:xlink="http://www.w3.org/1999/xlink" dtd-version="3.0" xml:lang="en" article-type="research article"><front><journal-meta><journal-id journal-id-type="publisher-id">JWRR</journal-id><journal-title-group><journal-title>Journal of Water Resources Research</journal-title></journal-title-group><issn pub-type="epub">2166-6024</issn><publisher><publisher-name>Scientific Research Publishing</publisher-name></publisher></journal-meta><article-meta><article-id pub-id-type="doi">10.12677/JWRR.2020.92023</article-id><article-id pub-id-type="publisher-id">JWRR-34197</article-id><article-categories><subj-group subj-group-type="heading"><subject>JWRR20200200000_76775518.pdf</subject></subj-group><subj-group subj-group-type="Discipline-v2"><subject>地球与环境</subject><subject> 合作期刊</subject></subj-group></article-categories><title-group><article-title>
 
 
  图像识别技术在水位监测中的比测分析
  Comparative Analysis of Water Level Monitoring Technology Using Image Recognition
 
</article-title></title-group><contrib-group><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>杨</surname><given-names>振宇</given-names></name><xref ref-type="aff" rid="aff1"><sup>1</sup></xref><xref ref-type="corresp" rid="cor1"><sup>*</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>李</surname><given-names>坚</given-names></name><xref ref-type="aff" rid="aff1"><sup>1</sup></xref><xref ref-type="aff" rid="aff2"><sup>2</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>陈</surname><given-names>静姝</given-names></name><xref ref-type="aff" rid="aff1"><sup>1</sup></xref><xref ref-type="aff" rid="aff2"><sup>2</sup></xref></contrib></contrib-group><aff id="aff1"><addr-line>江西省抚州市水文局，江西 抚州</addr-line></aff><aff id="aff2"><addr-line>null</addr-line></aff><pub-date pub-type="epub"><day>17</day><month>01</month><year>2020</year></pub-date><volume>09</volume><issue>02</issue><fpage>218</fpage><lpage>225</lpage><permissions><copyright-statement>&#169; Copyright  2014 by authors and Scientific Research Publishing Inc. </copyright-statement><copyright-year>2014</copyright-year><license><license-p>This work is licensed under the Creative Commons Attribution International License (CC BY). http://creativecommons.org/licenses/by/4.0/</license-p></license></permissions><abstract><p>
 
 
   
   受河床下切影响，现有水位监测的自记水位井和压力式水位计存在着枯期记录不到数据的情况，而采用传统人工水尺读数耗时且效率不高，不符合水文信息化、智慧化发展的方向。为解决该问题，引入图像识别水位系统并对其进行了比对分析。本次比对按照《水位观测标准》(GB/T50138-2010)要求，收集了人工比测数据和浮子式水位计比测数据，计算了相关不确定度。经过一系列比对分析，证明该系统能够满足水位监测的要求，同时符合水文信息化发展方向。 At present, the water level monitoring is affected by the incision of the river-bed. The existing self-recording water level wells and pressure-type water level meters have no data recorded during the dry period. Using the traditional artificial water gauge to read the water level is time-consuming and inefficient, which is unbeneficial to the development of hydrological information and intelligent development. In order to solve this problem, an image recognition water level system was introduced, which can automatically read and upload water level data in real time. The manual data and float type water level meter data are collected in accordance with the requirements of “Water Level Observation Standard (GB/T50138-2010)” and the uncertainty of these data is analyzed. Through comparative analysis, it is proved that this system can be in accord with the requirements of water level monitoring and the development of hydrological informatization. 
  
 
</p></abstract><kwd-group><kwd>水位检测，图像识别，比测分析, Water Level Monitoring</kwd><kwd> Image Recognition</kwd><kwd> Comparison Analysis</kwd></kwd-group></article-meta></front><body><sec id="s1"><title>图像识别技术在水位监测中的比测分析<sup> </sup></title><p>杨振宇，李 坚，陈静姝</p><p>江西省抚州市水文局，江西 抚州</p><disp-formula id="hanspub.34197-formula24"><graphic xlink:href="//html.hanspub.org/file/11-2410864x5_hanspub.png"  xlink:type="simple"/></disp-formula><p>收稿日期：2019年12月17日；录用日期：2020年1月22日；发布日期：2020年2月17日</p><disp-formula id="hanspub.34197-formula25"><graphic xlink:href="//html.hanspub.org/file/11-2410864x6_hanspub.png"  xlink:type="simple"/></disp-formula></sec><sec id="s2"><title>摘 要</title><p>受河床下切影响，现有水位监测的自记水位井和压力式水位计存在着枯期记录不到数据的情况，而采用传统人工水尺读数耗时且效率不高，不符合水文信息化、智慧化发展的方向。为解决该问题，引入图像识别水位系统并对其进行了比对分析。本次比对按照《水位观测标准》(GB/T50138-2010)要求，收集了人工比测数据和浮子式水位计比测数据，计算了相关不确定度。经过一系列比对分析，证明该系统能够满足水位监测的要求，同时符合水文信息化发展方向。</p><p>关键词 :水位检测，图像识别，比测分析</p><disp-formula id="hanspub.34197-formula26"><graphic xlink:href="//html.hanspub.org/file/11-2410864x7_hanspub.png"  xlink:type="simple"/></disp-formula><p>Copyright &#169; 2020 by author(s) and Wuhan University.</p><p>This work is licensed under the Creative Commons Attribution International License (CC BY).</p><p>http://creativecommons.org/licenses/by/4.0/</p><p><img src="//html.hanspub.org/file/11-2410864x8_hanspub.png" /> <img src="//html.hanspub.org/file/11-2410864x9_hanspub.png" /></p></sec><sec id="s3"><title>1. 引言</title><p>水位观测是水文监测中重要组成要素。水文资料与人类生活和生产建设关系密切，各类工程的规划建设运行管理、防汛抗旱中雨水情预报推算、水位流量关系定线等都需要水位资料的支持。因此，水位观测的连续性、准确性显得至关重要。传统的水尺水位监测采用的人工读数方式存在效率低、实时性差、工作繁琐等诸多缺点，不利于预警系统的自动化和智能化。而传感器监测虽能够自动采集表征水位的模拟量，但受成本、使用环境要求高、维护复杂等多种因素制约，在某些场景下无法得到很好的应用。如在河床下切严重的站点，低水位时记录不到数据的情况。为解决该问题，我局引入图像识别水位系统。</p><p>图像识别技术最早在60年代被提出，当时Roberts提出“积木世界”机器视觉理论。此后Marr视觉理论、感知特征群的物体识别理论框架、主动视觉理论框架等新理论框架不断被提出。进入新千年，图像识别的技术在液位监测方面获得了长足的进步。2002年Chakravarthy [<xref ref-type="bibr" rid="hanspub.34197-ref1">1</xref>] 等人提出了利用透视几何原理结合图像处理技术对液位高度进行测量。同期，国内各大学科研机构也开展了类似研究，对水位进行识别提出了不同的图形处理方法。2010年湖南大学张帆、张显 [<xref ref-type="bibr" rid="hanspub.34197-ref2">2</xref>] 等人采用中值滤波、SOBEL算子等图像处理技术设计了视频液位检测系统；2014年，太原理工大学张阳 [<xref ref-type="bibr" rid="hanspub.34197-ref3">3</xref>] 等人利用Hough算法设计出嵌入式水位监控系统；2015年李翊 [<xref ref-type="bibr" rid="hanspub.34197-ref4">4</xref>] 等人利用BP神经网络算法进一步提高水位识别效率和适用范围，降低人工工作量。</p><p>目前，国内外对图像识别水位的研究大多集中在理论研究和实验室阶段，近两年图像识别水位系统才逐渐开始投入实际生产。至于实际生产中该系统的效果如何，国内外尚未有相关的研究与论证。本论文对解放桥水位站图像识别水位系统观测的水位数据和人工观测、浮子式自计水位计的数据进行分析比对，通过计算水位数据的不确定度验证观测数据能否满足规范要求，同时对仪器在使用过程中存在的问题进行分析并提出解决方案，为该仪器的推广使用提供参考依据。</p></sec><sec id="s4"><title>2. 测站概况和水位观测设备</title><p>解放桥水位站建于1938年5月，为国家基本站，承担着抚州市城区防汛预警任务，防汛重要性级别为2级。监测项目有降水量、水位，均采用自动监测。该站集水面积8736 km<sup>2</sup>，主河道干流总长230 km。河道大致顺直，河槽成U形，断面河宽约180 m，河床由细砂组成，左右岸均为防洪墙，墙高程在42 m以上。断面下游160 m处有文昌桥。下游约4 km处为临水汇合口，35 km处有进贤李家渡水文站。</p><p>解放桥水位站至今已收集了1972~2016年共45年连续实测水位资料，历年实测最高水位41.51 m，发生于1998年6月23日；历年实测最低水位33.60 m，发生于2007年9月18日。水位高程采用吴淞高程系统，与黄海基面高程系统的换算关系为：吴淞基面−1.743 m = 黄海基面。</p><p>该站水位观测有两套，一套为浮子式水位自记计。该设备已按照《水位观测标准》(GB/T50138-2010)要求，通过了比测分析，观测数据可作为真实水位数据参与水文资料整编和雨水情预报。另一套为图像识别水位系统，该系统为新建系统。本论文将按照规范对其进行比对分析。</p></sec><sec id="s5"><title>3. 图像识别水位系统的工作原理</title><sec id="s5_1"><title>3.1. 系统组成</title><p>智能水位图像识别系统主要包括前端设备、传输网络、平台软件和显示终端，采用定时抓拍和自主抓拍图像两种形式，定时或根据需要上传水尺图片。前端设备主要包括网络高速摄像机、水尺、4G流量卡；传输网络主要通过4G网络传输至信息中心；在信息中心部署一套平台软件系统，主要任务是对图像数据的实时接收、存储，同时定时对进行水尺图像识别，上传识别出的水位数据至显示终端。系统总体架构如图1所示。</p><p>图1. 智能图像水位识别系统总体架构图</p></sec><sec id="s5_2"><title>3.2. 系统工作原理</title><p>图像其识别系统由图像分割、图像特征提取、分类器的识别这三个部分所组成。其中，图像分割主要的作用就是将图像划分成为多个区域；图像特征提取则是对多个区域的图像进行相应的特征提取；分类器的识别则是按照图像特征所提取的结果进行适当的分类。智能水位图像识别系统基于智能化摄像头，采用机器学习和图像处理识别技术，为湖泊、河流、城市暴雨的水位提供监测服务。智能水位图像识别系统主要采用定时抓拍和自主抓拍图像两种形式，定时或根据业务需求上传水尺图片和视频。</p></sec><sec id="s5_3"><title>3.3. 图像分析技术实现流程</title><p>通过智能化摄像头对测站的预置位置配准，通过图像对水尺、水尺同名点及高程的模板制作，以保证基础数据的可靠性；根据模板匹配算法、SIFT特征点提取、RANSAC随机抽样一致性等算法将原图与模板进行配准，解决摄像头抖动引起的图像水尺位置变化时同名点及水尺位置的查找；根据图像二值化算法 [<xref ref-type="bibr" rid="hanspub.34197-ref5">5</xref>] 精准查找夜间图像水尺在正常情况及强光下的水位线；根据底色匹配模板算法及同名点精准查找白天在正常情况及强光、水尺倒影等的水位线；基于deeplabv3+ [<xref ref-type="bibr" rid="hanspub.34197-ref6">6</xref>] 模型的语义分割技术，对识别误差较大的图片用deeplabv3+模型不断训练提高识别的精度；根据智能化摄像头算法控制预置点位置，进行多水尺实时图像抓拍分析水位，智能化选择合适水尺分析水位。</p></sec></sec><sec id="s6"><title>4. 技术使用过程中问题分析及解决方案</title><p>通过长时间的运行发现，该系统适应性好、检测精度高，稳定性高。但仍然存在以下问题：一是水尺部分污渍遮挡容易导致识别结果不准确；二是在夜间无光的情况下，摄像头的红外补光不均匀，使得图像分割有很大困难，造成检测误差较大。对于水尺污渍遮挡导致的识别结果不准确，可利用deeplabv3+智能算法模型训练，提高污渍遮挡下水尺识别的准确度，从图2可见，在经过模型训练后，误差从0.33 m降至0.02 m；对于无光条件下图像识别的困难，可调整摄像头补光强度，通过降低画面亮度使画面补光均匀，从而提升识别的准确率，从图3可见，调整摄像头补光强度后，画面亮度虽然降低，但画面均匀度提高，水位线识别准确，与人工观测对比，误差为0。</p><p>图2. 水尺污渍问题的处理结果</p><p>图3. 水尺无光环境下读数问题的处理结果</p></sec><sec id="s7"><title>5. 比测方法和结果分析</title><p>根据《水位观测标准》(GB/T50138-2010)要求，比测采用人工比测法 [<xref ref-type="bibr" rid="hanspub.34197-ref7">7</xref>]。考虑到该站已有一套浮子式自计水位计，并已纳入该站《测验方案》运行多年，故增加仪器比测，对该站水位长时序比测。</p><p>参照《水位观测标准》6.2自计水位计比测6.2.1：水位比测按水位变幅分测段进行，每测段观测次数 ≥ 30次。本次比测选取了2019年5月至7月人工观测与图像识别系统比测数据124组，其中5月至6月为平水期水位数据，7月8日至10日为洪水期水位数据，观测水位从35.15 m至39.6 m，横跨本年度中低高三段水位，资料选用有一定代表性，符合规范的比测要求 [<xref ref-type="bibr" rid="hanspub.34197-ref8">8</xref>]。同时还选用2019年5月至6月浮子式自计水位计与图像识别系统比测数据950组。</p><sec id="s7_1"><title>5.1. 平水期比测资料分析</title><p>对比观测采用2019年5月1日到2019年6月30日人工观测水位与智能图像水位识别系统水位数据值的每天的8整点数据同时进行。智能图像水位识别系统水位收集93次，期间存在断电、人遮挡、船遮挡等29次数据不做参考。本次对比观测的水位在35.15~37.11 m之间。</p></sec><sec id="s7_2"><title>5.2. 洪水期比测资料分析</title><p>对比观测采用2019年7月8号到2019年7月10号每天早8点到晚上20点洪水过程中的比测数据。智能图像水位识别系统水位共31次，期间存在断电、人遮挡、船遮挡等8次数据不做参考。本次对比观测的水位在38.79~39.6 m之间。</p></sec><sec id="s7_3"><title>5.3. 分析依据</title><p>据《水位观测标准》(GB/T50138-2010) E.0.6，采用自动监测设备监测水位时，其系统误差及不确定度应按下列方法估算：</p><p>系统不确定度</p><p>X ″ y = ∑ i = 1 x ( P y i − P i ) N (1)</p><p>随机不确定度</p><p>X ′ y = 2 ∑ i = 1 x ( P y i − P i − X ″ y ) 2 N − 1 (2)</p><p>综合不确定度</p><p>X z = X ′ y 2 + X ″ y 2 (3)</p><p>式中：P<sub>yi</sub>为自动监测水位；P<sub>i</sub>为人工校测水位；N为校测次数。</p></sec></sec><sec id="s8"><title>6. 计算分析与评定</title><sec id="s8_1"><title>6.1. 图像识别水位系统与人工观测、浮子式水位计的相关性分析</title><p>解放桥水位站图像识别水位系统与人工观测水位及浮子式水位计在平水、洪水期间的水位的相关关系分别为R<sup>2</sup> = 0.9937 (见图4)、R<sup>2</sup> = 0.9973 (见图5)、R<sup>2</sup> = 0.9977 (见图6)，由此可见图像识别水位无论和人工观测还是传统水位计比测，其相关性都较好。</p><p>图4. 平水期间水位比对关系线</p><p>图5. 洪水期间水位比对关系线</p><p>图6. 图像识别系统与浮子式水位计比对关系线</p></sec><sec id="s8_2"><title>6.2. 图像识别水位系统不确定度的计算</title><p>根据水位观测标准(GB/T50138-2010)，比测结果应符合置信水平95%的综合不确定度应小于3 cm，系统误差应为 &#177; 1 cm。平水期、洪水期比测结果误差见表1。</p><table-wrap id="table1" ><label><xref ref-type="table" rid="table1">Table 1</xref></label><caption><title> Result of comparative analysi</title></caption><table><tbody><thead><tr><th align="center" valign="middle" >时间</th><th align="center" valign="middle" >比测方式</th><th align="center" valign="middle" >水位范围(m)</th><th align="center" valign="middle" >比测次数</th><th align="center" valign="middle" >水位等级</th><th align="center" valign="middle" >波浪</th><th align="center" valign="middle" >最大误差(m)</th><th align="center" valign="middle" >随机不确定度(cm)</th><th align="center" valign="middle" >系统误差(cm)</th><th align="center" valign="middle" >综合不确定度(cm)</th><th align="center" valign="middle" >是否满足规范</th></tr></thead><tr><td align="center" valign="middle" >5~6月</td><td align="center" valign="middle" >人工比测</td><td align="center" valign="middle" >35.15~37.11</td><td align="center" valign="middle" >93</td><td align="center" valign="middle" >中低水</td><td align="center" valign="middle" >无波浪</td><td align="center" valign="middle" >0.05</td><td align="center" valign="middle" >2.93</td><td align="center" valign="middle" >0.46</td><td align="center" valign="middle" >2.96</td><td align="center" valign="middle" >是</td></tr><tr><td align="center" valign="middle" >7月</td><td align="center" valign="middle" >人工比测</td><td align="center" valign="middle" >38.79~39.6</td><td align="center" valign="middle" >31</td><td align="center" valign="middle" >高水</td><td align="center" valign="middle" >大波浪</td><td align="center" valign="middle" >0.05</td><td align="center" valign="middle" >2.89</td><td align="center" valign="middle" >0.10</td><td align="center" valign="middle" >2.89</td><td align="center" valign="middle" >是</td></tr><tr><td align="center" valign="middle" >5~6月</td><td align="center" valign="middle" >仪器比测</td><td align="center" valign="middle" >35.15~37.11</td><td align="center" valign="middle" >950</td><td align="center" valign="middle" >中低水</td><td align="center" valign="middle" >无波浪</td><td align="center" valign="middle" >0.05</td><td align="center" valign="middle" >2.84</td><td align="center" valign="middle" >0.82</td><td align="center" valign="middle" >2.93</td><td align="center" valign="middle" >是</td></tr></tbody></table></table-wrap><p>表1. 比测结果数据</p></sec></sec><sec id="s9"><title>7. 总结</title><p>结果表明：平水期综合不确定度2.96 cm、系统误差0.46 cm；洪水期综合不确定度2.89 cm、系统误差0.1 cm，符合规范要求。从系统记录资料和人工观测水位数据的比测分析结果可以看出，图像识别数据完整性、识别准确性较好。从该系统在各种环境条件下运行情况来看，其工作状态稳定、可靠。但在夜间光线不足、污渍遮挡、水位线不清晰等情况下，图像识别系统运行中存在识别精度下降甚至识别不出的情况。针对上述问题，使用人工智能模型训练可以有效的解决水尺遮挡造成精度下降的问题，通过调节摄像头补光强度解决夜间光线不足及水位线不清晰问题。建议：</p><p>1) 采用像素更高的高清摄像头，从而提高拍摄图像的清晰度，提高图像识别的准确率。</p><p>2) 针对夜间无光环境下，镜头补光过度造成的画面不均匀，建议采用专门设计的补光镜头，针对水尺补光过度的情况，优化补光算法。</p><p>3) 数据传输由4G网络升级到5G。利用5G网络的高带宽、低延时的特点，解决图像上传速度限制，降低数据处理时间。</p><p>4) 在图像识别的运行中水位的准确率仍然有提升的空间，需要利用deeplabv3+模型对大量图片数据进行修正及深度训练以提高其精确度。</p></sec><sec id="s10"><title>文章引用</title><p>杨振宇,李 坚,陈静姝. 图像识别技术在水位监测中的比测分析Comparative Analysis of Water Level Monitoring Technology Using Image Recognition[J]. 水资源研究, 2020, 09(02): 218-225. https://doi.org/10.12677/JWRR.2020.92023</p></sec><sec id="s11"><title>参考文献</title></sec></body><back><ref-list><title>References</title><ref id="hanspub.34197-ref1"><label>1</label><mixed-citation publication-type="other" xlink:type="simple">CHAKRAVARTHY, S., SHARMA, R. and KASTURI, R. Noncontact level sensing technique using computer vision. IEEE Transactions on Instrumentation &amp; Measurement, 2002, 51(2): 353-361. &lt;br&gt;https://doi.org/10.1109/19.997837</mixed-citation></ref><ref id="hanspub.34197-ref2"><label>2</label><mixed-citation publication-type="other" xlink:type="simple">张显. 基于图像处理的视频液位检测系统的研究[D]: [硕士学位论文]. 长沙: 湖南大学, 2010: 4-10. 
ZHANG Xian. The study on image processing of video liquid level detection system. Changsha: Hunan University, 2010: 4-10. (in Chinese)</mixed-citation></ref><ref id="hanspub.34197-ref3"><label>3</label><mixed-citation publication-type="other" xlink:type="simple">张阳, 杜文广. 基于计算机视觉的嵌入式水位监控系统设计[J]. 制造业自动化, 2014(9): 121-123. 
ZHANG Yang, DU Wenguang. The design of embedded system for water level measurement based on computer vision. Manufacturing Automation, 2014(9): 121-123. (in Chinese)</mixed-citation></ref><ref id="hanspub.34197-ref4"><label>4</label><mixed-citation publication-type="other" xlink:type="simple">李翊, 兰华勇, 严华. 基于图像处理和BP神经网络的水位识别研究[J]. 人民黄河, 2015, 37(12): 12-15. 
LI Yi, LAN Huayong and YAN Hua. Water level recognition based on image processing and BP neural network. Yellow River, 2015, 37(12): 12-15. (in Chinese)</mixed-citation></ref><ref id="hanspub.34197-ref5"><label>5</label><mixed-citation publication-type="other" xlink:type="simple">陈金水. 基于图像识别的水位数据的获取方法[J]. 水利信息化, 2013(1): 48-51. 
CHEN Jinshui. Method of water level data capturing based on video image recognition. Water Resources Informatization, 2013(1): 48-51. (in Chinese)</mixed-citation></ref><ref id="hanspub.34197-ref6"><label>6</label><mixed-citation publication-type="other" xlink:type="simple">袁立, 袁吉收, 张德政. 基于DeepLab-v3+的遥感影像分类[J]. 激光与光电子学进展, 2019(15): 152801-1-152801-7. 
YUAN Li, YUAN Jishou and ZHANG Dezheng. Remote sensing image classification based on Deeplab-v3+. Laser &amp; Optoe-lectronics Progress, 2019(8): 152801-1-152801-7. (in Chinese)</mixed-citation></ref><ref id="hanspub.34197-ref7"><label>7</label><mixed-citation publication-type="other" xlink:type="simple">贺新渭. 陕西省武关水文站自动水位对比分析[J]. 陕西水利, 2019(5): 59-60. 
HE Xinwei. Comparative analysis of automatic water level of Wuguan hydrological station in Shanxi Province. Shanxi Resources, 2019(5): 59-60. (in Chinese)</mixed-citation></ref><ref id="hanspub.34197-ref8"><label>8</label><mixed-citation publication-type="other" xlink:type="simple">GB/T50138-2010水位观测标准[M]. 北京: 中国计划出版社, 2010. 
GB/T50138-2010 Standard for observation of water level. Beijing: China Planning Press, 2010. (in Chinese)</mixed-citation></ref></ref-list></back></article>