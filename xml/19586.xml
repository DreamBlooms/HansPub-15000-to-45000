<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE article  PUBLIC "-//NLM//DTD Journal Publishing DTD v3.0 20080202//EN" "http://dtd.nlm.nih.gov/publishing/3.0/journalpublishing3.dtd"><article xmlns:mml="http://www.w3.org/1998/Math/MathML" xmlns:xlink="http://www.w3.org/1999/xlink" dtd-version="3.0" xml:lang="en" article-type="research article"><front><journal-meta><journal-id journal-id-type="publisher-id">CSA</journal-id><journal-title-group><journal-title>Computer Science and Application</journal-title></journal-title-group><issn pub-type="epub">2161-8801</issn><publisher><publisher-name>Scientific Research Publishing</publisher-name></publisher></journal-meta><article-meta><article-id pub-id-type="doi">10.12677/CSA.2017.71006</article-id><article-id pub-id-type="publisher-id">CSA-19586</article-id><article-categories><subj-group subj-group-type="heading"><subject>CSA20170100000_25458665.pdf</subject></subj-group><subj-group subj-group-type="Discipline-v2"><subject>信息通讯</subject></subj-group></article-categories><title-group><article-title>
 
 
  基于WIFI模块的智能鱼缸监控系统
  Monitoring and Control System of Intelligent Aquarium Based on WIFI Module
 
</article-title></title-group><contrib-group><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>王</surname><given-names>泽政</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>马</surname><given-names>冰心</given-names></name><xref ref-type="aff" rid="aff3"><sup>3</sup></xref><xref ref-type="corresp" rid="cor1"><sup>*</sup></xref></contrib></contrib-group><aff id="aff3"><addr-line>东北大学机械工程与自动化学院，辽宁 沈阳</addr-line></aff><aff id="aff2"><addr-line>东北育才学校超常教育实验部，辽宁 沈阳</addr-line></aff><aff id="aff1"><addr-line>null</addr-line></aff><author-notes><corresp id="cor1">* E-mail:<email>1094923683@qq.com(马冰)</email>;</corresp></author-notes><pub-date pub-type="epub"><day>17</day><month>01</month><year>2017</year></pub-date><volume>07</volume><issue>01</issue><fpage>42</fpage><lpage>48</lpage><permissions><copyright-statement>&#169; Copyright  2014 by authors and Scientific Research Publishing Inc. </copyright-statement><copyright-year>2014</copyright-year><license><license-p>This work is licensed under the Creative Commons Attribution International License (CC BY). http://creativecommons.org/licenses/by/4.0/</license-p></license></permissions><abstract><p>
 
 
   
   为了解决传统观赏鱼缸养护烦琐、耗时，以及可交互性差等问题，本文设计了一种基于WIFI模块实现智能远程监控的观赏鱼缸智能养护系统。该系统主要有基站服务端和与远程客户端组成，基站服务端主要功能是对信号采集和对执行元件的控制；远程控制端实现实时信息显示和远程控制功能。基站服务端和远程客户端通过无线路由器实现数据传输和信息交换。经过大量实验证明，该系统操作简单、运行稳定、控制精确。 Aiming at solving the cumbersome, time-consuming and poor interactive problems of traditional ornamental aquarium, this paper designs an intelligent aquarium maintenance system based on WIFI module for intelligent remote monitoring. The system mainly consists of a station server and a remote client. The main function of the station server is to collect signals and control the execution elements. The remote control terminal realizes the real-time information display and remote control functions. Station server and remote client achieve data transmission and exchange of information through the wireless router. After a lot of experiments, the system has proven simple, stable and precise.
    
  
 
</p></abstract><kwd-group><kwd>观赏鱼缸，基站服务端，远程客户端，WIFI模块, Aquarium</kwd><kwd> Base Station Server</kwd><kwd> Remote Client</kwd><kwd> WIFI Module</kwd></kwd-group></article-meta></front><body><sec id="s1"><title>基于WIFI模块的智能鱼缸监控系统<sup> </sup></title><p>王泽政<sup>1</sup>，马冰心<sup>2</sup></p><p><sup>1</sup>东北育才学校超常教育实验部，辽宁 沈阳</p><p><sup>2</sup>东北大学机械工程与自动化学院，辽宁 沈阳</p><p>收稿日期：2017年1月2日；录用日期：2017年1月16日；发布日期：2017年1月22日</p><disp-formula id="hanspub.19586-formula3"><graphic xlink:href="http://html.hanspub.org/file/6-1540695x5_hanspub.png"  xlink:type="simple"/></disp-formula></sec><sec id="s2"><title>摘 要</title><p>为了解决传统观赏鱼缸养护烦琐、耗时，以及可交互性差等问题，本文设计了一种基于WIFI模块实现智能远程监控的观赏鱼缸智能养护系统。该系统主要有基站服务端和与远程客户端组成，基站服务端主要功能是对信号采集和对执行元件的控制；远程控制端实现实时信息显示和远程控制功能。基站服务端和远程客户端通过无线路由器实现数据传输和信息交换。经过大量实验证明，该系统操作简单、运行稳定、控制精确。</p><p>关键词 :观赏鱼缸，基站服务端，远程客户端，WIFI模块</p><disp-formula id="hanspub.19586-formula4"><graphic xlink:href="http://html.hanspub.org/file/6-1540695x6_hanspub.png"  xlink:type="simple"/></disp-formula><p>Copyright &#169; 2017 by authors and Hans Publishers Inc.</p><p>This work is licensed under the Creative Commons Attribution International License (CC BY).</p><p>http://creativecommons.org/licenses/by/4.0/</p><p><img src="http://image.hanspub.org:8080\Html/htmlimages\1-2890033x\e70a10f1-7c93-45ea-9603-062237856e4b.png" /><img src="http://image.hanspub.org:8080\Html\htmlimages\1-2890033x\e898c85e-ffc4-45c9-b817-14224a4d6960.png" /></p></sec><sec id="s3"><title>1. 引言</title><p>随着生活水平的提高和美化生活环境意识的增强，观赏鱼缸已经成为家居环境、办公场合和休闲娱乐场所不可缺少的饰品之一。由于生活节奏的加快和人们养护知识的缺乏，人为地保持鱼缸里的清洁适宜的生存环境却是一件很繁琐并且消耗精力的事情，鱼缸水族环境对观赏鱼的生存是至关重要的。针对这些问题，对鱼缸的创新想法也不断地被提出，一些智能化观赏鱼缸的创新想法也应运而生 [<xref ref-type="bibr" rid="hanspub.19586-ref1">1</xref>] [<xref ref-type="bibr" rid="hanspub.19586-ref2">2</xref>] [<xref ref-type="bibr" rid="hanspub.19586-ref3">3</xref>] 。</p><p>目前投入市场上的新型鱼缸采用的控制系统有过滤器、加热器和氧气泵等改善鱼缸里环境的设备的应用，在很大程度上改善了鱼缸里的生存环境。但是这些设备一般都是在传统的鱼缸上添加单个的器件，并没有实现真正的智能自动化控制，需在人为操作下来启动和关闭这些单独运行的器件，这使得操作很不便 [<xref ref-type="bibr" rid="hanspub.19586-ref4">4</xref>] [<xref ref-type="bibr" rid="hanspub.19586-ref5">5</xref>] 。</p><p>针对以上的种种问题，设计出了一种以Cortex-M4微控制器为核心，基于WIFI模块实现对观赏鱼缸远程监控的系统。该系统不但实现了对观赏鱼缸的远程监视，还实现了对其远程自动恒温控制、水质浑浊度控制、自动喂食、灯光杀菌等控制功能，在很大程度上提高观赏鱼养护效率。</p></sec><sec id="s4"><title>2. 系统的整体结构设计</title><sec id="s4_1"><title>2.1. 系统功能需求</title><p>本系统控制的对象为观赏鱼缸生态环境，目的是实现鱼缸的智能自我调节和通过客户端对鱼缸的远程实时监控。该系统实现的功能有水温、水内溶氧量、水质浑浊度、水位的检测和控制、定时喂食和光照以及远程实时监控功能等。水质环境要求如表1。</p></sec><sec id="s4_2"><title>2.2. 系统结构设计</title><p>本文设计一种智能化家用鱼缸控制系统，该系统主要有基站服务端和远程客户端组成。基站服务端又包括机械、通信以及控制等模块组成，机械部分主要温度、含氧量等传感器和氧气泵、温度棒灯等执行元件；控制部分主要有以K60芯片为核心的控制板和各路继电器组成；通信部分主要有WIFI模块和路由器组成。基站服务端主要功能是实现信号采集以及对执行元件的控制，实现各路传感器对观赏鱼缸进行信号采集，经处理后通过WIFI模块发送到远程客户端进行实时监测；同时又依据来自远程客户端的指令对相应的执行元件进行控制。</p><p>远程客户端的主要功能是对来自基站服务端的信息参数进行实时显示、基于专家信息的智能控制决</p><p>策以及控制指令发送到基站服务端，实现对基站服务端的实时监视和远程控制功能。基站服务端和远程客户端是通过WIFI模块借助路由器进行数据传输；路由器一端和控制板上的WIFI模块建立通讯，另一端连接通过无线网与客户端进行数据传输，实现与基站服务端远程数据传输与信息交换。整体设计如图1所示。</p></sec></sec><sec id="s5"><title>3. 基站服务端的设计</title><sec id="s5_1"><title>3.1. 服务端硬件设计</title><p>各路传感器、芯片信号处理电路和放大电路相连，K60芯片自带的UART模块与WIFI模块建立连接，通过WIFI无线模块将数据发送给无线接入点，然后传给客户端。硬件主要包括核心处理器、电源电路、WIFI模块、以太网功能模块复位电路等。硬件结构框如图2所示，模块功能如表2所示。</p><table-wrap id="table1" ><label><xref ref-type="table" rid="table1">Table 1</xref></label><caption><title> Aquarium parameter</title></caption><table><tbody><thead><tr><th align="center" valign="middle" >参数</th><th align="center" valign="middle" >参数内容</th></tr></thead><tr><td align="center" valign="middle" >温度</td><td align="center" valign="middle" >控制箱体温度范围在22℃~26℃</td></tr><tr><td align="center" valign="middle" >溶氧量</td><td align="center" valign="middle" >根据不同鱼类的不同生长周期控制谁溶氧量分布在8~12 mg/L</td></tr><tr><td align="center" valign="middle" >光照</td><td align="center" valign="middle" >定时对鱼缸补充光照</td></tr><tr><td align="center" valign="middle" >水位</td><td align="center" valign="middle" >水位应该控制在箱体容量的60%~80%</td></tr><tr><td align="center" valign="middle" >喂食时间</td><td align="center" valign="middle" >定时每天3次适量投食物</td></tr><tr><td align="center" valign="middle" >浑浊度</td><td align="center" valign="middle" >控制水质浑浊度范围为0~0.3 mg/L</td></tr></tbody></table></table-wrap><p>表1. 鱼缸参数</p><p>图1. 系统总结构图</p><table-wrap id="table2" ><label><xref ref-type="table" rid="table2">Table 2</xref></label><caption><title> Module parameter</title></caption><table><tbody><thead><tr><th align="center" valign="middle" >参数</th><th align="center" valign="middle" >参数内容</th></tr></thead><tr><td align="center" valign="middle" >电源电路</td><td align="center" valign="middle" >采用AMS1117-3.3稳压芯片供电</td></tr><tr><td align="center" valign="middle" >处理器</td><td align="center" valign="middle" >飞思卡尔K60芯片作为核心处理器，自带UART模块和ADC模块</td></tr><tr><td align="center" valign="middle" >WIFi模块</td><td align="center" valign="middle" >WIFI模块C32系列USR-C322模块，实现无线通</td></tr><tr><td align="center" valign="middle" >滤波电路</td><td align="center" valign="middle" >高通和低通滤波采用压控电压源电路形式，去除干扰信号</td></tr><tr><td align="center" valign="middle" >放大电路</td><td align="center" valign="middle" >采用INA121P差分放大电路，对多点信号进行放大</td></tr><tr><td align="center" valign="middle" >EEPROM</td><td align="center" valign="middle" >外设EEPROM存储芯片起断电数据保护作用</td></tr><tr><td align="center" valign="middle" >SDRAM</td><td align="center" valign="middle" >外设SDRAM模块备以后功能扩展使用</td></tr><tr><td align="center" valign="middle" >JLINK接口</td><td align="center" valign="middle" >对K60芯片下载程序和调试使用</td></tr></tbody></table></table-wrap><p>表2. 模块参数</p><p>图2. WIFI终端硬件结构框图</p></sec><sec id="s5_2"><title>3.2. 服务端软件设计</title><p>在软件设计过程中，本着模块化设计方式思想，进行每一个模块的设计。设计之前，对服务端制器软件进行合理的模块划分，清晰了编程逻辑，提高编程效率。该系统的软件程序是在IAR平台上用C语言编写。主要包括串口的初始化、UART模块波特率及波特率配置、WIFI模块的初始化配置、定时器中断的配置、串口数据接收中断配置等一系列的初始化配置，同时也包含UART模块的接收和发送数据编程，WIFI模块切换、数据传输以及EEPROM数据擦除和编写等模块 [<xref ref-type="bibr" rid="hanspub.19586-ref6">6</xref>] 。</p><p>服务端制器软件是系统的核心，为了保证软件设计的质量，提高软件的可维护性和系统运行的可靠性，服务端制器软件设计遵循应用软件设计工程的一般规律，采用模块化设计的方法。软件流程如图3所示。</p></sec></sec><sec id="s6"><title>4. 远程客户端的设计</title><sec id="s6_1"><title>4.1. 客户端的功能实现</title><p>远程客户端软件接收从远程服务端传输的数据报文，对其进行解析、存储、显示和分析。远程客户</p><p>图3. 服务端软件流程图</p><p>端实现的主要功能是对WIFI模块传输的基站服务端数据进行接收与显示、基于专家智能决策进行信息处理以及向基站服务端发送远程命令指令，从而实现对观赏鱼缸的远程智能控制。远程服务端报文采集后，进行TCP数据传输。系统网络由无线路由器构成局域网络。远程终端WIFI模块在烧录程序的时候默认配置就是这台无线路由器的名称和密码。系统监控终端WIFI连接LED指示灯亮起，显示系统监控端已经连接入无线局域网络。</p><p>为了实现鱼缸远程客户端与基站服务端间进行数据接收和发送通讯，通讯上采用Socket编程，通信协议为TCP协议 [<xref ref-type="bibr" rid="hanspub.19586-ref7">7</xref>] 。该协议提供的是一种可靠的、面向连接的通信协议。TCP通信的传输连接有三个阶段，包括通信链路的建立、数据的交互和通信连接的释放。TCP通信链路通过“三次握手”建立的，在建立链路中，鱼缸远程客户端作为请求服务的一方，发送连接请求；鱼缸基站服务器端作为提供服务的一方，等待并接收连接请求。具体通信流程如图4所示。</p></sec><sec id="s6_2"><title>4.2. 客户端开发界面</title><p>客户端界面主要包括智能决策、实时监测和实时控制。实时监测主要功能是显示WiFi无线网络传输的基站服务端传感器数据；智能决策主要功能是基于专家经验信息的控制决策；实时控制主要功能是对基站服务端执行单元控制指令，实现对鱼缸的远程控制功能。客户端主界面和远程端如图5所示。</p><p>图4. 通信流程图</p><p>图5. 远程客户端应用程序界面和实物图</p></sec></sec><sec id="s7"><title>5. 结论</title><p>本文从观赏鱼缸养护消耗精力大、养护不及时等实际问题出发，设计了一种基于WIFI模块的智能控制鱼缸。该控制系统有基站控制部分和远程客户端组成，基站控制部分的对鱼缸进行数据的实时采集和对执行器件的控制；远程客户端实现对鱼缸的实时监测和远程控制。基站服务端和远程站客户端是通过WIFI模块和无线路由器进行数据传输。该系统的设计在很大程度上减少了鱼缸养护机理的消耗，同时也使得对鱼缸的养护变得更为及时和科学，具有良好的市场价值和发展前景。</p></sec><sec id="s8"><title>文章引用</title><p>王泽政,马冰心. 基于WIFI模块的智能鱼缸监控系统 Monitoring and Control System of Intelligent Aquarium Based on WIFI Module[J]. 计算机科学与应用, 2017, 07(01): 42-48. http://dx.doi.org/10.12677/CSA.2017.71006</p></sec><sec id="s9"><title>参考文献 (References)</title></sec></body><back><ref-list><title>References</title><ref id="hanspub.19586-ref1"><label>1</label><mixed-citation publication-type="other" xlink:type="simple">宋联兴, 王海凯, 方欢, 等. 一种新型智能鱼缸的研究[J]. 山西电子技术, 2015(6): 82-83.</mixed-citation></ref><ref id="hanspub.19586-ref2"><label>2</label><mixed-citation publication-type="other" xlink:type="simple">陈亚光. 观赏金鱼的家庭养殖[J]. 新农村, 2007(10): 23-23.</mixed-citation></ref><ref id="hanspub.19586-ref3"><label>3</label><mixed-citation publication-type="other" xlink:type="simple">杨彦伟, 苏卫红, 张灏璠. 基于STC889C51的智能鱼缸控制系统[J]. 电子技术与软件工程, 2015(22): 106-107.</mixed-citation></ref><ref id="hanspub.19586-ref4"><label>4</label><mixed-citation publication-type="other" xlink:type="simple">孔祥洪, 王伟杰, 宋连伟, 等. 观赏鱼缸智能控制器的仿真设计[J]. 实验室研究与探索, 2013(32): 12-15.</mixed-citation></ref><ref id="hanspub.19586-ref5"><label>5</label><mixed-citation publication-type="other" xlink:type="simple">葛华. 鱼缸智能控制系统的设计与开发[J]. 科技资讯, 2006(36): 146-147.</mixed-citation></ref><ref id="hanspub.19586-ref6"><label>6</label><mixed-citation publication-type="other" xlink:type="simple">韩霜. 基于Wi-Fi的无线传感器网络节点的设计及应用[D]: [硕士学位论文]. 北京: 北京邮电大学, 2010.</mixed-citation></ref><ref id="hanspub.19586-ref7"><label>7</label><mixed-citation publication-type="other" xlink:type="simple">朱辉生. VC中基于SOCKET的网络编程[J]. 计算机应用与软件, 2004(21): 118-119.</mixed-citation></ref></ref-list></back></article>