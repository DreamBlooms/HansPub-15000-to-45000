<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE article  PUBLIC "-//NLM//DTD Journal Publishing DTD v3.0 20080202//EN" "http://dtd.nlm.nih.gov/publishing/3.0/journalpublishing3.dtd"><article xmlns:mml="http://www.w3.org/1998/Math/MathML" xmlns:xlink="http://www.w3.org/1999/xlink" dtd-version="3.0" xml:lang="en" article-type="research article"><front><journal-meta><journal-id journal-id-type="publisher-id">CSA</journal-id><journal-title-group><journal-title>Computer Science and Application</journal-title></journal-title-group><issn pub-type="epub">2161-8801</issn><publisher><publisher-name>Scientific Research Publishing</publisher-name></publisher></journal-meta><article-meta><article-id pub-id-type="doi">10.12677/CSA.2020.103055</article-id><article-id pub-id-type="publisher-id">CSA-34754</article-id><article-categories><subj-group subj-group-type="heading"><subject>CSA20200300000_58241054.pdf</subject></subj-group><subj-group subj-group-type="Discipline-v2"><subject>信息通讯</subject></subj-group></article-categories><title-group><article-title>
 
 
  基于模糊PID的路径跟踪控制系统
  Path Tracking Control System Based on Fuzzy PID
 
</article-title></title-group><contrib-group><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>王</surname><given-names>金星</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>石</surname><given-names>绍军</given-names></name><xref ref-type="aff" rid="aff3"><sup>3</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>刘</surname><given-names>双喜</given-names></name><xref ref-type="aff" rid="aff4"><sup>4</sup></xref><xref ref-type="aff" rid="aff3"><sup>3</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>王</surname><given-names>玉亮</given-names></name><xref ref-type="aff" rid="aff4"><sup>4</sup></xref><xref ref-type="aff" rid="aff3"><sup>3</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>李</surname><given-names>玉风</given-names></name><xref ref-type="aff" rid="aff3"><sup>3</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>宋</surname><given-names>悦</given-names></name><xref ref-type="aff" rid="aff3"><sup>3</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>权</surname><given-names>泽堃</given-names></name><xref ref-type="aff" rid="aff3"><sup>3</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib></contrib-group><aff id="aff2"><addr-line>山东农业大学机械与电子工程学院，山东 泰安;山东省农业装备智能化工程实验室，山东 泰安</addr-line></aff><aff id="aff4"><addr-line>山东农业大学机械与电子工程学院，山东 泰安;山东省园艺机械与装备重点实验室，山东 泰安</addr-line></aff><aff id="aff3"><addr-line>山东农业大学机械与电子工程学院，山东 泰安</addr-line></aff><aff id="aff1"><addr-line>null</addr-line></aff><pub-date pub-type="epub"><day>28</day><month>02</month><year>2020</year></pub-date><volume>10</volume><issue>03</issue><fpage>529</fpage><lpage>540</lpage><permissions><copyright-statement>&#169; Copyright  2014 by authors and Scientific Research Publishing Inc. </copyright-statement><copyright-year>2014</copyright-year><license><license-p>This work is licensed under the Creative Commons Attribution International License (CC BY). http://creativecommons.org/licenses/by/4.0/</license-p></license></permissions><abstract><p>
 
 
   
   为提高自动导航插秧机路径跟踪控制系统性能，提出一种基于模糊PID算法调整插秧机前轮转向角度的控制方法。该方法首先建立被控对象的运动学模型，根据运动学模型对模糊PID控制算法进行设计。其次运用Matlab对路径跟踪控制系统进行仿真分析，仿真结果表明：所设计模糊PID控制方法相比于传统PID控制方法，可以有效减少系统的超调量和到达稳态的时间。最后进行动态试验验证，传统PID控制方法下，小车底盘以0.35和0.85 m/s的速度行驶时，最大路径跟踪误差为3.8和6.5 cm，平均路径跟踪误差为2.47和3.67 cm；在模糊PID控制方法下，小车底盘以0.35和0.85 m/s的速度行驶时，最大路径跟踪误差为2.1和4.8 cm，平均路径跟踪误差为1.57和2.7 cm；试验表明：模糊PID控制性能优于传统PID算法，更适合于插秧机路径跟踪控制。 In order to improve the performance of the path tracking control system of the automatic naviga-tion transplanter, a control method based on the fuzzy PID algorithm to adjust the steering angle of the front wheel of the transplanter is proposed. Firstly, the kinematic model of the controlled object is established, and the fuzzy PID control algorithm is designed according to the kinematic model. Secondly, Matlab is used to simulate the path tracking control system. The results show that the performance of the fuzzy PID control method is better than the traditional PID control method, which can effectively reduce the overshoot of the system and the time to reach the steady state. Finally, the dynamic test is carried out to verify that under the traditional PID control method, the maximum path tracking error is 3.8 and 6.5 cm, and the average path tracking error is 2.47 and 3.67 cm when the car chassis is running at the speed of 0.35 and 0.85 m/s; under the fuzzy PID control method, the maximum path tracking error is 2.1 and 4.8cm, and the average path tracking error is 1.57 and 2.7 cm when the car chassis is running at the speed of 0.35 and 0.85m/s. The experiment shows that the performance of fuzzy PID control is better than that of traditional PID algorithm, and it is more suitable for path tracking control of transplanter. 
  
 
</p></abstract><kwd-group><kwd>插秧机，自动导航，路径跟踪，模糊PID, Transplanter</kwd><kwd> Automatic Navigation</kwd><kwd> Path Tracking</kwd><kwd> Fuzzy PID</kwd></kwd-group></article-meta></front><body><sec id="s1"><title>基于模糊PID的路径跟踪控制系统<sup> </sup></title><p>王金星<sup>1,2</sup>，石绍军<sup>1</sup>，刘双喜<sup>1,3</sup>，王玉亮<sup>1,3</sup>，李玉风<sup>1</sup>，宋悦<sup>1</sup>，权泽堃<sup>1</sup></p><p><sup>1</sup>山东农业大学机械与电子工程学院，山东 泰安</p><p><sup>2</sup>山东省农业装备智能化工程实验室，山东 泰安</p><p><sup>3</sup>山东省园艺机械与装备重点实验室，山东 泰安</p><p>收稿日期：2020年3月4日；录用日期：2020年3月19日；发布日期：2020年3月26日</p><disp-formula id="hanspub.34754-formula17"><graphic xlink:href="//html.hanspub.org/file/16-1541708x5_hanspub.png"  xlink:type="simple"/></disp-formula></sec><sec id="s2"><title>摘 要</title><p>为提高自动导航插秧机路径跟踪控制系统性能，提出一种基于模糊PID算法调整插秧机前轮转向角度的控制方法。该方法首先建立被控对象的运动学模型，根据运动学模型对模糊PID控制算法进行设计。其次运用Matlab对路径跟踪控制系统进行仿真分析，仿真结果表明：所设计模糊PID控制方法相比于传统PID控制方法，可以有效减少系统的超调量和到达稳态的时间。最后进行动态试验验证，传统PID控制方法下，小车底盘以0.35和0.85 m/s的速度行驶时，最大路径跟踪误差为3.8和6.5 cm，平均路径跟踪误差为2.47和3.67 cm；在模糊PID控制方法下，小车底盘以0.35和0.85 m/s的速度行驶时，最大路径跟踪误差为2.1和4.8 cm，平均路径跟踪误差为1.57和2.7 cm；试验表明：模糊PID控制性能优于传统PID算法，更适合于插秧机路径跟踪控制。</p><p>关键词 :插秧机，自动导航，路径跟踪，模糊PID</p><disp-formula id="hanspub.34754-formula18"><graphic xlink:href="//html.hanspub.org/file/16-1541708x6_hanspub.png"  xlink:type="simple"/></disp-formula><p>Copyright &#169; 2020 by author(s) and Hans Publishers Inc.</p><p>This work is licensed under the Creative Commons Attribution International License (CC BY 4.0).</p><p>http://creativecommons.org/licenses/by/4.0/</p><p><img src="//html.hanspub.org/file/16-1541708x7_hanspub.png" /> <img src="//html.hanspub.org/file/16-1541708x8_hanspub.png" /></p></sec><sec id="s3"><title>1. 引言</title><p>自动导航技术符合精准农业对作业机械的要求，能够减小农业生产对劳动力的依赖性，使驾驶人员成为农业机械的管理者，可以大幅度降低驾驶人员的劳动强度，能够保证插秧质量和效率 [<xref ref-type="bibr" rid="hanspub.34754-ref1">1</xref>]。路径跟踪是自动导航的核心技术，也是导航控制的重点和难点，路径跟踪控制方法的选择决定了农机自动导航的作业质量和效率 [<xref ref-type="bibr" rid="hanspub.34754-ref2">2</xref>]。由于水田的工作环境较为恶劣，插秧机在田间行驶时容易发生颠簸，使插秧机的航向发生变化，因此，提高自动导航插秧机路径跟踪控制系统性能是亟待解决的问题。</p><p>国内外许多学者对自动导航的路径跟踪控制技术进行了研究，并取得了相当丰硕的成果，卡耐基梅隆大学的Wallance和Amidi等将纯追踪模型用于汽车的自动导航，实现了路径跟踪控制 [<xref ref-type="bibr" rid="hanspub.34754-ref3">3</xref>] [<xref ref-type="bibr" rid="hanspub.34754-ref4">4</xref>]；黄沛琛等人把车辆的运动学模型简化为二轮车模型，基于纯追踪模型设计了路径跟踪控制系统 [<xref ref-type="bibr" rid="hanspub.34754-ref5">5</xref>]。纯追踪模型的主要调节参数为前视距离 [<xref ref-type="bibr" rid="hanspub.34754-ref6">6</xref>]，前视距离的取值是纯追踪模型实现路径跟踪的关键，取值不当会直接影响路径跟踪效果。刘正铎等人基于线性模型预测控制的方法设计了路径跟踪控制系统，并对农用运输车辆路径跟踪控制系统的稳定性进行了分析和优化 [<xref ref-type="bibr" rid="hanspub.34754-ref7">7</xref>]。线性模型预测控制要求建立精确的动力学模型或运动学模型 [<xref ref-type="bibr" rid="hanspub.34754-ref8">8</xref>]，由于插秧机在田间工作环境恶劣，建立动力学模型或运动学模型难度较大。周建军等人设计了基于模糊控制算法的农用车辆路径跟踪控制系统，并在改装的电瓶车上开发了自动导航控制系统，直线段最大偏差为0.19 m，曲线段最大偏差为0.26 m [<xref ref-type="bibr" rid="hanspub.34754-ref9">9</xref>]。模糊控制不需要对被控对象建立精确的数学模型，核心是用所制定的模糊规则来实现对系统的控制，具有较好的适应性，但是模糊控制存在控制精度较低的问题，因此通常与其它算法组合使用 [<xref ref-type="bibr" rid="hanspub.34754-ref10">10</xref>]。罗锡文等人设计了基于PID算法的自动转向控制系统，并在东方红拖拉机上进行了田间试验，试验结果表明，在0.8 m/s的行驶速度下，拖拉机的跟踪误差最大不超过15 cm，平均跟踪误差不超过3 cm [<xref ref-type="bibr" rid="hanspub.34754-ref11">11</xref>]。PID控制结构简单，适用性强，但是参数调整困难。</p><p>为提高自动导航插秧机路径跟踪控制系统的准确性和稳定性，本文设计了一种基于模糊PID算法的路径跟踪控制方法，在PID控制的基础上加入一个模糊调节环节，实现对PID控制参数的在线调整，通过控制插秧机前轮转向角度的变化实现路径跟踪。通过仿真与试验，验证所设计的模糊PID控制方法的性能和适应性。</p></sec><sec id="s4"><title>2. 控制系统总体结构</title><p>路径跟踪即通过控制系统调整车辆前进方向，使车辆跟随预定义路线行驶 [<xref ref-type="bibr" rid="hanspub.34754-ref12">12</xref>]，当车辆偏离预定义路线时动态调整车辆前轮转角，以保证路径跟随的精度。</p><p>插秧机路径跟踪控制原理如图1所示。导航定位系统通过安装在插秧机上的GPS接收机和传感器实时获取插秧机的位置、速度和航向角等运动参数，自动导航系统通过对比预定义路径和当前位置，得到横向偏差和航向角偏差，将两个偏差或偏差变化率作为路径跟踪控制算法的输入，输出插秧机期望前轮转角，转向控制系统将期望前轮转角转换为实际前轮转角，通过控制电动方向盘转动相应的角度来减小偏差，转角传感器实时反馈前轮转角信息给导航定位系统，形成闭环控制实时修正前轮转角，从而实现了自动导航插秧机的路径跟踪。</p><p>图1. 路径跟踪控制原理</p></sec><sec id="s5"><title>3. 运动学模型</title><p>井关公司生产的2Z-6B(PZ60-HGR)型插秧机为前轮转向、四轮驱动。由于插秧机在田间工作时，运行速度较低，动力学对控制系统产生的影响较小，而且建立动力学模型难度较大，所以只对插秧机建立运动学模型即可满足要求。</p><p>在运动学分析中，将插秧机视为刚体，假设插秧机运行在平坦地面，且不考虑插秧机出现侧滑、俯仰等运动情况，可以将插秧机简化为二轮车运动模型 [<xref ref-type="bibr" rid="hanspub.34754-ref13">13</xref>]。以Y轴为目标路径，Y轴的正方向为目标路径的前进方向，X轴垂直于Y轴方向，取X轴向右为正方向，建立如图2所示的运动学模型。</p><p>图2. 插秧机运动学模型</p><p>该模型以插秧机后轴中心为参考点，对插秧机进行运动学分析可得：</p><p>{ x ′ ( t ) = v sin θ y ′ ( t ) = v cos θ θ ′ ( t ) = v tan δ L (1)</p><p>式中，L：前后轮轴距；</p><p>v：插秧机速度；</p><p>θ ：航向角，取逆时针方向为正；</p><p>δ ：前轮转角，取逆时针方向为正。</p></sec><sec id="s6"><title>4. 模糊PID控制系统</title><sec id="s6_1"><title>4.1. PID控制</title><p>PID控制采用比例、积分和微分的方式对系统进行控制。PID控制分为模拟PID控制和数字PID控制两种方式，本研究用离散化的方法对输入信号进行处理，采用数字PID控制方式来实现对系统的控制 [<xref ref-type="bibr" rid="hanspub.34754-ref14">14</xref>]。传统PID控制表示方法：</p><p>u ( t ) = K p [ e ( t ) + 1 T i ∫ 0 t e ( t ) d t + T d d e ( t ) d t ] (2)</p><p>式中， u ( t ) ：输出信号；</p><p>K p ：比例系数；</p><p>e ( t ) ：输入信号；</p><p>T i ：积分时间；</p><p>T d ：微分时间。</p><p>增量式PID控制的输出是控制量的增量，输出只与前两次的误差有关，不会造成误差累积问题，控制系统具有较好的稳定性，适用于带积分项的控制系统，故本文采用增量式PID控制。增量式PID控制表示方法：</p><p>Δ u ( k ) = k p ( e ( k ) − e ( k − 1 ) ) + k i e ( k ) + k d ( e ( k ) − 2 e ( k − 1 ) + e ( k − 2 ) ) (3)</p><p>式中， Δ u ( k ) ：控制输出增量；</p><p>e ( k ) ：输入偏差；</p><p>e ( k − 1 ) ：上一次输入偏差；</p><p>e ( k − 2 ) ：上两次输入偏差。</p></sec><sec id="s6_2"><title>4.2. PID控制的参数整定</title><p>由于插秧机在田间工作环境恶劣，精确的数学模型建立难度较大，故采用临界比例度法对系统进行参数整定 [<xref ref-type="bibr" rid="hanspub.34754-ref15">15</xref>]。</p><p>首先，把PID控制设置为K<sub>p</sub>值较小的纯比例调节，然后将K<sub>p</sub>值逐渐增大，取系统出现振荡时的K<sub>p</sub>值为K<sub>pcnt</sub>，取振荡的两个波峰之间的时间为T<sub>n</sub>，根据表1所示规则计算PID控制K<sub>p</sub>、K<sub>i</sub>和K<sub>d</sub>三个参数的值。</p><table-wrap id="table1" ><label><xref ref-type="table" rid="table1">Table 1</xref></label><caption><title> Adjustment rules of critical scale method parameter</title></caption><table><tbody><thead><tr><th align="center" valign="middle" >PID控制</th><th align="center" valign="middle" >K<sub>p</sub></th><th align="center" valign="middle" >T<sub>i</sub></th><th align="center" valign="middle" >T<sub>d</sub></th></tr></thead><tr><td align="center" valign="middle" >P</td><td align="center" valign="middle" >0.5 &#215; K<sub>pcn</sub><sub>t</sub></td><td align="center" valign="middle" >−</td><td align="center" valign="middle" >−</td></tr><tr><td align="center" valign="middle" >PI</td><td align="center" valign="middle" >0.45 &#215; K<sub>pcnt</sub></td><td align="center" valign="middle" >0.85 &#215; T<sub>n</sub></td><td align="center" valign="middle" >−</td></tr><tr><td align="center" valign="middle" >PID</td><td align="center" valign="middle" >0.6 &#215; K<sub>pcnt</sub></td><td align="center" valign="middle" >0.5 &#215; T<sub>n</sub></td><td align="center" valign="middle" >0.12 &#215; T<sub>n</sub></td></tr></tbody></table></table-wrap><p>表1. 临界比例度法参数调整规则</p></sec><sec id="s6_3"><title>4.3. 模糊PID控制设计</title><p>自动导航插秧机路径跟踪控制系统是一种典型的非线性系统。为了解决传统PID控制精度不足的问题，在PID控制的基础上加入一个模糊调节环节，从而形成模糊PID控制，实现对PID控制参数的在线调整。模糊PID控制具有精度高、适应性强的优点。</p><p>模糊控制的本质是用所制定的模糊规则来实现对系统的控制。首先需要对输入的信号进行模糊化处理。然后，根据设定的模糊推理规则得到模糊输出信号。最后，对模糊输出信号进行清晰化处理得到确定的控制量，并将确定的控制量输出到执行机构，从而实现对系统的控制。本文选择两输入、三输出的模糊逻辑控制结构，其中，模糊输入为插秧机横向偏差e和偏差变化率ec，模糊输出为∆K<sub>p</sub>、∆K<sub>i</sub>和∆K<sub>d</sub>，对PID控制参数进行实时调整，从而实现自动导航插秧机的路径跟踪控制。调整规则为：</p><p>K p = K p 1 + Δ K p (4)</p><p>K i = K i 1 + Δ K i (5)</p><p>K d = K d 1 + Δ K d (6)</p><p>式中，K<sub>p</sub><sub>1</sub>、K<sub>i</sub><sub>1</sub>和K<sub>d</sub><sub>1</sub>为PID控制的初始参数值，K<sub>p</sub>、K<sub>i</sub>和K<sub>d</sub>为调整后的参数值。</p><p>模糊PID系统结构如图3所示，</p><p>图3. 模糊PID系统结构图</p><p>1) 输入、输出变量的模糊化</p><p>模糊子集的输入输出变量一般采用“大、中、小”的方式描述。大多数控制系统选择7个语言变量，也可依据不同的系统控制要求来增加或减少变量。语言变量的多少对控制效果有一定的影响，若变量选择过少，控制系统的精度得不到保障，达不到理想的控制效果；若变量选择过多，变量划分的精确度得到提高，但是会增大系统的计算量和设计难度。</p><p>本文选用7个语言变量来对插秧机路径跟踪控制系统进行描述，系统论域设计如下：</p><p>a) 横向偏差e</p><p>基本论域为：[−12，12]；</p><p>量化论域为：{−6，−5，−4，−3，−2，−1，0，1，2，3，4，5，6}；</p><p>量化因子：12/6 = 2。</p><p>b) 偏差变化率ec</p><p>基本论域为：[−6，6]；</p><p>量化论域为：{−6，−5，−4，−3，−2，−1，0，1，2，3，4，5，6}；</p><p>量化因子：6/6 = 1。</p><p>c) 比例系数∆K<sub>p</sub></p><p>基本论域为：[−8，8]；</p><p>量化论域为：{−3，−2，−1，0，1，2，3}；</p><p>量化因子：3/8=0.375。</p><p>d) 积分系数∆K<sub>i</sub></p><p>基本论域为：[−6，6]；</p><p>量化论域为：{−3，−2，−1，0，1，2，3}；</p><p>量化因子：3/6=0.5。</p><p>e) 微分系数∆K<sub>d</sub></p><p>基本论域为：[−6，6]；</p><p>量化论域为：{−3，−2，−1，0，1，2，3}；</p><p>量化因子：3/6 = 0.5。</p><p>2) 定义输入和输出隶属度函数</p><p>本研究对模糊控制的输入和输出变量均采用三角形隶属度函数，输入和输出变量对应的隶属度函数如图4和图5所示。</p><p>图4. 输入变量e、ec隶属度函数</p><p>图5. 输出变量∆K<sub>p</sub>、∆K<sub>i</sub>、∆K<sub>d</sub>的隶属度函数</p><p>3) 建立模糊控制规则</p><p>模糊PID控制的主要目的是确定K<sub>p</sub>、K<sub>i</sub>、K<sub>d</sub>三个参数的相互影响，以及三个参数与横向偏差e和偏差变化率ec之间的模糊关系。模糊PID控制器的输入为插秧机横向偏差e和偏差变化率ec，模糊控制的输出为∆K<sub>p</sub>、∆K<sub>i</sub>、∆K<sub>d</sub>，输出的∆K<sub>p</sub>、∆K<sub>i</sub>和∆K<sub>d</sub>对PID控制部分的K<sub>p</sub>、K<sub>i</sub>和K<sub>d</sub>三个参数进行实时调整，以保证插秧机路径跟踪控制系统具有较好的稳定性。</p><p>模糊控制规则的设计原则：</p><p>a) 横向偏差e和偏差变化率ec的正负表示方向，当横向偏差e的绝对值较大时，系统应快速减小横向偏差e，为提高系统的反应速率，应设置较大的K<sub>p</sub>值；提高系统的反应速率会产生微分溢出，为防止微分溢出，应设置较小的K<sub>d</sub>值；同时为防止出现积分饱和现象，应设置K<sub>i</sub>的值为0。</p><p>b) 当横向偏差e的绝对值较小时，为保证系统稳定性良好，K<sub>p</sub>值和K<sub>i</sub>值应取较大的值；同时为增强路径跟踪控制系统的抗干扰能力，应该选取适当的K<sub>d</sub>值，K<sub>d</sub>值的具体调整原则：当偏差变化率ec的绝对值较小时，K<sub>d</sub>值应取较大值，当偏差变化率ec的绝对值较大时，K<sub>d</sub>值应取较小值。</p><p>根据上述模糊控制规则，设计系统模糊控制规则如表2~4所示。</p><table-wrap id="table2" ><label><xref ref-type="table" rid="table2">Table 2</xref></label><caption><title> Kp fuzzy control rule</title></caption><table><tbody><thead><tr><th align="center" valign="middle"  colspan="2"   rowspan="2"  >K<sub>p</sub></th><th align="center" valign="middle"  colspan="8"  >ec</th></tr></thead><tr><td align="center" valign="middle" >NB</td><td align="center" valign="middle" >NM</td><td align="center" valign="middle" >NS</td><td align="center" valign="middle" >ZO</td><td align="center" valign="middle" >PS</td><td align="center" valign="middle" >PM</td><td align="center" valign="middle" >PB</td><td align="center" valign="middle" ></td></tr><tr><td align="center" valign="middle"  rowspan="7"  >e</td><td align="center" valign="middle" >NB</td><td align="center" valign="middle" >PB</td><td align="center" valign="middle" >PB</td><td align="center" valign="middle" >PM</td><td align="center" valign="middle" >PM</td><td align="center" valign="middle" >PS</td><td align="center" valign="middle" >ZO</td><td align="center" valign="middle" >ZO</td><td align="center" valign="middle" ></td></tr><tr><td align="center" valign="middle" >NM</td><td align="center" valign="middle" >PB</td><td align="center" valign="middle" >PB</td><td align="center" valign="middle" >PM</td><td align="center" valign="middle" >PS</td><td align="center" valign="middle" >PS</td><td align="center" valign="middle" >ZO</td><td align="center" valign="middle" >NS</td><td align="center" valign="middle" ></td></tr><tr><td align="center" valign="middle" >NS</td><td align="center" valign="middle" >PM</td><td align="center" valign="middle" >PM</td><td align="center" valign="middle" >PM</td><td align="center" valign="middle" >PS</td><td align="center" valign="middle" >ZO</td><td align="center" valign="middle" >NS</td><td align="center" valign="middle" >NS</td><td align="center" valign="middle" ></td></tr><tr><td align="center" valign="middle" >ZO</td><td align="center" valign="middle" >PM</td><td align="center" valign="middle" >PM</td><td align="center" valign="middle" >PS</td><td align="center" valign="middle" >ZO</td><td align="center" valign="middle" >NS</td><td align="center" valign="middle" >NM</td><td align="center" valign="middle" >NM</td><td align="center" valign="middle" ></td></tr><tr><td align="center" valign="middle" >PS</td><td align="center" valign="middle" >PS</td><td align="center" valign="middle" >PS</td><td align="center" valign="middle" >ZO</td><td align="center" valign="middle" >NS</td><td align="center" valign="middle" >NS</td><td align="center" valign="middle" >NM</td><td align="center" valign="middle" >NM</td><td align="center" valign="middle" ></td></tr><tr><td align="center" valign="middle" >PM</td><td align="center" valign="middle" >PS</td><td align="center" valign="middle" >ZO</td><td align="center" valign="middle" >NS</td><td align="center" valign="middle" >NM</td><td align="center" valign="middle" >NM</td><td align="center" valign="middle" >NM</td><td align="center" valign="middle" >NB</td><td align="center" valign="middle" ></td></tr><tr><td align="center" valign="middle" >PB</td><td align="center" valign="middle" >ZO</td><td align="center" valign="middle" >PS</td><td align="center" valign="middle" >NM</td><td align="center" valign="middle" >NM</td><td align="center" valign="middle" >NM</td><td align="center" valign="middle" >NB</td><td align="center" valign="middle" >NB</td><td align="center" valign="middle" ></td></tr></tbody></table></table-wrap><p>表2. K<sub>p</sub>模糊控制规则表</p><table-wrap id="table3" ><label><xref ref-type="table" rid="table3">Table 3</xref></label><caption><title> Ki fuzzy control rule</title></caption><table><tbody><thead><tr><th align="center" valign="middle"  colspan="2"   rowspan="2"  >K<sub>i</sub></th><th align="center" valign="middle"  colspan="7"  >ec</th></tr></thead><tr><td align="center" valign="middle" >NB</td><td align="center" valign="middle" >NM</td><td align="center" valign="middle" >NS</td><td align="center" valign="middle" >ZO</td><td align="center" valign="middle" >PS</td><td align="center" valign="middle" >PM</td><td align="center" valign="middle" >PB</td></tr><tr><td align="center" valign="middle"  rowspan="7"  >e</td><td align="center" valign="middle" >NB</td><td align="center" valign="middle" >NB</td><td align="center" valign="middle" >NB</td><td align="center" valign="middle" >NM</td><td align="center" valign="middle" >NM</td><td align="center" valign="middle" >NS</td><td align="center" valign="middle" >ZO</td><td align="center" valign="middle" >ZO</td></tr><tr><td align="center" valign="middle" >NM</td><td align="center" valign="middle" >NB</td><td align="center" valign="middle" >NB</td><td align="center" valign="middle" >NM</td><td align="center" valign="middle" >NS</td><td align="center" valign="middle" >NS</td><td align="center" valign="middle" >ZO</td><td align="center" valign="middle" >ZO</td></tr><tr><td align="center" valign="middle" >NS</td><td align="center" valign="middle" >NB</td><td align="center" valign="middle" >NM</td><td align="center" valign="middle" >NS</td><td align="center" valign="middle" >NS</td><td align="center" valign="middle" >ZO</td><td align="center" valign="middle" >PS</td><td align="center" valign="middle" >PS</td></tr><tr><td align="center" valign="middle" >ZO</td><td align="center" valign="middle" >NM</td><td align="center" valign="middle" >NM</td><td align="center" valign="middle" >ZO</td><td align="center" valign="middle" >ZO</td><td align="center" valign="middle" >ZO</td><td align="center" valign="middle" >PM</td><td align="center" valign="middle" >PM</td></tr><tr><td align="center" valign="middle" >PS</td><td align="center" valign="middle" >NM</td><td align="center" valign="middle" >ZO</td><td align="center" valign="middle" >ZO</td><td align="center" valign="middle" >PS</td><td align="center" valign="middle" >PS</td><td align="center" valign="middle" >PM</td><td align="center" valign="middle" >PM</td></tr><tr><td align="center" valign="middle" >PM</td><td align="center" valign="middle" >ZO</td><td align="center" valign="middle" >ZO</td><td align="center" valign="middle" >PS</td><td align="center" valign="middle" >PS</td><td align="center" valign="middle" >PM</td><td align="center" valign="middle" >PB</td><td align="center" valign="middle" >PB</td></tr><tr><td align="center" valign="middle" >PB</td><td align="center" valign="middle" >ZO</td><td align="center" valign="middle" >PS</td><td align="center" valign="middle" >PS</td><td align="center" valign="middle" >PM</td><td align="center" valign="middle" >PM</td><td align="center" valign="middle" >PB</td><td align="center" valign="middle" >PB</td></tr></tbody></table></table-wrap><p>表3. K<sub>i</sub>模糊控制规则表</p><table-wrap id="table4" ><label><xref ref-type="table" rid="table4">Table 4</xref></label><caption><title> Kd fuzzy control rule</title></caption><table><tbody><thead><tr><th align="center" valign="middle"  colspan="2"   rowspan="2"  >K<sub>d</sub></th><th align="center" valign="middle"  colspan="8"  >ec</th></tr></thead><tr><td align="center" valign="middle" >NB</td><td align="center" valign="middle" >NM</td><td align="center" valign="middle" >NS</td><td align="center" valign="middle" >ZO</td><td align="center" valign="middle" >PS</td><td align="center" valign="middle" >PM</td><td align="center" valign="middle" >PB</td><td align="center" valign="middle" ></td></tr><tr><td align="center" valign="middle"  rowspan="7"  >e</td><td align="center" valign="middle" >NB</td><td align="center" valign="middle" >PS</td><td align="center" valign="middle" >NM</td><td align="center" valign="middle" >NB</td><td align="center" valign="middle" >NB</td><td align="center" valign="middle" >NB</td><td align="center" valign="middle" >NM</td><td align="center" valign="middle" >PS</td><td align="center" valign="middle" ></td></tr><tr><td align="center" valign="middle" >NM</td><td align="center" valign="middle" >PS</td><td align="center" valign="middle" >NS</td><td align="center" valign="middle" >NB</td><td align="center" valign="middle" >NM</td><td align="center" valign="middle" >NM</td><td align="center" valign="middle" >NS</td><td align="center" valign="middle" >PS</td><td align="center" valign="middle" ></td></tr><tr><td align="center" valign="middle" >NS</td><td align="center" valign="middle" >ZO</td><td align="center" valign="middle" >NS</td><td align="center" valign="middle" >NM</td><td align="center" valign="middle" >NM</td><td align="center" valign="middle" >NM</td><td align="center" valign="middle" >NS</td><td align="center" valign="middle" >ZO</td><td align="center" valign="middle" ></td></tr><tr><td align="center" valign="middle" >ZO</td><td align="center" valign="middle" >ZO</td><td align="center" valign="middle" >NS</td><td align="center" valign="middle" >NS</td><td align="center" valign="middle" >NS</td><td align="center" valign="middle" >NS</td><td align="center" valign="middle" >NS</td><td align="center" valign="middle" >ZO</td><td align="center" valign="middle" ></td></tr><tr><td align="center" valign="middle" >PS</td><td align="center" valign="middle" >ZO</td><td align="center" valign="middle" >ZO</td><td align="center" valign="middle" >ZO</td><td align="center" valign="middle" >ZO</td><td align="center" valign="middle" >ZO</td><td align="center" valign="middle" >ZO</td><td align="center" valign="middle" >ZO</td><td align="center" valign="middle" ></td></tr><tr><td align="center" valign="middle" >PM</td><td align="center" valign="middle" >PM</td><td align="center" valign="middle" >PS</td><td align="center" valign="middle" >PS</td><td align="center" valign="middle" >PS</td><td align="center" valign="middle" >PS</td><td align="center" valign="middle" >PS</td><td align="center" valign="middle" >PM</td><td align="center" valign="middle" ></td></tr><tr><td align="center" valign="middle" >PB</td><td align="center" valign="middle" >PB</td><td align="center" valign="middle" >PM</td><td align="center" valign="middle" >PM</td><td align="center" valign="middle" >PM</td><td align="center" valign="middle" >PM</td><td align="center" valign="middle" >PM</td><td align="center" valign="middle" >PB</td><td align="center" valign="middle" ></td></tr></tbody></table></table-wrap><p>表4. K<sub>d</sub>模糊控制规则表</p><p>模糊控制部分的输出变量∆K<sub>p</sub>、∆K<sub>i</sub>、∆K<sub>d</sub>输出曲面分别如图6~8所示。图中X轴代表横向偏差e，Y轴代表偏差变化率ec，Z轴分别代表∆K<sub>p</sub>、∆K<sub>i</sub>、∆K<sub>d</sub>三个输出变量。</p><p>图6. ∆K<sub>p</sub>输出曲面</p><p>图7. ∆K<sub>i</sub>输出曲面</p><p>图8. ∆K<sub>d</sub>输出曲面</p><p>4) 模糊推理和反模糊化</p><p>模糊推理的过程在模糊逻辑工具箱中进行，设置模糊逻辑推理类型为Mamdani型，模糊逻辑推理的各参数设置如表5所示。</p><table-wrap id="table5" ><label><xref ref-type="table" rid="table5">Table 5</xref></label><caption><title> Fuzzy logic reasoning parameter settin</title></caption><table><tbody><thead><tr><th align="center" valign="middle" >参数</th><th align="center" valign="middle" >设置值</th></tr></thead><tr><td align="center" valign="middle" >And method</td><td align="center" valign="middle" >min</td></tr><tr><td align="center" valign="middle" >Or method</td><td align="center" valign="middle" >max</td></tr><tr><td align="center" valign="middle" >Implication</td><td align="center" valign="middle" >min</td></tr><tr><td align="center" valign="middle" >Aggregation</td><td align="center" valign="middle" >max</td></tr><tr><td align="center" valign="middle" >Defuzzification</td><td align="center" valign="middle" >centroid</td></tr></tbody></table></table-wrap><p>表5. 模糊逻辑推理参数设置</p><p>经过模糊推理得到的∆K<sub>p</sub>、∆K<sub>i</sub>、∆K<sub>d</sub>是模糊集合，不能直接用于控制对象，需要把输出量的模糊集合转化为确定的控制量，即对模糊集合进行清晰化处理。目前主要有三种常用的清晰化方法：最大隶属度法、重心法和加权平均法，其中最大隶属度法适用于计算简便控制精度要求不高的情况，重心法的输出较为平滑，加权平均法在工业应用中较为广泛。本文采用重心法对模糊集合进行清晰化处理，具体方法：首先，找到输出隶属度函数曲线与坐标轴的横轴所围成面积的重心。然后，将这个重心作为输出变量的代表点，对输出范围内几个连续点的重心进行计算即可。</p><p>重心法即</p><p>u = ∫ u ∗ μ N ( u ) d u ∫ μ N ( U ) d u (7)</p><p>当模糊控制的输出变量为离散集时，则有</p><p>u = ∑ u i ∗ μ N ( u i ) ∑ μ N ( u i ) (8)</p></sec></sec><sec id="s7"><title>5. 系统仿真与试验验证</title><sec id="s7_1"><title>5.1. 仿真分析</title><p>使用Simulink分别建立基于PID算法和模糊PID算法的自动导航插秧机路径跟踪控制系统模型，为对比两种控制方法的性能，对系统进行仿真。</p><p>在两个控制系统中分别输入单位阶跃信号进行仿真，系统的响应曲线如图9所示，图中蓝色曲线为PID控制下系统的响应曲线；绿色曲线为模糊PID控制下系统的响应曲线。</p><p>图9. 控制系统仿真响应曲线</p><p>从图中可以看出，在PID控制方法下，响应曲线上升时间为1.9 s，最大超调量为10%，调节时间为4.7 s；在模糊PID控制方法下，响应曲线上升时间为1.2 s，最大超调量为5%，调节时间为2.1 s。相比于PID控制，模糊PID控制方法下系统的超调量减小，响应时间加快，系统的动态性能有所提高。</p></sec><sec id="s7_2"><title>5.2. 动态试验验证</title><p>为验证所述模糊PID控制方法的路径跟踪性能，将PID控制程序和模糊PID控制程序植入单片机中，分别用PID和模糊PID控制小车底盘进行路径跟踪。小车底盘主要参数如表6所示。</p><table-wrap id="table6" ><label><xref ref-type="table" rid="table6">Table 6</xref></label><caption><title> Main parameters of trolley chassi</title></caption><table><tbody><thead><tr><th align="center" valign="middle" >小车底盘</th><th align="center" valign="middle" >主要参数</th></tr></thead><tr><td align="center" valign="middle" >底板材质</td><td align="center" valign="middle" >铝合金</td></tr><tr><td align="center" valign="middle" >长 &#215; 宽(mm)</td><td align="center" valign="middle" >210 &#215; 185</td></tr><tr><td align="center" valign="middle" >控制板</td><td align="center" valign="middle" >STM32F405RGT6</td></tr><tr><td align="center" valign="middle" >舵机</td><td align="center" valign="middle" >DS3119</td></tr><tr><td align="center" valign="middle" >编码器</td><td align="center" valign="middle" >AB相增量式霍尔编码器</td></tr><tr><td align="center" valign="middle" >支持巡线方式</td><td align="center" valign="middle" >线性CCD</td></tr></tbody></table></table-wrap><p>表6. 小车底盘主要参数表</p><p>设置小车底盘在低速(0.35 m/s)和高速(0.85 m/s)两种状态下行驶。PID控制方法下路径跟踪误差结果统计如图10所示，路径跟踪最大误差出现在转弯处。</p><p>从图10中可以看出，当小车底盘分别以0.35和0.85 m/s速度行驶时，最大路径跟踪误差分别为3.8和6.5 cm，平均路径跟踪误差分别为2.47和3.67 cm。</p><p>图10. PID控制方法下误差统计</p><p>模糊PID控制方法下路径跟踪误差结果统计如图11所示，路径跟踪最大误差出现在转弯处。</p><p>图11. 模糊PID控制方法下误差统计</p><p>从图11中可以看出，当小车底盘分别以0.35和0.85 m/s速度行驶时，最大路径跟踪误差分别为2.1和4.8 cm，平均路径跟踪误差分别为1.57和2.7 cm。动态试验结果表明在高速和低速两种行驶状态下，模糊PID控制方法的最大路径误差与平均路径误差均小于PID控制方法下的路径跟踪误差。验证了所提出的模糊PID控制方法较传统PID控制方法具有更好的控制性能。</p></sec></sec><sec id="s8"><title>6. 结论</title><p>1) 提出一种基于模糊PID控制算法的自动导航插秧机路径跟踪控制方法。该模糊PID控制相比于传统PID控制算法可减小调整超调量，减少响应时间，可提高系统动态性能。</p><p>2) 通过试验验证表明，在模糊PID控制方法下，当小车底盘以0.35和0.85 m/s的速度行驶时，最大路径跟踪误差为2.1和4.8 cm，平均路径跟踪误差为1.57和2.7 cm。验证了模糊PID控制方法性能更优，且对低速和高速都具有适应性。</p></sec><sec id="s9"><title>致谢</title><p>本论文的顺利完成，离不开各位老师、同学和朋友的关心和帮助。在此感谢刘双喜老师、王玉亮老师的支持；感谢实验室李玉风，宋悦，权泽堃等同学的帮助。</p></sec><sec id="s10"><title>基金项目</title><p>本研究得到山东现代农业产业技术体系水稻创新团队资助项目；“双一流”奖补资金项目(SYL2017XTTD14)；山东省重点研发计划(2017GNC12109)支持。</p></sec><sec id="s11"><title>文章引用</title><p>王金星,石绍军,刘双喜,王玉亮,李玉风,宋悦,权泽堃. 基于模糊PID的路径跟踪控制系统Path Tracking Control System Based on Fuzzy PID[J]. 计算机科学与应用, 2020, 10(03): 529-540. https://doi.org/10.12677/CSA.2020.103055</p></sec><sec id="s12"><title>参考文献</title></sec></body><back><ref-list><title>References</title><ref id="hanspub.34754-ref1"><label>1</label><mixed-citation publication-type="other" xlink:type="simple">谭晨佼, 李轶林, 王东飞, 毛文菊, 杨福增. 农业机械自动导航技术研究进展[J]. 农机化研究, 2020, 42(5): 7-14+32.</mixed-citation></ref><ref id="hanspub.34754-ref2"><label>2</label><mixed-citation publication-type="other" xlink:type="simple">迟德霞, 任文涛, 由佳翰, 王洋, 李萍. 水稻插秧机导航控制器设计与路径追踪仿真研究[J]. 沈阳农业大学学报, 2016, 47(3): 363-367.</mixed-citation></ref><ref id="hanspub.34754-ref3"><label>3</label><mixed-citation publication-type="other" xlink:type="simple">Wallace, R., Stentz, A., Thorpe, C.E., et al. (1985) First Results in Robot Road-Following. Proceedings of 9th IJCAI, Los Angeles, 18-23 August 1985, 1089-1095.</mixed-citation></ref><ref id="hanspub.34754-ref4"><label>4</label><mixed-citation publication-type="other" xlink:type="simple">Amidi, O. and Thorpe, C.E. (1991) Integrated Mobile Robot Control. In: Fibers 91, International Society for Optics and Photonics, Boston, 504-523. &lt;br&gt;https://doi.org/10.1117/12.25494</mixed-citation></ref><ref id="hanspub.34754-ref5"><label>5</label><mixed-citation publication-type="other" xlink:type="simple">黄沛琛, 罗锡文, 张智刚. 改进纯追踪模型的农业机械地头转向控制方法[J]. 计算机工程与应用, 2010, 46(21): 216-219.</mixed-citation></ref><ref id="hanspub.34754-ref6"><label>6</label><mixed-citation publication-type="other" xlink:type="simple">王辉, 王桂民, 罗锡文, 张智刚, 高阳, 何杰, 岳斌斌. 基于预瞄追踪模型的农机导航路径跟踪控制方法[J]. 农业工程学报, 2019, 35(4): 11-19.</mixed-citation></ref><ref id="hanspub.34754-ref7"><label>7</label><mixed-citation publication-type="other" xlink:type="simple">刘正铎, 张万枝, 吕钊钦, 郑文秀, 穆桂脂, 程向勋. 扰动下农用运输车辆路径跟踪控制器设计与试验[J]. 农业机械学报, 2018, 49(12): 378-386.</mixed-citation></ref><ref id="hanspub.34754-ref8"><label>8</label><mixed-citation publication-type="other" xlink:type="simple">邹凯. 基于增量线性模型预测控制的无人车轨迹跟踪方法[C]//中国汽车工程学会. 2019中国汽车工程学会年会论文集(1), 北京: 中国汽车工程学会, 2019: 115.</mixed-citation></ref><ref id="hanspub.34754-ref9"><label>9</label><mixed-citation publication-type="other" xlink:type="simple">周建军, 张漫, 汪懋华, 等. 基于模糊控制的农用车辆路线跟踪[J]. 农业机械学报, 2009, 40(4): 151-156.</mixed-citation></ref><ref id="hanspub.34754-ref10"><label>10</label><mixed-citation publication-type="other" xlink:type="simple">Richa Sharma, K.K., Deepak, P.G. and Deepak, J. (2020) An Optimal Interval Type-2 Fuzzy Logic Control Based Closed-Loop Drug Ad-ministration to Regulate the Mean Arterial Blood Pressure. Computer Methods and Programs in Biomedicine, 185, Article ID: 105167. &lt;br&gt;https://doi.org/10.1016/j.cmpb.2019.105167</mixed-citation></ref><ref id="hanspub.34754-ref11"><label>11</label><mixed-citation publication-type="other" xlink:type="simple">罗锡文, 张智刚, 赵祚喜, 陈斌, 胡炼, 吴晓鹏. 东方红X-804拖拉机的DGPS自动导航控制系统[J]. 农业工程学报, 2009, 25(11): 139-145.</mixed-citation></ref><ref id="hanspub.34754-ref12"><label>12</label><mixed-citation publication-type="other" xlink:type="simple">Bogler, A., Kastl, A., Spinnler, M., Sattelmayer, T., Beer, A. and Bar-Zeev, E. (2020) Particle Counting and Tracking: Zooming on Deposition and Flow Paths during Initial Stages of Cake Formation in Forward Osmosis with Spacers. Journal of Membrane Science, 597, Article ID: 117619. &lt;br&gt;https://doi.org/10.1016/j.memsci.2019.117619</mixed-citation></ref><ref id="hanspub.34754-ref13"><label>13</label><mixed-citation publication-type="other" xlink:type="simple">张曾科. 模糊数学在自动化技术中的应用[M]. 北京: 清华大学出版社, 1997.</mixed-citation></ref><ref id="hanspub.34754-ref14"><label>14</label><mixed-citation publication-type="other" xlink:type="simple">童后权. 直流无刷电机中数字式PID控制算法的应用分析[J]. 数字技术与应用, 2014(9): 123.</mixed-citation></ref><ref id="hanspub.34754-ref15"><label>15</label><mixed-citation publication-type="other" xlink:type="simple">Bouakkaz, M.S., Boukadoum, A., Boudebbouz, O., Fergani, N., Boutasseta, N., Attoui, I., Bouraiou, A. and Necaibia, A. (2020) Dynamic Performance Evaluation and Improvement of PV Energy Generation Systems Using Moth Flame Optimization with Combined Fractional Order PID and Sliding Mode Controller. Solar Energy, 199, 411-424.  
&lt;br&gt;https://doi.org/10.1016/j.solener.2020.02.055</mixed-citation></ref></ref-list></back></article>