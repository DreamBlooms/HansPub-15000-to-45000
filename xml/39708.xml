<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE article  PUBLIC "-//NLM//DTD Journal Publishing DTD v3.0 20080202//EN" "http://dtd.nlm.nih.gov/publishing/3.0/journalpublishing3.dtd"><article xmlns:mml="http://www.w3.org/1998/Math/MathML" xmlns:xlink="http://www.w3.org/1999/xlink" dtd-version="3.0" xml:lang="en" article-type="research article"><front><journal-meta><journal-id journal-id-type="publisher-id">HJDM</journal-id><journal-title-group><journal-title>Hans Journal of Data Mining</journal-title></journal-title-group><issn pub-type="epub">2163-145X</issn><publisher><publisher-name>Scientific Research Publishing</publisher-name></publisher></journal-meta><article-meta><article-id pub-id-type="doi">10.12677/HJDM.2021.111001</article-id><article-id pub-id-type="publisher-id">HJDM-39708</article-id><article-categories><subj-group subj-group-type="heading"><subject>HJDM20210100000_11424105.pdf</subject></subj-group><subj-group subj-group-type="Discipline-v2"><subject>信息通讯</subject></subj-group></article-categories><title-group><article-title>
 
 
  基于体检大数据的健康指数建模
  Health Score Model Based on Big Data of Physical Examination
 
</article-title></title-group><contrib-group><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>谢</surname><given-names>昌锟</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>赵</surname><given-names>明琪</given-names></name><xref ref-type="aff" rid="aff3"><sup>3</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>林</surname><given-names>世明</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib></contrib-group><aff id="aff3"><addr-line>厦门大学数学科学学院，福建 厦门</addr-line></aff><aff id="aff2"><addr-line>厦门大学信息学院(国家示范性软件学院)，福建 厦门</addr-line></aff><aff id="aff1"><addr-line>null</addr-line></aff><pub-date pub-type="epub"><day>12</day><month>01</month><year>2021</year></pub-date><volume>11</volume><issue>01</issue><fpage>1</fpage><lpage>10</lpage><permissions><copyright-statement>&#169; Copyright  2014 by authors and Scientific Research Publishing Inc. </copyright-statement><copyright-year>2014</copyright-year><license><license-p>This work is licensed under the Creative Commons Attribution International License (CC BY). http://creativecommons.org/licenses/by/4.0/</license-p></license></permissions><abstract><p>
 
 
  近年来，随着健康医疗大数据平台的快速发展，越来越多的体检数据整合到大数据平台上。如何挖掘并利用健康医疗海量数据提高医疗服务质量，提升医患沟通水平是一个全新的挑战。文中应用机器学习算法对45,374个体检用户，共3,529,829条体检数据进行分析数据的探索性分析和特征工程。在个人信用风险评分模型的基础上，将预测模型由梯度集成决策树改进为LASSO回归模型，增加评分卡的可解释性，同时结合体检的应用场景和输入数据，建立体检评分模型。实验结果表明在体检大数据集上，健康指数分数基本上服从正态分布，符合线性回归模型的先验假设。该评分模型同时具有稳健性和区分度的特点，可综合各项体检指标，较为客观地描述用户身体健康状况水平，降低体检用户同医生的沟通成本，督促用户更加关注身体整体健康状况水平。
   In recent years, with the rapid development of health care big data platform, more and more phys-ical examination data are integrated into the big data platform. A new challenge is how to improve the quality of medical services by using massive medical data. In this paper, we use machine learn-ing algorithm to visually analyze 3,529,829 physical examination data of 45,374 physical examina-tion users. On the basis of personal credit risk scoring model, the prediction model is improved from gradient integrated decision tree to lasso regression model, which increases the interpretabil-ity of scorecard. At the same time, combined with the application scenarios and input data of physi-cal examination, we established the health score model. The health index score basically obeys normal distribution, which is consistent with the prior hypothesis of the linear regression model It can integrate various physical examination indicators, objectively describe the health status of us-ers, reduce the communication cost between users and doctors, and urge users to pay more atten-tion to the overall health status.
 
</p></abstract><kwd-group><kwd>机器学习，数据探索，LASSO回归，评分卡，健康指数, Machine Learning</kwd><kwd> Data Exploration</kwd><kwd> Lasso Regression</kwd><kwd> Score Card</kwd><kwd> Health Score</kwd></kwd-group></article-meta></front><body><sec id="s1"><title>摘要</title><p>近年来，随着健康医疗大数据平台的快速发展，越来越多的体检数据整合到大数据平台上。如何挖掘并利用健康医疗海量数据提高医疗服务质量，提升医患沟通水平是一个全新的挑战。文中应用机器学习算法对45,374个体检用户，共3,529,829条体检数据进行分析数据的探索性分析和特征工程。在个人信用风险评分模型的基础上，将预测模型由梯度集成决策树改进为LASSO回归模型，增加评分卡的可解释性，同时结合体检的应用场景和输入数据，建立体检评分模型。实验结果表明在体检大数据集上，健康指数分数基本上服从正态分布，符合线性回归模型的先验假设。该评分模型同时具有稳健性和区分度的特点，可综合各项体检指标，较为客观地描述用户身体健康状况水平，降低体检用户同医生的沟通成本，督促用户更加关注身体整体健康状况水平。</p></sec><sec id="s2"><title>关键词</title><p>机器学习，数据探索，LASSO回归，评分卡，健康指数</p></sec><sec id="s3"><title>Health Score Model Based on Big Data of Physical Examination</title><p>Changkun Xie<sup>1</sup>, Mingqi Zhao<sup>2</sup>, Shiming Lin<sup>1*</sup></p><p><sup>1</sup>School of Informatics Xiamen University (National Demonstrative Software School), Xiamen Fujian</p><p><sup>2</sup>School of Mathematical Sciences Xiamen University, Xiamen Fujian</p><p><img src="//html.hanspub.org/file/1-1760225x5_hanspub.png" /></p><p>Received: Dec. 1<sup>st</sup>, 2020; accepted: Dec. 31<sup>st</sup>, 2020; published: Jan. 12<sup>th</sup>, 2021</p><p><img src="//html.hanspub.org/file/1-1760225x6_hanspub.png" /></p></sec><sec id="s4"><title>ABSTRACT</title><p>In recent years, with the rapid development of health care big data platform, more and more physical examination data are integrated into the big data platform. A new challenge is how to improve the quality of medical services by using massive medical data. In this paper, we use machine learning algorithm to visually analyze 3,529,829 physical examination data of 45,374 physical examination users. On the basis of personal credit risk scoring model, the prediction model is improved from gradient integrated decision tree to lasso regression model, which increases the interpretability of scorecard. At the same time, combined with the application scenarios and input data of physical examination, we established the health score model. The health index score basically obeys normal distribution, which is consistent with the prior hypothesis of the linear regression model It can integrate various physical examination indicators, objectively describe the health status of users, reduce the communication cost between users and doctors, and urge users to pay more attention to the overall health status.</p><p>Keywords:Machine Learning, Data Exploration, Lasso Regression, Score Card, Health Score</p><disp-formula id="hanspub.39708-formula1"><graphic xlink:href="//html.hanspub.org/file/1-1760225x7_hanspub.png"  xlink:type="simple"/></disp-formula><p>Copyright &#169; 2021 by author(s) and Hans Publishers Inc.</p><p>This work is licensed under the Creative Commons Attribution International License (CC BY 4.0).</p><p>http://creativecommons.org/licenses/by/4.0/</p><p><img src="//html.hanspub.org/file/1-1760225x8_hanspub.png" /> <img src="//html.hanspub.org/file/1-1760225x9_hanspub.png" /></p></sec><sec id="s5"><title>1. 引言</title><p>《“健康中国2030”规划纲要》中提出，健康中国建设需要从以“治已病”为中心向以“治未病”为中心转变 [<xref ref-type="bibr" rid="hanspub.39708-ref1">1</xref>]，同时随着体检机构的信息化建设的推进，健康体检向健康管理过渡成为一种必然趋势。2016年，国务院印发《关于促进和规范健康医疗数据应用发展的指导意见》，文件指出健康医疗大数据是国家重要的基础性战略资源，其应用发展将带来健康医疗模式的深刻变化，有利于激发深化医药卫生体制改革的动力与活力，培育健康医疗大数据应用新业态 [<xref ref-type="bibr" rid="hanspub.39708-ref2">2</xref>]。近几年，随着人工智能、云计算、大数据、物联网等相关技术的发展，已初步建立区域级的健康医疗大数据平台，积累了一定的数据量，形成一个巨大的数据“矿产”。体检中心作为较为成熟的医疗机构，一方面数据格式相对统一，另一方面数据量巨大，如能利用机器学习、人工智能等技术手段挖掘数据背后的知识具有较大科研价值和社会效益。目前因数据隐私等问题体检大数据尚未得到有效利用，体检中心的体检信息缺乏智能算法的分析，只是简单堆积罗列的健康档案文档 [<xref ref-type="bibr" rid="hanspub.39708-ref3">3</xref>]，同时导致用户从体检到获得体检结果的时间周期很长。</p><p>通过文献检索发现关于“健康指数”相关研究目前还鲜有开展，本文创新性的提出一种基于体检大数据，并利用机器学习算法建立一个可以持续跟踪群体健康状况的量化指标——健康指数。该健康指数可以及时客观地反应用户的整体健康状况，以此描绘健康画像，结合历史数据预测健康走势。同时该模型通过用户各项体检指标的变量选择和参数估计，初步揭示群体身体状况与各种指标之间的相互联系，抓住影响健康的关键因素，为用户的健康管理提供参考，达到预防慢性非传染性疾病，提高人群生活质量，降低医疗支出的目的 [<xref ref-type="bibr" rid="hanspub.39708-ref4">4</xref>]。</p></sec><sec id="s6"><title>2. 数据和分析方法</title><sec id="s6_1"><title>2.1. 数据来源</title><p>本数据来源某体检医院，包含两个数据表，分别是MEDICAL_DIAG_EXPORT2010和MEDICAL_ INO_EXPORT2010，MEDICAL_INO_EXPORT2010为体检项目记录表，含有数据记录3,529,829条，MEDICAL_DIAG_EXPORT2010为体检诊断结果表，含有数据记录202,203条 [<xref ref-type="bibr" rid="hanspub.39708-ref5">5</xref>]。利用Python的Pandas模块提取并转换为Dataframe格式，数据基本情况如表1、表2所示。</p><table-wrap id="table1" ><label><xref ref-type="table" rid="table1">Table 1</xref></label><caption><title> Results of physical examinatio</title></caption><table><tbody><thead><tr><th align="center" valign="middle" >列名</th><th align="center" valign="middle" >类型</th><th align="center" valign="middle" >非空条目数</th></tr></thead><tr><td align="center" valign="middle" >病人ID</td><td align="center" valign="middle" >Int64</td><td align="center" valign="middle" >202,203</td></tr><tr><td align="center" valign="middle" >体检号</td><td align="center" valign="middle" >Int64</td><td align="center" valign="middle" >202,203</td></tr><tr><td align="center" valign="middle" >性别</td><td align="center" valign="middle" >Object</td><td align="center" valign="middle" >202,203</td></tr><tr><td align="center" valign="middle" >年龄</td><td align="center" valign="middle" >Int64</td><td align="center" valign="middle" >202,203</td></tr><tr><td align="center" valign="middle" >诊断名称</td><td align="center" valign="middle" >Object</td><td align="center" valign="middle" >202,197</td></tr><tr><td align="center" valign="middle" >诊断类型</td><td align="center" valign="middle" >Object</td><td align="center" valign="middle" >202,203</td></tr></tbody></table></table-wrap><p>表1. 体检诊断结果表</p><table-wrap id="table2" ><label><xref ref-type="table" rid="table2">Table 2</xref></label><caption><title> Items of physical examinatio</title></caption><table><tbody><thead><tr><th align="center" valign="middle" >列名</th><th align="center" valign="middle" >类型</th><th align="center" valign="middle" >非空条目数</th></tr></thead><tr><td align="center" valign="middle" >病人ID</td><td align="center" valign="middle" >int64</td><td align="center" valign="middle" >3,529,828</td></tr><tr><td align="center" valign="middle" >性别</td><td align="center" valign="middle" >Object</td><td align="center" valign="middle" >3,529,828</td></tr><tr><td align="center" valign="middle" >年龄</td><td align="center" valign="middle" >Int64</td><td align="center" valign="middle" >3,529,828</td></tr><tr><td align="center" valign="middle" >项目名称</td><td align="center" valign="middle" >Object</td><td align="center" valign="middle" >3,529,828</td></tr><tr><td align="center" valign="middle" >检查结果</td><td align="center" valign="middle" >Object</td><td align="center" valign="middle" >3,469,105</td></tr><tr><td align="center" valign="middle" >参考范围</td><td align="center" valign="middle" >Object</td><td align="center" valign="middle" >2,019,933</td></tr><tr><td align="center" valign="middle" >异常提示</td><td align="center" valign="middle" >Object</td><td align="center" valign="middle" >2,279,112</td></tr><tr><td align="center" valign="middle" >诊断标志</td><td align="center" valign="middle" >Float64</td><td align="center" valign="middle" >587,979</td></tr></tbody></table></table-wrap><p>表2. 体检项目表</p></sec><sec id="s6_2"><title>2.2. 数据预处理</title><sec id="s6_2_1"><title>2.2.1. 缺失值处理</title><p>体检信息数据中45,375例体检者原始数据进行初步筛选，设定阈值剔除缺失值超过体检者2/3的体检指标，剩余102项指标，同时加入“年龄”连续变量数值指标。针对体检诊断结果表格，将“诊断类型”数量为0的患者归为“健康”，用“0”编码；诊断类型数量大于0的为“非健康”，用“1”编码。数据显示，这种归类下健康的病例为25,543例，非健康的病例为19,832例。</p></sec><sec id="s6_2_2"><title>2.2.2. 异常值处理</title><p>体检信息表诊断标志作为分类变量，存在小数的异常情况，取其整数部分。</p><p>连续变量中的年龄数值，如图1所示，存在197岁的异常值，使用中位数替换。同时1岁的体检数据最多，初步推断是婴幼儿体检，而[2, 16]这个年龄区间内数量很少，如果特征没有离散化，可能用户年龄增长一岁就会产生完全不同的输入，会给模型造成很大的干扰。为了让模型具有更好的鲁棒性，应用kmeans聚类方法进行连续变量离散化，分为6个区间：[0, 13.6]，[13.6, 31.1]，[31.1, 41.1]，[41.1, 52]，[41.1, 52]，[52, 65]，[65, 99]，对应年龄_0到年龄_6，同时按照表3对区间独热(one-hot)编码化代替对数值变量的归一化 [<xref ref-type="bibr" rid="hanspub.39708-ref6">6</xref>]。</p><p>图1. 年龄分布图</p><table-wrap id="table3" ><label><xref ref-type="table" rid="table3">Table 3</xref></label><caption><title> Binning and one-hot encoding of age</title></caption><table><tbody><thead><tr><th align="center" valign="middle" >年龄区间</th><th align="center" valign="middle" >独热编码：[年龄_0，年龄_1，年龄_2，年龄3，年龄_4，年龄_5]</th></tr></thead><tr><td align="center" valign="middle" >(0,13.6]</td><td align="center" valign="middle" >[1, 0, 0, 0, 0, 0]</td></tr><tr><td align="center" valign="middle" >(13.6,31.1]</td><td align="center" valign="middle" >[0, 1, 0, 0, 0, 0]</td></tr><tr><td align="center" valign="middle" >(31.1,41.1]</td><td align="center" valign="middle" >[0, 0, 1, 0, 0, 0]</td></tr><tr><td align="center" valign="middle" >(41.1,52]</td><td align="center" valign="middle" >[0, 0, 0, 1, 0, 0]</td></tr><tr><td align="center" valign="middle" >(52,65]</td><td align="center" valign="middle" >[0, 0, 0, 0, 1, 0]</td></tr><tr><td align="center" valign="middle" >(65,99]</td><td align="center" valign="middle" >[0, 0, 0, 0, 0, 1]</td></tr></tbody></table></table-wrap><p>表3. 年龄值分箱以及对应独热编码</p><p>采用独热编码，将一个很大权值管理一个特征，拆分成了许多小的权值管理这个特征多个表示，例如 x 1 表示原本的连续型特征(年龄)，离散化后拆分为3个特征 θ 1 , θ 2 , θ 3 ，分别用权重参数 w 1 , w 2 , w 3 进行管理，见公式(1)，使得参数管理的更加精细，降低了特征值扰动对模型为稳定性影响。</p><p>p = w 1 x 1 + b → p = w 1 θ 1 + w 2 θ 2 + w 3 θ 3 + b #(1)</p></sec><sec id="s6_2_3"><title>2.2.3. 非数值变量处理</title><p>某些体检指标的分类变量是离散的，比如“阴离子间隙”这一个指标中，0代表正常，1代表偏低，2代表偏高，而数值大小和真实的数值大小无关，本质上属于非数字列值，同样需要对数据变量独热(one-hot)编码化处理。处理后的“阴离子间隙”这一列数据将扩充为3列，如表4所示分别是“阴离子间隙_正常”“阴离子间隙_低”“阴离子间隙_高”。</p><table-wrap id="table4" ><label><xref ref-type="table" rid="table4">Table 4</xref></label><caption><title> One-hot encoding and expanded columns of taxonomic variabl</title></caption><table><tbody><thead><tr><th align="center" valign="middle" >原列“阴离子间隙”分类数值</th><th align="center" valign="middle" >独热编码：[阴离子间隙_正常，阴离子间隙_低，阴离子间隙_高]</th></tr></thead><tr><td align="center" valign="middle" >0</td><td align="center" valign="middle" >[1, 0, 0]</td></tr><tr><td align="center" valign="middle" >1</td><td align="center" valign="middle" >[0, 1, 0]</td></tr><tr><td align="center" valign="middle" >2</td><td align="center" valign="middle" >[0, 0, 1]</td></tr></tbody></table></table-wrap><p>表4 分类变量独热编码扩增列</p><p>经过独热编码化加工处理后，提取的二元逻辑变量为180个。</p></sec></sec><sec id="s6_3"><title>2.3. LASSO回归模型</title><p>LASSO (The Least Absolute Shrinkage and Selection Operator)回归是一种线性回归的缩减方法(也称正则化)，将回归系数收缩在一定的区域内 [<xref ref-type="bibr" rid="hanspub.39708-ref7">7</xref>]。LASSO回归的特点是在拟合广义估计方程的同时进行变量筛选和复杂度调整，从而有效解决变量共线性问题并最终获得精简的统计模型。 [<xref ref-type="bibr" rid="hanspub.39708-ref8">8</xref>] Huang等 [<xref ref-type="bibr" rid="hanspub.39708-ref9">9</xref>] 利用LASSO从150多个临床指标中筛选出24个关键指标并以此开发并验证了影像组学联合CT和临床危险因素列线图模型，用于预测结直肠癌术前淋巴结转移的风险。LASSO的主要思想是在残差平方和上添加惩罚函数来限制权重 w 1 ，以此来压缩和简化模型，也就是特征筛选。因此我们在LASSO回归中损失函数上添加一个惩罚项 ∑ i = 1 n | w i | ，m是样本个数，n是特征个数，那么损失函数 f ( w ) 是：</p><p>f ( w ) = 1 2 m ∑ i = 1 m ( y i − y i ^ ) 2 + λ ∑ i = 1 n | w i | #(2)</p><p>LASSO回归模型在大规模数据变量模型中具有良好的变量选择性质，当残差平方 λ T λ 很小的时候，一些自变量的系数会随着变为0，这样不仅可以筛选出线性回归模型中具有多重共线性的特征，还能通过量化的权重来直观地展示体检指标对健康的影响情况。</p></sec><sec id="s6_4"><title>2.4. 健康指数模型</title><p>与金融风险控制领域的个人信用风险评分类似，体检健康领域同样需要评分模型的稳健性和可解释性。但是在输入数据上，体检分类指标数据和历史信用记录数据相比，具有离散化的特点，更加适合结合LASSO回归模型的信用评分卡。因此在个人信用风险评分模型 [<xref ref-type="bibr" rid="hanspub.39708-ref10">10</xref>] 的基础上，将预测模型由梯度集成决策树改进为LASSO回归模型，增加评分卡的可解释性，同时结合体检的应用场景和输入数据，建立体检评分模型。评分卡的分值刻度将分值Score表示为比率对数的线性表达式：</p><p>Score = A − B * log ( odds ) #(3)</p><p>其中，A为补偿，B为刻度，都为常数。</p><p>odds = p 1 − p #(4)</p><p>p = w 1 X 1 + w 2 X 2 + w 3 X 3 + ⋯ + w n X n + b = W T X + b #(5)</p><p>其中 X n 表示体检者各项检测指标，p由LASSO线性回归模型得到，取值范围[0, 1]，表示非健康的概率。引入违约翻倍系数PDO，即当odds (非健康：健康比例)为两倍的时候，分数为Score + PDO：</p><p>Score + PDO = A − B * log ( 2 * odds ) #(6)</p><p>需要计算参数A，B，解两个方程，得到：</p><p>B = PDO ln ( 2 ) #(7)</p><p>A = Score 0 + B * ln ( odds 0 ) #(8)</p><p>odds<sub>0</sub>为基准坏/好比例，这里取非健康/健康比例，得到 odds = 19832 25543 = 0.776416 。为了将大部分的分数限制在100分以内， ln ( odds 0 ) = − 0.253066 设置基准分 Score 0 = 70 ， PDO = 20 。代入公式(7) (8)得到 A = 62.698 ,   B = 28.854 。</p></sec></sec><sec id="s7"><title>3. 结果</title><sec id="s7_1"><title>3.1. 训练结果</title><p>LASSO回归模型的训练需要调整正则化参数alpha。正则化参数越高，模型适应数据的复杂性能力越低，灵活程度越低，出现欠拟合的情况。当正则化参数越小时，模型过拟合。本文使用scikit模块的Lasso CV (Cross Validation)，在10折交叉验证中找出最佳的alpha = 0.0003433。</p><p>训练后的最优模型选取了32个体检指标，我们定义该32个体检指标为健康指数影响因子，同时淘汰了150个权重较低的体检指标，图2展示了模型权重中10个最重要的非健康特征和10个最重要的健康特征。</p><p>图2. 体检指标权重直方图</p><p>图2中非健康特征中影响最大的是年龄的影响，年龄越高，评分越低。其它的非健康特征基本属于异常指标，比如“葡萄糖_高”“载脂蛋白A1_低”“谷丙转氨酶”和“甘油三酯”，这些指标和常见慢性病有关 [<xref ref-type="bibr" rid="hanspub.39708-ref11">11</xref>]。表5中举3个用户的例子，为了简化表格，每组对比用户中未列出的体检项目指标变量相同。</p><table-wrap id="table5" ><label><xref ref-type="table" rid="table5">Table 5</xref></label><caption><title> Physical examination item record and health score prediction of sample user</title></caption><table><tbody><thead><tr><th align="center" valign="middle" >用户</th><th align="center" valign="middle" >性别</th><th align="center" valign="middle" >年龄</th><th align="center" valign="middle" >γ谷氨酰胺转肽酶(GGT)</th><th align="center" valign="middle" >中性粒细胞绝对值</th><th align="center" valign="middle" >低密度脂蛋白胆固醇</th><th align="center" valign="middle" >平均RBC血红蛋白量</th><th align="center" valign="middle" >总胆固醇(CHOL)</th><th align="center" valign="middle" >淋巴细胞百分率</th><th align="center" valign="middle" >甘油三酯</th><th align="center" valign="middle" >碱性磷酸酶(ALP)</th><th align="center" valign="middle" >载脂蛋白B(APOB)</th><th align="center" valign="middle" >阴离子间隙</th><th align="center" valign="middle" >健康分</th></tr></thead><tr><td align="center" valign="middle" >A</td><td align="center" valign="middle" >男</td><td align="center" valign="middle" >45</td><td align="center" valign="middle" >阳性</td><td align="center" valign="middle" >阴性</td><td align="center" valign="middle" >高</td><td align="center" valign="middle" >高</td><td align="center" valign="middle" >高</td><td align="center" valign="middle" >阴性</td><td align="center" valign="middle" >高</td><td align="center" valign="middle" >阴性</td><td align="center" valign="middle" >阳性</td><td align="center" valign="middle" >阳性</td><td align="center" valign="middle" >53.5</td></tr><tr><td align="center" valign="middle" >B</td><td align="center" valign="middle" >女</td><td align="center" valign="middle" >47</td><td align="center" valign="middle" >阴性</td><td align="center" valign="middle" >阳性</td><td align="center" valign="middle" >低</td><td align="center" valign="middle" >高</td><td align="center" valign="middle" >正常</td><td align="center" valign="middle" >阳性</td><td align="center" valign="middle" >低</td><td align="center" valign="middle" >阴性</td><td align="center" valign="middle" >阴性</td><td align="center" valign="middle" >阴性</td><td align="center" valign="middle" >72.8</td></tr><tr><td align="center" valign="middle" >C</td><td align="center" valign="middle" >女</td><td align="center" valign="middle" >48</td><td align="center" valign="middle" >阴性</td><td align="center" valign="middle" >阳性</td><td align="center" valign="middle" >正常</td><td align="center" valign="middle" >正常</td><td align="center" valign="middle" >正常</td><td align="center" valign="middle" >阴性</td><td align="center" valign="middle" >正常</td><td align="center" valign="middle" >阳性</td><td align="center" valign="middle" >阴性</td><td align="center" valign="middle" >阴性</td><td align="center" valign="middle" >67.0</td></tr></tbody></table></table-wrap><p>表5. 示例用户体检项目记录和健康分预测表</p><table-wrap id="table6" ><label><xref ref-type="table" rid="table6">Table 6</xref></label><caption><title> Coefficients of three physical examination item</title></caption><table><tbody><thead><tr><th align="center" valign="middle" >体检指标</th><th align="center" valign="middle" >权重</th></tr></thead><tr><td align="center" valign="middle" >γ谷氨酰胺转肽酶(GGT)_阴性</td><td align="center" valign="middle" >−0.0358</td></tr><tr><td align="center" valign="middle" >γ谷氨酰胺转肽酶(GGT)_阳性</td><td align="center" valign="middle" >0</td></tr><tr><td align="center" valign="middle" >低密度脂蛋白胆固醇_正常</td><td align="center" valign="middle" >−0.0022</td></tr><tr><td align="center" valign="middle" >低密度脂蛋白胆固醇_低</td><td align="center" valign="middle" >0.0036</td></tr><tr><td align="center" valign="middle" >低密度脂蛋白胆固醇_高</td><td align="center" valign="middle" >0</td></tr><tr><td align="center" valign="middle" >甘油三酯(TG)_正常</td><td align="center" valign="middle" >0</td></tr><tr><td align="center" valign="middle" >甘油三酯(TG)_低</td><td align="center" valign="middle" >−0.0312</td></tr><tr><td align="center" valign="middle" >甘油三酯(TG)_高</td><td align="center" valign="middle" >0.0153</td></tr></tbody></table></table-wrap><p>表6. 三个体检项目的指标权重</p><p>从表5中看出，年龄相近的体检用户之间，由于体检项目指标的差别，预测健康分在相邻的区间中，体现了模型的稳健性。表6是三个体检项目中不同指标的权重，正值代表非健康影响影响因素，负值代表健康影响因素，绝对值越大影响越大。通过量化的指标权重，揭示不同的体检指标对健康的正负面影响，具体来看，用户A的三项异常指标导致影响健康分较低，同时表7的疾病诊断结果为“脂肪肝”也印证了三项指标和健康之间的联系。</p><table-wrap id="table7" ><label><xref ref-type="table" rid="table7">Table 7</xref></label><caption><title> Diagnostic results for the sample user</title></caption><table><tbody><thead><tr><th align="center" valign="middle" >用户</th><th align="center" valign="middle" >疾病诊断</th></tr></thead><tr><td align="center" valign="middle" >A</td><td align="center" valign="middle" >脂肪肝</td></tr><tr><td align="center" valign="middle" >B</td><td align="center" valign="middle" >无</td></tr><tr><td align="center" valign="middle" >C</td><td align="center" valign="middle" >无</td></tr></tbody></table></table-wrap><p>表7. 示例用户的诊断结果表</p><p>表8的中两个不同年龄段的用户体现评分模型的区分度，其中E用户处于中老年，同时如表9所示，该用户体检指标中的异常指标：“乙肝核心抗体(HbcAb)”“尿维生素C”和“阴离子间隙”属于权重绝对值较大指标，因此健康分低于该年龄区间的平均分数29.5分。同时D用户的异常指标：“低密度脂蛋白胆固醇”和“淋巴细胞百分率”在模型中的权重绝对值相对较小，因此健康分高于同一年龄段的平均健康分78.9。所以健康分模型不仅在同一个年龄段之间，在不同年龄段之间也可以客观地反映出用户的健康状况。</p><table-wrap id="table8" ><label><xref ref-type="table" rid="table8">Table 8</xref></label><caption><title> Physical examination item record and health score prediction of sample user</title></caption><table><tbody><thead><tr><th align="center" valign="middle" >用户</th><th align="center" valign="middle" >性别</th><th align="center" valign="middle" >年龄</th><th align="center" valign="middle" >乙肝核心抗体 (HbcAb)</th><th align="center" valign="middle" >低密度脂蛋白胆固醇</th><th align="center" valign="middle" >尿维生素C</th><th align="center" valign="middle" >平均RBC血红蛋白量</th><th align="center" valign="middle" >淋巴细胞百分率</th><th align="center" valign="middle" >阴离子间隙</th><th align="center" valign="middle" >健康分</th></tr></thead><tr><td align="center" valign="middle" >D</td><td align="center" valign="middle" >女</td><td align="center" valign="middle" >26</td><td align="center" valign="middle" >阴性</td><td align="center" valign="middle" >低</td><td align="center" valign="middle" >正常</td><td align="center" valign="middle" >正常</td><td align="center" valign="middle" >阳性</td><td align="center" valign="middle" >阴性</td><td align="center" valign="middle" >85.9</td></tr><tr><td align="center" valign="middle" >E</td><td align="center" valign="middle" >女</td><td align="center" valign="middle" >73</td><td align="center" valign="middle" >阳性</td><td align="center" valign="middle" >正常</td><td align="center" valign="middle" >异常</td><td align="center" valign="middle" >高</td><td align="center" valign="middle" >阴性</td><td align="center" valign="middle" >阳性</td><td align="center" valign="middle" >23.6</td></tr></tbody></table></table-wrap><p>表8. 示例用户体检指标及健康分</p><table-wrap id="table9" ><label><xref ref-type="table" rid="table9">Table 9</xref></label><caption><title> Coefficients of physical examination item</title></caption><table><tbody><thead><tr><th align="center" valign="middle" >体检指标</th><th align="center" valign="middle" >权重</th></tr></thead><tr><td align="center" valign="middle" >乙肝核心抗体(HbcAb)_阳性</td><td align="center" valign="middle" >0.0283</td></tr><tr><td align="center" valign="middle" >尿维生素C_异常</td><td align="center" valign="middle" >0.0364</td></tr><tr><td align="center" valign="middle" >阴离子间隙_阳性</td><td align="center" valign="middle" >0.0201</td></tr><tr><td align="center" valign="middle" >低密度脂蛋白胆固醇_低</td><td align="center" valign="middle" >0.0036</td></tr><tr><td align="center" valign="middle" >淋巴细胞百分率_阳性</td><td align="center" valign="middle" >0</td></tr></tbody></table></table-wrap><p>表9. 指标权重</p></sec><sec id="s7_2"><title>3.2. 模型评估和比较</title><sec id="s7_2_1"><title>3.2.1. 模型评估</title><p>根据图1我们发现年龄分布不符合正态分布，显然年龄也不符合正态分布，我们对其余30个健康指数影响因子逐个作图分析发现他们基本上符合正态分布。为解决多随机因素作用的问题，法国数学家棣莫弗和拉普拉斯首先提出了中心极限定理并给出了证明 [<xref ref-type="bibr" rid="hanspub.39708-ref12">12</xref>] [<xref ref-type="bibr" rid="hanspub.39708-ref13">13</xref>] [<xref ref-type="bibr" rid="hanspub.39708-ref14">14</xref>]，该定理表明所研究的随机变量如果是有大量独立的而且均匀的随机变量相加而成，那么它的分布将近似于正态分布。下图展示健康指数模型输出的用户评分分布直方图。线性回归模型中的假设前提是因变量p服从正态分布，而在图3中，分数特别低(低于30)和特别高(高于100)的人占比都较少，大多数健康分数中等(75左右)，整体上基本符合正态分布，符合线性回归模型的先验假设。</p><p>表10显示健康分数分值越高，非健康率越低，体现了体检者可以通过分数的高低进行健康状况的评估。</p></sec><sec id="s7_2_2"><title>3.2.2 模型比较</title><p>对比运用PCA (主成分分析) [<xref ref-type="bibr" rid="hanspub.39708-ref15">15</xref>] 的统计方法，因获得的主成分公共因子是实际自变量因子的线性组合，所以其难以与分析健康因子的实际问题相对应。特征变量较少的样本适合使用PCA进行降维，因其对公共因子有更好的解释性，本文的体检指标数量较多(182个)，不适合使用PCA分析。</p><p>图3. 分数分布直方图</p><table-wrap id="table10" ><label><xref ref-type="table" rid="table1">Table 1</xref>0</label><caption><title> Interval statistics of health score</title></caption><table><tbody><thead><tr><th align="center" valign="middle" >分数分段</th><th align="center" valign="middle" >分段人数</th><th align="center" valign="middle" >分段人数百分比</th><th align="center" valign="middle" >累计人数百分比</th></tr></thead><tr><td align="center" valign="middle" >0~10</td><td align="center" valign="middle" >32</td><td align="center" valign="middle" >0.07%</td><td align="center" valign="middle" >0.07%</td></tr><tr><td align="center" valign="middle" >10~20</td><td align="center" valign="middle" >135</td><td align="center" valign="middle" >0.30%</td><td align="center" valign="middle" >0.37%</td></tr><tr><td align="center" valign="middle" >20~30</td><td align="center" valign="middle" >516</td><td align="center" valign="middle" >1.14%</td><td align="center" valign="middle" >1.51%</td></tr><tr><td align="center" valign="middle" >30~40</td><td align="center" valign="middle" >1109</td><td align="center" valign="middle" >2.44%</td><td align="center" valign="middle" >3.95%</td></tr><tr><td align="center" valign="middle" >40~50</td><td align="center" valign="middle" >1947</td><td align="center" valign="middle" >4.29%</td><td align="center" valign="middle" >8.24%</td></tr><tr><td align="center" valign="middle" >50~60</td><td align="center" valign="middle" >4627</td><td align="center" valign="middle" >10.20%</td><td align="center" valign="middle" >18.44%</td></tr><tr><td align="center" valign="middle" >60~70</td><td align="center" valign="middle" >10398</td><td align="center" valign="middle" >22.92%</td><td align="center" valign="middle" >41.35%</td></tr><tr><td align="center" valign="middle" >70~80</td><td align="center" valign="middle" >16340</td><td align="center" valign="middle" >36.01%</td><td align="center" valign="middle" >77.36%</td></tr><tr><td align="center" valign="middle" >80~90</td><td align="center" valign="middle" >9420</td><td align="center" valign="middle" >20.76%</td><td align="center" valign="middle" >98.12%</td></tr><tr><td align="center" valign="middle" >90~100</td><td align="center" valign="middle" >382</td><td align="center" valign="middle" >0.84%</td><td align="center" valign="middle" >98.97%</td></tr><tr><td align="center" valign="middle" >100~110</td><td align="center" valign="middle" >2</td><td align="center" valign="middle" >0.00%</td><td align="center" valign="middle" >98.97%</td></tr></tbody></table></table-wrap><p>表10. 健康分区间统计表</p><p>对比应用XGBoost中的回归模型，模型评价指标为预测值的均方误差(MSE)，其中 n 为样本的个数， y i 是真实数据， y i ^ 是预测值。MSE越小，说明预测模型描述实验数据具有更好的精确度。</p><p>MSE = 1 n ∑ i = 1 n w i ( y i − y i ^ ) 2 #(9)</p><p>经过10折交叉验证，最后得到不同机器学习模型使用均方误差的评分如表11所示。</p><table-wrap id="table11" ><label><xref ref-type="table" rid="table1">Table 1</xref>1</label><caption><title> Scores for different machine learning model</title></caption><table><tbody><thead><tr><th align="center" valign="middle" >模型</th><th align="center" valign="middle" >均方误差</th></tr></thead><tr><td align="center" valign="middle" >LASSO回归模型</td><td align="center" valign="middle" >0.23480</td></tr><tr><td align="center" valign="middle" >岭回归模型</td><td align="center" valign="middle" >0.23496</td></tr><tr><td align="center" valign="middle" >梯度提升决策树</td><td align="center" valign="middle" >0.23501</td></tr><tr><td align="center" valign="middle" >随机森林回归</td><td align="center" valign="middle" >0.26548</td></tr><tr><td align="center" valign="middle" >支持向量回归</td><td align="center" valign="middle" >0.29774</td></tr></tbody></table></table-wrap><p>表11. 不同机器学习模型评分</p><p>其中LASSO回归模型在数据集中的准确率略优于其他模型，与之相近的梯度提升决策树只能对变量进行重要性排序 [<xref ref-type="bibr" rid="hanspub.39708-ref16">16</xref>]，并不能输出非健康概率的最终计算权重系数，而LASSO回归中模型的实际系数即代表健康/非健康权重，可解释性更好。</p></sec></sec></sec><sec id="s8"><title>4. 结论</title><p>本文基于体检数据，在个人信用评分卡模型基础上提出了一种基于LASSO回归的健康指数模型。通过模型的对比，本文使用的LASSO模型的变量压缩效果可以很好地筛选自变量，兼具变量子集选择和岭回归的优点，因此可以兼顾解释性和预测准确率，在个人信用评分中已经得到广泛应用。在和随机森林 [<xref ref-type="bibr" rid="hanspub.39708-ref17">17</xref>] 等更加复杂的机器学习模型的对比中，LASSO回归模型的预测精确率在体检大数据集上表现的更好，同时该模型可以更好地解释体检指标特征对健康评分的影响。实验结果表明该健康指数模型大体上呈现正态分布，符合线性回归模型的先验假设。通过该健康指数，体检用户可以从宏观整体上直观感知个人身体健康状况水平，为长期健康管理提供一个可以参考的量化指标，降低体检用户同医生的沟通成本，督促用户更加关注身体整体健康状况水平。</p><p>本文提出的健康评分指数建模中体现了区分度和稳健性，但是本文仍存在几方面问题：一是先验假设中的体检健康标准科学性问题，是否可以由疾病诊断分类中得到更加权威的体检健康标准来改进二值化设定；二是健康影响因子中各因子独立性问题，需要进一步分析加以筛选。如何更加深入地将数据科学和体检健康科学结合起来优化评分模型，是下一步研究的重点。</p></sec><sec id="s9"><title>基金项目</title><p>国家级大创项目基金支持，编号202010384213.</p></sec><sec id="s10"><title>文章引用</title><p>谢昌锟,赵明琪,林世明. 基于体检大数据的健康指数建模Health Score Model Based on Big Data of Physical Examination[J]. 数据挖掘, 2021, 11(01): 1-10. https://doi.org/10.12677/HJDM.2021.111001</p></sec><sec id="s11"><title>参考文献</title></sec></body><back><ref-list><title>References</title><ref id="hanspub.39708-ref1"><label>1</label><mixed-citation publication-type="other" xlink:type="simple">中共中央 国务院印发《“健康中国2030”规划纲要》[J]. 中华人民共和国国务院公报, 2016(32): 5-20.</mixed-citation></ref><ref id="hanspub.39708-ref2"><label>2</label><mixed-citation publication-type="other" xlink:type="simple">国务院办公厅. 关于促进和规范健康医疗大数据应用发展的指导意见(国办发[2016]47号) [Z]. 2016.</mixed-citation></ref><ref id="hanspub.39708-ref3"><label>3</label><mixed-citation publication-type="other" xlink:type="simple">叶荔姗, 赵飞, 陈坚, 徐秋实, 许志坚. 基于智能电子健康档案平台的大数据应用研究与实践[J]. 中国卫生信息管理杂志, 2019, 16(6): 672-676.</mixed-citation></ref><ref id="hanspub.39708-ref4"><label>4</label><mixed-citation publication-type="other" xlink:type="simple">熊辉, 何振峰. 基于R平台的体检数据分析研究[J]. 福建电脑, 2017, 33(11): 73-75.</mixed-citation></ref><ref id="hanspub.39708-ref5"><label>5</label><mixed-citation publication-type="other" xlink:type="simple">Wang, L., Wang, Y., Chen, Y., Liu, C. and Fan, X. (2017) Prediction of Lymphocytosis Using Machine Learning Algorithm Based on Checkup Data. 2017 4th International Conference on Systems and Informatics (ICSAI), Hangzhou, 11-13 November 2017, 649-654. &lt;br&gt;https://doi.org/10.1109/ICSAI.2017.8248369</mixed-citation></ref><ref id="hanspub.39708-ref6"><label>6</label><mixed-citation publication-type="other" xlink:type="simple">余秋燕, 赵莹, 孙继佳, 邵建华. 典型机器学习算法在脂肪肝分类预测研究中的实现与比较[J]. 数理医药学杂志, 2019, 32(1): 1-3.</mixed-citation></ref><ref id="hanspub.39708-ref7"><label>7</label><mixed-citation publication-type="other" xlink:type="simple">方匡南, 章贵军, 张惠颖. 基于Lasso-Logistic模型的个人信用风险预警方法[J]. 数量经济技术经济研究, 2014, 31(2): 125-136.</mixed-citation></ref><ref id="hanspub.39708-ref8"><label>8</label><mixed-citation publication-type="other" xlink:type="simple">李阳, 陈晓泓, 王一梅, 胡家昌, 沈子妍, 沈波, 林静, 丁小强. 基于LASSO变量选择联合贝叶斯网络构建恶性肿瘤相关急性肾损伤(AKI)风险预测模型[J]. 复旦学报(医学版), 2020, 47(4): 521-530.</mixed-citation></ref><ref id="hanspub.39708-ref9"><label>9</label><mixed-citation publication-type="other" xlink:type="simple">Huang, Y.Q., Liang, C.H., He, L., et al. (2016) Development and Validation of a Radiomics Nomo-gram for Preoperative Prediction of Lymph Node Metastasis in Colorectal Cancer. Journal of Clinical Oncology, 34, 2157-2164.  
&lt;br&gt;https://doi.org/10.1200/JCO.2015.65.9128</mixed-citation></ref><ref id="hanspub.39708-ref10"><label>10</label><mixed-citation publication-type="other" xlink:type="simple">韩修龙. 基于XGBOOST的用户信用评分建模[J]. 电脑知识与技术, 2018, 14(5): 7-8.</mixed-citation></ref><ref id="hanspub.39708-ref11"><label>11</label><mixed-citation publication-type="other" xlink:type="simple">贾瑞珍, 杜兵. 健康体检的深层价值探讨(附1300例体检结果分析) [J]. 中国全科医学, 2007(1): 58-59.</mixed-citation></ref><ref id="hanspub.39708-ref12"><label>12</label><mixed-citation publication-type="other" xlink:type="simple">孟祥飞, 王瑛, 李超, 亓尧, 孙贇. 独立不同分布不确定变量中心极限定理证明及其应用[J]. 上海交通大学学报, 2019, 53(10): 1230-1237.</mixed-citation></ref><ref id="hanspub.39708-ref13"><label>13</label><mixed-citation publication-type="other" xlink:type="simple">Dolgopyat, D. and Goldsheid, I. (2018) Central Limit Theorem for Recurrent Random Walks on a Strip with Bounded Potential. Nonlinearity, 31, 3381. &lt;br&gt;https://doi.org/10.1088/1361-6544/aab89b</mixed-citation></ref><ref id="hanspub.39708-ref14"><label>14</label><mixed-citation publication-type="other" xlink:type="simple">Benoist, Y. and Quint, J.-F. (2016) Central Limit Theorem for Linear Groups. The Annals of Probability, 44, No. 2.  
&lt;br&gt;https://doi.org/10.1214/15-AOP1002</mixed-citation></ref><ref id="hanspub.39708-ref15"><label>15</label><mixed-citation publication-type="other" xlink:type="simple">缪柏其, 宁静, 肖婕. 主成分分析和因子分析在体检数据分析中的应用——中国科技大学高级知识分子健康状况及影响因素分析[J]. 数理统计与管理, 2000(6): 16-19.</mixed-citation></ref><ref id="hanspub.39708-ref16"><label>16</label><mixed-citation publication-type="other" xlink:type="simple">王小强. 基于随机森林的亚健康状态预测与特征选择方法研究[J]. 计算机应用与软件, 2014, 31(1): 296-298, 307.</mixed-citation></ref><ref id="hanspub.39708-ref17"><label>17</label><mixed-citation publication-type="other" xlink:type="simple">张占林, 孙勇, 妥小青, 叶勒丹•马汉, 龚政, 田恬, 陈珍, 古丽斯亚•海力力, 戴江红, 姚华. 随机森林算法对体检人群糖尿病患病风险的预测价值研究[J]. 中国全科医学, 2019, 22(9): 1021-1026.</mixed-citation></ref></ref-list></back></article>