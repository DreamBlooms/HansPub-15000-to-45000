<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE article  PUBLIC "-//NLM//DTD Journal Publishing DTD v3.0 20080202//EN" "http://dtd.nlm.nih.gov/publishing/3.0/journalpublishing3.dtd"><article xmlns:mml="http://www.w3.org/1998/Math/MathML" xmlns:xlink="http://www.w3.org/1999/xlink" dtd-version="3.0" xml:lang="en" article-type="research article"><front><journal-meta><journal-id journal-id-type="publisher-id">OJCS</journal-id><journal-title-group><journal-title>Open Journal of Circuits and Systems</journal-title></journal-title-group><issn pub-type="epub">2327-0853</issn><publisher><publisher-name>Scientific Research Publishing</publisher-name></publisher></journal-meta><article-meta><article-id pub-id-type="doi">10.12677/OJCS.2016.51001</article-id><article-id pub-id-type="publisher-id">OJCS-17131</article-id><article-categories><subj-group subj-group-type="heading"><subject>OJCS20160100000_55374427.pdf</subject></subj-group><subj-group subj-group-type="Discipline-v2"><subject>信息通讯</subject><subject> 工程技术</subject></subj-group></article-categories><title-group><article-title>
 
 
  基于STM8F003无线智能照明系统设计
  Design of Intelligent Wireless Lighting System Based on STM8F003
 
</article-title></title-group><contrib-group><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>黄</surname><given-names>超</given-names></name><xref ref-type="aff" rid="aff1"><sup>1</sup></xref><xref ref-type="corresp" rid="cor1"><sup>*</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>王</surname><given-names>虹喻</given-names></name><xref ref-type="aff" rid="aff1"><sup>1</sup></xref><xref ref-type="aff" rid="aff2"><sup>2</sup></xref></contrib></contrib-group><aff id="aff1"><addr-line>大连理工大学城市学院，辽宁 大连</addr-line></aff><aff id="aff2"><addr-line>null</addr-line></aff><author-notes><corresp id="cor1">* E-mail:<email>39273591@qq.com(黄超)</email>;</corresp></author-notes><pub-date pub-type="epub"><day>15</day><month>03</month><year>2016</year></pub-date><volume>05</volume><issue>01</issue><fpage>1</fpage><lpage>9</lpage><permissions><copyright-statement>&#169; Copyright  2014 by authors and Scientific Research Publishing Inc. </copyright-statement><copyright-year>2014</copyright-year><license><license-p>This work is licensed under the Creative Commons Attribution International License (CC BY). http://creativecommons.org/licenses/by/4.0/</license-p></license></permissions><abstract><p>
 
 
   
   针对传统照明系统的缺陷，设计了一种无线智能照明系统，主要由STM8F003单片机最小系统、无线通信电路、声音传感器电路、光控感应电路等组成；该系统具有声音感应、智能调光、手机蓝牙控制等功能，且成本低廉、无需布线、安装简便，可广泛应用于智能家居领域。 Aiming at the defects of the current traditional lighting system, an intelligent wireless lighting system was designed. It mainly includes single-chip microcomputer minimum system, wireless communication circuitry, audio sensor circuit, light control sensor circuit and so on. The system includes the following functions: Sound sensor, smart dimming and bluetooth mobile phone control with low cost, no wiring, easy installation, and can be widely used in the field of smart home. 
  
 
</p></abstract><kwd-group><kwd>无线智能照明系统，STM8F003芯片，光控感应，蓝牙通信, Intelligent Wireless Lighting System</kwd><kwd> STM8F003 Chip</kwd><kwd> Light Control Sensor</kwd><kwd> Bluetooth Communication</kwd></kwd-group></article-meta></front><body><sec id="s1"><title>基于STM8F003无线智能照明系统设计<sup> </sup></title><p>黄超，王虹喻</p><p>大连理工大学城市学院，辽宁 大连</p><disp-formula id="hanspub.17131-formula1"><graphic xlink:href="http://html.hanspub.org/file/1-2780059x6_hanspub.png"  xlink:type="simple"/></disp-formula><p>收稿日期：2016年2月20日；录用日期：2016年3月11日；发布日期：2016年3月15日</p><disp-formula id="hanspub.17131-formula2"><graphic xlink:href="http://html.hanspub.org/file/1-2780059x7_hanspub.png"  xlink:type="simple"/></disp-formula></sec><sec id="s2"><title>摘 要</title><p>针对传统照明系统的缺陷，设计了一种无线智能照明系统，主要由STM8F003单片机最小系统、无线通信电路、声音传感器电路、光控感应电路等组成；该系统具有声音感应、智能调光、手机蓝牙控制等功能，且成本低廉、无需布线、安装简便，可广泛应用于智能家居领域。</p><p>关键词 :无线智能照明系统，STM8F003芯片，光控感应，蓝牙通信</p><disp-formula id="hanspub.17131-formula3"><graphic xlink:href="http://html.hanspub.org/file/1-2780059x8_hanspub.png"  xlink:type="simple"/></disp-formula></sec><sec id="s3"><title>1. 引言</title><p>照明和照明控制以及楼宇自动化是当今人类的工作，学习和生活的必需品，伴随着人们生活水平的提高，它们逐渐成为了人们生活不可或缺的一部分，人们对照明控制提出了更高标准要求，同时通信、电子和计算机网络技术的发展提供了智能照明控制系统不可缺少的条件。发展智能照明技术不仅能够实现照明控制智能化，营造良好的光照环境，还能节约能源，提高照明系统的科学性和高效性 [<xref ref-type="bibr" rid="hanspub.17131-ref1">1</xref>] 。</p><p>然而，现有的智能照明系统大多采用有线控制方式，其布线施工较复杂，系统可扩展性较差，移动性能欠缺，严重影响了智能照明系统的发展和智能家居的应用。伴随着网络、无线通信技术的发展，数字化家庭和智能照明的概念被提出。数字化家庭作为人类通信、网络、安全、建材、家居等全面发展的趋势，在社会各界引起了高度的关注，基于无线控制的智能照明系统在国内外已经得到广泛研究。近几年，短距离无线通信技术获得了迅速发展 [<xref ref-type="bibr" rid="hanspub.17131-ref2">2</xref>] - [<xref ref-type="bibr" rid="hanspub.17131-ref6">6</xref>] 。其中主流技术包括红外技术、蓝牙(Bluetooth)、Wi-Fi、UWB (Ultra Wideband)及ZigBee技术等，它们都有各自的标准、特点和相应的应用领域，其中Zigbee和蓝牙技术受到很多研究者的关注：</p><p>一、ZigBee技术<sup> </sup></p><p>ZigBee是一种新兴的短距离、低速率、低复杂度、低功耗、低成本的无线组网技术；具有成本低、可靠性好、时延短、网络容量大、覆盖范围广、安全性高等特点，随着物联网技术的应用，基于ZigBee组网的无线照明系统得到广泛地研究 [<xref ref-type="bibr" rid="hanspub.17131-ref7">7</xref>] - [<xref ref-type="bibr" rid="hanspub.17131-ref11">11</xref>] 。</p><p>二、蓝牙技术</p><p>蓝牙技术是一种低功率短距离的无线链路技术标准的代称，建立了通用的无线空中接口及其控制软件的开放标准，使通信与计算机进一步结合，使不同厂家生产的便携设备在没有电缆或电线的情况下进行数据通信。由于现在众多便携设备(如手机、平板电脑等终端)都自带蓝牙功能模块，基于手机蓝牙技术的智能照明系统也得到广泛研究 [<xref ref-type="bibr" rid="hanspub.17131-ref12">12</xref>] - [<xref ref-type="bibr" rid="hanspub.17131-ref15">15</xref>] 。</p><p>考虑到手机应用的普遍性，文献 [<xref ref-type="bibr" rid="hanspub.17131-ref9">9</xref>] 介绍了采用智能手机 + ZigBee网关 + ZigBee模块的控制方式，相比于文献 [<xref ref-type="bibr" rid="hanspub.17131-ref9">9</xref>] ，本文提出的智能手机+主节点+子节点控制方式，具有成本更低、速度更快、实现更简单的优点；同时，与文献 [<xref ref-type="bibr" rid="hanspub.17131-ref12">12</xref>] - [<xref ref-type="bibr" rid="hanspub.17131-ref15">15</xref>] 相比，设计的无线照明系统更加智能，功能更多；本文主要针对智能家居领域，开发了一种具有手机蓝牙无线控制照明、声音感应、智能调光等功能的系统，具有成本低廉、无需布线、安装简便、易操作等优点。</p></sec><sec id="s4"><title>2. 无线智能照明系统硬件设计</title><sec id="s4_1"><title>2.1. 设计思路</title><p>硬件分为主节点与从节点。主节点以STM8F003为主控芯片，通过蓝牙HC-06与手机进行通信，主节点并通过HJ-WUS1无线串口模块判断子节点是否动作，用以实现在家中任何地方都能通过手机无线控制照明系统。子节点同样以STM8为主控芯片，通过HJ-WUS1无线串口模块与主节点通信。此外，与声音传感器模块YL-56、光控感应电路相连，可以实现当发出较大的声音时自动开启照明系统，音量低时自动关闭照明系统。在相应的光线照射到光敏电阻上时，灯光自动调节，使人可以处在一个舒适的光线中。设计的无线智能照明系统框图如图1所示。</p></sec><sec id="s4_2"><title>2.2. 硬件功能模块电路</title><p>设计的无线照明系统硬件主要包括：手机与主节点间通信模块、主子节点主控模块、主子节点间通信模块、检测模块、声音检测模块等。下面就几种硬件功能模块电路图进行介绍。</p><sec id="s4_2_1"><title>2.2.1. 主子节点主控模块</title><p>STM8、STC89C52、STM32这三种系列单片机都可用来作为系统主子节点主控芯片，但是由于主子节点间需要使用SPI通信协议，所以STC89C52系列单片机便不适合用作系统的主控芯片。而STM8系列单片机价格比STM32系列单片机低很多，所以选用STM8F003来制作此款无线智能照明系统。STM8F003最小系统硬件连接图如图2所示。</p><p>图1. 无线智能照明系统框图</p><p>图2. STM8F003最小系统硬件连接图</p></sec><sec id="s4_2_2"><title>2.2.2. 手机与主节点间通信模块HC-06</title><p>HC-06是主从一体化的蓝牙串口模块，主从可指令切换，指令少于HC-05，使用简单。供电电压3.3 V~3.6 V，灵敏度达到−80 dBm，自带蓝牙2.0芯片，内置2.4 GHz天线。具有低功耗、高性能无线收发系统、低成本、应用领域广等特点。非常适合与手机间进行数据传输。HC-06硬件连接如图3所示。</p></sec><sec id="s4_2_3"><title>2.2.3. 主子节点间通信模块HJ-WUS1</title><p>HJ-WUS1是基于串口的并且符合2.4 G标准的无线透传模块，其内置2.4 GHz无线芯片和STM8高性能单片机，用户无需了解无线发送和接收的过程以及原理，也不需要对模块进行编程，只需要将目标终端和无线模块串口连接起来就能够实现串口数据的无线透明传输。HJ-WUS1硬件连接如图4所示。</p></sec><sec id="s4_2_4"><title>2.2.4. 声音检测模块YL-56</title><p>YL-56对周围环境声音强度非常敏感，它通常用来检测周围环境声音的强度。模块在环境声音强度无法达到所设定的阀值时，其D0口就会输出高电平，当外界声音强度超过我们所设定的阀值时，模块D0口就会输出低电平。由于它是数字量输出，所以它的D0口可以和单片机直接相连，单片机通过检测它的高低电平来检测环境的声音。除此之外，它还可以直接与继电器模块相连，组成一个声控开关。YL-56电路原理图如图5所示。</p></sec></sec></sec><sec id="s5"><title>3. 系统软件设计</title><p>系统软件设计方面主要包括系统工作流程图、主、子节点流程图以及手机端程序流程图。</p><sec id="s5_1"><title>3.1. 系统工作流程图</title><p>无线智能照明系统工作流程图如图6所示。</p><p>图3. HC-06硬件连接图</p><p>图4. HJ-WUS1硬件连接</p><p>图5. YL-56硬件连接</p><p>图6. 系统工作流程图</p></sec><sec id="s5_2"><title>3.2. 主、子节点流程图</title><p>图7为主、子节点流程图。根据以上的流程图可知，主节点的串口和模块通过程序进行初始化后，一旦接收到手机端发送来的指令信息，根据指令发送相应的数据给子节点。子节点同样也需要对串口和模块通过程序进行初始化，然后会根据接收指令、光线的强弱以及声音的大小通过单片机共同协调、配合，最终实现小灯点亮或者熄灭的功能。</p></sec><sec id="s5_3"><title>3.3. 手机端流程图</title><p>手机端程序流程图如图8所示。</p><p>图7. 主、子节点流程图</p><p>图8. 手机端流程图</p><p>手机端应用程序流程主要为：在蓝牙打开的情况下，对用户的按键的触电位置进行判断，从而判断其按下几号按键，一旦用户按下相应按键，则手机端将会通过蓝牙传送指令信息给单片机，最终通过单片机实现对小灯点亮或者熄灭的控制。</p></sec></sec><sec id="s6"><title>4. 测试结果</title><p>蓝牙采用的是点对点通信方式，与1个主节点进行通信；而主节点同时和多个子节点进行通信。测试中，仅需选取1个主节点、1个子节点进行实验验证。无线智能照明系统实物图如图9所示，蓝牙APP控制界面如图10所示，演示图如图11所示。经过测试，本设计系统各项功能测试均能稳定运行、响应快速、控制简便。</p></sec><sec id="s7"><title>5. 结束语</title><p>随着电子科技的发展，物联网应用已经渗透到各行领域，包括智能家居。可控电源属于智能家居的一小部分，也是不可或缺的一部分，近年来，基于ZigBee的无线组网系统得到广泛研究，其中就包括无</p><p>图9. 无线智能照明系统实物图</p><p>图10. 蓝牙APP控制系统</p><p>图11. 无线智能照明系统演示图</p><p>线智能照明系统的研究；文献 [<xref ref-type="bibr" rid="hanspub.17131-ref9">9</xref>] 介绍了采用智能手机 + ZigBee网关 + ZigBee模块的控制方式，相比于文献 [<xref ref-type="bibr" rid="hanspub.17131-ref9">9</xref>] ，本文提出的智能手机+主节点+子节点控制方式，具有成本更低、速度更快、实现更简单的优点；</p><p>本文设计的无线遥控智能照明系统具有声音感应、智能调光功能，并可通过手机终端APP控制照明，主打的是便捷、廉价、人性化，在数字化家庭市场中具有很好的应用价值。</p></sec><sec id="s8"><title>致谢</title><p>本设计基于辽宁省普通高等学校本科教育教学改革研究项目(UPRP20140750)，在此，表示感谢。</p></sec><sec id="s9"><title>基金项目</title><p>辽宁省普通高等学校本科教育教学改革研究项目(UPRP20140750)。</p></sec><sec id="s10"><title>文章引用</title><p>黄 超,王虹喻. 基于STM8F003无线智能照明系统设计Design of Intelligent Wireless Lighting System Based on STM8F003[J]. 电路与系统, 2016, 05(01): 1-9. http://dx.doi.org/10.12677/OJCS.2016.51001</p></sec><sec id="s11"><title>参考文献 (References)</title></sec></body><back><ref-list><title>References</title><ref id="hanspub.17131-ref1"><label>1</label><mixed-citation publication-type="other" xlink:type="simple">周登龙, 陈硕. 基于ZigBee无线通信技术的智能照明系统[J]. 现代电子技术, 2012, 35(17): 192-194.</mixed-citation></ref><ref id="hanspub.17131-ref2"><label>2</label><mixed-citation publication-type="other" xlink:type="simple">黄超, 刘婷, 谢印庆. 基于STC12C5A60S2多功能通信开发板设计[J]. 现代电子技术, 2014, 37(5): 152-155.</mixed-citation></ref><ref id="hanspub.17131-ref3"><label>3</label><mixed-citation publication-type="other" xlink:type="simple">荆世勇, 周景龙, 刘明鑫, 等. 基于 SIM900A 和 LPC2378 无线数据传输系统设计[J]. 电子科技, 2012, 25(11): 66-68.</mixed-citation></ref><ref id="hanspub.17131-ref4"><label>4</label><mixed-citation publication-type="other" xlink:type="simple">翟顺, 王卫红. 基于ZigBee无线通信技术的智能照明系统[J]. 现代电子技术, 2012, 35(5): 86-89.</mixed-citation></ref><ref id="hanspub.17131-ref5"><label>5</label><mixed-citation publication-type="other" xlink:type="simple">朱文海. 基于 nRF905 的小型无线温度传感器设计[J]. 仪表技术, 2013(6): 52-54.</mixed-citation></ref><ref id="hanspub.17131-ref6"><label>6</label><mixed-citation publication-type="other" xlink:type="simple">陈万里, 王丽霞, 柴远波. 一种无线LED 照明智能控制系统设计[J]. 现代电子技术, 2015, 38(14): 55-58.</mixed-citation></ref><ref id="hanspub.17131-ref7"><label>7</label><mixed-citation publication-type="other" xlink:type="simple">徐云厚, 涂亮, 李智, 等. 基于无线网络控制的智能照明系统[J]. 物联网技术, 2012(1): 51-54.</mixed-citation></ref><ref id="hanspub.17131-ref8"><label>8</label><mixed-citation publication-type="other" xlink:type="simple">孙长伟, 王艳春. 基于ZigBee 的无线智能照明系统设计[J]. 赤峰学院学报, 2012, 28(4): 47-49.</mixed-citation></ref><ref id="hanspub.17131-ref9"><label>9</label><mixed-citation publication-type="other" xlink:type="simple">韩立成, 章回, 王永庆. 一种基于ZigBee的智能家居照明控制系统[J]. 中国照明电器, 2015(11): 24-27.</mixed-citation></ref><ref id="hanspub.17131-ref10"><label>10</label><mixed-citation publication-type="other" xlink:type="simple">李少雷. 基于ZigBee技术的无线智能照明控制系统[J]. 电子设计工程, 2015, 23(19): 125-126.</mixed-citation></ref><ref id="hanspub.17131-ref11"><label>11</label><mixed-citation publication-type="other" xlink:type="simple">唐礼科, 刘志勤, 王耀彬, 等. 基于ZigBee的智能双模照明系统设计[J]. 西南科技大学学报, 2013, 12(4): 77-80.</mixed-citation></ref><ref id="hanspub.17131-ref12"><label>12</label><mixed-citation publication-type="other" xlink:type="simple">张少华, 魏志远. 基于蓝牙4. 0技术智能灯泡的设计与实现[J]. 物联网技术, 2015(4): 90-93.</mixed-citation></ref><ref id="hanspub.17131-ref13"><label>13</label><mixed-citation publication-type="other" xlink:type="simple">孙长伟, 王艳春. 手机蓝牙收发模块的无线LED调光技术[J]. 单片机与嵌入式系统应用, 2015(7): 57-60.</mixed-citation></ref><ref id="hanspub.17131-ref14"><label>14</label><mixed-citation publication-type="other" xlink:type="simple">吴迪, 徐卫林, 覃玉良, 等. 基于Android 的智能家居照明系统[J]. 电视技术, 2015, 39(18): 12-15.</mixed-citation></ref><ref id="hanspub.17131-ref15"><label>15</label><mixed-citation publication-type="other" xlink:type="simple">胡鑫, 周迪, 吴文威, 等. 手机蓝牙收发模块的无线LED调光技术[J]. 单片机与嵌入式系统应用, 2015(7): 57-60.</mixed-citation></ref></ref-list></back></article>