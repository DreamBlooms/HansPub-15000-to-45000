<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE article  PUBLIC "-//NLM//DTD Journal Publishing DTD v3.0 20080202//EN" "http://dtd.nlm.nih.gov/publishing/3.0/journalpublishing3.dtd"><article xmlns:mml="http://www.w3.org/1998/Math/MathML" xmlns:xlink="http://www.w3.org/1999/xlink" dtd-version="3.0" xml:lang="en" article-type="research article"><front><journal-meta><journal-id journal-id-type="publisher-id">MOS</journal-id><journal-title-group><journal-title>Modeling and Simulation</journal-title></journal-title-group><issn pub-type="epub">2324-8696</issn><publisher><publisher-name>Scientific Research Publishing</publisher-name></publisher></journal-meta><article-meta><article-id pub-id-type="doi">10.12677/MOS.2020.94052</article-id><article-id pub-id-type="publisher-id">MOS-38681</article-id><article-categories><subj-group subj-group-type="heading"><subject>MOS20200400000_75027972.pdf</subject></subj-group><subj-group subj-group-type="Discipline-v2"><subject>信息通讯</subject><subject> 工程技术</subject></subj-group></article-categories><title-group><article-title>
 
 
  基于i5OS数控系统的三轴立式加工中心误差建模及补偿研究
  Research on Error Modeling and Compensation for Three-Axis Vertical Machining Center Based on i5OS CNC System
 
</article-title></title-group><contrib-group><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>王</surname><given-names>梓伦</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>印</surname><given-names>晨</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>陈</surname><given-names>光胜</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="corresp" rid="cor1"><sup>*</sup></xref></contrib></contrib-group><aff id="aff2"><addr-line>上海理工大学机械学院，上海</addr-line></aff><aff id="aff1"><addr-line>null</addr-line></aff><pub-date pub-type="epub"><day>30</day><month>09</month><year>2020</year></pub-date><volume>09</volume><issue>04</issue><fpage>535</fpage><lpage>541</lpage><permissions><copyright-statement>&#169; Copyright  2014 by authors and Scientific Research Publishing Inc. </copyright-statement><copyright-year>2014</copyright-year><license><license-p>This work is licensed under the Creative Commons Attribution International License (CC BY). http://creativecommons.org/licenses/by/4.0/</license-p></license></permissions><abstract><p>
 
 
  三轴立式加工中心是机械加工的重要装备，为提高其精度，本文利用齐次坐标变换建立了三轴立式加工中心的几何误差数学模型，开发了基于i5OS数控系统的误差补偿软件，为了简化误差检测时间和效率，选取对综合误差有主要贡献的直线度和定位误差进行补偿实验，结果表明，基于i5OS数控系统的综合误差实时性反馈补偿使数控机床的加工精度提高了38%以上，验证了模型的准确性和补偿软件的有效性。&lt;br/&gt;Three-axis vertical machining center is an important equipment in machining. In order to improve its precision, the geometric error mathematical model of three-axis vertical machining center is established by using homogeneous coordinate transformation. Error compensation based on i5OS CNC system software is developed. In order to simplify the error detection time and efficiency, comprehensive error compensation for the straightness and the position error of the experiment are selected for major contribution. The results show that real-time numerical control system of comprehensive error feedback compensation based on i5OS improves the machining precision of CNC machine tools by more than 38%. The accuracy of the model and the effectiveness of the compensation software are verified.
 
</p></abstract><kwd-group><kwd>i5OS数控系统，机床，几何误差建模，误差补偿, i5OS CNC System</kwd><kwd> Machine Tools</kwd><kwd> Geometric Error Modeling</kwd><kwd> Error Compensation</kwd></kwd-group></article-meta></front><body><sec id="s1"><title>摘要</title><p>三轴立式加工中心是机械加工的重要装备，为提高其精度，本文利用齐次坐标变换建立了三轴立式加工中心的几何误差数学模型，开发了基于i5OS数控系统的误差补偿软件，为了简化误差检测时间和效率，选取对综合误差有主要贡献的直线度和定位误差进行补偿实验，结果表明，基于i5OS数控系统的综合误差实时性反馈补偿使数控机床的加工精度提高了38%以上，验证了模型的准确性和补偿软件的有效性。</p></sec><sec id="s2"><title>关键词</title><p>i5OS数控系统，机床，几何误差建模，误差补偿</p></sec><sec id="s3"><title>Research on Error Modeling and Compensation for Three-Axis Vertical Machining Center Based on i5OS CNC System</title><p>Zilun Wang, Chen Yin, Guangsheng Chen<sup>*</sup></p><p>School of Mechanical Engineering, University of Shanghai for Science and Technology, Shanghai</p><p><img src="//html.hanspub.org/file/12-2570303x4_hanspub.png" /></p><p>Received: Oct. 30<sup>th</sup>, 2020; accepted: Nov. 12<sup>th</sup>, 2020; published: Nov. 19<sup>th</sup>, 2020</p><p><img src="//html.hanspub.org/file/12-2570303x5_hanspub.png" /></p></sec><sec id="s4"><title>ABSTRACT</title><p>Three-axis vertical machining center is an important equipment in machining. In order to improve its precision, the geometric error mathematical model of three-axis vertical machining center is established by using homogeneous coordinate transformation. Error compensation based on i5OS CNC system software is developed. In order to simplify the error detection time and efficiency, comprehensive error compensation for the straightness and the position error of the experiment are selected for major contribution. The results show that real-time numerical control system of comprehensive error feedback compensation based on i5OS improves the machining precision of CNC machine tools by more than 38%. The accuracy of the model and the effectiveness of the compensation software are verified.</p><p>Keywords:i5OS CNC System, Machine Tools, Geometric Error Modeling, Error Compensation</p><disp-formula id="hanspub.38681-formula4"><graphic xlink:href="//html.hanspub.org/file/12-2570303x7_hanspub.png"  xlink:type="simple"/></disp-formula><p>Copyright &#169; 2020 by author(s) and Hans Publishers Inc.</p><p>This work is licensed under the Creative Commons Attribution International License (CC BY 4.0).</p><p>http://creativecommons.org/licenses/by/4.0/</p><p><img src="//html.hanspub.org/file/12-2570303x8_hanspub.png" /> <img src="//html.hanspub.org/file/12-2570303x9_hanspub.png" /></p></sec><sec id="s5"><title>1. 引言</title><p>精度是机床的重要指标，为了提高精度，“误差补偿”是目前常用的一种有效手段，所谓“误差补偿”是事先分析数控机床误差产生的机理，用数学的手段建立其误差数学模型，以此来预测机床工作时各空间位置的误差，最后利用软件处理的方式实现补偿，达到提高机床精度的目的 [<xref ref-type="bibr" rid="hanspub.38681-ref1">1</xref>]。</p><p>数控机床综合误差数学模型是将数控机床空间误差用数学手段进行表达，从而能够预测其在数控机床整个空间位置上的误差。目前，主要手段是基于多体系统理论建立数控机床空间误差的数学模型。多体系统理论方法最大的优势在于其全面性以及通用性，将数控机床运动过程中的耦合因素进行综合考虑，适用于各种运动形式的数控机床 [<xref ref-type="bibr" rid="hanspub.38681-ref2">2</xref>] [<xref ref-type="bibr" rid="hanspub.38681-ref3">3</xref>] [<xref ref-type="bibr" rid="hanspub.38681-ref4">4</xref>] [<xref ref-type="bibr" rid="hanspub.38681-ref5">5</xref>] [<xref ref-type="bibr" rid="hanspub.38681-ref6">6</xref>]。空间误差数学模型表达式的变量就是数控机床工作时的坐标值 [<xref ref-type="bibr" rid="hanspub.38681-ref7">7</xref>]。</p><p>本文首先将利用齐次坐标法对三轴立式加工中心进行误差建模方法展开研究，采用激光涉仪实现误差的检测，最后基于国产数控系统i5OS开发出误差补偿系统并对模型进行有效性验证。</p></sec><sec id="s6"><title>2. 数控机床几何误差建模</title><p>一般情况下，机床每一个移动轴均存在3项位移误差以及3项角度误差 [<xref ref-type="bibr" rid="hanspub.38681-ref3">3</xref>]，并且三个移动轴两两之间还存在1项垂直度误差。三轴立式加工中心一共存在21项几何误差元素 [<xref ref-type="bibr" rid="hanspub.38681-ref8">8</xref>]。本文采用沈阳机床i5 M1.4立式加工中心为研究对象，结构模型如图1所示，其运动形式为YXTZ型，即Y轴以及Z轴与床身固连，X轴与Y轴相连，工件台于X轴相连，而主轴以及刀具与Z轴相连。</p><p>按照多体系统理论描述为：① 刀具链分支：机床床身F→Z轴→主轴S→刀具T；② 工件链分支：机床床身F→Y轴→X轴→工件W。</p><p>以床身坐标系为参考坐标系，其刀具分支的运动链为：床身F→Z轴→主轴S→刀具T，则理想情况下，从床身坐标系到刀具坐标系齐次坐标变换关系如下：</p><p>T F T = ∏ i = Z T T i − 1 i = T F Z T Z S T S T (1)</p><p>同理，工件分支的运动链为：机床床身M→Y轴→X轴→工件W，则理想情况下，从床身坐标系到工件坐标系齐次坐标变换关系如下：</p><p>T F W = ∏ i = Y W T i − 1 i = T F Y T Y X T X W (2)</p><p>设刀尖点 t 0 在刀具坐标系中的位置坐标为 ( t x , t y , t z ) ，则理想情况下，刀尖点在工件坐标系中的位置坐标点 t w 为：</p><p>[ t w T 1 ] = T W T [ t 0 T 1 ] = [ T F W ] − 1 T F T [ t 0 T 1 ] (3)</p><p>则进一步可以得到：</p><p>[ t w T 1 ] = T X W − 1 T Y X − 1 T F Y − 1 T F Z T Z S T S T [ t 0 T 1 ] (4)</p><p>同理，在实际情况下，只需要在理想情况下齐次坐标变换过程中将各相邻体间误差矩阵引入表达式，即可得到实际情况下刀尖点在工件坐标系中的坐标点 t ′ w ，为：</p><p>[ t ′ w 1 ] = T W T Δ T W T [ t 0 T 1 ] = ( ∏ i = Y W T i − 1 i Δ T i − 1 i ) − 1 ( ∏ i = Z T T i − 1 i Δ T i − 1 i ) [ t 0 T 1 ] (5)</p><p>因此， ε n = ( ε x , ε y , ε z ) 机床空间综合误差可以表达为：</p><p>[ ε n T 0 ] = ( T i = Y T T i − 1 i ) − 1 ( T i = Z S T i − 1 i ) [ t 0 T 1 ] − ( T i = Y T T i − 1 i Δ T i − 1 i ) − 1 ( T i = Z S T i − 1 i Δ T i − 1 i ) [ t 0 T 1 ] (6)</p><p>由于单项误差元素都是微小量，忽略其高阶项，得到空间综合误差在X轴，Y轴，Z轴方向上的分量 [<xref ref-type="bibr" rid="hanspub.38681-ref3">3</xref>]：</p><p>{ ε x = − δ x x − δ y x + δ z x − y ( θ x z + θ y z − ε x y ) − z ( θ x y + θ y y + ε x z ) ε y = − δ x y − δ y y + δ z y + x θ x z + z ( θ x x + θ y x − ε y z ) ε z = − δ x z − δ y z + δ z z − x θ x y + y ( θ x x + θ y x ) (7)</p><p>由上述数控机床的综合数学模型建模过程可知，刀具切削点的空间定位精度同时受到21项误差元素的影响。在机床误差的实际补偿中，如果对这21项误差元素都进行测量与补偿，往往会导致投入的时间与经济成本比较大，补偿效率不高。实际上，不同类型的机床由于其结构类型、运动行程大小、以及运动轴定位方式的不同，所面临的关键误差是不同的。对于立式加工中心而言，由于其运动轴行程短，角偏误差的影响往往比较小，可以忽略不计，定位误差以及直线度误差对误差有主要贡献。</p><p>图1. 沈阳i5 M1.4立式加工中心。(a) 机床结构示意图；(b) 机床误差检测实验现场</p></sec><sec id="s7"><title>3. 数控机床误差测量</title><p>本文实验采用的误差测量仪器为Renishaw XL 80型激光干涉仪，对沈阳i5 M1.4立式加工中心X轴、Y轴进行误差测量。每个移动轴需要对线性定位误差以及直线度误差进行测量，需要用线性定位误差测量镜组以及直线度误差测量镜组。</p><p>实验中测量长度应为各移动轴的最长有效行程。但是受到被测数控机床结构的约束，各移动轴的测量行程分别为：X轴：0~500 mm、Y轴：−300~0 mm、Z轴：−300~0 mm。各移动轴从起始测点开始等间距选取51个测量点，且沿正、反向测量两次，再取其平均值。对于测量误差数据利用一次线性插值法进行单项误差建模。实验测量结果以及建模结果如图2所示。</p><p>图2. 实验测量结果以及建模结果。(a) X轴直线度和定位误差；(b) Y轴直线度和定位误差</p></sec><sec id="s8"><title>4. 基于i5OS数控系统的机床综合误差实时补偿</title><p>沈阳机床(上海)智能系统研发设计有限公司i5OS数控系统通过Finch高速通信组件将机床CNC参数信息提供给上层应用软件访问，在上层软件中通过Finch高速通信组件访问CNC各轴位置反馈信息，再此时各轴位置信息写入误差模型中，处理计算得到此时误差补偿值，继而将其写入Finch高速通信组件，最后写入CNC运动控制模块，完成机床误差的补偿。Finch是一个主要用于i5OS本地以及局域网访问的高速通信组件，它位于应用软件中间层，主要依赖于动态链接库libfinch.so，具有很高的开放性。该组件不限制读取的参数数据，但是会限制参数的写入，根据CNC的运行状态和授权权限来决定能够写入的参数(图3)。</p><p>图3. Finch高速通信组件通信示意图</p><p>沈机(上海)智能系统研发设计有限公司i5OS数控系统通过Finch高速通信组件将机床CNC参数信息提供给上层应用软件访问，因此，在上层软件中通过Finch高速通信组件访问CNC各轴位置反馈信息，再此时各轴位置信息写入误差模型中，处理计算得到此时误差补偿值，继而将其写入Finch高速通信组件，最后写入CNC运动控制模块，完成机床误差的补偿。补偿原理如图4所示，这种补偿方法是一种基于数控系统的动态补偿，将数控机床空间误差与数控系统结合起来，通过外部补偿软件修正数控系统中的各轴位置反馈，实现对数控机床的空间误差补偿。</p><p>图4. 基于i5OS数控系统的位置反馈修正补偿方法</p></sec><sec id="s9"><title>5. 补偿实验验证</title><p>为验证上述误差补偿方法的有效性，对沈阳i5 M1.4立式加工中心X轴以及Y轴联动时圆弧插补运动进行了一组补偿实验，实验仪器选择Renishaw QC20_W型球杆仪。</p><p>实验时球杆仪球心坐标为(170, −150, −292.578)，与主轴相连，测量半径为100 mm，X轴，Y轴进给速度设为300 mm/min，先逆时针方向再顺时针方向旋转360度，完成正向与反向圆弧插补运动的误差检测。</p><p>按照JIS B 6190-4:2008版本的标准分析补偿前后球杆仪所测的误差数据，两次测量所得的运动误差轨迹及其圆度偏差分析分别如图5与图6所示。补偿前，XY平面内的圆弧轨迹最大圆度误差为17.9 μm，X轴、Y轴的垂直度误差为0.0934 μm/mm；补偿后XY平面内圆弧轨迹的最大圆度误差为10.3 μm，X，Y轴的垂直度误差为0.0576 μm/mm。最大圆度误差补偿率为42.45%，垂直度误差补偿率为38.33%。</p><p>图5. 补偿前圆弧轨迹精度</p><p>图6. 补偿后圆弧轨迹精度</p><p>表1显示了沈阳i5 M1.4立式加工中心在XY平面内圆弧插补运动在补偿前后的整体效果。</p><table-wrap id="table1" ><label><xref ref-type="table" rid="table1">Table 1</xref></label><caption><title> Overall effect of circular interpolation before and after motion compensatio</title></caption><table><tbody><thead><tr><th align="center" valign="middle" >误差项</th><th align="center" valign="middle" >补偿前</th><th align="center" valign="middle" >补偿后</th><th align="center" valign="middle" >提高百分比</th></tr></thead><tr><td align="center" valign="middle" >最大圆度误差</td><td align="center" valign="middle" >17.9 μm</td><td align="center" valign="middle" >10.3 μm</td><td align="center" valign="middle" >42.45%</td></tr><tr><td align="center" valign="middle" >垂直度误差</td><td align="center" valign="middle" >0.0934 μm/mm</td><td align="center" valign="middle" >0.0576 μm/mm</td><td align="center" valign="middle" >38.33%</td></tr></tbody></table></table-wrap><p>表1. 圆弧插补运动补偿前后的整体效果</p></sec><sec id="s10"><title>6. 结论</title><p>通过齐次坐标转换的数学方法，以沈阳机床立式加工中心为研究对象，建立了21项误差组成的机床误差综合模型，利用机床厂商提供的接口文件，开发出基于i5OS数控系统的误差综合实时补偿系统，为了简化误差检测过程、节省时间和提高效率，选取对综合误差有主要贡献的直线度和定位误差进行补偿实验，结果表明，基于i5OS数控系统的综合误差实时性反馈补偿使数控机床的加工精度提高了38%以上，验证了模型的准确性和补偿软件的有效性。</p></sec><sec id="s11"><title>基金项目</title><p>国家重点研发计划(2017YFB1104602)，典型硬脆构件的超快激光精密制造技术及装备。</p></sec><sec id="s12"><title>文章引用</title><p>王梓伦,印 晨,陈光胜. 基于i5OS数控系统的三轴立式加工中心误差建模及补偿研究Research on Error Modeling and Compensation for Three-Axis Vertical Machining Center Based on i5OS CNC System[J]. 建模与仿真, 2020, 09(04): 535-541. https://doi.org/10.12677/MOS.2020.94052</p></sec><sec id="s13"><title>参考文献</title></sec></body><back><ref-list><title>References</title><ref id="hanspub.38681-ref1"><label>1</label><mixed-citation publication-type="other" xlink:type="simple">杨建国. 数控机床误差补偿技术现状与展望[J]. 航空制造技术, 2012(5): 40-45.</mixed-citation></ref><ref id="hanspub.38681-ref2"><label>2</label><mixed-citation publication-type="other" xlink:type="simple">章青, 王国锋, 刘又午, 赵宏林, 盛伯浩. 数控机床误差补偿技术及应用——几何误差补偿技术[J]. 制造技术与机床, 1999(1): 33-34.</mixed-citation></ref><ref id="hanspub.38681-ref3"><label>3</label><mixed-citation publication-type="other" xlink:type="simple">章青, 陈明娟, 赵小松, 赵宏林, 盛伯浩, 方沂, 张铁诚. 数控机床误差补偿技术及应用测头系统——误差分析和补偿技术[J]. 制造技术与机床, 1999(5): 35-37.</mixed-citation></ref><ref id="hanspub.38681-ref4"><label>4</label><mixed-citation publication-type="other" xlink:type="simple">刘又午, 章青, 王国锋, 盛伯浩, 赵宏林. 数控机床误差补偿技术及应用发展动态及展望[J]. 制造技术与机床, 1998(12): 8-9.</mixed-citation></ref><ref id="hanspub.38681-ref5"><label>5</label><mixed-citation publication-type="other" xlink:type="simple">任永强, 杨建国, 窦小龙, 邓卫国. 五轴数控机床综合误差建模分析[J]. 上海交通大学学报, 2003(1): 70-75.</mixed-citation></ref><ref id="hanspub.38681-ref6"><label>6</label><mixed-citation publication-type="other" xlink:type="simple">王秀山, 杨建国, 闫嘉钰. 基于多体系统理论的五轴机床综合误差建模技术[J]. 上海交通大学学报, 2008(5): 761-764.</mixed-citation></ref><ref id="hanspub.38681-ref7"><label>7</label><mixed-citation publication-type="other" xlink:type="simple">朱赤洲. 数控机床三维空间误差建模及补偿技术研究[D]: [硕士学位论文]. 南京: 南京航空航天大学, 2012.</mixed-citation></ref><ref id="hanspub.38681-ref8"><label>8</label><mixed-citation publication-type="other" xlink:type="simple">赵家黎, 张体伟, 吴丽媛. 基于PMAC数控系统的机床综合误差补偿研究[J]. 机械设计与制造工程, 2019, 48(9): 85-88.</mixed-citation></ref></ref-list></back></article>