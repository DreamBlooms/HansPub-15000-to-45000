<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE article  PUBLIC "-//NLM//DTD Journal Publishing DTD v3.0 20080202//EN" "http://dtd.nlm.nih.gov/publishing/3.0/journalpublishing3.dtd"><article xmlns:mml="http://www.w3.org/1998/Math/MathML" xmlns:xlink="http://www.w3.org/1999/xlink" dtd-version="3.0" xml:lang="en" article-type="research article"><front><journal-meta><journal-id journal-id-type="publisher-id">CSA</journal-id><journal-title-group><journal-title>Computer Science and Application</journal-title></journal-title-group><issn pub-type="epub">2161-8801</issn><publisher><publisher-name>Scientific Research Publishing</publisher-name></publisher></journal-meta><article-meta><article-id pub-id-type="doi">10.12677/CSA.2021.117194</article-id><article-id pub-id-type="publisher-id">CSA-43934</article-id><article-categories><subj-group subj-group-type="heading"><subject>CSA20210700000_13099808.pdf</subject></subj-group><subj-group subj-group-type="Discipline-v2"><subject>信息通讯</subject></subj-group></article-categories><title-group><article-title>
 
 
  基于荧光响应的罗非鱼去鳞质量视觉检测方法研究
  Research on Visual Detection Method of Tilapia Descaling Quality Based on Fluorescence Response
 
</article-title></title-group><contrib-group><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>朱</surname><given-names>鑫宇</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>李</surname><given-names>朋朋</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>邱</surname><given-names>新静</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>张</surname><given-names>春旭</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>王</surname><given-names>慧慧</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib></contrib-group><aff id="aff2"><addr-line>大连工业大学机械工程与自动化学院，辽宁 大连</addr-line></aff><aff id="aff1"><addr-line>null</addr-line></aff><pub-date pub-type="epub"><day>08</day><month>07</month><year>2021</year></pub-date><volume>11</volume><issue>07</issue><fpage>1896</fpage><lpage>1905</lpage><permissions><copyright-statement>&#169; Copyright  2014 by authors and Scientific Research Publishing Inc. </copyright-statement><copyright-year>2014</copyright-year><license><license-p>This work is licensed under the Creative Commons Attribution International License (CC BY). http://creativecommons.org/licenses/by/4.0/</license-p></license></permissions><abstract><p>
 
 
   
   罗非鱼前处理过程中去鳞残留直接影响罗非鱼外观品质和商业价值，现有的检测方法具有线下分散性操作以及依赖人工经验的特点，无法满足大规模生产线作业要求。为实现快速、无损的罗非鱼去鳞质量检测，利用去鳞区域与未去鳞区域在360~370 nm波段紫外线下的不同荧光响应，通过罗非鱼加工质量在线监测系统采集图像信息，提取去鳞区域与未去鳞区域的颜色特征，采用主成分分析进行特征的降维与融合。将主成分值作为模型输入，选择卷积神经网络(CNN)，构建罗非鱼去鳞质量检测模型，模型准确度97.5%、精确率98.3%、灵敏度96.7%。该方法在罗非鱼去鳞质量检测应用中具有一定潜力，可为开发实时在线检测装备提供参考。 The descaling residues in the pretreatment of tilapia directly affect the appearance quality and commercial value of tilapia. The existing detection methods have the characteristics of decentralized operation and relying on manual experience, which cannot meet the requirements of large-scale production lines. In order to achieve fast and nondestructive detection of tilapia descaling, the different fluorescence responses of descaling area and undescaled area under ultraviolet range of 360~370 nm band were used to collect image information through the online monitoring system of tilapia processing quality, and the color characteristics of descaled area and undescaled area were extracted. Principal component analysis was used for feature dimensionality redution and fusion. The principal component values were taken as the input of the model, and the convolutional neural network (CNN) was selected to construct the tilapia descaling detection model. The detection Accuracy can reach 97.5%, Precision is 98.3% and Sensitive is 96.7%. This method has certain potential in tilapia descaling detection application, and can provide a reference for the development of real-time online detection equipment. 
  
 
</p></abstract><kwd-group><kwd>罗非鱼，荧光响应，颜色特征，主成分分析，卷积神经网络, Tilapia</kwd><kwd> Fluorescence Response</kwd><kwd> Color Characteristics</kwd><kwd> Principal Component Analysis</kwd><kwd> Convolutional Neural Network</kwd></kwd-group></article-meta></front><body><sec id="s1"><title>摘要</title><p>罗非鱼前处理过程中去鳞残留直接影响罗非鱼外观品质和商业价值，现有的检测方法具有线下分散性操作以及依赖人工经验的特点，无法满足大规模生产线作业要求。为实现快速、无损的罗非鱼去鳞质量检测，利用去鳞区域与未去鳞区域在360~370 nm波段紫外线下的不同荧光响应，通过罗非鱼加工质量在线监测系统采集图像信息，提取去鳞区域与未去鳞区域的颜色特征，采用主成分分析进行特征的降维与融合。将主成分值作为模型输入，选择卷积神经网络(CNN)，构建罗非鱼去鳞质量检测模型，模型准确度97.5%、精确率98.3%、灵敏度96.7%。该方法在罗非鱼去鳞质量检测应用中具有一定潜力，可为开发实时在线检测装备提供参考。</p></sec><sec id="s2"><title>关键词</title><p>罗非鱼，荧光响应，颜色特征，主成分分析，卷积神经网络</p></sec><sec id="s3"><title>Research on Visual Detection Method of Tilapia Descaling Quality Based on Fluorescence Response<sup> </sup></title><p>Xinyu Zhu, Pengpeng Li, Xinjing Qiu, Chunxu Zhang, Huihui Wang<sup>*</sup></p><p>School of Mechanical Engineering and Automation, Dalian Polytechnic University, Dalian Liaoning</p><p><img src="//html.hanspub.org/file/6-1542230x5_hanspub.png?20210720083252964" /></p><p>Received: Jun. 12<sup>th</sup>, 2021; accepted: Jul. 9<sup>th</sup>, 2021; published: Jul. 19<sup>th</sup>, 2021</p><p><img src="//html.hanspub.org/file/6-1542230x6_hanspub.png?20210720083252964" /></p></sec><sec id="s4"><title>ABSTRACT</title><p>The descaling residues in the pretreatment of tilapia directly affect the appearance quality and commercial value of tilapia. The existing detection methods have the characteristics of decentralized operation and relying on manual experience, which cannot meet the requirements of large-scale production lines. In order to achieve fast and nondestructive detection of tilapia descaling, the different fluorescence responses of descaling area and undescaled area under ultraviolet range of 360~370 nm band were used to collect image information through the online monitoring system of tilapia processing quality, and the color characteristics of descaled area and undescaled area were extracted. Principal component analysis was used for feature dimensionality redution and fusion. The principal component values were taken as the input of the model, and the convolutional neural network (CNN) was selected to construct the tilapia descaling detection model. The detection Accuracy can reach 97.5%, Precision is 98.3% and Sensitive is 96.7%. This method has certain potential in tilapia descaling detection application, and can provide a reference for the development of real-time online detection equipment.</p><p>Keywords:Tilapia, Fluorescence Response, Color Characteristics, Principal Component Analysis, Convolutional Neural Network</p><disp-formula id="hanspub.43934-formula73"><graphic xlink:href="//html.hanspub.org/file/6-1542230x7_hanspub.png?20210720083252964"  xlink:type="simple"/></disp-formula><p>Copyright &#169; 2021 by author(s) and Hans Publishers Inc.</p><p>This work is licensed under the Creative Commons Attribution International License (CC BY 4.0).</p><p>http://creativecommons.org/licenses/by/4.0/</p><p><img src="//html.hanspub.org/file/6-1542230x8_hanspub.png?20210720083252964" /> <img src="//html.hanspub.org/file/6-1542230x9_hanspub.png?20210720083252964" /></p></sec><sec id="s5"><title>1. 引言</title><p>罗非鱼富含蛋白质、维生素、多不饱和脂肪酸以及人体必需的矿物质和微量元素 [<xref ref-type="bibr" rid="hanspub.43934-ref1">1</xref>] [<xref ref-type="bibr" rid="hanspub.43934-ref2">2</xref>]。据联合国粮农组织(FAO)统计，2020年全球共有143个国家和地区养殖罗非鱼，其中，中国的罗非鱼养殖与加工主要集中在广东、广西地区 [<xref ref-type="bibr" rid="hanspub.43934-ref3">3</xref>]。目前，罗非鱼前处理加工工序主要包括去鳞、去脏、清洗和切片等。去鳞工序是鱼前处理加工的首要环节，去鳞过程鱼鳞去除不完全导致的去鳞残留物会直接影响罗非鱼外观品质和商业价值 [<xref ref-type="bibr" rid="hanspub.43934-ref4">4</xref>] [<xref ref-type="bibr" rid="hanspub.43934-ref5">5</xref>]。水射流式去鳞和机械摩擦去鳞法效率高，适合应用于流水线作业，并且能通过控制水射流输出压力或刀具角度等实现不同偏好的去鳞作业 [<xref ref-type="bibr" rid="hanspub.43934-ref6">6</xref>] [<xref ref-type="bibr" rid="hanspub.43934-ref7">7</xref>]，在实际生产中被广泛应用。但上述去鳞方式在加工量大，处理速度较快时，会出现鱼体局部鱼鳞未能彻底去除的情况发生。现有去鳞检测方法采用硫酸纸检测，该方法具有线下分散性操作以及依赖人工经验的特点，无法满足大规模生产线作业要求，且检测时间长，受主观因素影响较大 [<xref ref-type="bibr" rid="hanspub.43934-ref8">8</xref>]。因此亟需一种快速、非破坏性的检测方法实现去鳞质量的监测。</p><p>近年来，随着光学仪器和传感器技术的发展，机器视觉因其具有无损、非接触等特点，越来越多地被应用于食品快速、无损检测研究 [<xref ref-type="bibr" rid="hanspub.43934-ref9">9</xref>]，在肉类表观品质鉴评、脂肪含量和适口性预测，水果自动分级等方面取得了较好的效果 [<xref ref-type="bibr" rid="hanspub.43934-ref10">10</xref>]。在鱼类的检测中，基于机器视觉技术，Shi Ce等 [<xref ref-type="bibr" rid="hanspub.43934-ref11">11</xref>] 开发了一种机器视觉系统，用于罗非鱼4℃贮存期间基于瞳孔和鳃颜色变化对挥发性盐基氮(total volatile basic nitrogen, TVB-N)含量、TBA值和菌落总数(total viable count, TVC)进行建模和预测。马商牟司等 [<xref ref-type="bibr" rid="hanspub.43934-ref12">12</xref>] 利用机器视觉提出了一种抗畸变性强的鱼轮廓检测方法。Costa等 [<xref ref-type="bibr" rid="hanspub.43934-ref13">13</xref>] 开发了一种先进的鱼类新鲜度颜色评定方法，通过采用形态叠加法进行图像分析，获得了新鲜度判别区域，结果量化了鲜鱼和非鲜鱼的显著比色差异。目前，基于机器视觉的罗非鱼去鳞质量检测研究未见报道。鱼鳞在可见光下呈现半透明状，人眼很难分辨，现有的检测技术大都在可见光下进行，并不适合鱼鳞的检测。由于鱼鳞、鱼皮和鱼肉的特殊生物性状差异，在荧光激发下图像特征差异明显，如能考虑从不同的荧光响应入手，结合机器视觉技术，可实现去鳞质量智能检测。荧光响应是一种短波紫外线照射荧光物质后，荧光物质在长波段发光的现象 [<xref ref-type="bibr" rid="hanspub.43934-ref14">14</xref>]。通过荧光响应进行物质特性分析，具有灵敏度高、选择性强等特点，在食品品质鉴评方面中得到了广泛应用 [<xref ref-type="bibr" rid="hanspub.43934-ref15">15</xref>]，例如刘凯琪等 [<xref ref-type="bibr" rid="hanspub.43934-ref16">16</xref>] 分析不同种类淀粉荧光响应光谱，实现了淀粉种类的分类。He Yu等 [<xref ref-type="bibr" rid="hanspub.43934-ref17">17</xref>] 基于荧光响应实现了梨和大白菜中有机磷农药残留检测。Huan Liu等 [<xref ref-type="bibr" rid="hanspub.43934-ref18">18</xref>] 通过荧光光谱测定实现了牛肉的化学成分与新鲜度。在鱼类的检测研究中，殷勇等 [<xref ref-type="bibr" rid="hanspub.43934-ref19">19</xref>] 利用荧光光谱鉴别不同冷藏时间的大黄鱼鲜度；孟璐等 [<xref ref-type="bibr" rid="hanspub.43934-ref20">20</xref>] 采用荧光PCR定量检测鲐鱼贮藏过程中微生物及品质变化，为本研究方法的开发提供了思路和理论基础。</p><p>本研究的主要目的是探索荧光激发下基于机器视觉技术实现罗非鱼去鳞质量检测的方法和潜力，主要内容包括：提出适合荧光激发下罗非鱼去鳞质量检测的图像预处理算法；构建基于统计分析的颜色特征提取方法；采用主成分分析实现检测数据的降维与融合，在此基础上，建立基于卷积神经网络的罗非鱼去鳞质量检测模型，实现罗非鱼去鳞效果的快速、无损检测。</p></sec><sec id="s6"><title>2. 材料与方法</title><sec id="s6_1"><title>2.1. 罗非鱼样品制备</title><p>实验用罗非鱼购置于中国茂名鸿业水产有限公司，重量范围500~600 g。将购买的罗非鱼在冰冻条件下迅速运回实验室，采用流水解冻法 [<xref ref-type="bibr" rid="hanspub.43934-ref21">21</xref>]，解冻时间5 min。随机选择80条罗非鱼采用手握式电动去鳞器去鳞，调整去鳞刀片角度，随机对鱼体表面进行去鳞。用吸水纸吸干表面水分，放入密封袋保存。</p></sec><sec id="s6_2"><title>2.2. 罗非鱼加工质量在线监测系统</title><p>采用罗非鱼加工质量在线监测系统获取罗非鱼图像信息，如图1所示，该系统采用模块化设计，利用360~370 nm的紫外波段激发鱼鳞中的小分子染料或结构色产生荧光，并以边沿触发模式自动采集图像。系统主要包括：传送台、伺服电机、条形荧光光源、滤光片、工业相机和控制模块。将样品置于传送台上送至图像采集区，条形荧光光源与水平线呈45˚角照射待测样品，通过工业相机进行图像采集。系统参数设置为：样品间距10 cm、图像位深24、物距350 mm、图像分辨率1280 &#215; 720、帧频60 fps、光源波段范围360~370 nm、滤波片中心波长(CWL) 365 nm、传送台移动速度0.23 m/s。</p><p>图1. 罗非鱼加工质量在线监测系统</p></sec><sec id="s6_3"><title>2.3. 图像预处理与ROI提取</title><p>为减少仪器噪音、实验环境等因素对采集图像的影响，将采集的图像进行预处理，预处理过程包括：去噪声、背景分割、干扰区剔除、二值化、形态学处理。采用中值滤波器消除图像中孤立的噪声点，滤波器窗口大小为3 &#215; 3 pixel<sup>2</sup> [<xref ref-type="bibr" rid="hanspub.43934-ref22">22</xref>]；由于图像数据量较大，且存在噪声、背景等信息的干扰，为保证精确提取与去鳞效果相关的图像特征，需对背景、干扰区进行分割与剔除。基于本文的研究目标，背景定义为蓝色传送台，干扰区定义为鱼头、鱼尾和鱼鳍(背鳍、臀鳍)。根据实验研究，选择颜色阈值T<sub>1</sub>、T<sub>2</sub>和T<sub>3</sub>剔除背景、背鳍和臀鳍，掩模1、掩模2剔除鱼头和鱼尾，获得鱼体图像。T<sub>1</sub>、T<sub>2</sub>和T<sub>3</sub>满足公式如下：</p><p>T 1 = B − G ≤ 8 (1)</p><p>T 2 = R ≤ 6 0 | | B − G ≤ 15 (2)</p><p>T 3 = R ≤ 75 | | B − G ≤ 1 0 (3)</p><p>式中，R、G、B为图像红、绿、蓝三个通道的颜色值。</p><p>设采集的原始图像中罗非鱼面积大小为L pixel &#215; M pixel，根据样本统计分析，掩模1选择以鱼嘴为圆心，半径R = 0.2 L的圆形掩模；掩模2选择以鱼尾为基准点，沿鱼头方向的矩形掩模，大小为0.25 L &#215; M。选用Otsu实现图像的阈值分割 [<xref ref-type="bibr" rid="hanspub.43934-ref23">23</xref>]，获得鱼体的二值图像；在此基础上，通过形态学处理平滑二值图像轮廓；本文利用膨胀与腐蚀算法，消除鱼体轮廓狭窄的缺口与空洞，填补轮廓上的空隙，其中，膨胀算法取半径为2 pixel的圆形结构元素，腐蚀算法取边长为1 pixel的方形结构元素 [<xref ref-type="bibr" rid="hanspub.43934-ref24">24</xref>]；以二值图像轮廓为掩模，获得完整的鱼体区域。图像预处理后，选择样品表面去鳞区域(S<sub>1</sub>)和未去鳞区域(S<sub>2</sub>)为感兴趣区域(ROI)进行后续处理。本文利用Matlab 2020 (Matrix Laboratory, USA)进行图像预处理和ROI提取。</p></sec><sec id="s6_4"><title>2.4. 颜色特征提取</title><p>颜色特征是图像固有特征之一，具有对图像(尺寸、方向、视角)依赖性小、鲁棒性高等特点，在图像检索方面应用广泛 [<xref ref-type="bibr" rid="hanspub.43934-ref25">25</xref>] [<xref ref-type="bibr" rid="hanspub.43934-ref26">26</xref>]。颜色特征主要包括亮度、色调和饱和度，为全面反映罗非鱼荧光图像的颜色信息，在真彩图像颜色空间下提取ROI区域的11种颜色特征，为使选取的区域具有一定代表性，选择鱼背、鱼腹、鱼尾处进行提取。其中，S<sub>1</sub>选择200个图像块(1*1 piexl<sup>2</sup>)，S<sub>2</sub>选择200个图像块(1*1 piexl<sup>2</sup>)，计算公式如下所示：</p><p>C 1 = R (4)</p><p>C 2 = G (5)</p><p>C 3 = B (6)</p><p>C 4 = R − G R + G (7)</p><p>C 5 = G − B G + R (8)</p><p>C 6 = B − R B + R (9)</p><p>C 7 = R B (10)</p><p>C 8 = G B (11)</p><p>C 9 = B R (12)</p><p>C 10 = 2 R − G − B 4 (13)</p><p>C 11 = R + G + B 3 (14)</p><p>式中，R、G、B为图像红、绿、蓝三个通道的颜色值。</p></sec><sec id="s6_5"><title>2.5. 特征降维与融合</title><p>上述11个颜色特征(C1-C11)之间存在一定的相关性，如果不做任何处理直接将以上颜色特征全部作为分类的参数，会存在一部分重叠和冗余的数据。本研究采用主成分分析进行特征降维，降低数据处理的计算量、复杂性和处理时间，同时实现颜色特征的融合。主成分分析是一种多元统计分析方法，通过正交变换用相关性较小的变量代替原来的变量，所得结果按投影方差大小顺序排列，方差越大包含的信息越多，少数主成分即可代表大部分原始数据信息 [<xref ref-type="bibr" rid="hanspub.43934-ref27">27</xref>] [<xref ref-type="bibr" rid="hanspub.43934-ref28">28</xref>]。当主成分的方差累积贡献率值达到99.99%以上，即可代替原多个变量 [<xref ref-type="bibr" rid="hanspub.43934-ref29">29</xref>]。</p></sec><sec id="s6_6"><title>2.6. 罗非鱼去鳞质量检测模型</title><p>近年来，机器学习在肉类表观品质鉴评、脂肪含量和适口性预测，水果自动分级、食品掺假识别等方面取得了较好的效果 [<xref ref-type="bibr" rid="hanspub.43934-ref30">30</xref>]。卷积神经网络(CNN)是一种包含卷积计算且具有深度结构的前馈神经网络，能自动提取图像特征，并对图像的位移、缩放和扭曲等变形具有良好的适应性，是机器学习的代表性算法之一 [<xref ref-type="bibr" rid="hanspub.43934-ref31">31</xref>] [<xref ref-type="bibr" rid="hanspub.43934-ref32">32</xref>]。本文面向颜色特征，建立基于卷积神经网络的罗非鱼去鳞质量检测模型。如图2所示，原始图像特征降维融合后的主成分依次进入输入层、C1卷积层、P2池化层、C3卷积层、P4池化层，最后进入全连接层进行概率空间映射，输出每种图像块的置信度，从而给出分类结果。本研究CNN模型有2个卷积层，卷积层中的卷积核尺寸均为1 &#215; 2，卷积核的移动步幅为2个像素，卷积后图像的尺寸变为一半，每个卷积层中的卷积核通道数不固定，C1卷积层中卷积核通道数为4，C3卷积层中卷积核通道数为8。池化层采用最大池化法，P2池化层的窗口大小1 &#215; 2，步幅取2，P4池化层的窗口大小1 &#215; 1，步幅取1。全连接层中进行概率空间映射，输出类别标签的概率，其中，S<sub>1</sub>对应标签为1，S<sub>2</sub>对应标签为2。由于识别的是多类别图像，故使用多类别交叉熵 [<xref ref-type="bibr" rid="hanspub.43934-ref33">33</xref>] 作为损失函数，计算公式如下所示：</p><p>l = − 1 N ∑ n i ∑ k i t n k l g y n k (15)</p><p>式中，l为损失函数，N为样本数，本研究N = 280，t<sub>nk</sub>为第n个样本的第k个属性的真实值，采用one-hot编码，y<sub>nk</sub>为第n个样本的第k个属性的预测值。</p><p>图2. 罗非鱼去鳞质量检测模型</p><p>CNN模型训练过程如图3所示，用于建立罗非鱼去鳞质量检测模型的图像块共400幅，其中，S<sub>1</sub>区域为200幅，S<sub>2</sub>区域为200幅。训练集和预测集比例为7:3，即选择280幅图像块用于建立模型的训练集(S<sub>1</sub> = 140，S<sub>2</sub> = 140)，120幅图像块用于建立模型预测集(S<sub>1</sub> = 60，S<sub>2</sub> = 60)。训练集采用随机生成器，通过数据流的形式，从训练样本中每次随机提取20个样本参与训练。模型初始化参数设置中初始学习率取0.0001，迭代次数取100，提取的样本参与一次梯度下降的参数更新。CNN通过前向传播训练神经元，最后采用动量梯度下降法(SGDM) [<xref ref-type="bibr" rid="hanspub.43934-ref34">34</xref>] 优化损失函数，SGDM是一种利用动量参数(γ)构造指数加权平均数，加权平均后现有梯度代替原梯度进行参数更新的快速收敛算法。本研究采用“早停”技术 [<xref ref-type="bibr" rid="hanspub.43934-ref35">35</xref>] 防止过拟合，即随着迭代轮数的增加，验证误差上升，则停止训练，将停止之后的权重作为模型的最终参数。</p><p>图3. 模型训练过程</p><p>本文通过准确度(Accuracy)、精确率(Precision)、灵敏度(Sensitive)对模型进行评价。其中Accuracy表示模型对S<sub>1</sub>、S<sub>2</sub>整体判别正确的能力，Precision表示模型的判别正确的可信度，Sensitive表示图像块识别中实际和预测结果一致的比例。其中，Accuracy &gt; 80%，说明该方法可以用于实际应用，Accuracy &gt; 95%说明该方法具有优秀的去鳞质量检测能力，Precision和Sensitive大于95%，说明该方法预测准确且可信度高。评价参数计算过程如下式所示：</p><p>Accuracy = TP + TN TP + TN + FP + FN (16)</p><p>Precision = TP TP + FP (17)</p><p>Sensitive = TP TP + FN (18)</p><p>式中，TP表示正确检测出该图像块类别数量，TN表示未正确检测出图像块类别数量，FP表示去鳞图像块(S<sub>1</sub>)被检测为未去鳞图像块(S<sub>2</sub>)数量，FN表示未去鳞图像块(S<sub>2</sub>)被检测为去鳞图像块(S<sub>1</sub>)数量。本研究预测集的N = 120。</p></sec></sec><sec id="s7"><title>3. 结果与讨论</title><sec id="s7_1"><title>3.1. 图像处理过程与结果</title><p>ROI提取效果的好坏直接影响特征提取和目标识别的精度，是图像分析和判别中最重要的步骤之一。图4所示为图像处理过程和结果。原始图像(图4(a))经中值滤波后(图4(b))，消除了部分噪声，在一定程度上提高了图像质量；如图4(c)所示，颜色阈值T<sub>1</sub>去除了大部分的背景信息干扰。掩模2、掩模1剔除干扰区中鱼尾(图4(d))与鱼头(图4(e))，但干扰区中背鳍和臀鳍面积较大，不利于后续去鳞检测，如图4(f)所示，采用颜色阈值T<sub>2</sub>、T<sub>3</sub>剔除背鳍和臀鳍。如图4(g)所示，Otsu法分割后的图像去除了大部分干扰，但鱼体轮廓出现凹坑和突刺，经膨胀腐蚀后在一定程度上平滑图像轮廓，消除了由于光照、采集设备等对轮廓造成的影响(图4(h))；最终，以二值图像轮廓为掩模，获得完整的鱼体区域(图4(i))。</p><p>图4. 图像处理过程</p></sec><sec id="s7_2"><title>3.2. 特征的提取与分析</title><p>提取2.4所述11个颜色特征值进行主成分分析，颜色特征数据的主成分特征值和方差累计贡献率如表1所示，主成分PC1、PC2、PC3、PC4、PC5和PC6方差累积贡献率已达99.99%，说明上述六个主成分可以代替颜色特征数据的99.99%的变量信息，因此选取PC1~PC6六个主成分进行后续分析。</p><table-wrap id="table1" ><label><xref ref-type="table" rid="table1">Table 1</xref></label><caption><title> Principal component figure PC1-PC6 cumulative contribution rat</title></caption><table><tbody><thead><tr><th align="center" valign="middle" >PC</th><th align="center" valign="middle" >特征值λ</th><th align="center" valign="middle" >累积贡献率(%)</th></tr></thead><tr><td align="center" valign="middle" >PC1</td><td align="center" valign="middle" >10.118</td><td align="center" valign="middle" >91.984</td></tr><tr><td align="center" valign="middle" >PC2</td><td align="center" valign="middle" >0.758</td><td align="center" valign="middle" >98.877</td></tr><tr><td align="center" valign="middle" >PC3</td><td align="center" valign="middle" >0.099</td><td align="center" valign="middle" >99.777</td></tr><tr><td align="center" valign="middle" >PC4</td><td align="center" valign="middle" >0.022</td><td align="center" valign="middle" >99.981</td></tr><tr><td align="center" valign="middle" >PC5</td><td align="center" valign="middle" >0.002</td><td align="center" valign="middle" >99.997</td></tr><tr><td align="center" valign="middle" >PC6</td><td align="center" valign="middle" >0.0001</td><td align="center" valign="middle" >99.999</td></tr></tbody></table></table-wrap><p>表1. 主成分图PC1~PC6累积贡献率</p></sec><sec id="s7_3"><title>3.3. 罗非鱼去鳞质量检测模型</title><p>图5为CNN模型训练结果。为避免过拟合和欠拟合，采用动量梯度下降法(SGDM)对神经网络的权重(W)和偏置(b)进行优化，通过5折交叉验证所得分类识别准确率构造模型准确度曲线(图5(a))，值越高表明模型识别越准确。图5(b)为损失函数曲线l，当预测值与真实值越接近，损失函数值越低 [<xref ref-type="bibr" rid="hanspub.43934-ref36">36</xref>]。CNN模型经过100次迭代，准确率达到99.99%，损失降至1.2 &#215; 10<sup>−30</sup>。训练结果表明，模型性能优异，可用于后续预测集验证。基于颜色特征的罗非鱼去鳞质量检测模型预测集混淆矩阵如表2所示。模型显示，去鳞区域(S<sub>1</sub>)中，59幅预测正确，1幅误判为未去鳞区域(S<sub>2</sub>)；未去鳞区域(S<sub>2</sub>)中，58幅预测正确，2幅误判为去鳞区域(S<sub>1</sub>)，模型的准确度 &gt;95%，说明该模型在进行去鳞判别时具有较优的判别效果。精确率和灵敏度均大于95%，说明该方法对有鳞图像块(S<sub>1</sub>)、无鳞图像块(S<sub>2</sub>)均具有较好的识别效果。</p><p>图5. 模型训练结果</p><table-wrap id="table2" ><label><xref ref-type="table" rid="table2">Table 2</xref></label><caption><title> Model confusion matrix for quality detection of tilapia descaling based on color featur</title></caption><table><tbody><thead><tr><th align="center" valign="middle"  colspan="5"  >预测结果</th></tr></thead><tr><td align="center" valign="middle"  rowspan="3"  >实际结果</td><td align="center" valign="middle" ></td><td align="center" valign="middle" >去鳞区域(S<sub>1</sub>)</td><td align="center" valign="middle"  colspan="2"  >未去鳞区域(S<sub>2</sub>)</td></tr><tr><td align="center" valign="middle" >去鳞区域(S<sub>1</sub>)</td><td align="center" valign="middle" >59</td><td align="center" valign="middle"  colspan="2"  >1</td></tr><tr><td align="center" valign="middle" >未去鳞区域(S<sub>2</sub>)</td><td align="center" valign="middle" >2</td><td align="center" valign="middle"  colspan="2"  >58</td></tr><tr><td align="center" valign="middle"  rowspan="2"  >模型评价</td><td align="center" valign="middle" >准确度(Accuracy)</td><td align="center" valign="middle" >精确率(Precision)</td><td align="center" valign="middle" >灵敏度(Sensitive)</td><td align="center" valign="middle" >运行时间(Time)</td></tr><tr><td align="center" valign="middle" >97.5%</td><td align="center" valign="middle" >98.3%</td><td align="center" valign="middle" >96.7%</td><td align="center" valign="middle" >1.06s</td></tr></tbody></table></table-wrap><p>表2. 基于颜色特征的罗非鱼去鳞质量检测模型预测集混淆矩阵</p></sec></sec><sec id="s8"><title>4. 结论</title><p>为了实现快速、无损的罗非鱼去鳞质量检测，提取去鳞区域(S<sub>1</sub>)、未去鳞区域(S<sub>2</sub>)的11种颜色特征，经过主成分分析对颜色特征降维与融合，结合卷积神经网络(CNN)，建立罗非鱼去鳞质量检测模型，模型准确度97.5%、精确率98.3%、灵敏度96.7%、程序运行时间1.06 s，说明基于上述方法进行罗非鱼去鳞质量检测是具有一定潜力的。</p></sec><sec id="s9"><title>基金项目</title><p>本项目受国家重点研发计划项目(2018YFD0700905)，辽宁省自然科学基金项目(2020-MS-273)资助。</p></sec><sec id="s10"><title>文章引用</title><p>朱鑫宇,李朋朋,邱新静,张春旭,王慧慧. 基于荧光响应的罗非鱼去鳞质量视觉检测方法研究Research on Visual Detection Method of Tilapia Descaling Quality Based on Fluorescence Response[J]. 计算机科学与应用, 2021, 11(07): 1896-1905. https://doi.org/10.12677/CSA.2021.117194</p></sec><sec id="s11"><title>参考文献</title></sec></body><back><ref-list><title>References</title><ref id="hanspub.43934-ref1"><label>1</label><mixed-citation publication-type="other" xlink:type="simple">秦培文, 李瑞伟, 王辉, 黄翔鹄, 宋文东. 四种罗非鱼肌肉氨基酸组成及营养价值评定[J]. 食品研究与开发, 2010, 31(2): 173-176.</mixed-citation></ref><ref id="hanspub.43934-ref2"><label>2</label><mixed-citation publication-type="other" xlink:type="simple">程亚美, 赵金良, 宋凌元, 吴红岩, 周昊天. 盐度、碱度对尼罗罗非鱼生长和肌肉品质的影响[J]. 水产科学, 2020, 39(3): 341-349.</mixed-citation></ref><ref id="hanspub.43934-ref3"><label>3</label><mixed-citation publication-type="other" xlink:type="simple">王煜坤, 郝淑贤, 李来好, 杨贤庆, 黄卉, 魏涯, 等. 不同地区、品种及养殖模式罗非鱼营养差异分析[J]. 食品工业科技, 2018, 39(12): 231-237.</mixed-citation></ref><ref id="hanspub.43934-ref4"><label>4</label><mixed-citation publication-type="other" xlink:type="simple">赵志霞, 吴燕燕, 李来好, 杨贤庆, 陈胜军, 岑剑伟. 我国罗非鱼加工研究现状[J]. 食品工业科技, 2017, 38(9): 363-367, 373.</mixed-citation></ref><ref id="hanspub.43934-ref5"><label>5</label><mixed-citation publication-type="other" xlink:type="simple">赵雲, 桂朗, 陈良标. 罗非鱼产业发展现状[J]. 中国水产, 2020(10): 46-48.</mixed-citation></ref><ref id="hanspub.43934-ref6"><label>6</label><mixed-citation publication-type="other" xlink:type="simple">李仁杰, 孟祥毅, 钟森淼, 芦金石, 张旭, 陶学恒. 基于水射流的典型淡水鱼类去鳞技术研究[J]. 食品与机械, 2020, 36(3): 101-104.</mixed-citation></ref><ref id="hanspub.43934-ref7"><label>7</label><mixed-citation publication-type="other" xlink:type="simple">关颖. 新型淡水鱼去鳞设备及去鳞方法问世[J]. 农产品加工(上), 2014(11): 76.</mixed-citation></ref><ref id="hanspub.43934-ref8"><label>8</label><mixed-citation publication-type="other" xlink:type="simple">张均波. 淡水鱼机械除鳞技术研究[D]: [硕士学位论文]. 武汉: 华中农业大学, 2004.</mixed-citation></ref><ref id="hanspub.43934-ref9"><label>9</label><mixed-citation publication-type="other" xlink:type="simple">何新宇, 赵时璐, 张震, 等. 机器视觉的研究及应用发展趋势[J]. 机械设计与制造, 2020(10): 281-283+287.</mixed-citation></ref><ref id="hanspub.43934-ref10"><label>10</label><mixed-citation publication-type="other" xlink:type="simple">魏洪昌, 罗阳. 在农产品和食品检测中应用计算机视觉技术的研究[J]. 食品界, 2020(11): 83.</mixed-citation></ref><ref id="hanspub.43934-ref11"><label>11</label><mixed-citation publication-type="other" xlink:type="simple">Shi, C., Qian, J., Han, S., Fan, B., Yang, X. and Wu, X. (2018) Developing a Machine Vision System for Simultaneous Prediction of Freshness Indicators Based on Tilapia (Oreochromis niloticus) Pupil and Gill Color during Storage at 4℃. Food Chemistry, 243, 134-140. &lt;br&gt;https://doi.org/10.1016/j.foodchem.2017.09.047</mixed-citation></ref><ref id="hanspub.43934-ref12"><label>12</label><mixed-citation publication-type="other" xlink:type="simple">马商牟司, 胡志刚, 曾山, 李皞. 基于机器视觉的淡水鱼外形检测方法[J/OL]. 计算机应用: 1-6  
http://kns.cnki.net/kcms/detail/51.1307.TP.20210628.1026.005.html, 2021-07-04.</mixed-citation></ref><ref id="hanspub.43934-ref13"><label>13</label><mixed-citation publication-type="other" xlink:type="simple">Costa, C., Antonucci, F., Me-nesatti, P., Pallottino, F., Boglione, C. and Cataudella, S. (2012) An Advanced Colour Calibration Method for FSH Freshness Assessment: A Comparison between Standard and Passive Refrigeration Modalities. Food and Bioprocess Technology, 6, 2190-2195. &lt;br&gt;https://doi.org/10.1007/s11947-011-0773-6</mixed-citation></ref><ref id="hanspub.43934-ref14"><label>14</label><mixed-citation publication-type="other" xlink:type="simple">刘金伟, 王鑫, 赵雄燕. 机械致荧光变色材料的分子结构特点及其对性能的影响[J]. 应用化工, 2019, 48(12): 3042-3045.</mixed-citation></ref><ref id="hanspub.43934-ref15"><label>15</label><mixed-citation publication-type="other" xlink:type="simple">涂冬成. 禽肉肉色、弹性和嫩度的图像和激光诱导荧光无损检测技术研究[D]: [硕士学位论文]. 南昌: 江西农业大学, 2011.</mixed-citation></ref><ref id="hanspub.43934-ref16"><label>16</label><mixed-citation publication-type="other" xlink:type="simple">刘凯琪, 乔宇, 刘俊杰, 吕日琴, 蔡金鑫. 基于荧光光谱技术的不同食用淀粉的快速区分[J]. 科教导刊-电子版(上旬), 2021(1): 284-286.</mixed-citation></ref><ref id="hanspub.43934-ref17"><label>17</label><mixed-citation publication-type="other" xlink:type="simple">Yu, H., Wang, M., Cao, J., She, Y., Zhu, Y., Ye, J., et al. (2021) Dual-Mode Detection of Organophosphate Pesticides in Pear and Chinese Cabbage Based on Fluorescence and AuNPs Colorimetric Assays. Food Chemistry, 364, Article ID: 130326. &lt;br&gt;https://doi.org/10.1016/j.foodchem.2021.130326</mixed-citation></ref><ref id="hanspub.43934-ref18"><label>18</label><mixed-citation publication-type="other" xlink:type="simple">Liu, H., Ji, Z.T., Liu, X.L., Shi, C. and Yang, X. (2020) Non-Destructive Determination of Chemical and Microbial Spoilage Indicators of Beef for Freshness Evaluation Using Front-Face Synchronous Fluorescence Spectroscopy. Food Chemistry, 321, Article ID: 126628. &lt;br&gt;https://doi.org/10.1016/j.foodchem.2020.126628</mixed-citation></ref><ref id="hanspub.43934-ref19"><label>19</label><mixed-citation publication-type="other" xlink:type="simple">苏文华, 汤海青, 欧昌荣, 高亚文, 张梦思, 李亚敏, 等. 前表面荧光光谱法鉴别不同冷藏时间的大黄鱼鲜度[J]. 核农学报, 2020, 34(2): 339-347.</mixed-citation></ref><ref id="hanspub.43934-ref20"><label>20</label><mixed-citation publication-type="other" xlink:type="simple">孟璐, 冯俊丽, 周聃, 姜晓娜, 戴志远. 荧光PCR定量检测鲐鱼贮藏过程中微生物及品质变化[J]. 中国食品学报, 2018, 18(2): 230-237.</mixed-citation></ref><ref id="hanspub.43934-ref21"><label>21</label><mixed-citation publication-type="other" xlink:type="simple">谭明堂, 谢晶, 王金锋. 解冻方式对鱿鱼品质的影响[J]. 食品科学, 2019, 40(13): 94-101.</mixed-citation></ref><ref id="hanspub.43934-ref22"><label>22</label><mixed-citation publication-type="other" xlink:type="simple">李余钱, 苏光大. 基于邻域处理器的自适应中值滤波快速实现[J]. 仪表技术与传感器, 2016(7): 120-122.</mixed-citation></ref><ref id="hanspub.43934-ref23"><label>23</label><mixed-citation publication-type="other" xlink:type="simple">汪子君, 邱俨睿, 杨宏霄, 孙磊. 基于鲁棒Otsu的红外无损检测缺陷分割算法[J]. 红外与激光工程, 2019, 48(2): 76-84.</mixed-citation></ref><ref id="hanspub.43934-ref24"><label>24</label><mixed-citation publication-type="other" xlink:type="simple">邓仕超, 黄寅. 二值图像膨胀腐蚀的快速算法[J]. 计算机工程与应用, 2017, 53(5): 207-211.</mixed-citation></ref><ref id="hanspub.43934-ref25"><label>25</label><mixed-citation publication-type="other" xlink:type="simple">Garcia-Lamont, F., Cervantes, J., López, A. and Rodriguez, L. (2018) Segmentation of Images by Color Features: A Survey. Neurocomputing, 292, 1-27. &lt;br&gt;https://doi.org/10.1016/j.neucom.2018.01.091</mixed-citation></ref><ref id="hanspub.43934-ref26"><label>26</label><mixed-citation publication-type="other" xlink:type="simple">Anwer, R.M., Khan, F.S. and Laaksonen, J. (2021) Compact Deep Color Features for Remote Sensing Scene Classification. Neural Processing Letters, 53, 1523-1544. &lt;br&gt;https://doi.org/10.1007/s11063-021-10463-4</mixed-citation></ref><ref id="hanspub.43934-ref27"><label>27</label><mixed-citation publication-type="other" xlink:type="simple">Jafarzadegan, M., Sa-fi-Esfahani, F. and Beheshti, Z. (2019) Combining Hierarchical Clustering Approaches Using the PCA Method. Expert Systems with Applications, 137, 1-10. &lt;br&gt;https://doi.org/10.1016/j.eswa.2019.06.064</mixed-citation></ref><ref id="hanspub.43934-ref28"><label>28</label><mixed-citation publication-type="other" xlink:type="simple">周先春, 孙文荣, 张纯伟. 基于自适应对数变换和PCA算法的人脸识别研究[J]. 电子技术应用, 2014, 40(6): 126-129.</mixed-citation></ref><ref id="hanspub.43934-ref29"><label>29</label><mixed-citation publication-type="other" xlink:type="simple">荆瑞勇, 卫佳琪, 王丽艳, 宋维民, 郑桂萍, 郭永霞. 基于主成分分析的不同水稻品种品质综合评价[J]. 食品科学, 2020, 41(24): 179-184.</mixed-citation></ref><ref id="hanspub.43934-ref30"><label>30</label><mixed-citation publication-type="other" xlink:type="simple">Feldmann, M.J., Hardigan, M.A., Famula, R.A., López, C.M., Amy, T., Cole, G.S., et al. (2020) Mul-ti-Dimensional Machine Learning Approaches for Fruit Shape Phenotyping in Strawberry. GigaScience, 5, Article No. giaa030.  
&lt;br&gt;https://doi.org/10.1093/gigascience/giaa030</mixed-citation></ref><ref id="hanspub.43934-ref31"><label>31</label><mixed-citation publication-type="other" xlink:type="simple">卢宏涛, 张秦川. 深度卷积神经网络在计算机视觉中的应用研究综述[J]. 数据采集与处理, 2016, 31(1): 1-17.</mixed-citation></ref><ref id="hanspub.43934-ref32"><label>32</label><mixed-citation publication-type="other" xlink:type="simple">周俊宇, 赵艳明. 卷积神经网络在图像分类和目标检测应用综述[J]. 计算机工程与应用, 2017, 53(13): 34-41.</mixed-citation></ref><ref id="hanspub.43934-ref33"><label>33</label><mixed-citation publication-type="other" xlink:type="simple">杨宁. 文本分类任务中到的常见损失函数[J]. 探索科学(学术版), 2020(4): 280-281.</mixed-citation></ref><ref id="hanspub.43934-ref34"><label>34</label><mixed-citation publication-type="other" xlink:type="simple">Postalcolu, S. (2020) Performance Analysis of Different Optimizers for Deep Learn-ing-Based Image Recognition. International Journal of Pattern Recognition and Artificial Intelligence, 34, Article ID: 2051003. 
&lt;br&gt;https://doi.org/10.1142/S0218001420510039</mixed-citation></ref><ref id="hanspub.43934-ref35"><label>35</label><mixed-citation publication-type="other" xlink:type="simple">李思寒, 仇怀利, 吴佳, 沈彦. 基于卷积神经网络的漏液视觉检测[J]. 液晶与显示, 2021, 36(5): 741-750.</mixed-citation></ref><ref id="hanspub.43934-ref36"><label>36</label><mixed-citation publication-type="other" xlink:type="simple">贾金寸, 邵龙闯, 罗宏驰. 卷积神经网络-损失函数[J]. 福建质量管理, 2019(13): 297.</mixed-citation></ref></ref-list></back></article>