<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE article  PUBLIC "-//NLM//DTD Journal Publishing DTD v3.0 20080202//EN" "http://dtd.nlm.nih.gov/publishing/3.0/journalpublishing3.dtd"><article xmlns:mml="http://www.w3.org/1998/Math/MathML" xmlns:xlink="http://www.w3.org/1999/xlink" dtd-version="3.0" xml:lang="en" article-type="research article"><front><journal-meta><journal-id journal-id-type="publisher-id">JSTA</journal-id><journal-title-group><journal-title>Journal of Sensor Technology and Application</journal-title></journal-title-group><issn pub-type="epub">2331-0235</issn><publisher><publisher-name>Scientific Research Publishing</publisher-name></publisher></journal-meta><article-meta><article-id pub-id-type="doi">10.12677/JSTA.2018.63011</article-id><article-id pub-id-type="publisher-id">JSTA-25738</article-id><article-categories><subj-group subj-group-type="heading"><subject>JSTA20180300000_66885519.pdf</subject></subj-group><subj-group subj-group-type="Discipline-v2"><subject>工程技术</subject></subj-group></article-categories><title-group><article-title>
 
 
  红外可燃气体探测器的设计与实现
  Design and Implementation of Infrared Combustible Gas Detector
 
</article-title></title-group><contrib-group><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>庞</surname><given-names>晓明</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>冯</surname><given-names>宏伟</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="corresp" rid="cor1"><sup>*</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>单</surname><given-names>正娅</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>齐</surname><given-names>斌</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib></contrib-group><aff id="aff2"><addr-line>无锡职业技术学院，江苏 无锡</addr-line></aff><aff id="aff1"><addr-line>null</addr-line></aff><author-notes><corresp id="cor1">* E-mail:<email>f_smith@163.com(冯宏)</email>;</corresp></author-notes><pub-date pub-type="epub"><day>04</day><month>07</month><year>2018</year></pub-date><volume>06</volume><issue>03</issue><fpage>97</fpage><lpage>102</lpage><permissions><copyright-statement>&#169; Copyright  2014 by authors and Scientific Research Publishing Inc. </copyright-statement><copyright-year>2014</copyright-year><license><license-p>This work is licensed under the Creative Commons Attribution International License (CC BY). http://creativecommons.org/licenses/by/4.0/</license-p></license></permissions><abstract><p>
 
 
   
   本文通过分析碳氢类可燃气体检测原理与检测方法，设计了光路部分、硬件部分和嵌入式软件，实现了对可燃气体探测器的整体设计。通过实验验证，实验结果表明，该探测器的精度较好、响应快，高低温性能稳定，完全符合国家标准和设计要求。 By analyzing the detection principle and detection method of hydrocarbon combustible gas, this paper designs the optical path part, the hardware part and the embedded software, and realizes the overall design of the combustible gas detector. The experimental results show that the detector has good precision, fast response and stable high and low temperature, which is in line with national standards and design requirements.
    
  
 
</p></abstract><kwd-group><kwd>红外可燃气体探测器，软件设计, Infrared Combustible Gas Detector</kwd><kwd> Software Design</kwd></kwd-group></article-meta></front><body><sec id="s1"><title>红外可燃气体探测器的设计与实现<sup> </sup></title><p>庞晓明，冯宏伟<sup>*</sup>，单正娅，齐斌</p><p>无锡职业技术学院，江苏 无锡</p><p>收稿日期：2018年6月12日；录用日期：2018年6月27日；发布日期：2018年7月4日</p><disp-formula id="hanspub.25738-formula10"><graphic xlink:href="//html.hanspub.org/file/1-2960099x5_hanspub.png"  xlink:type="simple"/></disp-formula></sec><sec id="s2"><title>摘 要</title><p>本文通过分析碳氢类可燃气体检测原理与检测方法，设计了光路部分、硬件部分和嵌入式软件，实现了对可燃气体探测器的整体设计。通过实验验证，实验结果表明，该探测器的精度较好、响应快，高低温性能稳定，完全符合国家标准和设计要求。</p><p>关键词 :红外可燃气体探测器，软件设计</p><disp-formula id="hanspub.25738-formula11"><graphic xlink:href="//html.hanspub.org/file/1-2960099x7_hanspub.png"  xlink:type="simple"/></disp-formula><p>Copyright &#169; 2018 by authors and Hans Publishers Inc.</p><p>This work is licensed under the Creative Commons Attribution International License (CC BY).</p><p>http://creativecommons.org/licenses/by/4.0/</p><p><img src="//html.hanspub.org/file/1-2960099x8_hanspub.png" /> <img src="//html.hanspub.org/file/1-2960099x9_hanspub.png" /></p></sec><sec id="s3"><title>1. 引言</title><p>可燃气体在世界上已经成为不可缺少的资源，碳氢类气体(甲烷、乙烷等)是最为常见的可燃性气体，但是也存在很多不确定因素，比如会发生爆炸，中毒等一些危险情况。对可燃气体泄漏进行可靠监测，是防范因可燃气体泄漏所引起的爆炸、火灾等事故而造成的财产损失或人员伤亡的有力保证 [<xref ref-type="bibr" rid="hanspub.25738-ref1">1</xref>] [<xref ref-type="bibr" rid="hanspub.25738-ref2">2</xref>] [<xref ref-type="bibr" rid="hanspub.25738-ref3">3</xref>] 。</p><p>若实现对泄漏可燃气的浓度监测，研制出准确、稳定、响应快速的探测器是非常有必要的。市面上，采用催化燃烧式的可燃气体探测器较多，但由于工业现场中待测气体的背景气体成分比较复杂，限制了催化燃烧原理探测器在复杂条件下的应用 [<xref ref-type="bibr" rid="hanspub.25738-ref4">4</xref>] 。对于红外光可燃气体探测器对碳氢化合物具有较强吸收能力，相比于催化燃烧原理，红外检测技术依靠其具有的准确度高、实时性好等众多优点，尤其是在化工、石油等行业被得到广泛应用 [<xref ref-type="bibr" rid="hanspub.25738-ref5">5</xref>] [<xref ref-type="bibr" rid="hanspub.25738-ref6">6</xref>] 。</p><p>本文通过分析碳氢类可燃气体检测原理与检测方法，设计了光路部分、硬件部分和嵌入式软件，实现了对可燃气体探测器的整体设计。通过实验验证，实验结果表明，该探测器的精度较好、响应快，高低温性能稳定，完全符合国家标准和设计要求。</p></sec><sec id="s4"><title>2. 双波段红外可燃气体探测器的原理</title><p>当一束光透过气体介质时，光能中的一部分会被介质吸收而衰减，其衰减程度与透过的气体介质浓度、光程有直接关系。在气体介质浓度稳定时，光程越长，光能衰减越明显；在光程固定时，气体介质浓度越高，光能衰减程度越明显，这就是光的吸收定律–朗伯–比尔(Lambert-Beer)定律 [<xref ref-type="bibr" rid="hanspub.25738-ref7">7</xref>] ，其表达式如式(1)所示。</p><p>I ( λ ) = I 0 ( λ ) exp ( − μ C L ) (1)</p><p>其中， 为红外辐射的初始能量；μ为单位浓度内气体的吸收系数；C为被测气体的浓度，L为待测气体光路吸收长度； I ( λ ) 为红外辐射被气体吸收后的能量。</p><p>红外光谱易受到温度、气流等环境因素的影响，在光能传送过程中，还存在散射、被杂质阻挡等情况。所以，若仅仅依靠单条光路不能准确测试待测气体的浓度。双波段测量技术是在单波段红外监测的基础上增加一路参比波段。选定待测气体对红外光具有吸收峰的波长为测量波长，而另一个对待测气体没有吸收能力的波长为参比波长 [<xref ref-type="bibr" rid="hanspub.25738-ref8">8</xref>] [<xref ref-type="bibr" rid="hanspub.25738-ref9">9</xref>] 。</p></sec><sec id="s5"><title>3. 探测器光路及硬件整体框架设计</title><sec id="s5_1"><title>3.1. 光路设计</title><p>为了使可燃气体红外吸收信号具有较好的探测率，红外双波段可燃气体探测光路由红外光源、聚光碗、蓝宝石视窗、镀金膜反光镜、双通道检测器等部分构成如图1所示。光路具体路线如下：红外光源经聚光碗发射出平行光，透过蓝宝石玻璃，穿过气室后汇集到镀金膜的凹面镜上，经反射光线再次穿过气室，被红外传感器所接收。本设计采用反射式光路结构，要求凹面反光镜对3 μm~4.5 μm的红外波段的反射率不小于95%。该光路系统结构简洁，红外光透过视窗时，待测气体与传感器的电路部分通过视窗完全隔离开，对探测器的监测精度和可靠性有较大提高。</p></sec><sec id="s5_2"><title>3.2. 探测器整体硬件结构</title><p>在电路的设计上，除实现光源驱动及调制、双通道信号的前置放大及调理、模数转换(A/D转化)、温度信号采集、E2PROM读写等基本功能外，还实现了对模拟电流环输出模块、双通道MODBUS通信模块的管理。硬件电路部分主要包括：微控制器及外围电路、光源驱动及调理电路、E2PROM控制电路、双通道前置放大及处理电路、A/D转换电路、加热棒调理电路、4~20 mA电流环输出、双路MODBUS通信及功能安全自检模块等。本设计所用微处理器为32位单片机STM32F105VCT6，图2给出了硬件整体结构框图。</p><p>微控制器及外围电路是指由STM32F105VCT6、12 MHz晶振电路、复位电路组成的最小运行系统。光源驱动电路主要是实现对检测用红外光源的驱动及调制，已达到较高检测率的效果。E2PROM控制电路主要是能够实现对气体表、温补系数等探测器重要参数的掉电保存，以确保探测器的稳定工作。双通道前置放大及处理电路主要实现对热释电红外传感器检测信号的滤波、放大处理，以达到可由微处理器检测的目的。A/D转换电路是完成对采集的传感器信号进行数字量化处理。加热棒调理电路是防备气体探测器遇到温度急速变化带来的冷凝情况，以提高探测器的检测能力。4~20 mA电流环和双路MODBUS通信电路分别为探测器的模拟通信和数字通信接口将检测的浓度值传送到集散控制中心。功能自检模块</p><p>图1. 探测器光路设计图</p><p>图2. 系统硬件结构框图</p><p>是为了确保整表的功能安全性能，所搭建的自检电路、双路冗余电路等。</p></sec></sec><sec id="s6"><title>4. 系统软件总体设计</title><p>本设计是采用高级C语言，在嵌入式集成开发环境Keil下进行的软件开发。本设计将嵌入式软件分为多个功能模块，主程序通过调用各个功能模块完成复杂的系统功能。进入主程序，首先运行系统初始化，读取E2PROM上电默认状态量和存储气体表，然后系统进入无限循环的轮询状态。系统首先进行硬件看门狗清零，然后处理MODBUS通信模块和E2PROM读写操作，并通过内部定时触发传感器通道的数据采集任务，先进行光源驱动脉冲调制后利用微处理器内部12位模数转换器实现A/D转换，采集的数据经过处理运算后得到实际的可燃气浓度，随后主程序将采集的数据以4~20 mA电流环或者MODBUS模块通信方式输出给集散控制中心的控制器，并输出相应的工作状态。系统主程序的流程图如图3所示。</p><sec id="s6_1"><title>4.1. 电流环软件处理</title><p>所谓4~20 mA的电流环是指用4 mA表示零信号，用20 mA表示信号的满刻度，而低于4 mA高于20 mA的信号用于各种故障的报警。</p><p>具体设定的电流值如表1所示。</p><p>图3. 系统主程序流程图</p><table-wrap id="table1" ><label><xref ref-type="table" rid="table1">Table 1</xref></label><caption><title> State setting of 4 - 20 mA current loo</title></caption><table><tbody><thead><tr><th align="center" valign="middle" >电流范围(mA)</th><th align="center" valign="middle" >仪表状态</th></tr></thead><tr><td align="center" valign="middle" >0 mA</td><td align="center" valign="middle" >故障</td></tr><tr><td align="center" valign="middle" >0.8 mA</td><td align="center" valign="middle" >预热</td></tr><tr><td align="center" valign="middle" >1.2 mA</td><td align="center" valign="middle" >零点漂移故障</td></tr><tr><td align="center" valign="middle" >1.6 mA</td><td align="center" valign="middle" >标定故障</td></tr><tr><td align="center" valign="middle" >2.0 mA</td><td align="center" valign="middle" >光路故障</td></tr><tr><td align="center" valign="middle" >4~20 mA</td><td align="center" valign="middle" >0~100%LEL</td></tr><tr><td align="center" valign="middle" >&gt;20 mA</td><td align="center" valign="middle" >超量程</td></tr></tbody></table></table-wrap><p>表1. 4~20 mA电流环状态设定值</p></sec><sec id="s6_2"><title>4.2. MODBUS通信模块</title><p>在本设计中，集散控制中心的主机控制器与从机探测器可选用MODBUS通信，以RTU模式进行半双工通信，选用中断方式接收数据。主机控制器选用MODBUS功能码03实现对从机探测器的状态寄存器的读取。从机探测器由若干个寄存器存储状态信息，每个寄存器由两字节的数据组成，MODBUS寄存器的定义格式如表2所示。</p></sec></sec><sec id="s7"><title>5. 实验与分析</title><p>为了检测探测器的性能，依据GB15322.1-2003要求，对探测器进行了精度和高低温通气实验。</p><p>精度测试是在标压25℃下，将标定好的整表放置在恒温箱中，以0.5 L/min的恒定流量通入配制好浓度为10%，25%，50%，70%LEL的甲烷气体，并记录下响应时间(达到稳定值90%所需时间)，记录测试结果如表3所示。</p><p>由表3结果可看出，探测器测量精度偏差不大于1.4%，系统响应时间小于12 S。</p><p>高温测试是探测器在高温70℃ &#177; 2℃环境下放置2小时后通配制某一浓度下的性能测试；低温测试是探测器在低温−40℃ &#177; 2℃环境下放置2小时后通配制某一浓度下的性能测试。高低温测试数据如表4所示。</p><table-wrap id="table2" ><label><xref ref-type="table" rid="table2">Table 2</xref></label><caption><title> Definition format of MODBUS registe</title></caption><table><tbody><thead><tr><th align="center" valign="middle" >寄存器地址</th><th align="center" valign="middle" >40001H</th><th align="center" valign="middle" >40002H</th><th align="center" valign="middle" >40003H</th><th align="center" valign="middle" >40004H</th><th align="center" valign="middle" >…</th><th align="center" valign="middle" ></th></tr></thead><tr><td align="center" valign="middle" >寄存器信息</td><td align="center" valign="middle" >模拟量mA</td><td align="center" valign="middle" >操作模式</td><td align="center" valign="middle" >故障状态</td><td align="center" valign="middle" >气体类型</td><td align="center" valign="middle" >…</td><td align="center" valign="middle" ></td></tr></tbody></table></table-wrap><p>表2. MODBUS寄存器的定义格式</p><table-wrap id="table3" ><label><xref ref-type="table" rid="table3">Table 3</xref></label><caption><title> Accuracy test result</title></caption><table><tbody><thead><tr><th align="center" valign="middle" >标准CH<sub>4</sub>浓度(%LEL)</th><th align="center" valign="middle" >实测浓度(%LEL)</th><th align="center" valign="middle" >测量偏差(%)</th><th align="center" valign="middle" >响应时间(S)</th></tr></thead><tr><td align="center" valign="middle" >10</td><td align="center" valign="middle" >9.8</td><td align="center" valign="middle" >0.2</td><td align="center" valign="middle" >10.7</td></tr><tr><td align="center" valign="middle" >25</td><td align="center" valign="middle" >24.6</td><td align="center" valign="middle" >0.4</td><td align="center" valign="middle" >10.9</td></tr><tr><td align="center" valign="middle" >50</td><td align="center" valign="middle" >50.2</td><td align="center" valign="middle" >0.2</td><td align="center" valign="middle" >10.5</td></tr><tr><td align="center" valign="middle" >70</td><td align="center" valign="middle" >70.6</td><td align="center" valign="middle" >0.6</td><td align="center" valign="middle" >10.6</td></tr><tr><td align="center" valign="middle" >90</td><td align="center" valign="middle" >91.4</td><td align="center" valign="middle" >1.4</td><td align="center" valign="middle" >11.3</td></tr></tbody></table></table-wrap><p>表3. 精度测试结果</p><table-wrap id="table4" ><label><xref ref-type="table" rid="table4">Table 4</xref></label><caption><title> High and low temperature test result</title></caption><table><tbody><thead><tr><th align="center" valign="middle"  colspan="2"  >标准CH<sub>4</sub>浓度(%LEL)</th><th align="center" valign="middle" >高温实测值(%LEL)</th><th align="center" valign="middle" >高温测量偏差(%)</th><th align="center" valign="middle" >低温实测值(%LEL)</th><th align="center" valign="middle" >低温测量偏差(%)</th></tr></thead><tr><td align="center" valign="middle" >10</td><td align="center" valign="middle"  colspan="2"  >10.6</td><td align="center" valign="middle" >0.6</td><td align="center" valign="middle" >9.4</td><td align="center" valign="middle" >0.6</td></tr><tr><td align="center" valign="middle" >25</td><td align="center" valign="middle"  colspan="2"  >26.4</td><td align="center" valign="middle" >1.4</td><td align="center" valign="middle" >24.4</td><td align="center" valign="middle" >0.6</td></tr><tr><td align="center" valign="middle" >50</td><td align="center" valign="middle"  colspan="2"  >52.3</td><td align="center" valign="middle" >2.3</td><td align="center" valign="middle" >48.6</td><td align="center" valign="middle" >1.4</td></tr><tr><td align="center" valign="middle" >70</td><td align="center" valign="middle"  colspan="2"  >72.8</td><td align="center" valign="middle" >2.8</td><td align="center" valign="middle" >68.3</td><td align="center" valign="middle" >1.7</td></tr><tr><td align="center" valign="middle" >90</td><td align="center" valign="middle"  colspan="2"  >93.4</td><td align="center" valign="middle" >3.4</td><td align="center" valign="middle" >88.1</td><td align="center" valign="middle" >1.9</td></tr><tr><td align="center" valign="middle" ></td><td align="center" valign="middle" ></td><td align="center" valign="middle" ></td><td align="center" valign="middle" ></td><td align="center" valign="middle" ></td><td align="center" valign="middle" ></td></tr></tbody></table></table-wrap><p>表4. 高低温测试结果</p><p>由表4结果可看出，探测器高温测试性能偏差不大于3.4%，低温性能测试偏差不大于1.9%。</p><p>实验结果表明，探测器的精度较好、响应时间较快，补偿算法合理，高低温性能稳定，完全符合国家标准和设计要求。</p></sec><sec id="s8"><title>6. 结论</title><p>本文通过分析碳氢类可燃气体检测原理与检测方法，设计了光路部分、硬件部分和嵌入式软件，实现了对可燃气体探测器的整体设计。通过实验验证，实验结果表明，该探测器的精度较好、响应快，高低温性能稳定，完全符合国家标准和设计要求。</p></sec><sec id="s9"><title>文章引用</title><p>庞晓明,冯宏伟,单正娅,齐 斌. 红外可燃气体探测器的设计与实现 Design and Implementation of Infrared Combustible Gas Detector[J]. 传感器技术与应用, 2018, 06(03): 97-102. https://doi.org/10.12677/JSTA.2018.63011</p></sec><sec id="s10"><title>参考文献</title></sec></body><back><ref-list><title>References</title><ref id="hanspub.25738-ref1"><label>1</label><mixed-citation publication-type="other" xlink:type="simple">李黎, 王一丁, 李树维. 红外气体检测技术在天然气安全生产中的应用[J]. 天然气工业, 2011, 31(1): 96-99.</mixed-citation></ref><ref id="hanspub.25738-ref2"><label>2</label><mixed-citation publication-type="other" xlink:type="simple">陈迎春. 基于物联网和NDIR的可燃气体探测技术研究[D]: [硕士学位论文]. 合肥: 中国科学技术大学, 2014.</mixed-citation></ref><ref id="hanspub.25738-ref3"><label>3</label><mixed-citation publication-type="other" xlink:type="simple">豆正伟, 李晓霞, 樊祥. 抗红外/毫米波复合制导的无源干扰技术发展现状[J]. 红外技术, 2009, 31(3): 125-128.</mixed-citation></ref><ref id="hanspub.25738-ref4"><label>4</label><mixed-citation publication-type="other" xlink:type="simple">李瑞. 可燃气体探测器检验装置的设计[D]: [硕士学位论文]. 沈阳: 东北大学, 2008.</mixed-citation></ref><ref id="hanspub.25738-ref5"><label>5</label><mixed-citation publication-type="other" xlink:type="simple">刘岗. 矿用红外瓦斯传感器设计[D]: [硕士学位论文]. 太原: 中北大学, 2013.</mixed-citation></ref><ref id="hanspub.25738-ref6"><label>6</label><mixed-citation publication-type="other" xlink:type="simple">潘君骅. 大口径红外光学系统的成像设计[J]. 光学学报, 2003, 23(12): 1475-1478.</mixed-citation></ref><ref id="hanspub.25738-ref7"><label>7</label><mixed-citation publication-type="other" xlink:type="simple">Meyer, R.T. (2003) Gas Cell Selection for Analysis of Electronic Gases. Gases and Technology, 4, 14-20.</mixed-citation></ref><ref id="hanspub.25738-ref8"><label>8</label><mixed-citation publication-type="other" xlink:type="simple">余勇超. 非分光红外气体传感器的光学系统和控制软件设计[D]: [硕士学位论文]. 武汉: 华中科技大学, 2011.</mixed-citation></ref><ref id="hanspub.25738-ref9"><label>9</label><mixed-citation publication-type="other" xlink:type="simple">陈友安. 基于红外光谱吸收的甲烷气体在线监测系统设计[D]: [硕士学位论文]. 合肥: 中国科学技术大学, 2016.</mixed-citation></ref></ref-list></back></article>