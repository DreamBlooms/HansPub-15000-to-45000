<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE article  PUBLIC "-//NLM//DTD Journal Publishing DTD v3.0 20080202//EN" "http://dtd.nlm.nih.gov/publishing/3.0/journalpublishing3.dtd"><article xmlns:mml="http://www.w3.org/1998/Math/MathML" xmlns:xlink="http://www.w3.org/1999/xlink" dtd-version="3.0" xml:lang="en" article-type="research article"><front><journal-meta><journal-id journal-id-type="publisher-id">JSTA</journal-id><journal-title-group><journal-title>Journal of Sensor Technology and Application</journal-title></journal-title-group><issn pub-type="epub">2331-0235</issn><publisher><publisher-name>Scientific Research Publishing</publisher-name></publisher></journal-meta><article-meta><article-id pub-id-type="doi">10.12677/JSTA.2016.41004</article-id><article-id pub-id-type="publisher-id">JSTA-16890</article-id><article-categories><subj-group subj-group-type="heading"><subject>JSTA20160100000_37397874.pdf</subject></subj-group><subj-group subj-group-type="Discipline-v2"><subject>工程技术</subject></subj-group></article-categories><title-group><article-title>
 
 
  ZigBee无线网络技术在小区路灯照明系统的应用
  An Application of ZigBee Wireless Technology in Housing Estate Road Lighting System
 
</article-title></title-group><contrib-group><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>刘</surname><given-names>志远</given-names></name><xref ref-type="aff" rid="aff1"><sup>1</sup></xref><xref ref-type="corresp" rid="cor1"><sup>*</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>谢</surname><given-names>应然</given-names></name><xref ref-type="aff" rid="aff1"><sup>1</sup></xref><xref ref-type="aff" rid="aff3"><sup>3</sup></xref><xref ref-type="aff" rid="aff2"><sup>2</sup></xref></contrib></contrib-group><aff id="aff1"><addr-line>佛山职业技术学院机电工程系，广东 佛山</addr-line></aff><aff id="aff3"><addr-line>佛山职业技术学院机电工程系，广东 佛山 </addr-line></aff><aff id="aff2"><addr-line>null</addr-line></aff><author-notes><corresp id="cor1">* E-mail:<email>lau_zy@msn.com(刘志)</email>;</corresp></author-notes><pub-date pub-type="epub"><day>22</day><month>01</month><year>2016</year></pub-date><volume>04</volume><issue>01</issue><fpage>25</fpage><lpage>31</lpage><permissions><copyright-statement>&#169; Copyright  2014 by authors and Scientific Research Publishing Inc. </copyright-statement><copyright-year>2014</copyright-year><license><license-p>This work is licensed under the Creative Commons Attribution International License (CC BY). http://creativecommons.org/licenses/by/4.0/</license-p></license></permissions><abstract><p>
 
 
  小区路灯照明系统是楼宇智能的一部分，但受制于布线、成本等的问题，难以得以实施。随着计算机技术的迅猛发展，无线网络技术越来越成熟，ZigBee无线网络成本低、功耗低、传输距离远等的特点，非常适合在无线路灯控制的应用。本文在介绍了小区路灯照明系统的特点，结合ZigBee组网技术，设计了一套ZigBee无线网络技术的小区路灯照明系统的应用，通过实验证明了该技术在小区路灯监控的可行性，具有一定的实用价值。
   Housing estate lighting system is a part of the intelligent building, but subject to wiring, cost and other issues, it is difficult to be implemented. With the rapid development of computer technology, wireless network technology is more and more mature; ZigBee wireless network has the advan-tages of low cost, low power consumption, far transmission distance. So it is very suitable for wire-less street lighting control. The characteristics of housing estate lighting system are introduced in this paper. And with ZigBee network technology, a design of application of ZigBee wireless network technology of housing estate lighting system is presented. Through the experiment, the ZigBee be-ing applied in housing estate street lamp monitoring and controlling is proved practical.
 
</p></abstract><kwd-group><kwd>小区路灯照明，智能楼宇，ZigBee，Z-Stack, Housing Estate Lighting System</kwd><kwd> Intelligent Building</kwd><kwd> ZigBee</kwd><kwd> Z-Stack</kwd></kwd-group></article-meta></front><body><sec id="s1"><title>ZigBee无线网络技术在小区路灯照明系统的 应用<sup> </sup></title><p>刘志远，谢应然</p><p>佛山职业技术学院机电工程系，广东 佛山</p><disp-formula id="hanspub.16890-formula427"><graphic xlink:href="http://html.hanspub.org/file/4-2960039x6_hanspub.png"  xlink:type="simple"/></disp-formula><p>收稿日期：2016年1月8日；录用日期：2016年1月26日；发布日期：2016年1月30日</p><disp-formula id="hanspub.16890-formula428"><graphic xlink:href="http://html.hanspub.org/file/4-2960039x7_hanspub.png"  xlink:type="simple"/></disp-formula></sec><sec id="s2"><title>摘 要</title><p>小区路灯照明系统是楼宇智能的一部分，但受制于布线、成本等的问题，难以得以实施。随着计算机技术的迅猛发展，无线网络技术越来越成熟，ZigBee无线网络成本低、功耗低、传输距离远等的特点，非常适合在无线路灯控制的应用。本文在介绍了小区路灯照明系统的特点，结合ZigBee组网技术，设计了一套ZigBee无线网络技术的小区路灯照明系统的应用，通过实验证明了该技术在小区路灯监控的可行性，具有一定的实用价值。</p><p>关键词 :小区路灯照明，智能楼宇，ZigBee，Z-Stack</p><disp-formula id="hanspub.16890-formula429"><graphic xlink:href="http://html.hanspub.org/file/4-2960039x8_hanspub.png"  xlink:type="simple"/></disp-formula></sec><sec id="s3"><title>1. 引言</title><p>小区路灯照明系统是相对封闭的电力系统，它与街道、公路照明系统不同，由小区内部的电力系统控制。现代小区智能楼宇控制应当包含有小区路灯照明系统，使得小区照明更节能环保、更人性化、个性化，照明系统由小区的电气控制中心统一调控。为了实现照明系统的统一控制，需要在照明路灯上加装控制模块与通信功能，导致了成本的增加，使得远程统一控制得不到广泛的应用。ZigBee是一种基于2.4 G频段的无线网络技术，它具有低功耗、传输距离远、网络性强、成本低等的特点，非常适合于数据量不大、节点数多的网络控制，被广泛应用于物联网领域。本文设计一种基于无线传感器技术的小区照明控制系统，在无需进行网络布线的前提下，低成本实现集中统一控制小区内的路灯，使得小区的照明系统的智能化得以实现。</p></sec><sec id="s4"><title>2. 小区路灯照明系统</title><p>小区路灯照明是小区建设非常重要的一个部分，虽然同是照明系统，它与公共照明(如街道、广场、公路等照明)不同，小区路灯照明属于小区自主控制，消耗的电费也由小区业主承担，因此小区照明需要考虑到个性化控制、节能、安防等因素。另外，随着人们生活水平的提高，人们对居住环境的要求也越来越高居住的环境也成为了一种重要的休闲、放松、享受生活的重要场所，小区照明由以前的单纯照明演变成为一种景观系统工程，人们追求的不仅仅是亮度上的主观感受，更重要的是视觉、身心的一种享受[<xref ref-type="bibr" rid="hanspub.16890-ref1">1</xref>] 。由此可见，小区照明系统并不能简单地照搬普通的照明系统，个性化、节能环保是现代小区设计的重要一环。</p><p>随着信息行业和计算机产业的高速发展，智能楼宇技术迅速发展，楼宇自动化、通信自动化、办公自动化、家庭自动化等各种自动化系统不断出现，现代小区使用最多最普遍的是安防系统、门禁系统、停车场系统等，小区内的照明系统却应用的不多，原因主要是：小区的路灯照明系统接入智能楼宇系统的通信介质大部分采用总线型与电力线载波，总线型需要铺设网络通信线路，分布广泛、布线复杂，成本很高，若采用电力载波方式接入，虽然不用另外铺设网络线路，但需要昂贵的调制解调设备，成本也难以降低[<xref ref-type="bibr" rid="hanspub.16890-ref2">2</xref>] 。因此如何低成本地将小区的路灯照明系统加入到小区的智能楼宇控制系统中是解决矛盾的关键。</p></sec><sec id="s5"><title>3. ZigBee</title><p>ZigBee是基于IEEE802.15.4标准的低功耗局域网协议。它来源于蜜蜂的八字舞，由于蜜蜂(bee)是靠飞翔和“嗡嗡”(zig)地抖动翅膀的“舞蹈”来与同伴传递花粉所在方位信息。ZigBee网络协议与其他无线网络协议相比，如表1所示，有着显著的特点。蓝牙与WIFI技术速率高，但ZigBee在传输距离、功耗、成本等方面有先天的优势，特别适合于数据量低的传感器与控制场合。</p><sec id="s5_1"><title>3.1. ZigBee技术概述</title><p>ZigBee与IEEE 802.15.4是基于标准的协议，它们为无线传感器网络应用提供所需的网络基础设施。802.15.4定义了物理层(PHY)和媒体访问层(MAC)，ZigBee定义了网络层(NWK)和应用层(API)，如图1所示 [<xref ref-type="bibr" rid="hanspub.16890-ref3">3</xref>] 。由此可见，ZigBee是一套非常完整的无线网络解决方案。</p><table-wrap id="table1" ><label><xref ref-type="table" rid="table1">Table 1</xref></label><caption><title> ZigBee and others’ wireless protoco</title></caption><table><tbody><thead><tr><th align="center" valign="middle" ></th><th align="center" valign="middle" >ZigBee</th><th align="center" valign="middle" >蓝牙</th><th align="center" valign="middle" >WiFi</th></tr></thead><tr><td align="center" valign="middle" >传输速率</td><td align="center" valign="middle" >20~250 kbps</td><td align="center" valign="middle" >1~24 Mbps</td><td align="center" valign="middle" >1~450 Mbps</td></tr><tr><td align="center" valign="middle" >有效传输距离</td><td align="center" valign="middle" >100米</td><td align="center" valign="middle" >10~50米</td><td align="center" valign="middle" >50~100米</td></tr><tr><td align="center" valign="middle" >典型应用领域</td><td align="center" valign="middle" >无线传感器网络</td><td align="center" valign="middle" >无线手持设备</td><td align="center" valign="middle" >互联网接入</td></tr></tbody></table></table-wrap><p>表1. ZigBee与其他无线网络协议</p><p>图1. ZigBee与IEEE802.15.4网络架构图</p></sec><sec id="s5_2"><title>3.2. ZigBee设备类型</title><p>ZigBee网络包含2种功能类型设备，3种节点类型。功能类型有：全功能设备FFD (Full Function Device)和精简功能设备RFD (Reduced Function Device)。顾名思义，全功能设备具有完整的协议功能，而精简功能设备目的是为了实现简单的协议即可。3种节点类型：协调器(ZC)、路由器(ZR)与终端设备(ZE)。全功能设备可以作为协调器、路由或者终端设备，精简设备只能作为终端设备使用。全功能设备可以与任何设备通信，而精简功能设备只能与全功能设备通信，不能与精简功能设备互通。它们共同构成ZigBee网络，如图2是ZigBee的一种拓扑结构。</p><p>协调器的作用是启动与控制网络，存储关于网络的信息。它也是网络的第一个设备。协调器选择一个信道和一个网络ID (也称之为PAN ID，即Personal Area Network ID)，随后启动整个网络。如果网络需要加密，密匙可存放在协调器，协调器的角色主要涉及网络的启动和配置，一旦这些都完成后，协调器的工作就像一个路由器。</p><p>路由器的作用是扩展网络覆盖面，在障碍周围动态路由，并提供备份路由以防止网络拥挤和设备失败，它们可以联系到协调器与其他路由。</p><p>终端设备的作用是发送或接受一个信息，但是不能执行任何路由操作，它们必须连接到协调器或路由器，终端设备是网络的最终端，因此不支持子设备。</p></sec><sec id="s5_3"><title>3.3. ZigBee网络</title><p>ZigBee有3种拓扑结构及2种工作模式。3种网络包括有：星形网络(Star network)、树状网络(Cluster tree network)和网状网络(Mesh network)，拓扑如图3所示。</p><p>星形网络由一个协调器与多个终端设备组成，协调器位于网络中心，负责发起建立和维护整个网络。</p><p>图2. ZigBee网络的三种设备类型</p><p>图3. ZigBee的三种网络拓扑</p><p>星形网络的控制与同步比较简单。</p><p>树状网络由一个协调器与一个或者多个星形网络构成。很明显，树状网络的拓扑空间很大，但是空间的增大使得信号的传输延时会增加。</p><p>网状网络由若干个FFD构成骨干网，它们之间是对等关系，每个节点都可以与其他节点对等通信。网络中所有具有路由功能的节点可以直接互联，但它们中有一个会被推荐为协调器。实际上网状网络是基于树状网络的基础，由路由器的路由表配合实现网络路由。网状网络的特点是具有自恢复能力，数据路径有多条选择，当某条路径故障，可以选择其他路径，因此它具有非常高的可靠性，但是树状网络需要更多的存储空间。</p><p>ZigBee有两种工作模式：信标(beacon)模式与非信标模式。信标模式规定了一种“超帧”的格式，在超帧的开始发送信标帧，各节点经过竞争方式、非竞争方式接入、非活跃时期与休眠状态几个时期，结束后等待下一个超帧周期的开始又发送信标帧。非信标模式则比较灵活，节点均以竞争方式接入信道，不需要周期性的发送信标帧。显然，信标方式同步性能好，但这种同步网络的规模不能很大。</p></sec></sec><sec id="s6"><title>4. 基于ZigBee技术的小区照明系统</title><sec id="s6_1"><title>4.1. 硬件设计</title><p>ZigBee传输距离远、功耗低、成本低等的特点，非常适合于小区路灯照明系统。硬件上参考TI公司开发的ZigBee专用CC2530单片机的母版设计 [<xref ref-type="bibr" rid="hanspub.16890-ref4">4</xref>] ，终端设备使用BH1750FVI数字光照传感器进行光照强度的数据采集，设计CC2530还有继电器输出，用于驱动路灯的开关，电路如图4所示。</p><p>协调器与路由器也参考TI母版电路，协调器在CC2530串行口上接入RS232转换芯片与服务器连接。</p></sec><sec id="s6_2"><title>4.2. 软件设计</title><p>使用IAR开发平台与TI公司的Z-stack协议栈，该协议栈由TI公司提供给用户的一个开放的ZigBee网络开发包，是ZigBee的一种具体实现，Z-Stack包含了网状网络拓扑的几近于全功能的协议栈，用户</p><p>图4. 终端设备电路图</p><p>可以直接使用Z-stack进行开发 [<xref ref-type="bibr" rid="hanspub.16890-ref5">5</xref>] ，其框架如图5所示。Z-stack已经将系统平台层与协议层封装好了，用户只需根据自己的网络与程序对应用层进行修改，使得用户的开发周期大大缩短，而且网络系统的可靠性得到了很好的保护。</p><p>根据小区路灯照明系统的特点，系统采用网状网络结构，路由根据路灯的分布情况带若干个终端设备，终端设备进行数据采集以及控制，路由设置在Z-stack里修改f8wConfig.cfg文件进行设置，路由表大小设置MAX_RTG_ENTRIES，按节点数10:1进行设置，通信方式采用非信标模式。另外，由于路灯系统本身有供电电源，因此ZigBee模块使用路灯的电源进行整流变压供电，采用锂电池作备用电源，当路灯电源线路出现故障断电，ZigBee模块可以使用锂电池继续进行工作，通过ZigBee网络并将断电故障信息上报至服务器。</p></sec><sec id="s6_3"><title>4.3. 实验</title><p>将ZigBee模块按距离30米路灯的间隔进行分布，如图6所示模拟路灯分布，布置20个终端设备对</p><p>图5. Z-stack协议栈框架</p><p>图6. ZigBee技术的路灯控制网络</p><table-wrap id="table2" ><label><xref ref-type="table" rid="table2">Table 2</xref></label><caption><title> Routing packet lost rate tes</title></caption><table><tbody><thead><tr><th align="center" valign="middle" >发送周期</th><th align="center" valign="middle" >1个路由失效</th><th align="center" valign="middle" >2个路由失效</th><th align="center" valign="middle" >3个路由失效</th><th align="center" valign="middle" >4个路由失效</th></tr></thead><tr><td align="center" valign="middle" >50 ms 20字节</td><td align="center" valign="middle" >1</td><td align="center" valign="middle" >2</td><td align="center" valign="middle" >8</td><td align="center" valign="middle" >14</td></tr><tr><td align="center" valign="middle" >200 ms 20字节</td><td align="center" valign="middle" >0</td><td align="center" valign="middle" >1</td><td align="center" valign="middle" >3</td><td align="center" valign="middle" >6</td></tr></tbody></table></table-wrap><p>表2. 路由丢包率性能测试</p><p>路灯进行光照强度的采集、供电信号的采集，并带有继电器控制输出。按分布使用了6个路由设备，协调器使用RS232转换芯片与PC串行口进行通信，服务器端使用VB编写终端监控软件显示各个终端设备采集的信息，发送继电器闭合与断开指令信号。在断电的情况下，备用电池可以继续维持单片机的供电，并将断电信息发送回PC终端。</p><p>实验显示，20个终端设备的采集信息可以完整的显示，继电器闭合与断开的指令也能从服务器端发送到终端设备，在路由测试上，分别对4个路由进行故障性测试，实验数据如表2所示。由表2数据可知，在传输速率不高的情况下路由特性表现良好。</p><p>由实验数据可知，使用ZigBee网络进行小区路灯监控是可行的，在协调器端对数据进行打包可以与PC、PLC等控制器进行通信，因此可以接入到智能楼宇控制系统中进行统一监控。</p></sec></sec><sec id="s7"><title>5. 总结</title><p>本文设计了一种基于ZigBee无线网络技术的小区路灯控制系统，实验证明ZigBee无线网络技术在远程监测路灯下的光照强度、断路故障等信息是可行的，具有一定的实用性，在协调器端与智能楼宇系统的连接上可以进行灵活的编程，以满足监控系统的需求，因此，ZigBee无线网络技术可以扩展到其他设备的监控上，大大减少了布线的成本，无论是作为无线传感器网络应用还是智能楼宇控制应用的推广，具有一定意义。</p></sec><sec id="s8"><title>文章引用</title><p>刘志远,谢应然. ZigBee无线网络技术在小区路灯照明系统的应用An Application of ZigBee Wireless Technology in Housing Estate Road Lighting System[J]. 传感器技术与应用, 2016, 04(01): 25-31. http://dx.doi.org/10.12677/JSTA.2016.41004</p></sec><sec id="s9"><title>参考文献 (References)</title></sec></body><back><ref-list><title>References</title><ref id="hanspub.16890-ref1"><label>1</label><mixed-citation publication-type="other" xlink:type="simple">沈瑞珠. 智能照明系统在智能建筑中的应用[J]. 低压电器, 2002(5): 20-22.</mixed-citation></ref><ref id="hanspub.16890-ref2"><label>2</label><mixed-citation publication-type="other" xlink:type="simple">邹吉平. 基于现场总线的智能照明控制系统分析与探讨[J]. 低压电器, 2005(7): 19-22.</mixed-citation></ref><ref id="hanspub.16890-ref3"><label>3</label><mixed-citation publication-type="other" xlink:type="simple">ZigBee Specification 2007. http://www.zigbee.org</mixed-citation></ref><ref id="hanspub.16890-ref4"><label>4</label><mixed-citation publication-type="other" xlink:type="simple">CC2530 Datasheet. Texas Instruments Incorporated. http://www.TI.com</mixed-citation></ref><ref id="hanspub.16890-ref5"><label>5</label><mixed-citation publication-type="other" xlink:type="simple">丁飞, 张西良, 张世庆. 基于ZigBee的无线通信技术及其应用[J]. 江苏通信技术, 2006, 22(5): 24-27.</mixed-citation></ref></ref-list></back></article>