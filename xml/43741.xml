<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE article  PUBLIC "-//NLM//DTD Journal Publishing DTD v3.0 20080202//EN" "http://dtd.nlm.nih.gov/publishing/3.0/journalpublishing3.dtd"><article xmlns:mml="http://www.w3.org/1998/Math/MathML" xmlns:xlink="http://www.w3.org/1999/xlink" dtd-version="3.0" xml:lang="en" article-type="research article"><front><journal-meta><journal-id journal-id-type="publisher-id">CSA</journal-id><journal-title-group><journal-title>Computer Science and Application</journal-title></journal-title-group><issn pub-type="epub">2161-8801</issn><publisher><publisher-name>Scientific Research Publishing</publisher-name></publisher></journal-meta><article-meta><article-id pub-id-type="doi">10.12677/CSA.2021.117191</article-id><article-id pub-id-type="publisher-id">CSA-43741</article-id><article-categories><subj-group subj-group-type="heading"><subject>CSA20210700000_27788266.pdf</subject></subj-group><subj-group subj-group-type="Discipline-v2"><subject>信息通讯</subject></subj-group></article-categories><title-group><article-title>
 
 
  基于Android程序的声控机器人设计
  Design of Voice Control Robot Based on Android Program
 
</article-title></title-group><contrib-group><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>李</surname><given-names>坚平</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>谢</surname><given-names>敏</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>张</surname><given-names>学军</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib></contrib-group><aff id="aff2"><addr-line>广西大学计算机与电子信息学院，广西 南宁</addr-line></aff><aff id="aff1"><addr-line>null</addr-line></aff><pub-date pub-type="epub"><day>08</day><month>07</month><year>2021</year></pub-date><volume>11</volume><issue>07</issue><fpage>1869</fpage><lpage>1874</lpage><permissions><copyright-statement>&#169; Copyright  2014 by authors and Scientific Research Publishing Inc. </copyright-statement><copyright-year>2014</copyright-year><license><license-p>This work is licensed under the Creative Commons Attribution International License (CC BY). http://creativecommons.org/licenses/by/4.0/</license-p></license></permissions><abstract><p>
 
 
   
   论文提出了一种采用NodeMCU作为主控，通过NodeMCU的WIFI功能让机器人接入互联网，使用MQTT协议实现NodeMCU和Android程序通信，把Android程序的语音控制信息发送到NodeMCU实现声控。此外还设计了语音合成与播报功能，实现人与机器人的互动。经过测试表明，使用Android程序实现机器人的声控能达到很好的控制效果。 The paper proposes a method that uses NodeMCU as the main control, connects the robot to the Internet through the WIFI function of NodeMCU, uses the MQTT protocol to realize the communication between NodeMCU and Android programs, and sends the voice control information of the Android program to NodeMCU for voice control. In addition, speech synthesis and broadcast functions are also designed to realize the interaction between humans and robots. Tests show that the use of Android programs to realize the voice control of the robot can achieve a good control effect. 
  
 
</p></abstract><kwd-group><kwd>Android，语音识别，声控，机器人，NodeNCU，MQTT, Android</kwd><kwd> Speech Recognition</kwd><kwd> Voice Control</kwd><kwd> Robot</kwd><kwd> NodeNCU</kwd><kwd> MQTT</kwd></kwd-group></article-meta></front><body><sec id="s1"><title>摘要</title><p>论文提出了一种采用NodeMCU作为主控，通过NodeMCU的WIFI功能让机器人接入互联网，使用MQTT协议实现NodeMCU和Android程序通信，把Android程序的语音控制信息发送到NodeMCU实现声控。此外还设计了语音合成与播报功能，实现人与机器人的互动。经过测试表明，使用Android程序实现机器人的声控能达到很好的控制效果。</p></sec><sec id="s2"><title>关键词</title><p>Android，语音识别，声控，机器人，NodeNCU，MQTT</p></sec><sec id="s3"><title>Design of Voice Control Robot Based on Android Program<sup> </sup></title><p>Jianping Li<sup>*</sup>, Min Xie<sup>#</sup>, Xuejun Zhang</p><p>School of Computer, Electronics and Information, Guangxi University, Nanning Guangxi</p><p><img src="//html.hanspub.org/file/3-1542223x5_hanspub.png" /></p><p>Received: Jun. 5<sup>th</sup>, 2021; accepted: Jul. 1<sup>st</sup>, 2021; published: Jul. 8<sup>th</sup>, 2021</p><p><img src="//html.hanspub.org/file/3-1542223x6_hanspub.png" /></p></sec><sec id="s4"><title>ABSTRACT</title><p>The paper proposes a method that uses NodeMCU as the main control, connects the robot to the Internet through the WIFI function of NodeMCU, uses the MQTT protocol to realize the communication between NodeMCU and Android programs, and sends the voice control information of the Android program to NodeMCU for voice control. In addition, speech synthesis and broadcast functions are also designed to realize the interaction between humans and robots. Tests show that the use of Android programs to realize the voice control of the robot can achieve a good control effect.</p><p>Keywords:Android, Speech Recognition, Voice Control, Robot, NodeNCU, MQTT</p><disp-formula id="hanspub.43741-formula19"><graphic xlink:href="//html.hanspub.org/file/3-1542223x7_hanspub.png"  xlink:type="simple"/></disp-formula><p>Copyright &#169; 2021 by author(s) and Hans Publishers Inc.</p><p>This work is licensed under the Creative Commons Attribution International License (CC BY 4.0).</p><p>http://creativecommons.org/licenses/by/4.0/</p><p><img src="//html.hanspub.org/file/3-1542223x8_hanspub.png" /> <img src="//html.hanspub.org/file/3-1542223x9_hanspub.png" /></p></sec><sec id="s5"><title>1. 引言</title><p>当前科学家们在不断努力使机器人实现智能化，随着机器人和传感器、人工智能等技术的结合，机器人逐渐出现在家庭、公共场所、办公室等地方，人们日常对机器人的控制需求也越来越多。为了实现人类对机器人更加方便智能的控制，控制方式在不断探索中发展，产生了键盘、屏幕、图像等方式，使用屏幕或者键盘进行控制的方式在日常生活和公共场合等场景中逐渐变得不是那么的方便 [<xref ref-type="bibr" rid="hanspub.43741-ref1">1</xref>]。</p><p>语音作为人类日常使用的交流方式，语音控制和其它的控制方式相比更加方便自然，更符合人类的行为习惯 [<xref ref-type="bibr" rid="hanspub.43741-ref2">2</xref>]，于是语音控制方式应运而生。把通过语音控制的机器人称为声控机器人，声控机器人正在展现其优势逐渐进入到人类的日常生活，为人类提供便利的服务，提高人们的生活水平和质量。大量的研究投入和科技进步，机器人行业会蓬勃发展，声控机器人会在未来大放光彩。因此，对于声控机器人的研究具有重要的意义。</p><p>考虑到人们平常中使用手机的习惯，本论文设计了一种基于Android程序语音识别声控机器人，Android程序的语音控制信息通过MQTT协议发送给NodeMCU处理控制机器人，并通过SYN6288语音合成进行人机互动。</p></sec><sec id="s6"><title>2. 系统功能设计</title><p>1) 声控。声控的前提需要实现语音识别，设计的语音识别语音指令有：前进、后退、左转、右转、停止、查询当前温度、查询当前湿度；2) 移动。由声控控制机器人做相应的移动，具体的动作有：前进、后退、左转、右转、停止；3) 温湿度检测，检测附近环境的温湿度；4) 语音应答。机器人在收到语音指令后做出相应的语音响应，实现人机互动。比如机器人收到“前进”后，机器人应答“好的前进”，当收到“查询当前温度”后，机器人回答“当前的温度为*摄氏度”。</p></sec><sec id="s7"><title>3. 系统硬件设计</title><p>图1为系统设计的框架，语音识别采用Android软件程序完成，通过MQTT协议完成和ESP8266的通信。根据图1设计硬件电路。</p><sec id="s7_1"><title>3.1. MCU主控</title><p>ESP8266是乐鑫公司开发具有WIFI功能的芯片 [<xref ref-type="bibr" rid="hanspub.43741-ref3">3</xref>]，WIFI支持STA、AP、STA+AP工作模式，该芯片集成度高，内部集成有32位的微型处理器、标准数字外设接口、电源管理模块等，结构如图2。本论文使用了基于ESP8266芯片的NodeMCU开发板做为主控 [<xref ref-type="bibr" rid="hanspub.43741-ref4">4</xref>] [<xref ref-type="bibr" rid="hanspub.43741-ref5">5</xref>]，控制和处理一系列的模块和指令。NodeMCU实用性高、成本低，大大降低了开发成本，被广泛应用到物联网上。</p><p>图1. 系统框架设计</p><p>图2. ESP8266芯片结构图</p></sec><sec id="s7_2"><title>3.2. 移动模块</title><p>移动模块的选择有轮式、腿式、复合式、履带式，选择为轮式移动结构 [<xref ref-type="bibr" rid="hanspub.43741-ref6">6</xref>]，轮式结构具有移动效率高、方便灵活的特点。用L298N电机驱动模块驱动电机，L298N的IN1、IN2、IN3、IN4四个接口与NodeMCU的D0-D3 GPIO口相连获取电机的控制信号，控制机器人前进、后退、左转、右转、停止。</p></sec><sec id="s7_3"><title>3.3. 温湿度检测</title><p>DHT11传感器测量相对湿度的范围为5%~95%RH，温度的测量范围为−20℃~+60℃，温湿度测量的范围可用于大部分的环境，使用该一个传感器可完成温湿度的检测，节约资源，故选择DHT11传感器检测温湿度。DHT11为单总线的通信方式 [<xref ref-type="bibr" rid="hanspub.43741-ref7">7</xref>]，通信协议简单，每次传输40 bit的数据给NodeMCU。40 bit数据中，传输顺序为8 bit的湿度整数 + 8 bit湿度小数 + 8 bit温度整数 + 8 bit温度小数 + 8 bit校验位，其中湿度小数的数据固定为0。湿度数据和温度数据加起来等于校验位数据说明传输正确，否则传输错误。</p></sec><sec id="s7_4"><title>3.4. 语音合成播报</title><p>SYN6288语音合成模块合成并播报语音，每次最多能合成200字节的文本，该模块为串口通信方式 [<xref ref-type="bibr" rid="hanspub.43741-ref8">8</xref>]。SYN6288可以实现中文、英文字母、数字的语音合成播报，并且支持中文、英文字母、数字的混读。给待合成的文本编码，构造封装成格式帧，SYN6288串口接收格式帧，内部会合成语音，并且用扬声器播报出来 [<xref ref-type="bibr" rid="hanspub.43741-ref9">9</xref>]。编码方式支持GB2312、GBK、BIG5、Unicode，该模块暂时不支持英文的单词和句子合成。</p></sec><sec id="s7_5"><title>3.5. 电源模块</title><p>电源模块是为了给各个模块提供足够的电压，使系统能正常工作。系统各个模块需要的供电电压：L298N需要的电压不小于6V，NodeMCU需要5V电压，DHT11、SYN6288需要3.3V电压。考虑到L298N模块有5V稳压输出，可以给NodeMCU供电，所以选择12V可充电的18650型锂电池给L298N模块供电，然后NodeMCU再输出3.3V稳压给其他模块供电。</p></sec></sec><sec id="s8"><title>4. 软件设计</title><p>软件设计分为两个部分，分别是Android程序和NodeMCU程序。</p><sec id="s8_1"><title>4.1. Android程序设计</title><p>Android程序用Android Studio开发，程序的主要内容有：语音识别、MQTT通信。用百度提供语音识别服务开发Android语音识别 [<xref ref-type="bibr" rid="hanspub.43741-ref10">10</xref>]，使用百度语音识别需要到百度云平台上注册账号，申请APP_ID、API_KEY、SECRET_KEY，然后下载百度语音识别的Android SDK导入到自己的Android项目，配置好SDK文件。</p><p>图3. Android程序设计流程图</p><p>MQTT是一种基于发布–订阅模式、传输带宽小的即时通信协议 [<xref ref-type="bibr" rid="hanspub.43741-ref11">11</xref>] [<xref ref-type="bibr" rid="hanspub.43741-ref12">12</xref>]，MQTT可分为三个部分：发布者、服务器、订阅者。Android程序作为发布者，连接MQTT服务器，建立一个MQTT主题，然后就可以向该主题发布信息，NodeMCU作为订阅者连接到该MQTT服务器和该主题就能接收到Android程序发布的信息，实现两者的即时通信。</p><p>为了把每一个识别到的语音指令转变成控制机器人的命令，同时让NodeMCU方便快速地处理这些控制信息，把每一个语音指令都进行二进制编码，建立语音指令和编码一一对应的表，当Android程序语音识别到结果，和表中的语音指令逐一匹配，如果存在匹配结果说明是语音指令，则把相应的编码通过MQTT协议发送给NodeMCU，让NodeMCU进行控制，图3为Android的设计流程。</p></sec><sec id="s8_2"><title>4.2. NodeMCU程序设计</title><p>NodeMCU开发板选择Arduino编程方式开发，程序的内容有：SYN6288的语音合成播报、MQTT通信、语音指令信息处理、L298N的运动控制、DHT11的温湿度检测。NodeMCU的工作过程：初始化，成功连接MQTT服务器后订阅相关主题，等待来自Android程序的语音控制指令，对控制指令处理，判断是什么控制指令，控制合成相应的语音和机器人运动，同时使用中断的方式进行温湿度的检测，图4为NodeMCU程序设计流程。</p><p>图4. NodeMCU程序设计流程图</p></sec></sec><sec id="s9"><title>5. 结语</title><p>论文中设计了一种基于Android语音识别，使用ESP8266 NodeMCU开发板作为主控，SYN6288语音合成的声控机器人方案，可实现远程的语音声控，解决远距离情况下的语音控制效果不理想问题。利用百度语音识别，减少自己训练语音模型库的麻烦，提高识别的准确度，降低了开发门槛，对于一些方言也可识别出来，完成声控。该方案成本低，可用于轻量级的机器人，NodeMCU可搭配其他单片机完成更复杂的机器人控制。测试结果表明，语音识别的准确率达到95%以上，声控的实时性、稳定性达到预期效果，声控效果优良，合成语音流畅。</p></sec><sec id="s10"><title>基金项目</title><p>基于人工智能的交互式智能云音箱研发与产业化，广西创新驱动发展专项，广西科技重大专项，项目编号：桂科AA21077007。</p></sec><sec id="s11"><title>文章引用</title><p>李坚平,谢 敏,张学军. 基于Android程序的声控机器人设计Design of Voice Control Robot Based on Android Program[J]. 计算机科学与应用, 2021, 11(07): 1869-1874. https://doi.org/10.12677/CSA.2021.117191</p></sec><sec id="s12"><title>参考文献</title></sec></body><back><ref-list><title>References</title><ref id="hanspub.43741-ref1"><label>1</label><mixed-citation publication-type="other" xlink:type="simple">吴凯歌. 家用机器人听视觉交互技术研究与系统实现[D]: [硕士学位论文]. 郑州: 郑州大学, 2018.</mixed-citation></ref><ref id="hanspub.43741-ref2"><label>2</label><mixed-citation publication-type="other" xlink:type="simple">郑国飞. 服务机器人语音交互技术研究及实现[D]: [硕士学位论文]. 广州: 华南理工大学, 2018.</mixed-citation></ref><ref id="hanspub.43741-ref3"><label>3</label><mixed-citation publication-type="other" xlink:type="simple">张琥石, 林伟龙, 杨发柱, 黄向军, 金星伊, 陈洁, 罗晓春, 张盈盈, 甘辛. 基于ESP8266 WiFi模块的物联网体温监测系统[J]. 物联网技术, 2020, 10(12): 32-35.</mixed-citation></ref><ref id="hanspub.43741-ref4"><label>4</label><mixed-citation publication-type="other" xlink:type="simple">林瑾. 基于ESP8266的四足步行机器人的研究[J]. 电子制作, 2020(8): 24-26.</mixed-citation></ref><ref id="hanspub.43741-ref5"><label>5</label><mixed-citation publication-type="other" xlink:type="simple">Uma, S., Eswari, R., Bhuvanya, R. and Kumar, G.S. (2019) IoT Based Voice/Text Controlled Home Ap-pliances. Procedia Computer Science, 169, 232-238. &lt;br&gt;https://doi.org/10.1016/j.procs.2020.01.085</mixed-citation></ref><ref id="hanspub.43741-ref6"><label>6</label><mixed-citation publication-type="other" xlink:type="simple">王玥玥. 多功能室内轮式机器人设计与实现[J]. 电子制作, 2021(7): 64-66+44.</mixed-citation></ref><ref id="hanspub.43741-ref7"><label>7</label><mixed-citation publication-type="other" xlink:type="simple">王小祥. 基于ESP8266的DHT11温湿度检测[J]. 数字技术与应用, 2019, 37(8): 34-35.</mixed-citation></ref><ref id="hanspub.43741-ref8"><label>8</label><mixed-citation publication-type="other" xlink:type="simple">汤巧治, 陈佳尧, 陈双燕. 一种语音称重器的设计与实现[J]. 轻工科技, 2019, 35(11): 83-85.</mixed-citation></ref><ref id="hanspub.43741-ref9"><label>9</label><mixed-citation publication-type="other" xlink:type="simple">褚大伟. 语音识别交互在智能家居中的研究与应用[D]: [硕士学位论文]. 石家庄: 石家庄铁道大学, 2019.</mixed-citation></ref><ref id="hanspub.43741-ref10"><label>10</label><mixed-citation publication-type="other" xlink:type="simple">林再腾. 基于Android平台的智能小车语音控制系统设计[D]: [硕士学位论文]. 青岛: 青岛科技大学, 2020.</mixed-citation></ref><ref id="hanspub.43741-ref11"><label>11</label><mixed-citation publication-type="other" xlink:type="simple">刘复源. 基于MQTT协议的消息推送平台的设计与实现[D]: [硕士学位论文]. 广州: 暨南大学, 2015.</mixed-citation></ref><ref id="hanspub.43741-ref12"><label>12</label><mixed-citation publication-type="other" xlink:type="simple">熊梦彪, 高誉, 周龙丽, 陈佳音, 黄康辉. 基于NodeMcu和MQTT协议的物联网网关设计[J]. 数字通信世界, 2019(12): 47.</mixed-citation></ref></ref-list></back></article>