<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE article  PUBLIC "-//NLM//DTD Journal Publishing DTD v3.0 20080202//EN" "http://dtd.nlm.nih.gov/publishing/3.0/journalpublishing3.dtd"><article xmlns:mml="http://www.w3.org/1998/Math/MathML" xmlns:xlink="http://www.w3.org/1999/xlink" dtd-version="3.0" xml:lang="en" article-type="research article"><front><journal-meta><journal-id journal-id-type="publisher-id">HJWC</journal-id><journal-title-group><journal-title>Hans Journal of Wireless Communications</journal-title></journal-title-group><issn pub-type="epub">2163-3983</issn><publisher><publisher-name>Scientific Research Publishing</publisher-name></publisher></journal-meta><article-meta><article-id pub-id-type="doi">10.12677/HJWC.2018.82006</article-id><article-id pub-id-type="publisher-id">HJWC-24488</article-id><article-categories><subj-group subj-group-type="heading"><subject>HJWC20180200000_69680095.pdf</subject></subj-group><subj-group subj-group-type="Discipline-v2"><subject>信息通讯</subject></subj-group></article-categories><title-group><article-title>
 
 
  无线WiFi的智能开关设计
  The Intelligent Switch Design for Wireless WiFi
 
</article-title></title-group><contrib-group><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>黄</surname><given-names>远民</given-names></name><xref ref-type="aff" rid="aff1"><sup>1</sup></xref><xref ref-type="corresp" rid="cor1"><sup>*</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>易</surname><given-names>铭</given-names></name><xref ref-type="aff" rid="aff1"><sup>1</sup></xref><xref ref-type="aff" rid="aff2"><sup>2</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>李</surname><given-names>秀忠</given-names></name><xref ref-type="aff" rid="aff1"><sup>1</sup></xref><xref ref-type="aff" rid="aff2"><sup>2</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>杨</surname><given-names>曼</given-names></name><xref ref-type="aff" rid="aff1"><sup>1</sup></xref><xref ref-type="aff" rid="aff2"><sup>2</sup></xref></contrib></contrib-group><aff id="aff1"><addr-line>佛山职业技术学院机电工程系，广东 佛山</addr-line></aff><aff id="aff2"><addr-line>null</addr-line></aff><author-notes><corresp id="cor1">* E-mail:<email>huangyuanming_27@163.com(黄远)</email>;</corresp></author-notes><pub-date pub-type="epub"><day>24</day><month>04</month><year>2018</year></pub-date><volume>08</volume><issue>02</issue><fpage>57</fpage><lpage>63</lpage><permissions><copyright-statement>&#169; Copyright  2014 by authors and Scientific Research Publishing Inc. </copyright-statement><copyright-year>2014</copyright-year><license><license-p>This work is licensed under the Creative Commons Attribution International License (CC BY). http://creativecommons.org/licenses/by/4.0/</license-p></license></permissions><abstract><p>
 
 
   
   随着互联网和我国经济的快速发展，智能化的产品不断被人们所熟知，智能开关是家居智能化的重要组成部分，它已经渐渐取代传统墙壁开关，走入了我们的日常生活中。本文设计了一种基于单片机智能无线WiFi开关控制系统。系统设计以STC89C52处理器作为系统主机控制器电路，单片机的串行口与无线传输模块esp8266wifi模块进行相关通信，人触摸手机发出的控制指令通过WiFi来控制家庭用电器的继电器，继电器开关数据通过WiFi模块发送给手机，从而实现了智能无线控制控制系统中的手机与家用电器的物物连接。设计整套设备的最终目的是实现使用手机APP即可对家庭各用电器开关进行控制，从而来实现家电的数字化和智能化。 With the rapid development of Internet and China’s economy, intelligent products are constantly being known. Smart switches are important components of home intelligence. They have gradually replaced traditional wall switches and entered our daily life. In this paper, a wireless WiFi switch control system based on MCU is designed. The system design takes STC89C52 processor as the system host controller circuit; serial port MCU communicates with wireless transmission module esp8266 WiFi module; control commands from mobile phone control the home appliance’s relay through the WiFi; relay switch data are sent to the mobile phone through WiFi module, in order to achieve the object of intelligent wireless control system. Mobile phone and home appliances were connected. The ultimate goal of designing the whole set of equipment is to realize the control of household electrical appliances switch by mobile phone APP, so as to realize digitalization and intellectualization of household appliances. 
  
 
</p></abstract><kwd-group><kwd>单片机，WiFi，智能手机，无线开关, Single Chip Microcomputer</kwd><kwd> WiFi</kwd><kwd> Intelligent Mobile Phone</kwd><kwd> Wireless Switch</kwd></kwd-group></article-meta></front><body><sec id="s1"><title>无线WiFi的智能开关设计<sup> </sup></title><p>黄远民，易铭，李秀忠，杨曼</p><p>佛山职业技术学院机电工程系，广东 佛山</p><p><img src="//html.hanspub.org/file/2-1730275x1_hanspub.png" /></p><p>收稿日期：2018年4月1日；录用日期：2018年4月17日；发布日期：2018年4月24日</p><disp-formula id="hanspub.24488-formula12"><graphic xlink:href="//html.hanspub.org/file/2-1730275x5_hanspub.png"  xlink:type="simple"/></disp-formula></sec><sec id="s2"><title>摘 要</title><p>随着互联网和我国经济的快速发展，智能化的产品不断被人们所熟知，智能开关是家居智能化的重要组成部分，它已经渐渐取代传统墙壁开关，走入了我们的日常生活中。本文设计了一种基于单片机智能无线WiFi开关控制系统。系统设计以STC89C52处理器作为系统主机控制器电路，单片机的串行口与无线传输模块esp8266wifi模块进行相关通信，人触摸手机发出的控制指令通过WiFi来控制家庭用电器的继电器，继电器开关数据通过WiFi模块发送给手机，从而实现了智能无线控制控制系统中的手机与家用电器的物物连接。设计整套设备的最终目的是实现使用手机APP即可对家庭各用电器开关进行控制，从而来实现家电的数字化和智能化。</p><p>关键词 :单片机，WiFi，智能手机，无线开关</p><disp-formula id="hanspub.24488-formula13"><graphic xlink:href="//html.hanspub.org/file/2-1730275x6_hanspub.png"  xlink:type="simple"/></disp-formula><p>Copyright &#169; 2018 by authors and Hans Publishers Inc.</p><p>This work is licensed under the Creative Commons Attribution International License (CC BY).</p><p>http://creativecommons.org/licenses/by/4.0/</p><p><img src="//html.hanspub.org/file/2-1730275x7_hanspub.png" /> <img src="//html.hanspub.org/file/2-1730275x8_hanspub.png" /></p></sec><sec id="s3"><title>1. 引言</title><p>随着科学技术和社会经济的迅猛发展，人类社会中自动控制，智能控制越来越普及，而单片机正是这种技术普及的基础 [<xref ref-type="bibr" rid="hanspub.24488-ref1">1</xref>] 。无线网络技术的快速发展和日趋成熟，智能手机的普及率越来越高，WiFi技术也得到了非速的发展，已经完全融入了我们的生活，而且随着科学技术的快速发展，人民追求越来越高的生活质量 [<xref ref-type="bibr" rid="hanspub.24488-ref2">2</xref>] [<xref ref-type="bibr" rid="hanspub.24488-ref3">3</xref>] 。目前的室内灯开关的设计和装修大多采用固定式按键和触摸平板的方式，传统的室内灯控制方式已不再满足现代人们对生活水平的需求，而目前的室内灯开关的设计和装修大多采用固定式按键和触摸平板的方式，相比之下，WiFi控制不仅减少了硬件线路成本，易于维修也显得较为方便。因此，利用WiFi传输速度快、覆盖面大、抗干扰能力强等优点，本文设计了无线WiFi的智能开关 [<xref ref-type="bibr" rid="hanspub.24488-ref4">4</xref>] [<xref ref-type="bibr" rid="hanspub.24488-ref5">5</xref>] 。</p></sec><sec id="s4"><title>2. 系统总体设计方案</title><p>基于WiFi模块的智能开关系统主要三部分组成：一是、智能移动终端。采用Java编写手机APP (TCP)连接，通过手机APP软件实现用户对系统的界面进行控制功能。二是、负责广播信息AP节点。通过AP建立无线wifi网络，手机客户端和家庭各个用电器开关节点模块采用UDP协议广播机制实现数据的交换功能。三是、无线开关控制模块。该部分主要是由串口WiFi模块、单片机、驱动电路组成。单片机作为终端控制设备，主要实现的功能是与串口WiFi模块实现数据的交换及系统终端有用数据的存储。本设计采用STC89C52单片机完成整个系统的控制流程。手机端软件设置操作界面登陆账号，WiFi模块连入网络，实现系统设计(图1)。</p></sec><sec id="s5"><title>3. 无线开关控制模块硬件设计</title><sec id="s5_1"><title>3.1. 无线开关控制模块总体设计框架</title><p>无线开关控制模块总体设计框架如图2所示。硬件电路主要由单片机、继电器驱动电路、WiFi模块电路组成。本设计采用STC89C52单片机完成整个系统的控制流程。STC89C52RC是STC公司生产的一种低功耗、高性能CMOS8位微控制器，具有8 K字节系统可编程Flash存储器。STC89C52使用经典的MCS-51内核，但是做了很多的改进使得芯片具有传统51单片机不具备的功能。在单芯片上，拥有灵巧的8位CPU和在系统可编程Flash，使得STC89C52为众多嵌入式控制应用系统提供高灵活、超有效的</p><p>图1. 系统总体设计框图</p><p>图2. 硬件设计的系统框图</p><p>解决方案。手机端软件设置操作界面登陆账号，WiFi模块连入网络，实现系统设计。图3为无线WiFi智能开关电路原理图。</p></sec><sec id="s5_2"><title>3.2. 控制器的选择</title><p>综合考虑到本系统成本及模块体积大小的因素，本设计选用STC89C52单片机。本设计系统的数据传输方式采用串口通信，而此芯片可以直接利用它和WiFi模块进行通信从而实现无线数据的转发，软件程序中通过串口的中断检测一帧的数据是否完成的传送 [<xref ref-type="bibr" rid="hanspub.24488-ref6">6</xref>] 。该单片机的串STC89C52是一种低功耗、高性能CMOS 8位微控制器，具有4 K在系统可编程Flash存储器。在单芯片上，拥有灵巧的8位CPU和在系统可编程Flash，使得STC89C52为众多嵌入式控制应用系统提供高灵活、超有效的解决方案。本文设计的系统采用的是单片机的工作方式1，采用中断方式与WiFi模块进行通信，从而节省了查询方式cpu，速度也更快 [<xref ref-type="bibr" rid="hanspub.24488-ref6">6</xref>] 。</p></sec><sec id="s5_3"><title>3.3. WiFi模块</title><p>esp8266模块是基于UART接口的WiFi无线网络模块，能够实现无线网络和用户串口数之间的交换 [<xref ref-type="bibr" rid="hanspub.24488-ref7">7</xref>] [<xref ref-type="bibr" rid="hanspub.24488-ref8">8</xref>] 。通过串口WiFi模块与手机之间通信，使用的是ASCII码，手机把编码变为ASCII码进行发射，UART-WIFI会接收ASCII码并产生中断给单片机 [<xref ref-type="bibr" rid="hanspub.24488-ref9">9</xref>] [<xref ref-type="bibr" rid="hanspub.24488-ref10">10</xref>] 。此WiFi模块可以通过终端像普通路由器一样设置和修改密码，也可以通过配置软件进行相应设置和修改，其具有较高的安全性。</p></sec><sec id="s5_4"><title>3.4. 无线WiFi模块esp8266的配置</title><p>主要利用UDP通信模式，支持串口配置参数的方式。UDP模式下模块将本地UDP端口收到的所有数据(含其他多个远程端口的数据)报转发至串口 [<xref ref-type="bibr" rid="hanspub.24488-ref11">11</xref>] 。esp8266模块的基本配置如下：创建网络名称：xew026；密码：1xe76；IP地址：103.212.33.134，端口是8129；子网掩码：255.255.255.0；默认网关：192.168.0.1。</p><p>图3. 无线WiFi智能开关电路原理图</p></sec></sec><sec id="s6"><title>4. 系统软件设计</title><sec id="s6_1"><title>4.1. 系统的程序流程图</title><p>本系统软件设计包含一个主程序和一个中断程序，其中主函数包括六个子函数；主程序的流程图如图4所示。</p></sec><sec id="s6_2"><title>4.2. Wifi模块程序</title><p>图4. 无线WiFi智能开关电路原理图</p><p>图5. 现场测试</p></sec></sec><sec id="s7"><title>5. 结果测试</title><p>实验环境为移动终端采用的OPPO R9，联发科MT6755八核处理器。通过应用商城或者豌豆荚将该上位机软件安装到该手机上。为了方便调试，选用四个LED指示灯(电饭煲开关、儿童房开关、电视机开关、热水器开关)，通过手机上位机程序发送控制指令，能够方便实现对以上四个用电器开关控制，验证了设计的方案(图5)。</p></sec><sec id="s8"><title>6. 结束语</title><p>本文设计的基于单片机的手机WiFi模块的智能无线开关系统，采用目前较新的控制方式——移动客户端控制 + 无线WiFi，这种方式不仅充分利用WiFi的传输速度快、传输距离远、覆盖面大、抗干扰能力强等优点，而且Android平台开发成本低、价格低廉、使用方便，适应时代发展，具有很好的市场开发前景。</p></sec><sec id="s9"><title>基金项目</title><p>智能制造行业工业机器人技术科技创新研究与应用平台(2014AG10015)。</p></sec><sec id="s10"><title>文章引用</title><p>黄远民,易 铭,李秀忠,杨 曼. 无线WiFi的智能开关设计 The Intelligent Switch Design for Wireless WiFi[J]. 无线通信, 2018, 08(02): 57-63. https://doi.org/10.12677/HJWC.2018.82006</p></sec><sec id="s11"><title>参考文献</title></sec></body><back><ref-list><title>References</title><ref id="hanspub.24488-ref1"><label>1</label><mixed-citation publication-type="other" xlink:type="simple">李晓阳. WiFi技术及其应用与发展[J]. 信息技术, 2012(2): 196 -198.</mixed-citation></ref><ref id="hanspub.24488-ref2"><label>2</label><mixed-citation publication-type="other" xlink:type="simple">徐虎, 彭正涛, 赵俊逸. 基于WiFi 的Android移动设备语音通信系统的设计开发[J]. 计算机应用与软件, 2012(11):  225-228, 238.</mixed-citation></ref><ref id="hanspub.24488-ref3"><label>3</label><mixed-citation publication-type="other" xlink:type="simple">侯维岩, 曾磊, 张海峰. 工业无线测控网络中WiFi无线终端设计与实现[J]. 自动化与仪表, 2011(8): 41-44.</mixed-citation></ref><ref id="hanspub.24488-ref4"><label>4</label><mixed-citation publication-type="other" xlink:type="simple">王雷, 蓝箭, 陈雪娟, 陈峰. 基于Android平台的无线WiFi控制方法[J]. 微型电脑应用, 2012(7): 58 -61.</mixed-citation></ref><ref id="hanspub.24488-ref5"><label>5</label><mixed-citation publication-type="other" xlink:type="simple">杨帆, 赵东东. 基于Android平台的WiFi定位[J]. 电子测量技术, 2012(9): 116 -119, 124.</mixed-citation></ref><ref id="hanspub.24488-ref6"><label>6</label><mixed-citation publication-type="other" xlink:type="simple">余海, 曹蕾. 基于WiFi的无线网状(Mesh)组网技术[J]. 现代电子技术, 2011(10): 120-122.</mixed-citation></ref><ref id="hanspub.24488-ref7"><label>7</label><mixed-citation publication-type="other" xlink:type="simple">孙继平, 李晨鑫. 基于WiFi和计时误差抑制的TOA煤矿井下目标定位方法[J]. 煤炭学报, 2014(1): 192 -197.</mixed-citation></ref><ref id="hanspub.24488-ref8"><label>8</label><mixed-citation publication-type="other" xlink:type="simple">孙弋, 徐瑞华. 基于WiFi技术的井下多功能便携终端的设计与实现[J]. 工矿自动化, 2007(3): 60 -63.</mixed-citation></ref><ref id="hanspub.24488-ref9"><label>9</label><mixed-citation publication-type="other" xlink:type="simple">刘辛酉. WiFi通信的安全分析[J]. 信息通信技术, 2009(4): 50-56.</mixed-citation></ref><ref id="hanspub.24488-ref10"><label>10</label><mixed-citation publication-type="other" xlink:type="simple">卢灵, 周贤军. 基于WiFi的嵌入式视频监控系统设计[J]. 电视技术, 2013(1): 157-160, 168.</mixed-citation></ref><ref id="hanspub.24488-ref11"><label>11</label><mixed-citation publication-type="other" xlink:type="simple">曾磊, 张海峰, 侯维岩. 基于WiFi的无线测控系统设计与实现[J]. 电测与仪表, 2011(7): 81-83, 96.</mixed-citation></ref></ref-list></back></article>