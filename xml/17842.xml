<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE article  PUBLIC "-//NLM//DTD Journal Publishing DTD v3.0 20080202//EN" "http://dtd.nlm.nih.gov/publishing/3.0/journalpublishing3.dtd"><article xmlns:mml="http://www.w3.org/1998/Math/MathML" xmlns:xlink="http://www.w3.org/1999/xlink" dtd-version="3.0" xml:lang="en" article-type="research article"><front><journal-meta><journal-id journal-id-type="publisher-id">SEA</journal-id><journal-title-group><journal-title>Software Engineering and Applications</journal-title></journal-title-group><issn pub-type="epub">2325-2286</issn><publisher><publisher-name>Scientific Research Publishing</publisher-name></publisher></journal-meta><article-meta><article-id pub-id-type="doi">10.12677/SEA.2016.53023</article-id><article-id pub-id-type="publisher-id">SEA-17842</article-id><article-categories><subj-group subj-group-type="heading"><subject>SEA20160300000_39816470.pdf</subject></subj-group><subj-group subj-group-type="Discipline-v2"><subject>工程技术</subject></subj-group></article-categories><title-group><article-title>
 
 
  基于单片机的投币式全自动豆浆机系统设计
  The Design of Coin Operated Automatic Soya Bean Milk Machine Systems
 
</article-title></title-group><contrib-group><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>何</surname><given-names>聪聪</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>乔</surname><given-names>刘洋</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>张</surname><given-names>建</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>胡</surname><given-names>茂博</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>徐</surname><given-names>安安</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>吴</surname><given-names>珊珊</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="corresp" rid="cor1"><sup>*</sup></xref></contrib></contrib-group><aff id="aff2"><addr-line>安徽大学电气工程与自动化学院，安徽 合肥</addr-line></aff><aff id="aff1"><addr-line>null</addr-line></aff><author-notes><corresp id="cor1">* E-mail:<email>2276569215@qq.com(吴珊)</email>;</corresp></author-notes><pub-date pub-type="epub"><day>07</day><month>06</month><year>2016</year></pub-date><volume>05</volume><issue>03</issue><fpage>204</fpage><lpage>211</lpage><permissions><copyright-statement>&#169; Copyright  2014 by authors and Scientific Research Publishing Inc. </copyright-statement><copyright-year>2014</copyright-year><license><license-p>This work is licensed under the Creative Commons Attribution International License (CC BY). http://creativecommons.org/licenses/by/4.0/</license-p></license></permissions><abstract><p>
 
 
   
   本文以单片机技术为核心，以机械平衡装置，电磁感应等应用为辅助技术，设计了基于单片机的投币式全自动豆浆机系统的设计。产品考虑到了实际的制作过程的技术方面的取舍，又结合了商业运营可能性，如尽量使用廉价可靠材料，使用较为透明的材料，投币器放弃电子设计而使用较为简单的机械设计。 This paper takes the single chip computer technology as the core, applies to mechanical balance device and electromagnetic induction for assistive technology, designs a coin operated automatic soybean milk machine system which based on single chip. Product takes into consideration the actual technical aspects of production process of trade-offs, and combines with the business possibilities, for example, using cheap and reliable and more transparent materials. Coin machine abandons electronic design and uses relatively simple mechanical design.
    
  
 
</p></abstract><kwd-group><kwd>单片机技术，电磁感应，投币式全自动豆浆机系统, Single Chip Microcomputer Technique</kwd><kwd> Electromagnetic Induction</kwd><kwd> The Coin Operated Automatic Soya Bean Milk Machine</kwd></kwd-group></article-meta></front><body><sec id="s1"><title>基于单片机的投币式全自动豆浆机系统设计<sup> </sup></title><p>何聪聪，乔刘洋，张建，胡茂博，徐安安，吴珊珊<sup>*</sup></p><p>安徽大学电气工程与自动化学院，安徽 合肥</p><disp-formula id="hanspub.17842-formula317"><graphic xlink:href="http://html.hanspub.org/file/4-2690219x7_hanspub.png"  xlink:type="simple"/></disp-formula><p>收稿日期：2016年6月3日；录用日期：2016年6月19日；发布日期：2016年6月22日</p><disp-formula id="hanspub.17842-formula318"><graphic xlink:href="http://html.hanspub.org/file/4-2690219x8_hanspub.png"  xlink:type="simple"/></disp-formula></sec><sec id="s2"><title>摘 要</title><p>本文以单片机技术为核心，以机械平衡装置，电磁感应等应用为辅助技术，设计了基于单片机的投币式全自动豆浆机系统的设计。产品考虑到了实际的制作过程的技术方面的取舍，又结合了商业运营可能性，如尽量使用廉价可靠材料，使用较为透明的材料，投币器放弃电子设计而使用较为简单的机械设计。</p><p>关键词 :单片机技术，电磁感应，投币式全自动豆浆机系统</p><disp-formula id="hanspub.17842-formula319"><graphic xlink:href="http://html.hanspub.org/file/4-2690219x9_hanspub.png"  xlink:type="simple"/></disp-formula></sec><sec id="s3"><title>1. 引言</title><p>全自动化豆浆机 [<xref ref-type="bibr" rid="hanspub.17842-ref1">1</xref>] - [<xref ref-type="bibr" rid="hanspub.17842-ref3">3</xref>] 是一个与传统豆浆机有本质区别的新产品，系统主要的难点是系统的全自动化与高效率的实现，将市面上的投币器，电压转换器，水箱和半自动豆浆机进行大幅度改进，引入单片机(此单片机为AT89S51)控制组件 [<xref ref-type="bibr" rid="hanspub.17842-ref4">4</xref>] ，将它们连接起来，组成一个新的全自动化的系统，在搅拌部件和水箱里面加入了压力传感器和光传感器用来对整个系统的机械部件进行信息化，而单片机是整个系统的核心处理部件，采用了PID控制算法，可对初始电压和电机转速进行有效控制，机器的抖动较为轻微。整个系统运行稳定有效。</p></sec><sec id="s4"><title>2. 设计和整体思路</title><p>通电后，系统确定豆槽是否存在豆子，如果存在，单片机指示加温装置开始对水槽开水区进行加热，水沸腾后，保温装置会维持水槽开水区里的水在合适的温度，如果系统未发现豆子或水量不足，则报警灯会报警。</p><p>单片机控制放进搅拌槽里的水量和豆子量，系统工作固定的时间，将混合物输入到保温设备中存起来。</p><p>投入一元硬币，因为硬币投入口距离压力传感器的距离是固定的，所以压力传感器可以将所受到的压力转化为电信号输入单片机中进行处理分析，如果确定为一元硬币，则系统启动开始输出豆浆，否则系统不响应。</p><p>系统确定启动后，系统机械装置放下杯子，单片机控制从保温设备中输出固定的豆浆到设备下方的杯子中。单片机同时控制清洗系统，每隔固定的时间，对系统进行清理，水箱豆浆区充满后，系统停止榨豆浆。</p><p>此项目的创新点在于通过单片机来控制半自动豆浆机的运转，只需要打开系统开关，投入一枚硬币，系统就会输出一杯热豆浆，帮助位于快时代的我们节约时间。</p></sec><sec id="s5"><title>3. 硬件电路和软件的实现</title><p>市场上的豆浆机基本都是半自动化的，而且市面上并没有专门用于本次项目的投币器和水箱，所以必须对买来的水箱和投币器进行针对化改进，在了解其原理的基础上，对水箱和投币器进行拆卸，改动了其电路部分。而且由于单片机正常工作电压是5 V，而投币器正常工作电压是12 V，还需要对不同组件之间的电压进行转换。</p><sec id="s5_1"><title>3.1. 硬件的设计</title><sec id="s5_1_1"><title>3.1.1. 电压转换器</title><p>电压转换器(用于实现单片机的5 V电压要求和投币器12 V电压要求统一化)其原理图1所示。</p><p>当芯片内开关管(Q1)导通时，电源经取样电阻R1、电感L1、MC34063的1脚和2脚接地，此时电感L1开始存储能量，而由C4对负载提供能量。当Q1断开时，电源和电感同时给负载和电容C4提供能量。电感在释放能量期间，由于其两端的电动势极性与电源极性相同，相当于两个电源串联，因而负载上得到的电压高于电源电压。开关管导通与关断的频率称为芯片的工作频率。只要此频率相对负载的时间常数足够高，负载上便可获得连续的直流电压 [<xref ref-type="bibr" rid="hanspub.17842-ref5">5</xref>] 。</p></sec><sec id="s5_1_2"><title>3.1.2. 投币器的设计</title><p>本豆浆机采用比较式投币器(见图1)，它由比较线圈，AD，检测光眼，进币口电机等组成，工作原理如下：</p><p>当投入硬币后，当硬币经过样币时，比较线圈感应出比较电压，经整形处理送入到AD转换器当中，经AD转换后送到CPU。</p><p>投币器主要功能包括四个部分：一是用于产生高频方波的振荡电路 [<xref ref-type="bibr" rid="hanspub.17842-ref6">6</xref>] ，而是用于控制真假币流向的电闸门，三是用于检测硬币投入过程的各个位置的光电传感器，最后就是控制所有检测和控制的电路的集中控制单元 [<xref ref-type="bibr" rid="hanspub.17842-ref5">5</xref>] [<xref ref-type="bibr" rid="hanspub.17842-ref7">7</xref>] 。</p><p>方波振荡电路：</p><p>这个功能模块最重要的是产生高频信号的线圈，当没有任何铁质物品进入线圈时，这个高频方波振荡电路输出的频率是很稳定的、一致的高频信号，当有铁质物品进入时，这个线圈的电感值变化，从而引起振荡电路输出的高频信号频率变化，只要通过检测这些变化值，便可以区分出真假币 [<xref ref-type="bibr" rid="hanspub.17842-ref8">8</xref>] 。</p><p>电闸门驱动：</p><p>电闸门是一个简单的直流电机控制闸门，它的作用就是检测到硬币为真时，驱动小电机正转，使真币进入，然后再反转关闭进币口，如检查到硬币为假时，则让硬币退出 [<xref ref-type="bibr" rid="hanspub.17842-ref9">9</xref>] (见图2，图3)。</p></sec><sec id="s5_1_3"><title>3.1.3. 水箱的设计</title><p>存储豆浆的水箱结构类似于自动电热开水器，分为两个大区域，一个区域负责存储开水，另一个区域用来存储成品豆浆，其由水箱、水路通道以及电加热控制电路组成 [<xref ref-type="bibr" rid="hanspub.17842-ref10">10</xref>] 。结构示意图如下图4所示，电加热控制电路如下图5所示。</p><p>图1. 5~12 V升压电路</p><p>图2. 方波振荡电路</p><p>图3. 电闸门驱动</p><p>图4. 水箱结构示意图</p><p>图5. 电加热控制电路</p><p>水箱的工作原理工作原理：</p><p>1) 水箱、水通道：生水箱进水。水位上升浮子使进水阀关闭。浮子开关s2动作。电热管加热，水开后沸水被蒸汽压入储水箱。</p><p>煮沸储存箱水满时，浮子sl动作，恒温电热管工作。保持开水提供饮用。当生水箱水位下降时，浮球下降时，进水阀开通加水，重复循环过程。周而复始保证开水的正常供应。</p><p>2) 电加热器控制电路：接通OS，主电路得电。LEDl灯点亮。当生水箱水位达到设定水位时。水位控制开关S2闭合。接触器KM1线圈得电动作。主触头闭合，加热管EHl~EH3得电加热，开水进入储水箱。若开水储量不足，则保温电热管EH4小工作，若开水储量达到设定值，Sl动作。</p><p>Wll与触点一O2接通。接触器KMl的线圈断电复位，主触头断开EHl~EH3加热管电源。</p><p>停止加热。此时。交流接触器KM2的线圈得电动作，KM2的触头闭合。EH4得电投入保温。在保温过程中，开水的温度受温控开关sTl出水与ST2控制。低于sTl与ST2的设定温度时。温控开关自动通电加加热；如温度高于设定值时温控开关STT与ST2则自动断电，停止加热。</p><p>当水箱缺水时，水位开关S2自动断开电源，确保加热器在无水或水量不足的情况下立即切断电源。当开水储量不足时。水位开关s1也自动断开，保温加热管也不参与加热。SA为再沸腾按钮。</p></sec><sec id="s5_1_4"><title>3.1.4. 自动清洗装置</title><p>1) 自动清洗装置是独立于搅拌装置的一套系统。负责对搅拌系统，水箱进行清洁，系统的启动需要两个条件。当储豆箱里面的豆子所剩无几的时候，储豆箱底部的红外发射装置发出的红外线被顶部的感知元件所感知，输出电信号到单片机，这是自动清洗装置开始清理的第一个条件。</p><p>2) 系统检测水箱里面的豆浆高度，如果依然存在较多豆浆，则系统不工作，当水箱里面的豆浆低于一定量时候，输出信号到单片机，这是第二个条件，系统开始工作。</p><p>3) 系统开始后，上方的引流开关被打开，水流流入搅拌器大概2 min后，搅拌器空转7秒，便于清洗干净，之后下方的引流管打开，将清理过的水流入水箱，对水箱进行冲洗，最后的脏水由水箱的第二个流出口流出到系统外，持续进行2次。</p></sec><sec id="s5_1_5"><title>3.1.5. 其他电路的设计</title><p>系统所使用的核心部件由一般的半自动豆浆机改进而成，单片机控制半自动豆浆机搅拌部件的开关，由输出电平来影响搅拌部件的供电，在豆浆机的杯体下方打了一个圆洞，接入了引流管，当豆浆机工作一定时间后，豆浆通过引流系统将打好的豆浆输入保温箱。</p><p>在磨豆浆之前我们加有报警的电路，我们在豆槽和水槽的下方加入了压力传感器，将压力传感器的信号输出到单片机，若其中某传感器的压力不足即原料不足时，我们便通过单片机输出信号到报警灯和蜂鸣器上，实现报警提示。</p><p>另一方面我们加入了防溢电阻器，防溢电阻器被焊接在豆浆机搅拌部件最上端。由于系统存在误差，有可能出现豆浆过量的情况，防溢电阻器中含有压力传感器，当传感器感受到压力后，将信号输出到单片机，控制搅拌部件停止工作。</p><p>用来控制自动清洗的时钟电路，我们引用的是AT89S51内部的定时器 [<xref ref-type="bibr" rid="hanspub.17842-ref11">11</xref>] ，以此来记录时间，一定时间之后自动清洗装置。</p><p>我们还有一个比较好的设计就是防空转保护电路，防空转保护电路不是独立的部件，杯体水位正常时，防空转电极的下端应该位于豆浆或者热水中，当杯体水位过低，或者机头不接触水位时候，微处理器通过防空转电极检测到状态后，将信号输入单片机，单片机控制电路断开，在一定时间内，禁止搅拌部件工作。</p></sec></sec><sec id="s5_2"><title>3.2. 软件的设计</title><sec id="s5_2_1"><title>3.2.1. 水箱软件流程图</title><p>此水箱软件流程图即上述过程中存储豆浆的水箱，其中包含了温度传感器、水位传感器、LED显示屏等等，来保证水箱的正常工作。在使用水箱之前需要对其进行初始化操作，首先要将水箱清洗干净，然后豆浆进入水箱，达到一定的容量，最后等待单片机给出出豆浆的信号。水箱要保证内部豆浆的容量、温度等等，就需要如图6所示的流程。</p></sec><sec id="s5_2_2"><title>3.2.2. 单片机控制流程</title><p>准备阶段：通电后，一定量的黄豆从进料口进入豆浆机，通过物位检测检测黄豆量；如达到额定值，就向豆浆机内注水，再用流量计控制进水量。豆浆机开始工作，一段时间后，豆浆磨好，阀门打开，豆浆从引流管流入保温箱，通过浮子检测保温箱的液面高度，反馈到阀门，判断是否关闭。另一方面，通过保温箱内的温度传感器检测保温箱温度，如未达到额定温度，电热管开始工作，直至保温箱的温度达到所需要的温度。</p><p>工作阶段：向投币器投入硬币后，检测器检测此硬币是否为真币，是假硬币直接退出硬币，若为真币，则保温箱阀门开启，流量计控制豆浆流出的量。在此同时单片机内的计时器一直在计数，若计数器达到了指定的时间，若保温箱中有豆浆则等待豆浆流完，在此期间豆浆机将不会被启动，而且会控制黄豆流入阀门，使其不流入豆浆机。豆浆流完之后，单片机控制清洗电机工作，对豆浆机和保温箱进行清洗。清洗一段时间后，整个系统重新进入准备阶段。反复如此。</p><p>单片机控制的主要流程图如图7所示。</p><p>图6. 水箱软件流程图</p><p>图7. 单片机控制主要流程</p></sec></sec></sec><sec id="s6"><title>4. 总结</title><p>本次项目主要是设计一个投币式的的豆浆机，投币器与豆浆机充分结合，当有硬币投入时，豆浆流出口就会流出一杯豆浆，可省去繁琐的人工操作。机械，控制，电路等多种原件相结合实现一体化设计，实现自动加水、磨豆、搅拌、清洗、出豆浆等过程。整个系统的金属支架全部由手工焊成，为了减小整个系统误差，提高控制精度，在搅拌部件下方，微型电机下方都安装了减震器，整个系统的运行非常精确，在设计过程中我们充分发挥了创新精神，焊接了很多专用的配件，使用了很多日常生活中的廉价材料。小组成员通过本次创新项目的锻炼，动手能力得到了很大的提高，对控制系统的稳定实现有了进一步的理解。</p></sec><sec id="s7"><title>基金项目</title><p>安徽大学创新创业训练计划(201510357061)，安徽大学教育质量提升计划项目(xjjyxm14048)。</p></sec><sec id="s8"><title>文章引用</title><p>何聪聪,乔刘洋,张 建,胡茂博,徐安安,吴珊珊. 基于单片机的投币式全自动豆浆机系统设计The Design of Coin Operated Automatic Soya Bean Milk Machine Systems[J]. 软件工程与应用, 2016, 05(03): 204-211. http://dx.doi.org/10.12677/SEA.2016.53023</p></sec><sec id="s9"><title>参考文献 (References)</title></sec></body><back><ref-list><title>References</title><ref id="hanspub.17842-ref1"><label>1</label><mixed-citation publication-type="other" xlink:type="simple">雷文礼, 任新成. 基于单片机的全自动豆浆机的设计[J]. 延安大学学报(自然科学版), 2015(2): 80-81.</mixed-citation></ref><ref id="hanspub.17842-ref2"><label>2</label><mixed-citation publication-type="other" xlink:type="simple">姜风国, 刘鹏. 基于AT89C52单片机的全自动豆浆机控制系统[J]. 烟台大学学报(自然科学与工程版), 2014, 27(1): 75-78.</mixed-citation></ref><ref id="hanspub.17842-ref3"><label>3</label><mixed-citation publication-type="other" xlink:type="simple">李冬娟. 多功能豆浆机的研制和控制模块的实现[D]: [硕士学位论文]. 广州: 华南理工大学, 2015.</mixed-citation></ref><ref id="hanspub.17842-ref4"><label>4</label><mixed-citation publication-type="other" xlink:type="simple">侯殿有. 单片机C语言程序设计[M]. 北京: 人民邮电出版社, 2010.</mixed-citation></ref><ref id="hanspub.17842-ref5"><label>5</label><mixed-citation publication-type="other" xlink:type="simple">邱关源, 罗先觉. 电路[M]. 北京: 高等教育出版社, 2006.</mixed-citation></ref><ref id="hanspub.17842-ref6"><label>6</label><mixed-citation publication-type="other" xlink:type="simple">康华光. 电子技术基础模拟部分[M]. 北京: 高等教育出版社, 2006.</mixed-citation></ref><ref id="hanspub.17842-ref7"><label>7</label><mixed-citation publication-type="other" xlink:type="simple">康华光. 电子技术基础数字部分[M]. 北京: 高等教育出版社, 2006.</mixed-citation></ref><ref id="hanspub.17842-ref8"><label>8</label><mixed-citation publication-type="other" xlink:type="simple">王兆安, 刘进军. 电力电子技术[M]. 北京: 机械工业出版社, 2009.</mixed-citation></ref><ref id="hanspub.17842-ref9"><label>9</label><mixed-citation publication-type="other" xlink:type="simple">刘锦波, 张承慧. 电机与拖动[M]. 北京: 清华大学出版社, 2006.</mixed-citation></ref><ref id="hanspub.17842-ref10"><label>10</label><mixed-citation publication-type="other" xlink:type="simple">郑文纬, 吴克坚. 机械原理[M]. 北京: 高等教育出版社, 1997.</mixed-citation></ref><ref id="hanspub.17842-ref11"><label>11</label><mixed-citation publication-type="other" xlink:type="simple">王全. AT89S51单片机原理及应用技术[M]. 北京: 机械工业出版社, 2015.</mixed-citation></ref></ref-list></back></article>