<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE article  PUBLIC "-//NLM//DTD Journal Publishing DTD v3.0 20080202//EN" "http://dtd.nlm.nih.gov/publishing/3.0/journalpublishing3.dtd"><article xmlns:mml="http://www.w3.org/1998/Math/MathML" xmlns:xlink="http://www.w3.org/1999/xlink" dtd-version="3.0" xml:lang="en" article-type="research article"><front><journal-meta><journal-id journal-id-type="publisher-id">AIRR</journal-id><journal-title-group><journal-title>Artificial Intelligence and Robotics Research</journal-title></journal-title-group><issn pub-type="epub">2326-3415</issn><publisher><publisher-name>Scientific Research Publishing</publisher-name></publisher></journal-meta><article-meta><article-id pub-id-type="doi">10.12677/AIRR.2020.93019</article-id><article-id pub-id-type="publisher-id">AIRR-36795</article-id><article-categories><subj-group subj-group-type="heading"><subject>AIRR20200300000_70896492.pdf</subject></subj-group><subj-group subj-group-type="Discipline-v2"><subject>信息通讯</subject><subject> 工程技术</subject></subj-group></article-categories><title-group><article-title>
 
 
  基于机器视觉的散热器钎焊缺陷检测方法研究
  Research on Detection Method of Radiator Brazing Based on Machine Vision
 
</article-title></title-group><contrib-group><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>王</surname><given-names>姣</given-names></name><xref ref-type="aff" rid="aff1"><sup>1</sup></xref><xref ref-type="aff" rid="aff2"><sup>2</sup></xref></contrib></contrib-group><aff id="aff1"><label>1</label><addr-line>null</addr-line></aff><aff id="aff2"><label>1</label><addr-line>天津工业大学电气工程与自动化学院，天津</addr-line></aff><pub-date pub-type="epub"><day>30</day><month>07</month><year>2020</year></pub-date><volume>09</volume><issue>03</issue><fpage>163</fpage><lpage>169</lpage><permissions><copyright-statement>&#169; Copyright  2014 by authors and Scientific Research Publishing Inc. </copyright-statement><copyright-year>2014</copyright-year><license><license-p>This work is licensed under the Creative Commons Attribution International License (CC BY). http://creativecommons.org/licenses/by/4.0/</license-p></license></permissions><abstract><p>
 
 
  为了实现钎焊工业现场复杂环境下散热器缺陷的在线检测，文章提出了基于机器视觉的散热器钎焊缺陷检测方法。采用灰度化和高斯滤波对图像进行预处理，使用Canny边缘检测算子获取边缘图像；利用八邻域连通域分析方法查找所有边缘连通域，使用边界清除算法剔除边界处边缘轮廓的干扰，进而实现散热器缺陷检测。实验结果表明散热器缺陷检测正确率为95%，可以满足散热器工业现场对准确性和检测速度的要求。
   In order to realize the online detection of radiator defects in the complex environment of the brazing industry, this paper proposes a machine vision-based radiator brazing defect detection method. Grayscale and Gaussian filtering are used to preprocess the image, and the Canny edge detection operator is used to obtain the edge image; use the eight neighbors connected domain analysis method to find all the edge connected domains, and use the boundary clearing algorithm to remove the interference of the edge contours at the boundary, thereby achieving accurate iden-tification of defects. Experimental results show that the correct rate of radiator defect detection is 95%, which can meet the accuracy and speed requirements of the radiator industry site.
 
</p></abstract><kwd-group><kwd>机器视觉，缺陷检测，八邻域连通域, Machine Vision</kwd><kwd> Defect Detection</kwd><kwd> Eight Neighbor Connected Domain</kwd></kwd-group></article-meta></front><body><sec id="s1"><title>基于机器视觉的散热器钎焊缺陷检测方法研究<sup> </sup></title><p>王姣</p><p>天津工业大学电气工程与自动化学院，天津</p><p>收稿日期：2020年7月11日；录用日期：2020年7月23日；发布日期：2020年7月30日</p><disp-formula id="hanspub.36795-formula1"><graphic xlink:href="//html.hanspub.org/file/1-2610204x5_hanspub.png"  xlink:type="simple"/></disp-formula></sec><sec id="s2"><title>摘 要</title><p>为了实现钎焊工业现场复杂环境下散热器缺陷的在线检测，文章提出了基于机器视觉的散热器钎焊缺陷检测方法。采用灰度化和高斯滤波对图像进行预处理，使用Canny边缘检测算子获取边缘图像；利用八邻域连通域分析方法查找所有边缘连通域，使用边界清除算法剔除边界处边缘轮廓的干扰，进而实现散热器缺陷检测。实验结果表明散热器缺陷检测正确率为95%，可以满足散热器工业现场对准确性和检测速度的要求。</p><p>关键词 :机器视觉，缺陷检测，八邻域连通域</p><disp-formula id="hanspub.36795-formula2"><graphic xlink:href="//html.hanspub.org/file/1-2610204x6_hanspub.png"  xlink:type="simple"/></disp-formula><p>Copyright &#169; 2020 by author(s) and Hans Publishers Inc.</p><p>This work is licensed under the Creative Commons Attribution International License (CC BY 4.0).</p><p>http://creativecommons.org/licenses/by/4.0/</p><p><img src="//html.hanspub.org/file/1-2610204x7_hanspub.png" /> <img src="//html.hanspub.org/file/1-2610204x8_hanspub.png" /></p></sec><sec id="s3"><title>1. 引言</title><p>散热器作为汽车发动机冷却系统的重要零部件之一，其性能的好坏直接影响发动机的散热效果。铝质汽车散热器的各部件经钎焊炉高温钎焊而成，在整体成型的过程中主片钎焊处钎缝往往会遭到破坏，导致散热器出现泄漏 [<xref ref-type="bibr" rid="hanspub.36795-ref1">1</xref>]，从而降低了散热器的使用性能，严重时可能会产生一定的安全隐患。目前散热器钎焊缺陷检测主要依靠人眼观察，检测人员在散热器底部打光，观察钎缝是否透光，实现缺陷检测。人工检测方法可以满足散热器缺陷检测，但是其中也存在一些不足：首先，人眼在长时间工作状态下效率会明显下降，易造成误判；其次，在高亮度打光状态下，人眼持续工作影响检测人员视力健康。为了解决人眼观察方法的局限性，很多无损检测技术开始用于金属表面缺陷检测，较为常见的方法有超声波检测、X射线检测和机器视觉 [<xref ref-type="bibr" rid="hanspub.36795-ref2">2</xref>]。</p><p>机器视觉方法首先采集待检测物体的图像，然后采用图像处理算法实现缺陷检测，是目前较为新兴的非接触无损缺陷检测技术 [<xref ref-type="bibr" rid="hanspub.36795-ref3">3</xref>]。该技术在工业生产中可以快速地实现产品的分类和质量检测，在散热器生产中，钎缝处的密封性影响散热器的散热效果和使用性能，因此采用视觉方法实现散热器质量检测。视觉检测方法不仅效率高、误判低，而且有效地解决了对人眼伤害的问题。</p><p>为了实现散热器钎焊缺陷检验，本文提出了基于机器视觉的散热器钎焊缺陷检测方法。文章着重介绍了图像处理算法部分，通过预处理、图像分割、缺陷提取等检测钎焊缺陷，识别出不合格的产品，降低产品的报废率。</p></sec><sec id="s4"><title>2. 检测系统</title>系统设计<p>本系统的检测对象是散热器芯体，如图1所示。检测区域是图中散热器的各个钎缝，其中个别钎缝处会有泄漏。</p><p>图1. 散热器芯体</p><p>图2所示为散热器缺陷图像和非缺陷图像。</p><p>图2. 缺陷图像和非缺陷图像</p><p>由于散热器体积较大，若要检测到每一个钎缝，对相机的视野范围和分辨率有要求，因此系统选择线扫相机 [<xref ref-type="bibr" rid="hanspub.36795-ref4">4</xref>] 在相同视野下获取较高质量的散热器钎缝图像。线扫方案是固定相机位置不变，提前将待测物体固定在一定卡槽内，使卡槽连续移动，这样可以降低相机抖动带来的影响。</p><p>整个硬件系统搭建方案固定相机和同轴光源 [<xref ref-type="bibr" rid="hanspub.36795-ref5">5</xref>]，匀速移动卡槽，实现对高分辨率二维缺陷图像的采集。硬件系统结构图如图3所示。</p><p>图3. 散热器硬件系统结构图</p></sec><sec id="s5"><title>3. 散热器缺陷检测算法</title><p>缺陷图像在线检测算法一般包括图像预处理、图像分割、特征提取、缺陷识别等 [<xref ref-type="bibr" rid="hanspub.36795-ref6">6</xref>]。针对散热器缺陷检测具体的算法流程如图4所示。</p><sec id="s5_1"><title>3.1. 图像预处理</title><sec id="s5_1_1"><title>3.1.1. 灰度化</title><p>一张图像是由很多像素点组成的，每一个像素点的颜色由RGB三分量表示，三分量的取值范围均为0~255，因此对图像进行灰度处理就是对RGB三个值进行处理。当像素点矩阵中每一个像素点都满足：R = G = B，此值就为灰度值。灰度化处理的方法包括分量法、最大值法、平均值法、加权平均法 [<xref ref-type="bibr" rid="hanspub.36795-ref7">7</xref>]。目前较为常用的方法是平均值法和加权平均法。</p><p>图4. 散热器缺陷检测算法流程</p></sec><sec id="s5_1_2"><title>3.1.2. 滤波算法</title><p>图像滤波算法的效果对后续边缘检测起着重要的作用。文章分别使用均值滤波、中值滤波和高斯滤波算法对灰度处理后的图像进行平滑处理，对比平滑图像经边缘检测后的效果显示高斯滤波的效果是最好的 [<xref ref-type="bibr" rid="hanspub.36795-ref8">8</xref>]。滤波后经边缘检测效果对比如图5所示。</p><p>图5. 滤波后边缘检测效果图</p><p>高斯滤波又称高斯模糊，是一种线性平滑滤波。此过程是对整幅图像进行加权平均，每一个像素点的值都为其邻域内像素灰度值加权平均得到。高斯滤波遵循正态分布，二维高斯函数：</p><disp-formula id="hanspub.36795-formula3"><label>(1)</label><graphic position="anchor" xlink:href="//html.hanspub.org/file/1-2610204x14_hanspub.png"  xlink:type="simple"/></disp-formula><p>其中x和y分别是图像横、纵坐标，σ是高斯核。</p><p>具体的操作是使用一个掩模扫描图像每一个像素，掩模中心像素点的值是掩模确定的邻域内像素加权平均灰度值。文章使用3 &#215; 3的掩模，得到的滤波效果对边缘检测提供了画质较高的图像。</p></sec><sec id="s5_1_3"><title>3.1.3. 边缘检测</title><p>文章分别使用Sobel算子和Canny算子实现图像的边缘检测，检测结果如图6所示。从图6边缘检测结果对比显示Canny算子不易受噪声的干扰，缺陷边缘定位较为准确。</p><p>Canny算子的检测原理 [<xref ref-type="bibr" rid="hanspub.36795-ref9">9</xref>] 首先对原始图像灰度化；再对灰度图像进行高斯滤波处理；接着使用一阶偏导的有限差分计算幅值和方向；然后对梯度幅值进行非极大值抑制；最后使用双阈值检测和连接边缘，双阈值参数的选取在经过多次实验确定为(30, 450)，有效地检测出钎缝边缘。</p><p>图6. Sobel边缘检测和Canny边缘检测结果图对比</p></sec></sec><sec id="s5_2"><title>3.2. 八邻域连通域分析</title><p>轮廓的查找OpenCV提供了findContours函数，实验中函数的输入为Canny边缘检测图像，数据输出得到的轮廓个数比实际轮廓多3个，轮廓查找的结果对后续缺陷特征提取增加了难度。为了更加准确地检测出散热器钎缝缺陷文章提出了基于连通域分析的区域生长算法。</p><p>连通域分析常见的邻域关系有4邻域和8邻域，文中采用8邻域连通域分析。区域生长算法基本思想是将具有相似准则的像素合并构成区域 [<xref ref-type="bibr" rid="hanspub.36795-ref10">10</xref>]。算法实现的步骤：</p><p>1) Canny边缘提取后图像中仅存在0和255两种像素值。对图像进行扫描，扫描过程中找到第一个灰度值为255的轮廓点，记为c_pt，并将c_pt作为种子生长起点，将其压入数据栈seeds和contour中；</p><p>2) 将c_pt作为中心点，遍历其8邻域像素，如果8邻域像素的灰度值与中心点的灰度值相等，其像素与中心点属于同一连通域，并将像素压入两数据栈中；</p><p>3) 删除seeds数据栈中第一个元素，并从数据栈中取出一个像素作为c_pt，返回步骤2)；</p><p>4) 当seeds数据栈为空时，返回步骤1)，寻找下一个连通域；</p><p>5) 重复1)~4)，直到图像中每个点都有其归属时，生长结束。</p></sec><sec id="s5_3"><title>3.3. 散热器缺陷提取</title><p>查找完所有的连通域后，确定了所有连通域的坐标。通过多次实验分析发现，除了钎缝区域信息外，其他干扰轮廓都处在图像边界处。为了提取准确的缺陷信息并判别缺陷，需要清除靠近图像边界的干扰。采用的清除算法步骤是：首先建立边界处像素坐标，水平方向横坐标固定不变，纵坐标循环取值；垂直方向纵坐标不变，横坐标循环取值；然后遍历每个轮廓的每一个坐标，如果某一连通域的坐标与边界像素坐标有相等，将这一连通域的所有坐标删除；最终得到钎缝区域3个连通域的坐标。使用边界清除算法得到钎缝区域图像如图7所示。</p><p>图7. 钎缝区域图像</p><p>通过对钎缝区域图像分析，缺陷部分在钎缝区域内连通域的像素个数最小。因此，提取缺陷时，保留连通域像素个数最小的轮廓坐标即可，但是边界清除算法仅仅是将边界连通域像素个数置0，并没有改变图像中连通域的个数，边界处连通域会干扰缺陷提取，所以要从像素个数非零的连通域中找出像素个数最小的连通域并保存其坐标，将其他连通域的坐标清除，即可检测出缺陷。如图8所示为缺陷检测和非缺陷检测结果图。</p><p>图8. 缺陷检测和非缺陷检测结果图</p><p>实验结果表明，文章的算法有效地清除了其他轮廓的干扰，降低了缺陷提取的算法难度，散热器缺陷的边缘检测结果也更加清晰，对后续进行缺陷判断时，提供了方便。</p></sec><sec id="s5_4"><title>3.4. 缺陷判别</title><p>为了判别待处理的散热器是否为合格产品，文章对70张图像进行实验分析，其中20张缺陷图像和50张非缺陷图像。通过对图8结果图中缺陷像素个数和非缺陷钎缝区域像素个数比较分析得到判别产品是否合格的阈值为106，大于阈值的图像为合格产品，小于阈值的图像为不合格产品。</p><p>实验检测结果统计如表1所示。</p><table-wrap id="table1" ><label><xref ref-type="table" rid="table1">Table 1</xref></label><caption><title> Experimental test resul</title></caption><table><tbody><thead><tr><th align="center" valign="middle" >散热器图像</th><th align="center" valign="middle" >检测个数</th><th align="center" valign="middle" >正确判别的个数</th><th align="center" valign="middle" >正确率</th></tr></thead><tr><td align="center" valign="middle" >缺陷图像</td><td align="center" valign="middle" >20</td><td align="center" valign="middle" >19</td><td align="center" valign="middle" >95%</td></tr><tr><td align="center" valign="middle" >非缺陷图像</td><td align="center" valign="middle" >50</td><td align="center" valign="middle" >47</td><td align="center" valign="middle" >94%</td></tr></tbody></table></table-wrap><p>表1. 实验检测结果</p></sec></sec><sec id="s6"><title>4. 实验结果及分析</title><p>为了验证方法的有效性，本实验采集了正常无缺陷和待检测缺陷图像的多个样本进行检测，实验结果统计检测成功率95%。实验过程中使用不同的方法进行结果对比，其中传统的连通域方法查找所有的边缘轮廓，提取缺陷特征时受其他轮廓影响，很难准确定位缺陷位置。本文的方法在传统方法基础上做了一些改进，通过实验观察分析发现，干扰轮廓基本在图像边界处，使用边界清除算法清除边界处细小轮廓，很好地显示并提取缺陷信息，有效地保留了缺陷区域坐标数据。</p><p>本文的算法在缺陷的漏检和误检方面失误较小，基本可以满足生产线上产品质量检测准确性和检测速度要求。</p></sec><sec id="s7"><title>5. 结论</title><p>钎缝受到破坏是导致散热器泄露较为常见的缺陷，文章针对这类缺陷检测问题，提出了机器视觉的钎焊缺陷检测方法。该方法首先通过摄像机、光源、图像采集卡和计算机等硬件设备搭建采集缺陷图像，缺陷图像经预处理后采用八邻域连通域分析查找所有连通域，接着使用边界清除算法将边界处连通域干扰剔除，然后在钎缝区域提取出最小目标区域，从而检测出缺陷。通过比较缺陷区域边界像素个数与非缺陷钎缝边界像素个数来设定阈值，判断散热器是否为合格产品。</p><p>文章基于VS平台进行多次实验检测。其结果表明，缺陷检测的正确率达到95%，充分验证了算法的可靠性，满足散热器工业现场在线检测要求，且该方法具有一定的实用价值。</p></sec><sec id="s8"><title>文章引用</title><p>王 姣. 基于机器视觉的散热器钎焊缺陷检测方法研究Research on Detection Method of Radiator Brazing Based on Machine Vision[J]. 人工智能与机器人研究, 2020, 09(03): 163-169. https://doi.org/10.12677/AIRR.2020.93019</p></sec><sec id="s9"><title>参考文献</title></sec></body><back><ref-list><title>References</title><ref id="hanspub.36795-ref1"><label>1</label><mixed-citation publication-type="other" xlink:type="simple">李政, 李扬. 铝质型管汽车散热器[J]. 汽车零部件, 2018(10): 90-94.</mixed-citation></ref><ref id="hanspub.36795-ref2"><label>2</label><mixed-citation publication-type="other" xlink:type="simple">王宇, 吴智恒, 邓志文, 刘进军, 童季刚, 莫爵贤. 基于机器视觉的金属零件表面缺陷检测系统[J]. 机械工程与自动化, 2018(4): 210-211+214.</mixed-citation></ref><ref id="hanspub.36795-ref3"><label>3</label><mixed-citation publication-type="other" xlink:type="simple">Zhao, J., Xia, X., Wang, H. and Kong, S. (2016) Design of Real-Time Steel Bars Recognition System Based on Machine Vision. 2016 8th International Conference on Intelligent Human-Machine Systems and Cy-bernetics (IHMSC), Hangzhou, 27-28 August 2016, 505-509. &lt;br&gt;https://doi.org/10.1109/IHMSC.2016.75</mixed-citation></ref><ref id="hanspub.36795-ref4"><label>4</label><mixed-citation publication-type="other" xlink:type="simple">朱瑶, 王治乐, 贺磊, 周程灏. 线扫描相机标定及畸变矫正方法[J]. 航天返回与遥感, 2017, 38(6): 46-53.</mixed-citation></ref><ref id="hanspub.36795-ref5"><label>5</label><mixed-citation publication-type="other" xlink:type="simple">朱宝伟. 机器视觉中的光源照明设计[J]. 电子科技, 2013, 26(3): 80-82.</mixed-citation></ref><ref id="hanspub.36795-ref6"><label>6</label><mixed-citation publication-type="other" xlink:type="simple">韩茜茜, 耿世勇, 李恒毅. 基于机器视觉的缺陷检测应用综述[J]. 电工技术, 2019(14): 117-118+132.</mixed-citation></ref><ref id="hanspub.36795-ref7"><label>7</label><mixed-citation publication-type="other" xlink:type="simple">吴强, 崔跃利, 张耀. 基于机器视觉的零件缺陷检测算法[J]. 科学技术创新, 2018(26): 65-66.</mixed-citation></ref><ref id="hanspub.36795-ref8"><label>8</label><mixed-citation publication-type="other" xlink:type="simple">Jain, A. and Gupta, R. (2015) Gaussian Filter Threshold Modulation for Filtering Flat and Texture Area of an Image. 2015 International Conference on Advances in Computer Engineering and Applications, Ghaziabad, 19-20 March 2015, 760-763. &lt;br&gt;https://doi.org/10.1109/ICACEA.2015.7164804</mixed-citation></ref><ref id="hanspub.36795-ref9"><label>9</label><mixed-citation publication-type="other" xlink:type="simple">Ahmed, K.K., Fuad, A. and Rizvi, S.M. (2015) Hardware Software Co-Simulation of Canny Edge DETECTION algorithm. International Journal of Computer Applications, 122, 7-12. &lt;br&gt;https://doi.org/10.5120/ijca2015906147</mixed-citation></ref><ref id="hanspub.36795-ref10"><label>10</label><mixed-citation publication-type="other" xlink:type="simple">Adams, R. and Bischof, L. (1994) Seeded Region Growing. IEEE Transactions on Pattern Analysis and Machine Intelligence, 16, 641-647. &lt;br&gt;https://doi.org/10.1109/34.295913</mixed-citation></ref></ref-list></back></article>