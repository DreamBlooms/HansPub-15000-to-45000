<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE article  PUBLIC "-//NLM//DTD Journal Publishing DTD v3.0 20080202//EN" "http://dtd.nlm.nih.gov/publishing/3.0/journalpublishing3.dtd"><article xmlns:mml="http://www.w3.org/1998/Math/MathML" xmlns:xlink="http://www.w3.org/1999/xlink" dtd-version="3.0" xml:lang="en" article-type="research article"><front><journal-meta><journal-id journal-id-type="publisher-id">CSA</journal-id><journal-title-group><journal-title>Computer Science and Application</journal-title></journal-title-group><issn pub-type="epub">2161-8801</issn><publisher><publisher-name>Scientific Research Publishing</publisher-name></publisher></journal-meta><article-meta><article-id pub-id-type="doi">10.12677/CSA.2020.104066</article-id><article-id pub-id-type="publisher-id">CSA-34943</article-id><article-categories><subj-group subj-group-type="heading"><subject>CSA20200400000_92548389.pdf</subject></subj-group><subj-group subj-group-type="Discipline-v2"><subject>信息通讯</subject></subj-group></article-categories><title-group><article-title>
 
 
  基于AT89C51单片机的设计与实践：以智能无感杂物桶为例
  Design and Practice Based on AT89C51 Microcontroller: Taking Smart Non-Sensitive Debris Bucket as an Example
 
</article-title></title-group><contrib-group><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>刘</surname><given-names>峰</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>金</surname><given-names>志琦</given-names></name><xref ref-type="aff" rid="aff3"><sup>3</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>陈</surname><given-names>道来</given-names></name><xref ref-type="aff" rid="aff3"><sup>3</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>陈</surname><given-names>道来</given-names></name><xref ref-type="aff" rid="aff3"><sup>3</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>王</surname><given-names>宁波</given-names></name><xref ref-type="aff" rid="aff3"><sup>3</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>曹</surname><given-names>堰平</given-names></name><xref ref-type="aff" rid="aff3"><sup>3</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>陈</surname><given-names>磊</given-names></name><xref ref-type="aff" rid="aff4"><sup>4</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib></contrib-group><aff id="aff4"><addr-line>无锡优级先科信息技术有限公司，江苏 无锡</addr-line></aff><aff id="aff3"><addr-line>无锡太湖学院，江苏 无锡</addr-line></aff><aff id="aff2"><addr-line>上海对外经贸大学人工智能与变革管理研究院，上海;无锡太湖学院，江苏 无锡</addr-line></aff><aff id="aff1"><addr-line>null</addr-line></aff><pub-date pub-type="epub"><day>01</day><month>04</month><year>2020</year></pub-date><volume>10</volume><issue>04</issue><fpage>641</fpage><lpage>648</lpage><permissions><copyright-statement>&#169; Copyright  2014 by authors and Scientific Research Publishing Inc. </copyright-statement><copyright-year>2014</copyright-year><license><license-p>This work is licensed under the Creative Commons Attribution International License (CC BY). http://creativecommons.org/licenses/by/4.0/</license-p></license></permissions><abstract><p>
 
 
   
   本论文基于AT89C51单片机设计了一款智能无感杂物桶，其设计思路是利用定时器计数与下降沿外部中断配合其他模块进行协同。在自动翻盖方面采用的是热释电红外传感器被动检测来控制电机翻盖。HC_SR04超声波测距模块用来检测杂物装载程度，将检测出来的数据通过LCD1602液晶显示以此实现超声波测距显示功能。通过RS485通讯将检测的数据传递至上位机，使人能够实时监测杂物桶装载程度。 Based on the AT89C51 single-chip microcomputer, this thesis designs a smart non-sense clutter. The design idea is to use the timer to count and the external interrupt of the falling edge to cooperate with other modules. In the automatic flip, a pyroelectric infrared sensor is used to control the motor flip. HC_SR04 ultrasonic ranging module is used to detect the loading level of garbage, and the detected data is displayed on the LCD1602 to realize the ultrasonic ranging display function. The detected data is transmitted to the upper computer through RS485 communication, enabling people to monitor the loading level of the debris bucket in real time. 
  
 
</p></abstract><kwd-group><kwd>无感智能杂物桶，AT89C51单片机，红外传感器步进电机，HC_SR04超声波模，LCD1602, Non-Sense Smart Debris Bucket</kwd><kwd> AT89C51 Microcontroller</kwd><kwd> Infrared Sensor Stepper Motor</kwd><kwd> HC_SR04 Ultrasonic Module</kwd><kwd> LCD1602</kwd></kwd-group></article-meta></front><body><sec id="s1"><title>基于AT89C51单片机的设计与实践： 以智能无感杂物桶为例<sup> </sup></title><p>刘峰<sup>1,2*#</sup>，金志琦<sup>2*</sup>，陈道来<sup>2</sup>，王宁波<sup>2</sup>，曹堰平<sup>2</sup>，陈磊<sup>3</sup></p><p><sup>1</sup>上海对外经贸大学人工智能与变革管理研究院，上海</p><p><sup>2</sup>无锡太湖学院，江苏 无锡</p><p><sup>3</sup>无锡优级先科信息技术有限公司，江苏 无锡</p><disp-formula id="hanspub.34943-formula26"><graphic xlink:href="//html.hanspub.org/file/6-1541680x5_hanspub.png"  xlink:type="simple"/></disp-formula><p>收稿日期：2020年3月20日；录用日期：2020年4月2日；发布日期：2020年4月9日</p><disp-formula id="hanspub.34943-formula27"><graphic xlink:href="//html.hanspub.org/file/6-1541680x6_hanspub.png"  xlink:type="simple"/></disp-formula></sec><sec id="s2"><title>摘 要</title><p>本论文基于AT89C51单片机设计了一款智能无感杂物桶，其设计思路是利用定时器计数与下降沿外部中断配合其他模块进行协同。在自动翻盖方面采用的是热释电红外传感器被动检测来控制电机翻盖。HC_SR04超声波测距模块用来检测杂物装载程度，将检测出来的数据通过LCD1602液晶显示以此实现超声波测距显示功能。通过RS485通讯将检测的数据传递至上位机，使人能够实时监测杂物桶装载程度。</p><p>关键词 :无感智能杂物桶，AT89C51单片机，红外传感器步进电机，HC_SR04超声波模，LCD1602</p><disp-formula id="hanspub.34943-formula28"><graphic xlink:href="//html.hanspub.org/file/6-1541680x7_hanspub.png"  xlink:type="simple"/></disp-formula><p>Copyright &#169; 2020 by author(s) and Hans Publishers Inc.</p><p>This work is licensed under the Creative Commons Attribution-NonCommercial International License (CC BY-NC 4.0).</p><p>http://creativecommons.org/licenses/by-nc/4.0/</p><p><img src="//html.hanspub.org/file/6-1541680x8_hanspub.png" /> <img src="//html.hanspub.org/file/6-1541680x9_hanspub.png" /></p></sec><sec id="s3"><title>1. 设计背景</title><sec id="s3_1"><title>1.1. 设计背景</title><p>无盖杂物桶是日常生活中必不可少的工具，因为使用便利被各大场合所接受。但同时也存在很多问题，包括杂物味道的扩散、接触感染等。智能杂物桶的出现很好的解决了这些问题，不仅能够识别人体、声音来控制翻盖，而且其大容量、精美的封装使用户有更好的体验。我们基于普通杂物桶也设计了一款智能杂物桶，在能够实现自动翻盖的基础上增添了超声波测距，使杂物桶装载程度实时显示在液晶屏上，一旦超过装载程度则会通过RS485通讯将信息传递至PC端供使用者实时监控。</p></sec><sec id="s3_2"><title>1.2. 智能杂物桶的研究现状及问题描述</title><p>如今智能杂物桶功能强大，包括自动翻盖、语音交流、定时消毒等等。而针对杂物桶装载程度的检测这一功能却不多，考虑到我们设计的智能杂物桶用来检测的杂物起伏并不大，所以我们在HC-SR05人体热释电传感器实现自动翻盖的基础上通过超声波模块对杂物装载程度进行检测 [<xref ref-type="bibr" rid="hanspub.34943-ref1">1</xref>]，通过接收发出的反射波与时间计算出距离并显示在液晶屏，更能通过RS485通讯与PC相连，让使用者在扔杂物的时候对杂物桶装载程度有更好的了解。</p></sec><sec id="s3_3"><title>1.3. 设计理念及创新性</title><p>本装置设计理念基于单片机，根据人体热释电传感器检测是否有人经过。一旦检测到人体发出的红外线，该传感器则会发出数字信号给单片机，此时通过给步进电机各相上电进行控制桶盖并配合超声波模块、1602液晶对杂物桶的装载程度进行显示。一旦杂物装载到预定程度则自动通过485通讯将数据发送给监控人员以此实现人机交互的友好。</p></sec></sec><sec id="s4"><title>2. 硬件系统设计方案及实现</title><sec id="s4_1"><title>2.1. 进行自己设计的整体思路</title><p>为了能够提高用户的体验感觉，我们对常用杂物桶进行了改造。首先是针对自动翻盖功能，采用红外线传感器可重复触发方式，一旦检测到人则控制电机进行翻盖，然后此时利用超声波模块进行测距并刷新液晶上的数据，当人离开后电平变低则控制电机对桶盖进行闭合。最后通过RS485通讯进行上位机交互。</p></sec><sec id="s4_2"><title>2.2. 设计方案</title><p>本装置可以分为3个模块，即为模块a：红外线翻盖模块。模块b：超声波检测满溢程度模块。模块c：杂物信息监控。</p><sec id="s4_2_1"><title>2.2.1. 红外线翻盖模块设计</title><p>本设计采用HC-SR05红外线传感器可重复触发式对人体进行检测。当进入感应范围，人体释放的红外光透过菲涅尔透镜被聚集在传感器某个段的同心环上，此时同心环与红外线探头的焦距使红外光被探头接受，探头将光信号变成电信号，最后通过模数转化成数字信号传至单片机对应I/O。单片机在接收到红外传感器的信号后是不能直接驱动电机，因为单片机的I/O口一般输出的电压电流比较小，供电电压在5 V左右驱动负载能力不够，所以需要用一个功率放大电路来放大用单片机产生的信号，而且输出的是单片机数字信号而不是驱动电流，所以我们选用具有大电流输出能力的ULN2003模块，引脚图设计如下图1所示。</p><p>图1. ULN2003引脚图</p><p>对于控制步进电机，一旦红外传感器对应的I/O口变成高电平，步进电机(28BYJ-48)则在ULN2003控制下进行翻盖 [<xref ref-type="bibr" rid="hanspub.34943-ref2">2</xref>]。桶盖采用半翻式，设计图如下图2所示。</p><p>图2. 红外翻盖设计图</p><p>所以我们需用执行的操作就是控制步距角为90˚。考虑到半面桶盖负载轻，我们采用一相励磁法，如图3所示，不仅耗电低而且精确良好。然后通过控制脉冲个数控制角位移量达到定位的目的，同时控制脉冲频率来控制电机的转动速度。</p><p>图3. 一相励磁方式</p></sec><sec id="s4_2_2"><title>2.2.2. 超声波检测满溢程度模块设计</title><p>本模块设计采用超声波模块(如图4所示)对杂物装载程度进行检测。通过单片机给超声波Trig这一IO口至少10 us的高电平信号，此刻模块会自动发送8个40 kh的方波检查信号是否返回，一旦检测到Echo端口会输出高电平 [<xref ref-type="bibr" rid="hanspub.34943-ref3">3</xref>]。通过单片机内部定时器会测出高电平时间，测出的距离为S：</p><p>S = T 高 2 &#215; 声 速</p><p>式中：S——超声波测距；</p><p>T高——高电平持续时间；</p><p>声速——340 M/S。</p><p>图4. 超声波模块设计图</p><p>然后通过1602LCD，如图5所示进行显示。</p><p>图5. 1602液晶原理图</p><p>接正电源其对比度最弱，接地时对比度最高，一旦对比度过高会有“鬼影”，所以使用时通过给V0引脚一个10 k电位器调整对比度使其显示更清晰。使用前我们对液晶进行了相应的配置，首先进行初始化、写命令函数、写数据函数等操作。因为1602液晶只能显示字符型数据，所以我们将超声波测得的数据逐位拆开并参考CGRAM将数字转换成字符最后通过DDRAM操作地址写入使得液晶显示，一旦有人扔完杂物则重新启动超声波测距将测得的新数据重新写入以此来实现数据的刷新显示。</p></sec><sec id="s4_2_3"><title>2.2.3. 杂物信息监控模块设计</title><p>本模块设计我们基于单片机最小系统进行了扩展(如图5所示)，分别将单片机的P3.0 (RXD)与P3.1 (TXD)端和485通讯模块的TXD (接收)和RXD (发送)相连接，PC端采用USB转485模块并用双绞线将两个模块的发送接收端连接(图6)，并将PC端的上位机波特率，COM口配置好。因为我们是要发送检测的数据，所以首先我们将串口初始化，波特率调至9600 bps并选好串口通讯的工作方式 [<xref ref-type="bibr" rid="hanspub.34943-ref3">3</xref>]。如图7所示RE、DE两个引脚连在一起此时引脚默认为接收状态。</p><p>图6. RS485原理图</p><p>最终我们将485引脚电位拉高，然后利用循环将需要的数据逐字节发送，发送完数据后再将电位拉低。</p></sec><sec id="s4_2_4"><title>2.2.4. 单片机最小系统及供电</title><p>单片机最小系统由stc89C51单片机，如下图7所示。</p><p>图7. 总体设计图</p><p>晶振电路组成。晶振电路由11.0592 M晶振与单片机相连接，同时将两个22 pF的电容接地接引脚。用来过滤掉晶振的高频部分。复位电路由10 uf的电容正极接5 V电源，1 k电阻一段接地(GND)。因为本装置供电电压为5 V，为了避免换电池带来的麻烦，我们利用LN7805集成稳压器，在被整流滤波后送入LM7805稳压，在输出端接一个470 U和0.1 U电容进一步滤除纹波，得到5 V稳压电源，使得可以直接给其进行供电。</p></sec></sec></sec><sec id="s5"><title>3. 软件系统设计方案及实现</title><sec id="s5_1"><title>3.1. 红外线翻盖软件设计流程</title><p>利用热释电红外传感器检测是否有人并用if函数进行判断。并对步进电机各个相电位状态进行定义，如下图8所示：</p><p>图8. 步进电机控制原理图</p><p>通过定义旋转时间控制脉冲个数进行翻转，通过定义延迟函数来控制脉冲频率来控制电机转速 [<xref ref-type="bibr" rid="hanspub.34943-ref4">4</xref>]。没人则为低电平步进电机保持原状。有人为高电平则控制桶盖进行翻转，然后通过延迟函数延时3 s，如果人离开检测范围则将给各相I/O与之前相反的上电顺序使步进电机下翻复位。控制流程图如图9所示。</p><p>图9. 红外翻盖软件流程设计图</p></sec><sec id="s5_2"><title>3.2. 超声波测距液晶显示设计流程</title><p>首先超声波模块由Trig引脚发出至少10 us的方波，Echo引脚一旦检测到则输出高电平并利用单片机定时器中断测出高电平时间，然后通过公式计算出与杂物的距离 [<xref ref-type="bibr" rid="hanspub.34943-ref5">5</xref>]。1602LCD初始化读写命令等操作完后将测得的距离显示在液晶屏，并判断与杂物的具有是否小于3厘米，小于则没有变化，大于警示灯亮起。当杂物扔走后则灯熄灭，最后并通过485通讯传至PC端方便监控。如下图10所示。</p><p>图10. 超声波测距软件流程设计图</p></sec></sec><sec id="s6"><title>4. 总结</title><p>本文主要是基于AT89C51单片机设计了一款智能无感杂物桶，本杂物桶设计的过程中包了以下四点的创新如下：</p><p>1) 检测人体红外实现自动翻盖；</p><p>2) 液晶显示杂物桶装载程度；</p><p>3) 使用者通过上位机实时检测杂物桶装载程度；</p><p>4) 直接供电不需要额外装载电池。</p><p>同时我们知道在整个设计过程中仍然还存在若干不足之处和可以改良的点。如在电机运转带来一定声音方面，在后续的研究和设计工作上我们会用直流减速电机进行驱动，在增强精度的同时给使用者更好的体验。此外并用stm32系列芯片来替代AT89C51芯片重构系统架构和相关数据和协议，最终来丰富无感杂物桶更多的功能。</p></sec><sec id="s7"><title>基金项目</title><p>本项目受上海对外经贸大学人工智能变革与管理研究院区块链技术与应用研究中心资助。项目号：SUIBE-ABC-2020-2。</p></sec><sec id="s8"><title>文章引用</title><p>刘 峰,金志琦,陈道来,陈道来,王宁波,曹堰平,陈 磊. 基于AT89C51单片机的设计与实践：以智能无感杂物桶为例Design and Practice Based on AT89C51 Microcontroller: Taking Smart Non-Sensitive Debris Bucket as an Example[J]. 计算机科学与应用, 2020, 10(04): 641-648. https://doi.org/10.12677/CSA.2020.104066</p></sec><sec id="s9"><title>参考文献</title></sec></body><back><ref-list><title>References</title><ref id="hanspub.34943-ref1"><label>1</label><mixed-citation publication-type="other" xlink:type="simple">何颖, 雷景晨, 郭奇鑫, 严维. 基于STC89C52单片机的智能语音垃圾桶系统设计[J]. 电子制作, 2019, 368(Z1): 43-44+89.</mixed-citation></ref><ref id="hanspub.34943-ref2"><label>2</label><mixed-citation publication-type="other" xlink:type="simple">孔祥煜. 基于51单片机的步进电机控制系统[J]. 内燃机与配件, 2019, 281(5): 98-99.</mixed-citation></ref><ref id="hanspub.34943-ref3"><label>3</label><mixed-citation publication-type="other" xlink:type="simple">卫建华, 刘安利, 朱磊, 冯智. 基于RS-485总线的执勤报警系统设计[J]. 西安工程大学学报, 2011(2): 112-115.</mixed-citation></ref><ref id="hanspub.34943-ref4"><label>4</label><mixed-citation publication-type="other" xlink:type="simple">郭浩岩, 顾伟帆, 徐佳. 基于STC89C52的寝室智能垃圾桶的设计[J]. 价值工程, 2019, 38(21): 132-134.</mixed-citation></ref><ref id="hanspub.34943-ref5"><label>5</label><mixed-citation publication-type="other" xlink:type="simple">马世中, 刘宏添, 高宁, 李彤, 董曦诺. 基于51单片机的超声波测距系统[J]. 计算机产品与流通, 2020(1): 158.</mixed-citation></ref></ref-list></back></article>