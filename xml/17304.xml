<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE article  PUBLIC "-//NLM//DTD Journal Publishing DTD v3.0 20080202//EN" "http://dtd.nlm.nih.gov/publishing/3.0/journalpublishing3.dtd"><article xmlns:mml="http://www.w3.org/1998/Math/MathML" xmlns:xlink="http://www.w3.org/1999/xlink" dtd-version="3.0" xml:lang="en" article-type="research article"><front><journal-meta><journal-id journal-id-type="publisher-id">SG</journal-id><journal-title-group><journal-title>Smart Grid</journal-title></journal-title-group><issn pub-type="epub">2161-8763</issn><publisher><publisher-name>Scientific Research Publishing</publisher-name></publisher></journal-meta><article-meta><article-id pub-id-type="doi">10.12677/SG.2016.62007</article-id><article-id pub-id-type="publisher-id">SG-17304</article-id><article-categories><subj-group subj-group-type="heading"><subject>SG20160200000_26591417.pdf</subject></subj-group><subj-group subj-group-type="Discipline-v2"><subject>工程技术</subject></subj-group></article-categories><title-group><article-title>
 
 
  基于统一时源的多级时间同步监测系统
  The Multilevel Monitoring System for Time Synchronization Based on the Unified Time Reference
 
</article-title></title-group><contrib-group><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>张</surname><given-names>大伟</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>赵</surname><given-names>静</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>邓</surname><given-names>志森</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>骆</surname><given-names>飞</given-names></name><xref ref-type="aff" rid="aff3"><sup>3</sup></xref><xref ref-type="corresp" rid="cor1"><sup>*</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>许</surname><given-names>振山</given-names></name><xref ref-type="aff" rid="aff3"><sup>3</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib></contrib-group><aff id="aff3"><addr-line>成都引众数字设备有限公司，四川 成都</addr-line></aff><aff id="aff2"><addr-line>国网四川省电力公司电力调度控制中心，四川 成都</addr-line></aff><aff id="aff1"><addr-line>null</addr-line></aff><author-notes><corresp id="cor1">* E-mail:<email>chaserlf@163.com(骆飞)</email>;</corresp></author-notes><pub-date pub-type="epub"><day>01</day><month>04</month><year>2016</year></pub-date><volume>06</volume><issue>02</issue><fpage>56</fpage><lpage>63</lpage><permissions><copyright-statement>&#169; Copyright  2014 by authors and Scientific Research Publishing Inc. </copyright-statement><copyright-year>2014</copyright-year><license><license-p>This work is licensed under the Creative Commons Attribution International License (CC BY). http://creativecommons.org/licenses/by/4.0/</license-p></license></permissions><abstract><p>
 
 
   
   本文阐述利用电力通信网建立电力系统省、地、站一体的多级时间同步监测系统的方法。该系统以省级区域内最高等级时钟源作为统一时源，利用现有的电力通信网以基于E1通道的精密时钟同步协议POE (PTP over E1)方式实现各级监测装置的分级授时，保证整个监测系统的时源统一。各级监测装置通过直接采集时间信号、触发并监测SOE (Sequence of Event)报文、利用代理程序等方法实现对电力系统各级时间同步系统、二次设备、服务器和计算机等设备的时差测量，并将测量结果通过调度数据网逐级上送至各级监测管理系统，实现多级时间同步监测。 To create the multilevel monitoring system for time synchronization based on the power commu-nication network, an approach is presented in this paper. To ensure every level’s time reference is coincident to each other, the system uses the highest level time reference as the unified time ref-erence, and transfers the time reference by POE (PTP over E1) method on the power communica-tion network. Each level’s monitor gets time deviations of time synchronization systems, IEDs, servers and computers through collecting timing signals, triggering and collecting SOE (Sequence of Event) and using agent program. Then each level monitoring system sends the measured results to higher level monitoring system through the power communication network to process and the whole monitoring system is created and running.
    
  
 
</p></abstract><kwd-group><kwd>统一时源，时间同步监测，POE，时差测量, The Unified Time Reference</kwd><kwd> Monitoring for Time Synchronization</kwd><kwd> POE</kwd><kwd> Time Deviation Measuring</kwd></kwd-group></article-meta></front><body><sec id="s1"><title>基于统一时源的多级时间同步监测系统<sup> </sup></title><p>张大伟<sup>1</sup>，赵静<sup>1</sup>，邓志森<sup>1</sup>，骆飞<sup>2</sup>，许振山<sup>2</sup></p><p><sup>1</sup>国网四川省电力公司电力调度控制中心，四川 成都</p><p><sup>2</sup>成都引众数字设备有限公司，四川 成都</p><disp-formula id="hanspub.17304-formula53"><graphic xlink:href="http://html.hanspub.org/file/2-1580298x6_hanspub.png"  xlink:type="simple"/></disp-formula><p>收稿日期：2016年3月20日；录用日期：2016年4月4日；发布日期：2016年4月7日</p><disp-formula id="hanspub.17304-formula54"><graphic xlink:href="http://html.hanspub.org/file/2-1580298x7_hanspub.png"  xlink:type="simple"/></disp-formula></sec><sec id="s2"><title>摘 要</title><p>本文阐述利用电力通信网建立电力系统省、地、站一体的多级时间同步监测系统的方法。该系统以省级区域内最高等级时钟源作为统一时源，利用现有的电力通信网以基于E1通道的精密时钟同步协议POE (PTP over E1)方式实现各级监测装置的分级授时，保证整个监测系统的时源统一。各级监测装置通过直接采集时间信号、触发并监测SOE (Sequence of Event)报文、利用代理程序等方法实现对电力系统各级时间同步系统、二次设备、服务器和计算机等设备的时差测量，并将测量结果通过调度数据网逐级上送至各级监测管理系统，实现多级时间同步监测。</p><p>关键词 :统一时源，时间同步监测，POE，时差测量</p><disp-formula id="hanspub.17304-formula55"><graphic xlink:href="http://html.hanspub.org/file/2-1580298x8_hanspub.png"  xlink:type="simple"/></disp-formula></sec><sec id="s3"><title>1. 引言</title><p>随着电力系统对时间同步的要求不断提高，时间同步系统被大量应用到电力系统中，为各种二次设备和应用系统授时。但当前电力系统中并未广泛采用全网统一授时，而是各级调度中心和变电站分别设立时间同步系统，各自为区域内设备授时，各级时间同步系统的时间偏差直接造成被授时设备的时间存在偏差。另外，时间信号类型、接口类型的多样性，以及被授时设备对时准确性的不同，也是造成各设备内部时间不一致的影响因素。</p><p>因此，对各级时间同步系统和被授时设备的时间准确度进行统一监测，对过大的时间偏差进行及时预警和排除，是确保电力生产的稳定运行必须采取的保障措施。</p><p>当前电力系统中普遍采用定期检修的方式，使用时间同步测试仪进行校验，这种方式需要停电作业，效率低下，而且对二次设备内部时差无法进行有效检测。对于建立时间同步监测系统方面的探索，文献 [<xref ref-type="bibr" rid="hanspub.17304-ref1">1</xref>] 提出基于实时监测层、实时分析层和综合应用层3层架构的时间同步监测分析系统方案，通过网络时间协议(NTP)时间戳和对时SOE实时分析，获取变电站设备时间信息。该方案监测精度较低，且未涉及监测时间基准的建立。文献 [<xref ref-type="bibr" rid="hanspub.17304-ref2">2</xref>] 根据常规变电站和智能变电站的不同特点，分别给出基于开关量遥信和GOOSE报文的二次设备时间同步状态的在线监测方案及具体的实施过程。该方案同样未考虑监测系统自身时间基准如何获取的问题。文献 [<xref ref-type="bibr" rid="hanspub.17304-ref3">3</xref>] 提出通过横向比对原则进行仲裁判断来分析时间信号的相对偏差，当某个信号的偏差增大时，可以通过决策系统给出告警。该方案在没有监测时间基准的情况下是一种较为可行的时差分析方法。文献 [<xref ref-type="bibr" rid="hanspub.17304-ref4">4</xref>] 通过电力系统数据网进行PTP网络对时，实现地面区域时间同步，但对时精度未能满足电力系统要求。文献 [<xref ref-type="bibr" rid="hanspub.17304-ref5">5</xref>] 实现了国调中心提出的利用乒乓原理采集二次设备时间精度的方案。但要求所有测控、保护、时钟装置等设备实现软件功能升级，实际操作难度较大。</p><p>本文提出的时间同步监测系统方案，利用电力通信网实现了全网各级授时准确度优于1&#181;s的统一时源，建立了监测系统自身时间基准，并采用解析时间信号、触发及解析SOE等多种时差监测方法实现了时间同步设备、二次设备和计算机设备的测量，扩大了被监测设备的种类和范围，实现了时源统一的可靠高效的多级时间同步在线监测系统。</p></sec><sec id="s4"><title>2. 系统架构</title><p>多级时间同步监测系统利用电力通信网实现了省、地、站一体的多级时间同步在线监测，以省调时间同步系统为最高等级时钟源，利用现有的电力通信网以POE方式实现各级监测设备的分级授时，保证整个监测系统的时源统一。各级监测设备通过直接采集时间信号、触发并监测SOE报文、利用代理服务程序等方法实现对电力系统各级时间同步系统、二次设备、服务器和计算机等设备的时差测量，并将测量结果通过调度数据网逐级上送至各级监测管理系统，实现多级时间同步监测，系统架构如图1所示。</p><p>其中，省调的时间监测装置以省调时间同步系统的时间信号为时间源，同时以POE信号向地调的时间监测装置授时；地调的时间监测装置以该POE信号作为时间源，同时将该信号转换为多路POE信号向各变电站的时间监测装置授时。</p><p>变电站的时间监测装置采集本站各设备时间偏差，将计算结果送至本地后台时间监测管理系统，同时上送至地调时间监测管理系统；地调时间监测装置采集本地设备时间偏差，送至本地时间监测管理系统，时间监测管理系统再将各变电站时间偏差和本地设备时间偏差上送至省调时间监测管理系统。</p></sec><sec id="s5"><title>3. 统一时源</title><p>各级调度和变电站时间监测装置将最高等级时间监测装置的时钟源作为参考基准，逐级向下传递，形成以最高等级时钟源为参考的统一时源。</p><p>统一时源是各级测量数据具备可对比性的基本条件。</p><sec id="s5_1"><title>3.1. 基准时源建立</title><p>可以建立一套独立的时间同步系统作为时间监测系统的基准时源，也可以将省调的时间同步系统作为基准时源。同时将该时间同步系统作为被监测对象接入时间监测系统，形成闭环监测。</p><p>本文中以省调时间同步系统作为基准时源。</p><p>基准时源必须具备高准确度和高稳定度。输出基准时源的时间同步系统最好为主备式系统 [<xref ref-type="bibr" rid="hanspub.17304-ref6">6</xref>] ，主时钟最好配备原子频标，在失去卫星基准时能够提供高稳定的守时时间信号，输出时间信号精度优于1 &#181;s,守时精度优于1 &#181;s/h。</p><p>基准时源以直流B码的方式接入省调的时间监测装置，然后由省调监测装置以POE方式向下一级调度监测装置授时。</p></sec><sec id="s5_2"><title>3.2. POE授时</title><p>目前，虽然时间同步系统被广泛应用，但各系统相对独立，各自从卫星获取时钟源，尚未有效实现全网统一授时。</p><p>时间监测系统要求统一时源，实现统一时源可以新铺设专门的授时网络，但成本高昂。</p><p>电力系统通信网以SDH (Synchronous Digital Hierarchy，同步数字体系)传输网为主体。SDH技术，以其可靠性、可控性、扩展性以及完善的网络体制，在传输网中占着主导地位 [<xref ref-type="bibr" rid="hanspub.17304-ref7">7</xref>] 。如果PTP能通过E1通道接入SDH中进行传输，即POE传输，实现优于1 &#181;s的同步精度，将会减少新设备投入，提高授时网络的可靠性。</p><p>本系统基于嵌入式操作系统和现场可编程门阵列实现将PTP包封装在E1通道中，进行不缓存透明传输，充分利用SDH传输网络资源，高效快捷地建立时码地面传输链路，达到1 &#181;s的时间同步精度 [<xref ref-type="bibr" rid="hanspub.17304-ref8">8</xref>] - [<xref ref-type="bibr" rid="hanspub.17304-ref10">10</xref>] 。POE授时结构见图2。</p><p>其中，省调的时间监测装置同步后作为Master，将PTP报文封装进E1通道，接入省地传输网；地</p><p>图1. 时间同步监测系统架构</p><p>图2. POE授时结构</p><p>调的时间监测装置作为Slave，将E1通道中的PTP取出并对时，同时作为下一级的Master，将PTP报文封装进E1通道，接入地站传输网；厂站的时间监测装置作为Slave，从E1通道中取出PTP报文并对时。</p><p>需要特别提出的是，传输网络存在上下行通信电路的不对称性，因此时间传输与接收装置需对电路的不对称性进行相应的测量和补偿，进行通道倒换修正，以满足时间同步的精度要求。在光纤传输装置进行传输通道的倒换时，也存在通道倒换引起的电路传输延时抖动，时间传输与接收装置也需要对倒换引起的抖动进行监测与补偿 [<xref ref-type="bibr" rid="hanspub.17304-ref9">9</xref>] - [<xref ref-type="bibr" rid="hanspub.17304-ref11">11</xref>] 。</p></sec></sec><sec id="s6"><title>4. 时差测量</title><p>时间同步监测对象主要有三种，一种是对省调、地调和厂站的时间同步系统进行监测，一种是对厂站的其他二次设备进行监测，还有一种是对省调、地调和厂站的服务器和计算机类设备进行监测。</p><sec id="s6_1"><title>4.1. 时间同步系统时差测量和状态监测</title><p>时间同步监测系统对时间同步系统的监测有两个方面，一个是对时差的测量，一个是对状态的监测，见图3。</p><p>对时差的测量方法是将时间信号接入，直接计算出偏差。时间同步系统输出的信号种类较多，如直流B码、PPS、PPM、串口报文、NTP、PTP、DCF77等；输出接口种类也很多，如TTL、光纤、RS-232、RS-485/422、网络等。本系统支持接入以上所有类型的接口和信号。但时间同步系统自身准确度比较高，为了能够更精准的测量，同时能测量出超出1 s的时差，推荐接入直流B码信号。</p><p>对时间同步系统的时间同步状态进行监测，即要将时间同步装置本身的时间同步状态进行监测，及时将时间同步装置自身的工作状态(包括是否在运行态、板件工作是否正常、天线工作是否正常、是否搜寻到卫星进行同步、装置的当前输出时间)等，通过IEC-104或IEC61850 MMS协议 [<xref ref-type="bibr" rid="hanspub.17304-ref8">8</xref>] 采集到监测系统并上传到后台和上一级调度，以便及时发现时间同步装置本身的异常情况。</p></sec><sec id="s6_2"><title>4.2. 二次设备时差测量</title><p>变电站的时间监测装置需要对二次设备的时间同步情况进行监测，主要包括测控装置、PMU、故障录波装置、合并单元、保护装置等 [<xref ref-type="bibr" rid="hanspub.17304-ref9">9</xref>] 。</p><p>如图4所示，对于不同的二次设备应采取不同的监测方法。可选取的监测方法包括直接采集时间信号、触发SOE及抓取并分析装置的通信报文等等。在监测的实现过程中，应能采取适当的技术措施，使二次设备输出的时间信息具有相同的时间基准。对装置的输出时间信息的分析过程应在相同的时间基准下进行，获取和分析二次设备的时间信息的过程所花费的时间不应造成对分析结果的影响。</p></sec><sec id="s6_3"><title>4.3. 计算机类设备时差测量</title><p>调度中心除了时间同步系统外，还有大量的服务器、计算机等设备用于各类数据分析，也接入了时间同步信号进行对时，这类设备同样需要监测。我们把这类设备统称为计算机类设备。该类设备通常分为两类，一类作为NTP Server，比如同步到时间同步系统的服务器、交换机等，另一类作为NTP Client，同步到NTP Server。</p><p>如图5所示，对于NTP Server，我们可以在监测装置上建立NTP Client (参考基准)，向被测的NTP Server发送对时请求，通过乒乓法获取四个时间戳计算出NTP Client相对于NTP Server的时差，取反后即为NTP Server的时差。</p><p>对于NTP Client，需要在其上运行代理服务程序Agent，由Agent向监测装置上的NTP Server (参考基准)发送对时请求并计算出时差，再将计算结果发送给监测装置。</p></sec></sec><sec id="s7"><title>5. 数据上送及管理</title><p>时间监测装置获取时间监测结果后，将分析的初步结果传输至时间同步监测管理系统，由监测管理系统进行进一步分析。具体过程如下：</p><p>厂站端完成时差测量后，由时间监测装置通过SCP协议或远动通信规约直接上传至本地后台监测管理系统和地调监测管理系统。</p><p>图3. 时间同步系统监测</p><p>图4. 二次设备时差测量</p><p>地调监测装置完成本地时差测量后，将结果通过SCP协议或远动通信规约送至地调监测管理系统，地调监测管理系统汇总本地监测结果和所辖厂站监测结果后，再统一上送至省调监测管理系统。</p><p>省调监测管理系统汇总本地监测结果和所辖地调和直属厂站监测结果。</p><p>时间监测管理系统实际运行效果见图6。</p><p>图5. 计算机类设备时差测量</p><p>图6. 时间同步管理系统示例</p></sec><sec id="s8"><title>6. 运行结果</title><p>时间监测装置获取时间监测结果后，将分析的初步结果传输至时间同步监测管理系统，由监测管理系统进行进一步分析。具体过程如下。</p><p>本系统在四川电网进行了现场试运行，监测省调、攀枝花地调(含备调)及安宁220 kV变电站的时间同步系统和二次设备。</p><p>统一授时方面，采用POE方式授时的各级监测设备在授时通道多次倒换后的时间准确度如图7所示。</p><p>发生多次省地授时通道、地站授时通道倒换后，对省级监测设备时间准确度没有影响；对地级监测设备准确度影响较小，误差小于30 ns；对站端监测设备影响较大，最大误差小于310 ns。该指标满足1 &#181;s授时精度要求。</p><p>图7. 通道倒换后的授时精度</p><p>时间监测方面，发现了现场时间同步方面存在的诸多问题，如变电站设备与设备之间不同步、设备与时间同步系统不同步，攀枝花备调时间同步系统的时间偏差过大等。这些平时隐藏的问题在接入时间同步监测系统后立即被检查出来并及时排除。</p></sec><sec id="s9"><title>7. 结语</title><p>通过在四川电网的实际现场试运行，验证了本文所阐述的利用现有电力通信网，建立基于统一时源的多级时间同步监测系统的可行性和实用性。该系统扩大了被监测设备的种类和范围，将分散独立的时间同步系统和设备整合在一起，实现电网时间统一监测、统一管理，对提升电网时间运行维护管理水平，具有较高现实意义。</p></sec><sec id="s10"><title>文章引用</title><p>张大伟,赵 静,邓志森,骆 飞,许振山. 基于统一时源的多级时间同步监测系统The Multilevel Monitoring System for Time Synchronization Based on the Unified Time Reference[J]. 智能电网, 2016, 06(02): 56-63. http://dx.doi.org/10.12677/SG.2016.62007</p></sec><sec id="s11"><title>参考文献 (References)</title></sec></body><back><ref-list><title>References</title><ref id="hanspub.17304-ref1"><label>1</label><mixed-citation publication-type="other" xlink:type="simple">雷霆, 黄太贵, 李斌, 汤进. 时间同步监测分析系统的开发与应用[J]. 电力系统自动化, 2010, 34(24): 65-68.</mixed-citation></ref><ref id="hanspub.17304-ref2"><label>2</label><mixed-citation publication-type="other" xlink:type="simple">李澄, 陈颢, 宁艳. 二次设备时间同步状态在线监测系统研究[J]. 江苏电机工程, 2012, 31(1): 9-11.</mixed-citation></ref><ref id="hanspub.17304-ref3"><label>3</label><mixed-citation publication-type="other" xlink:type="simple">童旭, 王珮璐, 孙雅平. 智能变电站时间同步系统在线监测技术的研究[J]. 华东电力, 2012(12): 2184-2186.</mixed-citation></ref><ref id="hanspub.17304-ref4"><label>4</label><mixed-citation publication-type="other" xlink:type="simple">王超, 谢思江, 焦阳, 赵小彬, 张涛, 刘四春. 构建地面区域时间同步监测系统的研究[J]. 电力信息与通信技术, 2013, 11(1): 15-19.</mixed-citation></ref><ref id="hanspub.17304-ref5"><label>5</label><mixed-citation publication-type="other" xlink:type="simple">彭志强, 霍雪松, 曾飞, 吴海伟. 电力系统时间同步状态在线监测技术应用分析[J]. 华东电力, 2014, 42(10): 2060-2064.</mixed-citation></ref><ref id="hanspub.17304-ref6"><label>6</label><mixed-citation publication-type="other" xlink:type="simple">电力系统的时间同步系统第1部分: 技术规范[S]. DL/T1100-2009.</mixed-citation></ref><ref id="hanspub.17304-ref7"><label>7</label><mixed-citation publication-type="other" xlink:type="simple">翟章. 电力通信几种主要传输方式的应用分析[J]. 电力系统通信, 2006(6): 61-63.</mixed-citation></ref><ref id="hanspub.17304-ref8"><label>8</label><mixed-citation publication-type="other" xlink:type="simple">IEEE. IEEE Standard for a Precision Clock Synchronization Protocol for Networked Measurement and Control Systems. IEEE Std, 1588-2008.</mixed-citation></ref><ref id="hanspub.17304-ref9"><label>9</label><mixed-citation publication-type="other" xlink:type="simple">陆明泉, 张娜, 刘静. 基于PTP的变电站频率与时间同步方案研究[J]. 电力信息与通信技术, 2013, 11(12): 34-37.</mixed-citation></ref><ref id="hanspub.17304-ref10"><label>10</label><mixed-citation publication-type="other" xlink:type="simple">徐建, 王勇, 梁昕, 朱广心. PTP时间同步系统中E1/Ethemet协议转换器的设计与实现[C]. 2011年中国电机工程学会电力通信专业委员会第八届学术会议, 2011.11.</mixed-citation></ref><ref id="hanspub.17304-ref11"><label>11</label><mixed-citation publication-type="other" xlink:type="simple">孙洪武, 马涛, 葛红舞, 焦群. SDH光通信系统E1通道时间传递特性测试分析[J]. 电力系统通信, 2012(4): 36-41.</mixed-citation></ref></ref-list></back></article>