<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE article  PUBLIC "-//NLM//DTD Journal Publishing DTD v3.0 20080202//EN" "http://dtd.nlm.nih.gov/publishing/3.0/journalpublishing3.dtd"><article xmlns:mml="http://www.w3.org/1998/Math/MathML" xmlns:xlink="http://www.w3.org/1999/xlink" dtd-version="3.0" xml:lang="en" article-type="research article"><front><journal-meta><journal-id journal-id-type="publisher-id">CSA</journal-id><journal-title-group><journal-title>Computer Science and Application</journal-title></journal-title-group><issn pub-type="epub">2161-8801</issn><publisher><publisher-name>Scientific Research Publishing</publisher-name></publisher></journal-meta><article-meta><article-id pub-id-type="doi">10.12677/CSA.2017.711118</article-id><article-id pub-id-type="publisher-id">CSA-22760</article-id><article-categories><subj-group subj-group-type="heading"><subject>CSA20171100000_78402914.pdf</subject></subj-group><subj-group subj-group-type="Discipline-v2"><subject>信息通讯</subject></subj-group></article-categories><title-group><article-title>
 
 
  虚拟校园漫游系统开发中的关键技术研究
  The Key Technology Research for Virtual Campus Roaming System Development
 
</article-title></title-group><contrib-group><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>陈</surname><given-names>晴</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>杨</surname><given-names>蕾</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>孟</surname><given-names>丽丽</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>王</surname><given-names>飞</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib></contrib-group><aff id="aff2"><addr-line>华北理工大学，河北 唐山</addr-line></aff><aff id="aff1"><addr-line>null</addr-line></aff><pub-date pub-type="epub"><day>23</day><month>11</month><year>2017</year></pub-date><volume>07</volume><issue>11</issue><fpage>1045</fpage><lpage>1051</lpage><permissions><copyright-statement>&#169; Copyright  2014 by authors and Scientific Research Publishing Inc. </copyright-statement><copyright-year>2014</copyright-year><license><license-p>This work is licensed under the Creative Commons Attribution International License (CC BY). http://creativecommons.org/licenses/by/4.0/</license-p></license></permissions><abstract><p>
 
 
   
   本项目以华北理工大学为研究对象，开发了一个具有三维校园展示、在线虚拟漫游及信息管理与服务等功能的虚拟校园漫游系统。该系统能够全方位地展示校园的各种环境，具有较强的交互性和沉浸感，用户在虚拟校园中漫游会有身临其境的感觉，对学校的形象宣传、信息化管理将产生重要的作用。该系统基于Unity 3D游戏引擎，利用三维建模技术，采用C#脚本语言进行交互开发，并融合计算机网络技术等，对三维场景建模及优化技术、角色与场景之间的交互技术、碰撞检测等进行深入研究。 Taking North China University of Science and Technology as the research object, a virtual campus roaming system with functions of three-dimensional display, online virtual walk-through, information management and services was developed. With strong interactivity and immersion, the system can show varieties of campus environment in all directions to make users have immersive experience when roaming through virtual campus, thus promoting the campus image publicity and information management greatly. Based on the Unity 3D game engine, the roaming system was interactively developed with the three-dimensional modeling technology, and C# script language, and combined with computer network technology, etc. Through the development of this system, we have made a further study of the three-dimensional scene modeling and optimization, interaction between roles and scenarios, collision detection technology.
    
  
 
</p></abstract><kwd-group><kwd>虚拟校园漫游，Unity 3D，3Ds Max, Virtual Campus Roaming</kwd><kwd> Unity 3D</kwd><kwd> 3Ds Max</kwd></kwd-group></article-meta></front><body><sec id="s1"><title>虚拟校园漫游系统开发中的关键技术研究<sup> </sup></title><p>陈晴，杨蕾，孟丽丽，王飞</p><p>华北理工大学，河北 唐山</p><p>收稿日期：2017年11月2日；录用日期：2017年11月15日；发布日期：2017年11月23日</p><disp-formula id="hanspub.22760-formula1"><graphic xlink:href="//html.hanspub.org/file/1-1540865x5_hanspub.png"  xlink:type="simple"/></disp-formula></sec><sec id="s2"><title>摘 要</title><p>本项目以华北理工大学为研究对象，开发了一个具有三维校园展示、在线虚拟漫游及信息管理与服务等功能的虚拟校园漫游系统。该系统能够全方位地展示校园的各种环境，具有较强的交互性和沉浸感，用户在虚拟校园中漫游会有身临其境的感觉，对学校的形象宣传、信息化管理将产生重要的作用。该系统基于Unity 3D游戏引擎，利用三维建模技术，采用C#脚本语言进行交互开发，并融合计算机网络技术等，对三维场景建模及优化技术、角色与场景之间的交互技术、碰撞检测等进行深入研究。</p><p>关键词 :虚拟校园漫游，Unity 3D，3Ds Max</p><disp-formula id="hanspub.22760-formula2"><graphic xlink:href="//html.hanspub.org/file/1-1540865x6_hanspub.png"  xlink:type="simple"/></disp-formula><p>Copyright &#169; 2017 by authors and Hans Publishers Inc.</p><p>This work is licensed under the Creative Commons Attribution International License (CC BY).</p><p>http://creativecommons.org/licenses/by/4.0/</p><p><img src="//html.hanspub.org/file/1-1540865x7_hanspub.png" /> <img src="//html.hanspub.org/file/1-1540865x8_hanspub.png" /></p></sec><sec id="s3"><title>1. 引言</title><p>华北理工大学坐落在沿海现代化城市、环渤海经济区工业重镇—唐山市唐山湾生态城，是一所具有全方位教育层次的省属重点骨干大学。虚拟校园漫游系统，将传统的几何建模技术与基于图像的绘制技术进行了结合，在电脑上真实的再现了校园环境及校园文化，浏览者不用亲自到学校就可以形象直观体验亲身游览校园的感觉，在体会到于校园中自由漫步的同时，又可以在特定的场景中进行环视，犹如亲身站在校园中观看景观，增强了用户体验。同时，对学校的招生宣传、发展规划、数字化建设等都具有重要的意义。虚拟校园漫游的开发有很多种工具和平台，最常用的一种方法是使用3Ds Max进行建模、材质等前期处理，然后导出到Unity 3D软件中进行后期的交互处理。下面就使用这两款工具开发虚拟校园漫游过程中设计到的关键技术进行介绍。</p></sec><sec id="s4"><title>2. 虚拟校园漫游系统研究技术路线</title><p>虚拟校园漫游系统是以真实校园为整体蓝本，采用3Ds Max建模技术以及Unity3D虚拟现实开发平台等，并使用其他网络技术实现网络在线浏览。</p><p>具体技术路线图如图1：</p><p>1) 收集相关文献资料，进行调研分析，设计系统的结构和功能。</p><p>2) 根据华北理工大学校园不同的建筑、场合，收集数据，整合分析，完成系统设计。</p><p>3) 校园空间数据的获取与处理：通过相关软件获得华北理工大学地形的俯视图。</p><p>4) 三维虚拟场景建模，对模型进行数据处理、场景分块与模型优化后，集成三维场景。</p><p>5) 以Unity3D为虚拟现实开发平台，以3Ds Max为场景建模软件，通过C#.Net语言与HTML的集成整合，完成基于Web的虚拟校园的开发。</p><p>6) 完善并优化虚拟校园漫游平台，网上试运行。</p></sec><sec id="s5"><title>3. 虚拟校园漫游系统功能及简单操作</title><p>虚拟校园漫游系统的设计目的是通过对华北理工大学校园环境的模拟并利用三维场景建模技术、优化及交互技术等来实现校园全景全方位展示、自由漫游及校园管理等功能，提供真实、全面的数据，增强媒体的交互性和沉浸感。系统功能主要包括虚拟场景展示、虚拟漫游、校园信息管理。虚拟场景展示包括教学楼、宿舍楼等建筑；虚拟漫游包括自动漫游和自由漫游；校园信息管理主要是校园简介、用户</p><p>图1. 技术路线图</p><p>管理系统维护等作用。用户通过在网页上登录漫游系统可以全方位浏览校园风光、掌握校园实时信息等，具体功能如下：</p><p>1) 通过鼠标及滚轮来实现视角的变换和全方位观看校园内建筑物、景观等虚拟场景；</p><p>2) 通过鼠标点击相应按钮用户可沿着设定的路线自动展示校园风光，也可按着用户自己的兴趣和需要选择路径对虚拟校园进行漫游；</p><p>3) 通过键盘、鼠标等动作控制访问者的漫游方向、速度、视角等；用户可以开门进入某个建筑物，参观教室、食堂、宿舍等；</p><p>4) 通过鼠标点击部分场景可为用户提供声音介绍和角色互动，同时也可以点击相应的按钮实现部分场景的文本提示的显示与隐藏。</p></sec><sec id="s6"><title>4. 虚拟校园漫游系统的关键技术</title><sec id="s6_1"><title>4.1. 场景三维模型的构建及优化</title><p>虚拟校园漫游中的场景模型主要涉及教学楼、宿舍楼、餐厅等建筑物以及操场、道路、树木等，是一个大场景，建模时需要对整个校园的这个大场景进行区块划分，各个区块制作完成后导入到一个场景中，将极大的降低建模的难度。</p><p>在进行场景建模时，我们并没有校园的详细的测量参数等资料，可以使用GETscreen软件截下通过Google Earth得到的卫星影像，在3Ds Max透视图中建一个面片并将截下的航拍图赋给该面片，作为建模时的布局参考。建筑物主体建模使用二维样条线勾勒出轮廓，然后挤出建筑物的高度，附属物用基本几何体变形制作，细节部分如门窗等用贴图来表现。路面、人工湖建模基本同建筑物建模方法一样。花草树木是场景中最多的装饰物，花草树木的逼真程度影响到场景的真实感，可以通过交叉的面片来实现，这种方法极大的降低了模型面片数，并配上良好的照片素材和透明贴图来实现模型效果 [<xref ref-type="bibr" rid="hanspub.22760-ref1">1</xref>] 。如图2所示。</p><p>校园漫游系统要在用户的网页上浏览，则对软件的大小有比较高的要求，系统运行不流畅对用户体验有很大影响，因此，场景优化是必不可少的步骤。三维模型的面数越多，渲染时就会消耗很多系统资源，将用户看不到的面或线删除，同时对于合并的物体使用同一种材质，从而加快渲染的速度。建模时如果模型的面距离比较近，容易引起闪烁，因此需要将面的距离设置到合适的距离 [<xref ref-type="bibr" rid="hanspub.22760-ref2">2</xref>] 。对灯光也做了相应的优化，在漫游场景中通过顶点灯渲染整个画面，从而即使是配置低的计算机也同样可以顺畅运行该系统 [<xref ref-type="bibr" rid="hanspub.22760-ref3">3</xref>] 。</p></sec><sec id="s6_2"><title>4.2. 系统交互性设计与实现</title><p>人机交互技术是通过计算机输入及输出设备，以有效的方式实现人与计算机相互传递信息的技术。在本系统中主要的人机交互技术包括GUI界面设计和漫游功能设计。用户通过网页可以直接打开漫游系统，并可进入使用界面选择多个漫游模式，包括自动漫游、自由漫游、地图导航、使用帮助等 [<xref ref-type="bibr" rid="hanspub.22760-ref4">4</xref>] 。选择自动漫游，系统将以预先规定的路线指引用户参观校园; 如果选择自由漫游，用户则可以通过鼠标或者键盘上的按键以第一人称视角随意改变视点。</p><p>针对本文所设计的虚拟校园系统，总体遵循的原则是在功能逻辑块划分上应该区分清楚并联系紧密，尽量做到操作简便、客户端提示信息的及时正确显示。具体交互功能主要有虚拟角色的创建和登陆服务器等UI界面的设计和场景之间的碰撞、多人实时在线的客户端间的信息交互等。</p><p>图2. 教学楼场景图</p><p>图3. 校园信息管理图</p><p>例如，在界面中设计一个自动漫游的Button，在脚本中代码如下：</p><p>voidOnGUI()</p><p>{varbuttonWidth = 100;</p><p>varbuttonHeight = 50;</p><p>varbuttonX = (Screen.width - buttonWidth) ;</p><p>varbuttonY = (Screen.height - buttonHeight) ; //在屏幕右下角绘制一个button组件</p><p>UnityEngine.Rect r =new Rect();</p><p>if (GUI.Button( new Rect(buttonX, buttonY, buttonWidth, buttonHeight), 自动漫游))</p><p>{//在调试控制台打印一些文字</p><p>Debug.Log(开启自动漫游模式);</p><p>}</p><p>}</p><p>校园信息管理如图3所示。</p></sec><sec id="s6_3"><title>4.3. 碰撞检测</title><p>在虚拟环境当中，碰撞检测技术是用来检测两个不可穿透物体模型之间、物体模型与场景之间是否发生碰撞的技术。在Unity3D中Collider组件的主要功能就是进行碰撞检测，并且在使用刚体时，一般会和Collider共同使用。发生碰撞的条件是：1) 发生碰撞的两个物体必须都带有Collider组件；2) 发生碰撞的两个物体至少有一个带有刚体；3) 发生碰撞的两个物体必须有相对运动。虚拟环境当中，碰撞检测的主要任务是：检测基于的虚拟校园仿真技术基础模型是否发生碰撞、何时发生碰撞以及和谁发生了碰撞。在Unity3D中可以在脚本语言中可以实现控制：</p><p>//碰撞开始时会调用一次</p><p>voidOnCollisionEnter (Collision other) {</p><p>print (“碰撞开始”);</p><p>}</p><p>//碰撞持续发生的时候调用</p><p>voidOnCollisionStay (Collision other) {</p><p>print (“碰撞进行中”);</p><p>}</p><p>//碰撞结束时会调用一次</p><p>voidOnCollisionExit (Collision other) {</p><p>print (“碰撞结束”);</p><p>}</p><p>//检测物体和谁发生碰撞时可用：</p><p>voidOnCollisionStay (Collision other) {</p><p>print (“碰撞到的物体的名字：”+other.gameObject.name);</p><p>}</p></sec></sec><sec id="s7"><title>5. 结束语</title><p>基于Web的华北理工大学虚拟校园漫游系统具有完整的系统结构，比一般的虚拟校园漫游系统具有更强的交互性、沉浸感、实用性、跨平台性以及地方特色性等。通过校园漫游系统用户可以更方便认识、了解校园，也在提高我们学校知的名度、构建数字化校园、提升校园文化实力等方面起到了积极作用。</p></sec><sec id="s8"><title>基金项目</title><p>国家大学生创新实验项目(编号：X2017007)。</p></sec><sec id="s9"><title>文章引用</title><p>陈 晴,杨 蕾,孟丽丽,王 飞. 虚拟校园漫游系统开发中的关键技术研究The Key Technology Research for Virtual Campus Roaming System Development[J]. 计算机科学与应用, 2017, 07(11): 1045-1051. http://dx.doi.org/10.12677/CSA.2017.711118</p></sec><sec id="s10"><title>参考文献 (References)</title></sec></body><back><ref-list><title>References</title><ref id="hanspub.22760-ref1"><label>1</label><mixed-citation publication-type="other" xlink:type="simple">姬洪强, 吕静敏. 虚拟校园漫游开发中的关键技术研究[J]. 电脑知识与技术, 2013: 7999-8000.</mixed-citation></ref><ref id="hanspub.22760-ref2"><label>2</label><mixed-citation publication-type="other" xlink:type="simple">王彩玲, 刘瑞香, 等. 基于Unity 3D虚拟校园漫游的设计与实现[J]. 科技视界, 2013(10): 37-38.</mixed-citation></ref><ref id="hanspub.22760-ref3"><label>3</label><mixed-citation publication-type="other" xlink:type="simple">周超. 基于Unity3D的虚拟校园设计[D]: [硕士学位论文]. 武汉: 湖北大学, 2014: 12-15.</mixed-citation></ref><ref id="hanspub.22760-ref4"><label>4</label><mixed-citation publication-type="other" xlink:type="simple">伊力哈木江•巴图尔, 崔龙, 等. 基于Unity3D的三维数字校园漫游系统[J]. 开发案例, 2012: 93.</mixed-citation></ref></ref-list></back></article>