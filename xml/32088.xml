<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE article  PUBLIC "-//NLM//DTD Journal Publishing DTD v3.0 20080202//EN" "http://dtd.nlm.nih.gov/publishing/3.0/journalpublishing3.dtd"><article xmlns:mml="http://www.w3.org/1998/Math/MathML" xmlns:xlink="http://www.w3.org/1999/xlink" dtd-version="3.0" xml:lang="en" article-type="research article"><front><journal-meta><journal-id journal-id-type="publisher-id">IaE</journal-id><journal-title-group><journal-title>Instrumentation and Equipments</journal-title></journal-title-group><issn pub-type="epub">2332-6980</issn><publisher><publisher-name>Scientific Research Publishing</publisher-name></publisher></journal-meta><article-meta><article-id pub-id-type="doi">10.12677/IaE.2019.73024</article-id><article-id pub-id-type="publisher-id">IaE-32088</article-id><article-categories><subj-group subj-group-type="heading"><subject>IaE20190300000_84400067.pdf</subject></subj-group><subj-group subj-group-type="Discipline-v2"><subject>工程技术</subject></subj-group></article-categories><title-group><article-title>
 
 
  基于MPU6050的航姿演示系统设计
  Design of Navigation and Attitude Demonstration System Based on MPU6050
 
</article-title></title-group><contrib-group><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>墨</surname><given-names>岩峰</given-names></name><xref ref-type="aff" rid="aff1"><sup>1</sup></xref><xref ref-type="corresp" rid="cor1"><sup>*</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>马</surname><given-names>浩</given-names></name><xref ref-type="aff" rid="aff3"><sup>3</sup></xref><xref ref-type="aff" rid="aff2"><sup>2</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>程</surname><given-names>春华</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff4"><sup>4</sup></xref></contrib></contrib-group><aff id="aff3"><addr-line>海军航空工程大学青岛校区学员30队，山东 青岛</addr-line></aff><aff id="aff2"><addr-line>null</addr-line></aff><aff id="aff1"><addr-line>中国人民解放军92635部队，山东 青岛</addr-line></aff><aff id="aff4"><addr-line>海军航空工程大学青岛校区，山东 青岛</addr-line></aff><pub-date pub-type="epub"><day>16</day><month>07</month><year>2019</year></pub-date><volume>07</volume><issue>03</issue><fpage>176</fpage><lpage>185</lpage><permissions><copyright-statement>&#169; Copyright  2014 by authors and Scientific Research Publishing Inc. </copyright-statement><copyright-year>2014</copyright-year><license><license-p>This work is licensed under the Creative Commons Attribution International License (CC BY). http://creativecommons.org/licenses/by/4.0/</license-p></license></permissions><abstract><p>
 
 
   本文提出了一种航姿演示系统的设计方案，该方案包括Arduino开发板和信息处理计算机。采用MPU6050为惯性测量单元和BT-HC05蓝牙模块为信息传输单元；利用Labview调动飞机3D模型跟随载体转动。最后系统测试表明了该方案的有效性。 In this paper, a design scheme of the attitude demonstration system is proposed, which includes Arduino board and information processing computer. MPU6050 is used as inertial measurement unit and BT-HC05 Bluetooth module is used as information transmission unit. The motion of the carrier is demonstrated in real time by the aircraft 3D model based on labview. Finally, the system test shows the effectiveness of the scheme. 
 
</p></abstract><kwd-group><kwd>MPU6050，航姿演示，Labview，Arduino, MPU6050</kwd><kwd> Attitude Demonstration</kwd><kwd> Labview</kwd><kwd> Arduino</kwd></kwd-group></article-meta></front><body><sec id="s1"><title>基于MPU6050的航姿演示系统设计<sup> </sup></title><p>墨岩峰<sup>1</sup>，马浩<sup>2</sup>，程春华<sup>3</sup></p><p><sup>1</sup>中国人民解放军92635部队，山东 青岛</p><p><sup>2</sup>海军航空工程大学青岛校区学员30队，山东 青岛</p><p><sup>3</sup>海军航空工程大学青岛校区，山东 青岛</p><p><img src="//html.hanspub.org/file/5-2990248x1_hanspub.png" /></p><p>收稿日期：2019年8月16日；录用日期：2019年9月3日；发布日期：2019年9月10日</p><disp-formula id="hanspub.32088-formula43"><graphic xlink:href="//html.hanspub.org/file/5-2990248x5_hanspub.png"  xlink:type="simple"/></disp-formula></sec><sec id="s2"><title>摘 要</title><p>本文提出了一种航姿演示系统的设计方案，该方案包括Arduino开发板和信息处理计算机。采用MPU6050为惯性测量单元和BT-HC05蓝牙模块为信息传输单元；利用Labview调动飞机3D模型跟随载体转动。最后系统测试表明了该方案的有效性。</p><p>关键词 :MPU6050，航姿演示，Labview，Arduino</p><disp-formula id="hanspub.32088-formula44"><graphic xlink:href="//html.hanspub.org/file/5-2990248x6_hanspub.png"  xlink:type="simple"/></disp-formula><p>Copyright &#169; 2019 by author(s) and Hans Publishers Inc.</p><p>This work is licensed under the Creative Commons Attribution International License (CC BY).</p><p>http://creativecommons.org/licenses/by/4.0/</p><p><img src="//html.hanspub.org/file/5-2990248x7_hanspub.png" /> <img src="//html.hanspub.org/file/5-2990248x8_hanspub.png" /></p></sec><sec id="s3"><title>1. 引言</title><p>MEMS是微机电系统(Micro-Electro-Mechanical Systems)的英文缩写，它是随着半导体集成电路微细加工技术和超精密机械加工技术的发展而发展起来的 [<xref ref-type="bibr" rid="hanspub.32088-ref1">1</xref>] 。关于航姿演示系统的设计，使用MEMS惯性传感器来测量载体航姿的研究并不少见，但是利用MPU6050测量航姿并且将航姿利用3D模型实时展示出来的研究较少。本系统中使用MPU6050作为惯性测量单元，采集载体的三轴加速度和三轴角速度数据，通过Arduino板上的MEGA328P微处理器进行滤波和解算，并将解算出的航姿角信息通过BT-HC05蓝牙传输给计算机，计算机中的Labview程序根据航姿角信息调动3D模型实现模型与载体同步转动。本方案对于航姿教学演示有着重要意义。</p><p>针对航姿角的解算，单独使用加速度数据或角速度数据都不能解算出满足系统精度要求的航姿角，因此本研究中先对角速度数据进行卡尔曼滤波，然后融合加速度和角速度数据 [<xref ref-type="bibr" rid="hanspub.32088-ref2">2</xref>] 并应用基于四元数的互补滤波算法，最终解算出能够满足系统要求的航姿角。</p></sec><sec id="s4"><title>2. 系统总体结构</title><p>航姿演示系统包括上位机和下位机两部分，其中下位机主要由MEMS惯性传感器MPU6050、Arduino开发板和BT-HC05组成，下位机即载体航姿测量平台的硬件系统；上位机由BT-HC05、CP2102和计算机组成，上位机即航姿演示系统。系统的总体结构如图1所示。</p><p>惯性传感器模块采用MPU6050，采集载体的加速度和角速度信号；Arduino开发板上的MEGA328P微处理器，可以实现与MPU6050的I2C通信，并根据接收到的加速度和角速度信号进行航姿解算；BT-HC05蓝牙模块共使用了两个，一个作为发送端，属于下位机，另一个作为接收端，属于上位机；CP2102是USB-UART转接器；计算机中的Labview程序可以显示出载体三个航姿角的数值变化，并且显示出飞机3D模型的转动情况。</p></sec><sec id="s5"><title>3. 载体航姿角的解算</title><p>在航姿演示系统中，MPU6050主要用于采集载体的三轴加速度和三轴角速度信号，MPU6050包含加速度计和陀螺仪，这两种传感器在频域上有着不同的特点。对于陀螺仪而言，陀螺仪的动态响应较好，对于载体的频繁运动较为敏感，但是利用陀螺仪计算航姿时会存在累积误差，它会随着时间延长不断增大；利用加速度计解算航姿不存在累积误差，但是它的动态响应较差，不能及时跟踪载体的航姿变化，这两种传感器刚好在频域上可以互相弥补对方的缺点。因此为了得到更加精准的航姿角，使系统有更好的动态性能，本方案在解算航姿角时利用互补滤波算法融合加速度计和陀螺仪的测量数据。</p><p>图1. 系统总体结构</p><p>图2. 解算过程</p><p>为进一步提高航姿角的解算精度，先对MPU6050输出的角速度信号进行卡尔曼滤波，然后融合加速度和滤波后的角速度数据并应用基于四元数的互补滤波算法解算出载体的航姿角。互补滤波的思想就是融合加速度计和陀螺仪数据，用加速度计的输出校正陀螺仪的累积误差，以达到提高航姿解算精度的目的 [<xref ref-type="bibr" rid="hanspub.32088-ref3">3</xref>] 。当被测载体发生转动时，惯性测量单元感应出载体三个轴方向上的加速度和角速度变化，微控制器根据给出的算法解算出载体实时的姿态角，解算过程如图2所示。</p><p>基于四元数的互补滤波过程如图3所示。</p><p>图3中 v ^ b 是重力向量，e即计算出的误差，这个误差其实是误差偏角的正弦值，但是当这个角度足够小时，它的正弦值就可以看作与它相等。</p><p>为测试基于四元数的互补滤波算法的解算效果，同时采集一段时间内使用此种方法解算出来的载体航姿角数据和使用快速解算法(使用测得的加速度或角速度直接解算载体航姿角)解算出来的两组载体航姿角数据，并使用Matlab进行仿真对比，结果如图4所示。</p><p>图3. 基于四元数的互补滤波算法</p><p>图4. 两种解算方法效果比较</p><p>由图4可以明显看出，使用基于四元数的互补滤波算法解算出的航姿角数据更加稳定，更能符合系统的要求。</p></sec><sec id="s6"><title>4. 系统的硬件结构</title><sec id="s6_1"><title>4.1. 载体平台的硬件系统</title><p>载体平台硬件系统即下位机的硬件载体，Arduino开发板作为航姿测量的硬件平台共有三个作用，一是读取MPU6050的输出，二是根据MPU6050的输出进行航姿解算，三是将解算后的航姿角数据通过蓝牙发送出去。开发板的核心是MEGA328P微处理器，引脚如图5所示。</p></sec><sec id="s6_2"><title>4.2. 惯性测量单元</title><p>MPU6050是一款六轴MEMS惯性传感器，上面集成了三轴加速度计和三轴陀螺仪，其中每一个轴的输出都为16位的ADC，陀螺仪的量程可选为&#177;250、&#177;500、&#177;1000、&#177;2000˚/s [<xref ref-type="bibr" rid="hanspub.32088-ref4">4</xref>] 。引脚描述如图6所示。</p></sec><sec id="s6_3"><title>4.3. 无线数据传输模块</title><p>系统中使用BT-HC05蓝牙模块满足下位机与上位机之间的无线通信需求。BT-HC05蓝牙模块的有效传输距离为10 m，借助USB-UART桥接器CP2102和串口调试助手软件可以方便对蓝牙的通信参数进行调试。</p></sec></sec><sec id="s7"><title>5. 系统的软件结构</title><p>系统软件主要完成载体航姿的解算、系统之间的通信以及3D模型的建立和调动问题。系统总体的软件结构如图7所示。软件部分包括上位机部分和下位机部分，上位机部分包括Labview软件平台和3D模型，下位机部分包括航姿解算和数据通信 [<xref ref-type="bibr" rid="hanspub.32088-ref5">5</xref>] 。</p><p>图5. MEGA328P引脚图</p><p>图6. MPU6050引脚图</p><p>图7. 系统软件结构</p><p>上位机中Labview软件平台是整个软件系统的基础，它可以分为数据通信、数据处理和调动3D模型三个部分；3D模型部分使用Vrmlpad软件编写飞机的3D模型，该模型由Labview程序调动。</p><p>下位机航姿解算部分包括MEGA328P中的数据滤波算法和航姿角解算算法，而数据通信部分包括微处理器与MPU6050的通信以及微处理器、蓝牙和计算机之间的通信。</p><p>图8. Labview数据通信</p><p>图9. 调动3D模型</p><p>Labview程序的数据通信部分主要使用VISA，如图8所示，使用VISA配置串口对串口通信的各项参数进行设置；数据处理部分主要用到队列操作函数和While循环，例如获取队列引用和元素出入队列等等；调动3D模型部分主要用到加载VRML文件、旋转对象、清除变形设置等等，如图9所示。程序可以根据输入的三个轴上的角度数据，在3D模型的三个轴方向上进行旋转，使其能够实时跟踪载体的航姿。</p></sec><sec id="s8"><title>6. 系统测试</title><p>完成每一个模块的设计后，组装整个系统并测试效果，航姿演示系统的工作流程如图10所示。</p><p>1) 选择端口</p><p>点击前面板“端口选择”，演示系统的端口号选为CP2102与计算机连接的端口号，此次调试中端口号选为COM7，如图11所示。</p><p>图10. 系统工作流程</p><p>图11. 选择端口</p><p>2) 系统开始运行</p><p>点击程序中工具栏操作选项中的运行，系统开始工作，如图12。系统开始运行，工作时间开始计系统开始运行时；示波器显示出三个角度的变化情况；出现飞机模型并且随着载体的转动而转动。</p><p>3) 结束运行</p><p>点击前面板上“停止”按钮，则系统停止运行，前面板上全部示数保持不变。如图13所示。</p><p>图12. 开始运行</p><p>图13. 结束运行</p></sec><sec id="s9"><title>7. 结语</title><p>本方案采用arduino开发板、MPU6050、两个BT-HC05模块，利用labview软件实现了载体航姿的演示功能；并且采用了卡尔曼滤波和基于四元数的互补滤波算法，使得解算出的航姿角更加稳定和精确。系统测试表明本方案能够快速响应航姿变化并将其测量和显示出来，该方案具有一定的工程参考和应用价值。</p></sec><sec id="s10"><title>文章引用</title><p>墨岩峰,马 浩,程春华. 基于MPU6050的航姿演示系统设计 Design of Navigation and Attitude Demonstration System Based on MPU6050[J]. 仪器与设备, 2019, 07(03): 176-185. https://doi.org/10.12677/IaE.2019.73024</p></sec><sec id="s11"><title>参考文献</title></sec></body><back><ref-list><title>References</title><ref id="hanspub.32088-ref1"><label>1</label><mixed-citation publication-type="other" xlink:type="simple">李明. MEMS惯性传感器在控制系统中的应用研究[J]. 电子设计工程, 2013, 21(3): 76-78.</mixed-citation></ref><ref id="hanspub.32088-ref2"><label>2</label><mixed-citation publication-type="other" xlink:type="simple">赖义汉, 王凯. 基于MPU6050的双轮平衡车控制系统设计[J]. 河南工程学院学报(自然科学版), 2014, 26(1): 53-57.</mixed-citation></ref><ref id="hanspub.32088-ref3"><label>3</label><mixed-citation publication-type="other" xlink:type="simple">王立, 章政, 孙平. 一种自适应互补滤波器姿态估计算法[J]. 控制工程, 2015(5): 882-884.</mixed-citation></ref><ref id="hanspub.32088-ref4"><label>4</label><mixed-citation publication-type="other" xlink:type="simple">于学鑫. 基于MPU6050的微小型无人机AHRS设计研究[D]: [硕士学位论文]. 呼和浩特: 内蒙古工业大学, 2016: 32-37.</mixed-citation></ref><ref id="hanspub.32088-ref5"><label>5</label><mixed-citation publication-type="other" xlink:type="simple">周兵, 党淑雯, 曹智顺, 李文博, 赵承诚, 李国栋. 基于虚拟仪器的仿真飞机航姿航向仪表的设计与演示[J]. 产业与科技论坛, 2013, 12(14): 71-72.</mixed-citation></ref></ref-list></back></article>