<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE article  PUBLIC "-//NLM//DTD Journal Publishing DTD v3.0 20080202//EN" "http://dtd.nlm.nih.gov/publishing/3.0/journalpublishing3.dtd"><article xmlns:mml="http://www.w3.org/1998/Math/MathML" xmlns:xlink="http://www.w3.org/1999/xlink" dtd-version="3.0" xml:lang="en" article-type="research article"><front><journal-meta><journal-id journal-id-type="publisher-id">MET</journal-id><journal-title-group><journal-title>Mechanical Engineering and Technology</journal-title></journal-title-group><issn pub-type="epub">2167-6631</issn><publisher><publisher-name>Scientific Research Publishing</publisher-name></publisher></journal-meta><article-meta><article-id pub-id-type="doi">10.12677/MET.2020.91002</article-id><article-id pub-id-type="publisher-id">MET-34303</article-id><article-categories><subj-group subj-group-type="heading"><subject>MET20200100000_76421895.pdf</subject></subj-group><subj-group subj-group-type="Discipline-v2"><subject>工程技术</subject></subj-group></article-categories><title-group><article-title>
 
 
  数控铣削加工参数离线–在线优化研究及应用
  Research and Application of Off-Online Optimization of CNC Machining Parameter
 
</article-title></title-group><contrib-group><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>刘</surname><given-names>恒丽</given-names></name><xref ref-type="aff" rid="aff1"><sup>1</sup></xref><xref ref-type="corresp" rid="cor1"><sup>*</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>王</surname><given-names>勇</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>董</surname><given-names>靖川</given-names></name><xref ref-type="aff" rid="aff3"><sup>3</sup></xref><xref ref-type="aff" rid="aff2"><sup>2</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>刘</surname><given-names>日鑫</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff4"><sup>4</sup></xref></contrib></contrib-group><aff id="aff3"><addr-line>天津大学，天津</addr-line></aff><aff id="aff2"><addr-line>null</addr-line></aff><aff id="aff4"><addr-line>河北师范大学，河北 石家庄</addr-line></aff><aff id="aff1"><addr-line>天津商业大学，天津</addr-line></aff><pub-date pub-type="epub"><day>20</day><month>02</month><year>2020</year></pub-date><volume>09</volume><issue>01</issue><fpage>13</fpage><lpage>25</lpage><permissions><copyright-statement>&#169; Copyright  2014 by authors and Scientific Research Publishing Inc. </copyright-statement><copyright-year>2014</copyright-year><license><license-p>This work is licensed under the Creative Commons Attribution International License (CC BY). http://creativecommons.org/licenses/by/4.0/</license-p></license></permissions><abstract><p>
 
 
  针对数控加工参数优化问题，提出了离线优化与在线自适应控制相结合策略，形成了离线–在线优化方法并开发相应的系统。首先通过基于Pareto遗传算法和TRIZ理论的离线优化得到加工参数最优解；在此基础上，基于自适应控制系统，在线调整进给速度，以电流作为反馈量来控制切削力，使得切削力保持在设定值，实现无论切削条件怎样变化，都能通过在线调整进给速度尽快稳定切削力，保证切削过程稳定性的目的；最后通过实验验证方案的有效性和可行性。&lt;br/&gt;This electronic document defines the standard format of the Chinese academic journals published. Aiming at the NC machining parameters optimization, a strategy is proposed combining off-line optimization with on-line adaptive control, and an off-online optimization method is formed and the corresponding system is developed. First, the optimal solution of machining parameters is obtained by off-line optimization based on Pareto genetic algorithm and TRIZ theory. On this basis, feed speed is adjusted online and current is used as feedback to control cutting force based on adaptive control system, and cutting force can be kept at a set value. No matter how cutting conditions change, cutting force can be stabilized as soon as possible by adjusting feed speed online, and the cutting process stability can be ensured. Finally, the effectiveness and feasibility of the scheme are verified by experiments.
 
</p></abstract><kwd-group><kwd>离线–在线优化，自适应控制，进给速度，切削力, Off-Online Optimization</kwd><kwd> Adaptive Control</kwd><kwd> Feed Rate</kwd><kwd> Cutting Force</kwd></kwd-group></article-meta></front><body><sec id="s1"><title>数控铣削加工参数离线–在线优化研究 及应用<sup> </sup></title><p>刘恒丽<sup>1</sup>，王勇<sup>1</sup>，董靖川<sup>2</sup>，刘日鑫<sup>3</sup></p><p><sup>1</sup>天津商业大学，天津</p><p><sup>2</sup>天津大学，天津</p><p><sup>3</sup>河北师范大学，河北 石家庄</p><p>收稿日期：2020年2月3日；录用日期：2020年2月18日；发布日期：2020年2月25日</p><disp-formula id="hanspub.34303-formula25"><graphic xlink:href="//html.hanspub.org/file/2-2340688x5_hanspub.png"  xlink:type="simple"/></disp-formula></sec><sec id="s2"><title>摘 要</title><p>针对数控加工参数优化问题，提出了离线优化与在线自适应控制相结合策略，形成了离线–在线优化方法并开发相应的系统。首先通过基于Pareto遗传算法和TRIZ理论的离线优化得到加工参数最优解；在此基础上，基于自适应控制系统，在线调整进给速度，以电流作为反馈量来控制切削力，使得切削力保持在设定值，实现无论切削条件怎样变化，都能通过在线调整进给速度尽快稳定切削力，保证切削过程稳定性的目的；最后通过实验验证方案的有效性和可行性。</p><p>关键词 :离线–在线优化，自适应控制，进给速度，切削力</p><disp-formula id="hanspub.34303-formula26"><graphic xlink:href="//html.hanspub.org/file/2-2340688x6_hanspub.png"  xlink:type="simple"/></disp-formula><p>Copyright &#169; 2020 by author(s) and Hans Publishers Inc.</p><p>This work is licensed under the Creative Commons Attribution International License (CC BY 4.0).</p><p>http://creativecommons.org/licenses/by/4.0/</p><p><img src="//html.hanspub.org/file/2-2340688x7_hanspub.png" /> <img src="//html.hanspub.org/file/2-2340688x8_hanspub.png" /></p></sec><sec id="s3"><title>1. 引言</title><p>针对数控加工过程优化，多年来国内外学者大都是围绕离线 [<xref ref-type="bibr" rid="hanspub.34303-ref1">1</xref>] [<xref ref-type="bibr" rid="hanspub.34303-ref2">2</xref>] [<xref ref-type="bibr" rid="hanspub.34303-ref3">3</xref>] 和在线 [<xref ref-type="bibr" rid="hanspub.34303-ref4">4</xref>] [<xref ref-type="bibr" rid="hanspub.34303-ref5">5</xref>] [<xref ref-type="bibr" rid="hanspub.34303-ref6">6</xref>] 这两种优化方法分别进行研究，而关于两者相结合优化的基础理论和应用研究比较有限 [<xref ref-type="bibr" rid="hanspub.34303-ref7">7</xref>] [<xref ref-type="bibr" rid="hanspub.34303-ref8">8</xref>] [<xref ref-type="bibr" rid="hanspub.34303-ref9">9</xref>]。但在实际加工过程中，影响加工因素很多，除了与离线优化参数有关，也受到电机电流，刀具温度，切削力等在线因素影响；同时单独的自适应控制方法控制切削力效果也不太理想，控制器不能由于切削参数突变而足够快地作出反应去消除切削力大的突变 [<xref ref-type="bibr" rid="hanspub.34303-ref10">10</xref>]，因此对离线和在线相结合优化技术进行研究对数控加工过程优化有重要意义。</p></sec><sec id="s4"><title>2. 数控加工参数离线–在线优化策略及系统原理</title><sec id="s4_1"><title>2.1. 优化策略</title><p>优化策略主要是将进给速度离线优化与切削过程在线自适应优化相结合，如图1所示。相对于传统方法，新的优化控制系统的目标是保持尽可能高的切削率的同时，使得切削力尽可能接近设定值，保证加工过程的平稳。优化系统通过自适应调节进给速度，自动调节到稳定的切削状态，当主轴负载降低时，系统增加进给速度并达到程序设定值，减少加工时间和成本；当主轴负载增加，进给速度降低，避免切削刀具遭到破坏和损坏。离线与在线优化过程如下：</p><p>(1) 系统程序中设定的基本参数为参考切削条件。</p><p>(2) 通过基于Pareto遗传算法和TRIZ理论相结合的离线优化算法优化参考切削条件。</p><p>(3) 由离线优化算法优化程序中设定的进给速度，输送到加工机床的CNC控制器中。</p><p>(4) 所测量到的主轴电机电流被送到模糊自适应控制系统。</p><p>(5) 模糊自适应控制系统调整优化的进给速度并反馈给机床，并依据此进给速度值进行切削。</p><p>(6) 当切削条件发生改变时，重复(1)~(5)，直到所有切削完成。</p><p>基于所测量的主机电流的峰值(图1)，模糊自适应控制器通过分配进给速度的百分率给CNC控制器去调整进给速度。实际的进给速度是由进给速度的百分率和程序中设定的进给速度值来产生。如果优化切削条件的系统功能可靠，优化后的进给速度会一直保持在参考值不变，在这种情况下，正确率是100%。为了使得控制器能调整到电流值的峰值，必须保证一定的采样间隔时间内采样电流值传输到模糊控制算法，离线、在线优化算法的数据准确性和软件系统的可靠性是保证信息采集准确的保障。每一步切削的进给速度首先经过离线优化，然后再经过自适应控制在线优化产生机床加工用参数，系统在第4步或最迟在循环之前使得电流值回归到期望值。</p><p>图1. 离线–在线优化方案</p></sec><sec id="s4_2"><title>2.2. 系统原理</title><p>数控铣削过程离线–在线优化系统构成模块主要有：一、离线优化模块。主要作用是实现基本切削参数的优化，并输送到数控系统。二、在线优化模块。主要作用是从主轴电机中提取电流信号特征值与设定值进行比较，通过模糊控制器的调节，实现切削力的在线优化。图2所示为系统总体架构，上位机部分是数控系统主机，就加工动作进行控制；下位机的功能主要是进行数据采集、传输，同时还要进行信号监测与识别。</p></sec></sec><sec id="s5"><title>3. 系统软、硬件结构实现</title><sec id="s5_1"><title>3.1. 优化系统软件实现</title><p>基于数控系统软件总体架构 [<xref ref-type="bibr" rid="hanspub.34303-ref11">11</xref>] [<xref ref-type="bibr" rid="hanspub.34303-ref12">12</xref>] 及可视化编程软件，开发了离线–在线优化系统软件模块，并嵌入到自主研发的TDNC-H8和TDNC-SX数控系统中。图3为TDNC-H8数控系统中的优化模块，图4为TDNC-SX数控系统中的优化模块。</p><p>在TDNC-H8数控系统中嵌入离线优化模块，根据设定条件及基本切削参数对程序中的参数进行优化，并在主界面上进行显示；同时在“机床”工作区，设有“监控”单元，即数据采集系统，通过高速现场总线从传感器获取实时数据，并在界面上进行显示，其中第三通道为提取的主轴电机电流信号，以数值柱状图形式显示，更为直观。所提取到的电流值同时传递给模糊控制程序进行判断和运算，如果超过设定值，启动模糊控制程序，调整进给速度倍率，并且相应地在主界面上显示进给速度值的变化，进而使得电流值尽快回归设定值，实现在线优化；同时将实际电流值与设定值比较得到负载率，以柱状图形式在主界面上显示。</p><p>图2. 离线–在线优化系统原理</p><p>图3. 基于TDNC-H8数控系统的优化模块</p></sec><sec id="s5_2"><title>3.2. 系统硬件</title><p>数控铣削参数离线–在线优化系统硬件结构主要包括所基于的数控系统硬件平台和在线自适应优化模块电流提取装置。图5为基于自主开发的TDNC-SX数控系统硬件平台，同时也是本文研究的离线–在线优化系统实现所基于的硬件平台。具体由以下几部分组成。</p><p>图4. TDNC-SX数控系统及参数监测和优化模块</p><p>图5. TDNC-SX数控系统硬件平台</p><p>数控系统：实验中采用TDNC-W200型数控铣床，系统为自主研发的TDNC-SX系统。</p><p>(2) 电流传感器：电流传感器型号为I412F21，输入规格为30 A，输出规格为0~5 V，供电电源为24 V。对主轴电机的交流电流进行实时测量，将其变换为标椎的直流电压(U<sub>z</sub>)输出，假定在传感器量程范围内，任意测得值一个输入值为I<sub>r</sub>，那么输出电压值<inline-formula><inline-graphic xlink:href="//html.hanspub.org/file/2-2340688x14_hanspub.png" xlink:type="simple"/></inline-formula>。</p><p>(3) 数据采集卡：基于功能扩展考虑，选取的是8通道ADC转换芯片ADS8568，从而满足高速连续的数据采集需求。</p></sec></sec><sec id="s6"><title>4. 实验验证</title><p>以CAM软件生成的数控程序为研究对象，分别进行传统铣削加工和采用离线-在线优化系统的加工实验，对比优化前后的切削负荷变化情况，检验是否实现恒力切削，保持加工稳定性；并通过优化前后加工时间变化对比加工效率，及通过测量表面粗糙度对比加工精度。</p><p>数控铣削离–在线优化实验设备选择自主研发的TDNC-W200数控铣床，如图6所示，数控系统为自主研发的TDNC-SX系统，电流提取和监测装置如图7，实验基本条件和参数如表1所示，以切削深度变化为变化因素进行平面铣削。</p><sec id="s6_1"><title>4.1. 变切深铣削单工序传统加工实验</title><p>变切深传统铣削单工序加工实验参数见表2，以切削深度改变为变化因素，分别按照0.5 mm，1 mm，1.5 mm，2 mm的切深参数进行平面铣削，并且传统的铣削加工进给速度值保持恒定不变，其加工过程及结果如图8所示。</p><p>通过计算可以得出，整个加工时间为176 s，经测量，表面加工精度为10 μm；当切深发生变化时，进给速度值为200 mm/min保持不变，整个切削过程，电流值没有达到允许最大值，即切削力没有达到最大值，机床加工效率较低。</p><p>图6. 离线–在线优化实验机床</p><p>图7. 电流提取</p><table-wrap id="table1" ><label><xref ref-type="table" rid="table1">Table 1</xref></label><caption><title> Off-online optimization experimental parameter</title></caption><table><tbody><thead><tr><th align="center" valign="middle" >类别</th><th align="center" valign="middle" >具体参数</th><th align="center" valign="middle" >数值或名称</th></tr></thead><tr><td align="center" valign="middle"  rowspan="3"  >机床</td><td align="center" valign="middle" >最大进给速度</td><td align="center" valign="middle" >15 m/min</td></tr><tr><td align="center" valign="middle" >最大转速</td><td align="center" valign="middle" >1000 r/min</td></tr><tr><td align="center" valign="middle" >主轴电机允许的最大电流</td><td align="center" valign="middle" >10 A</td></tr><tr><td align="center" valign="middle" >刀具</td><td align="center" valign="middle" >合金盘铣刀齿数</td><td align="center" valign="middle" >4</td></tr><tr><td align="center" valign="middle" ></td><td align="center" valign="middle" >刀具直径</td><td align="center" valign="middle" >8 mm</td></tr><tr><td align="center" valign="middle"  rowspan="2"  >实验工件</td><td align="center" valign="middle" >材料</td><td align="center" valign="middle" >铝合金</td></tr><tr><td align="center" valign="middle" >尺寸</td><td align="center" valign="middle" >直径80 mm</td></tr></tbody></table></table-wrap><p>表1. 数控铣削离线–在线优化实验参数</p><table-wrap id="table2" ><label><xref ref-type="table" rid="table2">Table 2</xref></label><caption><title> Traditional processing experimental parameters of single proces</title></caption><table><tbody><thead><tr><th align="center" valign="middle" >程序设定切削 深度(mm)</th><th align="center" valign="middle" >进给速度 (mm/min)</th><th align="center" valign="middle" >主轴转速 (r/min)</th><th align="center" valign="middle" >电机允许最大 电流(A)</th><th align="center" valign="middle" >进给倍率(%)</th><th align="center" valign="middle" >主电机电流(A)</th><th align="center" valign="middle" >加工时间(s)</th></tr></thead><tr><td align="center" valign="middle" >0.5</td><td align="center" valign="middle" >200</td><td align="center" valign="middle" >500</td><td align="center" valign="middle" >10</td><td align="center" valign="middle" >100</td><td align="center" valign="middle" >7.2</td><td align="center" valign="middle" >44</td></tr><tr><td align="center" valign="middle" >1</td><td align="center" valign="middle" >200</td><td align="center" valign="middle" >500</td><td align="center" valign="middle" >10</td><td align="center" valign="middle" >100</td><td align="center" valign="middle" >7.6</td><td align="center" valign="middle" >44</td></tr><tr><td align="center" valign="middle" >1.5</td><td align="center" valign="middle" >200</td><td align="center" valign="middle" >500</td><td align="center" valign="middle" >10</td><td align="center" valign="middle" >100</td><td align="center" valign="middle" >7.8</td><td align="center" valign="middle" >44</td></tr><tr><td align="center" valign="middle" >2</td><td align="center" valign="middle" >200</td><td align="center" valign="middle" >500</td><td align="center" valign="middle" >10</td><td align="center" valign="middle" >100</td><td align="center" valign="middle" >8.2</td><td align="center" valign="middle" >44</td></tr></tbody></table></table-wrap><p>表2. 变切深单工序传统加工实验参数</p><p>图8. 单工序传统加工实验过程</p></sec><sec id="s6_2"><title>4.2. 变切深铣削单工序优化加工实验</title><p>与传统试验加工要求相同，以切削深度改变为变化因素，分别按照0.5 mm，1 mm，1.5 mm，2 mm的切深参数进行平面铣削实验，基于机床实际情况，限定切削速度范围为<inline-formula><inline-graphic xlink:href="//html.hanspub.org/file/2-2340688x18_hanspub.png" xlink:type="simple"/></inline-formula>，每齿进给量范围为<inline-formula><inline-graphic xlink:href="//html.hanspub.org/file/2-2340688x19_hanspub.png" xlink:type="simple"/></inline-formula>。首先采用离线优化方法得到最优的切削速度和每齿进给量，例如：当切深为0.5 mm时，运用文献 [<xref ref-type="bibr" rid="hanspub.34303-ref13">13</xref>] 阐述的方法，得到图9和表3所示的优化结果。</p><p>图9. 切深0.5毫米时的最优解集</p><p>从中可以看出，当刀具耐用度越大时，加工效率越低，加工成本也降低，并且基于经验一般进行折衷选择，即选择刀具耐用度 ≤ 300 (min)，加工效率 ≤ 2 (min<sup>−1</sup>)的参数，如表4所示。然后再结合TRIZ理论进行最优解的决策，通过比较，根据加工效率优先考虑，兼顾刀具耐用度和加工成本的原则，第41组参数符合要求，确定为最终最优加工参数，同理，得到当切深分别为1 mm，1.5 mm时的最优解集如图10所示，再基于TRIZ理论对最优解集进行决策，分别得到最优解如表5所示。</p><table-wrap id="table3" ><label><xref ref-type="table" rid="table3">Table 3</xref></label><caption><title> Optimization results of 0.5 millimeter</title></caption><table><tbody><thead><tr><th align="center" valign="middle" >序号</th><th align="center" valign="middle" >刀具耐用度 (min)</th><th align="center" valign="middle" >加工效率 (min<sup>−1</sup>)</th><th align="center" valign="middle" >加工成本 (元)</th><th align="center" valign="middle" >切削速度 (m/min)</th><th align="center" valign="middle" >每齿进给量 (mm/齿)</th></tr></thead><tr><td align="center" valign="middle" >4</td><td align="center" valign="middle" >262.484</td><td align="center" valign="middle" >1.406</td><td align="center" valign="middle" >21.59</td><td align="center" valign="middle" >10.843</td><td align="center" valign="middle" >0.102</td></tr><tr><td align="center" valign="middle" >11</td><td align="center" valign="middle" >525.792</td><td align="center" valign="middle" >0.882</td><td align="center" valign="middle" >20.79</td><td align="center" valign="middle" >6.837</td><td align="center" valign="middle" >0.102</td></tr><tr><td align="center" valign="middle" >15</td><td align="center" valign="middle" >248.632</td><td align="center" valign="middle" >1.47</td><td align="center" valign="middle" >21.68</td><td align="center" valign="middle" >11.196</td><td align="center" valign="middle" >0.103</td></tr><tr><td align="center" valign="middle" >21</td><td align="center" valign="middle" >311.586</td><td align="center" valign="middle" >1.24</td><td align="center" valign="middle" >21.34</td><td align="center" valign="middle" >9.727</td><td align="center" valign="middle" >0.1</td></tr><tr><td align="center" valign="middle" >25</td><td align="center" valign="middle" >213.378</td><td align="center" valign="middle" >1.897</td><td align="center" valign="middle" >21.96</td><td align="center" valign="middle" >11.485</td><td align="center" valign="middle" >0.13</td></tr><tr><td align="center" valign="middle" >32</td><td align="center" valign="middle" >553.489</td><td align="center" valign="middle" >0.852</td><td align="center" valign="middle" >20.75</td><td align="center" valign="middle" >6.605</td><td align="center" valign="middle" >0.102</td></tr><tr><td align="center" valign="middle" >35</td><td align="center" valign="middle" >689.869</td><td align="center" valign="middle" >0.748</td><td align="center" valign="middle" >20.60</td><td align="center" valign="middle" >5.659</td><td align="center" valign="middle" >0.104</td></tr><tr><td align="center" valign="middle" >39</td><td align="center" valign="middle" >204.126</td><td align="center" valign="middle" >1.936</td><td align="center" valign="middle" >22.05</td><td align="center" valign="middle" >11.885</td><td align="center" valign="middle" >0.128</td></tr><tr><td align="center" valign="middle" >41</td><td align="center" valign="middle" >233.422</td><td align="center" valign="middle" >1.856</td><td align="center" valign="middle" >21.79</td><td align="center" valign="middle" >10.613</td><td align="center" valign="middle" >0.138</td></tr></tbody></table></table-wrap><p>表3. 切深0.5毫米时的优化数值</p><table-wrap id="table4" ><label><xref ref-type="table" rid="table4">Table 4</xref></label><caption><title> Machining parameters set of 0.5 millimeter</title></caption><table><tbody><thead><tr><th align="center" valign="middle" >序号</th><th align="center" valign="middle" >刀具耐用度(min)</th><th align="center" valign="middle" >加工效率 (min<sup>−1</sup>)</th><th align="center" valign="middle" >加工成本 (元)</th><th align="center" valign="middle" >切削速度 (m/min)</th><th align="center" valign="middle" >每齿进给量 (mm/齿)</th></tr></thead><tr><td align="center" valign="middle" >4</td><td align="center" valign="middle" >262.484</td><td align="center" valign="middle" >1.406</td><td align="center" valign="middle" >21.59</td><td align="center" valign="middle" >10.843</td><td align="center" valign="middle" >0.102</td></tr><tr><td align="center" valign="middle" >15</td><td align="center" valign="middle" >248.632</td><td align="center" valign="middle" >1.47</td><td align="center" valign="middle" >21.68</td><td align="center" valign="middle" >11.196</td><td align="center" valign="middle" >0.103</td></tr><tr><td align="center" valign="middle" >25</td><td align="center" valign="middle" >213.378</td><td align="center" valign="middle" >1.897</td><td align="center" valign="middle" >21.96</td><td align="center" valign="middle" >11.485</td><td align="center" valign="middle" >0.13</td></tr><tr><td align="center" valign="middle" >39</td><td align="center" valign="middle" >204.126</td><td align="center" valign="middle" >1.936</td><td align="center" valign="middle" >22.05</td><td align="center" valign="middle" >11.885</td><td align="center" valign="middle" >0.128</td></tr><tr><td align="center" valign="middle" >41</td><td align="center" valign="middle" >233.422</td><td align="center" valign="middle" >1.856</td><td align="center" valign="middle" >21.79</td><td align="center" valign="middle" >10.613</td><td align="center" valign="middle" >0.138</td></tr></tbody></table></table-wrap><p>表4. 切深0.5毫米时的最优加工参数解集</p><p>然后，根据离线优化后所得最优解根据文献 [<xref ref-type="bibr" rid="hanspub.34303-ref14">14</xref>] 的方法进行在线切削加工实时在线优化。依据加工平台实际情况，为了保机床、刀具和工件，设定电机允许最大电流值为8 A，以切削深度改变为变化因素，采用离线–在线优化系统进行加工实验，基本参数及结果见表6，加工过程及效果如图11所示。</p><p>表6数据显示，第一道工序为铣削切深为0.5 mm的平面，此时经离线优化后初始进给速度值为230 mm/min，进给倍率为100，电流值为7.2 A，通过在线自适应优化，输出进给倍率调整量为50，即系统进给速度调整到240 mm/min，此时电流值为7.8 A，接近设定值，完成加工时间为30 s，经测量，表面加工精度为8 μm；其他几个工序的加工实验同理。</p><p>从数值上看，当实际电流小于设定电流值时，系统通过在线自适应调整，使得系统电流回归到设定值附近，即切削力保证在最大值附近，发挥机床最大效率。当切深为2 mm时，电流值为8.2 A，此时超出设定值，系统通过在线自适应调整，降低进给速度到100 mm/min，此时电流值降低到7.6 A，回归到设定值附近，虽然加工时间稍微增加，但保护了机床和刀具。</p><p>采用传统方法和优化方法加工实验的基本参数和切削条件相同。但当切深改变时，传统加工中，进给速度值恒定不变，电流和切削力从未达到允许最大值；而优化加工过程中，进给速度得到在线调整，保证允许值范围内的最大电流和最大切削力，并且基于自适应控制系统的进给速度比传统加工的进给速度值要大，因此，在线自适应优化系统提高了加工效率。通过计算加工时间，对于每一个工序来说，自适应优化系统的加工时间比传统加工时间节省了14秒，假如完成全部加工需要15个工序，那么加工一个工件的时间就缩短了210秒。同时，当系统电流值超过设定值，即切削力突然增加，超出设定值时，通过自适应调整进给速度，降低电流值，即减小切削力，实现对机床、工件和刀具的保护。</p><p>图10. 不同切深时的最优解集</p></sec></sec><sec id="s7"><title>5. 应用</title><p>基于系统离线–在线优化模块和功能进行飞机模型加工，主要用于粗加工阶段。根据实验用机床实际情况，切削速度为<inline-formula><inline-graphic xlink:href="//html.hanspub.org/file/2-2340688x22_hanspub.png" xlink:type="simple"/></inline-formula>，每齿进给量为<inline-formula><inline-graphic xlink:href="//html.hanspub.org/file/2-2340688x23_hanspub.png" xlink:type="simple"/></inline-formula>，切深为0.2 mm，飞机的外形轮廓总长为318 mm，如图12所示，具体实验参数如表7所示。</p><table-wrap id="table5" ><label><xref ref-type="table" rid="table5">Table 5</xref></label><caption><title> Machining parameters based on different the cutting dept</title></caption><table><tbody><thead><tr><th align="center" valign="middle" >切削深度 (mm)</th><th align="center" valign="middle" >刀具耐用度 (min)</th><th align="center" valign="middle" >加工效率 (min<sup>−1</sup>)</th><th align="center" valign="middle" >切削速度 (m/min)</th><th align="center" valign="middle" >每齿进给量 (mm/齿)</th><th align="center" valign="middle" >主轴转速 (r/min)</th><th align="center" valign="middle" >进给速度(mm/min)</th></tr></thead><tr><td align="center" valign="middle" >0.5</td><td align="center" valign="middle" >233.422</td><td align="center" valign="middle" >1.856</td><td align="center" valign="middle" >10.613</td><td align="center" valign="middle" >0.138</td><td align="center" valign="middle" >520</td><td align="center" valign="middle" >230</td></tr><tr><td align="center" valign="middle" >1</td><td align="center" valign="middle" >185.489</td><td align="center" valign="middle" >1.464</td><td align="center" valign="middle" >10.636</td><td align="center" valign="middle" >0.108</td><td align="center" valign="middle" >520</td><td align="center" valign="middle" >180</td></tr><tr><td align="center" valign="middle" >1.5</td><td align="center" valign="middle" >140.445</td><td align="center" valign="middle" >1.57</td><td align="center" valign="middle" >11.079</td><td align="center" valign="middle" >0.112</td><td align="center" valign="middle" >540</td><td align="center" valign="middle" >190</td></tr><tr><td align="center" valign="middle" >2</td><td align="center" valign="middle" >111.721</td><td align="center" valign="middle" >1.687</td><td align="center" valign="middle" >11.627</td><td align="center" valign="middle" >0.114</td><td align="center" valign="middle" >560</td><td align="center" valign="middle" >200</td></tr></tbody></table></table-wrap><p>表5. 不同切削深度时最优加工参数</p><table-wrap id="table6" ><label><xref ref-type="table" rid="table6">Table 6</xref></label><caption><title> Off -on line optimized processing experimental parameter</title></caption><table><tbody><thead><tr><th align="center" valign="middle" >切削深度(mm)</th><th align="center" valign="middle" >主轴转速 (r/min)</th><th align="center" valign="middle" >初始 进给速度(mm/min)</th><th align="center" valign="middle" >初始倍率 (%)</th><th align="center" valign="middle" >初始电流 (A)</th><th align="center" valign="middle" >调整倍率(%)</th><th align="center" valign="middle" >调整后 进给速度(mm/min)</th><th align="center" valign="middle" >调整后 主电机电流 (A)</th><th align="center" valign="middle" >加工时间 (s)</th></tr></thead><tr><td align="center" valign="middle" >0.5</td><td align="center" valign="middle" >520</td><td align="center" valign="middle" >230</td><td align="center" valign="middle" >100</td><td align="center" valign="middle" >7.2</td><td align="center" valign="middle" >50</td><td align="center" valign="middle" >240</td><td align="center" valign="middle" >7.8</td><td align="center" valign="middle" >30</td></tr><tr><td align="center" valign="middle" >1</td><td align="center" valign="middle" >520</td><td align="center" valign="middle" >180</td><td align="center" valign="middle" >100</td><td align="center" valign="middle" >7.6</td><td align="center" valign="middle" >75</td><td align="center" valign="middle" >280</td><td align="center" valign="middle" >7.8</td><td align="center" valign="middle" >30</td></tr><tr><td align="center" valign="middle" >1.5</td><td align="center" valign="middle" >540</td><td align="center" valign="middle" >190</td><td align="center" valign="middle" >100</td><td align="center" valign="middle" >7.8</td><td align="center" valign="middle" >50</td><td align="center" valign="middle" >300</td><td align="center" valign="middle" >8</td><td align="center" valign="middle" >30</td></tr><tr><td align="center" valign="middle" >2</td><td align="center" valign="middle" >560</td><td align="center" valign="middle" >200</td><td align="center" valign="middle" >100</td><td align="center" valign="middle" >8.2</td><td align="center" valign="middle" >−50</td><td align="center" valign="middle" >100</td><td align="center" valign="middle" >7.6</td><td align="center" valign="middle" >60</td></tr></tbody></table></table-wrap><p>表6. 离线-在线优化加工实验基本参数</p><p>图11. 单工序离线–在线优化加工实验过程</p><p>图12. 加工飞机模型</p><table-wrap id="table7" ><label><xref ref-type="table" rid="table7">Table 7</xref></label><caption><title> Off-line and on-line optimization experimental parameters of model plan</title></caption><table><tbody><thead><tr><th align="center" valign="middle" >类别</th><th align="center" valign="middle" >具体参数</th><th align="center" valign="middle" >数值或名称</th></tr></thead><tr><td align="center" valign="middle"  rowspan="3"  >机床</td><td align="center" valign="middle" >最大进给速度</td><td align="center" valign="middle" >15 m/min</td></tr><tr><td align="center" valign="middle" >最大转速</td><td align="center" valign="middle" >2000 r/min</td></tr><tr><td align="center" valign="middle" >主轴电机电流设定值</td><td align="center" valign="middle" >7.6 A</td></tr><tr><td align="center" valign="middle" >刀具</td><td align="center" valign="middle" >合金盘铣刀齿数</td><td align="center" valign="middle" >4</td></tr><tr><td align="center" valign="middle" ></td><td align="center" valign="middle" >刀具直径</td><td align="center" valign="middle" >8 mm</td></tr><tr><td align="center" valign="middle"  rowspan="2"  >实验工件</td><td align="center" valign="middle" >材料</td><td align="center" valign="middle" >铝合金</td></tr><tr><td align="center" valign="middle" >直径</td><td align="center" valign="middle" >60 mm</td></tr></tbody></table></table-wrap><p>表7. 离线–在线优化飞机模型加工实验参数</p><p>采用基于Pareto遗传算法和TRIZ理论相结合的离线优化方法，得到以最大加工效率，最大刀具耐用度和最低加工成本为多目标的最优切削参数组合，如图13和表8所示。</p><p>图13. 飞机模型加工参数Pareto解集</p><table-wrap id="table8" ><label><xref ref-type="table" rid="table8">Table 8</xref></label><caption><title> Off line optimization experimental parameters of model plan</title></caption><table><tbody><thead><tr><th align="center" valign="middle" >切削深度 (mm)</th><th align="center" valign="middle" >刀具耐用度(min)</th><th align="center" valign="middle" >加工效率 (min<sup>−1</sup>)</th><th align="center" valign="middle" >加工成本 (元)</th><th align="center" valign="middle" >切削速度 (m/min)</th><th align="center" valign="middle" >每齿进给量 (mm/齿)</th><th align="center" valign="middle" >主轴转速 (r/min)</th><th align="center" valign="middle" >进给速度 (mm/min)</th></tr></thead><tr><td align="center" valign="middle" >0.2</td><td align="center" valign="middle" >77.814</td><td align="center" valign="middle" >1.439</td><td align="center" valign="middle" >25</td><td align="center" valign="middle" >35.88</td><td align="center" valign="middle" >0.08</td><td align="center" valign="middle" >1500</td><td align="center" valign="middle" >500</td></tr></tbody></table></table-wrap><p>表8. 飞机模型离线优化加工参数</p><p>根据离线优化后的参数进行编程和加工，在系统在线模糊自适应调节下，当切削电流超过和达不到设定值时，系统会通过调节进给倍率，进而调节进给速度，使得电流回归设定值，以保证加工过程稳定，并且发挥机床最大功率，提高加工效率和质量。飞机模型加工过程在线优化参数如表9和图14所示。</p><p>由图15看出，电流值在40 s时开始靠近设定值7.6 A，并且上下波动幅度较小，在100 s时基本稳定在设定值。由于开始加工后启动模糊自适应在线优化存在延迟，并且通过电机附带的显示器读数，调整前电流为7.9 A，高过电流设定值，在模糊控制的作用下调整到既定值，实现了在保证一定加工效率和加工成本的同时，也保证了机床加工稳定性和加工质量，验证了离线和在线结合优化方法的可行性，加工实验过程和效果如图16所示。</p><p>图14. 飞机模型在线优化加工参数界面显示</p><table-wrap id="table9" ><label><xref ref-type="table" rid="table9">Table 9</xref></label><caption><title> On line optimization experimental parameters of model plan</title></caption><table><tbody><thead><tr><th align="center" valign="middle" >切削深度 (mm)</th><th align="center" valign="middle" >主轴转速 (r/min)</th><th align="center" valign="middle" >初始 进给速度 (mm/min)</th><th align="center" valign="middle" >初始倍率 (%)</th><th align="center" valign="middle" >初始电流 (A)</th><th align="center" valign="middle" >调整倍率 (%)</th><th align="center" valign="middle" >调整后 进给速度 (mm/min)</th><th align="center" valign="middle" >调整后 主电机电流 (A)</th></tr></thead><tr><td align="center" valign="middle" >0.2</td><td align="center" valign="middle" >1500</td><td align="center" valign="middle" >500</td><td align="center" valign="middle" >100</td><td align="center" valign="middle" >7.9</td><td align="center" valign="middle" >10</td><td align="center" valign="middle" >50</td><td align="center" valign="middle" >7.6</td></tr></tbody></table></table-wrap><p>表9. 飞机模型在线优化加工参数</p><p>图15. 飞机模型加工电流在线调节情况</p><p>图16. 飞机模型加工过程</p></sec><sec id="s8"><title>6. 结论</title><p>本文针对数控加工参数离线和在线优化特点，提出了离线优化和自适应在线调整相结合的优化方案，形成了由进给速度离线优化和切削过程在线自适应控制的优化策略，并详细阐述了离线优化和在线优化间参数传递及优化过程。在此基础上，基于自主研发的数控加工平台软硬件架构开发了优化系统模块，并在平台上进行实验，以加工飞机模型为例，首先通过Pareto和TRIZ相结合的离线优化方法，得到以加工效率、刀具耐用度和加工成本为优化目标时的最优切削速度和系统进给量；接着，通过在线优化系统根据所采集的电流信息，进行进给速度的在线自适应优化，最终实现了加工效率和加工成本最优的同时，提高了机床加工稳定性和加工质量，进而验证了离线–在线优化方案的可行性和方法的正确性。</p></sec><sec id="s9"><title>文章引用</title><p>刘恒丽,王 勇,董靖川,刘日鑫. 数控铣削加工参数离线–在线优化研究及应用Research and Application of Off-Online Optimization of CNC Machining Parameter[J]. 机械工程与技术, 2020, 09(01): 13-25. https://doi.org/10.12677/MET.2020.91002</p></sec><sec id="s10"><title>参考文献</title></sec></body><back><ref-list><title>References</title><ref id="hanspub.34303-ref1"><label>1</label><mixed-citation publication-type="other" xlink:type="simple">Benardos, P. and Vosniakos, G.C. (2014) Offline Flexible Optimisation of Feed and Speed in Computer Numerical Control Machining of Sculptured Surfaces Exploiting Dedicated Cutting Force Metamodels. Proceedings of the Institution of Mechanical Engineers Part B: Journal of Engineering Manufacture, 228, 878-892. &lt;br&gt;https://doi.org/10.1177/0954405413508946</mixed-citation></ref><ref id="hanspub.34303-ref2"><label>2</label><mixed-citation publication-type="other" xlink:type="simple">李聪波, 崔龙国, 刘飞, 等. 面向高效低碳的数控加工参数多目标优化模型[J]. 机械工程学报, 2013, 49(9): 87-96.</mixed-citation></ref><ref id="hanspub.34303-ref3"><label>3</label><mixed-citation publication-type="other" xlink:type="simple">苏少普, 徐广涛, 董登科, 等. 基于Pareto遗传算法的腹板梁结构抗屈曲疲劳优化设计研究[J]. 机械强度, 2018, 40(6): 1371-1376.</mixed-citation></ref><ref id="hanspub.34303-ref4"><label>4</label><mixed-citation publication-type="other" xlink:type="simple">Zuperl, U. and Cus, F. (2015) Simulation and Visual Control of Chip Size for Constant Surface Roughness. International Journal of Simulation Modelling, 14, 392-403. &lt;br&gt;https://doi.org/10.2507/IJSIMM14(3)2.282</mixed-citation></ref><ref id="hanspub.34303-ref5"><label>5</label><mixed-citation publication-type="other" xlink:type="simple">Han, U.L., Dong-Woo, C., et al. (2007) Prediction of Chatter in NC Machining Based on a Dynamic Cutting Force Model for Ball End Milling. International Journal of Machine Tools &amp; Manufacture, 47, 1827-1838. &lt;br&gt;https://doi.org/10.1016/j.ijmachtools.2007.04.005</mixed-citation></ref><ref id="hanspub.34303-ref6"><label>6</label><mixed-citation publication-type="other" xlink:type="simple">Cus, F., Zuperl, U., Kiker, E. and Milfelner, M. (2006) Adaptive Controller Design for Feed Rate Maximization of Machining Process. Journal of Achievements in Materials and Manufacturing Engineering, 17, 237-240.</mixed-citation></ref><ref id="hanspub.34303-ref7"><label>7</label><mixed-citation publication-type="other" xlink:type="simple">Zuperl, U. and Cus, F. (2012) System for Off-Line Feed Rate Optimization and Neural Force Control in End Milling. International Journal of Adaptive Control and Signal Processing, 26, 105-123. &lt;br&gt;https://doi.org/10.1002/acs.1277</mixed-citation></ref><ref id="hanspub.34303-ref8"><label>8</label><mixed-citation publication-type="other" xlink:type="simple">高亮, 杨扬, 李新宇. 数控加工参数优化的研究现状与进展[J]. 航空制造技术, 2010(22): 48-51.</mixed-citation></ref><ref id="hanspub.34303-ref9"><label>9</label><mixed-citation publication-type="other" xlink:type="simple">周志恒, 张超勇, 谢阳, 等. 数控车床切削参数的能量效率优化[J]. 计算机集成制造系统, 2015, 21(9): 2410-2418.</mixed-citation></ref><ref id="hanspub.34303-ref10"><label>10</label><mixed-citation publication-type="other" xlink:type="simple">Chen, Z.C. and Miao, Z. (2006) An Intelligent Approach to Non-Constant Feed Rate Determination for High-Performance 2D CNC Milling. International Journal of Manufacturing Technology &amp; Management, 9, 219-236. &lt;br&gt;https://doi.org/10.1504/IJMTM.2006.010056</mixed-citation></ref><ref id="hanspub.34303-ref11"><label>11</label><mixed-citation publication-type="other" xlink:type="simple">Wang, T.Y., Ding, Y.Y., Han, Z.G., et al. (2011) Reconfigurable CNC System with Functions of State Monitoring and Intelligent Maintenance on Machine Based on Networks. China Mechanical Engineering, 22, 1327-1332.</mixed-citation></ref><ref id="hanspub.34303-ref12"><label>12</label><mixed-citation publication-type="other" xlink:type="simple">Ling, X.G. (2011) The Research of Embedded and Reconfigurable CNC System Motion Controller Based ARM. Tianjin University, Tianjin.</mixed-citation></ref><ref id="hanspub.34303-ref13"><label>13</label><mixed-citation publication-type="other" xlink:type="simple">刘恒丽, 董靖川, 于治强. 基于Pareto遗传算法和TRIZ理论的数控装备加工参数智能优化[J]. 天津大学学报(自然科学与工程技术版), 2017, 50(2): 121-127.</mixed-citation></ref><ref id="hanspub.34303-ref14"><label>14</label><mixed-citation publication-type="other" xlink:type="simple">Liu, H.L., Wang, T.Y. and Wang, D. (2015) Constant Cutting Force Control for CNC Machining Using Dynamic Characteristic-Based Fuzzy Controller. Shock and Vibration, 2015, Article ID: 406294. &lt;br&gt;https://doi.org/10.1155/2015/406294</mixed-citation></ref></ref-list></back></article>