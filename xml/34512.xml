<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE article  PUBLIC "-//NLM//DTD Journal Publishing DTD v3.0 20080202//EN" "http://dtd.nlm.nih.gov/publishing/3.0/journalpublishing3.dtd"><article xmlns:mml="http://www.w3.org/1998/Math/MathML" xmlns:xlink="http://www.w3.org/1999/xlink" dtd-version="3.0" xml:lang="en" article-type="research article"><front><journal-meta><journal-id journal-id-type="publisher-id">MET</journal-id><journal-title-group><journal-title>Mechanical Engineering and Technology</journal-title></journal-title-group><issn pub-type="epub">2167-6631</issn><publisher><publisher-name>Scientific Research Publishing</publisher-name></publisher></journal-meta><article-meta><article-id pub-id-type="doi">10.12677/MET.2020.92004</article-id><article-id pub-id-type="publisher-id">MET-34512</article-id><article-categories><subj-group subj-group-type="heading"><subject>MET20200200000_24371149.pdf</subject></subj-group><subj-group subj-group-type="Discipline-v2"><subject>工程技术</subject></subj-group></article-categories><title-group><article-title>
 
 
  基于重心稳定约束的下肢外骨骼机器人设计与控制研究
  Research on Control and Design of the Lower Limb Exoskeleton Robot Based on the Center of Gravity Stability Constraints
 
</article-title></title-group><contrib-group><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>魏</surname><given-names>小华</given-names></name><xref ref-type="aff" rid="aff1"><sup>1</sup></xref><xref ref-type="corresp" rid="cor1"><sup>*</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>胡</surname><given-names>志福</given-names></name><xref ref-type="aff" rid="aff3"><sup>3</sup></xref><xref ref-type="aff" rid="aff2"><sup>2</sup></xref></contrib></contrib-group><aff id="aff1"><addr-line>衢州职业技术学院，浙江 衢州</addr-line></aff><aff id="aff3"><addr-line>衢州南方水泥有限公司，浙江 常</addr-line></aff><aff id="aff2"><addr-line>null</addr-line></aff><pub-date pub-type="epub"><day>11</day><month>03</month><year>2020</year></pub-date><volume>09</volume><issue>02</issue><fpage>35</fpage><lpage>52</lpage><permissions><copyright-statement>&#169; Copyright  2014 by authors and Scientific Research Publishing Inc. </copyright-statement><copyright-year>2014</copyright-year><license><license-p>This work is licensed under the Creative Commons Attribution International License (CC BY). http://creativecommons.org/licenses/by/4.0/</license-p></license></permissions><abstract><p>
 
 
  为了实现人的控制与机械力量之间的结合，使人在保留自身具备的各种优点的同时具备机械的力量、速度和耐力，更加完美地发挥人与机器的功用，设计了一种下肢外骨骼机器人。该机器人主要由外骨骼机械腿和模块化关节组成，模块化关节有利于缩短产品的研发周期和外骨骼关节的维修与替换。建立下肢外骨骼机器人运动学与动力学模型，并结合Solidworks三维软件动态仿真模块进行仿真，得出了各关节的力矩，为下肢外骨骼机器人关节驱动电机的选型以及控制系统的设计提供了理论基础，实验结果表明，所设计的外骨骼机器人能适时产生辅助转矩，具有行走辅助与平衡保持的功能。&lt;br/&gt;In order to realize the combination of human control and mechanical force, and to enable human to have mechanical strength, speed and endurance while retaining various advantages, and to better play the functions of human and machine, an exoskeleton robot of lower limbs was designed. The robot is mainly composed of exoskeleton mechanical legs and modular joints. The modular joints are helpful to shorten the product development cycle and convenient to repair and replace exoskeleton joints. The kinematics and dynamics model of the lower limb exoskeleton robot was established, the joint torques of the lower limb exoskeleton rehabilitation robot were simulated by using the Solidworks 3D software dynamic simulation module, and the torque of each joint was obtained. It provides a theoretical basis for the selection of the joint drive motor and the product research and development. The experiments show that this lower limb exoskeleton can assist suitable torque at the correct time to let user walk easily and keep their balance.
 
</p></abstract><kwd-group><kwd>下肢外骨骼康复机器人，模块化关节，运动学与动力学, Lower Limb Exoskeleton Robot</kwd><kwd> Modular Joint</kwd><kwd> Kinematics and Dynamics</kwd></kwd-group></article-meta></front><body><sec id="s1"><title>基于重心稳定约束的下肢外骨骼机器人设计与控制研究<sup> </sup></title><p>魏小华<sup>1</sup>，胡志福<sup>2</sup></p><p><sup>1</sup>衢州职业技术学院，浙江 衢州</p><p><sup>2</sup>衢州南方水泥有限公司，浙江 常山</p><p>收稿日期：2020年2月21日；录用日期：2020年3月6日；发布日期：2020年3月13日</p><disp-formula id="hanspub.34512-formula20"><graphic xlink:href="//html.hanspub.org/file/2-2340690x5_hanspub.png"  xlink:type="simple"/></disp-formula></sec><sec id="s2"><title>摘 要</title><p>为了实现人的控制与机械力量之间的结合，使人在保留自身具备的各种优点的同时具备机械的力量、速度和耐力，更加完美地发挥人与机器的功用，设计了一种下肢外骨骼机器人。该机器人主要由外骨骼机械腿和模块化关节组成，模块化关节有利于缩短产品的研发周期和外骨骼关节的维修与替换。建立下肢外骨骼机器人运动学与动力学模型，并结合Solidworks三维软件动态仿真模块进行仿真，得出了各关节的力矩，为下肢外骨骼机器人关节驱动电机的选型以及控制系统的设计提供了理论基础，实验结果表明，所设计的外骨骼机器人能适时产生辅助转矩，具有行走辅助与平衡保持的功能。</p><p>关键词 :下肢外骨骼康复机器人，模块化关节，运动学与动力学</p><disp-formula id="hanspub.34512-formula21"><graphic xlink:href="//html.hanspub.org/file/2-2340690x6_hanspub.png"  xlink:type="simple"/></disp-formula><p>Copyright &#169; 2020 by author(s) and Hans Publishers Inc.</p><p>This work is licensed under the Creative Commons Attribution International License (CC BY 4.0).</p><p>http://creativecommons.org/licenses/by/4.0/</p><p><img src="//html.hanspub.org/file/2-2340690x7_hanspub.png" /> <img src="//html.hanspub.org/file/2-2340690x8_hanspub.png" /></p></sec><sec id="s3"><title>1. 引言</title><p>由于近代科技与医学的进步，人们的寿命越来越长，老年人占总人口的比例也越来越高。中国逐渐步入老龄化社会，当人们逐渐老化时，人们许多身体机能将会逐渐的开始退化，而产生许多不良的影响，如记忆力衰退，体力下降和各种疾病等问题，尤其是让老年人的行动力下降。银发族随着行动力下降而减少身体活动往往会对身体产生负面影响，以人们最常活动的动作“行走”为例，当人们因为各种原因而减少行走时，脚部的肌肉会对应的萎缩。另外，减少身体活动会使身体和精神状况变差，进而陷入恶性循环让各种疾病发生的机率上升。这种状况下，自己本身跟周围的亲属生活质量将会下降，以至于社会跟政府会需要消耗更多的资源来治疗各种疾病跟提升老年人的生活质量。因此，如何以技术 [<xref ref-type="bibr" rid="hanspub.34512-ref1">1</xref>] [<xref ref-type="bibr" rid="hanspub.34512-ref2">2</xref>] [<xref ref-type="bibr" rid="hanspub.34512-ref3">3</xref>] 辅助行动力逐渐降低的老年人，增加其活动量并且保持舒适度，进而达到运动保健的目的，是一项非常重要的课题。如图1为一台基于柔性驱动器的外骨骼机器人产品BEAR H1。</p><p>图1. 基于柔性驱动器的外骨骼机器人BEAR H1</p><p>近年来，有越来越多人投入下肢外骨骼机器人 [<xref ref-type="bibr" rid="hanspub.34512-ref4">4</xref>] [<xref ref-type="bibr" rid="hanspub.34512-ref5">5</xref>] 辅助行走的研究。但是因为科技尚未到达对应的程度，而使得外骨骼机器人非常昂贵且无法轻量化。但近几年，由于电机，控制器，电池等等科技的进步，下肢外骨骼有机会可以达成轻量化及降低价格，并且在辅助行走和附件复健这两方面有长远的进步。下肢外骨骼机器人因为是装置在用户两腿上辅助行走，因此在遇到地面不平的路径或斜面时仍需要有比较平顺行走的表现，尤其是希望能防止使用者在行走时重心偏移，以保持稳定行走。</p><p>本项目的重点在研发模块化的下肢外骨骼机器人，其机构的设计理念是可模块化与可移植性，利用下肢外骨骼机器人提供使用者安全的行动辅助。另一方面，现今外骨骼机器人的功能大多着重于提升双腿的力量，尚未见有协助行走时平衡的估计，由于行走时有可能因地面不平或意外造成行走可能不平稳甚至跌倒的现象，对穿戴式机器人而言，这时的平衡辅助就显得很重要。因此研究估测使用者施力和平衡状态，透过控制法则让使用者轻松且安全的行走是一个重要的议题。</p></sec><sec id="s4"><title>2. 国内外研究现状</title><p>作为机器人领域的一个分支，外骨骼机器人近些年得到了国内外越来越多学者的关注，由于美国和日本的学者起步较早，在这方面取得了巨大的进展，已经研发出了多种类型的外骨骼机器人，并逐步开始商业化；国内也有一些机构开展了这方面的研究，但由于起步较晚，目前多数处于实验室研究阶段，距离实际应用还有很大差距。</p><sec id="s4_1"><title>2.1. 国外研究现状</title><p>外骨骼机器人的研究起始于二十世纪六十年代，美国军方率先进行外骨骼机器人(Exoskeleton Robot)的研制，通用电气研究中心和Cornell University开始合作研制第一款全身外骨骼机器人Hardiman，它重达680 kg，具有30个自由度，通过液压驱动。由于Hardiman体积过于庞大，系统不稳定，该项目并未取得成功，但它对以后外骨骼机器人的研究打下了基础。通过这个项目，研究人员发现外骨骼机器人研发过程中要解决的一系列问题，如能量供应、人机协调以及舒适性等问题。近年来，外骨骼机器人在传感技术、材料技术、驱动技术等带动下得到了快速发展。从2001年开始，美国国防部高级计划署(DARPA)投资两千万美元开展了一项旨在增强士兵负重能力的项目——“增强人体力量外骨骼(EHPA)”。在这个项目的资助下，美国相继出现了加州大学伯克利分校的BLEEX外骨骼Sarcos公司的系统，MIT的类被动骨骼服，能帮助残疾人以4 km/h的膝关节和髋关节处的电机驱动器，时速行走，并较轻松地上下楼梯等一系列成果。现在世界范围内有很多组织机构都在从事外骨骼机器人的研究工作，并且已经有一些成功的外骨骼机器人问世。</p><p>2004年加州大学伯克利分校人体工程与机器人技术实验室(HEL)，开发的“伯克利下肢外骨骼”(BLEEX)，可谓是目前已公开的、在军事应用方面技术最领先的外骨骼系统，如图2所示。整个机器人系统包括：机械本体(两条助力仿生腿)、传感系统、控制系统、驱动系统以及用于放置负载的背包等。BLEEX按照仿生学设计，同人腿一样每条腿具备7个自由度，除了膝关节只有1个自由度外(矢平面单一旋转)，髋关节和踝关节各3个。BLEEX重量达到45 kg，而穿戴者仅能感觉到2 kg左右的重量，这款机器人可以帮助穿戴者承受34 kg的负载，超过这个范围时，多余的负载由穿戴者自己承担，穿上它无负载时行进速度可以达到1.3 m/s，满负载时行走速度可以达到0.9 m/s。BLEEX能够保持自身稳定，但在行走过程中需要穿戴者提供一个前向引导力，利用加速度传感器和编码器测量每个关节的运动学信息(位移，速度，加速度等)；脚底压力传感器则可以判断步态和重心位置，这些传感器组成了一个信息网络，控制系统对这些信息进行综合，计算分配给每个关节的力量，进而带动助力腿运动，整个系统不需要操纵杆和开关，机器人与穿戴者可以做到高度融合。</p><p>图2. BLEEX外骨骼机器人</p><p>图3. HULC外骨骼机器人</p><p>尽管BLEEX机器人性能指标上都很优秀，但体积笨重而且负重能力无法满足军方需求，随后加州大学伯克利分校与The lockheed Martin公司合作对第一代BLEEX进行改进，推出第二代外骨骼机器人HULC (Human Universal Load Carrier) [<xref ref-type="bibr" rid="hanspub.34512-ref6">6</xref>]，如图3所示。同BLEEX相比，HULC的灵活性非常强，穿戴它的士兵可以轻松地奔跑、行走、下跪、深蹲、匍匐等复杂动作。此外HULC使穿戴者能够轻松携带重物，辅助士兵并增强其在战场上的负重能力和持久作战能力，并且以4.8 km/h的速度连续行走60分钟左右，而最大行进速度则可以达到16 km/h。2012年5月洛克希德公司宣布其研制的最新一代外骨骼续航能力达到8小时。</p><p>在EHPA项目的支持下，美国SARCOS公司也对外骨骼机器人进行了研究，它的最终目标和BLEEX一样，也是为了增加穿戴者的速度及力量，尽量降低穿戴者背负重物时需要的能量消耗。经过7年的研究于2008年通过展览推出了一款能够增强士兵全身力量的外骨骼机器人XOS [<xref ref-type="bibr" rid="hanspub.34512-ref7">7</xref>] [<xref ref-type="bibr" rid="hanspub.34512-ref8">8</xref>]，如图4(a)所示，在2011年，雷神SARCOS发布了其开发的军用外骨骼的最新升级版Sarcos XOS2，通过高压液压驱动，与第一代相比，质量更轻、速度更快，如图4(b)所示，更重要的是耗电量降低了50%。士兵穿上这款外骨骼，能力得到显着提升，可以轻松完成上千次俯卧撑，可搬运超过100千克重物的机械“外骨骼”。</p><p>图4. XOS系列外骨骼机器人</p><p>为了帮助护士照料无法行走或者体重较大的病人，日本神奈川工科大学的学者研制出全身型的动力辅助服PAS (Power Assist Suit) [<xref ref-type="bibr" rid="hanspub.34512-ref9">9</xref>] [<xref ref-type="bibr" rid="hanspub.34512-ref10">10</xref>]，如图5所示，穿上它护士可以轻松地用手举起病人。PAS包括腕部、肩部、后背以及腿部等单元，其中在腕部、肩部和腿部髋关节和膝关节处安装有气动旋转驱动器，这种驱动方式结构简单、重量轻，非常适合做充电，更重要的是易实现平滑运动。穿戴者身体运动时通过安装在穿戴者皮肤表面的肌肉硬度传感器——压力感应电阻FSR (Force Sensing Resistance)来检测穿戴者的运动意图，关节角度信息可以通过安装的电位计获知，驱动力矩则可以根据关节的角度信息求出。PAS外骨骼机器人最大的特点是在穿戴者躯干前部没有任何机械单元，从而方便护士和病人进行身体接触，保证了病人的安全性和舒适性。东京农工大学的研究人员研制了一款帮助老年农民农业生产的机器人Agri Robot [<xref ref-type="bibr" rid="hanspub.34512-ref11">11</xref>] [<xref ref-type="bibr" rid="hanspub.34512-ref12">12</xref>]，如图6所示，这款机器人自重26千克，其中肩关节、腕关节、髋关节、膝关节以及腰部均为主动关节，采用超声电机作为驱动单位，可以使穿戴者轻松举起20千克的重物。这款机器人通过口令即可实现不同的动作，从简单到复杂，由于电池和控制系统都安装在背部，机器人是独立的个体，便于移动。这款机器人主要的挑战是太显笨重，需要尽可能降低自身重量，其研究人员期望将其重量降到10千克以下，于2012年投入实用。</p><p>图5. PAS外骨骼机器人</p></sec><sec id="s4_2"><title>2.2. 国内研究现状</title><p>国内由于开展外骨骼机器研究起步较晚，仅有少数高校和科研机构从事外骨骼机器人的研究。中科院合肥智能机械所的余永等人 [<xref ref-type="bibr" rid="hanspub.34512-ref13">13</xref>] 在国家863项目的支持下从2004年起开展外骨骼机器人的研究工作，他们提出了基于人体腿部以及脚底压力传感器信息和关节角度传感器信息来判断人体运动趋势，样机如图7所示，该设计可以实现外骨骼机器人与人体下肢协调运动互不干涉，但是其提供的助力效果十分有限。浙江大学的杨灿军 [<xref ref-type="bibr" rid="hanspub.34512-ref14">14</xref>] 团队研发了采用气动作动器的下肢外骨骼机器人，提出了基于脚底压力传感器信号来判断人体运动意图的自适应模糊神经网络(ANFIS)理论，并研制出了样机如图8所示。在机械本体上与中科院合肥智能机械研究所的外骨骼机器人相似，只是在单腿髋关节、膝关节采用气缸驱动，通过将前脚掌和后脚跟处采集到的压力信号作为步态规划层的输入信号，经过模糊推理控制器生成各个关节驱动器的位移信号，从而实现机器人助力运动，其它各类型外骨骼机器人情况分析如表1所示。</p><p>图6. Agri Robot外骨骼机器人</p><p>图7. 中科院合肥所研制的外骨骼机器人</p><p>图8. 杨灿军团队研发的外骨骼机器人</p><table-wrap id="table1" ><label><xref ref-type="table" rid="table1">Table 1</xref></label><caption><title> Features of various exoskeleton robot</title></caption><table><tbody><thead><tr><th align="center" valign="middle" >外骨骼名称</th><th align="center" valign="middle" >主要使用者</th><th align="center" valign="middle" >主要传感器</th><th align="center" valign="middle" >特点</th></tr></thead><tr><td align="center" valign="middle" >BLEEX</td><td align="center" valign="middle" >劳动者</td><td align="center" valign="middle" >Motor Encoder</td><td align="center" valign="middle" >驾驶员身上没有放置senor高灵敏度,低稳定性。</td></tr><tr><td align="center" valign="middle" >XOS</td><td align="center" valign="middle" >士兵</td><td align="center" valign="middle" >Two-dimension force sensor</td><td align="center" valign="middle" >XOS动作灵敏度要远高于其它外骨骼,紧贴身体表面的 传感器能直接感应到穿着者的动作幅度和力度。</td></tr><tr><td align="center" valign="middle" >Rewalk [<xref ref-type="bibr" rid="hanspub.34512-ref15">15</xref>]</td><td align="center" valign="middle" >下半身瘫痪者</td><td align="center" valign="middle" >Tile Sensor</td><td align="center" valign="middle" >必须使用拐杖来平衡姿态。</td></tr><tr><td align="center" valign="middle" >HAL [<xref ref-type="bibr" rid="hanspub.34512-ref16">16</xref>]</td><td align="center" valign="middle" >行动不便者</td><td align="center" valign="middle" >EMG</td><td align="center" valign="middle" >可直接测量到使用者意图。</td></tr><tr><td align="center" valign="middle" >1-DOF exoskeleton [<xref ref-type="bibr" rid="hanspub.34512-ref17">17</xref>]</td><td align="center" valign="middle" >行动不便者</td><td align="center" valign="middle" >Torque Sensor</td><td align="center" valign="middle" >利用inertia compensator 让穿戴者感受不到骨骼机器人的惯性。</td></tr><tr><td align="center" valign="middle" >WPS</td><td align="center" valign="middle" >行动不便者</td><td align="center" valign="middle" >Torque Sensor</td><td align="center" valign="middle" >用被动组件弹簧来测量力矩。</td></tr><tr><td align="center" valign="middle" >穿戴式机器人 动能供应模块</td><td align="center" valign="middle" >行动不便者</td><td align="center" valign="middle" >None Sensor</td><td align="center" valign="middle" >纯粹使用被动式机构(凸轮，链条，汽缸)来辅助行走，无电力。</td></tr></tbody></table></table-wrap><p>表1. 多种外骨骼机器人特点比较</p><p>目前下肢外骨骼机器人的趋势为模块化、轻量化跟降低制造价格，并且让下肢外骨骼机器人在移动上更为平顺跟舒适。表一为整理在上述的相关研究中，对应不同使用者跟用途的下肢外骨骼机器人。本研究中将参考BLEEX的控制架构为主要控制器架构，因为BLEEX并没有装置传感器在用户上，而是使用电机Encoder来建立动态方程式来测量使用者的意图。这种控制架构可以减少使用较昂贵的传感器(如：EMG或力矩传感器)进而减低制作成本。另外本项目参考1-DOF Exoskeleton for Knee Flexion and Extension及RSEA [<xref ref-type="bibr" rid="hanspub.34512-ref17">17</xref>] 中所提出的消除由重力产生的惯性的方法，使得使用者可以不用负担因为机构所造成的重力影响让使用者可以行走的更为顺畅。另一方面，Toshio Fukuda [<xref ref-type="bibr" rid="hanspub.34512-ref18">18</xref>] 提出利用手杖来达成辅助走的研究，本项目参考其设计理念希望可以让由下肢外骨骼机器人达到更好的效果。最后搭配压力传感器来估测使用者的行走状态，并对于使用者平衡状态来进行修正。而下肢外骨骼机器人的机构部分将参考穿戴式机器人动能供应模块的轻量化，模块化的设计理念。</p></sec></sec><sec id="s5"><title>3. 机器人方案设计与控制</title><p>本研究的重点为估测出使用者的意图来进行适当的辅助的同时，消除由重力在机构上的影响而让使用者不需要额外负担过多来自机构的重量，并配合用户脚底所装置的压力传感器所测量到的数值来进行平衡修正，来达到辅助行走并保持平衡的目标。</p><p>本项目硬件初步设计如图16~18，控制系统架构如图9所示，此架构图主要分成三个部分，分别为使用者的外力估测，使用者平衡状态估测，辅助力矩的产生。首先需要得到使用者所施的外力，之后用使用者所施的外力矩和电机所施的状态来比较并推论出使用者的意图，接着透过辅助力产生控制策略将电机信息和用户的意图转换成需要辅助的力矩和补偿机构重量的力矩，并配合由压力传感器侦测到的用户重心位置产生的重心平衡的修正力矩，三者力量经过运算后，产生出辅助或平衡使用者的力矩。</p><p>图9. 控制系统架构图</p><p>假设 T e x t 为使用者所施的外力矩， T m 为电动机所施的力矩，J为转动惯量， α 为角加速度，D为阻尼， ϖ 为角速度，<inline-formula><inline-graphic xlink:href="//html.hanspub.org/file/2-2340690x23_hanspub.png" xlink:type="simple"/></inline-formula>为重力作用在机构上的力矩，f为电动机转动时的摩擦力矩。</p><sec id="s5_1"><title>3.1. 外力估测</title><p>使用动态模型来估测用户的外力，模型架构如图10，建构流程主要分成两个部分，分别是动态模型的建构与参数估算。</p><p>图10. 使用者外力估测架构图</p><p>为了得到使用者所施的外力矩，在此动态模型中， T m 可以藉由电动机的电流传感器所测量的电流大小并配合电动机本身的电流对应力矩的转换系数而求得， α 和 ϖ 可以经由电动机的轴编码器求出，通过参数再计算出D、 T g 和f即可经由式(1)来求得使用者所施的外力矩。</p><p>T e x t = J α + D ϖ + T g + f − T m (1)</p></sec><sec id="s5_2"><title>3.2. 使用者平衡状态估测</title><p>本项目估测使用者平衡状态的架构图如图11，主要分成计算用户的重心位置，和估算用户的平衡状态。为了测量使用者重心，我们在每个下肢外骨骼机器人的脚底板上放置4个压力传感器(图12)来测量使用者行走和站立时的压力，本研究所使用的压力传感器为的A201型压力传感器，其特色为价钱低廉但有一定的稳定性，此压力传感器可视为可变电阻，其电阻值会随着受到的压力而改变，因此在使用前需要对压力传感器进行校正，即测试负荷重量对应其电压的关系图，其电路如图13所示，利用读取Arduino的模拟输入孔讯号，取得放置不同负荷重量而量测到的压力传感器电压差，并获取压力对应量测电压的关系。</p><p>图11. 使用者平衡状态的架构图</p><p>图12. 足底分别放置4个A201压力传感器</p><p>图13. 压力传感器测量电路</p><p>为计算出用户重心位置(Center of Pressure)，我们将8个压力传感器所测量到对应的压力，经过式(2计算出使用者横向重心(COPX)和使用者纵向重心(COPY)，其中 ( x n , y n ) 为第n个压力传感器的位置， F n 为第n个压力传感器的负荷重量。</p><p>{ C O P X = ( ∑ n = 1 8 X n &#215; F n ) / F n C O P Y = ( ∑ n = 1 8 Y n &#215; F n ) / F n (2)</p><p>使用者的平衡状态估测主要是利用使用者的重心来估测，我们通过测量当使用者在正常行走时的重心位置分布和尝试失衡时重心来当作使用者平衡状态的判断依据。</p></sec><sec id="s5_3"><title>3.3. 辅助力矩计算</title><sec id="s5_3_1"><title>3.3.1. 支持力矩T<sub>s</sub></title><p>L B 为最小支持力矩，S为0~1之间的转换系数，代表者支持力矩的灵敏度。支持力矩 T s 完整反应使用者的外力 T e x t 。</p><p>{ T s = ( T e x t − L B ) &#215; S + L B ,     if       T e x t &gt; L B , T e x t &#215; ϖ &gt; 0   T s = 0                                                                                                                                                                                           otherwise (3)</p></sec><sec id="s5_3_2"><title>3.3.2. 补偿力矩T<sub>p</sub></title><p>在使用者穿戴下肢外骨骼机器人时，首先需要克服的状态是下肢外骨骼机器人机构的重量造成的影响，因此需要补偿力矩 T p 来将此重力造成的负向力影响抵消掉，来让使用者行走时不需负担重力作用在机构造成的力矩。图14为下肢外骨骼机器人机构姿态图。 sin θ h ， sin θ k ， sign ( ϖ h ) 由电动机编码器、电动机规格和电动机电流传感器取得计算。A，A'因为下肢外骨骼的机构过于复杂以至于直接计算各个数据的解会使得动态模型较不精确，因此我们在此使用线性代数的最小平方法，并取得正常人的步态行走以及对应的姿态。 f h 髋关节电动机摩擦力矩， f k 膝关节电动机摩擦力矩。</p><p>髋关节的补偿力矩：</p><p>T p h = A sin θ h + B sin θ k + f h sign ( ϖ h ) (4)</p><p>膝关节的补偿力矩：</p><p>T p k = A ′ sin θ h + f k sign ( ϖ k ) (5)</p></sec><sec id="s5_3_3"><title>3.3.3. 平衡修正力矩T<sub>c</sub></title><p>使用者穿戴下肢外骨骼机器人行走时，理想的状态为稳定的在平坦地面行走，但当使用者实际行走时可能会遇到有坡度的路面或是行走时失去平衡，因此需要能实时修正使用者平衡状态的修正力矩。提出以模糊控制方法设计修正力矩，图14为其架构图，图15为下肢外骨骼机器人机构姿态图。</p><p>图14. 修正力矩架构图</p><p>图15. 下肢外骨骼机器人机构姿态图</p><p>髋关节为支撑点所受到的重力作用在机构上的力矩为 T g h ，由膝关节为支撑点所受到的重力作用在机构上的力矩为 T g k 。</p><p>T c = G T g h − T g h (6)</p><p>此实验使用者身高为178 cm，体重为75 kg。经转换分析，髋关节力矩如式(7)，膝关节力矩如式(8)：</p><p>T e x t h + T m = 3.55 α + 35.99 ϖ + 20000 sin ( θ h ) + 520 sin ( θ k ) + 800 sign ( sin ( θ h ) ) (7)</p><p>T e x t k + T m = 4.02 α + 18.52 ϖ + 20000 sin ( θ k ) + 22 sign ( sin ( θ k ) ) (8)</p><p>髋关节的重力补偿力矩，其大小为如式(9)，膝关节的重力补偿力矩，其大小为式(10)：</p><p>髋关节的补偿力矩：</p><p>T p h = 20000 sin θ h + 520 sin θ k + 800 h sign ( ϖ h ) (9)</p><p>膝关节的补偿力矩：</p><p>T p k = 2020 sin θ h + 22 sign ( ϖ k ) (10)</p></sec></sec><sec id="s5_4"><title>3.4. 下肢外骨骼机器人设计</title><p>下肢外骨骼机器人具备稳定性及坚固性以达成稳定且持续的运行；另一方面需要拥有一定的可调整性来让此硬件可以调整外骨骼机器人硬件的大腿跟小腿的长度来让不同身高的使用者在使用时可以更舒适，并且可以在一些程序无法应付的状况时(如电动机encoder出现问题)可以保护使用者的安全。此外，下肢外骨骼机器人硬件设计着重在自由度的设计、硬件长度的可调整性和安全机构的设计，初步设计方案如图16~18。</p><p>图16. 机械结构设计图</p><p>图17. 可调性的设计(适用不同高度使用者)</p><p>图18. 卡榫设计</p><sec id="s5_4_1"><title>3.4.1. 建立步态模型</title><p>图19为一般人正常步行状态的关节角度变化图，横坐标表示步态百分比，纵坐标表示关节的弯曲角度。以右脚的膝关节来观察，0%~60%约为右脚的站立期，大约在30%部份有较小的波锋和在70%部份有一个较大的波锋，第一个较小的波锋表示脚与撞击时，膝关节为了避免受伤，而与地面配合所产生的弯曲，其波锋变化较缓以维持整个人体重心高低的稳定，而在60%~100%剩余部分，约在整体周期80%处，所产生一个较大且变化较快的波型，此变化是为了将脚往前摆动，也即是所谓的摆荡期，此刻也可以看到髋关节与膝关节的角度快速增加，直到下一次的脚跟撞击地面，右脚重新再一次进入站立期，髋关节开始伸展，髋关节角度值开始下降。</p><p>图20和图21分别代表上楼梯与下楼梯的髋关节与膝关节角度变化，楼梯级深为28 cm，级高19 cm的阶梯行走的数据，上楼梯的过程与一般走路的信息明显不同，上楼梯的过程两足需要产生较大的高度差，因此一般走路会有把膝关节伸直的现象无法在上楼梯观察到，因此上楼梯的数据中可以观察到左右脚的波锋与波谷有明显的交错。而下楼梯的数据中，与走路数据相比，髋关节的角度变化范围较小，髋关节的角度一般不小于0度，因为不需要和走路一样，有大幅度往前的推进，而膝关节角度与走路的差异比上楼梯小，其中大波锋的上升速度比一般走路平缓。</p><p>图22和图23分别为起立与坐下过程中髋关节与膝关节角度变化，从图22中可观察到受试者在站立的过程中需要将重心转移，因此在前往 50%的位置双足的髋关节角度增加，受试者在站立的过程中，必须</p><p>图19. 正常步行的关节角度变化图</p><p>图20. 上楼梯的关节角度变化图</p><p>先将重心转移到前方，此刻使用者可将拐杖放置身体前方，让身体重心落在拐杖和双足之间以维持平衡，之后膝关节角度增加，将身体的重心提高，完成站立动作。当使用者需要停止使用动力辅具，和脱下动力辅具时，必须从站立状态回复到坐姿，在50%之前同时增加髋关节和膝关节的角度，将人体重心降低以维持较好的平衡稳定度，当接触到椅子之后，膝关节角度趋缓增加，髋关节角度减少来完成坐姿，髋关节最后的动作则是表示将身体从弯曲的状态，将背部伸展至椅背上。</p></sec><sec id="s5_4_2"><title>3.4.2. 走路步态参数化</title><p>由图24受试者慢速走路(速度约0.4~0.5 m/s)和图25受试者正常走路(速度0.8~0.9 m/s)比较，在正常走路时，除了髋关节的弦波角度最大值HSA和膝关节的弦波角度最大值KSA些微提高，其中高斯分布的曲线代表当走路的过程中脚冲击到地面时所产生的反馈，而这样的现象在慢速走路中所得到的反馈较小，因此在走路速度较快时，可将膝关节的角度些微提高，避免过度的冲击导致用户和装置本身损坏。</p><p>图21. 下楼梯的关节角度变化图</p><p>图22. 起立的关节角度变化图</p><p>图23. 坐下的关节角度变化图</p><p>图24. 受试者慢速走路步态的参数化模型</p></sec></sec><sec id="s5_5"><title>3.5. 控制电路硬件设计</title><p>本论文的下肢外骨骼机器人的马达为利用计算机连接NI的USB CANbus controller，并用USB CANbus controller将控制信息传送到EPOS马达控制器。首先需要测试单一马达的运转状况，使用的马达为maxon motor，其髋关节减速比为43，膝关节减速比为3.5。当测试单一马达运转为可以控制后，将使用NI的USB CANbus来串连4个maxon epos控制器(图19(a))，并在maxon官方软件上验证连接成功(图19(b))，接着搭配压力传感器系统(包含Arduino mega 2560与其测量电路，组成下肢外骨骼机器人的控制电路)，主要由电流供应电路，4个pos控制器，Arduino mega 2560和压力传感器测量电路所组成，24伏特电池与计算用计算机为另外连接，下肢外骨骼硬件架构如图26所示。下肢外骨骼机器人控制电路如图27所示，穿戴下肢外骨骼机器人行走如图28所示。</p><p>图25. 受试者A走路步态的参数化模型</p></sec></sec><sec id="s6"><title>4. 结论</title><p>1) 使用者施力与平衡状态估测</p><p>图26. 硬件架构图</p><p>图27. 下肢外骨骼机器人控制电路</p><p>图28. 穿戴下肢外骨骼机器人行走</p><p>当使用者穿戴下肢外骨骼机器人行走时，整体的辅助力矩将由各种不同用途的力矩所组成，分别是在当使用者想要行走时让使用者可以轻松行走的支持力矩；重力作用在机构上而产生由使用者负担的额外机构重量抵消的补偿力矩；及让使用者保持平衡稳定的修正力矩。这些各种用途力矩的产生有不同的设计依据，行走时的支持力矩主要是以用户外力矩与系统运动状态为参考依据；机构重力补偿力矩主要是以机构姿态为参考依据；平衡补偿力矩主要以使用者的平衡状态为参考依据。</p><p>2) 辅助力矩设计与产生</p><p>推导三种辅助力矩的产生方式，亦即下肢外骨骼机器人的辅助力主要有三种，分别是在当使用者想要行走时让使用者可以轻松行走的支持力；重力作用在机构上而产生由使用者负担的额外机构重量抵消的补偿力；及让使用者保持平衡稳定的修正力矩。借由各个传感器收集信息并计算后产生辅助力矩，推导辅助力矩的计算过程。</p><p>3) 下肢外骨骼机器人及控制设计</p><p>设计下肢外骨骼机器人与相关控制电路，计算机接收电机主轴编码器和压力传感器的信息并且经过算法的运算后，输出控制命令到NI的USB CAN bus controller，USB CAN bus controller将控制信息传送到EPOS电机控制与驱动器进而分别控制左脚和右脚电机，并且回传编译程序所测量到的信息到计算机来作为下个命令的计算依据。压力传感器所测量到的信息为利用Arduino测量到的压力传感器的电压，再利用计算机计算出用户的重量中心COP。</p></sec><sec id="s7"><title>致谢</title><p>衷心地感谢本文所引用的这些优秀文章的作者，他们的文章提供很大的帮助；同时也感谢衢州职业技术学院提供了一个研究创作的卓越平台。感谢机电工程学院的支持，使本课题得以顺利进行。感谢好友，他们时刻的关心，以及在生活与精神上的支持与温暖，并在研究过程中给了我许多的鼓励，是促使我向前的动力，特此致上感谢之意。</p></sec><sec id="s8"><title>基金项目</title><p>诚挚地感谢浙江省教育厅一般项目(Y201839845)的资助。</p></sec><sec id="s9"><title>文章引用</title><p>魏小华,胡志福. 基于重心稳定约束的下肢外骨骼机器人设计与控制研究Research on Control and Design of the Lower Limb Exoskeleton Robot Based on the Center of Gravity Stability Constraints[J]. 机械工程与技术, 2020, 09(02): 35-52. https://doi.org/10.12677/MET.2020.92004</p></sec><sec id="s10"><title>参考文献</title></sec></body><back><ref-list><title>References</title><ref id="hanspub.34512-ref1"><label>1</label><mixed-citation publication-type="other" xlink:type="simple">林海丹, 张韬, 陈青, 等. 康复机器人辅助步行训练对不完全性脊髓损伤患者步行能力的影响[J]. 自动化学报, 2016, 42(12): 1832-1838.</mixed-citation></ref><ref id="hanspub.34512-ref2"><label>2</label><mixed-citation publication-type="other" xlink:type="simple">尹正录, 孟兆祥, 薛永骥, 等. 康复机器人辅助步行训练对成年脑性瘫痪患者步行能力的影响[J]. 中国康复医学杂志, 2017, 32(1): 97-99.</mixed-citation></ref><ref id="hanspub.34512-ref3"><label>3</label><mixed-citation publication-type="other" xlink:type="simple">张向刚, 张明, 秦开宇, 等. 外骨骼辅助行走中平衡控制技术的研究[J]. 载人航天, 2016, 22(6): 706-713.</mixed-citation></ref><ref id="hanspub.34512-ref4"><label>4</label><mixed-citation publication-type="other" xlink:type="simple">糜思尧. 外骨骼式老年人辅助行走装置设计研究[J]. 工业设计, 2016(6): 67-72.</mixed-citation></ref><ref id="hanspub.34512-ref5"><label>5</label><mixed-citation publication-type="other" xlink:type="simple">Huysamen, K., Bosch, T., Looze, M.D., et al. (2018) Evaluation of a Passive Exoskeleton for Static Upper Limb Activities. Applied Ergonomics, 70, 148-155.&lt;br&gt; https://doi.org/10.1016/j.apergo.2018.02.009</mixed-citation></ref><ref id="hanspub.34512-ref6"><label>6</label><mixed-citation publication-type="other" xlink:type="simple">Yuan, P., Wang, T., Ma, F., et al. (2014) Key Technologies and Prospects of Individual Combat Exoskeleton. In: Knowledge Engineering and Management, Springer, Berlin Heidelberg, 305-316. &lt;br&gt;https://doi.org/10.1007/978-3-642-37832-4_28</mixed-citation></ref><ref id="hanspub.34512-ref7"><label>7</label><mixed-citation publication-type="other" xlink:type="simple">Wang, X., Li, X.U., Yuan, L., et al. (2008) Effects of Xylo-Oligosaccharide(XOS) on Performance and Serum Indexes in Dairy Calf. Journal of Northeast Agricultural University, 39, 61-65.</mixed-citation></ref><ref id="hanspub.34512-ref8"><label>8</label><mixed-citation publication-type="other" xlink:type="simple">Feldman, V. and Vondrak, J. (2013) Optimal Bounds on Approximation of Submodular and XOS Functions by Juntas. IEEE, Symposium on Foundations of Computer Science, Berkeley, 26-29 October 2013, 227-236. &lt;br&gt;https://doi.org/10.1109/FOCS.2013.32</mixed-citation></ref><ref id="hanspub.34512-ref9"><label>9</label><mixed-citation publication-type="other" xlink:type="simple">Yamamoto, K., Ishii, M., Noborisaka, H., et al. (2004) Stand Alone Wearable Power Assisting Suit-Sensing and Control Systems. IEEE International Workshop on Robot and Human Interactive Communication, Kurashiki, 20-22 September 2004, 661-666.</mixed-citation></ref><ref id="hanspub.34512-ref10"><label>10</label><mixed-citation publication-type="other" xlink:type="simple">Yandell, M.B., Quinlivan, B.T., Popov, D., et al. (2017) Physical Interface Dynamics Alter How Robotic Exosuits Augment Human Movement: Implications for Optimizing Wearable Assistive Devices. Journal of Neuroengineering&amp; Rehabilitation, 14, 40-50.&lt;br&gt; https://doi.org/10.1186/s12984-017-0247-9</mixed-citation></ref><ref id="hanspub.34512-ref11"><label>11</label><mixed-citation publication-type="other" xlink:type="simple">Carabin, G., Vidoni, R., Mazzetto, F., et al. (2017) Dynamic Model and Instability Evaluation of an Articulated Mobile Agri-Robot. Advances in Italian Mechanism Science. Springer International Publishing, Berlin. &lt;br&gt;https://doi.org/10.1007/978-3-319-48375-7_36</mixed-citation></ref><ref id="hanspub.34512-ref12"><label>12</label><mixed-citation publication-type="other" xlink:type="simple">Sasaki, Y. (2011) Detection of the Intention from Gestures of Workers for a KanseiAgri-Robot. Agricultural Information Research, 20, 13-18.&lt;br&gt; https://doi.org/10.3173/air.20.13</mixed-citation></ref><ref id="hanspub.34512-ref13"><label>13</label><mixed-citation publication-type="other" xlink:type="simple">孙建, 向馗, 高理富, 等. 基于外骨骼机器人技术的人体手臂震颤抑制的理论和方法[J]. 智能系统学报, 2012, 7(4): 283-293.</mixed-citation></ref><ref id="hanspub.34512-ref14"><label>14</label><mixed-citation publication-type="other" xlink:type="simple">杨灿军, 周洪, 张欣, 等. 气动式多体位外骨骼下肢康复训练机器人CN201012158[P]. 2008.</mixed-citation></ref><ref id="hanspub.34512-ref15"><label>15</label><mixed-citation publication-type="other" xlink:type="simple">Talaty, M., Esquenazi, A. and Briceno, J.E. (2013) Differentiating Ability in Users of the ReWalk(TM) Powered Exoskeleton: An Analysis of Walking Kinematics. International Conference on Rehabilitation Robotics, 2013, Article ID: 6650469.&lt;br&gt; https://doi.org/10.1109/ICORR.2013.6650469</mixed-citation></ref><ref id="hanspub.34512-ref16"><label>16</label><mixed-citation publication-type="other" xlink:type="simple">Rigano, G., Muratore, L., Laurenzi, A., et al. (2018) Towards a Robot Hardware Abstraction Layer (R-Hal) Leveraging the XBot Software Framework. IEEE International Conference on Robotic Computing, Laguna Hills, 31 January-2 February 2018, 175-176.&lt;br&gt; https://doi.org/10.1109/IRC.2018.00036</mixed-citation></ref><ref id="hanspub.34512-ref17"><label>17</label><mixed-citation publication-type="other" xlink:type="simple">Chen, S., Chen, Z., Yao, B., et al. (2017) Adaptive Robust Cascade Force Control of 1-DOF Hydraulic Exoskeleton for Human Performance Augmentation. IFAC-PapersOnLine, 22, 589-600. &lt;br&gt;https://doi.org/10.1109/TMECH.2016.2614987</mixed-citation></ref><ref id="hanspub.34512-ref18"><label>18</label><mixed-citation publication-type="other" xlink:type="simple">Fukuda, T., Yokoyama, Y., Arai, F., et al. (2011) Vision Based Navigation System of Autonomous Mobile Robot (Position/Orientation Control by Landmark Recognition with Plus and Minus Primitives). Higher Education in Chemical Engineering, 62, 1720-1725.</mixed-citation></ref></ref-list></back></article>