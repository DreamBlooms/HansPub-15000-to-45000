<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE article  PUBLIC "-//NLM//DTD Journal Publishing DTD v3.0 20080202//EN" "http://dtd.nlm.nih.gov/publishing/3.0/journalpublishing3.dtd"><article xmlns:mml="http://www.w3.org/1998/Math/MathML" xmlns:xlink="http://www.w3.org/1999/xlink" dtd-version="3.0" xml:lang="en" article-type="research article"><front><journal-meta><journal-id journal-id-type="publisher-id">SEA</journal-id><journal-title-group><journal-title>Software Engineering and Applications</journal-title></journal-title-group><issn pub-type="epub">2325-2286</issn><publisher><publisher-name>Scientific Research Publishing</publisher-name></publisher></journal-meta><article-meta><article-id pub-id-type="doi">10.12677/SEA.2020.93023</article-id><article-id pub-id-type="publisher-id">SEA-36027</article-id><article-categories><subj-group subj-group-type="heading"><subject>SEA20200300000_34370850.pdf</subject></subj-group><subj-group subj-group-type="Discipline-v2"><subject>工程技术</subject></subj-group></article-categories><title-group><article-title>
 
 
  基于百度地图的光缆断点定位系统的设计与实现
  Design and Implementation of Optical Cable Breakpoint Location System Based on Baidu Map
 
</article-title></title-group><contrib-group><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>石</surname><given-names>佳豪</given-names></name><xref ref-type="aff" rid="aff1"><sup>1</sup></xref><xref ref-type="corresp" rid="cor1"><sup>*</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>王</surname><given-names>忠东</given-names></name><xref ref-type="aff" rid="aff1"><sup>1</sup></xref><xref ref-type="aff" rid="aff2"><sup>2</sup></xref></contrib></contrib-group><aff id="aff1"><addr-line>广西科技师范学院数学与计算机科学学院，广西 来宾</addr-line></aff><aff id="aff2"><addr-line>null</addr-line></aff><pub-date pub-type="epub"><day>22</day><month>05</month><year>2020</year></pub-date><volume>09</volume><issue>03</issue><fpage>194</fpage><lpage>200</lpage><permissions><copyright-statement>&#169; Copyright  2014 by authors and Scientific Research Publishing Inc. </copyright-statement><copyright-year>2014</copyright-year><license><license-p>This work is licensed under the Creative Commons Attribution International License (CC BY). http://creativecommons.org/licenses/by/4.0/</license-p></license></permissions><abstract><p>
 
 
  本文提供了光缆断点定位系统的设计与实现方案，重点描述了地图显示、线路绘制与修改以及断点检测功能的实现。系统使用百度地图来显示光缆线路的走向，通过节点端检测到的光缆断点距离信息，结合断点定位算法，自动判断出断点的位置并在地图上显示。本系统的线路绘制功能能够让维护人员直观地得到光缆线路的具体走向及线路上站点位置，缩短了断点寻找时间。
   This paper provides the design and implementation of the optical cable breakpoint location system, focusing on the realization of the functions of map display, route drawing and modification, and breakpoint detection. Using Baidu map to display the direction of the optical cable line, through the distance information of the optical cable breakpoint detected by the node, combined with the breakpoint location algorithm, the system can automatically determine the location of the breakpoint and display it on the map. The route drawing function of this system can make the maintenance personnel get the specific direction of the optical cable line and the location of the site intuitively, and shorten the time of finding the breakpoint.
 
</p></abstract><kwd-group><kwd>光缆，断点定位，百度地图, Optical Cable</kwd><kwd> Breakpoint Location</kwd><kwd> Baidu Map</kwd></kwd-group></article-meta></front><body><sec id="s1"><title>基于百度地图的光缆断点定位系统的 设计与实现<sup> </sup></title><p>石佳豪，王忠东</p><p>广西科技师范学院数学与计算机科学学院，广西 来宾</p><p>收稿日期：2020年5月21日；录用日期：2020年6月3日；发布日期：2020年6月10日</p><disp-formula id="hanspub.36027-formula67"><graphic xlink:href="//html.hanspub.org/file/5-2690434x5_hanspub.png"  xlink:type="simple"/></disp-formula></sec><sec id="s2"><title>摘 要</title><p>本文提供了光缆断点定位系统的设计与实现方案，重点描述了地图显示、线路绘制与修改以及断点检测功能的实现。系统使用百度地图来显示光缆线路的走向，通过节点端检测到的光缆断点距离信息，结合断点定位算法，自动判断出断点的位置并在地图上显示。本系统的线路绘制功能能够让维护人员直观地得到光缆线路的具体走向及线路上站点位置，缩短了断点寻找时间。</p><p>关键词 :光缆，断点定位，百度地图</p><disp-formula id="hanspub.36027-formula68"><graphic xlink:href="//html.hanspub.org/file/5-2690434x6_hanspub.png"  xlink:type="simple"/></disp-formula><p>Copyright &#169; 2020 by author(s) and Hans Publishers Inc.</p><p>This work is licensed under the Creative Commons Attribution International License (CC BY 4.0).</p><p>http://creativecommons.org/licenses/by/4.0/</p><p><img src="//html.hanspub.org/file/5-2690434x7_hanspub.png" /> <img src="//html.hanspub.org/file/5-2690434x8_hanspub.png" /></p></sec><sec id="s3"><title>1. 引言</title><p>随着网络逐渐成为生活的必需品，提供网络服务的光缆线路数量也在不断的上升，这也为光缆线路的维护工作带来了巨大的困难。一旦线路中出现断点，传统纯人工的维护手段是让维护人员到达客户端并使用光时域反射仪(OTDR)测量客户端到断点的距离 [<xref ref-type="bibr" rid="hanspub.36027-ref1">1</xref>]，结合线路走向判断断点的大致位置，这个过程将耗费较多的时间及人力，不利于断点的快速修复。</p><p>为改变这一现状，不少学者对其进行了研究 [<xref ref-type="bibr" rid="hanspub.36027-ref2">2</xref>] - [<xref ref-type="bibr" rid="hanspub.36027-ref15">15</xref>]，其中设计光缆断点定位系统的不在少数：文献 [<xref ref-type="bibr" rid="hanspub.36027-ref7">7</xref>] 与文献 [<xref ref-type="bibr" rid="hanspub.36027-ref8">8</xref>] 实现了基于WebGIS的通信线路维护系统，为可视化的光缆维护提供了技术支持；文献 [<xref ref-type="bibr" rid="hanspub.36027-ref9">9</xref>] 与文献 [<xref ref-type="bibr" rid="hanspub.36027-ref10">10</xref>] 实现了光缆故障定位技术在电力系统中的应用。</p><p>文献 [<xref ref-type="bibr" rid="hanspub.36027-ref10">10</xref>] 中所设计的系统为目前现有的最新的光缆断点定位系统，其采用百度地图作为断点显示的基本地图，实现了在地图上标明检测到的断点位置，但存在以下问题：维护人员到达现场后，需要从断点光缆的附近站点发出红色光线，用于从现场的众多光缆中寻找出目标光缆，但地图上并未绘制出各条光缆的具体信息，因此不能快速判断出附近站点的位置，进而延缓了修复时间。</p><p>本文设计光缆断点定位系统仍然采用百度地图来显示光缆线路及光缆断点的实时信息，同时为解决上述问题，本系统在百度地图上标明了各条线路的实际走向及线路上站点位置，使得维护人员能够直观地得到附近站点的位置，这有效地缩短了目标光缆寻找时间。</p></sec><sec id="s4"><title>2. 系统设计</title><p>系统由客户端、服务端、数据库、节点端构成，如图1所示。维护人员在客户端浏览器上输入服务器地址就能够进入到系统主界面，服务端通过查询到数据库中光缆线路站点的经纬度坐标信息后，将站点以图形化的方式渲染到主界面地图区，并将同一线路中的站点按顺序连接形成线路走向。节点端为放置在线路站点上且具有OTDR功能的嵌入式设备，本系统中采用安卓系统来模拟OTDR检测到的断点数据。当客户端发起断点检测请求后，服务端通过数据库控制对应节点进行断点数据采集，通过分析断点数据及节点位置信息计算出断点的经纬度坐标，将其输出到主界面地图区。</p><p>系统具有以下三个功能模块：地图显示、线路绘制与修改、断点定位，如图2所示。</p><p>图1. 系统结构</p><p>图2. 系统功能模块</p><p>各个模块的功能如下：</p><p>1) 地图显示：实现加载基本地图、添加缩放控件、设置初始中心点等功能。</p><p>2) 线路绘制与修改：实现将光缆线路的具体走向及线路上站点位置绘制到百度地图上；实现在主界面的操作区，能够修改各个线路的站点坐标与站点间光缆长度信息，并在地图上实时更新渲染数据。</p><p>3) 断点定位：维护人员在系统主界面可远程向线路上的节点发送检测请求，节点使用OTDR功能检测到自身相对于断点的距离后，将距离数据返回给服务端，服务端结合断点所在光缆两端站点的经纬度以及传回的距离数据，计算出断点的坐标信息并以图形化的方式渲染到百度地图上。</p></sec><sec id="s5"><title>3. 系统实现</title><sec id="s5_1"><title>3.1. 地图显示</title><p>在主界面进行地图显示的实现过程如下：</p><p>1) 在服务端视图文件中为地图显示区域预先设置DIV容器，调整容器大小。添加的外部百度地图API (http://api.map.baidu.com/api?v=1.4)脚本引用，将基本地图加载进来。</p><p>2) 通过设置地图的centerAndZoom属性来确定显示的中心点以及地图坐标级别。</p><p>3) 通过设置地图的NavigationControl属性来添加地图缩放控件。</p></sec><sec id="s5_2"><title>3.2. 线路绘制与修改</title><p>线路绘制功能为本光缆断点定位系统的创新设计，其实现过程如下：</p><p>1) 在地图上绘制站点：通过JDBC与数据库进行连接，循环读取各条线路中各个站点的经纬度坐标，将各个坐标值依次赋给二维数组point_data[j][i]，并将每个坐标实例化为对应的Point对象，如var p1 = new BMap.Point(&lt;%=point_data[j][i]%&gt;, &lt;%=point_data[j][i]%&gt;)；然后使用Marker函数将每个Point对象标记为以绿色实心圆点(point.png)，如varmarker1 = new BMap.Marker(p1, new BMap.Icon(point.png)；最后使用addOverlay函数将Marker对象输出到百度地图上，如map.addOverlay(marker1)。</p><p>2) 在地图上绘制线路：使用Polyline函数将已有的Point对象以直线的方式进行连接，产生Polyline线路对象，如var polyline1 = new BMap.Polyline([p1,p2,p3,……])；然后使用addOverlay函数将Polyline对象输出到百度地图上，如map.addOverlay(polyline1)。</p><p>3) 在地图上修改线路：主界面的站点位置与光缆长度按钮分别链接到对应的设置分页面，新数据的设置完成将促使服务端重新向数据库发起读取数据命令，更新地图区的线路。</p></sec><sec id="s5_3"><title>3.3. 断点地位</title><p>客户端首先发起检测请求，服务端根据请求信息中的id将数据库中相应节点的检测状态由0变为1。节点端感应到检测状态后，开启测距功能并将检测到的距离数据写入数据库，同时重置检测状态。服务端结合检测到的距离数据及断点所在光缆两端站点的经纬度坐标，计算出断点的经纬度坐标，其算法如下：</p><p>判断断点所在的光缆区间：</p><p>∑ 1 n d i ≤ D ≤ ∑ 1 n + 1 d i</p><p>其中， d i 为线路中第i段光缆长度，D为节点返回的距离数据。则根据比例关系可得到：</p><p>D − ∑ 1 n d i d n + 1 = W D − W S W F − W S</p><p>其中， W S 为断点所在光缆起始站点纬度， W F 为断点所在光缆终点站点纬度， W D 为断点纬度。因此，可以得到断点纬度 W D ：</p><p>W D = W S + D − ∑ 1 n d i d n + 1 ( W F − W S )</p><p>断点经度同理。最后利用Marker属性将断点坐标以红色水滴标记渲染到地图上。</p></sec></sec><sec id="s6"><title>4. 运行效果测试</title><p>在浏览器地址栏上输入http://localhost:8080/进入系统主界面，如图3。</p><p>图3. 系统主界面</p><p>图中左侧地图区域渲染了两条光缆线路，每条线路站点的附近标记了该站点名称，其中具有“*OTDR*”标识的站点为节点放置的位置。点击右下角OTDR1按钮发起对id为1节点的检测请求，节点开启OTDR功能并将检测到的数据返回。节点端采用APP模拟OTDR的检测数据，如图4。</p><p>图4. APP界面</p><p>服务端接收到数据后，在主界面更新地图显示，标记断点并在右下角显示测试结果，如图5。</p><p>图5. 断点定位效果</p><p>点击主界面右上方的“线路1”按钮进入修改站点位置设置分页面，如图6。</p><p>图6. 修改站点位置</p><p>将线路1中站点2的经纬度数据进行修改并提交，浏览器跳转回主界面，同时地图上的对应线路也得到了更新，如图7。</p><p>图7. 更新站点效果</p><p>修改光缆长度的测试与修改站点位置的测试类似，不再赘述。</p><p>通过本系统的运行效果，与文献 [<xref ref-type="bibr" rid="hanspub.36027-ref10">10</xref>] 中光缆断点定位效果进行比较，如图8，可以发现：在地图上能够看清线路走向及线路上站点位置将给维护人员带来更直观的体验；同时针对需要进入附近站点配合检测才能判断目标光缆的这一情形，维护人员在地图上就能够看到附近站点，提高了效率。</p><p>图8. 文献 [<xref ref-type="bibr" rid="hanspub.36027-ref10">10</xref>] 中光缆断点定位效果</p></sec><sec id="s7"><title>5. 结论</title><p>本文设计与实现了基于百度地图的光缆断点定位系统，系统的创新功能是在地图上绘制出了光缆线路的具体走向及线路上站点位置，这能够让维护人员更直观地掌握线路信息；同时针对需要进入附近站点配合检测才能判断目标光缆的这一情形，维护人员可通过本系统显示的站点信息快速找到附近站点，为维护工作带来了便利。</p></sec><sec id="s8"><title>基金项目</title><p>广西高校中青年教师基础能力提升项目(No. 2019KY0859)。</p></sec><sec id="s9"><title>文章引用</title><p>石佳豪,王忠东. 基于百度地图的光缆断点定位系统的设计与实现Design and Implementation of Optical Cable Breakpoint Location System Based on Baidu Map[J]. 软件工程与应用, 2020, 09(03): 194-200. https://doi.org/10.12677/SEA.2020.93023</p></sec><sec id="s10"><title>参考文献</title></sec></body><back><ref-list><title>References</title><ref id="hanspub.36027-ref1"><label>1</label><mixed-citation publication-type="other" xlink:type="simple">陈磊. 通信光缆线路故障点的准确定位探讨[J]. 数字通信世界, 2019(8): 73.</mixed-citation></ref><ref id="hanspub.36027-ref2"><label>2</label><mixed-citation publication-type="other" xlink:type="simple">吕英蓬. 电力光缆故障点快速定位方法的研究[J]. 通讯世界, 2017(15): 238.</mixed-citation></ref><ref id="hanspub.36027-ref3"><label>3</label><mixed-citation publication-type="other" xlink:type="simple">苏林柏, 夏贵进, 王宁燕, 等. 光缆线路故障精确定位分析[J]. 电子测试, 2019(23): 55-57.</mixed-citation></ref><ref id="hanspub.36027-ref4"><label>4</label><mixed-citation publication-type="other" xlink:type="simple">李兢, 黄坚. 光缆线路自动监测系统的研究[J]. 通信技术, 2017, 4(50): 832-836.</mixed-citation></ref><ref id="hanspub.36027-ref5"><label>5</label><mixed-citation publication-type="other" xlink:type="simple">申圣, 李晨琛. 利用光缆标定数据快速进行故障定位[J]. 中国管理信息化, 2017, 16(20): 146-147.</mixed-citation></ref><ref id="hanspub.36027-ref6"><label>6</label><mixed-citation publication-type="other" xlink:type="simple">叶传锟. 基于全光网络故障高精度诊断技术研究[D]: [硕士学位论文]. 南昌: 南昌大学, 2018.</mixed-citation></ref><ref id="hanspub.36027-ref7"><label>7</label><mixed-citation publication-type="other" xlink:type="simple">孟晓鑫. 基于WebGIS的通信线路维护系统的设计与实现[D]: [硕士学位论文]. 长沙: 国防科技大学, 2007.</mixed-citation></ref><ref id="hanspub.36027-ref8"><label>8</label><mixed-citation publication-type="other" xlink:type="simple">关喆. 基于GIS的通信光缆故障定位技术与保障系统[D]: [硕士学位论文]. 哈尔滨: 黑龙江大学, 2016.</mixed-citation></ref><ref id="hanspub.36027-ref9"><label>9</label><mixed-citation publication-type="other" xlink:type="simple">莫纯铎. 基于GIS的电力系统光缆故障定位系统对输电管理所的延伸应用[J]. 技术与市场, 2018, 11(25): 131-132.</mixed-citation></ref><ref id="hanspub.36027-ref10"><label>10</label><mixed-citation publication-type="other" xlink:type="simple">胡潇斐, 王永超, 佘彦杰, 等. 基于移动互联技术的光缆快速寻障系统设计与应用[J]. 电力信息与通信技术, 2019, 17(5): 52-57.</mixed-citation></ref><ref id="hanspub.36027-ref11"><label>11</label><mixed-citation publication-type="other" xlink:type="simple">吴俊杰. 光纤网络断点数据提取方法研究[J]. 激光杂志, 2020, 2(41): 83-86.</mixed-citation></ref><ref id="hanspub.36027-ref12"><label>12</label><mixed-citation publication-type="other" xlink:type="simple">黄林伟. 通信网络传输数据断点区域智能检测方法研究[J]. 信息与电脑, 2019(14): 180-181.</mixed-citation></ref><ref id="hanspub.36027-ref13"><label>13</label><mixed-citation publication-type="other" xlink:type="simple">赵奎, 肖尊定, 胡建超. 基于Sagnac干涉仪和Φ-OTDR的光缆振动预警定位系统[EB/OL]. 光通信技术.  
&lt;br&gt;http://kns.cnki.net/kcms/detail/45.1160.tn.20200320.1804.004.html, 2020-03-23.</mixed-citation></ref><ref id="hanspub.36027-ref14"><label>14</label><mixed-citation publication-type="other" xlink:type="simple">丁松云, 王卫国. 接头盒智能化在通信光缆故障定位中的应用[J]. 中国新通信, 2020(3): 10.</mixed-citation></ref><ref id="hanspub.36027-ref15"><label>15</label><mixed-citation publication-type="other" xlink:type="simple">郭建军. 基于GIS技术的通信光缆故障定位与保障系统分析[J]. 数字通信世界, 2019(1): 44.</mixed-citation></ref></ref-list></back></article>