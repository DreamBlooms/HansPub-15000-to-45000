<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE article  PUBLIC "-//NLM//DTD Journal Publishing DTD v3.0 20080202//EN" "http://dtd.nlm.nih.gov/publishing/3.0/journalpublishing3.dtd"><article xmlns:mml="http://www.w3.org/1998/Math/MathML" xmlns:xlink="http://www.w3.org/1999/xlink" dtd-version="3.0" xml:lang="en" article-type="research article"><front><journal-meta><journal-id journal-id-type="publisher-id">SEA</journal-id><journal-title-group><journal-title>Software Engineering and Applications</journal-title></journal-title-group><issn pub-type="epub">2325-2286</issn><publisher><publisher-name>Scientific Research Publishing</publisher-name></publisher></journal-meta><article-meta><article-id pub-id-type="doi">10.12677/SEA.2017.65011</article-id><article-id pub-id-type="publisher-id">SEA-22212</article-id><article-categories><subj-group subj-group-type="heading"><subject>SEA20170500000_35030732.pdf</subject></subj-group><subj-group subj-group-type="Discipline-v2"><subject>工程技术</subject></subj-group></article-categories><title-group><article-title>
 
 
  基于多层共享备用路由器的多层网络恢复
  The Restoration of Multilayer Optical Network Based on Multilayer Shared Backup Router
 
</article-title></title-group><contrib-group><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>唐</surname><given-names>元</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>黄</surname><given-names>汉华</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>蒋</surname><given-names>烨</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>王</surname><given-names>小梅</given-names></name><xref ref-type="aff" rid="aff3"><sup>3</sup></xref><xref ref-type="corresp" rid="cor1"><sup>*</sup></xref></contrib></contrib-group><aff id="aff3"><addr-line>北京邮电大学网络与交换技术国家重点实验室，北京</addr-line></aff><aff id="aff2"><addr-line>广西电网公司电力调度控制中心，广西 南宁</addr-line></aff><aff id="aff1"><addr-line>null</addr-line></aff><author-notes><corresp id="cor1">* E-mail:<email>176942783@qq.com(王小)</email>;</corresp></author-notes><pub-date pub-type="epub"><day>28</day><month>09</month><year>2017</year></pub-date><volume>06</volume><issue>05</issue><fpage>103</fpage><lpage>110</lpage><permissions><copyright-statement>&#169; Copyright  2014 by authors and Scientific Research Publishing Inc. </copyright-statement><copyright-year>2014</copyright-year><license><license-p>This work is licensed under the Creative Commons Attribution International License (CC BY). http://creativecommons.org/licenses/by/4.0/</license-p></license></permissions><abstract><p>
 
 
   
   目前的网络结构是由光传输网络和IP网络共同组成的多层网络，而在多层网络中网络资源的保护和恢复机制是运营商关心的问题。传统的多层网络恢复机制有不同程度上的资源浪费问题，所以本文中基于多层网络架构提出了一种利用多层共享备用路由器的方法来实现网络资源的保护和恢复，这些备用路由器共同组成一个备用池可作为网络拓扑中所有需要保护的路由的替补，在网络出现故障时，作为备用的路由器可提供服务并恢复网络故障，在网络资源设置方面与传统的多层网络保护机制相对比，最终结果表明本文提出的保护措施在成本投入和需求的设备资源上要少于传统方法。 The current network is composed of optical transport network and IP network, and in the multi-layer network, network resources protection and recovery mechanism is the concern of operators. In this paper, based on the multilayer optical network architecture, a method of multilayer shared backup router is proposed to realize the protection and restoration of network resources. In the aspect of cost, compared with the traditional multilayer network protection mechanism, the final result shows that the proposed scheme has a better performance than the traditional scheme.
    
  
 
</p></abstract><kwd-group><kwd>多层光网络，网络保护，网络恢复，资本投入，多层共享备用路由器，可用性, Multilayer Optical Network</kwd><kwd> Network Restoration</kwd><kwd> Network Protection</kwd><kwd> CAPEX</kwd><kwd> Multilayer Shared Backup Router</kwd><kwd> Availability</kwd></kwd-group></article-meta></front><body><sec id="s1"><title>基于多层共享备用路由器的多层网络恢复<sup> </sup></title><p>唐元<sup>1</sup>，黄汉华<sup>1</sup>，蒋烨<sup>1</sup>，王小梅<sup>2</sup></p><p><sup>1</sup>广西电网公司电力调度控制中心，广西 南宁</p><p><sup>2</sup>北京邮电大学网络与交换技术国家重点实验室，北京</p><p>收稿日期：2017年9月8日；录用日期：2017年9月22日；发布日期：2017年9月28日</p><disp-formula id="hanspub.22212-formula13"><graphic xlink:href="//html.hanspub.org/file/1-2690266x5_hanspub.png"  xlink:type="simple"/></disp-formula></sec><sec id="s2"><title>摘 要</title><p>目前的网络结构是由光传输网络和IP网络共同组成的多层网络，而在多层网络中网络资源的保护和恢复机制是运营商关心的问题。传统的多层网络恢复机制有不同程度上的资源浪费问题，所以本文中基于多层网络架构提出了一种利用多层共享备用路由器的方法来实现网络资源的保护和恢复，这些备用路由器共同组成一个备用池可作为网络拓扑中所有需要保护的路由的替补，在网络出现故障时，作为备用的路由器可提供服务并恢复网络故障，在网络资源设置方面与传统的多层网络保护机制相对比，最终结果表明本文提出的保护措施在成本投入和需求的设备资源上要少于传统方法。</p><p>关键词 :多层光网络，网络保护，网络恢复，资本投入，多层共享备用路由器，可用性</p><disp-formula id="hanspub.22212-formula14"><graphic xlink:href="//html.hanspub.org/file/1-2690266x6_hanspub.png"  xlink:type="simple"/></disp-formula><p>Copyright &#169; 2017 by authors and Hans Publishers Inc.</p><p>This work is licensed under the Creative Commons Attribution International License (CC BY).</p><p>http://creativecommons.org/licenses/by/4.0/</p><p><img src="http://image.hanspub.org:8080\Html/htmlimages\1-2890033x\e70a10f1-7c93-45ea-9603-062237856e4b.png" /><img src="http://image.hanspub.org:8080\Html\htmlimages\1-2890033x\e898c85e-ffc4-45c9-b817-14224a4d6960.png" /></p></sec><sec id="s3"><title>1. 引言</title><p>随着光传输技术的发展以及IP数据业务量的飞速增长，人们需要一个新的网络架构来承载大量的业务。随之应运而生的多层光网络将成为下一代网络的核心，多层光网络由IP层和光层两层组成，两张网络各司其职，IP层负责数据分组和转发，下面的光层则负责大容量长距的数据传送，为IP层提供光通道(如图1)，多层网络在实际中的应用能够大大降低运营商的资本投入。</p><p>对于承载了巨大数据业务量的骨干网来说，一旦网络发生故障会对整个社会产生严重影响。因此，在通信日益发展的今天，网络的生存性技术作为保证网络正常运营的手段，就显得尤为重要。一个完整的生存性策略应包括下面几个部分：故障的发现、定位、声明和解除，本文中，我们重点讨论故障的解除，即恢复机制。在目前的多层网络架构中，传统的恢复方法是针对IP层和光层分别部署恢复机制，</p><p>图1. 多层光网络基本架构</p><p>且两层的恢复机制间没有信息交流，每条IP链路设计为不超过50%的峰值负载链路利用率，以便在出现故障时，有足够的容量可以从故障中恢复，本文将这种传统的针对多层网络的恢复机制称为双平面保护。这种传统的保护机制在现阶段面临两个重要的问题：首先，大量的闲置路由器增加了网络架构的成本；其次，无层间交流的恢复机制在网络故障时如何协调工作也是难点所在。基于这些问题，本文提出了一种新的恢复机制，使用多层共享备用路由器(MLSBR)来实现网络故障的恢复。</p><p>MLSBR方法的关键是使用额外的多层共享备用路由器，取代双平面保护中大量的闲置路由器，在出现网络故障时，可以重新计算路径将流量引入备用路由器从而恢复中断的网络，这和传统的恢复机制对比，可以极大降低运营商架构网络时的成本。</p><p>本文的结构如下：第二节简要介绍了现阶段部署的传统的双平面保护方法；第三节介绍了MLSBR方法，并结合了案例对它进行分析；接下来，第四节分析了两种恢复机制的可用性；之后，第五节对实际部署共享备用路由提出一些需要解决的问题；最后在第六节总结全文并指明了未来的发展方向。</p></sec><sec id="s4"><title>2. 相关工作</title><p>对于多层网络恢复机制来说，已经有很多相关研究， [<xref ref-type="bibr" rid="hanspub.22212-ref1">1</xref>] 中的作者提出基于线性规划大规模网络故障恢复机制， [<xref ref-type="bibr" rid="hanspub.22212-ref2">2</xref>] [<xref ref-type="bibr" rid="hanspub.22212-ref3">3</xref>] 中的作者具体设计了IP/WDM网络架构的实现， [<xref ref-type="bibr" rid="hanspub.22212-ref4">4</xref>] 中的作者对多层网络的生存性进行研究，而 [<xref ref-type="bibr" rid="hanspub.22212-ref5">5</xref>] 中的作者针对IP/WDM网络进行生存性的探讨。现阶段骨干网的网络拓扑结构是由IP路由器和可重构的光分插复用器(ROADM)组成，IP节点连接到光节点通过光拓扑来传输数据。对于这种多层网络架构，恢复机制是人们较为关心的问题之一， [<xref ref-type="bibr" rid="hanspub.22212-ref6">6</xref>] 中的作者定义了如何从故障中恢复的新指标， [<xref ref-type="bibr" rid="hanspub.22212-ref7">7</xref>] 中的作者提出软件定义光网络中的链路故障恢复机制， [<xref ref-type="bibr" rid="hanspub.22212-ref8">8</xref>] 中的作者提出基于BFD的MPLS网络自愈恢复技术。</p><p>针对当前的这种多层网络架构，传统的恢复机制是将业务量需求进行等效分割，分为等效的两个平面，每个平面承载50%的流量，而各个平面可承载的最大流量为100%，因此一个平面出现故障时，该平面承载的流量可以引入另一平面，保证网络能从故障中恢复(如图2)。对于传统恢复机制的改进，也已有相关研究， [<xref ref-type="bibr" rid="hanspub.22212-ref9">9</xref>] 中作者提出了一种更具成本效益的架构作为当前双平面保护的替代方案，而 [<xref ref-type="bibr" rid="hanspub.22212-ref10">10</xref>] 中的作者提出了备用路由的概念，且 [<xref ref-type="bibr" rid="hanspub.22212-ref11">11</xref>] 在 [<xref ref-type="bibr" rid="hanspub.22212-ref10">10</xref>] 的基础上对这种方法进行了经济上的分析。</p><p>对于这种传统恢复机制来说，其引入另一平面的过程由快速重路由(FRR)实现，可以控制在50 ms内，由于它较短的平均故障恢复前时间(MTTR)，会增加运营商的资本投入。而同时两个承载平面的设计也会大大增加闲置路由器的数量，这也是导致成本增加的重要因素之一，此外，网络故障时，无层间交流的恢复机制如何协调工作也是需要解决的问题， [<xref ref-type="bibr" rid="hanspub.22212-ref12">12</xref>] 中的作者讨论了如何协调多层网络不同层并给出了评估结果。</p><p>图2. 双平面保护</p></sec><sec id="s5"><title>3. 共享备用路由以及案例分析</title><p>共享备用路由方法需要建立额外的路由器，这些备用路由器在出现故障时投入使用。我们为IP层假定一种三层的分层的体系，由底层至高层分别是接入路由器、传输路由器和互连路由器(如图3)。</p><p>对于双平面保护来说，需要双倍的传输路由器和互联路由器，而当使用共享备用路由方法时，则可以省去复制的闲置路由器，仅仅加入一些共享备用路由器，传输路由器出现故障时，备用路由器复制故障路由器的配置，例如复制故障路由的路由表等，为接入路由器和互连路由器建立新的连接，从而让网络从故障中恢复(如图4)。共享备用路由方法的具体工作过程如下：</p><p>1) 发生故障。</p><p>2) 丢失连接的IP/MPLS节点向周围发送请求建立新的连入网络的路径。此时有两种情况。</p><p>a) 本地区域备用路由器可用时，通过请求备用路由器重新建立路径。</p><p>b) 本地区域备用路由器不可用时，通过请求连入临近区域的备用路由器重新建立路径。</p><p>3) 本地区域备用路由或邻近区域备用路由收到请求，检查自身工作状态，并发送相应的反馈信息。</p><p>4) IP/MPLS节点接收备用路由器的反馈信息选择建立新路径或是请求其他备用路由器。如果需要请求其他备用路由器，则返回第二步继续循环。反之，完成备用路径的建立。</p><p>5) 故障路由器修复后，释放建立的备用路径，将流量重新引入工作路径。</p><p>图3. IP层分层体系结构</p><p>图4. 共享备用路由恢复机制</p><p>我们可以发现使用传统的双平面保护时，恢复用时要少于共享备用路由机制，因为在故障发生时，共享备用路由机制需要为备用路由器重新设置光连接，在重新设置连接时配置路由器需要一定时间，而双平面保护使用FRR方法可以将恢复时间控制在50 ms内，正是由于共享备用路由机制较长的MTTR，也代表相对于传统恢复机制来说它可以减少运营商的资本投入。用备用路由器替代双平面保护中大量闲置的路由器也大大降低了网络架构的成本。</p><p>图5为一个简单的IP层拓扑结构，由10个IP路由器组成，其中TR1-TR4为互连路由器，TR5-TR10为传输路由器。如果采取双平面保护，则其传输路由器的数量增加一倍达到12个。如果采取共享备用路由方法，因为考虑到IP层的容量应为最大占用的80%，所以在有6个传输路由器的情况下，最少应使用2个备用路由器，当使用6个备用路由器时，情况类似于双平面保护，因此共享备用路由方法中使用的备用路由器数量在2~6之间，具体应依据该网络架构需要保护的节点数量来决定。</p><p>使用2个备用路由器时，传输路由器的数量由12个减少到8个，其中6个是工作路由器2个是备用路由器，这种情况能够获得最大程度的节约成本，可以达到33.3%，图6展示了使用不同数量的备用路由器时可以获得的减省。</p></sec><sec id="s6"><title>4. 可用性对比</title><p>本节中我们基于两种情况(单区域和双区域)分析双平面保护和共享备用路由方法各自的可用性。网络可用性(Availability)在这里用Ava表示，设备可用性用E<sub>Ava</sub>表示，其中，我们用停机时间比运行时间得到总不可用性从而推出总可用性如公式1，设备的可用性由平均失效前时间和平均故障间隔时间表示，</p><p>图5. IP拓扑结构</p><p>图6. 备用路由器数量和减省量</p><p>如公式2：</p><p>总可用性</p><p>Ava = 1 − 停 机 时 间 运 行 时 间 (1)</p><p>设备可用性</p><p>E Ava = MTBF MTBF + MTTR (2)</p><p>易推出</p><p>设备不可用性</p><p>E Un = 1 − E Ava = 1 − MTBF MTTR + MTBF = MTTR MTTR + MTBF (3)</p><p>这里我们用 λ 代表 MTTR MTBF ，公式(3)可以表示为</p><p>E Un = λ λ + 1 (4)</p><p>则网络可用性可以用设备可用性计算出来。</p><sec id="s6_1"><title>4.1. 单区域</title><p>在只有一个区域时，双平面保护和共享备用路由方法都在两个路由器同时不可用时网络才会中断，所以可以等效看待。此时可以用设备可用性来表达网络可用性，此时网络不可用性为两个路由器同时不可用的概率，即两个路由器不可用性的乘积，易得出</p><p>Ava = 1 − E Un 2 = 1 − ( λ λ + 1 ) 2 (5)</p><p>图7表示了单区域时双平面保护和MLSBR方法可用性和λ之间的关系，由图可见，在单区域时两种方法的网络可用性表现相同，且网络可用性都会随着 λ 值的增加而降低。</p></sec><sec id="s6_2"><title>4.2. 双区域</title><p>有两个区域时，双平面保护的可用性依然和单区域时相同，因为对于双平面保护来说两个区域之间没有信息交流，所以其可用性依然如下表示</p><p>Ava = 1 − E Un 2 = 1 − ( λ λ + 1 ) 2 (6)</p><p>而对于MLSBR方法来说，只有3个路由器或4个路由器同时出现故障时网络才会中断。4个路由同时故障的概率是4个路由不可用性的乘积，而3个路由不可用的概率为3个路由不可用性的乘积再乘上一个路由可用性，易得出此时MLSBR方法的网络可用性为</p><p>Ava = 1 − E Un 4 − E Un 3 E Ava = 1 − ( λ λ + 1 ) 4 − ( λ λ + 1 ) 3 1 λ + 1 = 1 − λ 4 + λ 3 ( λ + 1 ) 4 (7)</p><p>图8表示了双区域时双平面方法和MLSBR在可用性方面的对比，可以看出随着l值的增加，采用这两种不同的恢复策略都难以避免网络可用性的增加，但是在 λ &gt; 0.01 之后，在相同l值时，MLSBR的可用性要优于传统的双平面方法。</p><p>图7. 单区域两种方法的可用性</p><p>图8. 双区域两种方法的可用性</p></sec></sec><sec id="s7"><title>5. 结束语</title><p>本文在分析了针对多层网络的传统恢复机制的基础上，提出了MLSBR方法，与现阶段双平面保护相比，这种机制不仅节省网络架构的成本，降低运营商资本投入，在可用性方面也优于传统恢复机制，但是，在实际部署MLSBR时，仍面临一些困难，例如信令格式的选择和如何统一控制等，我们需要在未来的研究中解决这些问题。</p></sec><sec id="s8"><title>文章引用</title><p>唐 元,黄汉华,蒋 烨,王小梅. 基于多层共享备用路由器的多层网络恢复The Restoration of Multilayer Optical Network Based on Multilayer Shared Backup Router[J]. 软件工程与应用, 2017, 06(05): 103-110. http://dx.doi.org/10.12677/SEA.2017.65011</p></sec><sec id="s9"><title>参考文献 (References)</title></sec></body><back><ref-list><title>References</title><ref id="hanspub.22212-ref1"><label>1</label><mixed-citation publication-type="other" xlink:type="simple">刘珂. 基于线性规划的大规模网络故障恢复机制[J]. 计算机工程, 2016, 42(7): 104-108+116.</mixed-citation></ref><ref id="hanspub.22212-ref2"><label>2</label><mixed-citation publication-type="other" xlink:type="simple">曹毅宁, 谢永强, 许波, 等. IP/WDM网络的跨层控制系统设计[J]. 计算机工程, 2014, 40(9): 87-91.</mixed-citation></ref><ref id="hanspub.22212-ref3"><label>3</label><mixed-citation publication-type="other" xlink:type="simple">曹毅宁, 郑小平, 李艳和, 等. IP/WDM网络的虚拓扑设计[J]. 计算机工程, 2010, 36(5): 4-6, 9.</mixed-citation></ref><ref id="hanspub.22212-ref4"><label>4</label><mixed-citation publication-type="other" xlink:type="simple">孙罡. 多层网络生存性研究[D]: [硕士学位论文]. 成都: 成都理工大学, 2009.</mixed-citation></ref><ref id="hanspub.22212-ref5"><label>5</label><mixed-citation publication-type="other" xlink:type="simple">邱强. IP over WDM网络生存性研究[D]: [硕士学位论文]. 北京: 北京邮电大学, 2009.</mixed-citation></ref><ref id="hanspub.22212-ref6"><label>6</label><mixed-citation publication-type="other" xlink:type="simple">Lee, K., Modiano, E. and Lee, H.W. (2011) Cross-Layer Survivability in WDM-Based Networks. IEEE/ACM Transactions on Networking, 19, 1000-1013. &lt;br&gt;https://doi.org/10.1109/TNET.2010.2091426</mixed-citation></ref><ref id="hanspub.22212-ref7"><label>7</label><mixed-citation publication-type="other" xlink:type="simple">李书, 陶君, 张丹. 软件定义网络中链路故障恢复机制研究[J]. 信息通信, 2016(12): 20-21.</mixed-citation></ref><ref id="hanspub.22212-ref8"><label>8</label><mixed-citation publication-type="other" xlink:type="simple">王建国, 景鑫, 温海鹏. 基于BFD的MPLS网络自愈恢复技术的研究与实现[J]. 中国新通信, 2016, 18(15): 43.</mixed-citation></ref><ref id="hanspub.22212-ref9"><label>9</label><mixed-citation publication-type="other" xlink:type="simple">Palkopoulou, E., Schupke, D.A. and Bauschert, T. (2011) Shared Backup Router Resources: Realizing Virtualized Network Resilience. IEEE Communications Magazine, 49, 140-146. &lt;br&gt;https://doi.org/10.1109/MCOM.2011.5762810</mixed-citation></ref><ref id="hanspub.22212-ref10"><label>10</label><mixed-citation publication-type="other" xlink:type="simple">Muñoz, F., López, V., González de Dios, Ó., et al. (2012) Multi-Layer Restoration in Hierarchical IP/MPLS over WSON Networks. In: European Conference on Networks and Optical Communications (NOC), IEEE Press, Washington DC, 1-6.</mixed-citation></ref><ref id="hanspub.22212-ref11"><label>11</label><mixed-citation publication-type="other" xlink:type="simple">Mayoral, A., López, V., Gerstel, O., et al. (2014) Minimizing Resource Protection in IP over WDM Networks: Multi-Layer Shared Backup Router. In: Proceedings of Optical Fiber Conference (OFC), IEEE Press, Washington DC, 1-3.  
&lt;br&gt;https://doi.org/10.1364/OFC.2014.M3B.1</mixed-citation></ref><ref id="hanspub.22212-ref12"><label>12</label><mixed-citation publication-type="other" xlink:type="simple">李燕伟, 华楠, 陈悦, 等. 多层生存性网络层间协调机制建模及实验评估[J]. 清华大学学报, 2013(3): 399-403.</mixed-citation></ref></ref-list></back></article>