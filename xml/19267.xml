<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE article  PUBLIC "-//NLM//DTD Journal Publishing DTD v3.0 20080202//EN" "http://dtd.nlm.nih.gov/publishing/3.0/journalpublishing3.dtd"><article xmlns:mml="http://www.w3.org/1998/Math/MathML" xmlns:xlink="http://www.w3.org/1999/xlink" dtd-version="3.0" xml:lang="en" article-type="research article"><front><journal-meta><journal-id journal-id-type="publisher-id">JSTA</journal-id><journal-title-group><journal-title>Journal of Sensor Technology and Application</journal-title></journal-title-group><issn pub-type="epub">2331-0235</issn><publisher><publisher-name>Scientific Research Publishing</publisher-name></publisher></journal-meta><article-meta><article-id pub-id-type="doi">10.12677/JSTA.2017.51001</article-id><article-id pub-id-type="publisher-id">JSTA-19267</article-id><article-categories><subj-group subj-group-type="heading"><subject>JSTA20170100000_73786391.pdf</subject></subj-group><subj-group subj-group-type="Discipline-v2"><subject>工程技术</subject></subj-group></article-categories><title-group><article-title>
 
 
  基于GPS/MEMS惯性传感器的车载组合惯导系统的设计实现
  The Design and Implementation of a Vehicle Mounted Inertial Navigation System Based on GPS/MEMS Inertial Sensor
 
</article-title></title-group><contrib-group><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>张</surname><given-names>孝兵</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>周</surname><given-names>宣赤</given-names></name><xref ref-type="aff" rid="aff3"><sup>3</sup></xref><xref ref-type="corresp" rid="cor1"><sup>*</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>夏</surname><given-names>云海</given-names></name><xref ref-type="aff" rid="aff3"><sup>3</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>王</surname><given-names>兴</given-names></name><xref ref-type="aff" rid="aff3"><sup>3</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>张</surname><given-names>宏峰</given-names></name><xref ref-type="aff" rid="aff3"><sup>3</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib></contrib-group><aff id="aff2"><addr-line>北京航天益森风洞工程技术有限公司，北京</addr-line></aff><aff id="aff3"><addr-line>中国航天空气动力技术研究院，北京</addr-line></aff><aff id="aff1"><addr-line>null</addr-line></aff><author-notes><corresp id="cor1">* E-mail:<email>zoezxc@126.com(周宣)</email>;</corresp></author-notes><pub-date pub-type="epub"><day>16</day><month>12</month><year>2016</year></pub-date><volume>05</volume><issue>01</issue><fpage>1</fpage><lpage>9</lpage><permissions><copyright-statement>&#169; Copyright  2014 by authors and Scientific Research Publishing Inc. </copyright-statement><copyright-year>2014</copyright-year><license><license-p>This work is licensed under the Creative Commons Attribution International License (CC BY). http://creativecommons.org/licenses/by/4.0/</license-p></license></permissions><abstract><p>
 
 
  本文采用Cortex-M4嵌入式处理器、GPS/北斗双模定位模块以及9轴MEMS传感器设计了一种可应用于车辆定位和姿态检测的低成本、微型化组合惯性导航装置。装置采用Cortex-M4处理器对GPS/北斗双模定位模块以及MEMS惯性传感器采集到的数据进行解算，解算后的数据通过UART和CAN总线发送到显示终端或者其它后端设备。实验结果表明该装置能够满足车辆定位与姿态检测的稳定性和实时性要求，具有良好的应用前景。
   A low-cost, miniaturized combined inertial navigation system for vehicle positioning and attitude detection is designed in the paper using Cortex-M4 embedded processor, GPS/Beidou dual-mode positioning module and 9-axis MEMS sensor. The calculated data are sent to the display terminal or other back-end equipment through UART and CAN bus. Experimental results show that the device can meet the stability and real-time requirements of vehicle position and attitude detection, and has good application prospects.
 
</p></abstract><kwd-group><kwd>全球定位系统，MEMS传感器，组合惯导，Cortex-M4, GPS</kwd><kwd> MEMS Inertial Sensor</kwd><kwd> Integrated Navigation</kwd><kwd> Cortex-M4</kwd></kwd-group></article-meta></front><body><sec id="s1"><title>基于GPS/MEMS惯性传感器的车载组合惯导系统的设计实现<sup> </sup></title><p>张孝兵<sup>1</sup>，周宣赤<sup>2*</sup>，夏云海<sup>2</sup>，王兴<sup>2</sup>，张宏峰<sup>2</sup></p><p><sup>1</sup>北京航天益森风洞工程技术有限公司，北京</p><p><sup>2</sup>中国航天空气动力技术研究院，北京</p><disp-formula id="hanspub.19267-formula32"><graphic xlink:href="http://html.hanspub.org/file/1-2960061x7_hanspub.png"  xlink:type="simple"/></disp-formula><p>收稿日期：2016年11月25日；录用日期：2016年12月13日；发布日期：2016年12月16日</p><disp-formula id="hanspub.19267-formula33"><graphic xlink:href="http://html.hanspub.org/file/1-2960061x8_hanspub.png"  xlink:type="simple"/></disp-formula></sec><sec id="s2"><title>摘 要</title><p>本文采用Cortex-M4嵌入式处理器、GPS/北斗双模定位模块以及9轴MEMS传感器设计了一种可应用于车辆定位和姿态检测的低成本、微型化组合惯性导航装置。装置采用Cortex-M4处理器对GPS/北斗双模定位模块以及MEMS惯性传感器采集到的数据进行解算，解算后的数据通过UART和CAN总线发送到显示终端或者其它后端设备。实验结果表明该装置能够满足车辆定位与姿态检测的稳定性和实时性要求，具有良好的应用前景。</p><p>关键词 :全球定位系统，MEMS传感器，组合惯导，Cortex-M4</p><disp-formula id="hanspub.19267-formula34"><graphic xlink:href="http://html.hanspub.org/file/1-2960061x9_hanspub.png"  xlink:type="simple"/></disp-formula></sec><sec id="s3"><title>1. 引言</title><p>随着中国车联网行业的兴起与发展，车辆的各种状态信息采集与检测对车联网行业的发展起着越来越重要的作用。而车辆的定位和姿态信息作为车辆状态信息的一部分，可以用来实时检测车辆的运动状态和过程，对未来的车辆防碰撞预警或者自动驾驶具有关键作用。对于车辆的定位和姿态信息采集与检测需要用到惯性导航系统。</p><p>传统的惯性导航系统是以牛顿力学第二定律为理论基础，利用加速度传感器、陀螺仪以及地磁传感器通过载体初始的基准方向和初始位置来确定载体实时的位置、速度和姿态的导航系统 [<xref ref-type="bibr" rid="hanspub.19267-ref1">1</xref>] 。这种导航系统由于成本价格较低、不受环境干扰、完全自主等优点已经广泛应用到各种导航系统中 [<xref ref-type="bibr" rid="hanspub.19267-ref2">2</xref>] 。但是由于传统的惯性导航系统定位误差随所使用时间而发散，严重影响了导航的精度，在实际应用中需要进行校准与修正。利用GPS进行定位导航具有定位精度高、误差不随时间积累等优点，但是容易受到气象、建筑物等环境影响。目前比较流行的惯导设计方法是在传统的惯性导航系统基础上，增加GPS功能，通过数据融合达到利用彼此优点，同时克服或者降低彼此缺点的效果 [<xref ref-type="bibr" rid="hanspub.19267-ref3">3</xref>] [<xref ref-type="bibr" rid="hanspub.19267-ref4">4</xref>] 。</p><p>本文利用GPS/北斗双模定位模块以及MEMS惯性传感器设计实现了一种主要应用于车辆定位定姿的组合惯导系统，并对硬件实现部分进行了详细介绍。</p></sec><sec id="s4"><title>2. GPS/MEMS组合惯导系统的方案设计</title><sec id="s4_1"><title>2.1. 硬件方案设计</title><p>系统由外部3.3 V电源供电，采用Cortex-M4 处理器对GPS/北斗双模定位模块以及MEMS惯性传感器采集到的数据进行解算，然后利用UART和CAN发送到显示终端或者其他设备。系统的硬件结构框图如图1所示。</p><p>GPS/MEMS组合导航系统硬件整体结构从功能上可以分为MCU模块、通信模块以及由GPS、压力传感器和9轴传感器组成的导航信息采集模块三部分。其中MCU模块完成导航信息的处理和通信控制，</p><p>图1. GPS/MEMS组合导航系统硬件整体结构框图</p><p>通信模块完成将MCU处理后的数据信息进行传输，导航信息采集模块完成车辆载体的定位定姿检测。9轴传感器采用包含有3轴加速度、3轴陀螺和3轴地磁信号的集成MEMS传感器来实现设计。</p></sec><sec id="s4_2"><title>2.2. 软件方案设计</title><p>系统上电后，由MCU对所有用到的外设进行初始化，并打开定时器中断，中断周期为5 ms。经过30 s后，MCU将向UART或者CAN发送0xFF表示准备发送数据，并且开始读取GPS数据和MEMS惯导数据。在将读取到的野点数据剔除后，进行卡尔曼滤波，然后将GPS和MEMS惯导融合处理后的数据进行存储，用作下一次滤波的参考数据。每当5 ms中断到来的时候，MCU将把解算后的导航数据通过UART或者CAN发送出去。</p></sec></sec><sec id="s5"><title>3. 硬件详细设计</title><sec id="s5_1"><title>3.1. MCU模块设计</title><p>MCU模块的主要功能是采集GPS、压力传感器和9轴传感器的信息，并对采集到的实时信息进行解算。被解算后的数据经过数据融合算法处理，然后进行存储或者定时器中断到来时将数据通过UART或者CAN发送给显示终端或者其他后端设备。</p><p>由于ST公司推出了支持Cortex-M4内核架构的通用函数库，使得产品设计开发变得更加容易。MCU模块部分采用ST公司具有32位Cortex-M4内核架构的STM32F405RGT6微控制器作为核心器件，其核心电路原理图如图2所示。该器件的主要特点如下：</p><p>1) 具有1 MB的内部Flash和192 + 4 KB的内部SRAM；</p><p>2) 具有3个SPI控制器接口；</p><p>3) 具有3个I2C控制器接口；</p><p>4) 具有4个USART和2个UART控制器接口；</p><p>5) 最高主频为168 MHz；</p><p>6) 采用LQFP64封装类型；</p><p>7) 具有51个GPIO；</p><p>8) 工作温度为−40℃~+85℃。</p></sec><sec id="s5_2"><title>3.2. 通信模块设计</title><p>通信模块的主要功能是将MCU处理后的车辆位置和姿态相关数据发送给显示终端或者其他后端设备。通信模块采用UART和CAN两种通信方式，可以根据现场实际应用选择相应的通信方式。</p><p>图2. MCU模块的核心电路图</p><sec id="s5_2_1"><title>3.2.1. UART通信电路设计</title><p>UART通信电路采用ADI的ADM3232E接口器件实现TTL转RS232电平转换，其电路原理图如图3所示。该芯片的主要特点为：</p><p>1) 输入与输出均提供符合IEC1000-4-2 (801.2)要求的ESD保护；</p><p>2) 具有双通道收发接口；</p><p>3) 功耗较低；</p><p>4) 3.3 V单电源供电；</p><p>数据最高速率可以达到460 kbps。</p></sec><sec id="s5_2_2"><title>3.2.2. CAN通信电路设计</title><p>CAN通信采用TI的SN65HVD230来实现接口电路，该器件适用于较高通信速率、良好抗干扰能力和高可靠性CAN总线的串行通信，图4为CAN通信电路原理图。该芯片的主要特点为：</p><p>1) 高输入阻抗，支持高达120个节点；</p><p>2) 支持低电流等待模式，典型电流为370 uA；</p><p>3) 信号传输速率高达1 Mb/s；</p><p>4) 具有热保护、开路失效保护功能；</p><p>图3. UART通信电路原理图</p><p>图4. CAN通信电路原理图</p><p>5) 3.3 V单电源供电；</p><p>6) 具有抗瞬间干扰的ESD保护功能。</p></sec></sec><sec id="s5_3"><title>3.3. 导航信息采集模块设计</title><p>导航信息采集模块的主要作用是实时检测车辆载体的位置和姿态信息，并将采集到的信息通过串行通信方式传送给MCU模块。该模块分别采用GPS和MEMS惯导电路组成。GPS电路作为车辆载体定位定姿的主要手段，MEMS惯导电路是防止车辆载体在受环境影响，不能准确接受GPS信号时，提供辅助定位定姿信息。</p><sec id="s5_3_1"><title>3.3.1. GPS电路设计</title><p>GPS电路采用U-BLOX公司的MAX-M8Q卫星定位模块来实现，采用GPS+北斗双模模式进行导航定位，其电路原理图如图5所示。该模块能在较低的功耗下同时满足高灵敏度和最小采样时间的要求。该模块具有如下特点：</p><p>1) 支持NMEA-0183协议；2) 初始波特率为9600 bps；3) 支持双模接收模式，可以同时接受GPS和GLONASS，或者GPS和北斗；4) 72通道U-BLOX M8引擎；5) 定位精度为2.0 CEP；6) 冷启动时间为26 s。</p><p>图5. GPS模块电路原理图</p></sec><sec id="s5_3_2"><title>3.3.2. MEMS惯导电路设计</title><p>MEMS惯导电路由三轴加速度、三轴陀螺和三轴地磁构成9轴传感器电路和压力传感器两部分电路组成。</p><p>(1) 9轴传感器电路设计</p><p>9轴传感器采用MPU9255复合芯片来实现，采用串行通信方式，它可直接输出9轴的全部数据，让开发者避开了繁琐复杂的芯片选择和外设成本，保证最佳的性能。9轴传感器相关电路如图6所示。该芯片具有以下主要特点：</p><p>1) 加速度和陀螺仪的AD分辨率为16位，地磁传感器为6位AD；</p><p>2) 具有I2C接口和SPI接口；</p><p>3) 可编程的传感器量程输出；</p><p>4) 具有业界领先的数字滤波器；</p><p>5) 能够承受10,000 g的震动冲击。</p><p>(2) 压力传感器电路设计</p><p>压力传感器主要是通过测量车辆载体周围的大气压强来计算车辆载体所处位置的海拔高度。该电路采用BOSCH的具有高精度、小体积超低功耗BMP180压力传感器芯片来设计，其电路原理图如图7所示。该芯片的主要特点为：</p><p>1) 压力范围：300~1100 hPa (海拔9000米~−500米)；</p><p>2) 支持3.3 V供电电压；</p><p>3) 在标准模式下具有5 uA的低功耗；</p><p>4) 在低功耗模式下，分辨率为0.06 hPa (0.5米)；</p><p>5) 具有I2C接口；</p><p>6) 具有温度补偿功能。</p></sec></sec></sec><sec id="s6"><title>4. 测试实例</title><sec id="s6_1"><title>4.1. 定位测试</title><p>将MCU解算后的数据通过串口调试工具XCOM (V2.0)输出，如图8所示。</p><p>将经纬度输入Google earth进行查询，结果如图9所示，图中红色坐标位置正是进行测试的位置，定位精度小于3米。</p><p>图6. 9轴传感器电路原理图</p><p>图7. 压力传感器电路原理图</p><p>图8. 串口输出的信息</p><p>图9. 地理位置查询结果</p><table-wrap id="table1" ><label><xref ref-type="table" rid="table1">Table 1</xref></label><caption><title> Resulting data of vehicle performance tes</title></caption><table><tbody><thead><tr><th align="center" valign="middle"  rowspan="2"  >次数</th><th align="center" valign="middle"  rowspan="2"  >状态</th><th align="center" valign="middle"  colspan="6"  >导航误差</th><th align="center" valign="middle"  rowspan="2"  >姿态误差</th></tr></thead><tr><td align="center" valign="middle" >Vx (m/s)</td><td align="center" valign="middle" >Vy (m/s)</td><td align="center" valign="middle" >Vz (m/s)</td><td align="center" valign="middle" >Δx/m</td><td align="center" valign="middle" >Δy/m</td><td align="center" valign="middle" >Δz/m</td></tr><tr><td align="center" valign="middle"  rowspan="2"  >1</td><td align="center" valign="middle" >惯导</td><td align="center" valign="middle" >−1.2</td><td align="center" valign="middle" >1.45</td><td align="center" valign="middle" >1.1</td><td align="center" valign="middle" >−67.34</td><td align="center" valign="middle" >56.21</td><td align="center" valign="middle" >50.11</td><td align="center" valign="middle" >78.15</td></tr><tr><td align="center" valign="middle" >组合</td><td align="center" valign="middle" >0.1</td><td align="center" valign="middle" >0.06</td><td align="center" valign="middle" >0.1</td><td align="center" valign="middle" >4.12</td><td align="center" valign="middle" >5.42</td><td align="center" valign="middle" >4.51</td><td align="center" valign="middle" >4.32</td></tr><tr><td align="center" valign="middle"  rowspan="2"  >2</td><td align="center" valign="middle" >惯导</td><td align="center" valign="middle" >−1.5</td><td align="center" valign="middle" >1.4</td><td align="center" valign="middle" >1.2</td><td align="center" valign="middle" >−58.76</td><td align="center" valign="middle" >50.25</td><td align="center" valign="middle" >46.78</td><td align="center" valign="middle" >65.45</td></tr><tr><td align="center" valign="middle" >组合</td><td align="center" valign="middle" >−0.1</td><td align="center" valign="middle" >0.17</td><td align="center" valign="middle" >−0.05</td><td align="center" valign="middle" >−3.12</td><td align="center" valign="middle" >5</td><td align="center" valign="middle" >−2.85</td><td align="center" valign="middle" >4.8</td></tr><tr><td align="center" valign="middle"  rowspan="2"  >3</td><td align="center" valign="middle" >惯导</td><td align="center" valign="middle" >1.5</td><td align="center" valign="middle" >1.2</td><td align="center" valign="middle" >−0.98</td><td align="center" valign="middle" >50.87</td><td align="center" valign="middle" >44.24</td><td align="center" valign="middle" >−35.4</td><td align="center" valign="middle" >70.1</td></tr><tr><td align="center" valign="middle" >组合</td><td align="center" valign="middle" >0.1</td><td align="center" valign="middle" >1.1</td><td align="center" valign="middle" >−0.1</td><td align="center" valign="middle" >3.31</td><td align="center" valign="middle" >3.87</td><td align="center" valign="middle" >−5.65</td><td align="center" valign="middle" >4.66</td></tr></tbody></table></table-wrap><p>表1. 车载性能实验数据</p></sec><sec id="s6_2"><title>4.2. 车载实验</title><p>将纯惯导INS-XXX(陀螺精度0.01˚/h)与组合惯导固定在同一钢板，调试完毕后，将其安装在试验车上，选取标准点A和标准点B，A、B两点的距离大于5 min车辆行驶距离。组合惯导的精度考核方法如下：</p><p>1) 在A点装订好初始位置，并完成初始对准；</p><p>2) 车辆行驶，组合惯导进行传递对准；</p><p>3) 惯导完成传递对准后，自动进入导航状态，车辆行驶到B点后，记录组合惯导的有关数据；</p><p>为了能真实地模拟实际情况，选择的路况包括倾斜路、斜坡路、S型路的环形路(倾斜路：300 m长，倾斜30˚；斜坡路：300 m长，斜坡陡度为30˚；S型路：半径为80 m)。</p><p>重复上述过程5次左右，根据GJB729 [<xref ref-type="bibr" rid="hanspub.19267-ref5">5</xref>] ，姿态和高程误差可按均方误差评定，位置误差按圆概率误差评定，计算组合惯导的精度公式：</p><p>姿态误差<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2960061x19_hanspub.png" xlink:type="simple"/></inline-formula> (1)</p><p>高程误差<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2960061x20_hanspub.png" xlink:type="simple"/></inline-formula>(2)</p><p>水平位置误差<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2960061x21_hanspub.png" xlink:type="simple"/></inline-formula> (3)</p><p>式中，R<sub>i</sub>为组合惯导的位置值与标准点的径向误差。</p><p>将GPS信号接入组合惯导后，重复第一到第三过程5次左右，可考核组合导航系统的精度。经过120 s后，纯惯导和组合后的车载性能实验实测数据如表1所示。</p><p>分别按照式(1)、(2)和(3)计算得到：σA =3.89'；HE = 2.86 m；CEP = 3.08 m。</p></sec></sec><sec id="s7"><title>5. 结论</title><p>本文针对车辆定位定姿的惯导系统应用需求，设计了一种低成本的基于MEMS惯性传感器及GPS/北斗双模定位模块的小型组合惯导系统，并对硬件实现部分：MCU模块、通信模块以及由GPS、压力传感器和9轴传感器组成的导航信息采集模块三部分进行了详细设计。经实地车载测试证明，本惯导系统不仅性价比高，而且具有较高的精度和可靠性，具有良好的应用前景。</p></sec><sec id="s8"><title>文章引用</title><p>张孝兵,周宣赤,夏云海,王兴,张宏峰. 基于GPS/MEMS惯性传感器的车载组合惯导系统的设计实现 The Design and Implementation of a Vehicle Mounted Inertial Navigation System Based on GPS/MEMS Inertial Sensor[J]. 传感器技术与应用, 2017, 05(01): 1-9. http://dx.doi.org/10.12677/JSTA.2017.51001</p></sec><sec id="s9"><title>参考文献 (References)</title></sec></body><back><ref-list><title>References</title><ref id="hanspub.19267-ref1"><label>1</label><mixed-citation publication-type="other" xlink:type="simple">张炎华, 王立端, 战兴群, 翟传润. 惯性导航技术的新进展及发展趋势[J]. 中国造船, 2008, 49(183): 134-141.</mixed-citation></ref><ref id="hanspub.19267-ref2"><label>2</label><mixed-citation publication-type="other" xlink:type="simple">胡恩伟, 周建林. 基于MEMS多传感器数据融合的惯性组合导航系统算法设计与实现[D]: [硕士学位论文]. 重庆: 重庆大学, 2013.</mixed-citation></ref><ref id="hanspub.19267-ref3"><label>3</label><mixed-citation publication-type="other" xlink:type="simple">康岳林, 高杨, 高立. 基于MEMS的GPS_SINS组合导航技术发展现状[J]. 船电技术, 2011, 31(5): 26-29.</mixed-citation></ref><ref id="hanspub.19267-ref4"><label>4</label><mixed-citation publication-type="other" xlink:type="simple">杜小菁, 翟峻仪. 基于MEMS的微型惯性导航技术综述[J]. 飞航导弹, 2014(9): 77-81.</mixed-citation></ref><ref id="hanspub.19267-ref5"><label>5</label><mixed-citation publication-type="other" xlink:type="simple">国军标GJB729-1989. 惯性导航系统精度评定方法[S]. 北京: 中国船舶工业总公司, 1989.</mixed-citation></ref></ref-list></back></article>