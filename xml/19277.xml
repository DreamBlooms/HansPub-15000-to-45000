<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE article  PUBLIC "-//NLM//DTD Journal Publishing DTD v3.0 20080202//EN" "http://dtd.nlm.nih.gov/publishing/3.0/journalpublishing3.dtd"><article xmlns:mml="http://www.w3.org/1998/Math/MathML" xmlns:xlink="http://www.w3.org/1999/xlink" dtd-version="3.0" xml:lang="en" article-type="research article"><front><journal-meta><journal-id journal-id-type="publisher-id">IJM</journal-id><journal-title-group><journal-title>International Journal of Mechanics Research</journal-title></journal-title-group><issn pub-type="epub">2325-498X</issn><publisher><publisher-name>Scientific Research Publishing</publisher-name></publisher></journal-meta><article-meta><article-id pub-id-type="doi">10.12677/IJM.2016.54011</article-id><article-id pub-id-type="publisher-id">IJM-19277</article-id><article-categories><subj-group subj-group-type="heading"><subject>IJM20160400000_96740335.pdf</subject></subj-group><subj-group subj-group-type="Discipline-v2"><subject>数学与物理</subject></subj-group></article-categories><title-group><article-title>
 
 
  基于阻抗控制的四足机器人足力控制研究
  Research on Foot Force Control of Quadruped Robot Based on Impedance Control
 
</article-title></title-group><contrib-group><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>丁</surname><given-names>庆鹏</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>袁</surname><given-names>立鹏</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="corresp" rid="cor1"><sup>*</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>欧阳</surname><given-names>荣坚</given-names></name><xref ref-type="aff" rid="aff3"><sup>3</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib></contrib-group><aff id="aff2"><addr-line>常州恐龙园股份有限公司，江苏 常州；哈尔滨工业大学机电工程学院，黑龙江 哈尔滨</addr-line></aff><aff id="aff3"><addr-line>常州迪华数字科技有限公司，江苏 常州</addr-line></aff><aff id="aff1"><addr-line>null</addr-line></aff><author-notes><corresp id="cor1">* E-mail:<email>hitylp@126.com (袁立)</email>;</corresp></author-notes><pub-date pub-type="epub"><day>16</day><month>12</month><year>2016</year></pub-date><volume>05</volume><issue>04</issue><fpage>121</fpage><lpage>128</lpage><permissions><copyright-statement>&#169; Copyright  2014 by authors and Scientific Research Publishing Inc. </copyright-statement><copyright-year>2014</copyright-year><license><license-p>This work is licensed under the Creative Commons Attribution International License (CC BY). http://creativecommons.org/licenses/by/4.0/</license-p></license></permissions><abstract><p>
 
 
   
   四足机器人行走过程中的稳定性与足端接触力有着密切的联系，而且仅采用位置控制无法满足腿部运动柔顺性对足力的要求。因此，有必要研究足式机器人行走过程中的足力控制方法。本文采用阻抗控制方法对四足机器人足力进行控制，运用仿真手段对机器人行走过程中的足力变化进行分析，完成了具有较高实时性和可行性的控制器设计。 Robot walking stability is related to contact force between robot foot and the environment. Be-sides, pure position control is not enough in compliance control. Hence it is necessary to study force control method when the robot is walking or running. This thesis uses impedance control method to control contact force of quadruped robot foot with the environment, and analyzes the procedure under simulation study. An online and feasible controller is designed, which is robust to variable environment stiffness and sensor noise.
    
  
 
</p></abstract><kwd-group><kwd>四足机器人，稳定性，阻抗控制, Quadruped Robot</kwd><kwd> Stability</kwd><kwd> Impedance Control</kwd></kwd-group></article-meta></front><body><sec id="s1"><title>基于阻抗控制的四足机器人足力控制研究<sup> </sup></title><p>丁庆鹏<sup>1,2</sup>，袁立鹏<sup>1,2</sup>，欧阳荣坚<sup>3</sup></p><p><sup>1</sup>常州恐龙园股份有限公司，江苏 常州</p><p><sup>2</sup>哈尔滨工业大学机电工程学院，黑龙江 哈尔滨</p><p><sup>3</sup>常州迪华数字科技有限公司，江苏 常州</p><disp-formula id="hanspub.19277-formula13"><graphic xlink:href="http://html.hanspub.org/file/1-2650071x6_hanspub.png"  xlink:type="simple"/></disp-formula><p>收稿日期：2016年11月25日；录用日期：2016年12月12日；发布日期：2016年12月16日</p><disp-formula id="hanspub.19277-formula14"><graphic xlink:href="http://html.hanspub.org/file/1-2650071x7_hanspub.png"  xlink:type="simple"/></disp-formula></sec><sec id="s2"><title>摘 要</title><p>四足机器人行走过程中的稳定性与足端接触力有着密切的联系，而且仅采用位置控制无法满足腿部运动柔顺性对足力的要求。因此，有必要研究足式机器人行走过程中的足力控制方法。本文采用阻抗控制方法对四足机器人足力进行控制，运用仿真手段对机器人行走过程中的足力变化进行分析，完成了具有较高实时性和可行性的控制器设计。</p><p>关键词 :四足机器人，稳定性，阻抗控制</p><disp-formula id="hanspub.19277-formula15"><graphic xlink:href="http://html.hanspub.org/file/1-2650071x8_hanspub.png"  xlink:type="simple"/></disp-formula></sec><sec id="s3"><title>1. 引言</title><p>机器人行走过程中，可被认为是多自由度的并联系统。足力对机身平衡起着决定性作用，尤其是当机器人在不规则路面及刚度较小路面行走时，足端支撑力的变化会使机器人机身的姿态发生改变，进而影响稳定性。除此之外，足力的变化与机器人腿部运动的柔顺性也密切相关，当足端的运动存在由自由空间到约束空间的转换时，仅采用位置控制将无法满足腿部对运动柔顺性的要求。因此，对足式机器人足力控制的研究必不可少。本文将对四足机器人足力控制方法进行研究，并通过仿真手段进行必要的分析。</p></sec><sec id="s4"><title>2. 基于位置的阻抗控制建模与分析</title><sec id="s4_1"><title>2.1. 阻抗控制原理</title><p>机器人的阻抗控制方法最早由Hogan在1985年提出 [<xref ref-type="bibr" rid="hanspub.19277-ref1">1</xref>] 。这种方法的基本思想是，将机器人等效为“质量–弹簧–阻尼”系统，通过此模型建立机器人末端力和末端位置的关系，并通过调节控制器中的惯性、阻尼和刚度参数来调整机器人与环境接触时的动态特性。这种控制方法不是直接地控制机器人末端的接触力，而是通过阻抗模型，间接地通过控制位置来控制末端力。阻抗控制的目的可以表述为参照目标阻抗模型建立机器人末端位置和末端力的动态关系。</p><p>机器人末端所受的力与位置偏差之间的关系称为期望阻抗模型，该模型原则上可以是任意函数，但二阶微分方程形式较为常用 [<xref ref-type="bibr" rid="hanspub.19277-ref2">2</xref>] 。假定机器人在n(n运6)维空间内操作，X、X<sub>r</sub>和F分别为表示末端实际位置、末端期望位置和机器人末端作用力的n &#215; 1维列向量，常用的阻抗模型表达式有如下三种形式：</p><disp-formula id="hanspub.19277-formula16"><label>(1)</label><graphic position="anchor" xlink:href="http://html.hanspub.org/file/1-2650071x9_hanspub.png"  xlink:type="simple"/></disp-formula><disp-formula id="hanspub.19277-formula17"><label>(2)</label><graphic position="anchor" xlink:href="http://html.hanspub.org/file/1-2650071x10_hanspub.png"  xlink:type="simple"/></disp-formula><disp-formula id="hanspub.19277-formula18"><label>(3)</label><graphic position="anchor" xlink:href="http://html.hanspub.org/file/1-2650071x11_hanspub.png"  xlink:type="simple"/></disp-formula><p>其中，M<sub>d</sub>、B<sub>d</sub>和K<sub>d</sub>为3 &#215; 3对角阵，分别为期望惯性、期望阻尼和期望刚度值。为实现力跟踪，可将表示力参考值的n &#215; 1维列向量F<sub>r</sub>引入阻抗模型，使得目标阻抗演化为力偏差E = F<sub>r</sub>− F与X和X<sub>r</sub>之间的关系，那么阻抗模型表达式变为</p><disp-formula id="hanspub.19277-formula19"><label>(4)</label><graphic position="anchor" xlink:href="http://html.hanspub.org/file/1-2650071x12_hanspub.png"  xlink:type="simple"/></disp-formula><disp-formula id="hanspub.19277-formula20"><label>(5)</label><graphic position="anchor" xlink:href="http://html.hanspub.org/file/1-2650071x13_hanspub.png"  xlink:type="simple"/></disp-formula><disp-formula id="hanspub.19277-formula21"><label>(6)</label><graphic position="anchor" xlink:href="http://html.hanspub.org/file/1-2650071x14_hanspub.png"  xlink:type="simple"/></disp-formula><p>阻抗控制按照原理不同分为基于力的阻抗控制和基于位置的阻抗控制。实际应用中，由于难以对机器人的关节力矩进行精确控制，所以应用较为广泛的是基于位置的阻抗控制。这种控制结构由位置控制内环和阻抗控制外环构成，期望位置X<sub>r</sub>经过位置闭环后输出末端实际位置，在环境的作用下产生接触力F，这个力经过阻抗控制器后得到位置的修正量∆X，参考轨迹X<sub>r</sub>与∆X相加后作为内环的输入，影响机器人末端的实际位置，进而影响接触力。可以看出，位置控制器的响应速度和控制精度将对力控制效果有显著的影响。因此，对位置控制内环进行分析非常必要。</p></sec><sec id="s4_2"><title>2.2. 机器人腿部关节位置控制建模</title><p>随着电力电子技术和计算机技术的发展进步，交流伺服系统已经在高精度速度与位置控制场合占据相当的比例。在几种执行元件中，永磁同步电机(PMSM, Permanent Magnet Synchronous Motor)由于其具有效率高、结构简单和易于维护等特点得到了广泛应用，其组成的运动控制系统具有稳定裕度高且动态特性较好的特点。本文研究的机器人选用永磁同步电机作为执行元件。</p><p>永磁同步电机的运动控制系统是典型的位置、速度和电流三环调节系统。分析永磁同步电机时常采用dq坐标系下的数学模型，这种方法可以兼顾系统的稳态特性和动态特性分析 [<xref ref-type="bibr" rid="hanspub.19277-ref3">3</xref>] 。首先，做以下几点假定</p><p>(1) 不计铁心饱和及铁耗；</p><p>(2) 三相电流对称；</p><p>(3) 不计涡流和磁滞损耗；</p><p>(4) 转子无阻尼绕组，永磁体不计阻尼作用。可以得到dq坐标系下永磁同步电机的电压方程为：</p><disp-formula id="hanspub.19277-formula22"><label>(7)</label><graphic position="anchor" xlink:href="http://html.hanspub.org/file/1-2650071x15_hanspub.png"  xlink:type="simple"/></disp-formula><p>磁链方程为</p><disp-formula id="hanspub.19277-formula23"><label>(8)</label><graphic position="anchor" xlink:href="http://html.hanspub.org/file/1-2650071x16_hanspub.png"  xlink:type="simple"/></disp-formula><p>电磁转矩方程为</p><disp-formula id="hanspub.19277-formula24"><label>(9)</label><graphic position="anchor" xlink:href="http://html.hanspub.org/file/1-2650071x17_hanspub.png"  xlink:type="simple"/></disp-formula><p>力平衡方程为</p><disp-formula id="hanspub.19277-formula25"><label>(10)</label><graphic position="anchor" xlink:href="http://html.hanspub.org/file/1-2650071x18_hanspub.png"  xlink:type="simple"/></disp-formula><p>式中：<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2650071x19_hanspub.png" xlink:type="simple"/></inline-formula>——电机定子d轴、q轴电压；</p><p><inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2650071x20_hanspub.png" xlink:type="simple"/></inline-formula>——电机定子d轴、q轴电流；</p><p><inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2650071x21_hanspub.png" xlink:type="simple"/></inline-formula>——电机定子直轴、交轴磁链；</p><p><inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2650071x22_hanspub.png" xlink:type="simple"/></inline-formula>——电机定子绕组d轴、q轴电感；</p><p><inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2650071x23_hanspub.png" xlink:type="simple"/></inline-formula>——电机定子绕组电阻；</p><p><inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2650071x24_hanspub.png" xlink:type="simple"/></inline-formula>——永磁体基波磁场在定子绕组中产生的磁链；</p><p><inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2650071x25_hanspub.png" xlink:type="simple"/></inline-formula>——转矩常数；</p><p><inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2650071x26_hanspub.png" xlink:type="simple"/></inline-formula>——电机的电角速度和机械角速度；</p><p><inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2650071x27_hanspub.png" xlink:type="simple"/></inline-formula>——电机的等效惯性负载；</p><p><inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2650071x28_hanspub.png" xlink:type="simple"/></inline-formula>——电机的等效阻尼；</p><p><inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2650071x29_hanspub.png" xlink:type="simple"/></inline-formula>——电机的等效负载力矩。</p><p>对于面装式永磁同步电机，有：</p><disp-formula id="hanspub.19277-formula26"><label>(11)</label><graphic position="anchor" xlink:href="http://html.hanspub.org/file/1-2650071x30_hanspub.png"  xlink:type="simple"/></disp-formula><p>其中L为电机定子绕组电感。</p><p>在dq坐标系内通过控制矢量电流is的幅值和相位，可以控制电磁转矩，这等同于控制is的两个电流分量iq和i<sub>d</sub>。由电磁转矩方程式(4-9)可以看出，决定电磁转矩的是定子电流的q轴分量即iq。为简化控制方法，若采用d轴电流为零的控制方法，即：</p><disp-formula id="hanspub.19277-formula27"><label>(12)</label><graphic position="anchor" xlink:href="http://html.hanspub.org/file/1-2650071x31_hanspub.png"  xlink:type="simple"/></disp-formula><p>则定子电流全部用于产生电磁转矩，此时可将面装式永磁同步电机模型等效为他励直流电机模型。由式(7)至式(12)整理并进行Laplace变换可以得出永磁同步电机的数学模型为</p><disp-formula id="hanspub.19277-formula28"><label>(13)</label><graphic position="anchor" xlink:href="http://html.hanspub.org/file/1-2650071x32_hanspub.png"  xlink:type="simple"/></disp-formula></sec></sec><sec id="s5"><title>3. 阻抗控制器性能分析</title><p>阻抗控制的思想是将机器人等效为具有弹性、阻尼和惯性特性的系统，通过调整这三个特性参数来获得期望的阻抗或导纳特性，影响机器人与环境接触时的动态过程，进而间接地调整机器人与环境的接触力等指标。可以通过分别调整各个参数，获得控制器的输出特性，分析阻抗控制器各参数对机器人动态特性的影响。</p><sec id="s5_1"><title>3.1. 目标惯性的影响</title><p>令Bd= 200 N/(m/s)，Kd= 2500 N/m，Md的值在1 kg~9 kg之间变化，得到位置修正值的响应如图1所示。由图看出，目标惯性仅影响响应的动态过程，而不影响响应的稳态值。在超调产生之前，响应曲线的上升速度随目标惯性的增大略有减小，但调整时间逐渐变小；响应产生超调后，响应曲线的上升速度和调整时间均随着目标惯性的增大而增大。</p></sec><sec id="s5_2"><title>3.2. 目标阻尼的影响</title><p>令Md = 1 kg，Kd = 2500 N/m，Bd的值在30 N/(m/s)~200 N/(m/s)之间变化，得到位置修正值的响应如图2所示。由图看出，显然目标阻尼亦不影响应的稳态值，只对动态响应过程造成影响。随着目标阻尼的减小，响应曲线的上升速度逐渐变快，调整时间逐渐变小，且在阻尼减小到一定程度时产生超调。在实际应用中，应根据机器人工作任务的要求合理地调整目标阻尼值。</p></sec><sec id="s5_3"><title>3.3. 目标刚度的影响</title><p>令Md = 1 kg，Bd = 100 N/(m/s)，Kd的值在50 N/m~2500 N/m之间变化，得到位置修正值的响应如图3所示。可以看出，目标刚度对动态过程影响很微弱，主要影响响应的稳态值。随着Kd的增大，阻抗控制器的稳态输出值越来越小。从物理意义上讲，这相当于两个弹簧串联时相接点的位移随弹簧刚度变</p><p>图1. 目标惯性的影响</p><p>图2. 目标阻尼的影响</p><p>化而变化的过程，相接点必然向刚度减小的一方移动，以维持力平衡。</p></sec></sec><sec id="s6"><title>4. 基于阻抗控制的足力跟踪</title><sec id="s6_1"><title>4.1. 机器人腿部与地面接触等效模型</title><p>足端进入约束空间，即与地面接触后，足端与地面就组成了一个综合动态系统。本文采用柔性接触模型，将机器人与地面的接触模型简化为弹簧–阻尼系统。若只考虑机器人单腿沿竖直方向受力情况，可得到加入阻抗控制后的机器人单腿与地面的简化接触模型，如图4所示。其中<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2650071x35_hanspub.png" xlink:type="simple"/></inline-formula>、<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2650071x36_hanspub.png" xlink:type="simple"/></inline-formula>和<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2650071x37_hanspub.png" xlink:type="simple"/></inline-formula>分别为环境的刚度特性、阻尼特性和惯性特性，<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2650071x38_hanspub.png" xlink:type="simple"/></inline-formula>为机器人末端的期望位置，<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2650071x39_hanspub.png" xlink:type="simple"/></inline-formula>为机器人末端的实际位置，</p><p>图3. 目标刚度的影响</p><p>图4. 简化的腿与环境接触模型</p><p><inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2650071x42_hanspub.png" xlink:type="simple"/></inline-formula>为由于环境位置和机器人末端期望位置不同而产生的位置干扰，或理解为环境的微小形变量。</p><p>机器人末端与地面间的相互作用力可以用如下关系表示：</p><disp-formula id="hanspub.19277-formula29"><label>(14)</label><graphic position="anchor" xlink:href="http://html.hanspub.org/file/1-2650071x43_hanspub.png"  xlink:type="simple"/></disp-formula><p>式中，<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2650071x44_hanspub.png" xlink:type="simple"/></inline-formula>机器人末端与地面之间的接触力。实际运动时，由于机器人足端的运动速度和加速度都比较小，故可以认为<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2650071x45_hanspub.png" xlink:type="simple"/></inline-formula>，那么足端与环境的接触力模型可简化为:</p><disp-formula id="hanspub.19277-formula30"><label>(15)</label><graphic position="anchor" xlink:href="http://html.hanspub.org/file/1-2650071x46_hanspub.png"  xlink:type="simple"/></disp-formula><p>其中，X为机器人足端在全局坐标系下的位置，Xe 为全局坐标系下环境的位置。</p></sec><sec id="s6_2"><title>4.2. 阻抗控制下足力跟踪仿真研究</title><p>在该仿真模型的基础上，向机器人单腿运动控制系统中加入阻抗控制模型，即引入力闭环，可以实现对足力控制过程的仿真研究。控制系统中，选用如下阻抗模型：</p><disp-formula id="hanspub.19277-formula31"><label>(16)</label><graphic position="anchor" xlink:href="http://html.hanspub.org/file/1-2650071x47_hanspub.png"  xlink:type="simple"/></disp-formula><p>对本文研究的四足机器人而言，基于位置的单腿阻抗控制结构框图如图5所示。按图搭建机器人单腿阻抗控制仿真模型，并给定环境刚度为Ke= 50 N/mm，环境干扰为∆Xe= 1 mm，期望力为Fr= 100 N。可以得出在阻抗控制下两个步态周期内足端与地面接触力的变化情况，如图6所示。图中，实线为阻抗控制策略下足端接触力的变化情况，点划线为不采用控制策略时足端接触力的变化情况，虚线为接触力的参考值。机器人单腿在第6秒时开始摆动，在约第7秒时与地面产生接触，应用阻抗控制策略后，足端与地面接触力的峰值下降至不采用控制策略时足端接触力的90%，且在单腿支撑地面的过程中，接触力值逐渐</p><p>图5. 阻抗控制框图</p><p>图6. 阻抗控制下足端接触力变化</p><p>减小，并逐渐稳定在150 N，该稳态值约为无控制策略时的75%。接触力的稳态误差为<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2650071x50_hanspub.png" xlink:type="simple"/></inline-formula>。</p><p>上述现象说明，通过选用合适的目标阻抗模型，基于位置的阻抗控制的确能够对参考力进行跟踪，并有效地减弱足端与环境接触时的力冲击。但是，单纯采用阻抗控制进行足力跟踪的控制系统存在稳态误差。</p></sec></sec><sec id="s7"><title>5. 结论</title><p>本文建立了基于位置的机器人单腿阻抗控制模型，完成了腿部关节的位置控制建模，并对阻抗控制器性能进行了分析。在建立了机器人腿部与地面接触等效模型的基础上，采用阻抗控制方法对机器人行走过程中足力进行控制，还完成了仿真分析。</p></sec><sec id="s8"><title>基金项目</title><p>国家科技支撑计划, 2013BAH57F00。</p></sec><sec id="s9"><title>文章引用</title><p>丁庆鹏,袁立鹏,欧阳荣坚. 基于阻抗控制的四足机器人足力控制研究Research on Foot Force Control of Quadruped Robot Based on Impedance Control[J]. 力学研究, 2016, 05(04): 121-128. http://dx.doi.org/10.12677/IJM.2016.54011</p></sec><sec id="s10"><title>参考文献 (References)</title></sec></body><back><ref-list><title>References</title><ref id="hanspub.19277-ref1"><label>1</label><mixed-citation publication-type="other" xlink:type="simple">Hogan, N. (1985) Impedance Control—An Approach to Manipulation. I—Theory. II—Implementation. III—Applica- tions. Journal of Dynamic Systems Measurement and Control, 107, 1-24. &lt;br&gt;https://doi.org/10.1115/1.3140702</mixed-citation></ref><ref id="hanspub.19277-ref2"><label>2</label><mixed-citation publication-type="other" xlink:type="simple">李正义. 机器人与环境间力/位置控制技术研究与应用[D]: [华中科技大学]. 武汉: 华中科技大学, 2011: 59-64.</mixed-citation></ref><ref id="hanspub.19277-ref3"><label>3</label><mixed-citation publication-type="other" xlink:type="simple">王莉娜, 朱鸿悦, 杨宗军. 永磁同步电动机调速系统PI控制器参数整定方法[J]. 电工技术学报, 2014, 29(5): 104-117.</mixed-citation></ref></ref-list></back></article>