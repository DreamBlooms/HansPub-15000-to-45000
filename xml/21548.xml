<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE article  PUBLIC "-//NLM//DTD Journal Publishing DTD v3.0 20080202//EN" "http://dtd.nlm.nih.gov/publishing/3.0/journalpublishing3.dtd"><article xmlns:mml="http://www.w3.org/1998/Math/MathML" xmlns:xlink="http://www.w3.org/1999/xlink" dtd-version="3.0" xml:lang="en" article-type="research article"><front><journal-meta><journal-id journal-id-type="publisher-id">AIRR</journal-id><journal-title-group><journal-title>Artificial Intelligence and Robotics Research</journal-title></journal-title-group><issn pub-type="epub">2326-3415</issn><publisher><publisher-name>Scientific Research Publishing</publisher-name></publisher></journal-meta><article-meta><article-id pub-id-type="doi">10.12677/AIRR.2017.63009</article-id><article-id pub-id-type="publisher-id">AIRR-21548</article-id><article-categories><subj-group subj-group-type="heading"><subject>AIRR20170300000_36057424.pdf</subject></subj-group><subj-group subj-group-type="Discipline-v2"><subject>信息通讯</subject><subject> 工程技术</subject></subj-group></article-categories><title-group><article-title>
 
 
  基于主动视觉定位的多自由度机械手臂控制研究
  A Multi-Degree of Freedom Manipulator Based on Active Vision Positioning
 
</article-title></title-group><contrib-group><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>蔡</surname><given-names>剑锋</given-names></name><xref ref-type="aff" rid="aff1"><sup>1</sup></xref><xref ref-type="corresp" rid="cor1"><sup>*</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>明</surname><given-names>兴莹</given-names></name><xref ref-type="aff" rid="aff1"><sup>1</sup></xref><xref ref-type="aff" rid="aff2"><sup>2</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>李</surname><given-names>杰</given-names></name><xref ref-type="aff" rid="aff1"><sup>1</sup></xref><xref ref-type="aff" rid="aff2"><sup>2</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>王</surname><given-names>辛月</given-names></name><xref ref-type="aff" rid="aff1"><sup>1</sup></xref><xref ref-type="aff" rid="aff2"><sup>2</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>谭</surname><given-names>文婷</given-names></name><xref ref-type="aff" rid="aff1"><sup>1</sup></xref><xref ref-type="aff" rid="aff2"><sup>2</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>袁</surname><given-names>海云</given-names></name><xref ref-type="aff" rid="aff1"><sup>1</sup></xref><xref ref-type="aff" rid="aff2"><sup>2</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>胡</surname><given-names>诗琴</given-names></name><xref ref-type="aff" rid="aff1"><sup>1</sup></xref><xref ref-type="aff" rid="aff2"><sup>2</sup></xref></contrib></contrib-group><aff id="aff1"><addr-line>西南石油大学电气信息学院，四川 成都</addr-line></aff><aff id="aff2"><addr-line>null</addr-line></aff><author-notes><corresp id="cor1">* E-mail:<email>645595514@qq.com(蔡剑)</email>;</corresp></author-notes><pub-date pub-type="epub"><day>31</day><month>07</month><year>2017</year></pub-date><volume>06</volume><issue>03</issue><fpage>75</fpage><lpage>90</lpage><permissions><copyright-statement>&#169; Copyright  2014 by authors and Scientific Research Publishing Inc. </copyright-statement><copyright-year>2014</copyright-year><license><license-p>This work is licensed under the Creative Commons Attribution International License (CC BY). http://creativecommons.org/licenses/by/4.0/</license-p></license></permissions><abstract><p>
 
 
   
   本文介绍的机械臂是一种介于第二代与第三代机械臂之间的机械臂，采用模糊控制器，利用模糊控制不依赖于对象模型、响应速度快和鲁棒性强的优点实现机械臂控制更准确、稳定，实现自动取物，放物等功能。通过具体建立一个主动机器视觉定位系统，适用于工业机器人对零件工位的精确定位。采用基于区域的匹配和形状特征识别相结合的图像处理方法，能够快速准确地得到物体的边界和质心，进行数据识别和计算，再结合机器人运动学原理控制机器人实时运动以消除此误差，满足工业机器人自定位的要求。 Mechanical arm introduced in this paper is a mechanical arm between the second generation and the third generation of the manipulator. The advantages of fuzzy control does not depending on the object model, fast response and strong robustness help mechanical arm to achieve controlling more accurately and stably, fetching automatically, putting objects, and other functions. This paper es-tablishes an active machine vision positioning system, which is used for the precision orientation of the parts. Based on matching of area and shape feature recognition with the combination of image processing method, it can rapidly and accurately get the boundary of the object and the center of mass, which is used to identify the data and calculation. Combined with the principle of robot kinematics to control the real-time movement of the robot and eliminate this error, to meet the requirements of industrial robot self-positioning. 
  
 
</p></abstract><kwd-group><kwd>模糊控制器，视觉定位系统，实时运动, Fuzzy Manipulator</kwd><kwd> Visual Positioning System</kwd><kwd> Real-Time Motion</kwd></kwd-group></article-meta></front><body><sec id="s1"><title>基于主动视觉定位的多自由度机械手臂控制研究<sup> </sup></title><p>蔡剑锋<sup>*</sup>，明兴莹，李杰，王辛月，谭文婷，袁海云，胡诗琴</p><p>西南石油大学电气信息学院，四川 成都</p><disp-formula id="hanspub.21548-formula6"><graphic xlink:href="http://html.hanspub.org/file/1-2610096x5_hanspub.png"  xlink:type="simple"/></disp-formula><p>收稿日期：2017年7月17日；录用日期：2017年7月28日；发布日期：2017年7月31日</p><disp-formula id="hanspub.21548-formula7"><graphic xlink:href="http://html.hanspub.org/file/1-2610096x6_hanspub.png"  xlink:type="simple"/></disp-formula></sec><sec id="s2"><title>摘 要</title><p>本文介绍的机械臂是一种介于第二代与第三代机械臂之间的机械臂，采用模糊控制器 [<xref ref-type="bibr" rid="hanspub.21548-ref1">1</xref>] ，利用模糊控制不依赖于对象模型、响应速度快和鲁棒性 [<xref ref-type="bibr" rid="hanspub.21548-ref2">2</xref>] 强的优点实现机械臂控制更准确、稳定，实现自动取物，放物等功能。通过具体建立一个主动机器视觉定位系统，适用于工业机器人对零件工位的精确定位。采用基于区域的匹配和形状特征识别相结合的图像处理方法，能够快速准确地得到物体的边界和质心，进行数据识别和计算，再结合机器人运动学原理控制机器人实时运动以消除此误差，满足工业机器人自定位的要求。</p><p>关键词 :模糊控制器 [<xref ref-type="bibr" rid="hanspub.21548-ref3">3</xref>] ，视觉定位系统，实时运动</p><disp-formula id="hanspub.21548-formula8"><graphic xlink:href="http://html.hanspub.org/file/1-2610096x7_hanspub.png"  xlink:type="simple"/></disp-formula><p>Copyright &#169; 2017 by authors and Hans Publishers Inc.</p><p>This work is licensed under the Creative Commons Attribution International License (CC BY).</p><p>http://creativecommons.org/licenses/by/4.0/</p><p><img src="http://image.hanspub.org:8080\Html/htmlimages\1-2890033x\e70a10f1-7c93-45ea-9603-062237856e4b.png" /><img src="http://image.hanspub.org:8080\Html\htmlimages\1-2890033x\e898c85e-ffc4-45c9-b817-14224a4d6960.png" /></p></sec><sec id="s3"><title>1. 绪论</title><p>机器人是典型的机电一体化设备，不仅在制造业、农业、医疗、海洋开发、航天工程等方面得到了越来越广泛的应用，而且已经渗透到人们生活的各个方面，随着工业机器人向更深更层次的发展以及机器人智能化水平的逐渐提高，机器人的应用范围还在不断地扩大。国内外专家预测机器人产业将是继汽车、计算机之后出现的新型高技术产业。在这样的背景下，机器人技术与相关方面的人才的需求也在迅速增加，各高校也相应加大了对机器人技术人才的培养力度。</p><p>为了促进我国在该领域相关行业的发展需求，培养机器人的设计、研发、生产等方面的人才，很多高等院校已经开设机器人学课程。但关于该课程的实践教学手段并不是很成熟，有些院校购买国内外较成熟的工业产品用于实践教学，但是并不具备开放性，学生无法更深入地了解其内部构造以及信息流的控制过程。</p><p>本课题的主要研究目的是将多自由度开放式机械手臂、模糊控制器及主动视觉系统有机结合，尝试设计出一种智能化、自动化程度较高且具有一定环境适应能力的智能化机械手臂，研究相关模糊控制算法，实现机械手臂在不同环境下的自动识物、取物及运移，并可与智能小车结合实现更广泛的应用。与此同时，该系统也构成一套开放式运动控制实验平台，与单片机原理、嵌入式技术、运动控制、模糊控制等紧密衔接，有利于深入地了解其内部构造以及信息流的控制过程，因此具有较好的推广应用价值。</p></sec><sec id="s4"><title>2. 视觉系统模型研究</title><p>本题目建立了一个主动机器视觉定位系统，用于工业机器人对零件工位的精确定位。采用基于区域的匹配和形状特征识别相结合的图像处理方法，该方法经过阈值和形状判据，识别出物体特征，能够快速准确地得到物体的边界和质心，进行数据识别和计算，再结合机器人运动学原理控制机器人实时运动以消除此误差，满足工业机器人自定位的要求。</p><sec id="s4_1"><title>2.1. 基于位置的视觉伺服系统</title><p>采用基于位置的视觉伺服控制结构。使用CCD摄像机和USB连接线，将视频信号输入计算机，并对其快速处理。首先从图像中提取图像特征，然后利用图像特征与目标的几何模型、摄像机模型来确定所求目标并估计目标与摄像机的相对位置；目标与摄像机相对位置的估计量与其期望值相比较后，产生的位置误差量送入笛卡尔坐标控制模块 [<xref ref-type="bibr" rid="hanspub.21548-ref4">4</xref>] 。基于位置的视觉伺服系统控制结构见图1。</p><p>摄像头与目标的相对位置是通过机械手末端坐标与固定坐标系的关系矩阵T (T已知)间接获得。基于位置的视觉伺服系统在实际应用中较为便利。</p><p>本设计中机器人视觉定位系统功能模块图如图2所示，在关节型机器人末端安装单个摄像机，使工件能完全出现在摄像机的图像中。系统包括摄像机系统和控制系统：</p><p>1) 摄像机系统：由单个摄像机和计算机(包括图像采集卡)组成，负责视觉图像的采集和机器视觉算法；</p><p>2) 控制系统：由计算机和控制箱组成，用来控制机器人末端的实际位置；经CCD摄像机对工作区进行拍摄，计算机通过本文使用的图像识别方法，提取跟踪特征，进行数据识别和计算，通过逆运动学求解得到机器人各关节位置误差值，最后控制高精度的末端执行机构，调整机器人的位姿。</p></sec><sec id="s4_2"><title>2.2. 基于位置的视觉伺服系统硬件设计</title><sec id="s4_2_1"><title>2.2.1. 工业摄像头</title><p>本次课题选用的工业摄像机是USB2.0接口的MindVision CMOS相机，支持二次开发。工业摄相机提供了提供丰富的图像处理接口，算法关键部分采用了硬件加速功能，在有效的提升图像质量的同时降低CPU占用率，具体参数及实物图如图3、表1。</p><p>图1. 基于位置的视觉伺服控制结构框图</p><p>图2. 机器人视觉定位系统功能模块图</p><p>图3. 工业摄像机实物图</p><table-wrap id="table1" ><label><xref ref-type="table" rid="table1">Table 1</xref></label><caption><title> Industrial camera paramete</title></caption><table><tbody><thead><tr><th align="center" valign="middle" >焦距</th><th align="center" valign="middle" >6~12 mm</th></tr></thead><tr><td align="center" valign="middle" >通光口径</td><td align="center" valign="middle" >F1.6</td></tr><tr><td align="center" valign="middle" >靶面尺寸</td><td align="center" valign="middle" >1/2‘’</td></tr><tr><td align="center" valign="middle" >接口</td><td align="center" valign="middle" >CS</td></tr><tr><td align="center" valign="middle" >水平视场角</td><td align="center" valign="middle" >53˚~28˚</td></tr><tr><td align="center" valign="middle" >变焦</td><td align="center" valign="middle" >手动</td></tr><tr><td align="center" valign="middle" >聚焦</td><td align="center" valign="middle" >手动</td></tr><tr><td align="center" valign="middle" >光圈</td><td align="center" valign="middle" >手动</td></tr><tr><td align="center" valign="middle" >最小物距</td><td align="center" valign="middle" >0.2 m</td></tr><tr><td align="center" valign="middle" >最远物距</td><td align="center" valign="middle" >20 m</td></tr><tr><td align="center" valign="middle" >尺寸</td><td align="center" valign="middle" >ψ32 &#215; 45</td></tr><tr><td align="center" valign="middle" >净重</td><td align="center" valign="middle" >78 g</td></tr><tr><td align="center" valign="middle" >有效操作温度</td><td align="center" valign="middle" >负20˚C ~正60˚C</td></tr></tbody></table></table-wrap><p>表1. 工业摄像机参数</p></sec><sec id="s4_2_2"><title>2.2.2. 摄像机支架</title><p>摄像机支架主要实现支撑、稳定工业摄像机，协助工业摄像机完成实时采集的作用，以便摄像机在实时采集时更加稳定，考虑到所需支架对强度的要求不是很高，并且资金也并不是很宽裕，所以便采用实验室木板自己简单设计加工了两个木质支架，分别协助工业摄像机完成俯拍和侧拍任务 [<xref ref-type="bibr" rid="hanspub.21548-ref5">5</xref>] ，实物图4、图5。</p></sec><sec id="s4_2_3"><title>2.2.3. 机械手臂</title><p>本次研究采用基于成型的多自由度机械臂平台设计模糊控制器，并结合PC机实现对机械臂的控制，如图6、图7所示。</p><p>机械臂一种是模拟手臂功能的机械结构。多关节机械臂是最接近人类手臂的结构。它由许多接头组成，一系列刚性机构通过一系列柔性接头连接成的开链结构，具有接受指令，精准地定位到三维(或二维)空间上的具体某一点进行作业的功能。每个关节通过舵机驱动。各种较为复杂的操作可由不同的关节驱动组合而成。这些连杆就好比人的骨架，分别类似于胸、腹和颈，而关节相当于人体的各种如肘关节、</p><p>图4. 俯视图支架</p><p>图5. 侧视图支架</p><p>图6. 机械臂实物图</p><p>图7. 51主控板</p><p>膝关节和腕关节 [<xref ref-type="bibr" rid="hanspub.21548-ref6">6</xref>] 。机械臂的最前端装有手爪型的末端执行器，手爪类似一个夹子可以进行“开”与“合”，实现抓取动作和细微操作。手臂的动作幅度一般较大，通常进行宏操作，机械臂模型如图8所示。</p><p>每一个关节的运动由舵机控制，旋转的角度有电平脉冲宽度控制，从而实现每一个具体转动角度，如图9。</p><p>图8. 机械臂结构设计图</p><p>图9. 脉冲宽度与舵机旋转角度关系图</p></sec></sec><sec id="s4_3"><title>2.3. 基于位置的视觉伺服系统软件设计</title><p>使用HALCON [<xref ref-type="bibr" rid="hanspub.21548-ref5">5</xref>] 软件进行机器人手眼标定目的是为了得到机器人基准坐标系相对于摄像头坐标系的位姿。该位姿参数的精确性也会直接影响到机械手对目标点的定位精度。</p><p>在进行手眼系统的标定时，必须提供标定板中所有黑色圆点的三维坐标值及其对应的图像像素值。在每幅标定图像中，还必须提供黑色圆点的三维坐标值，对应的像素值以及三维点的个数。</p><p>由于本设计只使用了单个相机，在未知目标工件三维模型的情况下，无法获取目标物体在相机光轴方向上的深度信息。这就需要在此引入参考坐标系，且让该参考坐标系与目标物体的坐标系是处在同一个平面上。这样就能通过标准的标定板信息引入所需的深度信息。</p><p>对含有目标物体的图像，首先将其进行灰度 [<xref ref-type="bibr" rid="hanspub.21548-ref7">7</xref>] 化处理，然后选取可抓取的区域范围，再进行阈值化处理，最后进行区域填充与形状选择，从而得到目标物体。得到目标物体后进行简单的blob分析，其边界就被转化为XLD轮廓。在提取出边界轮廓之后，寻找其中长直的平行边从而就可以得到四个端点，那么，抓取点就在各端点的中央位置。</p><sec id="s4_3_1"><title>2.3.1. 目标物形状识别模块</title><p>目标物形状识别模块主要完成的功能是实现机器人对简单几何形状目标物的识别，例如，在二维图像中辨别正方形，三角形或者圆形等，在采集三维空间立体几何模型图片后识别正方体，圆柱体或球等。程序流程图如图10。</p></sec><sec id="s4_3_2"><title>2.3.2. 目标物颜色识别模块</title><p>目标物颜色识别模块主要完成的功能是实现机器人对目标物基本颜色的识别，程序流程图见图11。</p></sec><sec id="s4_3_3"><title>2.3.3. 目标物大小识别模块</title><p>目标物大小识别模块主要完成的功能是实现机器人对目标物尺寸的识别，程序很容易实现求得目标物的面积大小，在识别图形的基础之上便很容易求出几何目标物的基本参数，程序流程图如图12。</p></sec><sec id="s4_3_4"><title>2.3.4. 机器视觉控制机械手臂的抓取目标物</title><p>在后期机器视觉系统与机械臂相结合时，机械手臂的控制是采用的模糊控制，需要视觉系统实时发送机械臂末端坐标以便控制器下达下一步的指令，程序流程图见图13。</p></sec></sec></sec><sec id="s5"><title>3. 机械手臂模糊控制系统研究</title><sec id="s5_1"><title>3.1. 系统组成</title><p>整个机械臂模糊控制研究系统由硬件和软件两部分组成，硬件包括多自由度机械臂和上位机。本文提出的机械臂控制方案是以视觉定位与模糊控制相结合的一种机械手臂控制方案。在机械臂控制过程中，通过视频采集装置获得机械手的精确位置，并将获取的机械手的坐标信息与由机械手计算的初始坐标信息进行比较，获得机械手的角度差。模糊控制器以角度差和差值变化率作为输入信号运算得出输出控制信号，实现对机械手臂运动的微调。机械臂的整个控制系统构成闭环系统，以实现调节运动过程的不断反馈。根据实践需要，系统内部包括通信模块、界面显示模块、模糊控制模块、数据读取模块和运算模块等部分组成，如图14所示。</p><p>从图中可以看出，系统是通过在固定位置安装摄像机，通过摄像头实时获取机械臂运动过程的视频图像信息，对视频图像的进行分析处理，实现机械臂手爪运动位置的精确定位。运动过程中产生的与理论的运动轨迹之间的差值被发送到模糊控制器，模糊控制器根据预设的模糊控制规则对机械臂轨迹进行模糊控制输出，将控制结果发送到机械手的运动驱动装置中，调整机械手的运动角度，改变机械臂的轨迹路径，使得机械手到达预定目标位置。因此基于视频图像的采集，分析和处理是设计模糊控制系统实现机器人运动的精确控制的先决条件。系统的具体运行步骤如下：</p><p>第一步：正确摆放目标物、机械臂和摄像机，将机械臂位置进行初始化，启动摄像机对机械臂爪子与目标物实时定位。</p><p>第二步：利用机械臂控制系统内部编写的运算模块，计算从起始位置坐标到运动目标位置坐标之间</p><p>图10. 形状识别流程图</p><p>图11. 颜色识别流程图</p><p>图12. 大小识别流程图</p><p>图13. 机器视觉结合机械手臂流程图</p><p>图14. 机械手控制系统总体组成结构图</p><p>的关节角度及角度差，给出机械臂在运动过程中各运动关节的实时控制信号，以及关节到达指定目标位置时，其各个关节节点的最终状态值，如各个关节的运动角度等信息。</p><p>第三步：机械臂运动控制系统计算机械臂各个关节节点在不同时刻的角度及角度变化率信息，输入到机械臂模糊控制器，通过模糊控制器输出机械臂的运动控制信息，控制机械臂运动。</p><p>第四步：机械臂运动控制信号驱动机械臂持续运动，根据摄像机不断反馈的位置信息对机械手的运动过程进行监控并对机械臂的发出调整信号。当机械手运动达到指定的目标位置时，由摄像机获取机械臂爪子坐标，根据此坐标计算出各主要关节点角度信息与预先计算的角度信息进行比对，如果二者之间的差值小于预先设定的范围，则机械臂停止运动，完成机械手运动过程的控制任务。</p></sec><sec id="s5_2"><title>3.2. 模糊控制模块</title><p>本文中的模糊控制模块主要实现对输入的变量进行模糊运算得到输出结果的功能。模糊控制模块的内容主要有建立输入和输出的模糊集，定义输入输出变量和制定模糊控制规则。功能是对输入的变量进行模糊化和模糊运算，最终得到输出变量控制机械臂。</p><p>本文研究分别运用了一个云台模糊控制器和三个关节模糊控制器，总体设计思路如下：</p><p>1) 模糊化接口</p><p>模糊化 [<xref ref-type="bibr" rid="hanspub.21548-ref8">8</xref>] 是通过在控制器的输入和输出量上定义语言变量将精确的输入和输出值转换为模糊语言值。模糊化的设计过程实际上是定义语言变量的过程。本文中，机械臂云台模糊控制器中将云台角度与目标角度的角度差及角度差值变化率作为输入量，机械臂的关节模糊控制器将关节现在角度与预设角度的角度差和差值变化率分别作为输入量，进行模糊化。</p><p>① 确定语言变量。针对模糊控制器的每个输入、输出量，各自定义一个语言变量。因为对机械臂控制输出的判断，往往不仅根据角度的变化，而且还根据角度的变化率来进行综合评判。所以，在机械臂的模糊控制器设计中，取机械臂角度与目标角度的角度差Ɵ及角度差值变化率ΔƟ为模糊控制器的两个输入，则在Ɵ的论域上定义语言变量“角度Ɵ”，在ΔƟ的论域上定义语言变量“角度变化率ΔƟ”；在输出控制量angle的论域上定义语言变量“角度angle”。</p><p>② 设计语言变量论域。在定义了语言变量的个数和名称之后，接下来要定义的是各语言变量的论域。模糊控制系统进行在线运行时，为了提高运算速度，模糊控制器常常以模糊控制查询表的形式出现。该表反映了通过模糊控制算法获得的在给定离散点处的模糊控制器输入和输出值的对应的关系。为了方便生成控制查询表，在模糊控制器的设计中，语言变量的域通常定义为有限的离散整数。本文中机械臂云台控制器的论域分别为Ɵ[−180,180]，ΔƟ[−180,180]，angle[−180,180]。机械臂的关节控制器的论域分别为Ɵ1[−90,90]，ΔƟ1[−90,90]，angle1[−90,90]。</p><p>③ 定义各语言变量的语言值。在语言变量的论域上，可将Ɵ、ΔƟ和angle划分为{“正大(PB)”，“正中(PM)”，“正小(PS)”，“零(ZO)”，“负小(NS)”，“负中(NM)”，“负大(NB)”}七档。选择更多的“档”，“级别”，即对于每个变量进行更多状态的描述，制定规则时回更加灵活详细，但相应的规则也将变得越来越复杂。选择较少“档”，“级别”，规则相应较少，实现方便，但会使控制效果无法达到预期效果，因此在选择模糊级别时要同事兼顾规则简单和控制效果。</p><p>④ 定义各语言值的隶属函数 [<xref ref-type="bibr" rid="hanspub.21548-ref9">9</xref>] 。隶属函数的类型通常有：正态分布型(例如高斯基函数)、三角型和梯型。确定模糊语言变量的隶属函数时需要考虑隶属函数曲线形状对控制性能的影响和隶属函数曲线的分布对控制性能的影响。本文采用三角形隶属函数，如图15所示。</p><p>经过以上四步的定义后，精确的模糊控制器输入、输出论域值就可以用模糊的语言值来描述了。</p><p>2) 规则库</p><p>规则库由一系列基于专家经验得出的控制规则组成，按照“IF…is…AND…is…THEN…is…”的</p><p>图15. 三角形隶属度函数</p><p>形式表达。规则库也可以用矩阵表的形式进行描述。</p><p>3) 模糊推理</p><p>模糊推理是一种近似推理，模糊推理是模糊决策的基础，是形成模糊控制的前提。模糊控制器将实际输入的模糊取值根据控制规则中的输入输出模糊关系，通过模糊推理，得到输出的模糊状态。</p><p>4) 清晰化接口</p><p>模糊控制系统输出给执行机构的信号是精确值，所以要将模糊推理得到的模糊输出值转化为精确控制量，才能施加于被控对象。本文中采用加权平均法进行模糊输出值的清晰化。</p><p>经过模糊化接口、规则库、模糊推理、清晰化接口的设计，一个完整的模糊控制器就构建成功了。本文模糊控制规则以模糊控制表的形式表示，如表2所示。</p></sec><sec id="s5_3"><title>3.3. 通信模块</title><p>通信模块包括上位机与摄像设备间的通信以及上位机与机械臂之间的通信。上位机与摄像设备间的通信：将摄像机获取的机械臂与目标物位置信息存入TEXT文档，再由上位机程序读取此文档，得到机械臂控制程序的输入量。上位机与机械臂通信：用C#编写串口程序，包括端口选择，波特率选择，数据接收，机械臂初始化，复位和发送控制指令等功能。</p></sec><sec id="s5_4"><title>3.4. 界面显示模块</title><p>界面显示模块包括端口设置、接收数据窗口、测试窗口以及各种功能按钮，如图16。</p></sec></sec><sec id="s6"><title>4. 模糊控制与视觉结合运行调试</title><p>将摄像机固定地安装在机器人工作空间的某个位置，如正上方或斜侧方等，可获得固定的图像分辨率，并可同时获取有关机器人及其周围环境的图像信息，便于将视觉系统集成到控制中。机器人通过摄像机拍摄目标小球的图像，并提取其特征(目标小球在图像2D坐标中的横坐标x，纵坐标y和小球半径r)来构成位置闭环。模糊视觉控制器根据图像特征的误差根据模糊控制规则得到机器人三个关节位置的期望变化率。机械臂位置伺服控制器再根据这些变化率来控制机械臂各关节运动，使机械臂末端手爪朝着目标运动。</p><sec id="s6_1"><title>4.1. 测试方法</title><p>本次研究的调试分为两个大的步骤，一是与视觉结合之前，通过手动输入坐标值进行系统调试。二是与视觉结合后通过自动获取坐标值进行调试。</p><table-wrap id="table2" ><label><xref ref-type="table" rid="table2">Table 2</xref></label><caption><title> Fuzzy control table [10</title></caption><table><tbody><thead><tr><th align="center" valign="middle" ></th><th align="center" valign="middle" >NB</th><th align="center" valign="middle" >NM</th><th align="center" valign="middle" >NS</th><th align="center" valign="middle" >ZO</th><th align="center" valign="middle" >PS</th><th align="center" valign="middle" >PM</th><th align="center" valign="middle" >PB</th></tr></thead><tr><td align="center" valign="middle" >NB</td><td align="center" valign="middle" >NB</td><td align="center" valign="middle" >NB</td><td align="center" valign="middle" >NB</td><td align="center" valign="middle" >NM</td><td align="center" valign="middle" >NM</td><td align="center" valign="middle" >NS</td><td align="center" valign="middle" >NS</td></tr><tr><td align="center" valign="middle" >NM</td><td align="center" valign="middle" >NM</td><td align="center" valign="middle" >NM</td><td align="center" valign="middle" >NM</td><td align="center" valign="middle" >NM</td><td align="center" valign="middle" >NS</td><td align="center" valign="middle" >NM</td><td align="center" valign="middle" >ZO</td></tr><tr><td align="center" valign="middle" >NS</td><td align="center" valign="middle" >NM</td><td align="center" valign="middle" >NM</td><td align="center" valign="middle" >NS</td><td align="center" valign="middle" >NS</td><td align="center" valign="middle" >ZO</td><td align="center" valign="middle" >ZO</td><td align="center" valign="middle" >ZO</td></tr><tr><td align="center" valign="middle" >ZO</td><td align="center" valign="middle" >NM</td><td align="center" valign="middle" >NS</td><td align="center" valign="middle" >NS</td><td align="center" valign="middle" >NS</td><td align="center" valign="middle" >PM</td><td align="center" valign="middle" >ZO</td><td align="center" valign="middle" >PS</td></tr><tr><td align="center" valign="middle" >PS</td><td align="center" valign="middle" >NS</td><td align="center" valign="middle" >NS</td><td align="center" valign="middle" >ZO</td><td align="center" valign="middle" >ZO</td><td align="center" valign="middle" >PM</td><td align="center" valign="middle" >PS</td><td align="center" valign="middle" >PM</td></tr><tr><td align="center" valign="middle" >PM</td><td align="center" valign="middle" >NS</td><td align="center" valign="middle" >ZO</td><td align="center" valign="middle" >ZO</td><td align="center" valign="middle" >ZO</td><td align="center" valign="middle" >PS</td><td align="center" valign="middle" >PS</td><td align="center" valign="middle" >PM</td></tr><tr><td align="center" valign="middle" >PB</td><td align="center" valign="middle" >ZO</td><td align="center" valign="middle" >ZO</td><td align="center" valign="middle" >PS</td><td align="center" valign="middle" >PS</td><td align="center" valign="middle" >PS</td><td align="center" valign="middle" >PM</td><td align="center" valign="middle" >PB</td></tr></tbody></table></table-wrap><p>表2. 模糊控制表 [<xref ref-type="bibr" rid="hanspub.21548-ref10">10</xref>]</p><p>图16. 界面显示模块</p><p>1) 手动输入坐标值</p><p>放置机械臂与目标物，确定坐标系，通过C#的文本框分别输入机械臂爪子和目标物的坐标值，机械臂运动停止后再次输入当前位置坐标，直到机械臂完成指定任务，以此测试模糊控制器的设计、程序运算过程的编写是否合理。具体测试如图17所示。</p><p>在测试过程中发现，机械臂运动偏差很大，通过不断调整模糊集依然无法解决，最终发现是由于没有正确编写闭环控制程序，导致系统并没有构成闭环系统，经过不断修改程序该问题得到解决。</p><p>2) 自动获取坐标值</p><p>放置正确机械臂、目标物以及摄像机位置，打开机械臂复位，打开机械臂和摄像机的上位机控制软件，连接蓝牙，打开串口，点击“图像初始化”和“实时采集”按钮，通过测试与调试确保机械臂与摄像机的坐标系重合。摄像机实时获取目标物与机械臂爪子的坐标，存放在TEXT中，通过机械臂上位机软件实时读取坐标，输入程序进行运算进而控制机械臂运动。在这个过程中，需要不断调整摄像机与机械臂的位置使坐标重合，如图18、图19。</p></sec><sec id="s6_2"><title>4.2. 机器视觉结合机械臂的调试</title><p>在自动获取坐标值调试的过程中，出现了机械臂单步调试正常，连续调试无法实现控制的情况，经过检查发现，摄像机实时获取坐标的频率过低，无法跟上机械臂的运动速度，导致无法准确控制机械臂。在一开始的运算控制程序中，直接根据模糊控制器输出的角度值换算成代码 [<xref ref-type="bibr" rid="hanspub.21548-ref6">6</xref>] 控制机械臂关节运动，由于每个代码代表机械臂关节的一个固定位置，导致运行时机械臂大幅度摆动 [<xref ref-type="bibr" rid="hanspub.21548-ref11">11</xref>] ，没有得到有效控制。后来将大的角度分解成数个小角度后依次输出，使机械臂实现平稳运动，如图20、图21。</p><p>图17. 手动输入坐标值测试</p><p>图18. 机械臂控制界面</p><p>图19. 机器视觉结合机械臂视觉窗口 [<xref ref-type="bibr" rid="hanspub.21548-ref12">12</xref>]</p><p>图20. 目标物和机械手臂末端坐标示例图 [<xref ref-type="bibr" rid="hanspub.21548-ref13">13</xref>]</p><p>图21. 目标物和机械手臂末端坐标示例图 [<xref ref-type="bibr" rid="hanspub.21548-ref14">14</xref>]</p></sec></sec><sec id="s7"><title>5. 总结</title><p>本文进行了结合视觉伺服的机械手臂模糊控制研究，应用模糊控制理论 [<xref ref-type="bibr" rid="hanspub.21548-ref15">15</xref>] ，利用C#编写上位机控制程序，包括模糊控制器、人机界面和运算程序等，实现了机械臂的自动取物放物的功能。</p><p>在本次研究中，首先遇到的一个问题就是C#语言的学习使用，由于以前没有接触过，所以在最初的学习中走了很多弯路。经过多种途径的学习，对Visual Studio [<xref ref-type="bibr" rid="hanspub.21548-ref16">16</xref>] 的使用有了一定了解，后续的编程过程才得以进行。接下来的软件设计过程，首先将模糊控制理论与C#结合，了解C#中的每条语句所代表的有关模糊理论的含义，设计模糊控制器。由于没有准确找到问题所在，在调试过程中模糊控制器参数的设定上花费了大量时间。</p><p>在编写机械臂运算控制程序时，由于编写错误导致系统并没有构成反馈。导致调试结果始终不尽如人意。后续与视觉伺服结合时，存在摄像机与机械臂坐标系不一致，摄像机获取坐标速度跟不上机械臂运动速度等问题，使机械臂运动无法达到预期效果。经过不断修正，最终解决了上述问题。</p><p>在本文的研究中仍旧存在很多不足，例如控制算法不够准确，使机械臂的控制不够精准平稳；由于缺少工程实践经验，导致模糊规则 [<xref ref-type="bibr" rid="hanspub.21548-ref17">17</xref>] 制定不够完备，并且在工程中遇到很多问题无法有效解决。在后续的研究中，可以尝试加入更多新技术，例如自适应、PID控制 [<xref ref-type="bibr" rid="hanspub.21548-ref18">18</xref>] 以及神经网络等，与模糊理论相结合，使控制更精准，可靠性更好。还可以将机械臂的控制规则等进一步完善，使机械臂实现更多功能，控制更加平稳准确。</p></sec><sec id="s8"><title>文章引用</title><p>蔡剑锋,明兴莹,李杰,王辛月,谭文婷,袁海云,胡诗琴. 基于主动视觉定位的多自由度机械手臂控制研究 A Multi-Degree of Freedom Manipulator Based on Active Vision Positioning[J]. 人工智能与机器人研究, 2017, 06(03): 75-90. http://dx.doi.org/10.12677/AIRR.2017.63009</p></sec><sec id="s9"><title>参考文献 (References)</title></sec></body><back><ref-list><title>References</title><ref id="hanspub.21548-ref1"><label>1</label><mixed-citation publication-type="other" xlink:type="simple">孙洪淋. 机器人视觉伺服系统的自适应模糊控制方法研究[D]: [硕士学位论文]. 长沙: 湖南大学, 2006.</mixed-citation></ref><ref id="hanspub.21548-ref2"><label>2</label><mixed-citation publication-type="other" xlink:type="simple">高丑光. GAMMA300型六自由度机械臂模糊控制研究[D]: [硕士学位论文]. 太原: 中北大学, 2016.</mixed-citation></ref><ref id="hanspub.21548-ref3"><label>3</label><mixed-citation publication-type="other" xlink:type="simple">里文博. 基于视觉伺服的机械臂控制系统研究[D]: [硕士学位论文]. 南京: 南京理工大学, 2016.</mixed-citation></ref><ref id="hanspub.21548-ref4"><label>4</label><mixed-citation publication-type="other" xlink:type="simple">戚景观. 三关节机械臂运动轨迹的可控性研究[D]: [硕士学位论文]. 太原: 太原科技大学, 2012.</mixed-citation></ref><ref id="hanspub.21548-ref5"><label>5</label><mixed-citation publication-type="other" xlink:type="simple">陈玄. 基于模糊控制下多自由度机械手臂控制技术的研究[D]: [硕士学位论文]. 太原: 中北大学, 2014.</mixed-citation></ref><ref id="hanspub.21548-ref6"><label>6</label><mixed-citation publication-type="other" xlink:type="simple">吴伟. 基于视觉传感器的机器人定位算法研究[C]//中国智能自动化会. 中国智能自动化会议论文集. 沈阳: 沈阳大学出版社, 2009.</mixed-citation></ref><ref id="hanspub.21548-ref7"><label>7</label><mixed-citation publication-type="other" xlink:type="simple">卢泉奇. 基于HALCON的机械手视觉抓取应用研究[J]. 光学仪器, 2014, 36(6): 492-498.</mixed-citation></ref><ref id="hanspub.21548-ref8"><label>8</label><mixed-citation publication-type="other" xlink:type="simple">韩庆瑶. 基于VisionPro的数字图像识别与定位[J]. 电子世界, 2013(15): 72-73.</mixed-citation></ref><ref id="hanspub.21548-ref9"><label>9</label><mixed-citation publication-type="other" xlink:type="simple">黎志刚. 机器人视觉伺服控制及应用研究的现状[J]. 太原科技大学学报, 2007, 28(1): 24-31.</mixed-citation></ref><ref id="hanspub.21548-ref10"><label>10</label><mixed-citation publication-type="other" xlink:type="simple">Chen, C.T. (2012) Robust Tracking Design Based on Adap-tive Fuzzy Control of Fully-Actuated and under Actuated MIMO Nonlinear Systems with Time Delayed Uncertainty.</mixed-citation></ref><ref id="hanspub.21548-ref11"><label>11</label><mixed-citation publication-type="other" xlink:type="simple">张贞子, 罗兵. 机器人视觉定位系统的研究与实现[J]. 哈尔滨工业大学学报, 1997(6): 85-89.</mixed-citation></ref><ref id="hanspub.21548-ref12"><label>12</label><mixed-citation publication-type="other" xlink:type="simple">陈伟华. 基于VisionPro的工业机器人视觉定位系统[J]. 组合机床与自动化加工技术, 2012(2): 81-83.</mixed-citation></ref><ref id="hanspub.21548-ref13"><label>13</label><mixed-citation publication-type="other" xlink:type="simple">Daldaban, F. Ustkoyuncn, N. and Guny, K. (2006) Phase Inductance Estimation for Switched Reluctance Motor Using Adaptive Neuro-Fuzzy Inference System. Energy Conversion and Man-agement, 47, 485-493.</mixed-citation></ref><ref id="hanspub.21548-ref14"><label>14</label><mixed-citation publication-type="other" xlink:type="simple">廖万辉. 基于机器视觉的工业机器人定位系统[J]. 微计算机信息, 2009, 25(8): 242-244.</mixed-citation></ref><ref id="hanspub.21548-ref15"><label>15</label><mixed-citation publication-type="other" xlink:type="simple">王麟琨, 徐德, 谭民. 机器人视觉伺服研究进展[J]. 机器人, 2004, 26(3): 277-282.</mixed-citation></ref><ref id="hanspub.21548-ref16"><label>16</label><mixed-citation publication-type="other" xlink:type="simple">方建军, 何广平. 智能机器人[M]. 北京: 化学工业出版社, 2003.</mixed-citation></ref><ref id="hanspub.21548-ref17"><label>17</label><mixed-citation publication-type="other" xlink:type="simple">林靖, 陈辉堂, 王月娟, 蒋平. 机器人视觉伺服系统的研究[J]. 控制理论与应用, 2000,17(4): 476-481.</mixed-citation></ref><ref id="hanspub.21548-ref18"><label>18</label><mixed-citation publication-type="other" xlink:type="simple">Ying, H (1998) An Analytical Study on Structure, Stability and Design of General Nonlinear Takagi-Sugeno Fuzzy Control System. Automatic, 34, 157-167.</mixed-citation></ref></ref-list></back></article>