<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE article  PUBLIC "-//NLM//DTD Journal Publishing DTD v3.0 20080202//EN" "http://dtd.nlm.nih.gov/publishing/3.0/journalpublishing3.dtd"><article xmlns:mml="http://www.w3.org/1998/Math/MathML" xmlns:xlink="http://www.w3.org/1999/xlink" dtd-version="3.0" xml:lang="en" article-type="research article"><front><journal-meta><journal-id journal-id-type="publisher-id">CSA</journal-id><journal-title-group><journal-title>Computer Science and Application</journal-title></journal-title-group><issn pub-type="epub">2161-8801</issn><publisher><publisher-name>Scientific Research Publishing</publisher-name></publisher></journal-meta><article-meta><article-id pub-id-type="doi">10.12677/CSA.2016.63015</article-id><article-id pub-id-type="publisher-id">CSA-17062</article-id><article-categories><subj-group subj-group-type="heading"><subject>CSA20160300000_65805544.pdf</subject></subj-group><subj-group subj-group-type="Discipline-v2"><subject>信息通讯</subject></subj-group></article-categories><title-group><article-title>
 
 
  物联网 + Unity3D虚拟现实花卉养护远程智能监控系统
  The Remote Intelligent Virtual Reality Monitoring and Control System for Flower Maintenance Using Internet of Things and Unity3D
 
</article-title></title-group><contrib-group><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>陈</surname><given-names>麒宇</given-names></name><xref ref-type="aff" rid="aff1"><sup>1</sup></xref><xref ref-type="corresp" rid="cor1"><sup>*</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>龚</surname><given-names>鹏</given-names></name><xref ref-type="aff" rid="aff3"><sup>3</sup></xref><xref ref-type="aff" rid="aff2"><sup>2</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>郭</surname><given-names>仁春</given-names></name><xref ref-type="aff" rid="aff4"><sup>4</sup></xref><xref ref-type="aff" rid="aff2"><sup>2</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>张</surname><given-names>高健</given-names></name><xref ref-type="aff" rid="aff4"><sup>4</sup></xref><xref ref-type="aff" rid="aff2"><sup>2</sup></xref></contrib></contrib-group><aff id="aff1"><addr-line>东北育才学校超常教育实验部，辽宁 沈阳 </addr-line></aff><aff id="aff3"><addr-line>东北育才学校超常教育实验部，辽宁 沈阳</addr-line></aff><aff id="aff4"><addr-line>沈阳化工大学信息工程学院，辽宁 沈阳 </addr-line></aff><aff id="aff2"><addr-line>null</addr-line></aff><author-notes><corresp id="cor1">* E-mail:<email>okchenqiyu@163.com(陈麒)</email>;</corresp></author-notes><pub-date pub-type="epub"><day>01</day><month>03</month><year>2016</year></pub-date><volume>06</volume><issue>03</issue><fpage>119</fpage><lpage>125</lpage><permissions><copyright-statement>&#169; Copyright  2014 by authors and Scientific Research Publishing Inc. </copyright-statement><copyright-year>2014</copyright-year><license><license-p>This work is licensed under the Creative Commons Attribution International License (CC BY). http://creativecommons.org/licenses/by/4.0/</license-p></license></permissions><abstract><p>
 
 
  针对传统花卉养护手工操作工作效率低、可交互性差、缺乏远程监控能力以及人机交互界面缺乏视觉感染力问题，采用Arduino开源硬件平台，结合Unity3D引擎移动开发平台，设计和开发了一种物联网 + Unity3D可交互智能化虚拟现实花卉养护远程监控系统。该系统由基站服务端和远程站客户端组成，基站服务端使用土壤湿度和DHT温湿度传感器检测花卉土壤湿度和室内环境温度和湿度，控制器根据不同花卉土壤湿度设定值，在环境温度允许情况下，调节电磁阀，控制浇水量。远程站客户端实现虚拟漫游，实时信息显示、远程控制功能。基站服务端和远程站客户端通过无线路由器进行数据传输和交换。系统测试表明本系统能够通过三维交互式虚拟现实场景远程监控花卉生长，自动调整浇水量，提高了花卉养护的实用性和趣味性。
   Due to the manual and low efficiency, poor interactivity, lack of the remote control and visual appeal of the man-machine interface for the flower maintenance, we proposed a kind of interactive intelligent virtual reality monitoring and control system for flower maintenance based on internet of things and Unity3D. It was designed and developed by using the Arduino open source hardware platform and the Unity3D engine mobile development platform. The system consists of a base sta-tion server and a remote station client. Base station server uses the soil moisture and DHT tem-perature &amp; humidity sensor to measure the soil humidity and the indoor environment temperature and humidity. Controller controls the irrigation amount through the regulation of electromagnetic valve according to the setpoint of soil humidity when the environment temperature is allowed. Remote station client is used to achieve virtual roaming, real-time monitoring, information display and remote control function. Data transmission and exchange between the base station server and the remote station client is realized through the wireless router. System tests show that the system can monitor the growth of flowers by the three-dimensional interactive virtual reality scene, automatically adjust the water quantity, and improve the practicality and interest of flower maintenance.
 
</p></abstract><kwd-group><kwd>花卉养护，物联网，虚拟现实，Unity3D, Flower Maintenance</kwd><kwd> Internet of Things</kwd><kwd> Virtual Reality</kwd><kwd> Unity3D</kwd></kwd-group></article-meta></front><body><sec id="s1"><title>物联网 + Unity3D虚拟现实花卉养护远程 智能监控系统<sup> </sup></title><p>陈麒宇<sup>1</sup>，龚鹏<sup>1</sup>，郭仁春<sup>2</sup>，张高健<sup>2</sup></p><p><sup>1</sup>东北育才学校超常教育实验部，辽宁 沈阳</p><p><sup>2</sup>沈阳化工大学信息工程学院，辽宁 沈阳</p><disp-formula id="hanspub.17062-formula236"><graphic xlink:href="http://html.hanspub.org/file/3-1540563x6_hanspub.png"  xlink:type="simple"/></disp-formula><p>收稿日期：2016年2月19日；录用日期：2016年2月27日；发布日期：2016年3月2日</p><disp-formula id="hanspub.17062-formula237"><graphic xlink:href="http://html.hanspub.org/file/3-1540563x7_hanspub.png"  xlink:type="simple"/></disp-formula></sec><sec id="s2"><title>摘 要</title><p>针对传统花卉养护手工操作工作效率低、可交互性差、缺乏远程监控能力以及人机交互界面缺乏视觉感染力问题，采用Arduino开源硬件平台，结合Unity3D引擎移动开发平台，设计和开发了一种物联网 + Unity3D可交互智能化虚拟现实花卉养护远程监控系统。该系统由基站服务端和远程站客户端组成，基站服务端使用土壤湿度和DHT温湿度传感器检测花卉土壤湿度和室内环境温度和湿度，控制器根据不同花卉土壤湿度设定值，在环境温度允许情况下，调节电磁阀，控制浇水量。远程站客户端实现虚拟漫游，实时信息显示、远程控制功能。基站服务端和远程站客户端通过无线路由器进行数据传输和交换。系统测试表明本系统能够通过三维交互式虚拟现实场景远程监控花卉生长，自动调整浇水量，提高了花卉养护的实用性和趣味性。</p><p>关键词 :花卉养护，物联网，虚拟现实，Unity3D</p><disp-formula id="hanspub.17062-formula238"><graphic xlink:href="http://html.hanspub.org/file/3-1540563x8_hanspub.png"  xlink:type="simple"/></disp-formula></sec><sec id="s3"><title>1. 引言</title><p>随着生活水平的提高和美化生存环境意识的加强，花卉绿植的需求越来越大。然而生活节奏的加快和专业养护人员的缺乏，传统人工养护或现场采集数据手动调整现场设备的养护方式，工作效率低、花卉绿植养护不及时常常导致植物营养不良、甚至死亡[<xref ref-type="bibr" rid="hanspub.17062-ref1">1</xref>] [<xref ref-type="bibr" rid="hanspub.17062-ref2">2</xref>] 。目前市场上现有的一些花卉养护装置，多为人工手动操作、模式单一、不具备远程监控能力，一定程度上限制了浇花的时间和地点[<xref ref-type="bibr" rid="hanspub.17062-ref3">3</xref>] 。如何通过手机APP或电脑客户端应用程序自动监控花草的生长情况，在植物缺少水分、营养成分时自动通知主人，开启智能模式时还可以自动补水，甚至出差在外，通过远程监控功能实现千里之外花草的日常养护，越来越受到关注，因此迫切需要一种可交互智能化花卉养护虚拟现实监控系统。</p><p>文[<xref ref-type="bibr" rid="hanspub.17062-ref4">4</xref>] 设计开发的家庭自动浇花器利用土壤湿度传感器检测土壤湿度，通过单片机进行信息处理，输出控制信号，控制继电器动作，从而控制水泵电源的通断，完成按需按量自动浇花工作。但是该自动浇花装置局限在现场控制，没有远程监视和控制功能。文[<xref ref-type="bibr" rid="hanspub.17062-ref5">5</xref>] 基于GPRS技术，在智能手机上使用图形化软件通过短信方式实现远程浇花控制，花卉养护不在拘泥于时间和空间限制。目前现有的花卉养护系统普遍只关注信息采集和控制，可交互性差、缺乏视觉感染力和趣味性。虚拟现实作为一种高度逼真的交互式视景仿真技术，在军事、医学、设计和娱乐等领域得到广泛应用[<xref ref-type="bibr" rid="hanspub.17062-ref6">6</xref>] 。但是，基于虚拟现实技术的可交互远程智能浇花系统尚未见报道。</p><p>针对以上问题，本文设计和开发了一种物联网 + Unity3D可交互智能化虚拟现实花卉养护远程监控系统。系统硬件采用Arduino开源平台，虚拟仿真应用程序的开发选用Unity3D引擎移动开发平台。整个系统包括基站服务端和远程站客户端。其中，基站服务端花卉实时信息采集和控制，远程站客户端实现虚拟漫游，实时信息显示、远程控制功能。基站服务端和远程站客户端通过无线路由器进行数据传输和交换。</p></sec><sec id="s4"><title>2. 系统总体结构和功能设计</title><sec id="s4_1"><title>2.1. 总体结构设计</title><p>本文提出一种可交互智能化花卉养护虚拟现实监控系统，该系统由基站服务端和远程站客户端组成，如图1所示。基站服务端包括机械部分和控制部分。机械部分包括储水箱、水泵、水管、电磁阀、继电器和滴箭，电磁阀一端连接储水池内水泵，另一端与滴箭相连接；控制部分包括土壤湿度传感器、DHT温湿度传感器、Arduino开发板、Arduino Ethernet网络扩展模块；土壤湿度和DHT温湿度传感器连接到Arduino开发板输入端接口，Arduino开发板输出端DO信号线连接继电器线圈接口，继电器触点和电磁阀连接。</p><p>远程站客户端包括手机、PC客户端。远程站客户端通过花卉养护虚拟现实应用程序的三维虚拟场景，与基站实时交互，实现场景漫游、实时监视、信息显示、远程控制功能。远程站客户端用于提供可交互、可视化、三维用户界面。</p><p>基站服务端和远程站客户端通过Arduino Ethernet网络扩展模块和无线路由器进行数据传输；无线路由器一端与Arduino Ethernet网络扩展模块相连，另一端连接Internet网络。远程站客户端通过无线方式连接Internet网络，实现与基站服务端远程数据通信。</p></sec><sec id="s4_2"><title>2.2. 系统功能设计</title><p>本系统采用开源硬件Arduino平台进行花草土壤湿度、光照等信息实时采集，采用Unity3D引擎开</p><p>图1. 系统总体结构图</p><p>发移动平台实现虚拟现实应用程序开发。通过三维虚拟场景漫游，与花木浇灌设备交互实现远程开启停止控制，实现花草土壤湿度实时监测、手自动工作模式切换、报警等功能。系统功能结构如图2所示。具体包括：</p><p>1) 场景漫游：通过场景前后左右移动和旋转漫游，查看花卉、家居室内外场景漫游。</p><p>2) 信息监测：信息面板自动显示花卉品种、当前土壤湿度，环境温湿度和浇灌湿度控制系统设定值。。</p><p>3) 远程控制：设置了自动浇花模式和手动浇花模式。开启自动模式，系统根据实时采集的土壤湿度信息，比较温湿度传感器采样值和控制系统设定值之间的大小，根据误差调整加水量。手动模式时，鼠标拖动水壶，水壶遇到花卉触发喷水事件喷洒水滴，直到达到设定值为止，拖动喷壶，离开花卉，停止浇花，水壶放回原位。另外还可以通过墙壁开关、床头灯、风扇开关，控制室内灯光、床头台灯、电风扇运转等家具电器开关控制。</p></sec></sec><sec id="s5"><title>3. 系统开发关键技术</title><p>花卉养护虚拟现实系统开发包括基站服务器端电气控制系统开发和远程站客户端应用程序开发。考虑到在数据采集和控制方面简单轻量、跨平台、开源特点[<xref ref-type="bibr" rid="hanspub.17062-ref7">7</xref>] ，基站服务器端硬件开发平台选择Arduino UNO R3开发板。考虑到Unity3D是跨平台开发的先行者[<xref ref-type="bibr" rid="hanspub.17062-ref8">8</xref>] ，适合Windows、Mac操作系统以及Android和IOS移动平台开发，具有可移植性高，模块资源丰富，编程周期短，脚本强大，渲染高速，大型场景支持和在线控制功能[<xref ref-type="bibr" rid="hanspub.17062-ref9">9</xref>] [<xref ref-type="bibr" rid="hanspub.17062-ref10">10</xref>] ，虚拟现实开发选择Unity3D平台。</p><sec id="s5_1"><title>3.1. 基站服务端数据采集和控制</title><p>基站服务端数据采集和控制硬件开发平台采用Arduino UNO R3开发板，与Arduino Ethernet W5100网络扩展模块连用，通过网络控制读写Arduino的数字和模拟接口。无线路由器通过互联网或局域网通信连接手机或PC客户端。</p><p>结合领域专家知识，根据花卉喜好干湿程度，根据客户端应用软件预先设定的不同花卉土壤湿度阈值，基站控制器通过无线通信网络定时读取湿度阈值，基站Arduino实时采集土壤湿度检测值，根据实测值与阈值之间的偏差，设置电磁阀每次浇水时间长短和相邻两次之间的时间延迟，从而独立控制浇花模式。</p><p>图2. 系统功能结构图</p></sec><sec id="s5_2"><title>3.2. 远程站客户端应用程序开发</title><p>Unity3D一种基于开源.net即Mono.net的组件化开发引擎，具有开发效率高、运行稳定、用户界面良好等特点。采用该平台开发能够实现三维虚拟场景与花卉养护系统的交互，进而实现花卉浇灌的远程控制。Unity3D通过数据接口实时获取现场数据信息，虚拟场景实时与现实环境交互，具有强烈、逼真的感官冲击，给人身临其境的视觉享受。</p><p>远程站客户端应用程序采用3D Studio Max进行场景建模、渲染和加工，Unity3D进行场景漫游、信息显示、远程控制和通信。花卉养护虚拟现实系统人机交互界面的设计和开发过程如图3所示。具体开发过程包括：</p><p>1) 室内、室外场景取景，建模。借助3D Studio Max软件进行花卉、水壶、沙发、床、书柜、窗户等室内家居场景的建模以及房屋、草地、天空室外场景建模，且对模型进行渲染。利用Photoshop对粗糙的模型进行加工，最后得到高逼真的三维模型。</p><p>2) 将3D MAX 制作好的模型生成Fbx文件导入Unity3D中。</p><p>3) 基于Unity3D实现室内场景漫游、建筑物可视化和实时三维动画。由于Unity自带的Monodevelop脚本编辑器主要针对C#，所以本系统采用C#.Net作为开发的脚本语言。利用Unity3D软件对微软Visual Studio开发软件提供API，通过控制第三视角前后左右、旋转、放大、缩小开发实现三维场景漫游以及浇花事件触发。</p><p>4) Unity3D应用程序多平台导出。根据Unity3D提供的导出功能，添加导出的场景到列表里，根据应用程序运行在PC端还是移动端，选择切换平台，生成应用程序。</p></sec></sec><sec id="s6"><title>4. 系统测试</title><p>基于虚拟现实技术的远程智能浇花系统基站服务端如图4所示。基站服务端包括机械部分和控制部</p><p>图3. 客户端应用程序开发流程示意图</p><p>分。机械部分包括储水箱、水泵、水管、电磁阀和滴箭，水泵放在储水箱底部，电磁阀一端通过水管连接水泵，另一端通过水管与滴箭相连接，滴箭连接到花盆。控制部分包括土壤湿度传感器、DHT温湿度传感器、Arduino开发板、Arduino Ethernet网络扩展模块、继电器。如图4(a)和图4(b)所示，将土壤湿度传感器探头插入对应的花盆中，电磁阀连接滴箭放到花盆中。土壤湿度和DHT温湿度传感器连接到Arduino开发板输入引脚，Arduino控制器计算土壤湿度实测值与阈值之间的偏差。开发板输出端信号线连接继电器线圈，继电器触点和电磁阀连接，控制电磁阀浇水时间和延迟时间。</p><p>通过在三维虚拟场景中拖动喷壶，自动触发浇水模式，实现虚拟场景远程控制和现场设备实时信息采集的交互，如图5(a)所示。点击旋转移动按钮可以室内、室外场景旋转漫游，旋转按钮颜色由灰色变成蓝色，拖动鼠标前后左右旋转，室内外场景旋转变化，如图5(b)所示。场景漫游三维展示了室内家居场景和变化。基于虚拟现实技术的应用程序可以在PC端使用，也可以在手机上使用，支持Windows、Mac以及Android、IOS操作系统，可以跨平台使用。</p></sec><sec id="s7"><title>5. 结论</title><p>本文提出了一种无线物联网 + Unity3D的虚拟现实花卉养护远程智能监控系统，该系统由基站服务端和远程站客户端组成，基站服务端控制部分采用Arduino硬件平台开发，远程站客户端应用程序采用3D Studio Max和Unity3D开发。基站服务端和远程站客户端通过无线路由器进行数据传输和交换。系统</p><p>图4. 基站服务端实物图</p><p>图5. 远程站客户端应用程序界面</p><p>测试表明该系统能够实时采集花卉土壤湿度信息，监视花卉生长情况，虚拟漫游清晰逼真，远程自动浇花模式可以轻松实现远程花草的日常养护。除家庭花卉养护外，该系统进一步拓展为分布式虚拟现实花卉养护监控系统后，还可以应用到大型花卉租摆公司。</p></sec><sec id="s8"><title>基金项目</title><p>本项目受辽宁省教育厅科学研究项目(L2013158, L2013272)资助。</p></sec><sec id="s9"><title>文章引用</title><p>陈麒宇,龚鹏,郭仁春,张高健. 物联网 + Unity3D虚拟现实花卉养护远程智能监控系统The Remote Intelligent Virtual Reality Monitoring and Control System for Flower Maintenance Using Internet of Things and Unity3D[J]. 计算机科学与应用, 2016, 06(03): 119-125. http://dx.doi.org/10.12677/CSA.2016.63015</p></sec><sec id="s10"><title>参考文献 (References)</title></sec></body><back><ref-list><title>References</title><ref id="hanspub.17062-ref1"><label>1</label><mixed-citation publication-type="other" xlink:type="simple">刘川, 张小成, 高进渊, 等. 智能自动浇花系统的控制设计研究[J]. 科技视界, 2015(18): 87-88.</mixed-citation></ref><ref id="hanspub.17062-ref2"><label>2</label><mixed-citation publication-type="other" xlink:type="simple">江贺, 邱铁, 刘晓艳. 一种全自动低功耗浇花器[P]. 中国专利, 101558731A. 2011-05-11.</mixed-citation></ref><ref id="hanspub.17062-ref3"><label>3</label><mixed-citation publication-type="other" xlink:type="simple">田景文, 高美娟, 张振彬, 韩云鹏, 李冬冬, 程序, 李建, 章志成, 杜身星. 智能浇花装置[P]. 中国专利, 102657064B. 2014-07-09.</mixed-citation></ref><ref id="hanspub.17062-ref4"><label>4</label><mixed-citation publication-type="other" xlink:type="simple">赵丽, 张春林. 基于单片机的智能浇花系统设计与实现[J]. 长春大学学报: 自然科学版, 2012, 22(6): 650-651.</mixed-citation></ref><ref id="hanspub.17062-ref5"><label>5</label><mixed-citation publication-type="other" xlink:type="simple">王得燕. 的手机远程控制浇花装置[J]. 四川兵工学报, 2013, 34(11): 113-115.</mixed-citation></ref><ref id="hanspub.17062-ref6"><label>6</label><mixed-citation publication-type="other" xlink:type="simple">姜学智, 李忠华. 国内外虚拟现实技术的研究现状[J]. 辽宁工程技术大学学报: 自然科学版, 2004, 23(2): 238- 240.</mixed-citation></ref><ref id="hanspub.17062-ref7"><label>7</label><mixed-citation publication-type="other" xlink:type="simple">程晨. Arduino开发实战指南[M]. 北京: 机械工业出版社, 2012.</mixed-citation></ref><ref id="hanspub.17062-ref8"><label>8</label><mixed-citation publication-type="other" xlink:type="simple">朱惠娟. 基于Unity3D的虚拟漫游系统[J]. 计算机系统应用, 2012(10): 36-39.</mixed-citation></ref><ref id="hanspub.17062-ref9"><label>9</label><mixed-citation publication-type="other" xlink:type="simple">Unity Technologies. Unity 5.X从入门到精通[M]. 北京: 中国铁道出版社, 2016.</mixed-citation></ref><ref id="hanspub.17062-ref10"><label>10</label><mixed-citation publication-type="other" xlink:type="simple">王洪源, 陈慕羿, 华宇宁, 石征锦. Unity3D人工智能编程精粹[M]. 北京: 清华大学出版社, 2014.</mixed-citation></ref></ref-list></back></article>