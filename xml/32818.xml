<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE article  PUBLIC "-//NLM//DTD Journal Publishing DTD v3.0 20080202//EN" "http://dtd.nlm.nih.gov/publishing/3.0/journalpublishing3.dtd"><article xmlns:mml="http://www.w3.org/1998/Math/MathML" xmlns:xlink="http://www.w3.org/1999/xlink" dtd-version="3.0" xml:lang="en" article-type="research article"><front><journal-meta><journal-id journal-id-type="publisher-id">MOS</journal-id><journal-title-group><journal-title>Modeling and Simulation</journal-title></journal-title-group><issn pub-type="epub">2324-8696</issn><publisher><publisher-name>Scientific Research Publishing</publisher-name></publisher></journal-meta><article-meta><article-id pub-id-type="doi">10.12677/MOS.2019.84018</article-id><article-id pub-id-type="publisher-id">MOS-32818</article-id><article-categories><subj-group subj-group-type="heading"><subject>MOS20190400000_92239947.pdf</subject></subj-group><subj-group subj-group-type="Discipline-v2"><subject>信息通讯</subject><subject> 工程技术</subject></subj-group></article-categories><title-group><article-title>
 
 
  上下楼梯行人对流的Unity3D仿真模拟研究
  Unity3D Simulation for Pedestrian Convection during Up-and-Down Stairs
 
</article-title></title-group><contrib-group><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>杨</surname><given-names>楷</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>胡</surname><given-names>睿</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>李</surname><given-names>文君</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>乔</surname><given-names>士昌</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>李</surname><given-names>兴莉</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="corresp" rid="cor1"><sup>*</sup></xref></contrib></contrib-group><aff id="aff2"><addr-line>太原科技大学应用科学学院，山西 太原</addr-line></aff><aff id="aff1"><addr-line>null</addr-line></aff><pub-date pub-type="epub"><day>15</day><month>10</month><year>2019</year></pub-date><volume>08</volume><issue>04</issue><fpage>155</fpage><lpage>161</lpage><permissions><copyright-statement>&#169; Copyright  2014 by authors and Scientific Research Publishing Inc. </copyright-statement><copyright-year>2014</copyright-year><license><license-p>This work is licensed under the Creative Commons Attribution International License (CC BY). http://creativecommons.org/licenses/by/4.0/</license-p></license></permissions><abstract><p>
 
 
  本文在基于社会力模型的理论基础上，从太原科技大学某教学楼出发，将经常发生拥堵的课间上下楼梯的行人流作为研究对象，利用三维建模软件3ds Max和虚拟引擎Unity3D对行人疏散进行仿真模拟，探讨了不同密度、不同疏散策略对行人上下楼疏散效率的影响。研究结果表明：随着密度的增加，行人随机无序上下楼会导致疏散效率的显著降低。实际中，在人流密度较大时，楼梯上采用“左下右上”原则或左右楼梯采用“左楼梯下，右楼梯上”原则，可提高上下楼学生的效率。本文得出的结果可为校园教学楼人群疏散方案的设计提供参考依据。
   Based on the theory of social force model, this paper aims at the pedestrian flow up-and-down stairs during the break in one teaching building of Taiyuan University of Science and Technology as the research object. The 3D modeling software 3ds Max and virtual engine Unity3D are used to simulate the pedestrian evacuation. The influence of different densities and different evacuation strategies on evacuation efficiency is explored. The simulation results show that with the increase of density, the fact that pedestrians go up and down stairs in a random walking will inevitably cause a significant decline in evacuation efficiency. In reality, when the density is large, to apply the rules “left down and right up in one stairs” or “down on left stairs and up on right stairs for two stairs” can improve the evacuation efficiency. The results obtained can be referred in designing the evacuation schemes for crowds in a teaching building.
 
</p></abstract><kwd-group><kwd>社会力模型，Unity3D，上下楼梯，疏散策略，仿真, Social Force Model</kwd><kwd> Unity3D</kwd><kwd> Up and Down Stairs</kwd><kwd> Evacuation Strategy</kwd><kwd> Simulation</kwd></kwd-group></article-meta></front><body><sec id="s1"><title>上下楼梯行人对流的Unity3D仿真模拟研究<sup> </sup></title><p>杨楷，胡睿，李文君，乔士昌，李兴莉<sup>*</sup></p><p>太原科技大学应用科学学院，山西 太原</p><p><img src="//html.hanspub.org/file/3-2570241x1_hanspub.png" /></p><p>收稿日期：2019年10月14日；录用日期：2019年10月28日；发布日期：2019年11月5日</p><disp-formula id="hanspub.32818-formula23"><graphic xlink:href="//html.hanspub.org/file/3-2570241x5_hanspub.png"  xlink:type="simple"/></disp-formula></sec><sec id="s2"><title>摘 要</title><p>本文在基于社会力模型的理论基础上，从太原科技大学某教学楼出发，将经常发生拥堵的课间上下楼梯的行人流作为研究对象，利用三维建模软件3ds Max和虚拟引擎Unity3D对行人疏散进行仿真模拟，探讨了不同密度、不同疏散策略对行人上下楼疏散效率的影响。研究结果表明：随着密度的增加，行人随机无序上下楼会导致疏散效率的显著降低。实际中，在人流密度较大时，楼梯上采用“左下右上”原则或左右楼梯采用“左楼梯下，右楼梯上”原则，可提高上下楼学生的效率。本文得出的结果可为校园教学楼人群疏散方案的设计提供参考依据。</p><p>关键词 :社会力模型，Unity3D，上下楼梯，疏散策略，仿真</p><disp-formula id="hanspub.32818-formula24"><graphic xlink:href="//html.hanspub.org/file/3-2570241x7_hanspub.png"  xlink:type="simple"/></disp-formula><p>Copyright &#169; 2019 by author(s) and Hans Publishers Inc.</p><p>This work is licensed under the Creative Commons Attribution International License (CC BY).</p><p>http://creativecommons.org/licenses/by/4.0/</p><p><img src="//html.hanspub.org/file/3-2570241x8_hanspub.png" /> <img src="//html.hanspub.org/file/3-2570241x9_hanspub.png" /></p></sec><sec id="s3"><title>1. 引言</title><p>当前，随着国民经济的增长，高校的招生规模不断增加，全国大部分高校面临校园资源紧张的难题，其中教学楼等类似高层建筑物在紧急疏散过程中易发生拥挤踩踏事故，是人员伤亡事故的频发场所。行人疏散在高层建筑物中受多方面因素的制约，其中关键的两大因素是建筑结构和人员特征。王琨等 [<xref ref-type="bibr" rid="hanspub.32818-ref1">1</xref>] 通过采集实地疏散数据，运用回归曲线构建模型，据此得出疏散变量变化规律；张丽华 [<xref ref-type="bibr" rid="hanspub.32818-ref2">2</xref>] 使用Pathfinder软件，结合教学楼内人员上课的密度分布规律，通过实地测量数据建立教学楼的立体疏散模型，并对模型进行优化；李俊梅等 [<xref ref-type="bibr" rid="hanspub.32818-ref3">3</xref>] 利用Building EXDOUS模拟，分析教学楼疏散通道在实际使用中存在的问题，提出合理安排使用教学楼、设置疏散分区、拓宽出口及加强疏散演练等建议；张雪峰等 [<xref ref-type="bibr" rid="hanspub.32818-ref4">4</xref>] 以双层教学楼为背景，基于事件/委托机制和多智能体技术，提出了人员视觉感知模型，并实现了模型间的通信交流；陈丽丽等 [<xref ref-type="bibr" rid="hanspub.32818-ref5">5</xref>] 对Unity3D作为虚拟现实工具应用于疏散仿真领域的可行性做了对比研究；杜彪等 [<xref ref-type="bibr" rid="hanspub.32818-ref6">6</xref>] 采用人员疏散仿真技术分析楼梯梯段布置对疏散效率的影响，研究了整体疏散和局部疏散的优化策略；李若菲等 [<xref ref-type="bibr" rid="hanspub.32818-ref7">7</xref>] 为研究不同楼梯类型的行人疏散效果，改进传统社会力模型，并通过总疏散时间和平均疏散速度指标以及微观速度密度分布图分析其疏散过程中内在物理机制；彭电华等 [<xref ref-type="bibr" rid="hanspub.32818-ref8">8</xref>] 用Pathfinder软件，建立了等比例全尺寸仿真模型，对图书馆内的人员疏散进行模拟分析与优化。刘旭光等 [<xref ref-type="bibr" rid="hanspub.32818-ref9">9</xref>] 为研究楼梯区域人员应急疏散行为特征，开展了多组上下楼疏散实验，对疏散效率、速度、密度、流量等典型特征进行了分析；韩延彬等 [<xref ref-type="bibr" rid="hanspub.32818-ref10">10</xref>] 分析影响人群路径选择因素的基础上，提出了一种基于疏散路径集合的路径选择模型；鞠志伟等 [<xref ref-type="bibr" rid="hanspub.32818-ref11">11</xref>] 基于物联网技术将井下人员定位系统、综合调度通讯系统及监测监控系统等采集的信息与路径搜索算法相结合，以传感器设备采集的实时数据为疏散路径的权值，实现了井下人员安全逃生疏散仿真。</p><p>综上可以看出，上述对高校教学楼的疏散研究，主要侧重于整个教学楼的应急疏散能力、行人的运动特征等。本文以拥堵踩踏事故的高发点——某高校教学楼上下课期间的楼梯上行人对流为研究对象，利用Unity3D构建了一种高校教学楼楼梯人员疏散模型，着重分析楼底上行人上下楼的对流行为特性，并提出相对较优的疏散策略。</p></sec><sec id="s4"><title>2. 模型建立</title><sec id="s4_1"><title>2.1. 模型结构构成</title><p>基于3ds Max图形制作软件创建某高校教学楼的简化模型及行人模型。该教学楼是本科生集中上课的场所，建筑面积为2450 m<sup>2</sup>，共3层，楼层纵高3 m，单间教室净占用面积60 m<sup>2</sup>，每一层共有10间教室，建筑模型设置东西对称的双楼梯通道，楼梯平台净宽度2 m，楼梯踏步水平面净宽度0.3 m，单边阶梯段共12级台阶。教学楼一层楼梯口连接东西两个出口检测器，行人到达自动计数并消失完成疏散过程。目前两出口都开放，教学楼模型的走廊空间及疏散出口设置如图1所示，楼梯模型如图2所示。</p><p>图1. 走廊空间及疏散出口设置</p><p>图2. 楼梯模型</p></sec><sec id="s4_2"><title>2.2. 行人模型参数设置</title><p>在本实验中，我们将3ds Max中的人物模型导入Unity3D中，按照环境建模中设置的参数对人物模型执行“克隆”操作，使得在实验初始状态时，能通过代码控制生成在教室的行人数量。人物模型尺寸设置为：身高1.7 m，肩宽0.4 m，步距0.3 m。在本例中，考虑模拟疏散行为与实际情况相近，文中引入了人员的动力学特性、碰撞体特性、群组行为、躲避优先级和速度属性，如表1所示。</p><table-wrap id="table1" ><label><xref ref-type="table" rid="table1">Table 1</xref></label><caption><title> Pedestrian motion attribut</title></caption><table><tbody><thead><tr><th align="center" valign="middle" >名称</th><th align="center" valign="middle" >属性</th></tr></thead><tr><td align="center" valign="middle" >人群动力学</td><td align="center" valign="middle" >模型对象遵循运动学定律</td></tr><tr><td align="center" valign="middle" >碰撞体特性</td><td align="center" valign="middle" >使模型实体化，避免穿模</td></tr><tr><td align="center" valign="middle" >群组行为</td><td align="center" valign="middle" >使大规模人群运动智能化</td></tr><tr><td align="center" valign="middle" >躲避优先级</td><td align="center" valign="middle" >对障碍躲避的优先级</td></tr><tr><td align="center" valign="middle" >速度属性</td><td align="center" valign="middle" >某一时刻行人瞬时速度</td></tr></tbody></table></table-wrap><p>表1. 行人运动属性</p></sec><sec id="s4_3"><title>2.3. 模拟参数设置</title><p>行人在自由行走时受到自身条件及建筑物环境等因素的影向导致速度的差异，同时当行人疏散时，其步行速度还将受到人员密度的影响。本文考虑大学生群体，故速度主要受性别影响。根据文献 [<xref ref-type="bibr" rid="hanspub.32818-ref4">4</xref>] 中的描述，采用表2中的数据。</p><table-wrap id="table2" ><label><xref ref-type="table" rid="table2">Table 2</xref></label><caption><title> Pedestrian parameter</title></caption><table><tbody><thead><tr><th align="center" valign="middle"  rowspan="2"  >行人类型</th><th align="center" valign="middle"  rowspan="2"  >年龄/岁</th><th align="center" valign="middle"  colspan="3"  >行人速度m/s</th></tr></thead><tr><td align="center" valign="middle" >上楼速度</td><td align="center" valign="middle" >下楼速度</td><td align="center" valign="middle" >走廊行走速度</td></tr><tr><td align="center" valign="middle" >男性</td><td align="center" valign="middle" >&lt;30</td><td align="center" valign="middle" >0.65</td><td align="center" valign="middle" >0.78</td><td align="center" valign="middle" >1.30</td></tr><tr><td align="center" valign="middle" >女性</td><td align="center" valign="middle" >&lt;30</td><td align="center" valign="middle" >0.55</td><td align="center" valign="middle" >0.66</td><td align="center" valign="middle" >1.10</td></tr></tbody></table></table-wrap><p>表2. 行人参数设置</p><p>当密度高时，行人的运动规律通常以一个完整的群组进行，单一个体在集群当中会缺失一定的自主性，结合社会力的设定加入，这样让行人既具有微观个体运动特性，且不缺失集群运动特性。根据文献 [<xref ref-type="bibr" rid="hanspub.32818-ref4">4</xref>] 中的描述，下面为在楼梯的人流速度公式：</p><p>v = σ &#215; m &#215; ( 112 D 4 − 380 D 3 + 434 D 2 − 217 D + 57 ) (1)</p><p>m和 σ 为修正系数：</p><p>σ = 0.775 + 0.44 exp ( − 0.39 &#215; D ) &#215; sin ( 5.16 D − 0.224 ) (2)</p><p>m = 1.49 − 0.36 D (3)</p><p>式(1)中： D = D 0 + L ；L为行人对地的投影面积，取0.4 m<sup>2</sup>；D<sub>0</sub>为一定区域面积内的人流密度(人数/m<sup>2</sup>)。</p></sec></sec><sec id="s5"><title>3. 楼梯区域对流仿真结果及分析</title><p>作为一栋主要教学楼，在工作日上午10:00第一大节课和下午4:00第三大节课结束时，会出现严重的拥堵现象。本文考虑行人上下楼时人流密度对疏散效率的影响，假定行人无序上下楼梯，取三组人流密度0.5人/m<sup>2</sup>、1.00人/m<sup>2</sup>、1.80人/m<sup>2</sup>，分别对应低、中、高三种密度。图3给出了不同人流密度下楼梯间行人疏散模拟情况，其中黄色代表上楼行人，红色代表下楼行人。</p><p>图3. 不同人流密度下楼梯处人员疏散模拟场景。(a) 低密度，(b) 中密度，(c) 高密度</p><p>通过比较图3得到，在自由状态下，低密度下人流较为分散，不易产生冲撞拥堵(见图3(a))；随着密度的增大见(图3(b))，开始在楼梯口有人群集结拥堵，在楼梯的人群因密度增大导致人员对撞和摩擦提升，进而使得图3(b)情景相较于图3(a)，疏散效率明显下降；当达到高密度时(见图3(a))，大量的行人导致上下楼梯端口处大量拥堵，特别在中间平台两股对流形成对峙状态，行人间、行人与建筑物的摩擦力过大，致使人员疏散极其缓慢，疏散效率最低。</p></sec><sec id="s6"><title>4. 疏散策略优化对比</title><p>通过上面分析发现，当行人无序上下楼梯时，在中高密度下极易造成行人流的对冲，指示疏散效率极低。鉴于此，在初始总人数为1200人时的高密度人流疏散情景下，提出下列三种策略(注：图4、图5、图6中红色代表下楼人群，黄色代表上楼人群)。</p><p>疏散策略s1：自由状态行人疏散模拟。此疏散策略下教学楼内人员在遵循就近原则的前提下(即选择距离自己最近的出口且路径选两点之间直线最短)，通过设定行人对疏散通道的吸引力大小使之达到各楼梯均匀使用，模拟情景如图4所示。</p><p>图4. 疏散策略s1模拟情景</p><p>疏散策略s2：遵循在楼梯间左下右上原则。该策略下学生在楼道间上下楼左右分开，期望能降低因自由运动而造成的行人冲撞堵塞，从而减轻疏散压力。疏散时，各出口吸引力不变，即行人运动路径大致与疏散策略s1相同，避免在运动轨迹上产生不必要的冲突，模拟情景如图5所示。</p><p>图5. 疏散策略s2模拟情景</p><p>疏散策略s3：遵循左楼梯下，右楼梯上原则。在观测模拟过程时发现，当在单个楼梯间行人运动只是上楼或下楼，其疏散效率比同时上下楼高，故设定疏散策略3深入探究在遵循左楼梯下，右楼梯上原则下对疏散效率的影响。该情景下规定第三层行人在左侧下楼梯，第二层行人在左侧上楼梯，模拟情景如图6所示。</p><p>图6. 疏散策略s3模拟情景</p><p>图7进一步给出了三种疏散策略的对比图，不难发现，疏散策略s1在进行人员上下楼时拥堵持续时间最长为237秒，疏散效率不高；疏散策略s3次之，完成疏散所用时间为192秒；相比于s1、s3疏散策略s2在仿真实验中表现良好，疏散时间为165秒。</p><p>图7. 疏散策略对比图</p><p>此外，s1与s2两种情况在0~40秒时总疏散趋势大致重合，表明两组行人在行动到楼梯口时运动规律相同，行人在此时段还大量盘踞在过道和教室中，导致最先抵达楼梯的行人能够较快速疏散；超过40秒由于规定s1的行人无序上下楼运动，致使上下楼行人流摩擦阻力较大，从图4可见在楼梯中部平台形成了强烈对峙，而s2左右分开相对减小了阻力面积，具体体现在s1与s2在相同时间疏散人数的差异，从图中曲线可知，由于s1受到的行人流冲突更大导致其曲线波动较s2也更大。将s3与s1、s2对比可知在0~40秒s2与s1曲线斜率变化较大的时候，s3曲线表现得相对较为平稳，且趋势更平缓，这是由于s3的人群并没有受到对流的冲击，由于人流基数大，随着时间推进导致人员在进入楼梯口开始大量拥堵，使得楼梯口通量小，而楼梯处没有反向人流阻碍运动，处于楼梯处行人密度较低；在150-175秒时间段由于人员再次在出口拥堵导致图像斜率下降。就总体仿真实验来说，由Unity3D构建的场景模型较好模拟了对学生群体上下楼疏散过程，能为实际状况提供参考数据。</p></sec><sec id="s7"><title>5. 结语</title><p>本文基于社会力模型，在不同疏散策略下，利用Unity3D对教学楼学生群体上下课时段的人流情况进行了模拟，通过比较分析，得到以下结论和建议：</p><p>1) 学生课间随机无序上下楼，移动阻力较大，行人流对撞更激烈，使得楼层间特别是楼梯口处形成大规模人群拥堵现象。</p><p>2) 实际中，在人流密度较大时，楼梯上采用“左下右上”原则或左右楼梯采用“左楼梯下，右楼梯上”原则，可提高上下楼学生的效率。</p></sec><sec id="s8"><title>基金项目</title><p>本论文获山西省留学回国人员科技活动择优资助项目(2017004)、山西省高等学校大学生创新创业训练项目(2019363)、太原科技大学大学生创新创业训练计划项目(XJ2018151)资助。</p></sec><sec id="s9"><title>文章引用</title><p>杨 楷,胡 睿,李 文君,乔士昌,李兴莉. 上下楼梯行人对流的Unity3D仿真模拟研究Unity3D Simulation for Pedestrian Convection during Up-and-Down Stairs[J]. 建模与仿真, 2019, 08(04): 155-161. https://doi.org/10.12677/MOS.2019.84018</p></sec><sec id="s10"><title>参考文献</title></sec></body><back><ref-list><title>References</title><ref id="hanspub.32818-ref1"><label>1</label><mixed-citation publication-type="other" xlink:type="simple">王锟, 盛武. 高校教学楼楼梯出口应急疏散模型研究[J]. 建筑防计, 2016, 35(3): 332-335.</mixed-citation></ref><ref id="hanspub.32818-ref2"><label>2</label><mixed-citation publication-type="other" xlink:type="simple">张丽华. 高校教学楼疏散分析模拟[J]. 中国公共安全•学术版, 2017, 46(1): 49-54.</mixed-citation></ref><ref id="hanspub.32818-ref3"><label>3</label><mixed-citation publication-type="other" xlink:type="simple">李俊梅, 刘绚, 孙育英, 李炎锋, 刘闪闪, 袁定雄. 某高校教学楼人员疏散优化研究[J]. 建筑防火设计, 2011, 30(12): 1121-1124.</mixed-citation></ref><ref id="hanspub.32818-ref4"><label>4</label><mixed-citation publication-type="other" xlink:type="simple">张学锋, 白晨曦. 双层教学楼人员疏散仿真研究[J]. 系统仿真学报, 2017, 29(5): 1070-1075.</mixed-citation></ref><ref id="hanspub.32818-ref5"><label>5</label><mixed-citation publication-type="other" xlink:type="simple">陈丽丽, 栗玉剑, 王佐, 麻庭光. Uni-ty3D应用于疏散仿真的问题与前景[J]. 建筑防火设, 2019, 38(4): 485-488.</mixed-citation></ref><ref id="hanspub.32818-ref6"><label>6</label><mixed-citation publication-type="other" xlink:type="simple">杜彪, 李国辉. 高层建筑人员疏散优化策略研究[J]. 建筑防火设, 2018, 37(1): 45-47.</mixed-citation></ref><ref id="hanspub.32818-ref7"><label>7</label><mixed-citation publication-type="other" xlink:type="simple">李若菲, 赵永翔, 卢团团, 刘旭光. 不同楼梯布局条件下行人疏散效果仿真研究[J]. 中国安全生产科学技术, 2019, 4(4): 161-166.</mixed-citation></ref><ref id="hanspub.32818-ref8"><label>8</label><mixed-citation publication-type="other" xlink:type="simple">彭电华, 侯龙飞, 吴建星, 唐玲. 高等院校大型图书馆火灾人员疏散模拟与方案优化[J]. 工业安全与环保, 2012, 38(12): 43-46.</mixed-citation></ref><ref id="hanspub.32818-ref9"><label>9</label><mixed-citation publication-type="other" xlink:type="simple">刘旭光, 赵永翔, 张宇林, 施冬梅, 陈仲年. 基于社会力模型的楼梯区域人员疏散实验及仿真研究[J]. 武汉理工大学学报, 2018, 40(3): 251-254.</mixed-citation></ref><ref id="hanspub.32818-ref10"><label>10</label><mixed-citation publication-type="other" xlink:type="simple">韩延彬, 刘弘. 一种基于疏散路径集合的路径选择模型在人群疏散仿真中的应用研究[J]. 计算机学报, 2018, 41(12): 2654-2666.</mixed-citation></ref><ref id="hanspub.32818-ref11"><label>11</label><mixed-citation publication-type="other" xlink:type="simple">鞠志伟, 王淑芳, 徐华. 应急疏散路径规划系统的研究与应用[J]. 北京石油化工学院学报, 2018, 40(3): 82-85.</mixed-citation></ref></ref-list></back></article>