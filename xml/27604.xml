<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE article  PUBLIC "-//NLM//DTD Journal Publishing DTD v3.0 20080202//EN" "http://dtd.nlm.nih.gov/publishing/3.0/journalpublishing3.dtd"><article xmlns:mml="http://www.w3.org/1998/Math/MathML" xmlns:xlink="http://www.w3.org/1999/xlink" dtd-version="3.0" xml:lang="en" article-type="research article"><front><journal-meta><journal-id journal-id-type="publisher-id">CSA</journal-id><journal-title-group><journal-title>Computer Science and Application</journal-title></journal-title-group><issn pub-type="epub">2161-8801</issn><publisher><publisher-name>Scientific Research Publishing</publisher-name></publisher></journal-meta><article-meta><article-id pub-id-type="doi">10.12677/CSA.2018.811188</article-id><article-id pub-id-type="publisher-id">CSA-27604</article-id><article-categories><subj-group subj-group-type="heading"><subject>CSA20181100000_16811355.pdf</subject></subj-group><subj-group subj-group-type="Discipline-v2"><subject>信息通讯</subject></subj-group></article-categories><title-group><article-title>
 
 
  无线传感器网络中门限服务控制系统的设计实现
  Design and Implementation of Threshold Service Control System in Wireless Sensor Networks
 
</article-title></title-group><contrib-group><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>董</surname><given-names>发志</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>杨</surname><given-names>俊东</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>熊</surname><given-names>成彪</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>张</surname><given-names>颖婕</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib></contrib-group><aff id="aff2"><addr-line>云南大学信息学院，云南 昆明</addr-line></aff><aff id="aff1"><addr-line>null</addr-line></aff><pub-date pub-type="epub"><day>02</day><month>11</month><year>2018</year></pub-date><volume>08</volume><issue>11</issue><fpage>1706</fpage><lpage>1712</lpage><permissions><copyright-statement>&#169; Copyright  2014 by authors and Scientific Research Publishing Inc. </copyright-statement><copyright-year>2014</copyright-year><license><license-p>This work is licensed under the Creative Commons Attribution International License (CC BY). http://creativecommons.org/licenses/by/4.0/</license-p></license></permissions><abstract><p>
 
 
   
   为了最大限度的提高无线传感器网络资源的利用率，突破传统轮询系统研究不能应用于真实无线传感器网络的限制，将轮询控制的门限服务方式接入无线传感器网络。本文简要介绍了无线传感器网络的结构，分析了轮询系统中的门限服务方式。以cc2530节点作为硬件平台，利用分簇的方式形成了适合门限服务控制的网络，基于ZStack进行了软件的设计，在无线传感器网络中实现了门限服务控制。最后统计计算了门限服务系统的平均时延、平均排队队长两个指标，以此来评估系统的正确性，结果表明，系统能够正确运行，性能指标和理论值一致。 In order to maximize the utilization of wireless sensor network resources, the threshold service mode of polling control is connected to the wireless sensor network. This paper briefly introduces the structure of the wireless sensor network and analyzes the threshold service mode in the polling system. The cc2530 node is used as the hardware platform to form a network suitable for threshold service control by clustering. The software design is based on ZStack, and the threshold service control is implemented in the wireless sensor network. Finally, the average delay and average queue length of the threshold service system are calculated to evaluate the correctness of the system. The results show that the system can operate correctly and the performance index is consistent with the theoretical value.
    
  
 
</p></abstract><kwd-group><kwd>无线传感器网络，门限服务，ZStack，cc2530, Wireless Sensor Network</kwd><kwd> Threshold Service</kwd><kwd> ZStack</kwd><kwd> CC2530</kwd></kwd-group></article-meta></front><body><sec id="s1"><title>无线传感器网络中门限服务控制系统的设计实现<sup> </sup></title><p>董发志，杨俊东，熊成彪，张颖婕</p><p>云南大学信息学院，云南 昆明</p><p><img src="//html.hanspub.org/file/9-1541191x1_hanspub.png" /></p><p>收稿日期：2018年10月30日；录用日期：2018年11月12日；发布日期：2018年11月19日</p><disp-formula id="hanspub.27604-formula46"><graphic xlink:href="//html.hanspub.org/file/9-1541191x5_hanspub.png"  xlink:type="simple"/></disp-formula></sec><sec id="s2"><title>摘 要</title><p>为了最大限度的提高无线传感器网络资源的利用率，突破传统轮询系统研究不能应用于真实无线传感器网络的限制，将轮询控制的门限服务方式接入无线传感器网络。本文简要介绍了无线传感器网络的结构，分析了轮询系统中的门限服务方式。以cc2530节点作为硬件平台，利用分簇的方式形成了适合门限服务控制的网络，基于ZStack进行了软件的设计，在无线传感器网络中实现了门限服务控制。最后统计计算了门限服务系统的平均时延、平均排队队长两个指标，以此来评估系统的正确性，结果表明，系统能够正确运行，性能指标和理论值一致。</p><p>关键词 :无线传感器网络，门限服务，ZStack，cc2530</p><disp-formula id="hanspub.27604-formula47"><graphic xlink:href="//html.hanspub.org/file/9-1541191x6_hanspub.png"  xlink:type="simple"/></disp-formula><p>Copyright &#169; 2018 by authors and Hans Publishers Inc.</p><p>This work is licensed under the Creative Commons Attribution International License (CC BY).</p><p>http://creativecommons.org/licenses/by/4.0/</p><p><img src="//html.hanspub.org/file/9-1541191x7_hanspub.png" /> <img src="//html.hanspub.org/file/9-1541191x8_hanspub.png" /></p></sec><sec id="s3"><title>1. 引言</title><p>轮询控制因其公平性、灵活性被广泛应用于工业制造、计算机通信等各个方面。无线传感器网络引入轮询控制机制，将传统的多跳通信变为单跳，可以有效的降低因碰撞产生的能量损耗。文献 [<xref ref-type="bibr" rid="hanspub.27604-ref1">1</xref>] 以限定(K = 1)服务为基础，提出了一种改进的PCF轮询控制协议，将其接入无线传感器网络，在MATLAB仿真环境下验证了协议的正确性。文献 [<xref ref-type="bibr" rid="hanspub.27604-ref2">2</xref>] 首次以FPGA (field programmable gate array)对轮询机制的接入控制协议进行了设计和实现。从软件仿真到FPGA的实现是一个巨大的跨越，但是没有将轮询系统应用于真实的无线传感器网络中。文献 [<xref ref-type="bibr" rid="hanspub.27604-ref3">3</xref>] 选择TinyOS无线传感网络操作系统作为软件平台，以cc2538cb传感器节点作为硬件平台，在无线传感器网络中构建了一个轮询控制系统。TinyOS是一个空白的操作系统，目前没有基于TinyOS操作系统的ZigBee协议栈通过ZigBee联盟的认证，且支持的芯片较少，移植困难，因此TinyOS的应用受到很大限制。而Zstack是TI开发的通过ZigBee联盟的认证的免费协议栈，协议栈具有国际化，标准化的特点，协议栈已提供十几种应用场景剖面可以非常轻松的让用户开发出满足国际标准的产品。因此本文选取ZStack作为软件平台，以cc2530节点作为系统的硬件平台，通过开发ZStack的方式实现对无线传感器网络的轮询控制。</p></sec><sec id="s4"><title>2. 无线传感器网络结构</title><p>无线传感器网络的结构如图1所示。主要包括传感器节点、汇聚节点、两种类型的节点。传感器节点负责数据的采集，汇聚节点负责数据的收集和转发。将传感器节点部署在一个区中，各个传感器节点就会自组织形成一个小区域的网络 [<xref ref-type="bibr" rid="hanspub.27604-ref4">4</xref>] 。节点之间的协作通信将采集到的数据通过一条最优路径传输到汇聚节点。利用GPRS、GSM等途径将数据传送到网络服务器，用户就可以通过电脑、手机等终端远程得知监测区域的环境的变化。</p></sec><sec id="s5"><title>3. 轮询服务</title><p>轮询系统如图2所示，按照其服务方式不同，可以分为完全服务、门限服务、限定服务 [<xref ref-type="bibr" rid="hanspub.27604-ref5">5</xref>] [<xref ref-type="bibr" rid="hanspub.27604-ref6">6</xref>] [<xref ref-type="bibr" rid="hanspub.27604-ref7">7</xref>] 三种。完全服务的过程是，服务器不仅要将当前站点中存在的信息分组服务完，在服务过程中进入站点的信息分组也要服务完，直到当前站点中不存在信息分组。门限服务只服务当前站点中所存在的信息分组，对于服务过程中到达的信息分组，则缓存在站点中，等待下一次的服务。限定服务一般指限定(K = 1)服务，即每一次轮询到的站点只发送一个信息分组。</p><p>图1. 无线传感器网络结构</p><p>图2. 轮询系统</p><p>轮询系统采用马尔科夫链和概率母函数的方法构建数学模型，以此来分析其性能。门限服务的平均时延如下 [<xref ref-type="bibr" rid="hanspub.27604-ref3">3</xref>] 。</p><p>E ( W G ) = 1 2 { R ″ ( 1 ) γ + 1 1 − N ρ [ ( N − 1 ) γ + ( N − 1 ) ρ + 2 N γ ρ + N λ B ″ ( 1 ) + ( 1 + ρ − N ρ ) A ″ ( 1 ) λ 2 ] } (1)</p><p>平均排队队长计算如下。</p><p>g i ( i ) = N γ λ 1 − N ρ (2)</p><p>上式中， λ 表示信息分组的到达率； β 表示服务信息分组的服务率； γ 表示两个站点之间的转换时间： A ″ ( 1 ) = λ 2 ， B ″ ( 1 ) = β ( β − 1 ) ， R ″ ( 1 ) = γ ( γ − 1 ) 。</p></sec><sec id="s6"><title>4. 系统的设计</title><sec id="s6_1"><title>4.1. 系统的硬件设计</title><p>本文传感器节点选择德州仪器制造的CC2530，其芯片为TI公司的CC2530。CC2530基于51内核，是一个兼容IEEE 802.15.4的真正的片上系统。相比于CC2430，其闪存达到了256K，可以满足大应用的需求，拥有强大的地址识别和数据包处理能力 [<xref ref-type="bibr" rid="hanspub.27604-ref8">8</xref>] [<xref ref-type="bibr" rid="hanspub.27604-ref9">9</xref>] [<xref ref-type="bibr" rid="hanspub.27604-ref10">10</xref>] 。CC2530提供了101dB的链路质量，接收灵敏度高和抗干扰性强，完全能够满足本实验的需求。</p><p>CC2530最小系统如图3所示，主要包括电池、复位电路、收发前端、晶振电路、DC/DC稳压器、CC2530芯片6个部分。CC2530具有一个IEEE802.15.4兼容无线收发器 [<xref ref-type="bibr" rid="hanspub.27604-ref11">11</xref>] 。RF内核控制模拟无线模块。另外，它提供了MCU和无线设备之间的一个接口，这使得其可以发出命令，读取状态，自动操作和确定无线设备事件的顺序。无线设备还包括一个数据包过滤和地址识别模块。</p><p>图3. CC2530最小系统</p></sec><sec id="s6_2"><title>4.2. 系统的软件设计</title><p>ZigBee协议(Zstack)的架构如图4所示，包括应用层，应用支持子层、网络层、媒体访问控制层、物理层。ZigBee网络中，按照功能划分为三种设备类型:协调器、路由器、终端设备 [<xref ref-type="bibr" rid="hanspub.27604-ref12">12</xref>] 。其中协调器负责网络的配置和维护，一个网络中只允许有一个协调器。路由器的主要功能是加入网络，起到中继和路由的作用。终端设备执行具体的任务，如数据采集等 [<xref ref-type="bibr" rid="hanspub.27604-ref13">13</xref>] 。</p><p>基于Zstack在应用层分别对汇聚节点、传感器节点进行了程序设计。实验采用6个cc2530节点，一个汇聚节点作为轮询系统的服务器，剩余五个作为传感器节点负责数据的采集，编号为A、B、C、D、E，门限服务中参数的设计为： β = 2 ， γ = 1 。设计的流程如图5所示。按下汇聚节点的按键后，整个系统开始工作。具体实现如下：</p><p>1) 传感器节点初始化完成，等待接收汇聚节点发来的命令帧，同时开始采集数据，采集的数据为温度，加入代码控制，使得温度数据的到达过程近似服从泊松分布.并将采集到数据存入信息缓冲区中。</p><p>2) 汇聚节点初始化完成后发布轮询列表并按列表发送命令帧，向节点A发送一个命令帧，并产生一个合适的等待时间，若在等待时间内未收到节点A的数据，则触发跳转程序，按照列表顺序发送命令帧，转到下一个站点进行服务。若在等待时间内收到节点A的数据，则触发一个中断信号，重置等待时间，等待下一个数据的到来，如此反复，直到出现等待时间耗尽，则说明当前服务的节点已经将发送缓冲区中的信息全部发送完，此时触发跳转程序，按照列表顺序服务下一个节点。</p><p>3) 传感器节点侦听到命令帧后将信息缓冲区中的数据复制到发送缓冲区，并发送出去，直到发送缓冲区中没有数据。同时按泊松到达概率采集数据。</p></sec></sec><sec id="s7"><title>5. 实验分析</title><p>烧写好程序之后，按下汇聚节点的按键，系统开始工作，通过串口助手观察汇聚节点的输出，可以看到A &#174; B &#174; C &#174; D &#174; E的顺序打印出数据。</p><p>本文实验分析的方法是利用python程序记录汇聚节点串口的输出，将其存储为文本文件。再进行相</p><p>图4. ZigBee协议(Zstack)的架构</p><p>图5. 系统工作流程</p><p>应的处理之后，可以得到相关数据。主要评估的参数轮询系统的平均时延、平均排队队长。</p><p>轮询系统的平均时延的实验值可以如下计算：</p><p>轮 询 平 均 时 延 实 验 值 = 服 务 完 所 有 节 点 中 信 息 分 组 所 需 的 时 间 各 节 点 信 息 分 组 的 总 数</p><p>轮询的平均排队队长的实验值由下式计算：</p><p>平 均 排 队 队 长 实 验 值 = 各 节 点 信 息 分 组 的 总 数 节 点 数 &#215; 循 环 次 数</p><p>实验中选取各个到达率的前1000个信息分组来计算相关指标，计算轮询的时延需要知道汇聚节点服务完1000个信息分组的所需的时间长度。这个时间利用串口的时间戳来记录。计算平均排队队长所需参数各节点信息的总数为1000，节点数为5，循环次数则需要利用程序记录下服务完1000个信息分组所需的循环次数。通过理论公式计算的理论值和实验值对比如表1所示。</p><table-wrap id="table1" ><label><xref ref-type="table" rid="table1">Table 1</xref></label><caption><title> Average delay of polling system, theoretical value of average queue length and experimental valu</title></caption><table><tbody><thead><tr><th align="center" valign="middle"  rowspan="2"  >到达率</th><th align="center" valign="middle"  colspan="2"  >平均时延</th><th align="center" valign="middle"  colspan="2"  >平均排队队长</th></tr></thead><tr><td align="center" valign="middle" >理论值</td><td align="center" valign="middle" >实验值</td><td align="center" valign="middle" >理论值</td><td align="center" valign="middle" >实验值</td></tr><tr><td align="center" valign="middle" >0.01</td><td align="center" valign="middle" >2.9444</td><td align="center" valign="middle" >3.1148</td><td align="center" valign="middle" >0.0544</td><td align="center" valign="middle" >0.0540</td></tr><tr><td align="center" valign="middle" >0.02</td><td align="center" valign="middle" >3.5000</td><td align="center" valign="middle" >3.6224</td><td align="center" valign="middle" >0.1200</td><td align="center" valign="middle" >0.1274</td></tr><tr><td align="center" valign="middle" >0.03</td><td align="center" valign="middle" >4.2143</td><td align="center" valign="middle" >4.2670</td><td align="center" valign="middle" >0.2014</td><td align="center" valign="middle" >0.2180</td></tr><tr><td align="center" valign="middle" >0.04</td><td align="center" valign="middle" >5.1667</td><td align="center" valign="middle" >5.1511</td><td align="center" valign="middle" >0.3067</td><td align="center" valign="middle" >0.3502</td></tr><tr><td align="center" valign="middle" >0.05</td><td align="center" valign="middle" >6.5000</td><td align="center" valign="middle" >6.4377</td><td align="center" valign="middle" >0.4500</td><td align="center" valign="middle" >0.4940</td></tr><tr><td align="center" valign="middle" >0.06</td><td align="center" valign="middle" >8.5000</td><td align="center" valign="middle" >8.4129</td><td align="center" valign="middle" >0.6600</td><td align="center" valign="middle" >0.7276</td></tr><tr><td align="center" valign="middle" >0.07</td><td align="center" valign="middle" >11.8333</td><td align="center" valign="middle" >11.8978</td><td align="center" valign="middle" >1.0033</td><td align="center" valign="middle" >1.1342</td></tr><tr><td align="center" valign="middle" >0.08</td><td align="center" valign="middle" >18.5000</td><td align="center" valign="middle" >18.2874</td><td align="center" valign="middle" >1.6800</td><td align="center" valign="middle" >1.8658</td></tr></tbody></table></table-wrap><p>表1. 轮询系统平均时延、平均排队队长理论值和实验值</p><p>从表中可以看出，实验值与理论存在一定误差，但是都在理论值附近波动。要降低误差可以通过增加节点数和信息分组的数量来实现，但是所需的实验数据的收集，需要花费更长的时间。</p></sec><sec id="s8"><title>6. 结论</title><p>传统无线传感器网络轮询控制的接入协议的研究，大多数是理论分析和软件仿真。本文利用cc2530节点搭建了真实的无线传感器网络，结合Zstack协议栈进行了门限服务控制系统的设计，将门限服务方式应用无线传感器网络。通过实验分析，门限服务控制系统能够在真实的无线传感器网络中正确运行，性能指标和理论值一致。轮询的控制方式将无线传感器网络中多跳变为单跳，有效避免了冲突带来的能量损耗，提高了通信的质量。本系统奠定了轮询系统在硬件上实现的基础，在此基础上，可以扩展为完全服务和限定服务方式，加上两级优先级的轮询模型之后，将进一步提高通信服务质量。</p></sec><sec id="s9"><title>文章引用</title><p>董发志,杨俊东,熊成彪,张颖婕. 无线传感器网络中门限服务控制系统的设计实现Design and Implementation of Threshold Service Control System in Wireless Sensor Networks[J]. 计算机科学与应用, 2018, 08(11): 1706-1712. https://doi.org/10.12677/CSA.2018.811188</p></sec><sec id="s10"><title>参考文献</title></sec></body><back><ref-list><title>References</title><ref id="hanspub.27604-ref1"><label>1</label><mixed-citation publication-type="other" xlink:type="simple">何敏, 赵东风, 保利勇, 等. 一种能量有效的无线传感器网络轮询接入控制协议[J]. 智能系统学报, 2012, 7(3): 265-270.</mixed-citation></ref><ref id="hanspub.27604-ref2"><label>2</label><mixed-citation publication-type="other" xlink:type="simple">刘龙军, 丁洪伟, 柳虔林, 等. 基于FPGA WSN轮询接入控制协议的研究[J]. 通信学报, 2016, 37(10): 181-187.</mixed-citation></ref><ref id="hanspub.27604-ref3"><label>3</label><mixed-citation publication-type="other" xlink:type="simple">苏杨, 杨志军, 丁阳洋, 孙洋洋. 无线传感器网络中轮询系统控制的实现[J]. 电子测量技术, 2018, 41(4): 66-70.</mixed-citation></ref><ref id="hanspub.27604-ref4"><label>4</label><mixed-citation publication-type="other" xlink:type="simple">赵云. 电力杆塔无线传感网络设计[D]: [硕士学位论文]. 南京: 南京大学, 2017.</mixed-citation></ref><ref id="hanspub.27604-ref5"><label>5</label><mixed-citation publication-type="other" xlink:type="simple">Choi, S. and Kim, S. (2017) Dynamic Time Slot Allocation Method Based in TDMA in Underwater Acoustic Sensor Networks. Proceedings of the Korean Information Science Society.</mixed-citation></ref><ref id="hanspub.27604-ref6"><label>6</label><mixed-citation publication-type="other" xlink:type="simple">杨志军, 丁洪伟, 陈传龙. 完全服务和门限服务两级轮询系统E(x)特性分析[J]. 电子学报, 2014, 42(4): 774-778.</mixed-citation></ref><ref id="hanspub.27604-ref7"><label>7</label><mixed-citation publication-type="other" xlink:type="simple">Yang, Z. and Ding, H. (2014) Characteristics of a Two-Class Polling System Model. Tsinghua Science and Technology, 19, 516-520. &lt;br&gt;https://doi.org/10.1109/TST.2014.6919828</mixed-citation></ref><ref id="hanspub.27604-ref8"><label>8</label><mixed-citation publication-type="other" xlink:type="simple">王雄, 杨瑞峰, 郭晨霞, 等. 基于ZigBee无线环境监测网络系统设计[J]. 科技通报, 2017, 33(4): 144-147.</mixed-citation></ref><ref id="hanspub.27604-ref9"><label>9</label><mixed-citation publication-type="other" xlink:type="simple">张秀再, 孔明昊, 吴华娟, 等. 基于ZigBee技术的农田昆虫监测系统[J]. 中国科技论文在线精品论文, 2017, 10(22): 2556-2563.</mixed-citation></ref><ref id="hanspub.27604-ref10"><label>10</label><mixed-citation publication-type="other" xlink:type="simple">孙瑞, 赵杰, 卢岳俊. 基于ZigBee技术的物流仓库温湿度监控系统设计[J]. 保鲜与加工, 2018(2).</mixed-citation></ref><ref id="hanspub.27604-ref11"><label>11</label><mixed-citation publication-type="other" xlink:type="simple">谢小康, 张靖. 基于ZigBee技术的智能家居系统设计[J]. 物联网技术, 2016, 6(12): 69-72.</mixed-citation></ref><ref id="hanspub.27604-ref12"><label>12</label><mixed-citation publication-type="other" xlink:type="simple">章梦彪. 基于ZigBee和ARM9的智能家居与安防系统的研发[D]: [硕士学位论文]. 长春: 吉林大学, 2017.</mixed-citation></ref><ref id="hanspub.27604-ref13"><label>13</label><mixed-citation publication-type="other" xlink:type="simple">黄恒杰, 周涛, 王高才. 基于分布式邻居发现机制的ZigBee网络能耗研究[J]. 计算机科学, 2016, 43(5): 67-72.</mixed-citation></ref></ref-list></back></article>