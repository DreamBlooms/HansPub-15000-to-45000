<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE article  PUBLIC "-//NLM//DTD Journal Publishing DTD v3.0 20080202//EN" "http://dtd.nlm.nih.gov/publishing/3.0/journalpublishing3.dtd"><article xmlns:mml="http://www.w3.org/1998/Math/MathML" xmlns:xlink="http://www.w3.org/1999/xlink" dtd-version="3.0" xml:lang="en" article-type="research article"><front><journal-meta><journal-id journal-id-type="publisher-id">OE</journal-id><journal-title-group><journal-title>Optoelectronics</journal-title></journal-title-group><issn pub-type="epub">2164-5450</issn><publisher><publisher-name>Scientific Research Publishing</publisher-name></publisher></journal-meta><article-meta><article-id pub-id-type="doi">10.12677/OE.2017.72012</article-id><article-id pub-id-type="publisher-id">OE-21203</article-id><article-categories><subj-group subj-group-type="heading"><subject>OE20170200000_96067986.pdf</subject></subj-group><subj-group subj-group-type="Discipline-v2"><subject>工程技术</subject></subj-group></article-categories><title-group><article-title>
 
 
  基于金字塔匹配的智能电表屏幕缺陷自动检测
  Pyramid Matching Based Automatic Screen Defect Detection for Smart Meter
 
</article-title></title-group><contrib-group><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>隋</surname><given-names>晨红</given-names></name><xref ref-type="aff" rid="aff1"><sup>1</sup></xref><xref ref-type="corresp" rid="cor1"><sup>*</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>王</surname><given-names>中训</given-names></name><xref ref-type="aff" rid="aff1"><sup>1</sup></xref><xref ref-type="aff" rid="aff2"><sup>2</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>张</surname><given-names>骏</given-names></name><xref ref-type="aff" rid="aff1"><sup>1</sup></xref><xref ref-type="aff" rid="aff2"><sup>2</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>贺</surname><given-names>鹏飞</given-names></name><xref ref-type="aff" rid="aff1"><sup>1</sup></xref><xref ref-type="aff" rid="aff2"><sup>2</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>范</surname><given-names>文强</given-names></name><xref ref-type="aff" rid="aff1"><sup>1</sup></xref><xref ref-type="aff" rid="aff2"><sup>2</sup></xref></contrib></contrib-group><aff id="aff1"><addr-line>烟台大学光电信息科学技术学院，山东 烟台</addr-line></aff><aff id="aff2"><addr-line>null</addr-line></aff><author-notes><corresp id="cor1">* E-mail:<email>sui6662008@163.com(隋晨)</email>;</corresp></author-notes><pub-date pub-type="epub"><day>05</day><month>06</month><year>2017</year></pub-date><volume>07</volume><issue>02</issue><fpage>77</fpage><lpage>85</lpage><permissions><copyright-statement>&#169; Copyright  2014 by authors and Scientific Research Publishing Inc. </copyright-statement><copyright-year>2014</copyright-year><license><license-p>This work is licensed under the Creative Commons Attribution International License (CC BY). http://creativecommons.org/licenses/by/4.0/</license-p></license></permissions><abstract><p>
 
 
   
   自动检测具有成本低、效率高的优势，逐步成为智能电表字符缺陷检测领域的主要趋势。然而，目前的自动检测方法依赖于字符分割的准确性，极易受屏幕倾斜、背景噪声或亮度不均的影响。为此，本文提出基于高斯金字塔匹配的自动检测方法。该方法无需字符分割过程，而是首先对模板图像中每个字符，线下提取其多尺度金字塔模板，然后对待检测的屏幕图像，利用快速模板匹配搜索其中的字符，最后依据字符个数判断屏幕是否残缺。研究结果表明：该方法能够避免图像质量的影响，快速、准确地检测屏幕缺陷。 Due to the advantages of low cost and high efficiency, automatic detection, instead of manual de-tection, will become the major trend for smart meter character defect detection. However, current automatic detection methods heavily rely on the accuracy of character segmentation. Moreover, they are easily influenced by the image quality, e.g., inclination, noise, and non-uniform intensity of the screen. To this end, this paper proposes a Gaussian pyramid matching based on automatic method without character segmentation. This method first proposes the multi-scale pyramid temples of the standard image. Then, the fast template matching is used to search the characters in the image. Finally, according to the number of characters detected, we can determine whether the meter has defection. Experiments on real meters show that the proposed method is not sensitive to the image quality, and can achieve fast and accurate detection of the screen defects.
    
  
 
</p></abstract><kwd-group><kwd>屏幕缺陷，字符检测，高斯金字塔，匹配，多尺度, Screen Defect</kwd><kwd> Character Detection</kwd><kwd> Gaussian Pyramid</kwd><kwd> Matching</kwd><kwd> Multi-Scale</kwd></kwd-group></article-meta></front><body><sec id="s1"><title>基于金字塔匹配的智能电表屏幕缺陷自动检测<sup> </sup></title><p>隋晨红<sup>*</sup>，王中训，张骏，贺鹏飞，范文强</p><p>烟台大学光电信息科学技术学院，山东 烟台</p><disp-formula id="hanspub.21203-formula285"><graphic xlink:href="http://html.hanspub.org/file/7-2140122x5_hanspub.png"  xlink:type="simple"/></disp-formula><p>收稿日期：2017年6月9日；录用日期：2017年6月23日；发布日期：2017年6月29日</p><disp-formula id="hanspub.21203-formula286"><graphic xlink:href="http://html.hanspub.org/file/7-2140122x6_hanspub.png"  xlink:type="simple"/></disp-formula></sec><sec id="s2"><title>摘 要</title><p>自动检测具有成本低、效率高的优势，逐步成为智能电表字符缺陷检测领域的主要趋势。然而，目前的自动检测方法依赖于字符分割的准确性，极易受屏幕倾斜、背景噪声或亮度不均的影响。为此，本文提出基于高斯金字塔匹配的自动检测方法。该方法无需字符分割过程，而是首先对模板图像中每个字符，线下提取其多尺度金字塔模板，然后对待检测的屏幕图像，利用快速模板匹配搜索其中的字符，最后依据字符个数判断屏幕是否残缺。研究结果表明：该方法能够避免图像质量的影响，快速、准确地检测屏幕缺陷。</p><p>关键词 :屏幕缺陷，字符检测，高斯金字塔，匹配，多尺度</p><disp-formula id="hanspub.21203-formula287"><graphic xlink:href="http://html.hanspub.org/file/7-2140122x7_hanspub.png"  xlink:type="simple"/></disp-formula><p>Copyright &#169; 2017 by authors and Hans Publishers Inc.</p><p>This work is licensed under the Creative Commons Attribution International License (CC BY).</p><p>http://creativecommons.org/licenses/by/4.0/</p><p><img src="http://image.hanspub.org:8080\Html/htmlimages\1-2890033x\e70a10f1-7c93-45ea-9603-062237856e4b.png" /><img src="http://image.hanspub.org:8080\Html\htmlimages\1-2890033x\e898c85e-ffc4-45c9-b817-14224a4d6960.png" /></p></sec><sec id="s3"><title>1. 引言</title><p>智能电表是集双向费率计量、控制、实时监测及用户信息交互等多种功能于一体的智能终端。由于焊接或工艺等问题，电表屏幕存在字符显示不全或不显示的缺陷，严重影响与用户交互信息的正常显示。因此，点亮电表并观察字符显示情况的液晶屏(LCD)缺陷检测成为保证智能电表质量的重要环节 [<xref ref-type="bibr" rid="hanspub.21203-ref1">1</xref>] 。</p><p>然而，人工检测的人力成本高、时间长，且存在操作不规范的问题。相较而言，机器视觉是一种成本低、效率高的自动检测方式。它通过首先机器代替人眼获取目标的图像，然后结合图像处理与分析技术，达到目标检测或识别的目的，已广泛用于工业生产的外包装检测、零件检测，以及农业水果自动分拣 [<xref ref-type="bibr" rid="hanspub.21203-ref2">2</xref>] [<xref ref-type="bibr" rid="hanspub.21203-ref3">3</xref>] [<xref ref-type="bibr" rid="hanspub.21203-ref4">4</xref>] [<xref ref-type="bibr" rid="hanspub.21203-ref5">5</xref>] 。因此，有关机器视觉的电表屏幕字符缺陷检测成为研究热点 [<xref ref-type="bibr" rid="hanspub.21203-ref6">6</xref>] [<xref ref-type="bibr" rid="hanspub.21203-ref7">7</xref>] 。</p><p>针对采集的LCD图像对比度低的问题，文献 [<xref ref-type="bibr" rid="hanspub.21203-ref8">8</xref>] 提出利用直方图均衡化的手段进行增强，以提高背景与字符之间的差异。文献 [<xref ref-type="bibr" rid="hanspub.21203-ref9">9</xref>] [<xref ref-type="bibr" rid="hanspub.21203-ref10">10</xref>] 针对增强后的图像，提出直接通过比较待检测LCD灰度与模板灰度的差值，来判断LCD屏是否存在缺陷。然而，由于电表摆放可能存在倾斜，造成电表图像不对齐，即图像上同一点显示电表的不同位置。因此，LCD图像与模板的差值，不一定说明字符必然存在缺失。此外，无缺陷电表的图像间亦可能存在明暗差异，于是直接利用图像间的差值来判断字符缺陷易导致误检。</p><p>为此，文献 [<xref ref-type="bibr" rid="hanspub.21203-ref11">11</xref>] [<xref ref-type="bibr" rid="hanspub.21203-ref12">12</xref>] 提出抠取图像中的字符与模板字符的差异。该类方法主要包括图像预处理、显示区域提取、字符分割以及缺陷判断四个阶段。文献 [<xref ref-type="bibr" rid="hanspub.21203-ref12">12</xref>] 首先进行图像增强，其次通过反投影直方图粗略提取显示屏区域，然后进一步利用Hough变换 [<xref ref-type="bibr" rid="hanspub.21203-ref13">13</xref>] 确定屏幕直线边缘，在此基础上，又通过Canny边缘检测 [<xref ref-type="bibr" rid="hanspub.21203-ref14">14</xref>] 和投影方法进行字符分割，最后将分割后的字符与模板字符进行平方差匹配。文献提出采用形态学开闭运算，对梯度图像进行重构，以尽可能完整地提取字符边缘。为判断字符是否完整，文献 [<xref ref-type="bibr" rid="hanspub.21203-ref11">11</xref>] 提出依据矩形框内文字或符号所占比例大小。该类方法的效果不仅依赖字符分割的准确性，而且对矩形框位置敏感。当字符未得到完整地分割或矩形框位置出现一定偏移量，则会造成误检。另外，电表背光灯位于LCD屏的左半部分，而彩色指示灯位于屏外的面板区。于是，受背光灯及彩色指示灯的影响，LCD屏亮度不均匀 [<xref ref-type="bibr" rid="hanspub.21203-ref15">15</xref>] 。这一方面加大了完整提取屏幕区域的难度，另一方面增强了细密纹理对字符分割的干扰，进而导致字符轮廓提取的准确度下降。</p><p>为避免对字符分割的依赖，缓解对屏幕图像质量的敏感性，本文提出基于图像金字塔匹配的自动检测方法。它首先对模板图像中每个字符，线下提取其多方向的金字塔特征，以更好地描述字符，并降低亮度不均、纹理噪声，以及图像不对齐等因素对字符检测的影响。然后对待检测的图像，利用快速模板匹配搜索其中的字符，从而避免了屏幕区提取与字符分割。最后依据字符个数判断屏幕是否残缺。利用对比度不同、残缺程度不同的六幅智能电表图像进行实验，结果表明，该方法能够准确地检测出屏幕缺陷。</p></sec><sec id="s4"><title>2. 基于金字塔匹配的自动缺陷检测</title><p>智能电表屏幕缺陷检测旨在判断屏幕各个字符是否完整。因此，屏幕缺陷检测要以准确识别屏幕图像中的各个字符为基础。然而，由于电表屏幕字符包含不同大小的汉字、字母、数字，及符号，识别各字符需要构建多尺度特征，以克服字符尺度变化的影响。图像金字塔是常用的多尺度图像特征 [<xref ref-type="bibr" rid="hanspub.21203-ref16">16</xref>] 。它通过不断对图像进行滤波和降采样处理，能够生成的一系列不同尺度的平滑图像。这不仅可以降低噪声的干扰，而且能够克服目标尺度变化的影响。为此，本文将首先通过建立各字符的图像金子塔，形成字符多尺度模板集。然后利用模板匹配方法，查找待检测屏幕图像中与已知字符特征相近的字符，从而利用字符个数，来判断电表屏幕是否有缺陷，如图1所示。</p><sec id="s4_1"><title>2.1. 高斯金子塔</title><p>高斯金字塔的主要思想是不断利用高斯滤波器 [<xref ref-type="bibr" rid="hanspub.21203-ref17">17</xref>] 平滑和降采样处理生成的低分辨率图像序列，降低噪声的同时，通过图像多尺度的描述来避免目标尺度变化对检测结果的影响。假设原始图像为<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/7-2140122x10_hanspub.png" xlink:type="simple"/></inline-formula>，经高斯滤波，再隔行隔列地降采样，所得低分辨率图像为<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/7-2140122x11_hanspub.png" xlink:type="simple"/></inline-formula>。若继续对<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/7-2140122x12_hanspub.png" xlink:type="simple"/></inline-formula>进行高斯滤波并降采样，所得图像则称为为<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/7-2140122x13_hanspub.png" xlink:type="simple"/></inline-formula>，如此反复<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/7-2140122x14_hanspub.png" xlink:type="simple"/></inline-formula>次，则得到尺寸越来越小的低分辨率图像序列<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/7-2140122x15_hanspub.png" xlink:type="simple"/></inline-formula>，即高斯金字塔。其中，<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/7-2140122x16_hanspub.png" xlink:type="simple"/></inline-formula>分别代表金字塔中的第<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/7-2140122x17_hanspub.png" xlink:type="simple"/></inline-formula>层图像。</p><p>假设原图<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/7-2140122x18_hanspub.png" xlink:type="simple"/></inline-formula>的大小为<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/7-2140122x19_hanspub.png" xlink:type="simple"/></inline-formula>，<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/7-2140122x20_hanspub.png" xlink:type="simple"/></inline-formula>和<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/7-2140122x21_hanspub.png" xlink:type="simple"/></inline-formula>分别为<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/7-2140122x22_hanspub.png" xlink:type="simple"/></inline-formula>高斯金子塔中的第<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/7-2140122x23_hanspub.png" xlink:type="simple"/></inline-formula>层图像，则对于<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/7-2140122x24_hanspub.png" xlink:type="simple"/></inline-formula>中的任意一点<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/7-2140122x25_hanspub.png" xlink:type="simple"/></inline-formula>，可由第<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/7-2140122x26_hanspub.png" xlink:type="simple"/></inline-formula>层图像<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/7-2140122x27_hanspub.png" xlink:type="simple"/></inline-formula>获得，如式(1)所示：</p><disp-formula id="hanspub.21203-formula288"><label>(1)</label><graphic position="anchor" xlink:href="http://html.hanspub.org/file/7-2140122x28_hanspub.png"  xlink:type="simple"/></disp-formula><p>其中，<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/7-2140122x29_hanspub.png" xlink:type="simple"/></inline-formula>，<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/7-2140122x30_hanspub.png" xlink:type="simple"/></inline-formula>，<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/7-2140122x31_hanspub.png" xlink:type="simple"/></inline-formula>是窗口函数或权函数，其大小为<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/7-2140122x32_hanspub.png" xlink:type="simple"/></inline-formula>。当<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/7-2140122x33_hanspub.png" xlink:type="simple"/></inline-formula>时，窗口函数通常为 [<xref ref-type="bibr" rid="hanspub.21203-ref18">18</xref>] ：</p><disp-formula id="hanspub.21203-formula289"><label>(2)</label><graphic position="anchor" xlink:href="http://html.hanspub.org/file/7-2140122x34_hanspub.png"  xlink:type="simple"/></disp-formula><p>图1. 基于金字塔匹配的屏幕字符缺陷检测算法流程</p><p>于是，若将智能电表屏幕字符按空间位置分组，可构建各组字符的图像金字塔，从而形成字符的不同尺度特征。图2表示<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/7-2140122x36_hanspub.png" xlink:type="simple"/></inline-formula>时的电表屏幕图像高斯金字塔。</p><p>为此，本文将采用标准屏幕图像构造字符模板，进而依据式(1)生成字符高斯金字塔，为屏幕字符检测提供多尺度描述，克服字符尺度变化的影响，便于检测出尺寸不同的相同字符。另外，高斯滤波能够降低噪声点的干扰，提高检测结果的可靠性。</p></sec><sec id="s4_2"><title>2.2. 归一化互相关匹配</title><p>模板匹配是常用的目标检测与识别方法。其基本思想是将标准目标图像作为模板，并在待检测图像中逐像素地滑动模板，通过比较模板和其覆盖子图间的相近程度，确定待检测图像中是否存在与模板一致的目标。</p><p>模板匹配主要包括以下三步：首先将已知的标准目标图像作为模板图像，并从中提取用于匹配过程的特征。然后，从待检测图像提取与模板特征对应的特征。最后，基于提取的特征，比较图像中与模板的相似程度，从而确定目标是否存在。</p><p>于是，本文将基于字符图像金字塔，从中提取灰度特征进行模板匹配。这不仅有助于检测出不同尺度的字符，而且可避免字符区域定位和字符是准确分割过程，从而有利于提高字符检测的效率和准确度。</p><p>目前模板匹配的准则主要分为两大类 [<xref ref-type="bibr" rid="hanspub.21203-ref19">19</xref>] ：距离度量准则和相似性度量准则。前者是度量模板与待匹配图像间的平均绝对误差或平方误差和；后者则是计算模板与待匹配图像间的相关性，如归一化互相关。由于距离度量准则要求图像与模板逐像素完全匹配，容易受图像亮度变化的影响，于是本文采用归一化互相关系数来度量匹配程度。设<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/7-2140122x37_hanspub.png" xlink:type="simple"/></inline-formula>为<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/7-2140122x38_hanspub.png" xlink:type="simple"/></inline-formula>的待检测图像，若采用<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/7-2140122x39_hanspub.png" xlink:type="simple"/></inline-formula>的模板<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/7-2140122x40_hanspub.png" xlink:type="simple"/></inline-formula>在上搜索与之匹配的图像窗口，则<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/7-2140122x41_hanspub.png" xlink:type="simple"/></inline-formula>左上角移到<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/7-2140122x42_hanspub.png" xlink:type="simple"/></inline-formula>处时，归一化互相关系数<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/7-2140122x43_hanspub.png" xlink:type="simple"/></inline-formula>为 [<xref ref-type="bibr" rid="hanspub.21203-ref20">20</xref>] [<xref ref-type="bibr" rid="hanspub.21203-ref21">21</xref>] ：</p><disp-formula id="hanspub.21203-formula290"><label>(3)</label><graphic position="anchor" xlink:href="http://html.hanspub.org/file/7-2140122x44_hanspub.png"  xlink:type="simple"/></disp-formula><p>其中，</p><p>图2. 智能电表屏幕图像高斯金字塔</p><disp-formula id="hanspub.21203-formula291"><graphic xlink:href="http://html.hanspub.org/file/7-2140122x46_hanspub.png"  xlink:type="simple"/></disp-formula><disp-formula id="hanspub.21203-formula292"><graphic xlink:href="http://html.hanspub.org/file/7-2140122x47_hanspub.png"  xlink:type="simple"/></disp-formula><p>于是，对于标准屏幕图像的各种字符<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/7-2140122x48_hanspub.png" xlink:type="simple"/></inline-formula>，其中<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/7-2140122x49_hanspub.png" xlink:type="simple"/></inline-formula>为屏幕中不同字符的种类，而每种字符的标准个数为<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/7-2140122x50_hanspub.png" xlink:type="simple"/></inline-formula>，<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/7-2140122x51_hanspub.png" xlink:type="simple"/></inline-formula>为匹配阈值，本文提出的基于金字塔匹配的屏幕缺陷检测基本过程为：首先，通过<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/7-2140122x52_hanspub.png" xlink:type="simple"/></inline-formula>次高斯滤波和降采样技术，生成每种字符<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/7-2140122x53_hanspub.png" xlink:type="simple"/></inline-formula>的高斯金字塔，从而得到字符高斯金字塔模板集<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/7-2140122x54_hanspub.png" xlink:type="simple"/></inline-formula>；其次，依据式(3)，计算每种字符模板<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/7-2140122x55_hanspub.png" xlink:type="simple"/></inline-formula>与待检测图像<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/7-2140122x56_hanspub.png" xlink:type="simple"/></inline-formula>的归一化灰度互相关系数<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/7-2140122x57_hanspub.png" xlink:type="simple"/></inline-formula>；然后，统计<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/7-2140122x58_hanspub.png" xlink:type="simple"/></inline-formula>中大于匹配阈值<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/7-2140122x59_hanspub.png" xlink:type="simple"/></inline-formula>的数值个数<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/7-2140122x60_hanspub.png" xlink:type="simple"/></inline-formula>；最后，若<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/7-2140122x61_hanspub.png" xlink:type="simple"/></inline-formula>，则说明待检测图像<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/7-2140122x62_hanspub.png" xlink:type="simple"/></inline-formula>与标准屏幕中<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/7-2140122x63_hanspub.png" xlink:type="simple"/></inline-formula>字符个数一致，若<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/7-2140122x64_hanspub.png" xlink:type="simple"/></inline-formula>，则确定屏幕字符<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/7-2140122x65_hanspub.png" xlink:type="simple"/></inline-formula>处有缺陷。算法1给出本文检测方法的算法伪代码。</p><disp-formula id="hanspub.21203-formula293"><graphic xlink:href="http://html.hanspub.org/file/7-2140122x66_hanspub.png"  xlink:type="simple"/></disp-formula></sec></sec><sec id="s5"><title>3. 实验</title><p>智能电表屏幕缺陷检测主要检查上电后，电表屏幕字符显示不完整或不显示的情况。然而，电表屏幕图像质量不一，可能会影响屏幕字符缺陷的检测。例如，由于电表屏幕本身质量问题和背景灯的影响，导致上电后屏幕明暗不均，并含程度不同的细纹噪声。此外，彩色指示灯也对屏幕各处的亮度产生影响，进一步加剧屏幕亮度的不均。</p><p>因此，为验证基于高斯金字塔匹配的屏幕缺陷检测方法的有效性，本文将对不同质量的屏幕图像进行缺陷检测，观察该方法对图像质量的敏感性。</p><sec id="s5_1"><title>3.1 实验数据</title><p>本文将图3(a)~(f)作为验证本文方法有效性的实验数据，并采用图4所示的<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/7-2140122x67_hanspub.png" xlink:type="simple"/></inline-formula>电表屏幕图像作为标准模板，用于构建字符金字塔。</p><p>图3. 实验数据</p><p>由图3可明显看出，背景灯光的亮度差异造成各电表屏幕不仅整体明暗不同、局部存在亮斑。此外，各图还存在不同程度的偏斜。于是，下面将采用客观指标分析这些图像与模板间的差异大小。</p></sec><sec id="s5_2"><title>3.2. 图像质量评价指标</title><p>均方误差(MSE)峰值信噪比(PSNR)均是常用的图像质量评价指标。结构性相似准则(SSIM)能够综合考虑亮度、对比度和结构三方面的因素，客观度量图像的质量。</p><p>为此，本文将基于MSE、PSNR和SSIM三种客观质量评价准则，分析不同电表屏幕图像的质量差异。</p><p>(1) MSE</p><p>MSE主要衡量图像偏离标准图像的程度。式(4)给出<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/7-2140122x74_hanspub.png" xlink:type="simple"/></inline-formula>大小的图像<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/7-2140122x75_hanspub.png" xlink:type="simple"/></inline-formula>和模板<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/7-2140122x76_hanspub.png" xlink:type="simple"/></inline-formula>之间的均方误差，其值愈大，则表明图像<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/7-2140122x77_hanspub.png" xlink:type="simple"/></inline-formula>的质量愈差。</p><disp-formula id="hanspub.21203-formula294"><label>(4)</label><graphic position="anchor" xlink:href="http://html.hanspub.org/file/7-2140122x78_hanspub.png"  xlink:type="simple"/></disp-formula><p>其中，<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/7-2140122x79_hanspub.png" xlink:type="simple"/></inline-formula>分别表示原始图像与标准模板。</p><p>(2) PSNR</p><p>PSNR主要通过MSE刻画的图像<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/7-2140122x80_hanspub.png" xlink:type="simple"/></inline-formula>与模板<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/7-2140122x81_hanspub.png" xlink:type="simple"/></inline-formula>间的亮度差异，来间接反映图像的质量。与MSE不同的是，PSNR值越大，说明图像<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/7-2140122x82_hanspub.png" xlink:type="simple"/></inline-formula>的质量越高，反之，亦然。如式(5)所示。</p><disp-formula id="hanspub.21203-formula295"><label>(5)</label><graphic position="anchor" xlink:href="http://html.hanspub.org/file/7-2140122x83_hanspub.png"  xlink:type="simple"/></disp-formula><p>(3) SSIM</p><p>图像质量不仅体现在亮度及对比度方面，更受到结构信息的影响。为此，文献 [<xref ref-type="bibr" rid="hanspub.21203-ref22">22</xref>] 提出SSIM准则，从亮度、对比度以及结构性多角度考虑图像<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/7-2140122x84_hanspub.png" xlink:type="simple"/></inline-formula>与模板<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/7-2140122x85_hanspub.png" xlink:type="simple"/></inline-formula>的相似性，具体如式(6)所示。</p><disp-formula id="hanspub.21203-formula296"><label>(6)</label><graphic position="anchor" xlink:href="http://html.hanspub.org/file/7-2140122x86_hanspub.png"  xlink:type="simple"/></disp-formula><p>其中，<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/7-2140122x87_hanspub.png" xlink:type="simple"/></inline-formula>分别是图像<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/7-2140122x88_hanspub.png" xlink:type="simple"/></inline-formula>与模板<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/7-2140122x89_hanspub.png" xlink:type="simple"/></inline-formula>的均值，<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/7-2140122x90_hanspub.png" xlink:type="simple"/></inline-formula>分别是图像<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/7-2140122x91_hanspub.png" xlink:type="simple"/></inline-formula>与模板<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/7-2140122x92_hanspub.png" xlink:type="simple"/></inline-formula>的标准差，<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/7-2140122x93_hanspub.png" xlink:type="simple"/></inline-formula>分别是图像<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/7-2140122x94_hanspub.png" xlink:type="simple"/></inline-formula>与模板<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/7-2140122x95_hanspub.png" xlink:type="simple"/></inline-formula>间的互相关，如式(7)所示。</p><disp-formula id="hanspub.21203-formula297"><label>(7)</label><graphic position="anchor" xlink:href="http://html.hanspub.org/file/7-2140122x96_hanspub.png"  xlink:type="simple"/></disp-formula></sec><sec id="s5_3"><title>3.3. 智能电表屏幕图像质量分析</title><p>为度量图3(a)~(f)所示各电表屏幕图像的质量差异，分别采用MSE、PSNR、SSIM进行分析，实验结果如表1所示。</p><p>其中，(a)~(f)分别对应图3(a)~(f)所示电表屏幕图像，加粗表示最优值。</p><p>由表1不难看出，图3(a)~(f)电表屏幕图像存在明显的质量差异，其中，(a)中MSE最大，PSNR最小，而(c)中MSE最小，PSNR最大，这说明图3(a)对应电表屏幕图像与模板间的差异较大，而图3(c)对应电表屏幕图像与模板间的差异较小。</p><p>通过对比表1中各电表屏幕图像与标准图像间的SSIM亦可发现，(c)中的SSIM最高，即其与模板间的相似程度最大；(e)中SSIM却最低，仅为0.37，(b)、(d)、(f)略高于(e)却均不及0.5，而(a)中SSIM达到0.57。综合MSE、PSNR、SSIM三个指标可见图4(c)对应电表屏幕图像质量最好，而其它电表屏幕图像存在不同程度的差异。</p></sec><sec id="s5_4"><title>3.4. 智能电表屏幕图像缺陷检测结果</title><p>针对图3(a)~(f)所示的智能电表屏幕图像，图5(a)~(f)给出基于高斯金子塔匹配的检测结果。图中Error表示该电表存在缺陷，红色矩形框标识缺陷字符的位置，而Ok表示该智能电表屏幕字符显示完整。</p><p>图4. 电表屏幕标准模板</p><table-wrap id="table1" ><label><xref ref-type="table" rid="table1">Table 1</xref></label><caption><title> Analysis on the quality of the meter screen imag</title></caption><table><tbody><thead><tr><th align="center" valign="middle" >屏幕图像 评价指标</th><th align="center" valign="middle" >(a)</th><th align="center" valign="middle" >(b)</th><th align="center" valign="middle" >(c)</th><th align="center" valign="middle" >(d)</th><th align="center" valign="middle" >(e)</th><th align="center" valign="middle" >(f)</th></tr></thead><tr><td align="center" valign="middle" >MSE</td><td align="center" valign="middle" >3278.15</td><td align="center" valign="middle" >1888.32</td><td align="center" valign="middle" >1200.79</td><td align="center" valign="middle" >1915.96</td><td align="center" valign="middle" >2276.32</td><td align="center" valign="middle" >1813.54</td></tr><tr><td align="center" valign="middle" >PSNR</td><td align="center" valign="middle" >13.01</td><td align="center" valign="middle" >15.40</td><td align="center" valign="middle" >17.37</td><td align="center" valign="middle" >15.34</td><td align="center" valign="middle" >14.59</td><td align="center" valign="middle" >15.58</td></tr><tr><td align="center" valign="middle" >SSIM</td><td align="center" valign="middle" >0.56</td><td align="center" valign="middle" >0.44</td><td align="center" valign="middle" >0.67</td><td align="center" valign="middle" >0.47</td><td align="center" valign="middle" >0.37</td><td align="center" valign="middle" >0.49</td></tr></tbody></table></table-wrap><p>表1. 电表屏幕图像质量分析</p><p>图5. 智能电表屏幕缺陷检测结果</p><p>由图5可知，尽管(c)屏幕对比度低且存在不均匀亮斑，但均未对检测结果产生影响，其它屏幕不论质量如何，仍被检测出不同程度的缺陷。其中，(d)、(e)的缺陷程度最为严重，而(b)、(f)虽有缺陷，但完整度较高。</p></sec></sec><sec id="s6"><title>4. 结论</title><p>本文提出基于图像金字塔匹配的自动检测方法。该方法首先构建标准屏幕字符的高斯金字塔集，以形成各种字符的多维描述，进而搜索待检测屏幕图像与金字塔集相匹配的字符，最后依据字符个数判断屏幕字符是否存在缺陷。实验结果表明，它不仅能够避免字符分割过程，而且能够有效降低对亮度不均、纹理噪声以及倾斜与不对齐等图像质量因素的敏感性。</p></sec><sec id="s7"><title>基金项目</title><p>国家自然科学基金(编号：61601397)、烟台大学博士基金(编号：07060)。</p></sec><sec id="s8"><title>文章引用</title><p>隋晨红,王中训,张骏,贺鹏飞,范文强. 基于金字塔匹配的智能电表屏幕缺陷自动检测Pyramid Matching Based Automatic Screen Defect Detection for Smart Meter[J]. 光电子, 2017, 07(02): 77-85. http://dx.doi.org/10.12677/OE.2017.72012</p></sec><sec id="s9"><title>参考文献 (References)</title></sec></body><back><ref-list><title>References</title><ref id="hanspub.21203-ref1"><label>1</label><mixed-citation publication-type="other" xlink:type="simple">王沛, 黄帅. 智能电表质量监控仍是关键[J]. 进出口经理人, 2012(6): 48-50.</mixed-citation></ref><ref id="hanspub.21203-ref2"><label>2</label><mixed-citation publication-type="other" xlink:type="simple">李萌, 孙铁波. 基于机器视觉的食品包装缺陷检测研究[J]. 食品研究与开发, 2016, 37(24): 125-127.</mixed-citation></ref><ref id="hanspub.21203-ref3"><label>3</label><mixed-citation publication-type="other" xlink:type="simple">管经纬. 基于机器视觉的工件自动分拣系统研究[D]: [硕士学位论文]. 上海: 东华大学, 2015.</mixed-citation></ref><ref id="hanspub.21203-ref4"><label>4</label><mixed-citation publication-type="other" xlink:type="simple">白菲. 基于机器视觉的柑橘水果外形识别方法研究[D]: [硕士学位论文]. 北京: 中国农业大学,2005.</mixed-citation></ref><ref id="hanspub.21203-ref5"><label>5</label><mixed-citation publication-type="other" xlink:type="simple">Reid, J.F. and Litchfield, J.B. (1993) Machine Vision for the Detection of Defects in Foil Packages: Report on a Student Project. American Society of Agricultural Engineers.</mixed-citation></ref><ref id="hanspub.21203-ref6"><label>6</label><mixed-citation publication-type="other" xlink:type="simple">Sonka, M., Hlavac, V., Boyle, R., et al. 图像处理、分析与机器视觉[M]. 北京: 清华大学出版社, 2016.</mixed-citation></ref><ref id="hanspub.21203-ref7"><label>7</label><mixed-citation publication-type="other" xlink:type="simple">梁伟建, 洪涛, 林笃盛, 等. 基于机器视觉的智能电表外观缺陷检测系统设计[J]. 电测与仪表, 2013, 50(10): 64- 68.</mixed-citation></ref><ref id="hanspub.21203-ref8"><label>8</label><mixed-citation publication-type="other" xlink:type="simple">张慧. 电表视觉检测的图像预处理技术研究[J]. 科技信息, 2011(13): 33-34.</mixed-citation></ref><ref id="hanspub.21203-ref9"><label>9</label><mixed-citation publication-type="other" xlink:type="simple">梁伟建, 洪涛, 林笃盛, 等. 基于机器视觉的智能电表外观缺陷检测系统设计[J]. 电测与仪表, 2013, 50(10): 64- 68.</mixed-citation></ref><ref id="hanspub.21203-ref10"><label>10</label><mixed-citation publication-type="other" xlink:type="simple">阮春雷, 姚明海, 黄磊. 基于计算机视觉的电能表检测系统[J]. 计算机系统应用, 2013, 22(2): 57-60.</mixed-citation></ref><ref id="hanspub.21203-ref11"><label>11</label><mixed-citation publication-type="other" xlink:type="simple">谢钢. 基于机器视觉的智能电表自动化检测技术研究[D]: [硕士学位论文]. 绵阳: 西南科技大学, 2013.</mixed-citation></ref><ref id="hanspub.21203-ref12"><label>12</label><mixed-citation publication-type="other" xlink:type="simple">王舒憬, 陈凯. 基于图像处理的智能电表显示缺陷自动检测系统设计[J]. 电测与仪表, 2016, 53(4): 63-68.</mixed-citation></ref><ref id="hanspub.21203-ref13"><label>13</label><mixed-citation publication-type="other" xlink:type="simple">安博文, 胡春暖, 刘杰, 等. 基于Hough变换的海天线检测算法研究[J]. 红外技术, 2015, 37(3): 196-199.</mixed-citation></ref><ref id="hanspub.21203-ref14"><label>14</label><mixed-citation publication-type="other" xlink:type="simple">杨振亚, 白治江, 王成道. 自适应Canny边缘检测算法[J]. 上海海事大学学报, 2003, 24(4): 373-377.</mixed-citation></ref><ref id="hanspub.21203-ref15"><label>15</label><mixed-citation publication-type="other" xlink:type="simple">谢钢, 林茂松, 代彦辉. 低对比度下的智能电表液晶屏外观检测研究[J]. 计算机工程与应用, 2014, 50(2): 247- 251.</mixed-citation></ref><ref id="hanspub.21203-ref16"><label>16</label><mixed-citation publication-type="other" xlink:type="simple">Watson, A.B. (1989) A Hexagonal Orthogonal-Oriented Pyramid as a Model of Image Representation in Visual Cortex. IEEE Transactions on Biomedical Engineering, 36, 97-106. https://doi.org/10.1109/10.16453</mixed-citation></ref><ref id="hanspub.21203-ref17"><label>17</label><mixed-citation publication-type="other" xlink:type="simple">Yan, L., Wang, R., Zhen, C., et al. (2016) Spatial Pyramid Covariance-Based Compact Video Code for Robust Face Retrieval in TV-Series. IEEE Transactions on Image Processing, 25, 5905-5919.  
https://doi.org/10.1109/TIP.2016.2616297</mixed-citation></ref><ref id="hanspub.21203-ref18"><label>18</label><mixed-citation publication-type="other" xlink:type="simple">南颖. 交通安全地理信息系统的开发[J]. 延边大学学报: 自然科学版, 1997(2): 39-44.</mixed-citation></ref><ref id="hanspub.21203-ref19"><label>19</label><mixed-citation publication-type="other" xlink:type="simple">桑农, 张天序, 曹治国. 基于神经网络的边缘强度互相关匹配可信度分析[J]. 中国图象图形学报, 2000, 5(7): 580-584.</mixed-citation></ref><ref id="hanspub.21203-ref20"><label>20</label><mixed-citation publication-type="other" xlink:type="simple">邢藏菊, 温兰兰, 何苏勤. 基于序贯相似性检测的NCC目标跟踪快速匹配方法[J]. 电子设计工程, 2015(3): 187- 190.</mixed-citation></ref><ref id="hanspub.21203-ref21"><label>21</label><mixed-citation publication-type="other" xlink:type="simple">程良伦, 江伟欢. SMD缺陷检测中快速图像匹配算法研究[J]. 计算机应用与软件, 2010, 27(11): 117-120.</mixed-citation></ref><ref id="hanspub.21203-ref22"><label>22</label><mixed-citation publication-type="other" xlink:type="simple">朱里, 李乔亮, 张婷, 等. 基于结构相似性的图像质量评价方法[J]. 光电工程, 2007, 34(11): 108-113.</mixed-citation></ref></ref-list></back></article>