<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE article  PUBLIC "-//NLM//DTD Journal Publishing DTD v3.0 20080202//EN" "http://dtd.nlm.nih.gov/publishing/3.0/journalpublishing3.dtd"><article xmlns:mml="http://www.w3.org/1998/Math/MathML" xmlns:xlink="http://www.w3.org/1999/xlink" dtd-version="3.0" xml:lang="en" article-type="research article"><front><journal-meta><journal-id journal-id-type="publisher-id">HJDM</journal-id><journal-title-group><journal-title>Hans Journal of Data Mining</journal-title></journal-title-group><issn pub-type="epub">2163-145X</issn><publisher><publisher-name>Scientific Research Publishing</publisher-name></publisher></journal-meta><article-meta><article-id pub-id-type="doi">10.12677/HJDM.2020.101009</article-id><article-id pub-id-type="publisher-id">HJDM-33977</article-id><article-categories><subj-group subj-group-type="heading"><subject>HJDM20200100000_69372272.pdf</subject></subj-group><subj-group subj-group-type="Discipline-v2"><subject>信息通讯</subject></subj-group></article-categories><title-group><article-title>
 
 
  基于SVM的印刷体数学公式识别的研究
  Research on Recognition of Printed Mathematical Formula Based on SVM
 
</article-title></title-group><contrib-group><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>文</surname><given-names>伟海</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>杨</surname><given-names>立洪</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>周</surname><given-names>瑶</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib></contrib-group><aff id="aff2"><addr-line>华南理工大学数学学院，广东 广州</addr-line></aff><aff id="aff1"><addr-line>null</addr-line></aff><pub-date pub-type="epub"><day>11</day><month>12</month><year>2019</year></pub-date><volume>10</volume><issue>01</issue><fpage>90</fpage><lpage>95</lpage><permissions><copyright-statement>&#169; Copyright  2014 by authors and Scientific Research Publishing Inc. </copyright-statement><copyright-year>2014</copyright-year><license><license-p>This work is licensed under the Creative Commons Attribution International License (CC BY). http://creativecommons.org/licenses/by/4.0/</license-p></license></permissions><abstract><p>
 
 
  传统的数学公式识别，通常建立在OCR技术进行图片文字识别的基础上，对目标公式进行符号切割，通过构建数学符号数据库，然后两两比较相似度，然后返回最大相似度的符号名称，作为识别结果。该方法，对数学符号数据库要求极高，鉴于实际情况，公式存在字号大小、粗细体、正斜体、各种字体等差异，导致该方法识别效果不佳。本文基于印刷体数学公式特点，重新构建字符标准库，并结合机器学习思想，应用SVM算法进行公式识别，并进一步提取字符特征，提升公式识别精度，实验结果显示，识别结果良好。
   Traditional mathematical formula recognition, usually based on OCR technology for image and text recognition, cuts the symbol of the target formula, builds the mathematical symbol database, com-pares the similarity, and then returns the symbol name of the maximum similarity as the recogni-tion result. In view of the actual situation, there are some differences in the formula, such as font size, thickness, italics, various fonts and so on. Based on the characteristics of printed mathematical formulas, this paper reconstructs the character standard library, and combines with the machine learning idea, uses SVM algorithm to recognize formulas, and further extracts the character features, improves the accuracy of formula recognition. The experimental results show that the recognition results are good.
 
</p></abstract><kwd-group><kwd>公式识别，标准库，机器学习，SVM, Formula Recognition</kwd><kwd> Standard Library</kwd><kwd> Machine Learning</kwd><kwd> SVM</kwd></kwd-group></article-meta></front><body><sec id="s1"><title>基于SVM的印刷体数学公式识别的研究<sup> </sup></title><p>文伟海，杨立洪，周瑶</p><p>华南理工大学数学学院，广东 广州</p><p>收稿日期：2020年1月2日；录用日期：2020年1月9日；发布日期：2020年1月16日</p><disp-formula id="hanspub.33977-formula69"><graphic xlink:href="//html.hanspub.org/file/9-1760197x5_hanspub.png"  xlink:type="simple"/></disp-formula></sec><sec id="s2"><title>摘 要</title><p>传统的数学公式识别，通常建立在OCR技术进行图片文字识别的基础上，对目标公式进行符号切割，通过构建数学符号数据库，然后两两比较相似度，然后返回最大相似度的符号名称，作为识别结果。该方法，对数学符号数据库要求极高，鉴于实际情况，公式存在字号大小、粗细体、正斜体、各种字体等差异，导致该方法识别效果不佳。本文基于印刷体数学公式特点，重新构建字符标准库，并结合机器学习思想，应用SVM算法进行公式识别，并进一步提取字符特征，提升公式识别精度，实验结果显示，识别结果良好。</p><p>关键词 :公式识别，标准库，机器学习，SVM</p><disp-formula id="hanspub.33977-formula70"><graphic xlink:href="//html.hanspub.org/file/9-1760197x6_hanspub.png"  xlink:type="simple"/></disp-formula><p>Copyright &#169; 2020 by author(s) and Hans Publishers Inc.</p><p>This work is licensed under the Creative Commons Attribution International License (CC BY).</p><p>http://creativecommons.org/licenses/by/4.0/</p><p><img src="//html.hanspub.org/file/9-1760197x7_hanspub.png" /> <img src="//html.hanspub.org/file/9-1760197x8_hanspub.png" /></p></sec><sec id="s3"><title>1. 引言</title><p>随着互联网和信息技术的不断发展，中国在线教育已逐步进入智能教育时代，如拍照搜题，拍照阅卷以及拍照题库等教育类型应用层出不穷。另外，与传统的纸质书籍相比，电子书籍具有便于修改、储存和检索的优势，越来越多的人们倾向于从电子书籍中学习新知识。因此，将印刷体扫描图像转化为可编辑的文本，对于在线教育的发展与科技发展水平、教育理念变革以及用户教育需求升级和生活方式转变具有非常重大的意义。目前这方面发展比较成熟的技术是光学字符识别技术(OCR)，能够较精确地识别中英文以及阿拉伯数字，但对数学公式的识别效果不佳。数学公式符号种类繁多、公式结构复杂，以及符号含义的多样性，让传统的OCR技术力所不及。本文将研究提高数学公式识别精度，为数学公式的全面识别提出一点新思路。</p><p>数学公式识别作为实用性较强的技术引起了国内外专家和学者的广泛关注和研究。1968年，Anderson首次提出数学公式的识别问题 [<xref ref-type="bibr" rid="hanspub.33977-ref1">1</xref>]。1996年，Blostein和Grbavec给出了公式识别的定义以及提出了公式识别的重新构图法。在Okamoto等人的系统中 [<xref ref-type="bibr" rid="hanspub.33977-ref2">2</xref>] [<xref ref-type="bibr" rid="hanspub.33977-ref3">3</xref>]，首先采用目标结构分析法递归分割字母以及符号，然后建立相对应的字符关系树，最后传统的模板匹配算法来进行数学公式的识别。Lee H J和Lee M C创建的系统中，通过提取数学公式行高度、文档位置信息、相邻行间隔大小等特征 [<xref ref-type="bibr" rid="hanspub.33977-ref4">4</xref>] [<xref ref-type="bibr" rid="hanspub.33977-ref5">5</xref>]，来识别和提取公式。为了解决系统误判问题，采用连通域分割的方法，先切分公式、优化公式粘连、字符识别和逻辑分析重组、最后把结果储存为LATEX格式。国内有靳简明的MathReader数学公式识别系统，其利用Parzen窗进行公式定位，结合水平垂直投影技术、连通域分割技术和统计学特征分析技术进行公式识别，然后定义了11种公式来重构表达式并输出 [<xref ref-type="bibr" rid="hanspub.33977-ref6">6</xref>]。王琪辉则建立了面向公式符号识别的卷积神经网络结构，并通过大量的对比实验确定网络的最优参数 [<xref ref-type="bibr" rid="hanspub.33977-ref7">7</xref>]。</p><p>综上所述，数学公式的识别问题研究较早，但是数学公式(特别是微积分公式)结构复杂，识别难度大，还是有很多亟待解决的难题。本文在结合前人研究的研究成果，通过对数学公式进行分析、总结，进一步提取公式符号特征，使用支持向量机(SVM)对数学公式进行识别，并加入朴素贝叶斯(Naive Bayes, NB)模型作为对比分析。NB是基于条件概率的分类算法，通过概率大小来进行分类，而SVM通过数据点到分割线的距离远近来进行分类。在传统机器学习领域，NB和SVM是最常用分类算法，在不同的分类问题上性能也有所不同。本文选取NB作为对比，旨在测试SVM模型的效率和准确性，力求建立一个性能优良的SVM模型，为传统机器学习模型在公式识别技术的研究提供一些指导。</p></sec><sec id="s4"><title>2. 关键技术</title><p>根据结合机器学习的思想，采用word、latex常见的数学公式字符作为训练样本，基于支持向量机(SVM)构造数学公式识别分类器，提高公式识别精度。其基本流程图如图1：</p><p>图1. 公式识别流程图</p><p>1) 图像倾斜校正</p><p>基于Hough变换图像倾角检测方法。对图像边缘线进行Hough变换，根据Hough变换对图像交点进行投票，找出边缘曲线的倾斜角，并以此矫正图像的倾斜角度。</p><p>2) 公式字符切割</p><p>基于数学公式特征符号的结构，将公式中的字符分割成独立个体，并保留字符的位置信息。本文结合投影法切割速度快和连通法切割效果好的特点，将两种算法整合，优化公式切割流程，能在保留准确位置信息前提下，提高切割准确率，实验证明该方法的切割效果极佳。</p><p>3) 公式字符识别</p><p>构建数学公式常用字符的字符库，本文提取了每个字符的“九宫格”和宽高比特征，采用SVM建立分类模型。同时，将SVM与模板匹配和朴素贝叶斯方法的识别结果进行比较，在速度和精度上，SVM都胜于上述两种方法。</p><p>4) 公式结构分析与组合</p><p>本文在公式切割中，通过二值化图像矩阵提取公式字符的位置特征 ( x , y , w , h ) (其中x，y表示该字符在二值化矩阵中的坐标，w，h分别表示宽和高)，根据数学公式的符号组合方式，构建不同组合逻辑。例如，根号的“半包围”组合方式、定积分的“上下标”组合方式等，对公式进行结构分析。</p></sec><sec id="s5"><title>3. 核心算法</title><sec id="s5_1"><title>3.1. 公式切割算法</title><p>通常公式切割的算法是投影法和连通法，两种算法各有优缺点。投影法算法复杂度低，切割速度快，但是切割效果不佳，如 b 2 − 4 a c 型的公式无法进一步切割；连通法的特点是，切割效果好，但是算法复杂度相对较高，切割速度慢。</p><p>本文将两种算法整合，进行公示切割，实验证明该方法的切割效果极佳。算法步骤如下：</p></sec><sec id="s5_2"><title>3.2. 公式识别算法</title><sec id="s5_2_1"><title>3.2.1. 模型原理</title><p>本文运用支持向量机(SVM)算法进行公式识别，其基本原理 [<xref ref-type="bibr" rid="hanspub.33977-ref8">8</xref>] 如下：</p><p>假设训练数据集 S = { ( x 1 , y 1 ) , ( x 2 , y 2 ) , ⋯ , ( x m , y m ) } ，其中 x i ∈ R n ， y i ∈ { − 1 , 1 } ，−1表示负类，1表示</p><p>正类，一般的二分类问题，为求得最优分类超平面需要求解如下优化问题：</p><p>min α 1 2 ∑ i = 1 , j = 1 m α i α j y i y j K ( x i , x j ) − ∑ i = 1 m α i s . t . 0 ≤ α i ≤ C , i = 1 , 2 , ⋯ , m ∑ i = 1 m α i y j = 0</p><p>其中， K ( x i , x j ) 为核函数， α i 为拉格朗日系数，C为惩罚系数。</p><p>用SVM进行公式字符识别，其分类为多分类问题，一般为线性不可分，文本中SVM针对线性不可分的分类问题加入核函数。使用径向基内核(Radial basis function kernel, RBF)，其分界面为曲线，对线性不可分问题有良好的拟合效果。</p><p>另外，SVM一般应用于二分类问题，本文使用python的机器学习库sklearn中的支持向量机模型svm.svc()，用于本文的字符识别多分类问题。其基本原理是构造多层二分类器，将一个n分类问题分解为第1类和剩余n − 1类的二分类问题，以此类推，构造最终的多分类模型。</p></sec><sec id="s5_2_2"><title>3.2.2. 模型评估</title><p>对于分类问题，其模型结果，可用“混淆矩阵”呈现如下表1：</p><table-wrap id="table1" ><label><xref ref-type="table" rid="table1">Table 1</xref></label><caption><title> Confusion matri</title></caption><table><tbody><thead><tr><th align="center" valign="middle"  rowspan="2"  >真实情况</th><th align="center" valign="middle"  colspan="2"  >预测结果</th></tr></thead><tr><td align="center" valign="middle" >正例</td><td align="center" valign="middle" >反例</td></tr><tr><td align="center" valign="middle" >正例</td><td align="center" valign="middle" >TP</td><td align="center" valign="middle" >FN</td></tr><tr><td align="center" valign="middle" >反例</td><td align="center" valign="middle" >FP</td><td align="center" valign="middle" >TN</td></tr></tbody></table></table-wrap><p>表1. 混淆矩阵</p><p>查全率：</p><p>p = T P T P + F P</p><p>查准率：</p><p>R = T P T P + F N</p><p>F<sub>1</sub>-score：</p><p>F 1 = 2 &#215; P &#215; R P + R = 2 T P 样 例 总 数 + T P − T N</p></sec></sec></sec><sec id="s6"><title>4. 实证分析</title><sec id="s6_1"><title>4.1. 模型数据集</title><p>根据印刷体数学公式常见字符，本文构建的数学公式字符库包括word、latex、pdf等文档形式中的数字、字母、希腊字母、数学符号等，鉴于图像大小、清晰度不同等因素，选取多个字号构建字符库，具体的字符库构成见下表2：</p><table-wrap id="table2" ><label><xref ref-type="table" rid="table2">Table 2</xref></label><caption><title> Composition of character librar</title></caption><table><tbody><thead><tr><th align="center" valign="middle" >类别</th><th align="center" valign="middle" >数字、字母、希腊字母、公式符号</th></tr></thead><tr><td align="center" valign="middle" >字号</td><td align="center" valign="middle" >六号、小五号、五号、11号、小四号、四号、小三号、三号、小二号</td></tr><tr><td align="center" valign="middle" >字体</td><td align="center" valign="middle" >宋体、Calibri (西文正文)、微软雅黑、楷体、Times New Roman等9种字体。</td></tr><tr><td align="center" valign="middle" >样本源</td><td align="center" valign="middle" >word、pdf、LaTeX、mathtype</td></tr></tbody></table></table-wrap><p>表2. 字符库构成</p></sec><sec id="s6_2"><title>4.2. 模型结果</title><p>将数据集3/7比例随机划分为训练集和测试集，建立模型，返回模型结果如下表3：</p><table-wrap id="table3" ><label><xref ref-type="table" rid="table3">Table 3</xref></label><caption><title> Bayes and SVM model accurac</title></caption><table><tbody><thead><tr><th align="center" valign="middle" >方法</th><th align="center" valign="middle" >精度</th><th align="center" valign="middle" >召回率</th><th align="center" valign="middle" >F<sub>1</sub>-score</th></tr></thead><tr><td align="center" valign="middle" >Bayes</td><td align="center" valign="middle" >0.883</td><td align="center" valign="middle" >0.866</td><td align="center" valign="middle" >0.868</td></tr><tr><td align="center" valign="middle" >SVM</td><td align="center" valign="middle" >0.973</td><td align="center" valign="middle" >0.977</td><td align="center" valign="middle" >0.974</td></tr></tbody></table></table-wrap><p>表3. Bayes和SVM模型准确率</p><p>测试结果显示，SVM方法进行字符分类，精度高，识别效果较好。</p></sec><sec id="s6_3"><title>4.3. 测试结果</title><p>为进一步测试模型识别效果，随机抽取三篇英文版数学文档，按照文档识别流程，分别采用直接匹配法、Bayes法识别、SVM法识别，统计识别结果如下表4：</p><table-wrap id="table4" ><label><xref ref-type="table" rid="table4">Table 4</xref></label><caption><title> Test results of English mathematics document</title></caption><table><tbody><thead><tr><th align="center" valign="middle" >方法</th><th align="center" valign="middle" >精度</th><th align="center" valign="middle" >时间</th></tr></thead><tr><td align="center" valign="middle" >模板匹配法</td><td align="center" valign="middle" >84%</td><td align="center" valign="middle" >59 min</td></tr><tr><td align="center" valign="middle" >Bayes</td><td align="center" valign="middle" >74%</td><td align="center" valign="middle" >12 min</td></tr><tr><td align="center" valign="middle" >SVM</td><td align="center" valign="middle" >96%</td><td align="center" valign="middle" >9 min</td></tr></tbody></table></table-wrap><p>表4. 英文数学文档测试结果</p><p>测试结果显示，SVM方法进行字符识别，精度高，识别速度快。</p></sec></sec><sec id="s7"><title>5. 结论</title><p>本文构建印刷体数学公式字符数据标准库，结合机器学习的思想，构建大量的数学公式字符作为训练样本，基于SVM构造数学公式识别多分类器。采用直接模板匹配、朴素贝叶斯和支持向量机三种方法进行比较，实验结果表明，在传统机器学习领域，支持向量机模型在印刷体数学公式识别中有非常良好的效果。</p></sec><sec id="s8"><title>文章引用</title><p>文伟海,杨立洪,周 瑶. 基于SVM的印刷体数学公式识别的研究Research on Recognition of Printed Mathematical Formula Based on SVM[J]. 数据挖掘, 2020, 10(01): 90-95. https://doi.org/10.12677/HJDM.2020.101009</p></sec><sec id="s9"><title>参考文献</title></sec></body><back><ref-list><title>References</title><ref id="hanspub.33977-ref1"><label>1</label><mixed-citation publication-type="other" xlink:type="simple">Anderson, R.H. (1968) Syntex-Directed Recognition of Hand-Printed Two-Dimensional Mathematics. In: Interactive Systems for Experimental Applied Mathematics. Academic Press, New York, 436-459.  
https://doi.org/10.1016/B978-0-12-395608-8.50048-7</mixed-citation></ref><ref id="hanspub.33977-ref2"><label>2</label><mixed-citation publication-type="other" xlink:type="simple">Twaakyondo, H.M. and Okmoto, M. (1995) Structure Analysis and Recognition of Mathematical Expressions. Proceedings of the 3th International Conference on Document Analysis and Recognition, Montreal, Canada, 14-16 August 1995, 430-437.</mixed-citation></ref><ref id="hanspub.33977-ref3"><label>3</label><mixed-citation publication-type="other" xlink:type="simple">Okamoto, M., Imai, H. and Takagi, K. (2001) Performance Evaluation of a Robust Method for Mathematical Expression Recognition. Proceedings of the 6th International Conference on Document Analysis and Recognition, Seattle, WA, USA, 13 September 2001, 121-128.</mixed-citation></ref><ref id="hanspub.33977-ref4"><label>4</label><mixed-citation publication-type="other" xlink:type="simple">Lee, H.-J. and Lee, M.-C. (1994) Understanding Mathematical Expressions Using Procedure Oriented Transformation. Pattern Recognition, 27, 447-457. https://doi.org/10.1016/0031-3203(94)90121-X</mixed-citation></ref><ref id="hanspub.33977-ref5"><label>5</label><mixed-citation publication-type="other" xlink:type="simple">Lee, H.J. and Wang, J.S. (1995) Design of a Mathematical Expression Recognition System. Proceedings of 3rd International Conference on Document Analysis and Recognition, Montreal, Canada, 14-16 August 1995, 1084-1087.</mixed-citation></ref><ref id="hanspub.33977-ref6"><label>6</label><mixed-citation publication-type="other" xlink:type="simple">Scientific, W. (1997) Handbook of Character Recognition and Document Image Analysis. World Scientific, Singapore.</mixed-citation></ref><ref id="hanspub.33977-ref7"><label>7</label><mixed-citation publication-type="other" xlink:type="simple">王琪辉. 基于深度学习的印刷体数学公式符号识别方法研究[D]: [硕士学位论文]. 沈阳: 沈阳工业大学, 2016.</mixed-citation></ref><ref id="hanspub.33977-ref8"><label>8</label><mixed-citation publication-type="other" xlink:type="simple">张学工. 关于统计学习理论与支持向量机[J]. 自动化学报. 2000, 26(1): 32-42.</mixed-citation></ref></ref-list></back></article>