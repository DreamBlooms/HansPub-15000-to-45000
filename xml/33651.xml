<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE article  PUBLIC "-//NLM//DTD Journal Publishing DTD v3.0 20080202//EN" "http://dtd.nlm.nih.gov/publishing/3.0/journalpublishing3.dtd"><article xmlns:mml="http://www.w3.org/1998/Math/MathML" xmlns:xlink="http://www.w3.org/1999/xlink" dtd-version="3.0" xml:lang="en" article-type="research article"><front><journal-meta><journal-id journal-id-type="publisher-id">MSE</journal-id><journal-title-group><journal-title>Management Science and Engineering</journal-title></journal-title-group><issn pub-type="epub">2167-664X</issn><publisher><publisher-name>Scientific Research Publishing</publisher-name></publisher></journal-meta><article-meta><article-id pub-id-type="doi">10.12677/MSE.2019.84044</article-id><article-id pub-id-type="publisher-id">MSE-33651</article-id><article-categories><subj-group subj-group-type="heading"><subject>MSE20190400000_63651460.pdf</subject></subj-group><subj-group subj-group-type="Discipline-v2"><subject>经济与管理</subject></subj-group></article-categories><title-group><article-title>
 
 
  基于微服务的电工装备智慧物联数据汇聚中心设计与应用
  Design and Application of Electrical Equipment Intelligent IOT Data Aggregation Center Based on Microservice
 
</article-title></title-group><contrib-group><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>牛</surname><given-names>凯</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>李</surname><given-names>伟</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>卞</surname><given-names>龙江</given-names></name><xref ref-type="aff" rid="aff3"><sup>3</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>张</surname><given-names>金丽</given-names></name><xref ref-type="aff" rid="aff4"><sup>4</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>肖</surname><given-names>锋</given-names></name><xref ref-type="aff" rid="aff5"><sup>5</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib></contrib-group><aff id="aff4"><addr-line>国网上海市电力公司电科院，上海</addr-line></aff><aff id="aff5"><addr-line>上海久隆企业管理咨询有限公司，上海</addr-line></aff><aff id="aff2"><addr-line>国网上海市电力公司物资公司，上海</addr-line></aff><aff id="aff3"><addr-line>国网上海市电力公司嘉定公司，上海</addr-line></aff><aff id="aff1"><addr-line>null</addr-line></aff><pub-date pub-type="epub"><day>07</day><month>11</month><year>2019</year></pub-date><volume>08</volume><issue>04</issue><fpage>360</fpage><lpage>367</lpage><permissions><copyright-statement>&#169; Copyright  2014 by authors and Scientific Research Publishing Inc. </copyright-statement><copyright-year>2014</copyright-year><license><license-p>This work is licensed under the Creative Commons Attribution International License (CC BY). http://creativecommons.org/licenses/by/4.0/</license-p></license></permissions><abstract><p>
 
 
  
    电工装备智慧物联网平台是国网公司建设泛在电力物联网，落实“三型两网、世界一流”战略目标的一个重要组成部分，电工装备智慧物联数据汇聚中心是实现电工装备智慧物联平台的关键步骤。对微服务、容器技术进行研究与应用，设计了基于微服务的电工装备智慧物联数据汇聚中心的技术架构，解决国网公司多个省公司、多个物质品类管理，分布式异构环境的协同开发与部署应用问题。将供应链向供应商侧进行延伸，通过物联网实现对供应商物联数据和业务数据的采集和汇总到数据汇聚中心。通过数据汇聚中心将数据应用于物资公司招标采购、在线监造、质量监督、产能评估和故障分析，取得了降本增效，提升质量和管理水平的效果。
    The intelligent Internet of things platform for electrical equipment is an important part of the construction of ubiquitous power Internet of things by State Grid Corporation of China, and the implementation of the strategic goal of “three types, two networks and world-class”. The intelligent Internet of things data aggregation Center for electrical equipment is a key step to realize the intelligent Internet of things platform for electrical equipment. The paper researched the micro service and container technology, designed the technical framework of electrical equipment intelligent IOT data aggregation center based on micro service, solved the problem of collaborative development and deployment of application in multiple provincial companies, multiple material category management and distributed heterogeneous environment of State Grid Corporation. With extending the supply chain to the supplier side, it realizes to collect and summarize the supplier IOT data and business data to the data aggregation center through the Internet of things. Through the application of data in the data aggregation center in the bidding procurement, online manufacturing supervision, quality supervision, capacity evaluation and fault analysis of material companies, the cost reduction and efficiency increase, and the quality and management level are improved. 
  
 
</p></abstract><kwd-group><kwd>微服务，Docker容器，品类管理中心，数据汇聚中心, Microservice</kwd><kwd> Docker Container</kwd><kwd> Category Management Center</kwd><kwd> Data Aggregation Center</kwd></kwd-group></article-meta></front><body><sec id="s1"><title>基于微服务的电工装备智慧物联数据汇聚中心设计与应用<sup> </sup></title><p>牛凯<sup>1</sup>，李伟<sup>1</sup>，卞龙江<sup>2</sup>，张金丽<sup>3</sup>，肖锋<sup>4</sup></p><p><sup>1</sup>国网上海市电力公司物资公司，上海</p><p><sup>2</sup>国网上海市电力公司嘉定公司，上海</p><p><sup>3</sup>国网上海市电力公司电科院，上海</p><p><sup>4</sup>上海久隆企业管理咨询有限公司，上海</p><p>收稿日期：2019年12月4日；录用日期：2019年12月19日；发布日期：2019年12月26日</p><disp-formula id="hanspub.33651-formula16"><graphic xlink:href="//html.hanspub.org/file/12-2330413x5_hanspub.png"  xlink:type="simple"/></disp-formula></sec><sec id="s2"><title>摘 要</title><p>电工装备智慧物联网平台是国网公司建设泛在电力物联网，落实“三型两网、世界一流”战略目标的一个重要组成部分，电工装备智慧物联数据汇聚中心是实现电工装备智慧物联平台的关键步骤。对微服务、容器技术进行研究与应用，设计了基于微服务的电工装备智慧物联数据汇聚中心的技术架构，解决国网公司多个省公司、多个物质品类管理，分布式异构环境的协同开发与部署应用问题。将供应链向供应商侧进行延伸，通过物联网实现对供应商物联数据和业务数据的采集和汇总到数据汇聚中心。通过数据汇聚中心将数据应用于物资公司招标采购、在线监造、质量监督、产能评估和故障分析，取得了降本增效，提升质量和管理水平的效果。</p><p>关键词 :微服务，Docker容器，品类管理中心，数据汇聚中心</p><disp-formula id="hanspub.33651-formula17"><graphic xlink:href="//html.hanspub.org/file/12-2330413x6_hanspub.png"  xlink:type="simple"/></disp-formula><p>Copyright &#169; 2019 by author(s) and Hans Publishers Inc.</p><p>This work is licensed under the Creative Commons Attribution International License (CC BY).</p><p>http://creativecommons.org/licenses/by/4.0/</p><p><img src="//html.hanspub.org/file/12-2330413x7_hanspub.png" /> <img src="//html.hanspub.org/file/12-2330413x8_hanspub.png" /></p></sec><sec id="s3"><title>1. 引言</title><p>电工装备智慧物联网平台是建设泛在电力物联网，落实“三型两网、世界一流”战略目标的数字基础，将电力设备生产数据与企业运行数据相结合，为国网泛在电力物联网体系建设提供信息支撑。国网公司电工装备智慧物联网按照总部、省公司和供应商三级建设逐步推进，省公司主要负责品类管理中心建设。目前国网公司下属27个省级公司，纳入建设电工装备18个物质品类，由于各省公司软硬件环境有所差异，如何满足基于分布式异构环境的协同开发与应用是当前需要解决的课题。</p><p>随着近几年微服务架构和Docker容器概念的火爆，微服务技术最近得到一些IT公司的青睐，Netflix公司是成功应用微服务的典范。Spring Cloud是实现微服务一系列框架的有序集合。它利用Spring Boot的开发便利性巧妙地简化了分布式系统基础设施的开发，如服务发现注册、配置中心、消息总线、负载均衡、断路器、数据监控等，都可以用Spring Boot的开发风格做到一键启动和部署 [<xref ref-type="bibr" rid="hanspub.33651-ref1">1</xref>]。微服务架构优点：1) 针对特定服务发布，影响小，风险小，成本低；2) 频繁发布版本，快速交付需求，与敏捷开发管理，DevOps结合好；3) 低成本扩容，弹性伸缩，适应云环境 [<xref ref-type="bibr" rid="hanspub.33651-ref2">2</xref>]。品类管理中心是连接供应商物联数据、业务数据与总部数据汇聚中心的桥梁。本文提出通过应用微服务技术、容器技术，将品类管理中心部署在安全等级为等保三的互联网公有云上，有利于分散单一系统对大数据海量吞吐并发的压力，避免18个品类同时存在性能方面的瓶颈。各省公司之间品类独立，专业业务上不存在横向交互，按品类提供服务，符合解耦、故障隔离，粒度原子化的开发原则，增强了系统的健壮性、稳定性和可维护性，符合“一平台、多中心、属地化运维”的工作安排。</p></sec><sec id="s4"><title>2. 基于微服务的电工装备智慧物联数据汇聚中心架构的设计思路</title><p>(一) 关键技术</p><p>1) 微服务</p><p>微服务架构是一种架构模式，它提倡将单一应用程序划分成一组小的服务，服务之间互相协调、互相配合，为用户提供最终价值。每个服务运行在其独立的进程中，服务与服务间采用轻量级的通信机制互相沟通(通常是基于HTTP的RESTful API) [<xref ref-type="bibr" rid="hanspub.33651-ref3">3</xref>]。每个服务都围绕着具体业务进行构建，并且能够被独立地部署到生产环境、类生产环境。另外，应尽量避免统一的、集中式的服务管理机制，对具体的一个服务而言，应根据业务上下文，选择合适的语言、工具对其进行构建。RESTFUL是一种网络应用程序的设计风格和开发方式，基于HTTP，可以使用XML格式定义或JSON格式定义 [<xref ref-type="bibr" rid="hanspub.33651-ref4">4</xref>]。微服务是一种架构风格，一个大型复杂软件应用由一个或多个微服务组成。系统中的各个微服务可被独立部署，各个微服务之间是松耦合。</p><p>2) Docker容器</p><p>Docker是一个开源的应用容器引擎，让开发者可以打包他们的应用以及依赖包到一个可移植的容器中，然后发布到任何流行的Linux机器上。Docker是一个重新定义了程序开发测试、交付和部署过程的开放平台，Docker则可以称为构建一次，到处运行，这就是Docker提出的“Build once，Run anywhere” [<xref ref-type="bibr" rid="hanspub.33651-ref5">5</xref>]。容器技术与传统虚拟机性能对比 [<xref ref-type="bibr" rid="hanspub.33651-ref6">6</xref>]，如表1所示。</p><table-wrap id="table1" ><label><xref ref-type="table" rid="table1">Table 1</xref></label><caption><title> Performance comparison between Docker container and virtual machin</title></caption><table><tbody><thead><tr><th align="center" valign="middle" >比较内容</th><th align="center" valign="middle" >Docker容器</th><th align="center" valign="middle" >虚拟机(VM)</th></tr></thead><tr><td align="center" valign="middle" >操作系统</td><td align="center" valign="middle" >与宿主机共享OS</td><td align="center" valign="middle" >宿主机OS上运行虚拟机OS</td></tr><tr><td align="center" valign="middle" >存储大小</td><td align="center" valign="middle" >镜像小，便于存储与传输</td><td align="center" valign="middle" >镜像庞大(vmdk、vdi等)</td></tr><tr><td align="center" valign="middle" >运行性能</td><td align="center" valign="middle" >几乎无额外性能传输</td><td align="center" valign="middle" >操作系统额外的CPU、内存消耗</td></tr><tr><td align="center" valign="middle" >移植性</td><td align="center" valign="middle" >轻便、灵活，适应于Linux</td><td align="center" valign="middle" >笨重，与虚拟化技术耦合度高</td></tr><tr><td align="center" valign="middle" >硬件亲和性</td><td align="center" valign="middle" >面向软件开发者</td><td align="center" valign="middle" >面向硬件运维者</td></tr><tr><td align="center" valign="middle" >部署速度</td><td align="center" valign="middle" >快速，秒级</td><td align="center" valign="middle" >较慢，10 s以上</td></tr></tbody></table></table-wrap><p>表1. Docker容器与虚拟机性能对比</p><p>从上图Docker容器与虚拟机性能对比可以看出，Docker容器比传统虚拟机性能有更多优势，是未来微服务发展与应用的趋势。</p><p>(二) 技术方案</p><p>遵从公司“一平台、一系统、多场景、微应用”的总体信息化架构原则，依托泛在电力物联网数据中台、供应链数据管理服务平台、智慧运营中心技术架构，构建基于微服务的电工装备智慧物联数据汇聚中心的技术解决方案。系统设计上将物联数据和业务数据分开处理，通过不同的通道进行数据交互。各接入供应商工厂内的智慧物联数据网关将物联数据汇总并上传给品类管理中心，同时品类管理中心会提供SASS服务同各接入供应商的业务系统(ERP、MES等)进行业务数据交互。品类管理中心将汇总的物联数据和业务数据进行汇总和计算后，按照相关要求将数据推送到信息外网的数据汇聚中心，其技术架构如图1所示。</p><p>图1. 基于微服务的电工装备智慧物联数据汇聚中心技术架构</p><p>基于微服务的电工装备智慧物联数据汇聚中心包括以下内容：</p><p>1) 供应商物联数据汇聚到品类管理中心</p><p>各省级区域接入供应商的同品类物联数据通过智慧物联数据网关打上业务标签，同时将物联数据汇聚并上传给品类管理中心，如图2所示。物联数据主要包括生产试验采集数据和视频数据，根据数据类型不同采取不同的汇集策略。</p><p>图2. 供应商物联数据汇聚到品类管理中心</p><p>2) 供应商业务数据与品类管理中心交互</p><p>供应商业务数据直接通过API接口接入品类管理中心，业务数据交互不经过智慧物联数据网关。品类管理中心会开通相应服务接入供应商的业务生产系统(ERP/MES等)，通过调用品类管理中心的服务获取合同、履约等业务信息，同时将库存、排产、物流等信息推送给品类管理中心。如图3所示。</p><p>图3. 供应商业务数据与品类管理中心交互</p><p>3) 品类管理中心与数据汇聚中心交互</p><p>品类管理中心将汇总的物联数据和业务数据进行汇总和计算后，按照相关要求将数据推送到信息外网的数据汇聚中心，最终汇聚在信息内网的全业务数据中心，成为智慧物联数据汇聚中心的数据基础。如图4所示。</p><p>图4. 品类管理中心与数据汇聚中心交互</p><p>(三) Spring cloud微服务实现流程</p><p>微服务开发通过Spring Cloud来实现。Spring Cloud共集成了18个子项目，下图是Spring Cloud体系的一部分，里面都包含一个或者多个第三方的组件或者框架，如图5所示。</p><p>图5. Spring Cloud微服务实现流程</p><p>各组件配置使用运行流程如下：</p><p>1) 请求统一通过API网关来访问内部服务；</p><p>2) 网关接收到请求后，从注册中心获取可用服务；</p><p>3) 由负载均衡进行均衡负载后，分发到后端具体实例；</p><p>4) 微服务之间通过通信处理模块进行通信处理业务；</p><p>5) 注册中心负责在各个服务器进行注册。</p></sec><sec id="s5"><title>3. 基于微服务的电工装备智慧物联数据汇聚中心的应用</title><p>基于微服务的电工装备智慧物联数据汇聚中心将供应商生产过程、出厂试验等物联数据，以及ERP、MES等系统中的业务数据汇聚到品类管理中心。品类管理中心再将汇总的各类数据推送到信息外网的数据汇聚中心，供各省公司应用。基于微服务的电工装备智慧物联数据汇聚中心应用如下：</p><p>(一) 招标采购应用</p><p>招标采购业务在确定中标供应商时，将供应商实际生产进度与年度产能进行对比，为确定中标供应商提供数据支撑。将供应商生产用主要原材料采购价格与其市场价格波动情况进行对比，评估采购价格的合理性。</p><p>(二) 质量监督应用</p><p>对供应商产品生产过程的稳定性与质量检验数据进行评估，依据供应商生产数据与出厂试验情况，结合供应商历史到货验收合格率，合理制定到货验收策略。对供应商到货检验出现重大批次质量责任问题，系统自动完成质量回溯及取证。生产监控如图6所示。</p><p>试验监控如图7所示。</p><p>(三) 产能评估应用</p><p>将供应商的实际生产数据与供应商标准产能数据进能对比，评估供应商是否按约定履行生产资产配置，督促供应商进行排产调整。</p><p>(四) 故障分析应用</p><p>对比不同供应商生产的同类设备的故障率，设备差异化运维细化至对应的生产供应商，总结设备故障点，为设备监造与抽检策略的制定提供信息支撑，为供应商产品质量提升提供信息支撑。</p><p>图6. 生产监控</p><p>图7. 试验监控</p></sec><sec id="s6"><title>4. 结束语</title><p>本文对微服务、容器技术进行研究与应用，设计了基于微服务的电工装备智慧物联数据汇聚中心的技术架构，解决国网公司分布式、异构环境的协同开发与部署应用问题。通过开发应用电工装备智慧物联数据汇聚中心，对各品类物联数据和业务数据进行传输、汇聚、交互和存储，对数据进行挖掘分析应用，有力支持物资公司在招标采购、质量监督、产能评估和故障分析等方面的应用，取得了降本增效，提升质量和管理水平的效果。</p></sec><sec id="s7"><title>文章引用</title><p>牛 凯,李 伟,卞龙江,张金丽,肖 锋. 基于微服务的电工装备智慧物联数据汇聚中心设计与应用Design and Application of Electrical Equipment Intelligent IOT Data Aggregation Center Based on Microservice[J]. 管理科学与工程, 2019, 08(04): 360-367. https://doi.org/10.12677/MSE.2019.84044</p></sec><sec id="s8"><title>参考文献</title></sec></body><back><ref-list><title>References</title><ref id="hanspub.33651-ref1"><label>1</label><mixed-citation publication-type="other" xlink:type="simple">Spring cloud. https://baike.baidu.com/item/spring%20cloud/20269825?fr=aladdin</mixed-citation></ref><ref id="hanspub.33651-ref2"><label>2</label><mixed-citation publication-type="other" xlink:type="simple">什么是微服务? 为什么你要用微服务?[EB/OL]. http://www.sohu.com/a/331771139_468635, 2019-08-06.</mixed-citation></ref><ref id="hanspub.33651-ref3"><label>3</label><mixed-citation publication-type="other" xlink:type="simple">毛正雄, 杨震乾, 薛永军. 基于微服务的电力企业实时通信服务架构构建[J]. 电子技术与软件工程, 2017(16): 31-33.</mixed-citation></ref><ref id="hanspub.33651-ref4"><label>4</label><mixed-citation publication-type="other" xlink:type="simple">王磊, 孙帆, 陈旭东. RESTFUL、SOAP、ICAP在移动网络中的应用[J]. 邮电设计技术, 2015(9): 35-38.</mixed-citation></ref><ref id="hanspub.33651-ref5"><label>5</label><mixed-citation publication-type="other" xlink:type="simple">Docker架构. 菜鸟教程. 2016-06-08.</mixed-citation></ref><ref id="hanspub.33651-ref6"><label>6</label><mixed-citation publication-type="other" xlink:type="simple">Docker入门白皮书. 2015-08: 6-7.</mixed-citation></ref></ref-list></back></article>