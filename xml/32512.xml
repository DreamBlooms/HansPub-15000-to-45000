<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE article  PUBLIC "-//NLM//DTD Journal Publishing DTD v3.0 20080202//EN" "http://dtd.nlm.nih.gov/publishing/3.0/journalpublishing3.dtd"><article xmlns:mml="http://www.w3.org/1998/Math/MathML" xmlns:xlink="http://www.w3.org/1999/xlink" dtd-version="3.0" xml:lang="en" article-type="research article"><front><journal-meta><journal-id journal-id-type="publisher-id">MOS</journal-id><journal-title-group><journal-title>Modeling and Simulation</journal-title></journal-title-group><issn pub-type="epub">2324-8696</issn><publisher><publisher-name>Scientific Research Publishing</publisher-name></publisher></journal-meta><article-meta><article-id pub-id-type="doi">10.12677/MOS.2019.84016</article-id><article-id pub-id-type="publisher-id">MOS-32512</article-id><article-categories><subj-group subj-group-type="heading"><subject>MOS20190400000_41541013.pdf</subject></subj-group><subj-group subj-group-type="Discipline-v2"><subject>信息通讯</subject><subject> 工程技术</subject></subj-group></article-categories><title-group><article-title>
 
 
  VERICUT在高速列车构架数控加工中的仿真研究与应用
  The Simulation Research and Application of VERICUT in the Numerical Control Manufacturing Process of High-Speed Train Main-Frame
 
</article-title></title-group><contrib-group><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>吕</surname><given-names>国艳</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>山</surname><given-names>荣成</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>别</surname><given-names>维峰</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>许</surname><given-names>金国</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>马</surname><given-names>力</given-names></name><xref ref-type="aff" rid="aff3"><sup>3</sup></xref><xref ref-type="corresp" rid="cor1"><sup>*</sup></xref></contrib></contrib-group><aff id="aff2"><addr-line>中车青岛四方机车车辆股份有限公司，山东 青岛</addr-line></aff><aff id="aff3"><addr-line>华中科技大学无锡研究院，江苏 无锡</addr-line></aff><aff id="aff1"><addr-line>null</addr-line></aff><pub-date pub-type="epub"><day>15</day><month>10</month><year>2019</year></pub-date><volume>08</volume><issue>04</issue><fpage>137</fpage><lpage>145</lpage><permissions><copyright-statement>&#169; Copyright  2014 by authors and Scientific Research Publishing Inc. </copyright-statement><copyright-year>2014</copyright-year><license><license-p>This work is licensed under the Creative Commons Attribution International License (CC BY). http://creativecommons.org/licenses/by/4.0/</license-p></license></permissions><abstract><p>
 
 
  加工仿真是对真实产品制造过程进行的虚拟仿真，其通过三维动态数字模型展现产品制造流程。本文利用VERICUT软件建立五面加工中心几何模型及运动学模型，并根据实际应用机床对配置的Siemens 840D数控系统进行功能扩充，并使用VERICUT软件建立加工刀具库。进而通过在VERICUT软件中建立虚拟机床模型，调用和修改CNC控制系统对高速列车构架加工进行仿真演示，从而便于观察加工刀具轨迹是否符合预期要求，从而验证整个加工程序的正确性。
   Machining simulation is one kind of the virtual simulation towards the real product manufacturing process. It could present the product manufacturing process based on the 3D dynamic digital model. This article set up the geometric model and Kinematic model for Five-sides Machining Center by VERICUT, and expanded the functions of Siemens 840D numerical control system based on the real applied machine tool. We also set up the machining tool library in VERICUT software. Then we set up the virtual machine tool model in VERICUT, invoked and modified the CNC system to present the machining process simulation demonstration towards the process of high-speed train main-frame. So we can observe whether the cutting tool path meets the expected requirements or not, then we can verify the whole manufacturing NC program.
 
</p></abstract><kwd-group><kwd>虚拟仿真，高速列车构架，刀具轨迹, Virtual Simulation</kwd><kwd> High-Speed Train Main-Frame</kwd><kwd> Tool Path</kwd></kwd-group></article-meta></front><body><sec id="s1"><title>VERICUT在高速列车构架数控加工中的仿真研究与应用<sup> </sup></title><p>吕国艳<sup>1</sup>，山荣成<sup>1</sup>，别维峰<sup>1</sup>，许金国<sup>1</sup>，马力<sup>2</sup></p><p><sup>1</sup>中车青岛四方机车车辆股份有限公司，山东 青岛</p><p><sup>2</sup>华中科技大学无锡研究院，江苏 无锡</p><p><img src="//html.hanspub.org/file/1-2570234x1_hanspub.png" /></p><p>收稿日期：2019年9月25日；录用日期：2019年10月8日；发布日期：2019年10月15日</p><disp-formula id="hanspub.32512-formula1"><graphic xlink:href="//html.hanspub.org/file/1-2570234x5_hanspub.png"  xlink:type="simple"/></disp-formula></sec><sec id="s2"><title>摘 要</title><p>加工仿真是对真实产品制造过程进行的虚拟仿真，其通过三维动态数字模型展现产品制造流程。本文利用VERICUT软件建立五面加工中心几何模型及运动学模型，并根据实际应用机床对配置的Siemens 840D数控系统进行功能扩充，并使用VERICUT软件建立加工刀具库。进而通过在VERICUT软件中建立虚拟机床模型，调用和修改CNC控制系统对高速列车构架加工进行仿真演示，从而便于观察加工刀具轨迹是否符合预期要求，从而验证整个加工程序的正确性。</p><p>关键词 :虚拟仿真，高速列车构架，刀具轨迹</p><disp-formula id="hanspub.32512-formula2"><graphic xlink:href="//html.hanspub.org/file/1-2570234x6_hanspub.png"  xlink:type="simple"/></disp-formula><p>Copyright &#169; 2019 by author(s) and Hans Publishers Inc.</p><p>This work is licensed under the Creative Commons Attribution International License (CC BY).</p><p>http://creativecommons.org/licenses/by/4.0/</p><p><img src="//html.hanspub.org/file/1-2570234x7_hanspub.png" /> <img src="//html.hanspub.org/file/1-2570234x8_hanspub.png" /></p></sec><sec id="s3"><title>1. 引言</title><p>Vericut软件是一套针对CNC机床运动仿真、NC程序验证、优化和分析的工具。从1988年以来，Vericut就已经成为数控加工仿真领域的行业标准。工艺工程师可以在仿真环境中完成待加工工件的所有数控加工过程，从而避免了实际加工中的试切，缩短了生产周期，降低了因程序错误带来的零件加工质量不良的风险 [<xref ref-type="bibr" rid="hanspub.32512-ref1">1</xref>] [<xref ref-type="bibr" rid="hanspub.32512-ref2">2</xref>] [<xref ref-type="bibr" rid="hanspub.32512-ref3">3</xref>] [<xref ref-type="bibr" rid="hanspub.32512-ref4">4</xref>] [<xref ref-type="bibr" rid="hanspub.32512-ref5">5</xref>] 。</p><p>Li Han等人利用VERICUT进行了刀具半径补偿算法的验证 [<xref ref-type="bibr" rid="hanspub.32512-ref6">6</xref>] ，杨莉等人针对航空薄壁零件的数控加工过程 [<xref ref-type="bibr" rid="hanspub.32512-ref7">7</xref>] ，魏娟等人针对大型壳体零件的数控加工过程 [<xref ref-type="bibr" rid="hanspub.32512-ref8">8</xref>] 利用VERICUT对加工过程进行了仿真验证等工作，证明了VERICUT在不同类型零件的数控加工过程中均能起到良好的效果。曹剑等人针对五轴数控机床虚拟样机建模 [<xref ref-type="bibr" rid="hanspub.32512-ref9">9</xref>] ，李栋等人针对五轴卧式机床 [<xref ref-type="bibr" rid="hanspub.32512-ref10">10</xref>] ，在VERICUT软件中进行了机床建模和加工过程分析，说明了在相关设备及加工工艺环境中，利用该软件进行加工仿真的过程和需注意事项。</p><p>高速列车构架采用H型结构，加工部位较多、涉及面较广、程序复杂，且Siemens840D系统中需要使用角代码，如RXX，从而给产品首件试制时带来一定的困难。无法详细周全地对加工刀具轨迹的正确性进行判断，易造成设备损伤、产品质量无法保证。为了保证高速列车构架加工的质量，我们引入Vericut软件对整个加工过程进行仿真。</p></sec><sec id="s4"><title>2. 虚拟机床的建立</title><sec id="s4_1"><title>2.1. 建立五面加工中心运动轴组件拓扑结构</title><p>针对车间现场使用的五面加工中心，提炼出其主要的结构，如左右运动部件X轴，上下运动部件Y轴，前后运动部件Z轴，主轴运动的旋转轴B轴和C轴等部件。依据各部件间的关系建立机床各部件之间的运动学模型，具体步骤如下：</p><p>1) 组件拓扑结构的设置</p><p>利用“组件树”功能(菜单：配置/组件树…/)，建立如图1所示加工中心组件树，描述各模块之间以及与各模块与机床整体的拓扑结构关系：</p><p>图1. 组件拓扑结构</p><p>2) 建立机床组件模型</p><p>参照机床组件物理尺寸和空间位置关系，继续建立机床各组件模型，包括床身、主轴、B轴、C轴等。建模过程中，需特别注意常发生干涉和碰撞的C、B轴的组件模型尺寸、相对位置关系等均须与现场加工中心的结构保持一致，以便在后续验证过程中进行校验。</p><p>3) 回转铣头的建立</p><p>由于加工及所产生的碰撞主要发生在回转铣头部位，因此主要把机床的回转铣头部分的模型建立起来。首先在UG或Catia等设计工具中建立回转铣头三维模型，如图2。其次，输出组件模型文件，输出STL格式文件时，保证参考坐标系和模型坐标系的匹配，最后，将组件模型导入Vericut。</p><p>图2. 回转铣头三维模型</p></sec><sec id="s4_2"><title>2.2. 系统参数的设定</title><p>已建立的机床不能直接进行仿真，需要初始化设置，对相关Siemens系统参数进行设置，具体步骤如下：</p><p>1) 设定机床有效行程参数（菜单：配置/机床设定…/行程极限），如图3所示：</p><p>图3. 机床行程设置</p><p>2) 设定机床相关参数(菜单：配置/机床设定…/表)</p><p>3) 保持机床文件(菜单：配置/机床/保存)→(菜单：配置/控制/打开或文字/地址…)</p><p>Vericut提供了一个丰富的控制系统库，一般用户可以直接调用相应的系统进行仿真。有些特殊的指令需要根据指令的含义及用法规则，定义相关的字格式、地址。结合Vericut提供的宏程序进行配置或修改，同时可进行二次开发。五面加工中心配置了Siemens 840D系统，因Vericut自带的Siemens 840D系统的控制部分设置完全可以满足加工以及仿真的需求，因此可直接应用，具体需调用的指令如图4所示：</p><p>图4. 调用指令</p></sec></sec><sec id="s5"><title>3. 建立刀具库</title><p>双击项目树中“加工刀具”，刀具库中建立刀具的过程主要分为以下步骤。</p><sec id="s5_1"><title>3.1. 刀套(Holder)的建立</title><p>根据机床所使用的各种规格套筒，Vericut刀具库中建立相同尺寸的刀套。复杂的刀套也可以在一般的三维软件中构建刀套三维模型，再通过STL格式文件导入Vericut中使用。</p></sec><sec id="s5_2"><title>3.2. 刀具(Cutter)的建立</title><p>在Vericut中建立出所有加工刀具，再与对应的刀套装配在一起。</p></sec><sec id="s5_3"><title>3.3. 刀具命名</title><p>根据程序中刀具刀号或者刀具名称，重新给系统中刀具命名，确保与程序中一致。</p></sec><sec id="s5_4"><title>3.4. 装夹点设定</title><p>根据实际工艺需求，设定装夹点，刀具管理如图5：</p><p>图5. 刀具管理</p><p>注意：在Vericut刀具参数中可以设定极限切削参数，Vericut在模拟过程中计算相应参数，并和其极限参数比较，如果超出该极限值，Vericut将会在Log中提示该错误，从而可以避免因为切削参数不合理或工艺余量不均所造成的刀具或零件损坏。</p></sec></sec><sec id="s6"><title>4. 仿真加工</title><sec id="s6_1"><title>4.1. 调入设计和毛坯模型</title><p>分别双击项目树中“Fixture”和“Stock”，导入相应模型文件。Vericut可以读入STL、PLY或IGS模型文件，也可以读入STP、CATPart、CATmodel等格式模型文件，还可以通过Vericut与CAM软件的接口直接将这些模型数据和其他相关加工资源传入Vericut，构架模型图如图6所示。</p></sec><sec id="s6_2"><title>4.2. 设定编程零点</title><p>项目树中，选择“设置”，右键选择“G-代码”/设定/表。根据零件编程零点建立编程坐标系，并用该坐标系设定零点，设置零点如图7。</p><p>图6. 构架三维模型</p><p>图7. 刀具管理</p></sec><sec id="s6_3"><title>4.3. 添加NC程序和子程序</title><p>在项目树中，分别双击“数控程序”和“数控子程序”，添加相应程序。添加程序时，须按照加工工艺过程顺序添加。</p><p>主程序如下：</p><p>%_N_DF_ZIDTOU_MPF</p><p>;$PATH=/_N_WKS_DIR/_N_SFEZ06MORT__Z_001_WPD</p><p>;%SFEZ06M1-110-000</p><p>;300KM-2 DONG CHE FANG ZHUANG</p><p>;HEARD TYPE 3</p><p>;2009/11/26 EDIT</p><p>;PETUP-01</p><p>;L204,now</p><p>;OPERACION 1 :</p><p>N10 G517 G17 G90 G64</p><p>TRAORI(1)</p><p>N20 M00</p><p>N30 T=10003</p><p>N40 M06</p><p>N50 ;(DIAN JI DIAO ZUO LI MIAN)</p><p>N60 TRANS x=0 y=0 z=0</p><p>N70 g517 g0 x1450 y0</p><p>N80 g0 z380 D0</p><p>N90 B=270 C=180</p><p>N100</p><p>N110 d1</p><p>N120</p><p>N130 G19 G90 S400 F380 D1</p><p>……</p><p>……</p><p>……</p><p>N271</p><p>G0 X=R653</p><p>G0 Z=R651</p><p>G1 X=R652 f=600</p><p>G0 Z=r651+150</p><p>M09</p><p>GOTO N9000</p><p>N9000</p><p>M01</p><p>M17</p></sec><sec id="s6_4"><title>4.4. 设定碰撞检查</title><p>在菜单：“配置/机床设定…/碰撞检测”中，可以设定在加工过程中可能发生碰撞的组件组合，给定安全距离值为2.5 mm。进而将零件加工过程所涉及的资源都设定好，可以保存该项目，以方便后面使用，如图8：</p><p>图8. 碰撞设置</p></sec><sec id="s6_5"><title>4.5. 加工仿真</title><p>运行Vericut，对构架进行模拟加工。在模拟之前，可以设定碰撞检查和行程检查，并结合信息栏和日志文件对模拟进行分析。</p><p>通过B轴和C轴的角度转换，可以方便的实现五面加工，进而模拟实际的加工状态，如图9：</p><p>图9. 模拟加工</p><p>当在加工过程中出现碰撞或报警，状态栏出现提示报警，同时通过设置可以实现程序仿真暂停，如图10：</p><p>图10. 暂停示意</p><p>同时在出现碰撞或过切的区域用设置的警示颜色表示出来(通常设置为红色)，以便于方便检查程序及过切部位。</p></sec></sec><sec id="s7"><title>5. 分析</title><p>加工程序仿真结束后，可以对仿真后的模型进行尺寸和形状的检查。使用Vericut中卡尺(X-Caliper)功能进行规则尺寸的测量，分析形状特征，自动测量如图11。</p><p>自动比对功能(AUTO DIFF)，用Vericut仿真生成的切削模型和导入进来的设计模型进行比较，设置过切容差或残余容差，进行计算，可快速分析出过切区域或残余区域，极大方便了程编人员对仿真结果的检查，再根据过切或残余情况调整程序。</p><p>图11. 自动测量</p></sec><sec id="s8"><title>6. 结束语</title><p>构架数控加工工序是高铁装备生产过程中的重要环节，通过Vericut对加工代码在实际加工前的仿真验证，是数字化制造的一个重要手段。相关工具的应用可以保证G代码的正确性，并通过分析加工过程，可实现优化工艺路径以及刀具加工轨迹等。其与生产效率的提升属于典型的磨刀不误砍柴工关系，可以在复杂零件数控加工过程中进行推广应用。</p></sec><sec id="s9"><title>基金项目</title><p>《高速动车组关键零部件智能制造新模式应用》项目。</p></sec><sec id="s10"><title>文章引用</title><p>吕国艳,山荣成,别维峰,许金国,马 力. VERICUT在高速列车构架数控加工中的仿真研究与应用The Simulation Research and Application of VERICUT in the Numerical Control Manufacturing Process of High-Speed Train Main-Frame[J]. 建模与仿真, 2019, 08(04): 137-145. https://doi.org/10.12677/MOS.2019.84016</p></sec><sec id="s11"><title>参考文献</title></sec></body><back><ref-list><title>References</title><ref id="hanspub.32512-ref1"><label>1</label><mixed-citation publication-type="other" xlink:type="simple">杨胜群. Vericut数控加工仿真技术[M]. 北京: 清华大学出版社, 2010.</mixed-citation></ref><ref id="hanspub.32512-ref2"><label>2</label><mixed-citation publication-type="other" xlink:type="simple">张冶, 洪雪. Unigraphics NX三维工程设计与渲染教程[M]. 北京: 清华大学出版社, 2004.</mixed-citation></ref><ref id="hanspub.32512-ref3"><label>3</label><mixed-citation publication-type="other" xlink:type="simple">杨伟群. 加工中心操作工[M]. 北京: 中国劳动社会保障出版社, 2008.</mixed-citation></ref><ref id="hanspub.32512-ref4"><label>4</label><mixed-citation publication-type="other" xlink:type="simple">杨培中. UG NX 4.0基础与进阶[M]. 北京: 机械工业出版社, 2007.</mixed-citation></ref><ref id="hanspub.32512-ref5"><label>5</label><mixed-citation publication-type="other" xlink:type="simple">李云龙, 曹岩. 数控机床加工仿真系统Vericut[M]. 西安: 西安交通大学出版社, 2004.</mixed-citation></ref><ref id="hanspub.32512-ref6"><label>6</label><mixed-citation publication-type="other" xlink:type="simple">Han, L., Gao, X.-S. and Li, H.B. (2013) Space Cutter Radius Compensation Method for Free Form Surface End Milling. International Journal of Advanced Manufacturing Technology, 67, 2563-2575.&lt;br&gt;https://doi.org/10.1007/s00170-012-4674-2</mixed-citation></ref><ref id="hanspub.32512-ref7"><label>7</label><mixed-citation publication-type="other" xlink:type="simple">杨莉, 陶华, 赵全林. 基于UG的航空薄壁件加工工艺研究与实践[J]. 制造技术与机床, 2017(4): 77-81.</mixed-citation></ref><ref id="hanspub.32512-ref8"><label>8</label><mixed-citation publication-type="other" xlink:type="simple">魏娟, 邵丁, 刘毫, 陆盼. 大型壳体零件的数控加工工艺分析及研究[J]. 机床与液压, 2017, 45(20): 25-29.</mixed-citation></ref><ref id="hanspub.32512-ref9"><label>9</label><mixed-citation publication-type="other" xlink:type="simple">曹剑, 李立军, 白广华. 基于VERICUT五轴数控机床虚拟样机建模与数控仿真[J]. 现代制造技术与装备, 2018, 265(12): 36-38+40.</mixed-citation></ref><ref id="hanspub.32512-ref10"><label>10</label><mixed-citation publication-type="other" xlink:type="simple">李栋, 邓永红. 基于VERICUT的五轴卧式机床建模与加工仿真[J]. 组合机床与自动化加工技术, 2018(5): 135-138.</mixed-citation></ref></ref-list></back></article>