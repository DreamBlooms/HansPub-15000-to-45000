<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE article  PUBLIC "-//NLM//DTD Journal Publishing DTD v3.0 20080202//EN" "http://dtd.nlm.nih.gov/publishing/3.0/journalpublishing3.dtd"><article xmlns:mml="http://www.w3.org/1998/Math/MathML" xmlns:xlink="http://www.w3.org/1999/xlink" dtd-version="3.0" xml:lang="en" article-type="research article"><front><journal-meta><journal-id journal-id-type="publisher-id">IaE</journal-id><journal-title-group><journal-title>Instrumentation and Equipments</journal-title></journal-title-group><issn pub-type="epub">2332-6980</issn><publisher><publisher-name>Scientific Research Publishing</publisher-name></publisher></journal-meta><article-meta><article-id pub-id-type="doi">10.12677/IaE.2016.43008</article-id><article-id pub-id-type="publisher-id">IaE-18623</article-id><article-categories><subj-group subj-group-type="heading"><subject>IaE20160300000_33962435.pdf</subject></subj-group><subj-group subj-group-type="Discipline-v2"><subject>工程技术</subject></subj-group></article-categories><title-group><article-title>
 
 
  基于模糊PID + PLC控制的配料包装系统设计
  Design of Packing System Based on Fuzzy PID + PLC Control
 
</article-title></title-group><contrib-group><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>江</surname><given-names>兴刚</given-names></name><xref ref-type="aff" rid="aff1"><sup>1</sup></xref><xref ref-type="corresp" rid="cor1"><sup>*</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>唐</surname><given-names>绪伟</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib></contrib-group><aff id="aff2"><addr-line>null</addr-line></aff><aff id="aff1"><addr-line>怀化职业技术学院，湖南 怀化</addr-line></aff><author-notes><corresp id="cor1">* E-mail:<email>jiang836@126.com(江兴)</email>;</corresp></author-notes><pub-date pub-type="epub"><day>09</day><month>09</month><year>2016</year></pub-date><volume>04</volume><issue>03</issue><fpage>54</fpage><lpage>60</lpage><permissions><copyright-statement>&#169; Copyright  2014 by authors and Scientific Research Publishing Inc. </copyright-statement><copyright-year>2014</copyright-year><license><license-p>This work is licensed under the Creative Commons Attribution International License (CC BY). http://creativecommons.org/licenses/by/4.0/</license-p></license></permissions><abstract><p>
 
 
  针对我院种业公司包装系统稳定差、精度低的特点，设计了一种模糊PID与PLC技术相结合的自动配料称重包装控制系统，给出了详细的系统结构、具体的控制方式和实现方法，详细论述系统硬件电路设计和软件设计方法。运行表明，系统包装精度和工作稳定性都得以明显改善，实用价值高，值得推广。
   Aiming at our seed company with the characteristics of the poor stability and low precision, this paper proposes a automatic batching packing system based on fuzzy PID + PLC technology, and gives the system structure, control and the concrete implementation method, and also gives an explanation for hardware design and software design of the key part. The trial showed that the precision and working stability of packing system are obviously improved, which has a certain practical value and popularization value.
 
</p></abstract><kwd-group><kwd>自动包装系统，模糊控制，PID，动态精度，PLC, Packing System</kwd><kwd> Fuzzy Control</kwd><kwd> PID</kwd><kwd> Dynamic Accuracy</kwd><kwd> PLC</kwd></kwd-group></article-meta></front><body><sec id="s1"><title>基于模糊PID + PLC控制的配料包装系统设计<sup> </sup></title><p>江兴刚，唐绪伟</p><p>怀化职业技术学院，湖南 怀化</p><disp-formula id="hanspub.18623-formula282"><graphic xlink:href="http://html.hanspub.org/file/5-2990102x6_hanspub.png"  xlink:type="simple"/></disp-formula><p>收稿日期：2016年9月3日；录用日期：2016年9月24日；发布日期：2016年9月27日</p><disp-formula id="hanspub.18623-formula283"><graphic xlink:href="http://html.hanspub.org/file/5-2990102x7_hanspub.png"  xlink:type="simple"/></disp-formula></sec><sec id="s2"><title>摘 要</title><p>针对我院种业公司包装系统稳定差、精度低的特点，设计了一种模糊PID与PLC技术相结合的自动配料称重包装控制系统，给出了详细的系统结构、具体的控制方式和实现方法，详细论述系统硬件电路设计和软件设计方法。运行表明，系统包装精度和工作稳定性都得以明显改善，实用价值高，值得推广。</p><p>关键词 :自动包装系统，模糊控制，PID，动态精度，PLC</p><disp-formula id="hanspub.18623-formula284"><graphic xlink:href="http://html.hanspub.org/file/5-2990102x8_hanspub.png"  xlink:type="simple"/></disp-formula></sec><sec id="s3"><title>1. 引言</title><p>种子的称量、包装和物流是农业生产过程的重要环节 [<xref ref-type="bibr" rid="hanspub.18623-ref1">1</xref>] 。而种子的包装，要按包装要求进行准确称量。称量包装机械的核心部件为电子秤。传统的种子配料包装系统是单一的手动操作，系统稳定差、精度低，不能确保产品质量，生产效率低。基于模糊PID与PLC控制的配料包装系统，采用微机监控称重配料全过程，并自动进行称量误差补偿，操作人员通过人机操作界面进行系统参数设置、修改工艺设定值，当设备出现故障时及时报警，并自动切断设备电源，减少了称重原料消耗，确保了称量精度和产品质量、实现了管理科学规范化、生产过程自动化，提高了生产效率。</p></sec><sec id="s4"><title>2. 系统功能与结构框图</title><p>自动配料包装系统是利用PLC控制变频调速进料机构，配合微机软件控制，实现对不同类型的种子进行输送、分类、分选、装袋、称重、包装、生产数据管理等功能的自动化生产线。为提高称量精度，通过网络实现多个称量系统集中控制。</p><sec id="s4_1"><title>2.1. 系统功能要求</title><p>为确保计量精度，在称重槽下安装T-BX应变式计量传感器，并将数据以RS232方式传送到工业计算机PLC中。系统停机时对称重槽零位监视，并进行人工检零；连续配、送料时系统对称重槽零位自检修正。为加快称量速度，确保了称量精度，系统给料分粗给料和细给料两个阶段。第一阶段为粗给料，进料快，时间短，为额定量的90%至95%。第二阶段为细给料，为额定量的5%至10%。配料过程中，闸门故障造成堵塞时，系统自停报警，并做出相应处理。加料过程结束，放料气动阀开启，开始放料。物料在重力作用下自然流出。当系统检测到称重槽重量为零位时，关闭放料气动阀，放料结束。</p></sec><sec id="s4_2"><title>2.2. 系统方框图</title><p>系统主要由工业计算机、控制台、变频器、A/D转换、电子秤和料斗六部分组成。系统总体结构如图1所示。</p><p>工业计算机和变频器是系统的核心，在一个称重循环过程完成后, 关闭称斗，迅速排空料斗内附着物料，然后测皮重补偿称量误差，进入下一个称重循环 [<xref ref-type="bibr" rid="hanspub.18623-ref2">2</xref>] 。</p></sec><sec id="s4_3"><title>2.3. 系统的功能</title><p>(1) 自动控制装袋重量与包装；(2) 自检称斗皮重补偿称量误差；(3) 故障自检报警。系统具有称量范围大、速度快、精度高的特点。通过参数设置可实现每分钟6至8包，10到50 Kg的称重量，动、静态精度 ≥ 0.2%。</p></sec></sec><sec id="s5"><title>3. 系统硬件设计</title><p>称重传感器是系统关键部分，选型、连接方式和控制方式是提高系统精度的前提 [<xref ref-type="bibr" rid="hanspub.18623-ref3">3</xref>] ，设计思路如下。</p><sec id="s5_1"><title>3.1. 传感器电路设计</title><p>传感器是将质量信号转换为电信号输出的测量装置，是称量控制系统的核心。根据自动配料包装控制系统的工作环境，为实现系统功能及控制要求，选用XTR115为核心的半导体应变式传感器，其内部结构图如图2所示。主要有应变桥构成检测电路、TL061运算放大器、XTR115精密电流变送器等组成。称重传感器主要由弹性体、电阻应变片、电缆线组成惠斯通应变桥。当弹性体荷载发生形变时，便输出物质重量的电信号 [<xref ref-type="bibr" rid="hanspub.18623-ref4">4</xref>] 。图2中，把电阻应变片因荷载产生的电阻变化，由应变桥构成检测电路转为物质重量电压信号，经TL061放大后输送到XTR115精密电流变送器的第5脚，将电压信号转换为电流信号由第4脚输出。</p></sec><sec id="s5_2"><title>3.2. PLC控制电路设计</title><p>系统选用型号为FXIN-40MR的PLC为核心控制器，结合3A模块的输入通道实现称重信号转换处理，处理后的信号再经3A的输出通道控制相应部件动作。I/O分配表如表1所示，I/O接线图如图3所示。</p></sec><sec id="s5_3"><title>3.3. PLC与称重传感器的连接</title><p>称重传感器经量纲转换后通过A/D采样送入PLC进行运算处理，信息流向如图4所示。</p></sec></sec><sec id="s6"><title>4. 控制算法的实现</title><p>为了确保称量精度，提高生产效率，将配料分粗配料和精配料两个阶段 [<xref ref-type="bibr" rid="hanspub.18623-ref5">5</xref>] 。粗配料流量大速度快，精配料速度慢。系统进料精度的高低关键是控制粗、精配料的速度和找到精、粗配料过程的切换点合理解决精度与速度的矛盾关系。本系统采用模糊控制技术，对粗、精配料的初始阶段实施多变量动态控制；采用PID算法控制实现称量误差带的精确静态控制与补偿。模糊控制的关键是选择合适模糊控制器与模糊规则建立。</p><p>本系统模糊控制器由四部分组成，构成双输入单输出模型。框图如图5所示。控制器有三个变量：</p><p>图1. 系统总体结构框图</p><p>图2. 内部结构图</p><p>第一输入变量是物料流量偏差e，和偏差变化率ec。第二个输入变量是期望值y，用于控制配料斗不同高度落差产生的超调量；第三个变量为输出变量u。将e、y、u模糊化后，得E、Y和U信号。</p><p>根据如图6隶属度函数所示，在X、Y、Z上的模糊子集{EI，YJ，UIJ}，模糊关系R = UIJ (EI &#215; YJ) &#215; UIJ和知条件EI和YJ，进行模糊合成计算与决策即Uij。</p><p>由模糊合成推理规则，得出模糊集合U满足U = R &#215; (E &#215; Y)模糊关系，模糊控制规则见表2。</p><p>本系统因系统内存不足，所以选用增量式PID控制，采用增量公式计算如下：</p><p>图3. I/O接线图</p><p>图4. 信号流向图</p><p>图5. 模糊PID控制器框图</p><p>图6. 隶属度函数定义规则</p><table-wrap id="table1" ><label><xref ref-type="table" rid="table1">Table 1</xref></label><caption><title> System I/O distribution tabl</title></caption><table><tbody><thead><tr><th align="center" valign="middle"  colspan="2"  >输入</th><th align="center" valign="middle"  colspan="2"  >输出</th><th align="center" valign="middle"  colspan="2"  >内部寄存器</th></tr></thead><tr><td align="center" valign="middle" >启动按键SB1</td><td align="center" valign="middle" >x0</td><td align="center" valign="middle" >粗进料控制KP1</td><td align="center" valign="middle" >y0</td><td align="center" valign="middle" >粗料给定</td><td align="center" valign="middle" >D0</td></tr><tr><td align="center" valign="middle" >停车按键SB2</td><td align="center" valign="middle" >x1</td><td align="center" valign="middle" >细进料控制KP2</td><td align="center" valign="middle" >y1</td><td align="center" valign="middle" >细料给定</td><td align="center" valign="middle" >D1</td></tr><tr><td align="center" valign="middle" >压力开关SB3</td><td align="center" valign="middle" >x2</td><td align="center" valign="middle" >卸料控制KP3</td><td align="center" valign="middle" >y2</td><td align="center" valign="middle" >皮重</td><td align="center" valign="middle" >D2</td></tr><tr><td align="center" valign="middle" >斗门检测SB4</td><td align="center" valign="middle" >x3</td><td align="center" valign="middle" >夹袋控制KP4</td><td align="center" valign="middle" >y3</td><td align="center" valign="middle" >称皮重延时</td><td align="center" valign="middle" >T0</td></tr><tr><td align="center" valign="middle" >夹袋检测SB5</td><td align="center" valign="middle" >x4</td><td align="center" valign="middle" >称重显示KP5</td><td align="center" valign="middle" >y4</td><td align="center" valign="middle" >放料延时</td><td align="center" valign="middle" >T1</td></tr><tr><td align="center" valign="middle" ></td><td align="center" valign="middle" ></td><td align="center" valign="middle" >运行标志KP6</td><td align="center" valign="middle" >y5</td><td align="center" valign="middle" >辅助继电器</td><td align="center" valign="middle" >M8020</td></tr><tr><td align="center" valign="middle" ></td><td align="center" valign="middle" ></td><td align="center" valign="middle" >报警信号KP7</td><td align="center" valign="middle" >y6</td><td align="center" valign="middle" ></td><td align="center" valign="middle" ></td></tr></tbody></table></table-wrap><p>表1. 系统I/O分配表</p><table-wrap id="table2" ><label><xref ref-type="table" rid="table2">Table 2</xref></label><caption><title> Fuzzy control rule tabl</title></caption><table><tbody><thead><tr><th align="center" valign="middle"  colspan="2"   rowspan="2"  >U</th><th align="center" valign="middle"  colspan="4"  >Y</th></tr></thead><tr><td align="center" valign="middle" >PL</td><td align="center" valign="middle" >PM</td><td align="center" valign="middle" >PS</td><td align="center" valign="middle" >PO</td></tr><tr><td align="center" valign="middle"  rowspan="4"  >E</td><td align="center" valign="middle" >PL</td><td align="center" valign="middle" >PL</td><td align="center" valign="middle" >PL</td><td align="center" valign="middle" >PM</td><td align="center" valign="middle" >※</td></tr><tr><td align="center" valign="middle" >PM</td><td align="center" valign="middle" >PL</td><td align="center" valign="middle" >PM</td><td align="center" valign="middle" >PS</td><td align="center" valign="middle" >*</td></tr><tr><td align="center" valign="middle" >PS</td><td align="center" valign="middle" >PM</td><td align="center" valign="middle" >PS</td><td align="center" valign="middle" >*</td><td align="center" valign="middle" >*</td></tr><tr><td align="center" valign="middle" >PO</td><td align="center" valign="middle" >*</td><td align="center" valign="middle" >*</td><td align="center" valign="middle" >*</td><td align="center" valign="middle" >*</td></tr></tbody></table></table-wrap><p>表2. 模糊控制规则表</p><p>注：※表示该状态不存在，*表示PID控制。</p><disp-formula id="hanspub.18623-formula285"><label>(3)</label><graphic position="anchor" xlink:href="http://html.hanspub.org/file/5-2990102x15_hanspub.png"  xlink:type="simple"/></disp-formula><p>式中，ΔP(k)为k时刻控制增量，e(k)、e(k − 1)、e(k − 2)分别为第k、k − 1、k − 2时刻采样偏差值。K1、K2、K3为经验系数，需现场调试修改。为保持系统压力稳定，采用压力补偿方法。即当压力下降时，U(k)减小，偏差e(k)增大，电动机工作频率升高、转速加快、压力上升 [<xref ref-type="bibr" rid="hanspub.18623-ref6">6</xref>] 。输入、输出偏差信号离散化后，系统动态性能下降，抗干扰能力变差，需依据偏差大小及变化率，利用数字滤波和自动调节PID的比例系数KP、积分常数KI和微分常数KD的方法来抑制干扰，增强系统的实时控制能力。</p></sec><sec id="s7"><title>5. 系统的软件设计</title>系统总体流程图<p>由I/O地址分配表可知，该系统有启动、停机、斗门状态、夹袋夹紧和气源压力开关5个检测信号输入，粗进料、细进料、卸料、夹袋、称重、运行标志、报警7个控制信号输出。根据输入输出信号的数量，选择型号为FXIN-40MR三菱PLC可编程序控制器；选用XSB5高精度称重传感显示控制仪；构成自动化程度高的称量控制系统。用接近开关检测称重斗门关闭和夹袋夹紧信号。料门缓冲、称重斗门、夹袋，动作，由电磁阀控制相应气缸运动实现。系统总体流程如图7所示。只要按下启动按钮，系统启动自动快慢进料、称重、装袋、包装、计数等动作过程。通过PLC精准控制双作用气缸行程速度，结合手动调节进料门的开度大小完成快慢进料，提高了称重速度和精度。</p><p>图7. 系统流程图</p><p>C语言模糊控制程序代码如下：</p><disp-formula id="hanspub.18623-formula286"><graphic xlink:href="http://html.hanspub.org/file/5-2990102x17_hanspub.png"  xlink:type="simple"/></disp-formula></sec><sec id="s8"><title>6. 系统仿真与运行测试</title><p>将模糊PID控制与常规PID控制进行软件仿真运行试验 [<xref ref-type="bibr" rid="hanspub.18623-ref7">7</xref>] 。运行情况如图8所示。</p><p>图8. 模糊PID与常规PID控制响应曲线比较</p><p>响应曲线结果表明，模糊PID控制比常规PID控制超调量低，大大改善系统动、静态性能。本系统自2013年8月应用于我院种业有限公司的包装机中至今，运行效果好，性能稳定。</p></sec><sec id="s9"><title>7. 结束语</title><p>模糊PID控制与PLC控制有效结合，匹配专用高精度压力称重传感器构成自动配料称量包装控制系统，自动化程度高，实现了自动配料称量包装过程的动、静态精准控制，确保了称量精度和产品质量，提高了生产效率。实践证明该系统运行性能稳定、可靠，效果好，具有较高推广价值。</p></sec><sec id="s10"><title>文章引用</title><p>江兴刚,唐绪伟. 基于模糊PID + PLC控制的配料包装系统设计 Design of Packing System Based on Fuzzy PID + PLC Control[J]. 仪器与设备, 2016, 04(03): 54-60. http://dx.doi.org/10.12677/IaE.2016.43008</p></sec><sec id="s11"><title>参考文献 (References)</title></sec></body><back><ref-list><title>References</title><ref id="hanspub.18623-ref1"><label>1</label><mixed-citation publication-type="other" xlink:type="simple">江绪文, 胡江漫, 等. 玉米生产中种子安全贮藏的关键环节[J]. 中国种业, 2012(10): 13-14.</mixed-citation></ref><ref id="hanspub.18623-ref2"><label>2</label><mixed-citation publication-type="other" xlink:type="simple">杨旭东. 面粉自动包装机PLC控制系统设计[J]. 山东工业技术, 2013(13): 26-27.</mixed-citation></ref><ref id="hanspub.18623-ref3"><label>3</label><mixed-citation publication-type="other" xlink:type="simple">卢森幸. “传感器原理与检测技术”教学改革探索[J]. 中国电力教育: 上, 2013(1): 108-109.</mixed-citation></ref><ref id="hanspub.18623-ref4"><label>4</label><mixed-citation publication-type="other" xlink:type="simple">陈志国. 浅谈DSC3型称重式降水传感器工作原理[J]. 鸡西大学学报: 综合版, 2013, 13(5): 157-158.</mixed-citation></ref><ref id="hanspub.18623-ref5"><label>5</label><mixed-citation publication-type="other" xlink:type="simple">尹玉珍. 基于模糊PID控制饲料配料系统的仿真研究[J]. 中国农机化, 2012(3): 129-131.</mixed-citation></ref><ref id="hanspub.18623-ref6"><label>6</label><mixed-citation publication-type="other" xlink:type="simple">路春生. 电动机节能降耗技术及方法探讨[J]. 科技与企业, 2013(16): 354.</mixed-citation></ref><ref id="hanspub.18623-ref7"><label>7</label><mixed-citation publication-type="other" xlink:type="simple">唐绪伟. 一种绿茶微波烘干机系统设计[J]. 制造业自动化, 2014, 36(11): 102-105.</mixed-citation></ref></ref-list></back></article>