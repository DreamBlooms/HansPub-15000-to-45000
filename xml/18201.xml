<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE article  PUBLIC "-//NLM//DTD Journal Publishing DTD v3.0 20080202//EN" "http://dtd.nlm.nih.gov/publishing/3.0/journalpublishing3.dtd"><article xmlns:mml="http://www.w3.org/1998/Math/MathML" xmlns:xlink="http://www.w3.org/1999/xlink" dtd-version="3.0" xml:lang="en" article-type="research article"><front><journal-meta><journal-id journal-id-type="publisher-id">AIRR</journal-id><journal-title-group><journal-title>Artificial Intelligence and Robotics Research</journal-title></journal-title-group><issn pub-type="epub">2326-3415</issn><publisher><publisher-name>Scientific Research Publishing</publisher-name></publisher></journal-meta><article-meta><article-id pub-id-type="doi">10.12677/AIRR.2016.53006</article-id><article-id pub-id-type="publisher-id">AIRR-18201</article-id><article-categories><subj-group subj-group-type="heading"><subject>AIRR20160300000_99762569.pdf</subject></subj-group><subj-group subj-group-type="Discipline-v2"><subject>信息通讯</subject><subject> 工程技术</subject></subj-group></article-categories><title-group><article-title>
 
 
  基于改进遗传算法的单目相机标定
  Monocular Camera Calibration Based on an Improved Genetic Algorithm
 
</article-title></title-group><contrib-group><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>张</surname><given-names>梦洋</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>秦</surname><given-names>瑞康</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>李</surname><given-names>福东</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>杨</surname><given-names>月全</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="corresp" rid="cor1"><sup>*</sup></xref></contrib></contrib-group><aff id="aff2"><addr-line>扬州大学信息工程学院自动化系，江苏 扬州</addr-line></aff><aff id="aff1"><addr-line>null</addr-line></aff><author-notes><corresp id="cor1">* E-mail:<email>yang@yzu.edu.cn(杨月)</email>;</corresp></author-notes><pub-date pub-type="epub"><day>11</day><month>08</month><year>2016</year></pub-date><volume>05</volume><issue>03</issue><fpage>53</fpage><lpage>62</lpage><permissions><copyright-statement>&#169; Copyright  2014 by authors and Scientific Research Publishing Inc. </copyright-statement><copyright-year>2014</copyright-year><license><license-p>This work is licensed under the Creative Commons Attribution International License (CC BY). http://creativecommons.org/licenses/by/4.0/</license-p></license></permissions><abstract><p>
 
 
   
   针对张正友标定方法中相机内参数的求解可能陷入局部最优解的问题，考虑镜头的三阶径向畸变和二阶离心畸变，提出一种基于改进遗传算法的单目相机内参数优化标定方案。该方法可显著提高相机标定中内参数的精度，并能避免陷入局部最优。最后，实验验证了所提方案的有效性和可行性。 In the Zhang Zhengyou calibration method, the solution of the camera intrinsic parameters has the drawback of the possibility of falling into local optimal solution. Considering the third order radial distortion and second-order centrifugal distortion of the lens, a scheme based on an improved genetic algorithm is proposed to solve the intrinsic parameters of the monocular camera. The proposed method can significantly increase the precision of the intrinsic parameters and can avoid falling into local optimal solution. Finally, the experiments demonstrate the effectiveness and feasibility of the proposed method.
    
  
 
</p></abstract><kwd-group><kwd>单目相机，相机标定，角点提取，遗传算法, Monocular Camera</kwd><kwd> Camera Calibration</kwd><kwd> Corner Point Extraction</kwd><kwd> Genetic Algorithm</kwd></kwd-group></article-meta></front><body><sec id="s1"><title>基于改进遗传算法的单目相机标定<sup> </sup></title><p>张梦洋，秦瑞康，李福东，杨月全</p><p>扬州大学信息工程学院自动化系，江苏 扬州</p><disp-formula id="hanspub.18201-formula21"><graphic xlink:href="http://html.hanspub.org/file/1-2610074x6_hanspub.png"  xlink:type="simple"/></disp-formula><p>收稿日期：2016年7月23日；录用日期：2016年8月7日；发布日期：2016年8月11日</p><disp-formula id="hanspub.18201-formula22"><graphic xlink:href="http://html.hanspub.org/file/1-2610074x7_hanspub.png"  xlink:type="simple"/></disp-formula></sec><sec id="s2"><title>摘 要</title><p>针对张正友标定方法中相机内参数的求解可能陷入局部最优解的问题，考虑镜头的三阶径向畸变和二阶离心畸变，提出一种基于改进遗传算法的单目相机内参数优化标定方案。该方法可显著提高相机标定中内参数的精度，并能避免陷入局部最优。最后，实验验证了所提方案的有效性和可行性。</p><p>关键词 :单目相机，相机标定，角点提取，遗传算法</p><disp-formula id="hanspub.18201-formula23"><graphic xlink:href="http://html.hanspub.org/file/1-2610074x8_hanspub.png"  xlink:type="simple"/></disp-formula></sec><sec id="s3"><title>1. 引言</title><p>计算机视觉技术具有非接触、低成本和易实现的特点，因而在实际工程应用中得到了越来越广泛的应用。计算机视觉技术前期大多应用在二维测量和平面缺陷检测，近些年随着处理器速度的提高和计算机视觉的发展，计算机视觉技术在三维重建和三维测量中的应用也越来越多。计算机视觉三维重建或三维测量是从一幅或多幅二维图形中获取目标物的三维模型或者三维位姿信息，在此过程中，相机的内外参数是影响三维重建精度和三维测量精度的重要因素，因而相机标定的精度直接影响计算机视觉测量的精度。计算机视觉测量系统根据相机数目通常分为三种：单目视觉系统，双目视觉系统和多目视觉系统。其中，双目视觉测量系统和多目视觉测量系统是不同位置的固定相机对同一特征点拍摄得到图像，由确定的两相机之间的精确相对位置，从而得到该特征点在任意相机坐标系中的位置 [<xref ref-type="bibr" rid="hanspub.18201-ref1">1</xref>] 。相较于双目相机，单目视觉测量系统是利用目标点之间的约束关系进行求解，单目视觉具有结构简单，标定步骤少，实时性好等特点 [<xref ref-type="bibr" rid="hanspub.18201-ref2">2</xref>] 。朱枫 [<xref ref-type="bibr" rid="hanspub.18201-ref3">3</xref>] 等在试验中证明了由于在特征点坐标计算过程中引入了目标模型的约束，基于模型的单目视觉方法对误差的鲁棒性明显优于双目立体视觉方法。</p><p>在计算机视觉，机器人学，摄影测量学以及其他领域中，相机标定是从图像中提取精确三维信息的先决条件，其标定结果的精度及算法的稳定性直接影响相机工作产生结果的准确性，故提高相机标定精度是提高视觉系统测量精度的第一步 [<xref ref-type="bibr" rid="hanspub.18201-ref4">4</xref>] 。</p><p>相机标定的方法可以分为如下几类：依据有无参照物，可分为传统相机标定方法 [<xref ref-type="bibr" rid="hanspub.18201-ref5">5</xref>] [<xref ref-type="bibr" rid="hanspub.18201-ref6">6</xref>] 、相机自标定方法 [<xref ref-type="bibr" rid="hanspub.18201-ref7">7</xref>] 和基于主动视觉的相机标定方法 [<xref ref-type="bibr" rid="hanspub.18201-ref8">8</xref>] 等。传统相机标定是通过结构已知且精密度高的模块，用来确定相机点与空间点之间的关系。相机自标定是指不需要标定块，仅仅通过图像点之间的对应关系对摄像机进行标定的过程。基于主动视觉的相机标定是指相机绕某轴平移或旋转，通过这种确定的运动信息以求解相机参数。依据成像模型，可分为基于小孔成像模型的标定方法和基于非线性模型的标定方法，为了准确的标定目标，一般需要考虑相机标定的非线性的特性，如相机的径向畸变，离心畸变和薄棱镜畸变。依据所使用标定物的不同，有传统的三维标定块 [<xref ref-type="bibr" rid="hanspub.18201-ref9">9</xref>] 、二次曲线的平面模板 [<xref ref-type="bibr" rid="hanspub.18201-ref10">10</xref>] 、圆形点方阵模板 [<xref ref-type="bibr" rid="hanspub.18201-ref11">11</xref>] 和圆环模板 [<xref ref-type="bibr" rid="hanspub.18201-ref12">12</xref>] 等。</p><p>考虑三阶径向畸变和二阶离心畸变参数情形，本文提出了一种改进的遗传算法实现相机的内参标定。首先，用张正友方法 [<xref ref-type="bibr" rid="hanspub.18201-ref13">13</xref>] 给出内参种群的个体初始值，然后，基于Boltzmann选择、自适应交叉率和变异率的机制，进行迭代优化运算，最终实现相机的内部参数标定。</p></sec><sec id="s4"><title>2. 相机成像模型</title><sec id="s4_1"><title>2.1. 相关坐标系</title><p>相机标定过程主要涉及三个坐标系，如图1所示，分别为图像坐标系、相机坐标系和世界坐标系，如图1所示。</p><p>图像坐标系：投影平面上包括像素坐标系和物理坐标系，像素坐标系指的是以图像左上角为原点</p><p>图1. 相机标定中各坐标系关系图</p><p><inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x10_hanspub.png" xlink:type="simple"/></inline-formula>，横纵坐标为<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x11_hanspub.png" xlink:type="simple"/></inline-formula>的坐标系，它的横纵坐标单位为像素。另外一个物理坐标系在理想模型下以图像中心为原点，<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x12_hanspub.png" xlink:type="simple"/></inline-formula>和<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x13_hanspub.png" xlink:type="simple"/></inline-formula>轴分别平行于<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x14_hanspub.png" xlink:type="simple"/></inline-formula>和<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x15_hanspub.png" xlink:type="simple"/></inline-formula>轴。</p><p><inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x16_hanspub.png" xlink:type="simple"/></inline-formula>点在图像坐标中的坐标为<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x17_hanspub.png" xlink:type="simple"/></inline-formula>，在物理坐标系中的坐标为<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x18_hanspub.png" xlink:type="simple"/></inline-formula>，二者的齐次变换关系为</p><disp-formula id="hanspub.18201-formula24"><label>(1)</label><graphic position="anchor" xlink:href="http://html.hanspub.org/file/1-2610074x19_hanspub.png"  xlink:type="simple"/></disp-formula><p>其中，<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x20_hanspub.png" xlink:type="simple"/></inline-formula>，<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x21_hanspub.png" xlink:type="simple"/></inline-formula>分别表示每个像素在物理坐标系的<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x22_hanspub.png" xlink:type="simple"/></inline-formula>轴和<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x23_hanspub.png" xlink:type="simple"/></inline-formula>轴方向的物理尺寸，<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x24_hanspub.png" xlink:type="simple"/></inline-formula>倾斜因子，通常取为0。</p><p>相机坐标系：相机坐标系<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x25_hanspub.png" xlink:type="simple"/></inline-formula>的<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x26_hanspub.png" xlink:type="simple"/></inline-formula>轴为像机的光轴，另外的两个<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x27_hanspub.png" xlink:type="simple"/></inline-formula>和<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x28_hanspub.png" xlink:type="simple"/></inline-formula>轴取与图像<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x29_hanspub.png" xlink:type="simple"/></inline-formula>和<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x30_hanspub.png" xlink:type="simple"/></inline-formula>轴分别平行，坐标原点<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x31_hanspub.png" xlink:type="simple"/></inline-formula>为镜头的光心。</p><p>世界坐标系：世界坐标系<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x32_hanspub.png" xlink:type="simple"/></inline-formula>是3D空间的一个基准坐标系，用来表示目标物的位姿坐标，一般在目标物的显著特征点处选取。</p><p>下式为<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x33_hanspub.png" xlink:type="simple"/></inline-formula>点在世界坐标系中的坐标与其在相机坐标系中坐标的齐次变换关系式</p><disp-formula id="hanspub.18201-formula25"><label>(2)</label><graphic position="anchor" xlink:href="http://html.hanspub.org/file/1-2610074x34_hanspub.png"  xlink:type="simple"/></disp-formula><p>其中，<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x35_hanspub.png" xlink:type="simple"/></inline-formula>为相机的旋转矩阵，<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x36_hanspub.png" xlink:type="simple"/></inline-formula>，<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x37_hanspub.png" xlink:type="simple"/></inline-formula>和<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x38_hanspub.png" xlink:type="simple"/></inline-formula>为旋转向量，<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x39_hanspub.png" xlink:type="simple"/></inline-formula>为平移向量。</p></sec><sec id="s4_2"><title>2.2. 相机标定参数</title><p>不考虑镜头的各种畸变，相机的线性模型为</p><disp-formula id="hanspub.18201-formula26"><label>(3)</label><graphic position="anchor" xlink:href="http://html.hanspub.org/file/1-2610074x40_hanspub.png"  xlink:type="simple"/></disp-formula><p>其中，<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x41_hanspub.png" xlink:type="simple"/></inline-formula>，<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x42_hanspub.png" xlink:type="simple"/></inline-formula>分别表示在图像坐标系<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x43_hanspub.png" xlink:type="simple"/></inline-formula>轴和<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x44_hanspub.png" xlink:type="simple"/></inline-formula>轴的尺度因子，<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x45_hanspub.png" xlink:type="simple"/></inline-formula>为图像坐标系两轴在非正交下的倾斜因子，一般情况下取为0。</p><p>虽然线性模型的使用很简单方便，但在实际成像过程中，线性模型不能满足精度的要求，需要考虑镜头的失真，考虑非线性畸变的影响，可用下式表示 [<xref ref-type="bibr" rid="hanspub.18201-ref14">14</xref>]</p><disp-formula id="hanspub.18201-formula27"><label>(4)</label><graphic position="anchor" xlink:href="http://html.hanspub.org/file/1-2610074x46_hanspub.png"  xlink:type="simple"/></disp-formula><p>其中，<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x47_hanspub.png" xlink:type="simple"/></inline-formula>为线性模型下的坐标，<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x48_hanspub.png" xlink:type="simple"/></inline-formula>为畸变条件下的坐标。</p><p>一般，镜头畸变存在三种：径向畸变，切向畸变和薄棱镜畸变，以下是各畸变的模型 [<xref ref-type="bibr" rid="hanspub.18201-ref14">14</xref>] 。</p><p>1) 径像畸变的特点是，成像仪中心畸变为零，随着向边缘移动，畸变越来越严重，畸变可以表示为</p><disp-formula id="hanspub.18201-formula28"><label>(5)</label><graphic position="anchor" xlink:href="http://html.hanspub.org/file/1-2610074x49_hanspub.png"  xlink:type="simple"/></disp-formula><p>其中，<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x50_hanspub.png" xlink:type="simple"/></inline-formula>，<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x51_hanspub.png" xlink:type="simple"/></inline-formula>和<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x52_hanspub.png" xlink:type="simple"/></inline-formula>分别表示两个坐标轴的径向畸变量，<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x53_hanspub.png" xlink:type="simple"/></inline-formula>，<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x54_hanspub.png" xlink:type="simple"/></inline-formula>和<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x55_hanspub.png" xlink:type="simple"/></inline-formula>分别表示一阶，二阶和三阶径向畸变系数。</p><p>2) 切向畸变是由透镜制造上的缺陷和安装时的误差造成的，畸变取为</p><disp-formula id="hanspub.18201-formula29"><label>(6)</label><graphic position="anchor" xlink:href="http://html.hanspub.org/file/1-2610074x56_hanspub.png"  xlink:type="simple"/></disp-formula><p>其中，<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x57_hanspub.png" xlink:type="simple"/></inline-formula>和<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x58_hanspub.png" xlink:type="simple"/></inline-formula>分别表示一阶和二阶项切向畸变系数。</p><p>3) 薄棱镜畸变是由于相机的镜头并未完全对准或者是相机的光轴并非正交。它可由以下的数学表达式表示为</p><disp-formula id="hanspub.18201-formula30"><label>(7)</label><graphic position="anchor" xlink:href="http://html.hanspub.org/file/1-2610074x59_hanspub.png"  xlink:type="simple"/></disp-formula><p>其中，<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x60_hanspub.png" xlink:type="simple"/></inline-formula>和<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x61_hanspub.png" xlink:type="simple"/></inline-formula>分别为模型的畸变系数。</p><p>二阶切向畸变和三阶径向畸变，这两种畸变已经能够很好的描述相机的实际情况，过多考虑畸变参数不仅不能提高精度，反而会影响标定的稳定性。考虑这两种畸变的实际坐标值与理想坐标值的函数关系</p><disp-formula id="hanspub.18201-formula31"><label>(8)</label><graphic position="anchor" xlink:href="http://html.hanspub.org/file/1-2610074x62_hanspub.png"  xlink:type="simple"/></disp-formula><p>其中，<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x63_hanspub.png" xlink:type="simple"/></inline-formula>为畸变系数，<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x64_hanspub.png" xlink:type="simple"/></inline-formula>。</p></sec></sec><sec id="s5"><title>3. 相机内参初值的确定</title><p>一般常采用张正友 [<xref ref-type="bibr" rid="hanspub.18201-ref6">6</xref>] 的方法确定相机内参的初值。令图像上点<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x65_hanspub.png" xlink:type="simple"/></inline-formula>的齐次坐标为<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x66_hanspub.png" xlink:type="simple"/></inline-formula>，该点在世界坐标系中的齐次坐标<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x67_hanspub.png" xlink:type="simple"/></inline-formula>，则三维点<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x68_hanspub.png" xlink:type="simple"/></inline-formula>与图像上的投影点的关系为</p><disp-formula id="hanspub.18201-formula32"><label>(9)</label><graphic position="anchor" xlink:href="http://html.hanspub.org/file/1-2610074x69_hanspub.png"  xlink:type="simple"/></disp-formula><p>其中，<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x70_hanspub.png" xlink:type="simple"/></inline-formula>，不失一般性，设标定板的平面位于世界坐标系的<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x71_hanspub.png" xlink:type="simple"/></inline-formula>处，故旋转向量只考虑<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x72_hanspub.png" xlink:type="simple"/></inline-formula>和<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x73_hanspub.png" xlink:type="simple"/></inline-formula>，上式可写为</p><disp-formula id="hanspub.18201-formula33"><label>(10)</label><graphic position="anchor" xlink:href="http://html.hanspub.org/file/1-2610074x74_hanspub.png"  xlink:type="simple"/></disp-formula><p>其中，<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x75_hanspub.png" xlink:type="simple"/></inline-formula>，由上式，对任意给出的标定图像，可得到对应单应性矩阵<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x76_hanspub.png" xlink:type="simple"/></inline-formula>，这里得到的单应性矩阵与真正的单应性矩阵相差一个比例因子<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x77_hanspub.png" xlink:type="simple"/></inline-formula>，即<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x78_hanspub.png" xlink:type="simple"/></inline-formula>。</p><p>由旋转矩阵的标准正交性质，可得约束条件</p><disp-formula id="hanspub.18201-formula34"><label>(11)</label><graphic position="anchor" xlink:href="http://html.hanspub.org/file/1-2610074x79_hanspub.png"  xlink:type="simple"/></disp-formula><p><inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x80_hanspub.png" xlink:type="simple"/></inline-formula>矩阵的列向量表示为<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x81_hanspub.png" xlink:type="simple"/></inline-formula>，<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x82_hanspub.png" xlink:type="simple"/></inline-formula>。设</p><disp-formula id="hanspub.18201-formula35"><label>(12)</label><graphic position="anchor" xlink:href="http://html.hanspub.org/file/1-2610074x83_hanspub.png"  xlink:type="simple"/></disp-formula><p><inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x84_hanspub.png" xlink:type="simple"/></inline-formula>为对称矩阵，其向量形式<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x85_hanspub.png" xlink:type="simple"/></inline-formula>，有</p><disp-formula id="hanspub.18201-formula36"><label>(13)</label><graphic position="anchor" xlink:href="http://html.hanspub.org/file/1-2610074x86_hanspub.png"  xlink:type="simple"/></disp-formula><p>其中，<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x87_hanspub.png" xlink:type="simple"/></inline-formula></p><p>最后，根据内参数限制条件</p><disp-formula id="hanspub.18201-formula37"><label>(14)</label><graphic position="anchor" xlink:href="http://html.hanspub.org/file/1-2610074x88_hanspub.png"  xlink:type="simple"/></disp-formula><p>从而求得<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x89_hanspub.png" xlink:type="simple"/></inline-formula>值，进而得到内参的初值。</p></sec><sec id="s6"><title>4. 基于改进遗传算法的内参优化</title><p>遗传算法适用于多参数，大范围和非线性的优化过程，为提高相机标定内参数的求解精度，本文采用改进的遗传算法对相机内参求解。设目标函数为</p><disp-formula id="hanspub.18201-formula38"><label>(15)</label><graphic position="anchor" xlink:href="http://html.hanspub.org/file/1-2610074x90_hanspub.png"  xlink:type="simple"/></disp-formula><p>其中，<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x91_hanspub.png" xlink:type="simple"/></inline-formula>为角点提取的特征点坐标，<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x92_hanspub.png" xlink:type="simple"/></inline-formula>为对应网格点投影到图像上的坐标，<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x93_hanspub.png" xlink:type="simple"/></inline-formula>，<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x94_hanspub.png" xlink:type="simple"/></inline-formula>，<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x95_hanspub.png" xlink:type="simple"/></inline-formula>。由于二进制编码会产生较大的Hamming距离，另二进制编码会使编码长度过长，影响搜索效率，所以本文采用浮点编码的方式。个体的适应度函数定义为</p><disp-formula id="hanspub.18201-formula39"><label>(16)</label><graphic position="anchor" xlink:href="http://html.hanspub.org/file/1-2610074x96_hanspub.png"  xlink:type="simple"/></disp-formula><p>在文 [<xref ref-type="bibr" rid="hanspub.18201-ref15">15</xref>] [<xref ref-type="bibr" rid="hanspub.18201-ref16">16</xref>] 研究基础上，本文给出基于改进的遗传算法的内参标定算法如下。标定算法流程，如图2所示。</p><p>基于改进的遗传算法内参标定算法描述如下：</p><p>{</p><p>Step 1 基于张正友的相机标定算法，确定相机内参种群个体的初值。根据初始值，在一定范围内随机生成N个个体。</p><p>Step 2 计算个体的适应度函数值。</p><p>Step 3 采用Boltzmann法进行选择操作。使得早期阶段的选择压力较小，较差个体有生存的机会，以保持个体的多样性；随着后期选择压力变大，可缩短搜索邻域以加快优化速度。具体选择策略是，采用Boltzmann法 [<xref ref-type="bibr" rid="hanspub.18201-ref15">15</xref>] ，具体选择的概率<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x97_hanspub.png" xlink:type="simple"/></inline-formula>取为</p><disp-formula id="hanspub.18201-formula40"><label>(17)</label><graphic position="anchor" xlink:href="http://html.hanspub.org/file/1-2610074x98_hanspub.png"  xlink:type="simple"/></disp-formula><p>其中，<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x99_hanspub.png" xlink:type="simple"/></inline-formula>是退火温度，<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x100_hanspub.png" xlink:type="simple"/></inline-formula>为第<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x101_hanspub.png" xlink:type="simple"/></inline-formula>个个体。<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x102_hanspub.png" xlink:type="simple"/></inline-formula>随着迭代的进行逐渐缩小，选择压力随之升高。</p><p>图2. 基于改进的遗传算法流程图</p><p>Step 4 按自适应交叉率<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x104_hanspub.png" xlink:type="simple"/></inline-formula>对选中的两个体的相应基因位进行交叉，由此产生了新的个体。交叉策略是：采用自适应的方法设定交叉率为<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x105_hanspub.png" xlink:type="simple"/></inline-formula>，使交叉率随着适应度和迭代次数而变化，自适应交叉率取为 [<xref ref-type="bibr" rid="hanspub.18201-ref16">16</xref>]</p><disp-formula id="hanspub.18201-formula41"><label>(18)</label><graphic position="anchor" xlink:href="http://html.hanspub.org/file/1-2610074x106_hanspub.png"  xlink:type="simple"/></disp-formula><p>其中，<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x107_hanspub.png" xlink:type="simple"/></inline-formula>为当前个体最大的适应度值，<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x108_hanspub.png" xlink:type="simple"/></inline-formula>为当前平均适应度值，<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x109_hanspub.png" xlink:type="simple"/></inline-formula>为交叉个体中适应度值大的个体，设<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x110_hanspub.png" xlink:type="simple"/></inline-formula>为最大的交叉率，<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x111_hanspub.png" xlink:type="simple"/></inline-formula>为取值为区间<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x112_hanspub.png" xlink:type="simple"/></inline-formula>参数。</p><p>当交叉个体的适应度值小于平均值时，采用最大的交差率<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x113_hanspub.png" xlink:type="simple"/></inline-formula>交叉。对于进化初期，交叉率偏大，增加个体多样性；对于后期，交叉率偏小，使进化趋于稳定。</p><p>对任意两两个体，在0到1之间产生一个随机数，若该数小于<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x114_hanspub.png" xlink:type="simple"/></inline-formula>，则进行交叉，生成新个体；否则，保留原父代个体。其中，交叉的位置为个体基因上随机任选的一个基因位。</p><p>Step 5采用自适应变异率<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x115_hanspub.png" xlink:type="simple"/></inline-formula>以选中的个体的某基因位进行变异操作。采用自适应变异率，使变异率随个体适应度函数值和迭代次数变化而作相应变化。自适应变异率取为 [<xref ref-type="bibr" rid="hanspub.18201-ref16">16</xref>]</p><disp-formula id="hanspub.18201-formula42"><label>(19)</label><graphic position="anchor" xlink:href="http://html.hanspub.org/file/1-2610074x116_hanspub.png"  xlink:type="simple"/></disp-formula><p>其中，<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x117_hanspub.png" xlink:type="simple"/></inline-formula>为变异个体的适应度值，设<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x118_hanspub.png" xlink:type="simple"/></inline-formula>为最大的变异率，<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x119_hanspub.png" xlink:type="simple"/></inline-formula>为取值区间<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x120_hanspub.png" xlink:type="simple"/></inline-formula>的参数。</p><p>与交叉类似，当变异个体的适应度值小于平均值时，采用最大的变异率<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x121_hanspub.png" xlink:type="simple"/></inline-formula>变异。当变异个体中有个体适应度值大于平均适应度值，通过调节变异参数<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x122_hanspub.png" xlink:type="simple"/></inline-formula>，在进化初期，变异率偏大以增加个体多样性；对于后期，变异率偏小使进化趋于稳定。</p><p>对所有种群个体，在0到1之间产生一个随机数，若该数小于<inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x123_hanspub.png" xlink:type="simple"/></inline-formula>，则进行变异；否则，保留原个体。其中，变异的位置为个体基因上随机任选的一个基因位。</p><p>Step 6 当迭代次数未达到设定的值，且最优值不满足给定的阈值，则转向Step3。</p><p>Step7 迭代结束，算法终止。</p><p>}//基于改进的遗传算法内参标定算法。</p></sec><sec id="s7"><title>5. 实验</title><p>本文用到的是基于MATLB的相机标定工具箱Toolbox中的图像载入、角点提取和相机标定功能，其中原工具箱使用的标定模板为30 mm &#180; 30 mm的棋盘格，使用的是张正友的相机标定方法，内参的优化采用最速下降法。在原工具箱的基础上对内参进行初始化，使用改进的遗传算法对内参优化。这里选择提取角点的窗口大小为5 mm &#180; 5 mm，图像上逆时针四个棋盘格角点，以第一个点为图像原点，X轴和Y轴，如图3所示，水平和垂直方向小方格的尺寸dX和dY的尺寸都别为30 mm。</p><p>通过实验平台，对所提标定方法进行验证。任选图例中的两幅图像进行标定，采用Harris的方法提取角点，利用张正友的相机标定方法，获得内参的初始值，如表1所示。</p><p>当获得内参后，进行二次投影到图像坐标系中，与原图像进行比较，分别获得误差图。基于Toolbox最速下降法得到的投影误差，如图4所示。基于Toolbox标准遗传算法得到的投影误差图，如图5所示。基于本文改进的遗传算法的投影误差图，如图6所示。</p><p>三种算法所对应的二次投影后与原图像提取角点的误差平均值，如表2所示，第一维是X方向轴平均误差，第二维是Y轴方向平均误差。可以看出，基于改进的遗传算法内参标定有较好的标定精度。</p><p>图3. 角点提取</p><p>图4. 基于Toolbox最速下降算法的投影误差</p><p>图5. 基于Toolbox遗传算法的投影误差</p><p>图6. 基于改进的遗传算法的投影误差</p><table-wrap id="table1" ><label><xref ref-type="table" rid="table1">Table 1</xref></label><caption><title> Initialization of inner parameter</title></caption><table><tbody><thead><tr><th align="center" valign="middle" >参数</th><th align="center" valign="middle" >初始值</th></tr></thead><tr><td align="center" valign="middle" ><inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x128_hanspub.png" xlink:type="simple"/></inline-formula></td><td align="center" valign="middle" >[684.86027 684.86027]</td></tr><tr><td align="center" valign="middle" ><inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x129_hanspub.png" xlink:type="simple"/></inline-formula></td><td align="center" valign="middle" >[319.50000 239.50000]</td></tr><tr><td align="center" valign="middle" ><inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x130_hanspub.png" xlink:type="simple"/></inline-formula></td><td align="center" valign="middle" >0.00000</td></tr><tr><td align="center" valign="middle" ><inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x131_hanspub.png" xlink:type="simple"/></inline-formula></td><td align="center" valign="middle" >[0.00000 0.00000 0.00000 0.00000 0.00000]</td></tr></tbody></table></table-wrap><p>表1. 内参的初始化</p><table-wrap id="table2" ><label><xref ref-type="table" rid="table2">Table 2</xref></label><caption><title> Search areas of the improved G</title></caption><table><tbody><thead><tr><th align="center" valign="middle" >参数</th><th align="center" valign="middle" >搜索范围</th></tr></thead><tr><td align="center" valign="middle" ><inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x132_hanspub.png" xlink:type="simple"/></inline-formula></td><td align="center" valign="middle" >[684.86027 684.86027] &#177; [100 100]</td></tr><tr><td align="center" valign="middle" ><inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x133_hanspub.png" xlink:type="simple"/></inline-formula></td><td align="center" valign="middle" >[319.50000 239.50000] &#177; [100 100]</td></tr><tr><td align="center" valign="middle" ><inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x134_hanspub.png" xlink:type="simple"/></inline-formula></td><td align="center" valign="middle" >[−1 1]</td></tr><tr><td align="center" valign="middle" ><inline-formula><inline-graphic xlink:href="http://html.hanspub.org/file/1-2610074x135_hanspub.png" xlink:type="simple"/></inline-formula></td><td align="center" valign="middle" >[0.00000 0.00000 0.00000 0.00000 0.00000] &#177; [1 1 1 1 1]</td></tr></tbody></table></table-wrap><p>表2. 改进遗传算法的搜索区间</p></sec><sec id="s8"><title>6. 结论</title><p>针对张正友方法求解相机内参数的过程中有陷入局部最优的可能和传统非线性的精度不高的情况，首先用张正友的方法确定初始值，然后基于改进的遗传算法对相机参数优化。由相机标定实验结果看，所提方法明显可提高对相机内参数标定的精度和稳定性。</p></sec><sec id="s9"><title>文章引用</title><p>张梦洋,秦瑞康,李福东,杨月全. 基于改进遗传算法的单目相机标定Monocular Camera Calibration Based on an Improved Genetic Algorithm[J]. 人工智能与机器人研究, 2016, 05(03): 53-62. http://dx.doi.org/10.12677/AIRR.2016.53006</p></sec><sec id="s10"><title>参考文献 (References)</title></sec></body><back><ref-list><title>References</title><ref id="hanspub.18201-ref1"><label>1</label><mixed-citation publication-type="other" xlink:type="simple">庄光明, 崔建伟, 彭作祥. 基于双目定位原理的系统标定算法[J]. 计算机工程与应用, 2010, 46(8): 45-47.</mixed-citation></ref><ref id="hanspub.18201-ref2"><label>2</label><mixed-citation publication-type="other" xlink:type="simple">姚楠. 基于单目视觉的运动目标跟踪定位技术研究[D]: [博士学位论文]. 上海: 上海交通大学, 2014.</mixed-citation></ref><ref id="hanspub.18201-ref3"><label>3</label><mixed-citation publication-type="other" xlink:type="simple">朱枫, 何雷, 郝颖明. 视觉位姿测量中单目视觉与双目立体视觉测量精度比较[J]. 仪器仪表学报, 2007, 28(4): 165-169.</mixed-citation></ref><ref id="hanspub.18201-ref4"><label>4</label><mixed-citation publication-type="other" xlink:type="simple">Ulrich, M. (2003) Hierarchical Real-Time Recognition of Compound Objects in Images. Fakultät für Bauingenieur- und Vermessungswesen, Technische Universität München, Deutsche Geodätische Kommision, Reihe C, Heft Nr. 568, München. Ph.D. Thesis, Germany.</mixed-citation></ref><ref id="hanspub.18201-ref5"><label>5</label><mixed-citation publication-type="other" xlink:type="simple">Tsai, R. (1986) An Efficient and Accurate Camera Calibration Technique for 3D Machine Vision. Proceeding of Computer Vision and Pattern Recognition, Miami Beach, 22-26 June 1986, 364-374.</mixed-citation></ref><ref id="hanspub.18201-ref6"><label>6</label><mixed-citation publication-type="other" xlink:type="simple">Zhang, Z.Y. (1999) Flexible Camera Calibration by Viewing a Plane from Unknown Orientations. Proceeding of the 7th International Conference on Computer Vision, Kerkyra, 20 September-27 September 1999, 666-673.  
http://dx.doi.org/10.1109/iccv.1999.791289</mixed-citation></ref><ref id="hanspub.18201-ref7"><label>7</label><mixed-citation publication-type="other" xlink:type="simple">Hartley, R. (1997) Self-Calibration of Stationary Cameras. International Journal of Computer Vision, 22, 5-23.  
http://dx.doi.org/10.1023/A:1007957826135</mixed-citation></ref><ref id="hanspub.18201-ref8"><label>8</label><mixed-citation publication-type="other" xlink:type="simple">冯春. 基于单目视觉的目标识别与定位研究[D]: [博士学位论文]. 南京: 南京航空航天大学, 2013.</mixed-citation></ref><ref id="hanspub.18201-ref9"><label>9</label><mixed-citation publication-type="other" xlink:type="simple">祝海江, 李仕刚. 基于2D模板余3D包围式标定块的鱼眼相机标定[J]. 仪器仪表学报, 2008, 29(7): 1512-1516.</mixed-citation></ref><ref id="hanspub.18201-ref10"><label>10</label><mixed-citation publication-type="other" xlink:type="simple">龚俊斌, 田金文. 基于二次曲线的线阵相机标定技术[J]. 计算机工程学报, 2013, 39(1): 283-286.</mixed-citation></ref><ref id="hanspub.18201-ref11"><label>11</label><mixed-citation publication-type="other" xlink:type="simple">夏瑞雪, 卢荣胜, 刘宁, 等. 基于圆点阵列靶标的特征点坐标自动提取方法[J]. 中国机械工程, 2010, 21(16): 1906-1910.</mixed-citation></ref><ref id="hanspub.18201-ref12"><label>12</label><mixed-citation publication-type="other" xlink:type="simple">李龙, 何明, 李娜. 椭圆拟合的圆环模板摄像机标定[J]. 西安电子科技大学学报, 2010, 37(6): 1148-1154.</mixed-citation></ref><ref id="hanspub.18201-ref13"><label>13</label><mixed-citation publication-type="other" xlink:type="simple">Zhang, Z. (2000) A Flexible New Technique for Camera Calibration. IEEE Transactions on Pattern Analysis and Machine Intelligence, 22, 1330-1334. http://dx.doi.org/10.1109/34.888718</mixed-citation></ref><ref id="hanspub.18201-ref14"><label>14</label><mixed-citation publication-type="other" xlink:type="simple">郑全新. 基于单目视觉的目标识别与定位[D]: [硕士学位论文]. 济南: 山东大学, 2013.</mixed-citation></ref><ref id="hanspub.18201-ref15"><label>15</label><mixed-citation publication-type="other" xlink:type="simple">李敏强, 寇纪淞, 林丹, 等. 遗传算法的基本理论与应用[M]. 北京: 科学出版社, 2002: 35-39.</mixed-citation></ref><ref id="hanspub.18201-ref16"><label>16</label><mixed-citation publication-type="other" xlink:type="simple">Srinvivas, M. and Patnaik, L.M. (1994) Adaptive Probabilities of Crossover and Mutation in Genetic Algorithms. IEEE Transaction on Systems, Man, and Cybernetics, 24, 656-657. http://dx.doi.org/10.1109/21.286385</mixed-citation></ref></ref-list></back></article>