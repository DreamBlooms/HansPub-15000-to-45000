<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE article  PUBLIC "-//NLM//DTD Journal Publishing DTD v3.0 20080202//EN" "http://dtd.nlm.nih.gov/publishing/3.0/journalpublishing3.dtd"><article xmlns:mml="http://www.w3.org/1998/Math/MathML" xmlns:xlink="http://www.w3.org/1999/xlink" dtd-version="3.0" xml:lang="en" article-type="research article"><front><journal-meta><journal-id journal-id-type="publisher-id">IaE</journal-id><journal-title-group><journal-title>Instrumentation and Equipments</journal-title></journal-title-group><issn pub-type="epub">2332-6980</issn><publisher><publisher-name>Scientific Research Publishing</publisher-name></publisher></journal-meta><article-meta><article-id pub-id-type="doi">10.12677/IaE.2015.34017</article-id><article-id pub-id-type="publisher-id">IaE-16532</article-id><article-categories><subj-group subj-group-type="heading"><subject>IaE20150400000_51819817.pdf</subject></subj-group><subj-group subj-group-type="Discipline-v2"><subject>工程技术</subject></subj-group></article-categories><title-group><article-title>
 
 
  基于S3C2440A的液晶显示控制系统
  Control System of LCD Based on S3C2440A
 
</article-title></title-group><contrib-group><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>佟</surname><given-names>刚</given-names></name><xref ref-type="aff" rid="aff1"><sub>1</sub></xref><xref ref-type="corresp" rid="cor1"><sup>*</sup></xref></contrib></contrib-group><aff id="aff1"><label>1</label><addr-line>中国科学院长春光学精密机械与物理研究所，吉林 长春</addr-line></aff><author-notes><corresp id="cor1">* E-mail:<email>tonggang0601@126.com</email></corresp></author-notes><pub-date pub-type="epub"><day>15</day><month>12</month><year>2015</year></pub-date><volume>03</volume><issue>04</issue><fpage>114</fpage><lpage>120</lpage><permissions><copyright-statement>&#169; Copyright  2014 by authors and Scientific Research Publishing Inc. </copyright-statement><copyright-year>2014</copyright-year><license><license-p>This work is licensed under the Creative Commons Attribution International License (CC BY). http://creativecommons.org/licenses/by/4.0/</license-p></license></permissions><abstract><p>
 
 
  S3C2440A是一款16/32位RISC微处理器，具有强大的控制和信号处理能力。本文介绍了基于S3C2440A的液晶显示模块LQ084V3DG01的开发与应用；根据液晶模块的接口时序和逻辑要求，设计了与S3C2440A的硬件接口电路；完成了液晶显示参数设置、字符、清屏和图像显示等应用程序的编写。S3C2440A的软件采用C语言编写，使程序有很强的可移植性。工程应用结果表明，系统工作稳定，液晶显示效果良好，具有较好的工程使用价值。
   S3C2440A is a 16/32-bit RISC microprocessor and has a strong ability to control and signal processing. The paper introduced the development and application of the LQ084V3DG01 LCD module based on S3C2440A. According to the interface timing and logic requirements of LCD, it designed the interface circuit to S3C2440A. It also completed the setting of LCD parameter, cha-racters, clear screen and image display. The program can be well transplanted and applied to dif-ferent pixel formats of LCD system. C language is adopted to carry out software design, which makes the program transplantable. Project application results show that the system is stable, has good effects and has better use value in the project.
 
</p></abstract><kwd-group><kwd>S3C2440A，液晶显示，接口时序，清屏, S3C2440A</kwd><kwd> LCD</kwd><kwd> Interface Timing</kwd><kwd> Clear Screen</kwd></kwd-group></article-meta></front><body><sec id="s1"><title>基于S3C2440A的液晶显示控制系统<sup> </sup></title><p>佟刚</p><p>中国科学院长春光学精密机械与物理研究所，吉林 长春</p><disp-formula id="hanspub.16532-formula307"><graphic xlink:href="http://html.hanspub.org/file/3-2990074x6_hanspub.png"  xlink:type="simple"/></disp-formula><p>收稿日期：2015年11月25日；录用日期：2015年12月10日；发布日期：2015年12月15日</p><disp-formula id="hanspub.16532-formula308"><graphic xlink:href="http://html.hanspub.org/file/3-2990074x7_hanspub.png"  xlink:type="simple"/></disp-formula></sec><sec id="s2"><title>摘 要</title><p>S3C2440A是一款16/32位RISC微处理器，具有强大的控制和信号处理能力。本文介绍了基于S3C2440A的液晶显示模块LQ084V3DG01的开发与应用；根据液晶模块的接口时序和逻辑要求，设计了与S3C2440A的硬件接口电路；完成了液晶显示参数设置、字符、清屏和图像显示等应用程序的编写。S3C2440A的软件采用C语言编写，使程序有很强的可移植性。工程应用结果表明，系统工作稳定，液晶显示效果良好，具有较好的工程使用价值。</p><p>关键词 :S3C2440A，液晶显示，接口时序，清屏</p><disp-formula id="hanspub.16532-formula309"><graphic xlink:href="http://html.hanspub.org/file/3-2990074x8_hanspub.png"  xlink:type="simple"/></disp-formula></sec><sec id="s3"><title>1. 引言</title><p>S 3C 2440A 是三星公司推出的16/32位RISC微处理器，采用ARM920t的内核，0.13 μm的CMOS标准宏单元和存储器单元，其最高工作频率为400 MHz。具有功耗低、性能高、全静态设计等优点。实现了MMU、AMBA BUS和Harvard高速缓冲体系结构。这一结构具有独立的16KB指令Cache和16KB数据Cache，且每个都是由具有8字长的行组成，并提供了一套完整的通用系统外设，从而减少整体系统成本和无需配置额外的组件[<xref ref-type="bibr" rid="hanspub.16532-ref1">1</xref>] [<xref ref-type="bibr" rid="hanspub.16532-ref2">2</xref>] 。</p><p>随着技术的进步，LCD作为显示器件在各种嵌入式系统中得到越来越广泛的应用。LCD不仅能为人机界面提供高质量的画面显示，而且能提供更直观、方便的交互性输入。LQ084V3DG01是Sharp公司生产的8.4''透射式彩色有源矩阵液晶显示模块，其接口为TTL电平，采用33脚软性PCB封装，分辨率为640 &#215; 480 [<xref ref-type="bibr" rid="hanspub.16532-ref3">3</xref>] 。</p><p>本文介绍了S 3C 2440A LCD控制器和LQ084V3DG01的接口时序和逻辑要求，着重研究了S 3C 2440A 与LQ084V3DG01的硬件接口电路和各种寄存器的设置，完成了字符、清屏、图像显示灯程序的编写。软件采用C语言编写，具有较强的可移植性。运行结果表明，系统工作稳定，显示效果良好。</p></sec><sec id="s4"><title>2. 系统硬件设计</title><sec id="s4_1"><title>2.1. 接口电路设计</title><p>S 3C 2440A 对于片内的各个部件采用了独立的电源供给方式：内核采用1.3 V供电；I/O单元采用3.3 V供电；存储单元采用3.3V供电[<xref ref-type="bibr" rid="hanspub.16532-ref4">4</xref>] [<xref ref-type="bibr" rid="hanspub.16532-ref5">5</xref>] 。LQ084V3DG01供电电压也为3.3 V，因此S 3C 2440A 的I/O口可以直接和LQ084V3DG01相连，有效简化了硬件系统的设计。LQ084V3DG01共有32路信号与S 3C 2440A 相连，其中18路数据信号(红、绿、蓝各6路)，4路控制信号，其余为电源和地，具体硬件电路如图1所示。</p></sec><sec id="s4_2"><title>2.2. S 3C 2440A LCD控制器</title><p>S 3C 2440A 处理器内置了LCD控制器，其功能能将显示在LCD上的数据从系统内部的数据缓冲区通过逻辑单元传送到外部的LCD驱动器中。支持每像素1位、2位、4位和8位带有调色板的TFT LCD和每像素16位与24位的无调色板真彩色显示[<xref ref-type="bibr" rid="hanspub.16532-ref6">6</xref>] [<xref ref-type="bibr" rid="hanspub.16532-ref7">7</xref>] 。</p><p>LCD控制器主要由REGBANK、LCDCDMA两大部分组成，用于产生必要的控制信号和传输数据信号。REGBANK有17个可编程寄存器组和256 &#215; 16的调色板存储器，用来设定LCD控制器。LCDCDMA是一个专用的DMA (Direct Memory Access)，自动从帧存储器传输视频数据到LCD控制器，视频数据可以不经CPU处理直接显示在屏上。TIMEGEN由可编程逻辑器件组成，产生VSYNC、HSYNC、VCLK、VDEN信号等，以支持不同的LCD驱动器接口时序和速率[<xref ref-type="bibr" rid="hanspub.16532-ref8">8</xref>] [<xref ref-type="bibr" rid="hanspub.16532-ref9">9</xref>] 。框图如图2</p><p>图1. S 3C 2440A 与LQ084V3DG01接口电路</p><p>所示。</p></sec><sec id="s4_3"><title>2.3. TFT LCD接口时序</title><p>S 3C 2440A 有两种访问LQ084V3DG01的方式：直接访问方式和间接访问方式。由于S 3C 2440A 相对于液晶模块控制器为高速器件，直接访问方式可能会因为时序上不匹配而无法正常运行，因此接口设计采用间接控制方式，即模拟液晶模块时序的方式与其通讯[<xref ref-type="bibr" rid="hanspub.16532-ref10">10</xref>] 。</p><p>LQ084V3DG01采用18位数字RGB接口，该接口是为TFT LCD模组提供高品质显示而设计的，可以高速、低功耗地完成各种静态和动态图像显示。VSYNC、HSYNC、VCLK、VDEN为控制信号，用于帧、行、像素的数据传输[<xref ref-type="bibr" rid="hanspub.16532-ref11">11</xref>] 。LQ084V3DG01液晶模块RGB接口时序示意图如图3所示。</p></sec></sec><sec id="s5"><title>3. 系统软件设计</title><p>S 3C 2440A 的软件设计是在ADS (ARM Developer Suite)开发工具下进行的。ADS由命令行开发工具、ARM实时库、GUI开发环境、实用程序和支持软件组成[<xref ref-type="bibr" rid="hanspub.16532-ref12">12</xref>] 。用户可以为ARM系列的RISC处理器编写和调试自己的开发应用程序。</p><p>图2. S 3C 2440A LCD控制器框图</p><p>图3. RGB接口示意图</p><sec id="s5_1"><title>3.1. LCD参数设置</title><p>S 3C 2440A 的LCD控制寄存器主要有：LCDCON1~5。LCDCON1对LCD的类型、数据位数、是否需要VDEN输出及VCLK进行设置；LCDCON2对VBPD、VFPD、VSPW进行设置；LCDCON3及LCDCON4对HBPD、HFPD、HSPW进行设置；LCDCON5对VCLK、HSYNC、VSYNC的极性进行设置[<xref ref-type="bibr" rid="hanspub.16532-ref13">13</xref>] 。以下为初始化程序部分源代码：</p><disp-formula id="hanspub.16532-formula310"><graphic xlink:href="http://html.hanspub.org/file/3-2990074x12_hanspub.png"  xlink:type="simple"/></disp-formula><disp-formula id="hanspub.16532-formula311"><graphic xlink:href="http://html.hanspub.org/file/3-2990074x13_hanspub.png"  xlink:type="simple"/></disp-formula><p>为了保证程序的可移植性，在编写程序时对相关参数用符号常量表示，这样如果需要更换LCD，只需修改符号常量的值即可。</p></sec><sec id="s5_2"><title>3.2. 液晶清屏程序</title><p>系统开机、翻页、复位时，液晶屏要进行清屏，清屏是进行字符、图像显示等工作的前提。清屏程序框图如图4所示。</p><p>图4. 清屏程序流程图</p><p>液晶屏分辨率为640 &#215; 480，程序中定义为：</p><disp-formula id="hanspub.16532-formula312"><graphic xlink:href="http://html.hanspub.org/file/3-2990074x15_hanspub.png"  xlink:type="simple"/></disp-formula></sec></sec><sec id="s6"><title>4. 显示效果</title><p>系统在设计完硬件接口和软件驱动后，还要配合相应的显示程序才能将需要的信息显示在屏幕上，如各种颜色的汉字、英文、数字及图像等。字符的显示程序与清屏程序编程思路基本相同，不再累述，显示效果如图5所示。</p><p>图像显示涉及分辨率变换，系统选用的LQ084V3DG01分辨率为640 &#215; 480，而数字图像分辨率通常较高，为了能显示整幅图像，只能对输入的数字图像进行重抽样，必要时将图像边缘裁减掉[<xref ref-type="bibr" rid="hanspub.16532-ref14">14</xref>] ，显示效果如图6所示。</p><p>图5. 字符显示</p><p>图6. 图像显示</p></sec><sec id="s7"><title>5. 结束语</title><p>采用RGB接口的TFT LCD与高性能的32位S 3C 2440A 构成了显示系统。根据设计的硬件接口电路，针对TFT LCD的接口时序和显示要求，完成了软件的编写、编译和加载。本系统已应用到实际工程中，达到了显示稳定、色彩丰富、人机界面友好的显示效果。</p></sec><sec id="s8"><title>基金项目</title><p>吉林省青年科研基金(No: 20150520102JH)。</p></sec><sec id="s9"><title>文章引用</title><p>佟刚. 基于S3C2440A的液晶显示控制系统Control System of LCD Based on S3C2440A[J]. 仪器与设备, 2015, 03(04): 114-120. http://dx.doi.org/10.12677/IaE.2015.34017</p></sec><sec id="s10"><title>参考文献 (References)</title></sec></body><back><ref-list><title>References</title><ref id="hanspub.16532-ref1"><label>1</label><mixed-citation publication-type="other" xlink:type="simple">杜通波, 李青, 李雄. 基于ARM9的相序自动调整与电量测算系统[J]. 仪表技术与传感器, 2013(3): 19-21.</mixed-citation></ref><ref id="hanspub.16532-ref2"><label>2</label><mixed-citation publication-type="other" xlink:type="simple">张豪, 杨春燕, 汪莜阳. S3C2440A芯片及应用[J]. 电子设计工程, 2011, 19(24): 26-30.</mixed-citation></ref><ref id="hanspub.16532-ref3"><label>3</label><mixed-citation publication-type="other" xlink:type="simple">(2007) Device Speci-fication for TFT-LCD Module. http://www.d-peak.com</mixed-citation></ref><ref id="hanspub.16532-ref4"><label>4</label><mixed-citation publication-type="other" xlink:type="simple">宋悦, 周玉国, 李清慧. 基于ARM的嵌入式红外图像监控系统[J]. 仪表技术与传感器, 2013(11): 38-43.</mixed-citation></ref><ref id="hanspub.16532-ref5"><label>5</label><mixed-citation publication-type="other" xlink:type="simple">徐正平, 许永森. S3C2440A在步进电机控制器人机交互中的应用[J]. 液晶与显示, 2015, 30(1): 70-76.</mixed-citation></ref><ref id="hanspub.16532-ref6"><label>6</label><mixed-citation publication-type="other" xlink:type="simple">韦东山, 著. 嵌入式Linux应用开发完全手册[M]. 北京: 人民邮电出版社, 2008.</mixed-citation></ref><ref id="hanspub.16532-ref7"><label>7</label><mixed-citation publication-type="other" xlink:type="simple">粱皓东, 张国平, 潘粱. 基于ARM处理器S3C2440A的便携式视频展示台的设计[J]. 电子设计工程, 2013, 14): 162-167.</mixed-citation></ref><ref id="hanspub.16532-ref8"><label>8</label><mixed-citation publication-type="other" xlink:type="simple">李新, 王雪. 基于SOPC的全彩LED显示系统[J]. 仪表技术与传感器, 2014(5): 90-92.</mixed-citation></ref><ref id="hanspub.16532-ref9"><label>9</label><mixed-citation publication-type="other" xlink:type="simple">胡健生, 臧晓昱. 嵌入式多路视频采集显示系统设计[J]. 液晶与显示, 2010, 25(6): 831-835.</mixed-citation></ref><ref id="hanspub.16532-ref10"><label>10</label><mixed-citation publication-type="other" xlink:type="simple">刘淼, 著. 嵌入式系统接口设计与Linux驱动程序开发[M]. 北京: 北京航空航天大学出版社, 2006.</mixed-citation></ref><ref id="hanspub.16532-ref11"><label>11</label><mixed-citation publication-type="other" xlink:type="simple">纪宁宁, 孙灵燕. S3C2440A驱动RGB接口TFT LCD的研究[J]. 液晶与显示, 2008, 23(1): 96-101.</mixed-citation></ref><ref id="hanspub.16532-ref12"><label>12</label><mixed-citation publication-type="other" xlink:type="simple">杜春雷, 著. ARM体系结构与编程[M]. 北京: 清华大学出版社, 2003.</mixed-citation></ref><ref id="hanspub.16532-ref13"><label>13</label><mixed-citation publication-type="other" xlink:type="simple">齐建虹, 蔡锦达, 顾豪. 基于ARM9嵌入式技术的滚筒式点样仪控制系统[J]. 仪表技术与传感器, 2015(1): 56-59.</mixed-citation></ref><ref id="hanspub.16532-ref14"><label>14</label><mixed-citation publication-type="other" xlink:type="simple">郭同健, 林兆华, 杜壁秀. 基于OMAP处理器图像调焦系统的触摸显示屏接口设计[J]. 液晶与显示, 2010, 25(1): 139-144.</mixed-citation></ref></ref-list></back></article>