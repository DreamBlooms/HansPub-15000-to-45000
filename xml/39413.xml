<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE article  PUBLIC "-//NLM//DTD Journal Publishing DTD v3.0 20080202//EN" "http://dtd.nlm.nih.gov/publishing/3.0/journalpublishing3.dtd"><article xmlns:mml="http://www.w3.org/1998/Math/MathML" xmlns:xlink="http://www.w3.org/1999/xlink" dtd-version="3.0" xml:lang="en" article-type="research article"><front><journal-meta><journal-id journal-id-type="publisher-id">IaE</journal-id><journal-title-group><journal-title>Instrumentation and Equipments</journal-title></journal-title-group><issn pub-type="epub">2332-6980</issn><publisher><publisher-name>Scientific Research Publishing</publisher-name></publisher></journal-meta><article-meta><article-id pub-id-type="doi">10.12677/IaE.2020.84020</article-id><article-id pub-id-type="publisher-id">IaE-39413</article-id><article-categories><subj-group subj-group-type="heading"><subject>IaE20200400000_19077717.pdf</subject></subj-group><subj-group subj-group-type="Discipline-v2"><subject>工程技术</subject></subj-group></article-categories><title-group><article-title>
 
 
  车载状态参数采集设备故障诊断及快速定位功能设计与实现
  Design and Implementation of Fault Diagnosis and Fast Positioning Function of Vehicle State Parameter Collection Equipment
 
</article-title></title-group><contrib-group><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>张</surname><given-names>兴佳</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>周</surname><given-names>磊</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>裴</surname><given-names>飞杨</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>郑</surname><given-names>凯元</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib></contrib-group><aff id="aff2"><addr-line>中国人民解放军63861部队，吉林 白城</addr-line></aff><aff id="aff1"><addr-line>null</addr-line></aff><pub-date pub-type="epub"><day>07</day><month>12</month><year>2020</year></pub-date><volume>08</volume><issue>04</issue><fpage>149</fpage><lpage>159</lpage><permissions><copyright-statement>&#169; Copyright  2014 by authors and Scientific Research Publishing Inc. </copyright-statement><copyright-year>2014</copyright-year><license><license-p>This work is licensed under the Creative Commons Attribution International License (CC BY). http://creativecommons.org/licenses/by/4.0/</license-p></license></permissions><abstract><p>
 
 
  
    本文针对车辆状态参数采集设备故障诊断及快速定位困难的问题，设计了一种基于故障树分析法结合硬件编码的故障监测及定位方法。首先通过唯一设备码结合槽位码实现设备功能模块物理定位，之后通过建立系统故障树、实时发送状态数据和故障分类报警的方式实现故障实时监控。最后以音视频采集模块异常为例，建立并应用故障树，将故障定位到最基本故障单元。实际使用表明，该方法能够快速定位故障模块位置和故障原因，帮助维修人员实现模块级或单元级故障的快速定位，对于提高修理单位的故障诊断能力具有非常大的帮助。
    Aiming at the problem of difficult diagnosis and rapid positioning of armored vehicle state pa-rameter acquisition equipment during the exercise, a fault monitoring and positioning method based on fault tree analysis and hardware coding is designed. Firstly, the physical positioning of the device function module is realized through the unique device code combined with the slot code, and then the real-time monitoring of the fault is realized by establishing a system fault tree, sending status data in real time and fault classification alarm. Finally, taking the exception of the audio and video acquisition module as an example, a fault tree is established and applied to locate the fault to the most basic fault unit. Practical use shows that this method can quickly locate the location of the faulty module and the cause of the fault, help the maintenance personnel to quickly locate the fault at the module or unit level, and have a great help in improving the fault diagnosis capability of the unit repairing unit. 
  
 
</p></abstract><kwd-group><kwd>故障诊断，训练，状态监测，数据标准化, Troubleshooting</kwd><kwd> Train</kwd><kwd> Condition Monitoring</kwd><kwd> Data Standardization</kwd></kwd-group></article-meta></front><body><sec id="s1"><title>摘要</title><p>本文针对车辆状态参数采集设备故障诊断及快速定位困难的问题，设计了一种基于故障树分析法结合硬件编码的故障监测及定位方法。首先通过唯一设备码结合槽位码实现设备功能模块物理定位，之后通过建立系统故障树、实时发送状态数据和故障分类报警的方式实现故障实时监控。最后以音视频采集模块异常为例，建立并应用故障树，将故障定位到最基本故障单元。实际使用表明，该方法能够快速定位故障模块位置和故障原因，帮助维修人员实现模块级或单元级故障的快速定位，对于提高修理单位的故障诊断能力具有非常大的帮助。</p></sec><sec id="s2"><title>关键词</title><p>故障诊断，训练，状态监测，数据标准化</p></sec><sec id="s3"><title>Design and Implementation of Fault Diagnosis and Fast Positioning Function of Vehicle State Parameter Collection Equipment</title><p>Xingjia Zhang, Lei Zhou, Feiyang Pei, Kaiyuan Zheng</p><p>63861 Troops of PLA, Baicheng Jilin</p><p><img src="//html.hanspub.org/file/6-2990289x4_hanspub.png" /></p><p>Received: Nov. 20<sup>th</sup>, 2020; accepted: Dec. 21<sup>st</sup>, 2020; published: Dec. 28<sup>th</sup>, 2020</p><p><img src="//html.hanspub.org/file/6-2990289x5_hanspub.png" /></p></sec><sec id="s4"><title>ABSTRACT</title><p>Aiming at the problem of difficult diagnosis and rapid positioning of armored vehicle state parameter acquisition equipment during the exercise, a fault monitoring and positioning method based on fault tree analysis and hardware coding is designed. Firstly, the physical positioning of the device function module is realized through the unique device code combined with the slot code, and then the real-time monitoring of the fault is realized by establishing a system fault tree, sending status data in real time and fault classification alarm. Finally, taking the exception of the audio and video acquisition module as an example, a fault tree is established and applied to locate the fault to the most basic fault unit. Practical use shows that this method can quickly locate the location of the faulty module and the cause of the fault, help the maintenance personnel to quickly locate the fault at the module or unit level, and have a great help in improving the fault diagnosis capability of the unit repairing unit.</p><p>Keywords:Troubleshooting, Train, Condition Monitoring, Data Standardization</p><disp-formula id="hanspub.39413-formula53"><graphic xlink:href="//html.hanspub.org/file/6-2990289x6_hanspub.png"  xlink:type="simple"/></disp-formula><p>Copyright &#169; 2020 by author(s) and Hans Publishers Inc.</p><p>This work is licensed under the Creative Commons Attribution International License (CC BY 4.0).</p><p>http://creativecommons.org/licenses/by/4.0/</p><p><img src="//html.hanspub.org/file/6-2990289x7_hanspub.png" /> <img src="//html.hanspub.org/file/6-2990289x8_hanspub.png" /></p></sec><sec id="s5"><title>1. 引言</title><p>随着近年来车载状态参数采集设备投入增多，如何在使用过程中，对设备工作状态实时监测，在出现故障时能够快速定位故障设备的所在位置，确保任务进行的连贯性和数据采集的完整性，成为亟需解决的难题。由于车载电子设备的集成化水平较高，故障成因难于判断，定位难度较大，单凭经验和定性分析已经无法满足修理需要。基于此，本文通过深入分析设备工作原理，梳理了设备故障模式与成因并对设备故障程度进行分类，设计并实现了对设备故障诊断及快速定位方法，为后续车载电子设备的故障诊断系统研制提供了方法思路。</p></sec><sec id="s6"><title>2. 设备工作原理</title><sec id="s6_1"><title>2.1. 系统总体设计思路</title><p>车载状态参数采集设备主要用于实现车辆通用参数(包括音频、视频、卫星定位、航向、三轴姿态、振动、速度、加速度、温度、湿度、气压、噪声等参数和武器系统专用总线数据)的实时采集、储存、解析、处理、传输和数据综合信息显示，为实时显示和量化数据评估提供技术支撑，并为维修人员提供维修建议和数据分析基础。</p></sec><sec id="s6_2"><title>2.2. 设备功能组成</title><p>车载状态参数采集设备由主机箱和专用功能模块组成，硬件参考VPX总线架构式设计，主要包括音视频采集处理模块、位置姿态测量模块、环境参数采集模块、专用总线采集模块、振动测量模块、4G数据传输模块、宽幅电源转换模块、低温电池模块、数据交换背板模块等组成。各功能模块板卡通过专用连接器与数据交互传输背板模块连接，背板为各模块统一供电，并提供网络交换平台实现各模块间数据传输，以总线方式向各模块提供精密时间同步信号，实现各采集测量功能。考虑现场有限的使用条件和多样化的数据采集需求，设备按照功能集成、小型便携的设计原则，以灵活组合的方式完成各类被试车辆、各种数据的采集、存储与传输功能。架构采用模块化、通用化、组合化设计，可根据现场情况互换各功能插板，并可进行板级互换，各功能模块可独立工作也可重叠使用。设备组成如图1所示。</p><p>图1. 设备组成框图</p></sec><sec id="s6_3"><title>2.3. 设备故障模式与成因</title><p>车载状态参数采集设备按故障发生模式一般可分为渐进性故障和突发性故障 [<xref ref-type="bibr" rid="hanspub.39413-ref1">1</xref>]。渐进性故障从故障发生的过程来看是一种损耗性故障，车载状态参数采集设备主要用于伴随测试任务，需要与被试车辆一起经历高温、高湿、强腐蚀等外部恶劣环境、滨海、戈壁、沙漠、湿热、高原、极寒等极端恶劣天气以及设备机械震动、电磁辐射、热疲劳等内部因素。设备在这种极端环境的使用过程中导致的故障，其趋势有一定的可预测性。可以采用理论模型法、累计应力分析法等进行预测，也可以通过日常维护保养延长设备使用寿命，减少故障发生次数。</p><p>突发性故障从故障发生的过程来看是一种随机性故障，它发生的条件是不可预测的，故障成因是随机的，故障时机是分散的 [<xref ref-type="bibr" rid="hanspub.39413-ref2">2</xref>]。车载状态参数采集设备作为高精密电子设备，使用频次高，使用环境复杂多变，在这种相对恶劣的条件下，故障成因主要包括以下几个方面：长期机动运输、野外库存条件恶劣、使用维护不当等；内部成因有线缆故障、制造缺陷、元器件失效等。多年使用记录表明，元器件故障大约占设备故障成因的70%左右，是目前对故障成因影响最大的因素之一。元器件主要故障如表1所示。</p><table-wrap id="table1" ><label><xref ref-type="table" rid="table1">Table 1</xref></label><caption><title> Function module main fault tabl</title></caption><table><tbody><thead><tr><th align="center" valign="middle" >序号</th><th align="center" valign="middle" >故障现象</th></tr></thead><tr><td align="center" valign="middle" >1</td><td align="center" valign="middle" >电源无输入/输出</td></tr><tr><td align="center" valign="middle" >2</td><td align="center" valign="middle" >电源电压不在允许范围内</td></tr><tr><td align="center" valign="middle" >3</td><td align="center" valign="middle" >驱动电路输入/输出故障</td></tr><tr><td align="center" valign="middle" >4</td><td align="center" valign="middle" >驱动电路与CPU连接故障</td></tr><tr><td align="center" valign="middle" >5</td><td align="center" valign="middle" >CPU核心控制逻辑故障</td></tr><tr><td align="center" valign="middle" >6</td><td align="center" valign="middle" >CPU与RAM连接故障</td></tr><tr><td align="center" valign="middle" >7</td><td align="center" valign="middle" >CPU与储存器连接故障</td></tr><tr><td align="center" valign="middle" >8</td><td align="center" valign="middle" >CPU外围功能模块故障</td></tr><tr><td align="center" valign="middle" >9</td><td align="center" valign="middle" >外部传感器故障</td></tr></tbody></table></table-wrap><p>表1. 功能模块主要故障表</p></sec></sec><sec id="s7"><title>3. 专用功能模块编码设计</title><sec id="s7_1"><title>3.1. 总体设计思路</title><p>检测过程中，设备以伴随的形式跟随被测车辆按照既定规程进行动作，同时设备内部采用快速插拔设计，方便用户快速更换。这种通用化、模块化的设计，能够提高设备的复用率、提高维修更换时间，但是也会导致设备各测量模块地理空间上定位困难。例如，当上位机接收到某个功能模块故障报警时，无法准确获取其所在设备的槽位位置，这必将影响一线操作人员更换故障模块的及时性。基于此，本文设计了唯一设备码结合槽位码的方式实现设备功能模块物理定位，在数据交换背板对每个槽位进行硬件编码并设定不同地址，各功能模块插入槽位后读取该编码进行地址设置，便于数据交换通信，同时有效避免人为设置地址的不便和冲突。当发现某个功能模块发生故障时，可以立刻通过上位机接收到槽位码和故障诊断数据的IP地址找到此时该模块的实际位置，进行维修或更换。</p></sec><sec id="s7_2"><title>3.2. 设备编码设计</title><p>数据交换背板设计6个功能槽位，不区分专用功能采集模块和电源/电池模块，各板卡可任意插入。通过对每台设备背板地址和背板上的槽位进行编码，相当于确定了每台设备每个槽位的唯一编号，实现对故障模块的物理定位，如表2所示。</p><table-wrap-group id="2"><label><xref ref-type="table" rid="table2">Table 2</xref></label><caption><title> Device address and slot address desig</title></caption><table-wrap id="2_1"><table><tbody><thead><tr><th align="center" valign="middle" ></th><th align="center" valign="middle" >槽位1</th><th align="center" valign="middle" >槽位2</th><th align="center" valign="middle" >槽位3</th><th align="center" valign="middle" >槽位4</th><th align="center" valign="middle" >槽位5</th><th align="center" valign="middle" >槽位6</th><th align="center" valign="middle" ></th><th align="center" valign="middle" ></th></tr></thead><tr><td align="center" valign="middle" >Add_Slot3</td><td align="center" valign="middle" >0</td><td align="center" valign="middle" >0</td><td align="center" valign="middle" >0</td><td align="center" valign="middle" >1</td><td align="center" valign="middle" >1</td><td align="center" valign="middle" >1</td><td align="center" valign="middle" ></td><td align="center" valign="middle" ></td></tr><tr><td align="center" valign="middle" >Add_Slot2</td><td align="center" valign="middle" >0</td><td align="center" valign="middle" >1</td><td align="center" valign="middle" >1</td><td align="center" valign="middle" >0</td><td align="center" valign="middle" >0</td><td align="center" valign="middle" >1</td><td align="center" valign="middle" ></td><td align="center" valign="middle" ></td></tr><tr><td align="center" valign="middle" >Add_Slot1</td><td align="center" valign="middle" >1</td><td align="center" valign="middle" >0</td><td align="center" valign="middle" >1</td><td align="center" valign="middle" >0</td><td align="center" valign="middle" >1</td><td align="center" valign="middle" >0</td><td align="center" valign="middle" ></td><td align="center" valign="middle" ></td></tr><tr><td align="center" valign="middle" >地址数</td><td align="center" valign="middle" >001</td><td align="center" valign="middle" >010</td><td align="center" valign="middle" >011</td><td align="center" valign="middle" >100</td><td align="center" valign="middle" >101</td><td align="center" valign="middle" >110</td><td align="center" valign="middle" ></td><td align="center" valign="middle" ></td></tr></tbody></table></table-wrap><table-wrap id="2_2"><table><tbody><thead><tr><th align="center" valign="middle" ></th><th align="center" valign="middle" >设备1</th><th align="center" valign="middle" >设备2</th><th align="center" valign="middle" >设备3</th><th align="center" valign="middle" >设备4</th><th align="center" valign="middle" >设备5</th><th align="center" valign="middle" >设备6</th><th align="center" valign="middle" >设备7</th><th align="center" valign="middle" >设备8</th></tr></thead><tr><td align="center" valign="middle" >Add_Device6</td><td align="center" valign="middle" >0</td><td align="center" valign="middle" >0</td><td align="center" valign="middle" >0</td><td align="center" valign="middle" >0</td><td align="center" valign="middle" >0</td><td align="center" valign="middle" >0</td><td align="center" valign="middle" >0</td><td align="center" valign="middle" >0</td></tr><tr><td align="center" valign="middle" >Add_Device5</td><td align="center" valign="middle" >0</td><td align="center" valign="middle" >0</td><td align="center" valign="middle" >0</td><td align="center" valign="middle" >0</td><td align="center" valign="middle" >0</td><td align="center" valign="middle" >0</td><td align="center" valign="middle" >0</td><td align="center" valign="middle" >0</td></tr><tr><td align="center" valign="middle" >Add_Device4</td><td align="center" valign="middle" >0</td><td align="center" valign="middle" >0</td><td align="center" valign="middle" >0</td><td align="center" valign="middle" >0</td><td align="center" valign="middle" >0</td><td align="center" valign="middle" >0</td><td align="center" valign="middle" >0</td><td align="center" valign="middle" >1</td></tr><tr><td align="center" valign="middle" >Add_Device3</td><td align="center" valign="middle" >0</td><td align="center" valign="middle" >0</td><td align="center" valign="middle" >0</td><td align="center" valign="middle" >1</td><td align="center" valign="middle" >1</td><td align="center" valign="middle" >1</td><td align="center" valign="middle" >1</td><td align="center" valign="middle" >0</td></tr><tr><td align="center" valign="middle" >Add_Device2</td><td align="center" valign="middle" >0</td><td align="center" valign="middle" >1</td><td align="center" valign="middle" >1</td><td align="center" valign="middle" >0</td><td align="center" valign="middle" >0</td><td align="center" valign="middle" >1</td><td align="center" valign="middle" >1</td><td align="center" valign="middle" >0</td></tr><tr><td align="center" valign="middle" >Add_Device1</td><td align="center" valign="middle" >1</td><td align="center" valign="middle" >0</td><td align="center" valign="middle" >1</td><td align="center" valign="middle" >0</td><td align="center" valign="middle" >1</td><td align="center" valign="middle" >0</td><td align="center" valign="middle" >1</td><td align="center" valign="middle" >0</td></tr><tr><td align="center" valign="middle" >地址数</td><td align="center" valign="middle" >000001</td><td align="center" valign="middle" >000010</td><td align="center" valign="middle" >000011</td><td align="center" valign="middle" >000100</td><td align="center" valign="middle" >000101</td><td align="center" valign="middle" >000110</td><td align="center" valign="middle" >000111</td><td align="center" valign="middle" >001000</td></tr><tr><td align="center" valign="middle" ></td><td align="center" valign="middle" >设备9</td><td align="center" valign="middle" >设备10</td><td align="center" valign="middle" >设备11</td><td align="center" valign="middle" >设备12</td><td align="center" valign="middle" >设备13</td><td align="center" valign="middle" >设备14</td><td align="center" valign="middle" >设备15</td><td align="center" valign="middle" >设备16</td></tr><tr><td align="center" valign="middle" >Add_Device6</td><td align="center" valign="middle" >0</td><td align="center" valign="middle" >0</td><td align="center" valign="middle" >0</td><td align="center" valign="middle" >0</td><td align="center" valign="middle" >0</td><td align="center" valign="middle" >0</td><td align="center" valign="middle" >0</td><td align="center" valign="middle" >0</td></tr><tr><td align="center" valign="middle" >Add_Device5</td><td align="center" valign="middle" >0</td><td align="center" valign="middle" >0</td><td align="center" valign="middle" >0</td><td align="center" valign="middle" >0</td><td align="center" valign="middle" >0</td><td align="center" valign="middle" >0</td><td align="center" valign="middle" >0</td><td align="center" valign="middle" >1</td></tr><tr><td align="center" valign="middle" >Add_Device4</td><td align="center" valign="middle" >1</td><td align="center" valign="middle" >1</td><td align="center" valign="middle" >1</td><td align="center" valign="middle" >1</td><td align="center" valign="middle" >1</td><td align="center" valign="middle" >1</td><td align="center" valign="middle" >1</td><td align="center" valign="middle" >0</td></tr><tr><td align="center" valign="middle" >Add_Device3</td><td align="center" valign="middle" >0</td><td align="center" valign="middle" >0</td><td align="center" valign="middle" >0</td><td align="center" valign="middle" >1</td><td align="center" valign="middle" >1</td><td align="center" valign="middle" >1</td><td align="center" valign="middle" >1</td><td align="center" valign="middle" >0</td></tr><tr><td align="center" valign="middle" >Add_Device2</td><td align="center" valign="middle" >0</td><td align="center" valign="middle" >1</td><td align="center" valign="middle" >1</td><td align="center" valign="middle" >0</td><td align="center" valign="middle" >0</td><td align="center" valign="middle" >1</td><td align="center" valign="middle" >1</td><td align="center" valign="middle" >0</td></tr><tr><td align="center" valign="middle" >Add_Device1</td><td align="center" valign="middle" >1</td><td align="center" valign="middle" >0</td><td align="center" valign="middle" >1</td><td align="center" valign="middle" >0</td><td align="center" valign="middle" >1</td><td align="center" valign="middle" >0</td><td align="center" valign="middle" >1</td><td align="center" valign="middle" >0</td></tr><tr><td align="center" valign="middle" >地址数</td><td align="center" valign="middle" >001001</td><td align="center" valign="middle" >001010</td><td align="center" valign="middle" >001011</td><td align="center" valign="middle" >001100</td><td align="center" valign="middle" >001101</td><td align="center" valign="middle" >001110</td><td align="center" valign="middle" >001111</td><td align="center" valign="middle" >010000</td></tr></tbody></table></table-wrap></table-wrap-group><p>表 2. 设备地址和槽位地址设计表</p><p>每个背板通过六位二进制码对设备地址进行编码，设备1地址为000001，设备2地址为000010，以此类推。背板用三位ABC来表示槽位编号，通过上拉电阻形式，对槽位进行编码，000表示从左至右第一槽位，001表示第二槽位，以此类推。背板上电后，各模块根据槽位编码，自动识别所在槽位，模块初始化时，对内网网卡进行IP设定，每个IP都包含所在设备和槽位的地址信息。</p></sec><sec id="s7_3"><title>3.3. 槽位编码设计</title><p>考虑模块互换性设计，各专用功能模块能够灵活插于背板任何一个槽位上工作，将所有槽位的引脚采用标准化设计，每个槽位通过3位引脚进行编码，便于模块识别。具体引脚定义如表3所示。</p><table-wrap-group id="3"><label><xref ref-type="table" rid="table3">Table 3</xref></label><caption><title> Pin diagram of the backplane slo</title></caption><table-wrap id="3_1"><table><tbody><thead><tr><th align="center" valign="middle" >序号</th><th align="center" valign="middle" >A</th><th align="center" valign="middle" >B</th><th align="center" valign="middle" >C</th><th align="center" valign="middle" >序号</th><th align="center" valign="middle" >A</th><th align="center" valign="middle" >B</th><th align="center" valign="middle" >C</th></tr></thead><tr><td align="center" valign="middle" >1</td><td align="center" valign="middle" >12V1</td><td align="center" valign="middle" >LAN4_DA+</td><td align="center" valign="middle" ></td><td align="center" valign="middle" >17</td><td align="center" valign="middle" >LAN3_DC+</td><td align="center" valign="middle" >1PPS</td><td align="center" valign="middle" >LAN1_DC+</td></tr><tr><td align="center" valign="middle" >2</td><td align="center" valign="middle" >12V1</td><td align="center" valign="middle" >LAN4_DA−</td><td align="center" valign="middle" ></td><td align="center" valign="middle" >18</td><td align="center" valign="middle" >LAN3_DC−</td><td align="center" valign="middle" >25PPS</td><td align="center" valign="middle" >LAN1_DC−</td></tr><tr><td align="center" valign="middle" >3</td><td align="center" valign="middle" >12V1</td><td align="center" valign="middle" >LAN4_DB+</td><td align="center" valign="middle" ></td><td align="center" valign="middle" >19</td><td align="center" valign="middle" >LAN3_DB−</td><td align="center" valign="middle" >RS422_RX2+</td><td align="center" valign="middle" >LAN1_DB−</td></tr><tr><td align="center" valign="middle" >4</td><td align="center" valign="middle" >12V1</td><td align="center" valign="middle" >LAN4_DC+</td><td align="center" valign="middle" ></td><td align="center" valign="middle" >20</td><td align="center" valign="middle" >LAN3_DD+</td><td align="center" valign="middle" >RS422_TX2+</td><td align="center" valign="middle" >LAN1_DD+</td></tr><tr><td align="center" valign="middle" >5</td><td align="center" valign="middle" >LAN2_DA+</td><td align="center" valign="middle" >LAN4_DC−</td><td align="center" valign="middle" ></td><td align="center" valign="middle" >21</td><td align="center" valign="middle" >LAN3_DD−</td><td align="center" valign="middle" >RS422_RX2−</td><td align="center" valign="middle" >LAN1_DD−</td></tr><tr><td align="center" valign="middle" >6</td><td align="center" valign="middle" >LAN2_DA−</td><td align="center" valign="middle" >LAN4_DB−</td><td align="center" valign="middle" ></td><td align="center" valign="middle" >22</td><td align="center" valign="middle" >RS422_TX1+</td><td align="center" valign="middle" >RS422_TX2−</td><td align="center" valign="middle" >Add_Device1</td></tr><tr><td align="center" valign="middle" >7</td><td align="center" valign="middle" >LAN2_DB+</td><td align="center" valign="middle" >LAN4_DD+</td><td align="center" valign="middle" ></td><td align="center" valign="middle" >23</td><td align="center" valign="middle" >RS422_TX1−</td><td align="center" valign="middle" >RS422_GND</td><td align="center" valign="middle" >Add_Device2</td></tr><tr><td align="center" valign="middle" >8</td><td align="center" valign="middle" >LAN2_DC+</td><td align="center" valign="middle" >LAN4_DD−</td><td align="center" valign="middle" ></td><td align="center" valign="middle" >24</td><td align="center" valign="middle" >RS422_RX1+</td><td align="center" valign="middle" >RS422_GND</td><td align="center" valign="middle" >Add_Device3</td></tr><tr><td align="center" valign="middle" >9</td><td align="center" valign="middle" >LAN2_DC−</td><td align="center" valign="middle" >LAN5_DA+</td><td align="center" valign="middle" ></td><td align="center" valign="middle" >25</td><td align="center" valign="middle" >RS422_RX1−</td><td align="center" valign="middle" >Add_Slot1</td><td align="center" valign="middle" >Add_Device4</td></tr><tr><td align="center" valign="middle" >10</td><td align="center" valign="middle" >LAN2_DB−</td><td align="center" valign="middle" >LAN5_DA−</td><td align="center" valign="middle" ></td><td align="center" valign="middle" >26</td><td align="center" valign="middle" >RS422_GND</td><td align="center" valign="middle" >Add_Slot2</td><td align="center" valign="middle" >Add_Device5</td></tr><tr><td align="center" valign="middle" >11</td><td align="center" valign="middle" >LAN2_DD+</td><td align="center" valign="middle" >LAN5_DB+</td><td align="center" valign="middle" ></td><td align="center" valign="middle" >27</td><td align="center" valign="middle" >RS422_GND</td><td align="center" valign="middle" >Add_Slot3</td><td align="center" valign="middle" >Add_Device6</td></tr></tbody></table></table-wrap><table-wrap id="3_2"><table><tbody><thead><tr><th align="center" valign="middle" >12</th><th align="center" valign="middle" >LAN2_DD−</th><th align="center" valign="middle" >LAN5_DC+</th><th align="center" valign="middle" ></th><th align="center" valign="middle" >28</th><th align="center" valign="middle" ></th><th align="center" valign="middle" ></th><th align="center" valign="middle" ></th></tr></thead><tr><td align="center" valign="middle" >13</td><td align="center" valign="middle" >PWR_Down1</td><td align="center" valign="middle" >LAN5_DC−</td><td align="center" valign="middle" ></td><td align="center" valign="middle" >29</td><td align="center" valign="middle" >GND</td><td align="center" valign="middle" ></td><td align="center" valign="middle" ></td></tr><tr><td align="center" valign="middle" >14</td><td align="center" valign="middle" >LAN3_DA+</td><td align="center" valign="middle" >LAN5_DB−</td><td align="center" valign="middle" >LAN1_DA+</td><td align="center" valign="middle" >30</td><td align="center" valign="middle" >GND</td><td align="center" valign="middle" ></td><td align="center" valign="middle" ></td></tr><tr><td align="center" valign="middle" >15</td><td align="center" valign="middle" >LAN3_DA−</td><td align="center" valign="middle" >LAN5_DD+</td><td align="center" valign="middle" >LAN1_DA−</td><td align="center" valign="middle" >31</td><td align="center" valign="middle" >GND</td><td align="center" valign="middle" ></td><td align="center" valign="middle" ></td></tr><tr><td align="center" valign="middle" >16</td><td align="center" valign="middle" >LAN3_DB+</td><td align="center" valign="middle" >LAN5_DD−</td><td align="center" valign="middle" >LAN1_DB+</td><td align="center" valign="middle" >32</td><td align="center" valign="middle" >GND</td><td align="center" valign="middle" ></td><td align="center" valign="middle" >GND</td></tr></tbody></table></table-wrap></table-wrap-group><p>表 3. 背板槽位引脚表</p></sec></sec><sec id="s8"><title>4. 故障快速定位及检测方法</title><p>通过对车载状态参数采集设备使用需求分析和故障分析，通过机内自检测(Built in test, BIT)设计 [<xref ref-type="bibr" rid="hanspub.39413-ref3">3</xref>]，为系统和设备提供故障检测、定位和隔离的自检测手段，同时，为自动测试设备(Automatic Test Equipment, ATE)预留检测接口。</p><sec id="s8_1"><title>4.1. 嵌入式测试性设计</title><p>根据对功能电路的故障分析，在进行测试性设计时首先在关键功能电路引出测试点，并对具有边界扫描结构的芯片进行菊花链设计；对测试性设计电路则是以不影响功能电路工作为前提，并考虑占用最少的电路板面积，增加了选通开关、嵌入式控制器和EEPPORM3个模块。其中，选通开关用于切换功能逻辑电路运行和嵌入式测试运行；嵌入式控制器是测试性电路的主控模块；EEPPROM用于存放自测试和嵌入式测试结果。测试性设计电路如图2所示。</p><p>图2. 嵌入式测试性总体设计方案</p><p>1) CPU功能检查</p><p>CPU功能检查主要进行CPU运算能力和CPU周围资源(RAM, FLASH, SSD)的检测。CPU周围资源检测主要通过对RAM、FLASH和SSD等周围资源进行读写测试完成。CPU用标识数据写特定地址，再读取特定地址数据进行比较。</p><p>2) 电源电路测试性设计</p><p>专用功能模块电源除了为模块本身供电外，同时为嵌入式控制模块供电。为了保证在功能电路发生电源故障的时候，嵌入式控制电路的电源不受其影响，对电源电路进行冗余设计，功能电路电源与测试控制电路的电源各自独立。</p><p>功能电路采用电压求和BIT的方法实现快速故障检测，对各路电源电压衰减后求和，将求和信号与允许电压范围进行比较，如果比较通过则认为电源情况正常，如果比较结果超过允许范围，则认为电源出现异常。在电路板上电工作后，首先进行电源检测，若该项测试不通过，直接给出报警信号，无需进行其他测试项。</p><p>3) IO通道测试性设计</p><p>IO通道测试采用环绕BIT设计，即CPU发送数据至通道1，然后经由通道2将该数据回读，进行比较。如果数据一致，说明CPU至IO连接器没有故障。</p><p>4) CAN通信通道测试性设计</p><p>专用总线采集模块2路CAN接口，本身采用了冗余设计，在测试性设计时设计成环绕BIT，即以CAN1发送数据，CAN2接收数据的方式测试CAN通信通道故障。</p><p>5) 接口功能激励测试设计</p><p>激励测试主要针对离散量输入信号，正常工作模式时，A点与C点连接，输入信号经比较器与基准信号比较后产生高低电平进CPU采集，BIT模式时，B点与A点连接，激励信号经比较器与基准信号比较后产生高低电平进CPU采集。原理图如图3所示。</p><p>图3. 激励测试原理图</p></sec><sec id="s8_2"><title>4.2. 功能模块故障定位设计</title><p>背板通过设计六个上拉式电阻实现对每台设备的地址编码，通过改变电阻的通断情况实现每条电路上的0或1的编码，电路原理图如图4所示。</p><p>图4. 上拉电阻原理图</p><p>每块背板上留有8各槽位，其中2个为网络地址交换机，其余6个为各测量模块槽位。在每个槽位上通过焊接三个定值电阻的方式实现3位二进制数编码，电路原理图如图5所示。</p><p>图5. 定值电阻原理图</p><p>通过上述方式可以实现每台设备每个槽位地址的精确定位。例如某音视频采集模块插入设备地址编码为000001、槽位地址编码为001的背板槽位中，该模块自动读取当前编码进行地址设置，由于编码具有唯一性，故该模块的地址也具有唯一性。用户通过上位机软件读取当前测量模块地址即可知道该模块所在的设备位置和槽位位置，从而实现测量模块的定位。</p></sec><sec id="s8_3"><title>4.3. 故障诊断树设计</title><p>为方便用户掌握各测量模块故障情况，及时确定故障类型，设计了一种基于故障逻辑树的快速诊断方法 [<xref ref-type="bibr" rid="hanspub.39413-ref4">4</xref>]。故障诊断树逻辑图如图6所示。</p><p>图6. 故障诊断树逻辑图</p><p>以惯性导航模块为例，长方形代表状态监测点，里面包括监测点名称和实时数值。长方形监测点之上圆角方形为监测点数据监测条件，各个监测点之间使用“与”“或”逻辑进行判断。多边形为故障诊断结果，包括故障名称和维修建议，同时针对各个诊断结果，上位机软件将详细信息展示，用户可通过这些信息进行针对性维修。</p></sec></sec><sec id="s9"><title>5. 软件设计及实现</title><sec id="s9_1"><title>5.1. 工作流程</title><p>系统启动后加载配置数据，进入登录页面，登录验证通过后，获取用户权限进入主界面，各个功能模块按照业务要求处理各自的业务，处理完成后输出业务数据。工作流程图如图7所示。</p><p>图7. 软件功能流程图</p><p>上位机程序发送状态读取指令分别到位置姿态测量模块、环参/振动/专用总线采集模块、4G数据传输模块和主测量模块，各个模块接到指令后，按照状态数据获取规则读取各组成部分的状态数值，打包为标准网络协议数据包发送到上位机程序进行显示。上位机程序发送设置指令到各个模块，指令包括IP设置、存储空间告警阈值等，各个模块接到指令后，按照指令类型设置相应参数。上位机程序发送故障诊断指令到各个模块，各个模块接到指令后，按照故障诊断获取规则读取各组成部分的故障情况，打包为标准网络协议数据包发送到上位机程序进行显示。</p></sec><sec id="s9_2"><title>5.2. 实现结果与分析</title><p>以音视频采集模块为例，主页面展示局域网中在线板卡的概要信息，包括模块名称①、编号②、IP地址③、心跳计数④、板卡端数据管理服务状态(及FTP服务是否连接)⑤、参数设置服务连接状态⑥、状态监测服务连接状态⑦、音视频查看选项⑧和状态监测项的数值列表⑨。软件界面如图8所示。</p><p>故障诊断界面如图9所示。在故障诊断树中，用户通过点击故障点查看系统给出的维修建议，详细内容显示在界面右上角。</p><p>图 8. 测量模块软件界面图</p><p>图9. 故障诊断树界面图</p><p>通过在上位机软件中的故障诊断，在确定了故障内容的解决方法后，用户即可通过测量模板卡IP地址回溯找到该板卡当前所在设备号和槽位号，进行维修或者更换。</p></sec></sec><sec id="s10"><title>6. 结束语</title><p>本文针对大规模车辆维修中使用地域广、设备数量多的问题，提出了一种对包含多个功能模块的车载状态参数采集设备的故障监测和快速定位方法。利用各功能模块槽位背板进行编码，实现各功能模块的物理地址定位。设计了故障诊断逻辑树，用户通过上位机软件快速找到故障原因，然后通过对测量模块的IP地址回溯定位到故障模块位置，针对性进行处理 [<xref ref-type="bibr" rid="hanspub.39413-ref5">5</xref>]。实际使用表明，该方法有效地缩短了在任务进行中维修车载状态参数采集设备的时间，确保了数据采集的完整性，而且有助于技术人员加深对设备工作原理的理解，具有明显的经济效益 [<xref ref-type="bibr" rid="hanspub.39413-ref6">6</xref>]，同时为之后的数据采集设备的研制提供了有益思路。</p></sec><sec id="s11"><title>文章引用</title><p>张兴佳,周 磊,裴飞杨,郑凯元. 车载状态参数采集设备故障诊断及快速定位功能设计与实现Design and Implementation of Fault Diagnosis and Fast Positioning Function of Vehicle State Parameter Collection Equipment[J]. 仪器与设备, 2020, 08(04): 149-159. https://doi.org/10.12677/IaE.2020.84020</p></sec><sec id="s12"><title>参考文献</title></sec></body><back><ref-list><title>References</title><ref id="hanspub.39413-ref1"><label>1</label><mixed-citation publication-type="other" xlink:type="simple">袁钢. 故障树分析法在机载电子设备故障诊断中的应用研究[J]. 电子测试, 2019(22): 33-36.</mixed-citation></ref><ref id="hanspub.39413-ref2"><label>2</label><mixed-citation publication-type="other" xlink:type="simple">委志强, 李鸿鹏, 何宇廷, 等. 机载电子设备的故障诊断和趋势预测[J]. 失效分析与预防, 2009, 4(1): 58-62.</mixed-citation></ref><ref id="hanspub.39413-ref3"><label>3</label><mixed-citation publication-type="other" xlink:type="simple">朱康珑. 机载电子设备视情修理的思考[J]. 航空维修与工程, 2013(4): 44-47.</mixed-citation></ref><ref id="hanspub.39413-ref4"><label>4</label><mixed-citation publication-type="other" xlink:type="simple">郭济鸣, 齐金平, 李兴运. 故障树分析法的现状与发展[J]. 装备机械, 2018(2): 61-66.</mixed-citation></ref><ref id="hanspub.39413-ref5"><label>5</label><mixed-citation publication-type="other" xlink:type="simple">王其冲. 基于故障树分析法的航空活塞发动机故障诊断专家系统研究[D]: [硕士学位论文]. 西安: 电子科技大学, 2010.</mixed-citation></ref><ref id="hanspub.39413-ref6"><label>6</label><mixed-citation publication-type="other" xlink:type="simple">王康. 基于故障树分析法的航空相机故障诊断技术研究[D]: [硕士学位论文]. 长春: 长春理工大学, 2008.</mixed-citation></ref></ref-list></back></article>