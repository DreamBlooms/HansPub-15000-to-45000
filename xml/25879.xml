<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE article  PUBLIC "-//NLM//DTD Journal Publishing DTD v3.0 20080202//EN" "http://dtd.nlm.nih.gov/publishing/3.0/journalpublishing3.dtd"><article xmlns:mml="http://www.w3.org/1998/Math/MathML" xmlns:xlink="http://www.w3.org/1999/xlink" dtd-version="3.0" xml:lang="en" article-type="research article"><front><journal-meta><journal-id journal-id-type="publisher-id">JSTA</journal-id><journal-title-group><journal-title>Journal of Sensor Technology and Application</journal-title></journal-title-group><issn pub-type="epub">2331-0235</issn><publisher><publisher-name>Scientific Research Publishing</publisher-name></publisher></journal-meta><article-meta><article-id pub-id-type="doi">10.12677/JSTA.2018.63013</article-id><article-id pub-id-type="publisher-id">JSTA-25879</article-id><article-categories><subj-group subj-group-type="heading"><subject>JSTA20180300000_53172175.pdf</subject></subj-group><subj-group subj-group-type="Discipline-v2"><subject>工程技术</subject></subj-group></article-categories><title-group><article-title>
 
 
  基于巨磁电阻的电子罗盘研制
  Development of an Electronic Compass Based on Giant Magneto Resistance
 
</article-title></title-group><contrib-group><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>陶</surname><given-names>豪鸣</given-names></name><xref ref-type="aff" rid="aff1"><sup>1</sup></xref><xref ref-type="corresp" rid="cor1"><sup>*</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>柳</surname><given-names>微微</given-names></name><xref ref-type="aff" rid="aff1"><sup>1</sup></xref><xref ref-type="aff" rid="aff2"><sup>2</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>邓</surname><given-names>祁</given-names></name><xref ref-type="aff" rid="aff1"><sup>1</sup></xref><xref ref-type="aff" rid="aff2"><sup>2</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>赵</surname><given-names>晓锋</given-names></name><xref ref-type="aff" rid="aff1"><sup>1</sup></xref><xref ref-type="aff" rid="aff2"><sup>2</sup></xref></contrib></contrib-group><aff id="aff1"><addr-line>黑龙江大学，黑龙江省普通高等学校电子工程重点实验室，黑龙江 哈尔滨</addr-line></aff><aff id="aff2"><addr-line>null</addr-line></aff><author-notes><corresp id="cor1">* E-mail:<email>707838042@qq.com (陶豪)</email>;</corresp></author-notes><pub-date pub-type="epub"><day>04</day><month>07</month><year>2018</year></pub-date><volume>06</volume><issue>03</issue><fpage>112</fpage><lpage>119</lpage><permissions><copyright-statement>&#169; Copyright  2014 by authors and Scientific Research Publishing Inc. </copyright-statement><copyright-year>2014</copyright-year><license><license-p>This work is licensed under the Creative Commons Attribution International License (CC BY). http://creativecommons.org/licenses/by/4.0/</license-p></license></permissions><abstract><p>
 
 
   
   本文通过分析巨磁阻效应，采用自主研制的多层膜结构的GMR磁传感器研制二维电子罗盘，该电子罗盘包括二只GMR磁传感器和信号处理电路。通过对传感器进行静态特性标定，给出了电子罗盘的整体设计方案。采用了AD620仪表放大器、arduino uno微处理器和12864LCD液晶显示屏分别实现了差分放大、信号处理以及液晶显示，并在IDE编程软件中采用C语言对电子罗盘信号处理模块进行软件编程，在二维磁场中实现了当前方位测量的功能。通过对研制的电子罗盘特性进行测试与分析，实验结果表明，本文设计的巨磁阻电子罗盘实现了基本的功能。 By analyzing the giant magneto-resistance effect, a two-dimensional electronic compass was de-veloped, which is based on a self-developed multilayer film structure GMR magnetic sensor. The electronic compass includes two GMR magnetic sensors and a signal circuit. Through the calibration of the static characteristics of the sensor, the overall design of the electronic compass was given. The AD620 instrumentation amplifier, arduino uno microprocessor and 12864LCD liquid crystal display were used to implement differential amplification, signal processing and liquid crystal display. And in the IDE programming software, C language is used to program the electronic compass master control system to achieve the function of determining the current position in the two-dimensional magnetic field. Through testing and analyzing the characteristics of the developed electronic compass, the experimental results show that the GMR electronic compass developed by this program achieves the basic functions.
    
  
 
</p></abstract><kwd-group><kwd>二维电子罗盘，GMR传感器，磁敏特性, Two-Dimensional Electronic Compass</kwd><kwd> Giant Magneto-Resistance Sensor</kwd><kwd> 
Magnetic Sensitive Characteristic</kwd></kwd-group></article-meta></front><body><sec id="s1"><title>基于巨磁电阻的电子罗盘研制<sup> </sup></title><p>陶豪鸣，柳微微，邓祁，赵晓锋<sup>*</sup></p><p>黑龙江大学，黑龙江省普通高等学校电子工程重点实验室，黑龙江 哈尔滨</p><p><img src="//html.hanspub.org/file/3-2960101x1_hanspub.png" /></p><p>收稿日期：2018年6月22日；录用日期：2018年7月6日；发布日期：2018年7月13日</p><disp-formula id="hanspub.25879-formula101"><graphic xlink:href="//html.hanspub.org/file/3-2960101x6_hanspub.png"  xlink:type="simple"/></disp-formula></sec><sec id="s2"><title>摘 要</title><p>本文通过分析巨磁阻效应，采用自主研制的多层膜结构的GMR磁传感器研制二维电子罗盘，该电子罗盘包括二只GMR磁传感器和信号处理电路。通过对传感器进行静态特性标定，给出了电子罗盘的整体设计方案。采用了AD620仪表放大器、arduino uno微处理器和12864LCD液晶显示屏分别实现了差分放大、信号处理以及液晶显示，并在IDE编程软件中采用C语言对电子罗盘信号处理模块进行软件编程，在二维磁场中实现了当前方位测量的功能。通过对研制的电子罗盘特性进行测试与分析，实验结果表明，本文设计的巨磁阻电子罗盘实现了基本的功能。</p><p>关键词 :二维电子罗盘，GMR传感器，磁敏特性</p><disp-formula id="hanspub.25879-formula102"><graphic xlink:href="//html.hanspub.org/file/3-2960101x7_hanspub.png"  xlink:type="simple"/></disp-formula><p>Copyright &#169; 2018 by authors and Hans Publishers Inc.</p><p>This work is licensed under the Creative Commons Attribution International License (CC BY).</p><p>http://creativecommons.org/licenses/by/4.0/</p><p><img src="//html.hanspub.org/file/3-2960101x8_hanspub.png" /> <img src="//html.hanspub.org/file/3-2960101x9_hanspub.png" /></p></sec><sec id="s3"><title>1. 引言</title><p>电子罗盘作为一种新型姿态检测模块，利用地球自带磁场的特性来确定当前方位，现已广泛应用于航空航天航海、军事工业以及设备导航等多个领域。作为电子罗盘的核心，磁传感器常分为磁敏三极管结构、霍尔元件磁传感器、磁通门(Flux-gate)、各向异性磁阻(AMR)和隧道磁阻(TMR)等 [<xref ref-type="bibr" rid="hanspub.25879-ref1">1</xref>] [<xref ref-type="bibr" rid="hanspub.25879-ref2">2</xref>] [<xref ref-type="bibr" rid="hanspub.25879-ref3">3</xref>] 。由GMR传感器研制的电子罗盘具有体积小、灵敏度高、稳定性好和外接电路简单等优点，更适合应用于各种电子产品的导航系统 [<xref ref-type="bibr" rid="hanspub.25879-ref4">4</xref>] 。在2004年，黑龙江大学就基于巨磁阻效应研制了测角仪 [<xref ref-type="bibr" rid="hanspub.25879-ref5">5</xref>] 。2006年英国英飞凌科技公司研制了一个单片集成的GMR二维磁场测量传感器 [<xref ref-type="bibr" rid="hanspub.25879-ref6">6</xref>] 。2013年，杭州电子科技大学林乾浩设计制作的GMR磁敏传感器电子磁罗盘 [<xref ref-type="bibr" rid="hanspub.25879-ref7">7</xref>] 。</p><p>本文基于自主研制的巨磁电阻磁传感器，自行将两只单轴传感器呈45˚夹角放置、封装成测量二维磁场的磁传感器，并对其进行静态特性的测试标定，设计制作了电子罗盘的硬件电路以及软件程序的编写，实现了二维电子罗盘的基本功能。</p></sec><sec id="s4"><title>2. 电子罗盘的基本结构和工作原理</title><sec id="s4_1"><title>2.1. 电子罗盘的基本结构</title><p>自行研制的单轴GMR传感器是由四个磁电阻R<sub>1</sub>、R<sub>2</sub>、R<sub>3</sub>、R<sub>4</sub>组成。R<sub>1</sub>、R<sub>3</sub>为两个磁敏感方向相同，且其余参数一致的磁电阻，R<sub>2</sub>、R<sub>4</sub>为另两个磁敏感方向相同但与R<sub>1</sub>、R<sub>3</sub>的磁敏感方向相反，其余参数与R<sub>1</sub>、R<sub>3</sub>一致的磁电阻，这四个磁电阻连成闭合回路构成惠斯通电桥结构，具有巨磁阻效应。单轴磁传感器基本结构示意图如图1所示，其中两个输入端分别为电源电压V<sub>DD</sub>、接地端GND，V<sub>o1</sub>、V<sub>o2</sub>为两个输出端电压，则输出电压为：</p><p>V o u t = V o 1 − V o 2 (1)</p><p>本文利用惠斯通电桥结构的单轴磁传感器，将两个单轴巨磁阻磁传感器，即两个独立的惠斯通电桥，呈45˚夹角放置并压焊封装于PCB板上制得二维磁传感器。二维磁传感器输出后，连接AD620仪表放大器、arduino uno微处理器和12864LCD液晶显示屏三个硬件功能模块电路，准确显示当前位置方向，实现了二维电子罗盘的功能。</p></sec><sec id="s4_2"><title>2.2. 磁传感器的工作原理</title><p>1988年法国巴黎大学阿尔伯特&#183;费尔和德国尤里希研究中心彼得&#183;格林贝格尔就先后独立发现了“巨磁电阻”(Giant Magneto Resistance, GMR)效应 [<xref ref-type="bibr" rid="hanspub.25879-ref8">8</xref>] 。巨磁阻效应是一种量子力学和凝聚态物理学现象，是磁阻效应的一种，可在铁磁性材料(FM)和非铁磁性材料(NM)相间的薄膜层(nm量级)结构中观察到，是指磁性材料在受到外磁场作用时较无外加磁场作用时电阻率发生显著变化的现象 [<xref ref-type="bibr" rid="hanspub.25879-ref9">9</xref>] 。</p><p>本文以测量水平(x轴)方向的单轴GMR磁传感器为例，当外加磁场B = 0 T时，四个磁电阻的阻值相等，均为R<sub>1</sub> = R<sub>2</sub> = R<sub>3</sub> = R<sub>4</sub> = R<sub>0</sub>；当外加磁场 B ≠ 0 T时，四个磁电阻R<sub>1</sub>、R<sub>2</sub>、R<sub>3</sub>、R<sub>4</sub>的阻值随磁场的改变而改变，从而电桥两端输出端V<sub>o1</sub>、V<sub>o2</sub>产生电势差，将微弱的磁信号转化为压电信号输出。黑龙江大学自制的GMR磁传感器令与电阻R<sub>1</sub>、R<sub>3</sub>的磁敏感方向相同时的B为正值，即B的方向与x轴的正方向相同；反之，B为负值，即B的方向与x轴的正方向相反。其工作原理示意图如图2所示。则该单轴传感器电桥输出电压V<sub>outx</sub>为：</p><p>当B = 0 T时</p><p>图1. 单轴磁传感器基本结构示意图</p><p>图2. 单轴磁传感器工作原理示意图：(a) B = 0 T；(b) B &gt; 0 T；(c) B &lt; 0 T</p><p>V o u t x = V o 1 − V o 2 = 0 (2)</p><p>当B &gt; 0 T时</p><p>V o u t x = V o 1 − V o 2 = Δ R R 0 ⋅ V D D (3)</p><p>当B &lt; 0 T时</p><p>V o u t x = V o 1 − V o 2 = − Δ R R 0 ⋅ V D D (4)</p></sec><sec id="s4_3"><title>2.3. 电子罗盘的工作原理</title><p>地球作为一个巨大的磁体，在它周围存在着地磁场。地球磁场方向源于地理南极附近的磁场北极，终于地理北极附近的磁场南极，磁场强度大小约在0.5~0.6 Gs [<xref ref-type="bibr" rid="hanspub.25879-ref10">10</xref>] 。电子罗盘利用地磁场水平总分量始终指向地磁北极这一基本特性来确定当前位置相对于磁北位置的方向角度差。两个单轴磁传感器分别测量两个相互垂直的磁感应强度分量B<sub>x</sub>、B<sub>y</sub>，并将其转化为相应的电势差输出V<sub>x</sub>、V<sub>y</sub>。则当前方位角θ与测量分量V<sub>x</sub>、V<sub>y</sub>的关系为：</p><p>V<sub>x</sub> &gt; 0; V<sub>y</sub> &gt; 0</p><p>θ = arctan ( V y V x ) (5)</p><p>V<sub>x</sub> &gt; 0; V<sub>y</sub> &lt; 0</p><p>θ = arctan ( − V y V x ) (6)</p><p>V<sub>x</sub> &lt; 0; V<sub>y</sub> &lt; 0</p><p>θ = arctan ( − V y V x ) (7)</p><p>V<sub>x</sub> &lt; 0; V<sub>y</sub> &gt; 0</p><p>θ = arctan ( V y − V x ) (8)</p></sec></sec><sec id="s5"><title>3. 电子罗盘的设计与制作</title><sec id="s5_1"><title>3.1. 系统总设计方案</title><p>本文设计的电子罗盘框图如图3所示。首先利用GMR磁传感器将磁信号转化为微弱的模拟电信号，再由仪表放大器对模拟信号进行适当放大，用自带模数转换模块的微处理器将接收到的模拟信号转换为数字信号，并对数据进行处理与计算，最终把处理后的数据传输到液晶显示模块，在显示屏是实时显示当前方位，完成电子罗盘的基本功能。</p></sec><sec id="s5_2"><title>3.2. 电子罗盘硬件电路</title><p>图4给出了电子罗盘整体电路图，该系统由二维GMR磁传感器、AD620仪表放大器模块、含模数转换模块的arduino uno微处理器电路和12864LCD液晶显示电路四个部分组成，且这四个模部分都用同一个电压源供电。且完成焊制后的电路如图5所示。</p><p>图3. 电子罗盘设计框图</p><p>图4. 电子罗盘整体电路图</p><p>图5. 电子罗盘照片</p></sec><sec id="s5_3"><title>3.3. 电子罗盘软件设计</title><p>电子罗盘主要是对arduino uno微处理器中ATmage328P单片机的程序设计，系统程序流程图如图6所示。本文采用Arduino自带的编程软件(IDE)进行程序设计，编译成功的程序可直接使用USB-ISP下载器下载到单片机中运行，程序主要实现对模拟电压的采集、模数转换、算法计算以及方位显示的功能。该编程软件包含大量的储存库，具有功能齐全、语句简练、使用方便、技术支持全面等优点 [<xref ref-type="bibr" rid="hanspub.25879-ref11">11</xref>] 。</p></sec></sec><sec id="s6"><title>4. 电子罗盘测试结果</title><p>本文自行封装了GMR二维电子罗盘，使用学生电源为整个罗盘供电(工作电压为：&#177;5.0 V)。在室温条件下，本文采用霍尔效应测试仪器(CH-100)模拟磁场环境，搭建电子罗盘测试系统，如图7所示，设置磁场大小为10 mT，学生直流电源提供的电压为5 V，并用步进电机旋转360˚一个周期，旋转速度为0.5˚/s。通过自动采集测量得磁传感器旋转特性的输出曲线如图8(a)所示。经过放大模块进行信号放大后的旋转特性输出曲线如图8(b)所示。</p><p>对整体罗盘进行标定，步长为5˚，量程为0˚~360˚，如图9所示，标定结果在−15˚~345˚之间，该罗盘可以较好的在水平面内进行当前方位测量并实时显示。液晶显示模块连接5 V工作电压时，首先会在液晶显示屏第一行中间显示“compass”，然后在第二行显示电子罗盘检测到的当前位置方向。</p><p>图6. 系统程序流程图</p><p>图7. 电子罗盘测试系统测试图</p><p>图8. 磁传感器旋转特性输出曲线：(a) 传感器输出；(b) 放大电路输出</p><p>图9. 输出角与标准角关系曲线</p><p>实验结果表明，由于磁传感器存在温漂与零漂，且在无磁场下自身存在一定的磁矩，存在15˚左右的零点漂移；自行搭建的磁传感器二维旋转测试平台在测量过程中也存在一定的精度误差，导致了灵敏度出现一定的偏差。</p></sec><sec id="s7"><title>5. 结论</title><p>本文给出了GMR磁传感器的基本结构和工作原理，在此基础上设计、制作基于巨磁电阻的二维电子罗盘。实验结果给出，该电子罗盘能够实现基本的功能，具有成本低、灵敏度高等优点，但该电子罗盘存在一定的误差，通过分析实验结果，主要原因为传感器自身存在一定的磁矩以及测量装置引起的误差，需进一步提高自制磁传感器的分辨率、灵敏度以及测量装置的精度，并尽可能的使用软件补偿来降低硬件误差。该罗盘可以实现当前方位的测量，具有一定的应用背景与市场价值。</p></sec><sec id="s8"><title>基金项目</title><p>省级大学生创新训练项目(201710212068)。</p></sec><sec id="s9"><title>文章引用</title><p>陶豪鸣,柳微微,邓 祁,赵晓锋. 基于巨磁电阻的电子罗盘研制 Development of an Electronic Compass Based on Giant Magneto Resistance[J]. 传感器技术与应用, 2018, 06(03): 112-119. https://doi.org/10.12677/JSTA.2018.63013</p></sec><sec id="s10"><title>参考文献</title></sec></body><back><ref-list><title>References</title><ref id="hanspub.25879-ref1"><label>1</label><mixed-citation publication-type="other" xlink:type="simple">Luong, V., Jeng, J.T., Lai, B.L., et al. (2015) Development of Low Noise Three Axis Magnetometer with Tunneling Magne-to-Resistance Sensors. IEEE International Magnetics Conference, Beijing, 11-15 May 2015, 1-3.</mixed-citation></ref><ref id="hanspub.25879-ref2"><label>2</label><mixed-citation publication-type="other" xlink:type="simple">Zhao, J.Q., Hu, J.H. and Tian, W.G. (2015) Designs of Novel Magnetic Flux Guides for Three-Axis Magnetic Sensor. IEEE Transactions on Magnetics, 51, 1-6. &lt;br&gt;https://doi.org/10.1109/TMAG.2015.2428674</mixed-citation></ref><ref id="hanspub.25879-ref3"><label>3</label><mixed-citation publication-type="other" xlink:type="simple">Shapovalov, G., Chektybayev, B., Sadykov, A., et al. (2016) Experimental Mea-surement of Magnetic Field Null in the Vacuum Chamber of KTM Tokamak Based on Matrix of 2D Hall Sensors. Fusion Engineering and Design, 112, 432-439. &lt;br&gt;https://doi.org/10.1016/j.fusengdes.2016.06.029</mixed-citation></ref><ref id="hanspub.25879-ref4"><label>4</label><mixed-citation publication-type="other" xlink:type="simple">时劭华, 钱正洪, 白茹, 等. 基于GMR传感器的小体积二维电子罗盘设计[J]. 机电工程, 2012, 29(6): 650-653, 673.</mixed-citation></ref><ref id="hanspub.25879-ref5"><label>5</label><mixed-citation publication-type="other" xlink:type="simple">杨志, 温殿忠, 赵兴伍, 等. 基于巨磁电阻效应研制的测角仪[C]. 中国传感器产业发展论坛暨东北MEMS研发联合体研讨会论文集, 2004: 98-99.</mixed-citation></ref><ref id="hanspub.25879-ref6"><label>6</label><mixed-citation publication-type="other" xlink:type="simple">Granig, W., Kolle, C., Hammerschmidt, D., et al. (2006) Integrated Gigant Magnetic Resistance Based Angle Sensor. 5th IEEE Conference on Sensors, Daegu, 22-25 October 2006, 542-545.</mixed-citation></ref><ref id="hanspub.25879-ref7"><label>7</label><mixed-citation publication-type="other" xlink:type="simple">林乾浩. 基于GMR传感器的三轴电子罗盘的设计[D]: [硕士学位论文]. 杭州: 杭州电子科技大学, 2012.</mixed-citation></ref><ref id="hanspub.25879-ref8"><label>8</label><mixed-citation publication-type="other" xlink:type="simple">温殿忠, 赵晓锋. 传感器原理及其应用[M]. 北京: 科学出版社, 2013: 5-14, 82-87.</mixed-citation></ref><ref id="hanspub.25879-ref9"><label>9</label><mixed-citation publication-type="other" xlink:type="simple">Kokkinis, G., Cardoso, S., Keplinger, F., et al. (2017) Microfluidic Platform with Integrated GMR Sensors for Quantification of Cancer cells. Sen-sors and Actuators B: Chemical, 241, 438-445.  
&lt;br&gt;https://doi.org/10.1016/j.snb.2016.09.189</mixed-citation></ref><ref id="hanspub.25879-ref10"><label>10</label><mixed-citation publication-type="other" xlink:type="simple">杨新勇, 黄圣国. 小型固态航姿系统的研制[J]. 数据采集与处理, 2003, 18(1): 105-108.</mixed-citation></ref><ref id="hanspub.25879-ref11"><label>11</label><mixed-citation publication-type="other" xlink:type="simple">雍杨, 陈晓鸽. Altium Designer电路设计标准教程[M]. 北京: 科学出版社, 2010: 5-75.</mixed-citation></ref></ref-list></back></article>