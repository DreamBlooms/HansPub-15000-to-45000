<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE article  PUBLIC "-//NLM//DTD Journal Publishing DTD v3.0 20080202//EN" "http://dtd.nlm.nih.gov/publishing/3.0/journalpublishing3.dtd"><article xmlns:mml="http://www.w3.org/1998/Math/MathML" xmlns:xlink="http://www.w3.org/1999/xlink" dtd-version="3.0" xml:lang="en" article-type="research article"><front><journal-meta><journal-id journal-id-type="publisher-id">CSA</journal-id><journal-title-group><journal-title>Computer Science and Application</journal-title></journal-title-group><issn pub-type="epub">2161-8801</issn><publisher><publisher-name>Scientific Research Publishing</publisher-name></publisher></journal-meta><article-meta><article-id pub-id-type="doi">10.12677/CSA.2020.101006</article-id><article-id pub-id-type="publisher-id">CSA-33889</article-id><article-categories><subj-group subj-group-type="heading"><subject>CSA20200100000_35630880.pdf</subject></subj-group><subj-group subj-group-type="Discipline-v2"><subject>信息通讯</subject></subj-group></article-categories><title-group><article-title>
 
 
  基于机器视觉的曲面铸件的缺陷检测技术研究
  Research on Surface of Casting Defect Detection Based on Machine Vision Technology
 
</article-title></title-group><contrib-group><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>徐</surname><given-names>建亮</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>毛</surname><given-names>建辉</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>周</surname><given-names>明安</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>祝</surname><given-names>惠一</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib></contrib-group><aff id="aff2"><addr-line>衢州职业技术学院，浙江 衢州</addr-line></aff><aff id="aff1"><addr-line>null</addr-line></aff><pub-date pub-type="epub"><day>31</day><month>12</month><year>2019</year></pub-date><volume>10</volume><issue>01</issue><fpage>44</fpage><lpage>50</lpage><permissions><copyright-statement>&#169; Copyright  2014 by authors and Scientific Research Publishing Inc. </copyright-statement><copyright-year>2014</copyright-year><license><license-p>This work is licensed under the Creative Commons Attribution International License (CC BY). http://creativecommons.org/licenses/by/4.0/</license-p></license></permissions><abstract><p>
 
 
   
   传统的工业生产制造，由于科学技术的限制仍然主要采用人工检测的方法去检测产品表面的缺陷，五金产业在抛光研磨制程后的表面研磨管均是由人工进行目检，主要原因为目前的大范围曲面轮廓检测还是以接触式为主，且国际大厂的曲面检或量测解决方案报价多较为昂贵。对铸件研磨过程中产生的动信号进行分析研究，系统把采集到的复杂振动信号转化成简单电信号，对信号进行EMD分析处理。随着研磨时间加长，研磨振动幅度越来越小。在相同实验条件下，该方法较傅里叶波形分析方法更加直观方便。 In traditional industrial manufacturing, defects on the product surface are detected using artificial detection methods due to technical constraints. The surface inspection of water hardware after the grinding process is carried out visually and manually because contact method is still the main method to detect surface contour and automatic inspection solutions available in the market for large-scale curved contour inspection are very costly. The complex vibration signal generated in the process of casting grinding was collected and transformed into electronica signal that was analyzed by EMD. With the increasing lapping time, the vibration amplitudes will become smaller. EMD is more effective and intuition than Fast Fourier Transform Algorithm with the same experiment conditions. 
  
 
</p></abstract><kwd-group><kwd>缺陷检测，立体视觉，曲面轮廓，机器视觉, Defect Detection</kwd><kwd> Stereo Vision</kwd><kwd> Curve Surface Contour</kwd><kwd> Machine Vision</kwd></kwd-group></article-meta></front><body><sec id="s1"><title>基于机器视觉的曲面铸件的缺陷检测技术研究<sup> </sup></title><p>徐建亮，毛建辉，周明安，祝惠一</p><p>衢州职业技术学院，浙江 衢州</p><p>收稿日期：2019年12月20日；录用日期：2020年1月2日；发布日期：2020年1月9日</p><disp-formula id="hanspub.33889-formula52"><graphic xlink:href="//html.hanspub.org/file/6-1541627x5_hanspub.png"  xlink:type="simple"/></disp-formula></sec><sec id="s2"><title>摘 要</title><p>传统的工业生产制造，由于科学技术的限制仍然主要采用人工检测的方法去检测产品表面的缺陷，五金产业在抛光研磨制程后的表面研磨管均是由人工进行目检，主要原因为目前的大范围曲面轮廓检测还是以接触式为主，且国际大厂的曲面检或量测解决方案报价多较为昂贵。对铸件研磨过程中产生的动信号进行分析研究，系统把采集到的复杂振动信号转化成简单电信号，对信号进行EMD分析处理。随着研磨时间加长，研磨振动幅度越来越小。在相同实验条件下，该方法较傅里叶波形分析方法更加直观方便。</p><p>关键词 :缺陷检测，立体视觉，曲面轮廓，机器视觉</p><disp-formula id="hanspub.33889-formula53"><graphic xlink:href="//html.hanspub.org/file/6-1541627x6_hanspub.png"  xlink:type="simple"/></disp-formula><p>Copyright &#169; 2020 by author(s) and Hans Publishers Inc.</p><p>This work is licensed under the Creative Commons Attribution International License (CC BY).</p><p>http://creativecommons.org/licenses/by/4.0/</p><p><img src="//html.hanspub.org/file/6-1541627x7_hanspub.png" /> <img src="//html.hanspub.org/file/6-1541627x8_hanspub.png" /></p></sec><sec id="s3"><title>1. 前言</title><p>传统的工业生产制造，由于科学技术的限制仍然主要采用人工检测的方法去检测产品表面的缺陷，这种方法由于人工的限制和技术的落后，不仅检测产品的速度慢、效率低下，而且在检测的过程中容易出错，从而导致了检测结果的不精确。当今社会，随着计算机技术，人工智能等科学技术的出现和发展，以及研究的深入，出现了基于机器视觉技术的表面缺陷检测技术。这种技术的出现，大大提高了生产作业的效率，避免了因作业条件，主观判断等影响检测结果的准确性，实现能更好更精确地进行表面缺陷检测，更加快速的识别产品表面瑕疵缺陷。产品表面缺陷检测属于机器视觉技术的一种，就是利用计算机视觉模拟人类视觉的功能，从具体的实物进行图象的采集处理、计算、最终进行实际检测、控制和应用。产品的表面缺陷检测是机器视觉检测的一个重要部分，其检测的准确程度直接会影响产品最终的质量优劣。由于使用人工检测的方法早已不能满足生产和现代工艺生产制造的需求，而利用机器视觉检测很好地克服了这一点，机器视觉表面缺陷检测系统的广泛应用促进了企业工厂产品高质量的生产与制造业智能自动化的发展。</p><p>本文主要目的是想解决现有曲面铸件表面研磨制程的检测需求，藉由在线检测结果进行加工方式调整，提升曲面铸件表面完工质量。曲面轮廓检测技术主要是结合机器视觉与激光测距的技术，近年来，由于计算机处理技术的进步，机械视觉已被广泛的应用在生活中，如：工业量(检)测、医疗图像处理、遥测系统与奈米科技等，机械视觉可以说是应用相当广泛的实用科学。激光测距主要是利用激光光的特性，当激光打在工件表面上，该激光光会随着其工件表面形状进行反射，接着利用激光三维测距的方式进行量测、检测或其他应用。后续将于文中分别简介铸件的加工流程与曲面智能缺陷检测技术。如图1所示，展示一张高纹理金属表面缺件检测应用场景。</p><p>图1. 高纹理金属表面缺陷检测示例</p></sec><sec id="s4"><title>2. 铸件加工流程</title><p>一般来说铸件的制作流程是由：1) 产品设计；2) 模具制作；3) 准备原料；4) 工件制作；5) 机械加工；6) 表面处理；7) 成品输出，其中表面处理是攸关铸件最终质量的重点，以国内水五金产业的水龙头为例成品的表面不可凹凸不平，因此需要进行表面处理来达到外观光滑与平整等质量。图2为常见的水龙头表面处理流程，一个刚铸造出来的水龙头铸件表面是非常粗糙的，因此该铸件需经过粗磨、细磨、抛光、成品检测与电镀等多道流程，才会变成我们在市面上买到的水龙头，接下来将会简略说明水龙头常见的表面处理流程。</p><p>图2. 水龙头加工流程示意图</p><p>1) 粗磨：利用200号或以下的砂纸进行表面杂质的去除，一般来说经过此程序后在工件表面还可以看到明显的研磨痕迹。</p><p>2) 细磨：利用400号或以下的砂纸消除原本粗磨后工件表面的研磨痕迹，一般来说经过此程序后在工件表面已经有相当程度的平滑。</p><p>3) 抛光：利用布轮或麻轮进行工件表面的抛光，增加水龙头表面的光洁度。</p><p>4) 成品检测与电镀：由于水龙头在电镀后要再进行表面处理的程序非常复杂，因此在电镀前一定会经过人工检测，以防因工件表面有任何缺陷导致产生废品。</p></sec><sec id="s5"><title>3. 基于机器视觉的曲面铸件缺陷检测</title><p>为了解决传统接触式量测仪不易检测曲面铸件的表面研磨程度，因此本文结合机器视觉与激光光切法，发展曲面轮廓检测技术，以达成非接触式快速评估表面研磨情形，各单元说明如下：</p><sec id="s5_1"><title>3.1. 测量原理</title><p>如图3所示，常见的测量架构有三种，分别为：(a) 激光与摄影机在不同侧，两者与垂直中线均具有α与β的夹角；(b) 激光在垂直中在线，激光与摄影机有一个α角；(c) 摄影机在中在线，激光与摄影机有一个α角。本文所针对的待测物为已研磨的铸件，而已研磨的铸件本身就具有反光的特性，若使用架构(b)或架构(c)时摄影机会因为入射角与反射角的关系，导致无法接受到激光信息，且此三种架构中以架构(a)的精度为最高，因此采用架构(a)作为本研究的取像架构。</p><p>图3. 取像架构示意图</p></sec><sec id="s5_2"><title>3.2. 三角光切法原理</title><p>结构光测量中为了获取物体的三维信息，一般都会使用三角册来那个的原理；其基本思想是利用结构光照明中的几何信息帮助提供景物中的几何信息，根据相机，结构光，物体之间的几何关系，来确定物体的三维信息，下图给出了一个三角测量的原理图。现直接三角法轮廓测量技术包括激光逐点扫描法、光切法和二元编码图样投影法 [<xref ref-type="bibr" rid="hanspub.33889-ref1">1</xref>] [<xref ref-type="bibr" rid="hanspub.33889-ref2">2</xref>] [<xref ref-type="bibr" rid="hanspub.33889-ref3">3</xref>] [<xref ref-type="bibr" rid="hanspub.33889-ref4">4</xref>] [<xref ref-type="bibr" rid="hanspub.33889-ref5">5</xref>]，其基本原理如图4所示，其中三角光切法是由3D激光扫描仪发射一道线型激光到待测物上，并利用摄影机寻找待测物上的激光光点，随着待测物距离(与三角光切3D激光扫描仪的距离)的不同，激光光点在摄影机画面中的位置亦有所不同。图4中以一线形激光条</p><p>图4. 激光线型结构投射原理与结果</p><p>图5. 三角光切原理</p><p>纹取代单一激光光点，将激光条纹对待测物立体块规作扫描，大幅加速了整个测量的行程，因此本研究中拟使用三角光切法搭配机器视觉来发展曲面轮廓检测技术，以达成非接触式快速评估表面加工情形。三角光切法的架构是摄影机与激光本身构成一个三角形，在这个三角形中，激光与摄影机的距离及激光在三角形中的角度是我们已知的条件，透过摄影机画面中激光光点的位置，可以决定出摄影机位于三角形中的角度，这三项条件可以决定出一个三角形，并可计算出待测物的距离，如图5所示。</p></sec><sec id="s5_3"><title>3.3. 曲面铸件轮廓检测方法</title><p>图6为曲面铸件轮廓检测流程，在摄影机取像后我们会先使用临界阀值法来做第一阶段的轮廓噪声滤除，由于测试的工件为金属材质，所以激光会因为金属本身的反光造成激光散射，此时摄影机就会因激光散射缘故取得噪声，因此需设定临界阀值来滤除因金属反光造成的噪声。第一阶段轮廓噪声滤除后我们会直接进行经验模式分解法(Empirical Mode Decomposition, EMD) [<xref ref-type="bibr" rid="hanspub.33889-ref6">6</xref>] 的趋势分析，详细EMD的趋势分析方式说明将叙述于后续内容中，接下来会将趋势分析的结果与轮廓噪声滤除的结果进行比较(△D)来取得新的轮廓信息，再利用2倍标准偏差的方式来做第二次的噪声滤除，主要滤除前一次处理后较大的噪声，最后利用前述分析的结果来判定表面轮廓等级。</p><p>图6. 曲面轮廓检测流程</p></sec><sec id="s5_4"><title>3.4. 振动信号的EMD分析</title><p>经验模态分解的主要内容：先根据信号自身的时间特征分解成多个固有模态函数(Intrinsic mode function, IMF)，再对得到的Hilbert变换进行处理，得到信号的瞬时频率和振幅，从而得到时频谱。最后对每个谱进行Hilbert边际谱的计算，通过边际谱看出概率意义上幅值在整个数据跨度上的积累幅值。</p><p>经验模式分解法是一种以迭代方式去分解非稳态或非线性的连续信号，使其成为有限的连续震荡构件，称为固有模式函数(Intrinsic Mode Functions, IMFs)。IMF表达了原始资料中震荡(oscillation)的模式，在IMF中每个循环代表着一次完整震荡，具有简谐振动(Simple Harmonic Motion)及区域平均值为零的特性，数据的频率会随IMF的数量而递减。EMD可依频率的特性去分析而不是只沿着单一频率去分析信号，如图6所示。</p><p>图7使用EMD将信号分离为7个IMF与一个残值信号，IMF1~IMF7表现出组成原始信号的震荡特性，而IMF7明确的表示出该原始信号的趋势。本实验扫瞄出的曲面铸件轮廓，会因表面的研磨程度不同而有不同程度震荡，又因曲面对象的特性使得震荡具有大幅度的波动。因此本文采用EMD做信号分析处理，预期先将信号数据的趋势计算出来，并与原始信号相减，透过滤除噪声后，将运算信号中的震荡值作为研磨程度区分的依据。固有模式函数是为了获取多分量信号真正的频率时变特征，将多分量信号分解为单分量信号，方便获取信号瞬时频率。图7是原始信号的边际谱图，图7(2)~(5)等是研磨一段时间后的边际谱图。瞬时频率表示信号交变快慢的物理量，任一瞬时频率都有一定的能量，将所有时刻的某个频率的能量值加起来就是信号中该频率的总能量，也就是边际线的高度。边际线反应了在某个频率点振动幅度的大小，如图7(1)所示边际谱，表示研磨过程中在1400 Hz的振动幅度最大，图7(1)~(8)说明随着研磨时间的增加，研磨振动在不断减小｡</p><p>本实验中以一个金属五金铸件作为实验测试对象，以曲面铸件轮廓检测技术针对铸件不同区域表面轮廓进行研磨等级判断，如图8中Σ△D为EMD趋势分析曲线与轮廓曲线进行误差比较的加总，可发现铸件a、b、c三处的粗胚与粗磨趋势分析结果皆有显着的差异，而在不同曲度下其趋势结果的数值也是有差异的，曲度越大时趋势分析结果数值则愈大，可搭配不同曲度的趋势分析的结果来判定曲面轮廓的研磨等级。</p><p>图7. EMD分解信号示意图</p><p>图8. 铸件不同曲度表面质量分析结果</p></sec></sec><sec id="s6"><title>4. 结论</title><p>随着全球消费者重视时尚多变，产品逐渐趋于少量多样，迫使生产线必须能跟着产品定义而快速调整，智能自动化生产模式是未来的发展趋势，且全面质量检测也显得日益重要。根据调查报告，需求量有逐年上升的趋势，然而金属抛光研磨制程仍面临大量目检的需求，因此一个适应性复杂曲面的铸件表面质量检测技术，将可有效解决现有复杂形状工件研磨制程的检测需求，藉由在线检测结果进行实时回馈于机器手臂进行抛光路径的实时规划调整，提升曲面铸件表面完工质量。本文章另提出抗反光激光感测模块，可有效应用于具有高反光特性的金属加工零组件，可提高检测有效范围，大幅提升检测效率；最后整合发展出高动态深度范围影像分析系统，适应各种高低起伏的表面特征，可有效应用于曲面铸件、汽机车等大型3D零组件的检测应用。</p><p>本研究团队延续先前智能视觉检测技术与应用 [<xref ref-type="bibr" rid="hanspub.33889-ref7">7</xref>] - [<xref ref-type="bibr" rid="hanspub.33889-ref12">12</xref>]，提出的曲面对象表面缺陷检测技术，从实验结果显示，可针对铸件曲面轮廓进行研磨等级判断，并与自动研磨机器人结合，可于自动研磨过程中，找出研磨区域不足的区域回馈至机器人做研磨工序调整，可提升机器人自动化研磨的质量，改善人员手动研磨作业，降低人员工作伤害及粉尘污染，更可有效节省成本，提升产品良率。此外，该技术可应用于其他产品表面质量的自动检测，为产业进行加值，创造更多产业效益。</p></sec><sec id="s7"><title>致谢</title><p>衷心地感谢本文所引用的这些优秀文章的作者，他们的文章提供很大的帮助；同时也感谢衢州职业技术学院提供了一个研究创作的卓越平台。感谢机电工程学院的支持，使本计划得以顺利进行，特此致上感谢之意。</p></sec><sec id="s8"><title>基金项目</title><p>诚挚地感谢2018年度浙江省教育厅高校访问工程师“校企合作项目”(No: FG2018160)、衢州科技计划项目(No: 2019k19, 2019006)和“2017年浙江省高职高专院校专业带头人培养对象人才项目”赞助该项课题研究。</p></sec><sec id="s9"><title>文章引用</title><p>徐建亮,毛建辉,周明安,祝惠一. 基于机器视觉的曲面铸件的缺陷检测技术研究Research on Surface of Casting Defect Detection Based on Machine Vision Technology[J]. 计算机科学与应用, 2020, 10(01): 44-50. https://doi.org/10.12677/CSA.2020.101006</p></sec><sec id="s10"><title>参考文献</title></sec></body><back><ref-list><title>References</title><ref id="hanspub.33889-ref1"><label>1</label><mixed-citation publication-type="other" xlink:type="simple">Oh, H., Kim, J. and Kim, J. (2017) Enhancement of Visual Comfort and Sense of Presence on Stereoscopic 3D Images. IEEE Transactions on Image Processing: A Publication of the IEEE Signal Processing Society, 26, 3789-3801.</mixed-citation></ref><ref id="hanspub.33889-ref2"><label>2</label><mixed-citation publication-type="other" xlink:type="simple">Li, K., Yöntem, A.Ö. and Deng, Y.B. (2017) Full Resolution Auto-Stereoscopic Mobile Display Based on Large Scale Uniform Switchable Liquid Crystal Micro-Lens Array. Optics Express, 25, 9654-9675.  
&lt;br&gt;https://doi.org/10.1364/OE.25.009654</mixed-citation></ref><ref id="hanspub.33889-ref3"><label>3</label><mixed-citation publication-type="other" xlink:type="simple">Cui, D.M., Wilson, T.D. and Rockhold, R.W. (2017) Evaluation of the Effectiveness of 3D Vascular Stereoscopic Models in Anatomy Instruction for First Year Medical Students. Anatomical Sciences Education, 10, 34-45.  
&lt;br&gt;https://doi.org/10.1002/ase.1626</mixed-citation></ref><ref id="hanspub.33889-ref4"><label>4</label><mixed-citation publication-type="other" xlink:type="simple">Lin, C.J. and Widyaningrum, R. (2018) The Effect of Parallax on Eye Fixa-tion Parameter in Projection-Based Stereoscopic Displays. Applied Ergonomics, 69, 10-16. &lt;br&gt;https://doi.org/10.1016/j.apergo.2017.12.020</mixed-citation></ref><ref id="hanspub.33889-ref5"><label>5</label><mixed-citation publication-type="other" xlink:type="simple">Khayamyan, S., Lundström, T.S. and Gren, P. (2017) Transi-tional and Turbulent Flow in a Bed of Spheres as Measured with Stereoscopic Particle Image Velocimetry. Transport in Porous Media, 117, 45-67.  
&lt;br&gt;https://doi.org/10.1007/s11242-017-0819-y</mixed-citation></ref><ref id="hanspub.33889-ref6"><label>6</label><mixed-citation publication-type="other" xlink:type="simple">Huang, N.E., Shen, Z., Long, S.R., et al. (1998) The Empirical Mode Decomposition and the Hilbert Spectrum for Nonlinear and Non-Stationary Time Series Analysis. Proceedings of the Royal Society A Mathematical Physical and Engineering Sciences, 454, 903-995. &lt;br&gt;https://doi.org/10.1098/rspa.1998.0193</mixed-citation></ref><ref id="hanspub.33889-ref7"><label>7</label><mixed-citation publication-type="other" xlink:type="simple">Hazimah, R.P., Hasan, Z. and Jafar, F.A. (2017) A Comparison of SSDXCOR and CC Matching Techniques for Vision Inspection System. Journal of Computational &amp; Theoretical Na-noscience, 23, 5461-5465.  
&lt;br&gt;https://doi.org/10.1166/asl.2017.7400</mixed-citation></ref><ref id="hanspub.33889-ref8"><label>8</label><mixed-citation publication-type="other" xlink:type="simple">Petraglia, F.R., Campos, R. and Gomes, J.G.R.C. (2017) Pipeline Tracking and Event Classification for an Automatic Inspection Vision System. IEEE International Symposium on Cir-cuits and Systems, Baltimore, 28-31 May 2017, 28-31.  
&lt;br&gt;https://doi.org/10.1109/ISCAS.2017.8050761</mixed-citation></ref><ref id="hanspub.33889-ref9"><label>9</label><mixed-citation publication-type="other" xlink:type="simple">Muntean, D. and Răulea, A.S. (2018) The Intangible Assets Advantages in the Machine Vision Inspection of Thermoplastic Materials. Acta Universitatis Cibiniensis Technical, 69, 136-142. &lt;br&gt;https://doi.org/10.1515/aucts-2017-0017</mixed-citation></ref><ref id="hanspub.33889-ref10"><label>10</label><mixed-citation publication-type="other" xlink:type="simple">Iglesias, C., Martínez, J. and Taboada, J. (2018) Automated Vision System for Quality Inspection of Slate Slabs. Computers in Industry, 99, 119-129. &lt;br&gt;https://doi.org/10.1016/j.compind.2018.03.030</mixed-citation></ref><ref id="hanspub.33889-ref11"><label>11</label><mixed-citation publication-type="other" xlink:type="simple">Tao, X., Zhang, Z.T. and Zhang, F. (2017) A Novel and Effec-tive Surface Flaw Inspection Instrument for Large-Aperture Optical Elements. International Journal of Automation and Computing, 64, 2530-2540.  
&lt;br&gt;https://doi.org/10.1109/TIM.2015.2415092</mixed-citation></ref><ref id="hanspub.33889-ref12"><label>12</label><mixed-citation publication-type="other" xlink:type="simple">Zhang, H., Li, X.L. and Zhong, H. (2018) Automated Machine Vision System for Liquid Particle Inspection of Pharmaceutical Injection. IEEE Transactions on Instrumentation &amp; Measurement, 67, 1278-1297.</mixed-citation></ref></ref-list></back></article>