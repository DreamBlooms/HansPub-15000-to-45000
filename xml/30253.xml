<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE article  PUBLIC "-//NLM//DTD Journal Publishing DTD v3.0 20080202//EN" "http://dtd.nlm.nih.gov/publishing/3.0/journalpublishing3.dtd"><article xmlns:mml="http://www.w3.org/1998/Math/MathML" xmlns:xlink="http://www.w3.org/1999/xlink" dtd-version="3.0" xml:lang="en" article-type="research article"><front><journal-meta><journal-id journal-id-type="publisher-id">CSA</journal-id><journal-title-group><journal-title>Computer Science and Application</journal-title></journal-title-group><issn pub-type="epub">2161-8801</issn><publisher><publisher-name>Scientific Research Publishing</publisher-name></publisher></journal-meta><article-meta><article-id pub-id-type="doi">10.12677/CSA.2019.95099</article-id><article-id pub-id-type="publisher-id">CSA-30253</article-id><article-categories><subj-group subj-group-type="heading"><subject>CSA20190500000_13881606.pdf</subject></subj-group><subj-group subj-group-type="Discipline-v2"><subject>信息通讯</subject></subj-group></article-categories><title-group><article-title>
 
 
  手绘路径下两轮智能车控制方法设计与实现
  Control Method &amp; Implementation of Two-Wheel Smart Car under Hand-Drawn Route
 
</article-title></title-group><contrib-group><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>张</surname><given-names>德升</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>孙</surname><given-names>斌</given-names></name><xref ref-type="aff" rid="aff3"><sup>3</sup></xref><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>陈</surname><given-names>奎</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff4"><sup>4</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>王</surname><given-names>顺</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>渠</surname><given-names>敬智</given-names></name><xref ref-type="aff" rid="aff5"><sup>5</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib></contrib-group><aff id="aff3"><addr-line>徐州工程学院，江苏 徐州;中国矿业大学，江苏 徐州</addr-line></aff><aff id="aff5"><addr-line>江苏中矿创慧科技有限责任公司，江苏 徐州</addr-line></aff><aff id="aff2"><addr-line>徐州工程学院，江苏 徐州</addr-line></aff><aff id="aff4"><addr-line>徐州工程学院，江苏 徐州;江苏省大型工程装备检测与控制重点建设实验室，江苏 徐州</addr-line></aff><aff id="aff1"><addr-line>null</addr-line></aff><pub-date pub-type="epub"><day>08</day><month>05</month><year>2019</year></pub-date><volume>09</volume><issue>05</issue><fpage>883</fpage><lpage>889</lpage><permissions><copyright-statement>&#169; Copyright  2014 by authors and Scientific Research Publishing Inc. </copyright-statement><copyright-year>2014</copyright-year><license><license-p>This work is licensed under the Creative Commons Attribution International License (CC BY). http://creativecommons.org/licenses/by/4.0/</license-p></license></permissions><abstract><p>
 
 
   
   搬运、巡检等工作场景中，考虑到其场所内物品的平面部署多具有复杂性和多变性，本文提出一种采用自由手绘方式生成小车路径控制坐标、批量生成小车控制参数的方法。PC端利用LabVIEW实现手绘路径、路径参数抽取和优化、Back-stepping控制参数解算和无线批量下载。小车端定时读取控制参数并开环执行。实验表明：本文所设计手绘方法和跟踪控制策略正确有效，小车按照手绘路径行驶，误差满足要求。 In handling, patrol and other work scenarios, considering the complexity and changeability of workplace layout deployment, a method of generating trolley movement path control coordinates and batch generation of trolley control parameters by free hand-painting is proposed in this paper. The hand-drawn paths, parameter extraction and optimization, Back-stepping control parameter solving and wireless batch download be executed on the PC using LabVIEW. At car side, the control parameters be periodically read and executed in open-loop mode. The experiments show that the hand-painted method and the tracking control strategy designed in this paper are correct and effective, and the trolley travels according to the hand-drawn path, and its error meets the requirements. 
  
 
</p></abstract><kwd-group><kwd>手绘路径，路径跟踪，运动控制策略, Hand-Drawn Route</kwd><kwd> Path Tracking</kwd><kwd> Motion Control Strategy</kwd></kwd-group></article-meta></front><body><sec id="s1"><title>手绘路径下两轮智能车控制方法设计与实现<sup> </sup></title><p>张德升<sup>1</sup>，孙斌<sup>1,2</sup>，陈奎<sup>1,3</sup>，王顺<sup>1</sup>，渠敬智<sup>4</sup></p><p><sup>1</sup>徐州工程学院，江苏 徐州</p><p><sup>2</sup>中国矿业大学，江苏 徐州</p><p><sup>3</sup>江苏省大型工程装备检测与控制重点建设实验室，江苏 徐州</p><p><sup>4</sup>江苏中矿创慧科技有限责任公司，江苏 徐州</p><disp-formula id="hanspub.30253-formula45"><graphic xlink:href="//html.hanspub.org/file/7-1541385x5_hanspub.png"  xlink:type="simple"/></disp-formula><p>收稿日期：2019年4月30日；录用日期：2019年5月10日；发布日期：2019年5月17日</p><disp-formula id="hanspub.30253-formula46"><graphic xlink:href="//html.hanspub.org/file/7-1541385x6_hanspub.png"  xlink:type="simple"/></disp-formula></sec><sec id="s2"><title>摘 要</title><p>搬运、巡检等工作场景中，考虑到其场所内物品的平面部署多具有复杂性和多变性，本文提出一种采用自由手绘方式生成小车路径控制坐标、批量生成小车控制参数的方法。PC端利用LabVIEW实现手绘路径、路径参数抽取和优化、Back-stepping控制参数解算和无线批量下载。小车端定时读取控制参数并开环执行。实验表明：本文所设计手绘方法和跟踪控制策略正确有效，小车按照手绘路径行驶，误差满足要求。</p><p>关键词 :手绘路径，路径跟踪，运动控制策略</p><disp-formula id="hanspub.30253-formula47"><graphic xlink:href="//html.hanspub.org/file/7-1541385x7_hanspub.png"  xlink:type="simple"/></disp-formula><p>Copyright &#169; 2019 by author(s) and Hans Publishers Inc.</p><p>This work is licensed under the Creative Commons Attribution International License (CC BY).</p><p>http://creativecommons.org/licenses/by/4.0/</p><p><img src="//html.hanspub.org/file/7-1541385x8_hanspub.png" /> <img src="//html.hanspub.org/file/7-1541385x9_hanspub.png" /></p></sec><sec id="s3"><title>1. 引言</title><p>导航尤其是导航路径规划与跟踪技术广泛应用于车载导航、手持导航设备、无人驾驶的AGV设备等 [<xref ref-type="bibr" rid="hanspub.30253-ref1">1</xref>] 。目前，很多路径规划与跟踪技术一般采用传感器感知信标确定位置，从而跟踪一条与时间无关的几何路径。这需要根据具体的应用场景部署大量信标，如果场景改动则需要重新部署信标，更改车载导航系统 [<xref ref-type="bibr" rid="hanspub.30253-ref2">2</xref>] 。</p><p>作为路径规划和跟踪方法的一种补充，本文在已有应用场景平面图基础上，利用人工手动绘制一条导航路径，根据小车运动学模型批量生成小车运行控制参数，小车读取批量参数自动执行。实验和实测表明：小车按照手绘路径自动运行，运行轨迹误差满足可使用要求。</p></sec><sec id="s4"><title>2. 系统总体流程</title><p>系统分为两部分，PC端路径绘制和批量运动参数的计算与无线下载、智能小车按照运动参数自主运动控制实现路径跟踪。</p><p>工作流程：PC端采用LabVIEW在已有工作场景平面图基础上由人工绘制一条通达路径线条，避开障碍物。对路径线条的像素点均匀抽样、坐标变换、尺度映射后，按照小车运动学模型生成由运动模式选择(Status)、转角(Angle)、长度(Length)三部分组成的预定格式批量运动参数。批量运动参数由Wi-Fi一次性地下载到小车。小车采用51 Duino实现，在批量接收运动参数后依据该批量参数开环控制小车行驶。系统总体流程如图1所示。</p></sec><sec id="s5"><title>3. 路径生成</title><sec id="s5_1"><title>3.1. 手绘路径线条方法</title><p>参照已有的平面图，手动绘制一条小车的通达路径。具体采用LabVIEW事件结构记录鼠标的移动、按下、移出等动作，绘制曲线函数在图片空间上绘制路径曲线。图片控件设定像素数与小车实际移动范围线性映射。手绘路径曲线如图2所示，左图为绘制曲线(两点直线连接)，中图为路径曲线上的有效点集。</p><p>图1. 系统工作原理和流程</p><p>图2. 手绘曲线与手绘曲线坐标点</p></sec><sec id="s5_2"><title>3.2. 路径像素点抽取与优化</title><p>手绘方式绘制路径时，由于程序采用定时抽取鼠标坐标点方式描绘曲线，因此路径曲线上相邻两个有效坐标间的距离不同，鼠标移动慢时相邻点间距小，反之亦然，存在多点粘连或间距过大两种情况，如图2中图所示。考虑到小车实际机械性能，这不利于路径规划、造成小车控制误差、控制参数大量冗余。为此需要对众多像素点进行抽取优化。间距设定大于20，N个像素点抽取优化流程如下：</p><p>抽取优化后像素点间距相对稀疏，保证了相邻两点间距离在设定值之上，如图2右图所示。预设值设定需要在后续小车实测中根据实际性能确定。</p></sec></sec><sec id="s6"><title>4. 轨迹控制参数设计</title><sec id="s6_1"><title>4.1. 小车运动学分析 [<xref ref-type="bibr" rid="hanspub.30253-ref3">3</xref>] - [<xref ref-type="bibr" rid="hanspub.30253-ref9">9</xref>] <sup> </sup></title><p>轮式智能小车采用双轮驱动的移动小车，其理想的运动模型为典型的差速轮运动学模型可为：</p><p>v c = R 2 ( ω r + ω l ) ,   ω c = R D ( ω r − ω l )</p><p>v c 与 ω c 分别为机器人直线运动速度和旋转角速度； ω r 、 ω l 分别为机器人小车两轮速度；R为车轮半径；D为两轮间距。其位置姿态微分方程可以描述如下：</p><p>[ x ˙ c , y ˙ c , θ ˙ c ] = [ v c , ω c ] [ cos θ c sin θ c 0 0 0 1 ]</p><p>式中： [ x ˙ c , y ˙ c , θ ˙ c ] 分别为机器人小车中心点坐标，以及小车正方向与x轴夹角，如图3所示。</p><p>图3. 两轮小车二自由度运动学模型</p><p>假设小车实际坐标为 P = [ x , y , θ ] ，需要移动到手绘路径的轨迹坐标为 P r = [ x r , y r , θ r ] ，误差为 P e = P − P r ，对 P e 进行时间求导得到下式：</p><p>p e = [ x e y e z e ] = [ ω y e − v + v r cos θ e − ω x e + v r sin θ e ω r − ω ]</p><p>在此运动学基础上，小车轨迹跟踪问题转化为在有界输入控制 u = [ v , ω ] ，且当 t → 0 时 v c 和 ω c 不同时收敛与零时，系统在任意初始跟踪误差下有</p><p>lim t → ∞ [ | x e ( t ) | + | y e ( t ) | + | θ e ( t ) | ] = 0</p><p>上式说明：在轨迹参数与时间无关的情况下，控制只需考虑小车的相对期望轨迹的位置。在控制参数的设计中，一般选取小车的线速度为常数，仅控制角加速度，路径跟踪问题成为关于轨迹跟踪误差的标量函数零点稳定问题。</p></sec><sec id="s6_2"><title>4.2. 小车运动控制设计</title><p>基于上述两轮车模型的描述，其轨迹控制是一个非完整控制系统，其所受约束是不可积的。此类问题一般利用Back-stepping方法，即后推法或回推法。Back-stepping方法将整个非线性系统进行分解成若干子系统，且对子系统分步构造Lyapunov函数和中间虚拟控制量，一直后退导出系统的控制律 [<xref ref-type="bibr" rid="hanspub.30253-ref10">10</xref>] [<xref ref-type="bibr" rid="hanspub.30253-ref11">11</xref>] [<xref ref-type="bibr" rid="hanspub.30253-ref12">12</xref>] [<xref ref-type="bibr" rid="hanspub.30253-ref13">13</xref>] [<xref ref-type="bibr" rid="hanspub.30253-ref14">14</xref>] 。很多文献最后利用该算法分别进行了直线轨迹跟踪和圆轨迹跟踪的仿真实验，结果表明跟踪误差很快收敛于零，轨迹跟踪效果良好。</p><p>本文参照Back-stepping算法思想，对二自由度轮式小车运动模型设计控制规律和分时控制。其参数的时间间隔为常数，轨迹控制的约束为手绘坐标点。两轮PWM调速，轮距D = 10 cm。设定50%占空比PWM为初始角速度，测定对应直线线速度约0.1 m/s。WiFi接收LabVIEW解算和编码的每个时间间隔 Δ t 运动参</p><p>数 [ ω r , ω l ] ，即转角值。控制器的定时中断时长设定为 Δ t = 100   ms ，即每100 ms读取一次接收到的 [ ω r , ω l ] 。</p><p>实验条件：小车采用基于8051核心的51duino，对比传统的8051单片机它具有低功耗，强抗干扰，超强加密，支持1T模式，22 MHz主频，29K E<sup>2</sup>PROM空间可用于保存用户数据，具有独立波特率发生器。</p></sec><sec id="s6_3"><title>4.3. 运动参数通信数据包</title><p>为了方便小车接收运动控制参数，制定简单数据包规则。数据包由包头、类型位、命令位、数据位、包尾构成。调试阶段，运动控制参数可用串口调试助手直接发送，包组成规则如表1所示：</p><table-wrap id="table1" ><label><xref ref-type="table" rid="table1">Table 1</xref></label><caption><title> Serial communication data rule</title></caption><table><tbody><thead><tr><th align="center" valign="middle" ></th><th align="center" valign="middle" >包头</th><th align="center" valign="middle" >类型</th><th align="center" valign="middle" >数据</th><th align="center" valign="middle" >数据</th><th align="center" valign="middle" >包尾</th></tr></thead><tr><td align="center" valign="middle" >手绘路径模式</td><td align="center" valign="middle" >FA</td><td align="center" valign="middle" >13</td><td align="center" valign="middle" >07</td><td align="center" valign="middle" >00</td><td align="center" valign="middle" >FF</td></tr><tr><td align="center" valign="middle" >路径跟踪参数</td><td align="center" valign="middle" >FA</td><td align="center" valign="middle" >A0</td><td align="center" valign="middle" >转角值</td><td align="center" valign="middle" >距离值</td><td align="center" valign="middle" >FF</td></tr><tr><td align="center" valign="middle" >路径跟踪参数</td><td align="center" valign="middle" >FA</td><td align="center" valign="middle" >A1</td><td align="center" valign="middle" >转角值</td><td align="center" valign="middle" >距离值</td><td align="center" valign="middle" >FF</td></tr></tbody></table></table-wrap><p>表1. 串口通信数据规则</p><p>表中A0/A1代表右转和左转，左右转由 ω r 与 ω l 差值符号确定，转角值为 ω r 与 ω l 的差值。距离值为两个控制坐标间欧氏距离，实验中将其近似为金 N ∗ Δ t ，N为某个整数。</p><p>由此，针对51duino嵌入式系统在批量参数下路径跟踪的运动控制策略，即将连续路径离散取样后，转化为模式选择(Status)、转角值(Angle)、距离值(Length)组成的批量参数，保持小车匀速行驶，从起始点依次转过对应转角度 θ ，理想状态下即可完成路径追踪，如图4所示。</p><p>图4. 小车路径跟踪的运动控制策略</p></sec></sec><sec id="s7"><title>5. 实验与测试</title><p>PC端自由手绘出“S”与“Z”形路径，再利用Back-stepping方法解算出各时刻 Δ t 的控制参数 [ ω r , ω l ] ，按照串口通信数据规则形成批量的参数一次性下载到小车存储器内。</p><p>小车在100 ms定时中断控制下依次按序读取批量参数开环执行。为了检验运行轨迹与实际手绘轨迹的误差，采用机器视觉方式获取实际轨迹进行对比(图5)。</p><p>图5. 手绘路径与小车实际行驶路径</p><p>实测主要对系统性能、运行精度进行检测。表2为手绘坐标与小车运行时图像定位坐标数据。图像像素大小为1280 * 1024，其中1024像素对应实际尺寸100 cm。表中的坐标误差表明系统可行，小车控制策略可行。</p><table-wrap id="table2" ><label><xref ref-type="table" rid="table2">Table 2</xref></label><caption><title> Measured accuracy and image positioning (cm</title></caption><table><tbody><thead><tr><th align="center" valign="middle" >序号</th><th align="center" valign="middle" >手绘坐标</th><th align="center" valign="middle" >小车运行图像坐标</th></tr></thead><tr><td align="center" valign="middle" >1</td><td align="center" valign="middle" >(90.2, 30.5)</td><td align="center" valign="middle" >(100.9, 30.24)</td></tr><tr><td align="center" valign="middle" >2</td><td align="center" valign="middle" >(60.3, 60.4)</td><td align="center" valign="middle" >(60.26, 60.36)</td></tr><tr><td align="center" valign="middle" >3</td><td align="center" valign="middle" >(50.9, 10.6)</td><td align="center" valign="middle" >(50.46, 10.64)</td></tr><tr><td align="center" valign="middle" >4</td><td align="center" valign="middle" >(30.2, 40.1)</td><td align="center" valign="middle" >(30.16, 40.08)</td></tr></tbody></table></table-wrap><p>表2. 实测精度与图像定位(cm)</p></sec><sec id="s8"><title>6. 结语</title><p>工作场所内智能小车路径规划利用LabVIEW平台采用自由手绘方式。绘制后路径上坐标点经过抽取优化作为小车路径的控制参数。借鉴和简化文献中成熟的Back-stepping算法在LabVIEW端解算控制参数并通过WiFi下传至小车。小车利用定时中断读取控制参数，实现开环地轨迹跟踪。囿于小车的机械性能，文中利用Back-stepping算法时没有对速度控制没有进行约束。实验实测表明，设计系统可行有效，轨迹误差满足要求，具有一定的实用价值和现实意义。</p></sec><sec id="s9"><title>基金项目</title><p>1) 江苏省科技项目(BY2015024-03)城市施工环境扬尘污染监测与预警系统研发；2) 徐州市科技计划工业科技项目(KC15GM045)资助；3) 江苏省大型工程装备检测与控制重点建设实验室开放基金(JSKLEDC201414)项目资助。</p></sec><sec id="s10"><title>文章引用</title><p>张德升,孙 斌,陈 奎,王 顺,渠敬智. 手绘路径下两轮智能车控制方法设计与实现Control Method &amp; Implementation of Two-Wheel Smart Car under Hand-Drawn Route[J]. 计算机科学与应用, 2019, 09(05): 883-889. https://doi.org/10.12677/CSA.2019.95099</p></sec><sec id="s11"><title>参考文献</title></sec></body><back><ref-list><title>References</title><ref id="hanspub.30253-ref1"><label>1</label><mixed-citation publication-type="other" xlink:type="simple">蔺宏良, 黄晓鹏. 车联网技术研究综述[J]. 机电工程, 2014(9): 1235-1238.</mixed-citation></ref><ref id="hanspub.30253-ref2"><label>2</label><mixed-citation publication-type="other" xlink:type="simple">史晨红, 等. 基于轨迹控制的AGV运动控制器设计研究[J]. 机械设计与制造工程, 2014(2): 7-12.</mixed-citation></ref><ref id="hanspub.30253-ref3"><label>3</label><mixed-citation publication-type="other" xlink:type="simple">李美花, 等. 微传感器阵列多通道数据采集和处理系统[J]. 电子测量与仪器学报, 2016(2): 311-317.</mixed-citation></ref><ref id="hanspub.30253-ref4"><label>4</label><mixed-citation publication-type="other" xlink:type="simple">符晓勇. 智能小车软件系统设计与路径规划方法研究[D]: [硕士学位论文]. 杭州: 浙江理工大学, 2017.</mixed-citation></ref><ref id="hanspub.30253-ref5"><label>5</label><mixed-citation publication-type="other" xlink:type="simple">柳胜凯, 等. 基于多传感器数据融合的室内行人航位推算法[J]. 传感器与微系统, 2018(3): 133-137.</mixed-citation></ref><ref id="hanspub.30253-ref6"><label>6</label><mixed-citation publication-type="other" xlink:type="simple">蔡晓慧. 基于智能算法的移动机器人路径规划研究[D]: [硕士学位论文]. 杭州: 浙江大学, 2007.</mixed-citation></ref><ref id="hanspub.30253-ref7"><label>7</label><mixed-citation publication-type="other" xlink:type="simple">王宇, 等. 一种新的智能小车控制策略[J]. 浙江工业大学学报, 2012(2): 217-221.</mixed-citation></ref><ref id="hanspub.30253-ref8"><label>8</label><mixed-citation publication-type="other" xlink:type="simple">姜立标, 吴中伟. 基于趋近律滑模控制的智能车辆轨迹跟踪研究[J]. 农业机械学报, 2018, 49(3): 381-387.</mixed-citation></ref><ref id="hanspub.30253-ref9"><label>9</label><mixed-citation publication-type="other" xlink:type="simple">杨李朋, 张文丰, 王昊. 两轮差速AGV的轨迹跟踪控制研究[J]. 软件工程与应用, 2017, 6(4): 59-67.</mixed-citation></ref><ref id="hanspub.30253-ref10"><label>10</label><mixed-citation publication-type="other" xlink:type="simple">王盼宝. 智能车制作: 从元器件、机电系统、控制算法到完整的智能车设计[M]. 北京: 清华大学出版社, 2017.</mixed-citation></ref><ref id="hanspub.30253-ref11"><label>11</label><mixed-citation publication-type="other" xlink:type="simple">黄英豪, 黎兆宇. 汽车坐标系和车身姿态角的确定方法[J]. 装备制造技术, 2012(10): 113-115.</mixed-citation></ref><ref id="hanspub.30253-ref12"><label>12</label><mixed-citation publication-type="other" xlink:type="simple">郭烈, 黄晓慧, 葛平淑, 等. 基于反演法的智能车辆弯路换道轨迹跟踪控制[J]. 吉林大学学报(工版), 2013, 43(2): 323-328.</mixed-citation></ref><ref id="hanspub.30253-ref13"><label>13</label><mixed-citation publication-type="other" xlink:type="simple">张扬名, 刘国荣, 兰永红. 一种改进的移动机器人轨迹跟踪迭代学习方法[J]. 计算机应用研究, 2012, 29(10): 3728-3732.</mixed-citation></ref><ref id="hanspub.30253-ref14"><label>14</label><mixed-citation publication-type="other" xlink:type="simple">李渊, 马戎, 付维平. 智能车辆的滑模轨迹跟踪控制[J]. 测控技术, 2012, 31(9): 71-74.</mixed-citation></ref></ref-list></back></article>