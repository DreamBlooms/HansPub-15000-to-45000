<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE article  PUBLIC "-//NLM//DTD Journal Publishing DTD v3.0 20080202//EN" "http://dtd.nlm.nih.gov/publishing/3.0/journalpublishing3.dtd"><article xmlns:mml="http://www.w3.org/1998/Math/MathML" xmlns:xlink="http://www.w3.org/1999/xlink" dtd-version="3.0" xml:lang="en" article-type="research article"><front><journal-meta><journal-id journal-id-type="publisher-id">SEA</journal-id><journal-title-group><journal-title>Software Engineering and Applications</journal-title></journal-title-group><issn pub-type="epub">2325-2286</issn><publisher><publisher-name>Scientific Research Publishing</publisher-name></publisher></journal-meta><article-meta><article-id pub-id-type="doi">10.12677/SEA.2019.82011</article-id><article-id pub-id-type="publisher-id">SEA-29988</article-id><article-categories><subj-group subj-group-type="heading"><subject>SEA20190200000_75397493.pdf</subject></subj-group><subj-group subj-group-type="Discipline-v2"><subject>工程技术</subject></subj-group></article-categories><title-group><article-title>
 
 
  无刷直流电机控制策略及程序设计
  Design of Brushless DC Motor Control Strategy and Its Program
 
</article-title></title-group><contrib-group><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>张</surname><given-names>宁</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>段</surname><given-names>富海</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="corresp" rid="cor1"><sup>*</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>王</surname><given-names>炳</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>马</surname><given-names>欣</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib><contrib contrib-type="author" xlink:type="simple"><name name-style="western"><surname>杨</surname><given-names>子鹤</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref><xref ref-type="aff" rid="aff1"><sup>1</sup></xref></contrib></contrib-group><aff id="aff2"><addr-line>大连理工大学机械工程学院，辽宁 大连</addr-line></aff><aff id="aff1"><addr-line>null</addr-line></aff><pub-date pub-type="epub"><day>14</day><month>03</month><year>2019</year></pub-date><volume>08</volume><issue>02</issue><fpage>89</fpage><lpage>98</lpage><permissions><copyright-statement>&#169; Copyright  2014 by authors and Scientific Research Publishing Inc. </copyright-statement><copyright-year>2014</copyright-year><license><license-p>This work is licensed under the Creative Commons Attribution International License (CC BY). http://creativecommons.org/licenses/by/4.0/</license-p></license></permissions><abstract><p>
 
 
  应用于航空领域的无传感器无刷直流电机需具有控制简单、运行效率高、调速性能好等特性。为满足这些特性要求，本文设计了一种基于DSP的无传感器无刷直流电机控制策略。该控制策略采用双闭环控制原理和无传感器转子位置检测方法，改进了电机启动方式；同时采用软件实现实时的相位补偿，设计了电机控制程序。最后通过MATLAB/Simulink平台仿真和实物综合调试，验证了所设计控制策略的有效性和实用性。
   Sensorless brushless DC motor (BLDCM) used in aeronautical field needs the characteristics of simple control, high efficiency and good speed control performance. In order to meet the above characteristics requirements, a control strategy based on DSP is designed in this paper. The control strategy, which adopts the double closed-loop control principle and the sensorless rotor position detection method, can improve the starting mode of the motor; and simultaneously the real-time phase compensation can be realized by software, and the control program is designed. Finally, a simulation model is built on MATLAB/Simulink platform to verify the effectiveness and practicability of the designed control strategy.
 
</p></abstract><kwd-group><kwd>无传感器，无刷直流电机(BLDCM)，控制策略，Simulink仿真建模, Sensorless</kwd><kwd> Brushless DC Motor (BLDCM)</kwd><kwd> Control Strategy</kwd><kwd> Simulink Simulation Modeling</kwd></kwd-group></article-meta></front><body><sec id="s1"><title>无刷直流电机控制策略及程序设计<sup> </sup></title><p>张宁，段富海<sup>*</sup>，王炳，马欣，杨子鹤</p><p>大连理工大学机械工程学院，辽宁 大连</p><p><img src="//html.hanspub.org/file/9-2690358x1_hanspub.png" /></p><p>收稿日期：2019年4月6日；录用日期：2019年4月21日；发布日期：2019年4月28日</p><disp-formula id="hanspub.29988-formula125"><graphic xlink:href="//html.hanspub.org/file/9-2690358x5_hanspub.png"  xlink:type="simple"/></disp-formula></sec><sec id="s2"><title>摘 要</title><p>应用于航空领域的无传感器无刷直流电机需具有控制简单、运行效率高、调速性能好等特性。为满足这些特性要求，本文设计了一种基于DSP的无传感器无刷直流电机控制策略。该控制策略采用双闭环控制原理和无传感器转子位置检测方法，改进了电机启动方式；同时采用软件实现实时的相位补偿，设计了电机控制程序。最后通过MATLAB/Simulink平台仿真和实物综合调试，验证了所设计控制策略的有效性和实用性。</p><p>关键词 :无传感器，无刷直流电机(BLDCM)，控制策略，Simulink仿真建模</p><disp-formula id="hanspub.29988-formula126"><graphic xlink:href="//html.hanspub.org/file/9-2690358x7_hanspub.png"  xlink:type="simple"/></disp-formula><p>Copyright &#169; 2019 by authors and Hans Publishers Inc.</p><p>This work is licensed under the Creative Commons Attribution International License (CC BY).</p><p>http://creativecommons.org/licenses/by/4.0/</p><p><img src="//html.hanspub.org/file/9-2690358x8_hanspub.png" /> <img src="//html.hanspub.org/file/9-2690358x9_hanspub.png" /></p></sec><sec id="s3"><title>1. 引言</title><p>无刷直流电机(Brushless DC Motor, BLDCM)不仅具有控制简单、换相平稳及后期维护方便的优点，同时还具有效率高、调速性能好等特点，因此被广泛应用于现代工业设备中。由于飞机空间狭小和工作环境复杂恶劣，机舱内传感器易受到外部环境干扰，影响运行的稳定性，因此较多航空领域的无刷直流电机采用无位置传感器换向方式，通过对电机电气信号的检测和处理获得转子的位置信息。</p><p>近年来因实用性好、成本低和可靠性高，无位置传感器无刷直流电机控制策略得到普遍关注。文献 [<xref ref-type="bibr" rid="hanspub.29988-ref1">1</xref>] 提出了使用MC68HC908GP32芯片的无传感器无刷直流电机控制策略。文献 [<xref ref-type="bibr" rid="hanspub.29988-ref2">2</xref>] 提出了使用DSP的无传感器无刷直流电机控制方法，完全运用基于DSP的运算处理能力进行过零点检测换相和开环启动，但所采用的电路设计较为复杂。文献 [<xref ref-type="bibr" rid="hanspub.29988-ref3">3</xref>] 提出了使用MEGA8单片机实现无刷直流电机的无传感器控制，但不易维护，调速性需要完善；文献 [<xref ref-type="bibr" rid="hanspub.29988-ref4">4</xref>] 提出了基于STM32的无刷直流电机无传感器控制方法，调速范围广、成本低、应用价值高，但控制方式使用的是传统的单反馈方式。</p><p>本文设计一种以TMS320F2812为核心的无刷直流电机无传感器控制方式，采用电流和转速的双闭环反馈控制，通过检测反电动势过零信号控制换向，实现电机高效、可靠地运行。</p></sec><sec id="s4"><title>2. 控制策略</title><p>目前常用的无刷直流电机控制方法可分为开环控制、转速负反馈控制和电压负反馈及电流正负反馈控制等 [<xref ref-type="bibr" rid="hanspub.29988-ref3">3</xref>] 。无刷直流电机常采用“二二导通星形三相六状态”工作模式，即同一时刻只有两个不同相的上、下桥臂元件被导通，各元件保持导通120˚电角度，每隔60˚电角度换流一次。导通关系如图1所示，根据图中顺序，重复此循环，即可保证电机稳定运行。</p><p>图1. 导通关系示意图</p><sec id="s4_1"><title>2.1. 启动方式</title><p>无刷直流电机常采用的启动方法有三段式启动法、三次样条插值、电感法等，本文采用三段式启动法，可以保证启动的可靠性。</p><p>三段式启动法，分为转子定位、变频加速和状态切换三个阶段，先对转子进行两次预定位，确定转子位置，然后进行外同步加速，转速足够高时切换至基于转子位置信号的双闭环控制 [<xref ref-type="bibr" rid="hanspub.29988-ref5">5</xref>] 。此启动方法保证电机转向的可选择性，也提高了电机运行的可靠性。</p></sec><sec id="s4_2"><title>2.2. 转子位置检测</title><p>由于电机在恶劣环境中工作时，传感器易受到干扰，所以工程上一般采用无位置检测技术确定转子位置，在众多检测技术中，应用最成熟广泛的是反电动势过零点检测技术。</p><p>电机转子转动时，永磁磁场随之转动，绕组线圈中产生感应电动势，可通过检测比较未导通相端电压和模拟中性点的电压来获得。</p><p>由图2可知，每次换相经30˚电角度后，反电动势过零点，再经30˚电角度即为下一个换相点。但实际工程应用中，位置信号要经过滤波电路处理，经过处理后的信号将产生相位延迟，因此需要对信号进行相位补偿 [<xref ref-type="bibr" rid="hanspub.29988-ref6">6</xref>] 。换相发生在反电动势过零点后延迟对应 30 ˚ + k &#215; 60 ˚ ( k = 0 , 1 , 2 , ⋯ ) 电角度时间的时刻，换相的时刻取决于延迟角度，其值可以根据设计的电路参数在软件中实时计算得出 [<xref ref-type="bibr" rid="hanspub.29988-ref7">7</xref>] 。</p><p>图2. 电机反电动势波形及电流波形</p></sec><sec id="s4_3"><title>2.3. 转速控制</title><p>无刷直流电机的驱动电压波形为方波形，当电压值及波形恒定时占空比恒定，因此在控制系统逆变电路的功率器件处，对输入换相电路的电压进行斩波调节，调节平均电压可以实现对无刷直流电机的转速控制。此种方法被称作脉冲宽度调制(Pulse Width Modulation, PWM)，能在较大转速范围内实现精确的无极调速功能，可实现较为迅速的动态响应，且功耗较小。实际调速过程可由数字处理芯片将处理过的PWM调制信号输入电机驱动电路，实现调压调速 [<xref ref-type="bibr" rid="hanspub.29988-ref3">3</xref>] 。</p></sec></sec><sec id="s5"><title>3. 双闭环控制策略</title><p>在电机的实际运转过程中，人为设定的电机转速值可能发生较大变化，进而引起电枢绕组中的电流突变，对电机的安全构成威胁，且可能会对电机输出转矩的平稳性造成影响，降低了电机可靠性。为了提升电机调速性能与稳定工作的能力，保证电机控制器的精度，本文采取速度、电流双闭环控制系统。</p><p>实际过程中，电机转速可通过反电动势信号计算获得，将此转速值与给定速度进行比较，再将二者差值输入速度PID控制环进行处理，处理后所得信号作为电流PID控制环的给定值，将其与电流环反馈电路的输出值进行比较，将二者的差值进行电流PID运算，即可利用电流环的输出值直接实现对PWM信号占空比的调节，即可实现电流、转速的双闭环控制。系统流程图如图3所示。</p><p>图3. 无刷直流电机双闭环控制系统框图</p></sec><sec id="s6"><title>4. 控制系统设计</title><p>无刷直流电机控制器以TMS320F2812控制器为核心，辅以提供电机换相信号的逆变电路和以驱动芯片为核心的驱动电路，组成无刷直流电机控制系统的核心，再加上外围电路，就可以实现比较完整的电机控制功能，并且控制器具有可编程性，工作过程中具有高可靠性(图4)。</p><p>图4. 基于DSP的无传感器控制系统组成</p></sec><sec id="s7"><title>5. 软件设计</title><p>在硬件系统的基础上，开发与之相适应的软件，完善整个控制系统的功能。软件主要实现的内容包括无刷直流电机的三段式启动过程、基于反电动势检测法的转子位置信息获取及换相信息输出、通过PID调节方法实现无刷直流电机的电流和转速双闭环控制以及PWM波形的发生。</p><sec id="s7_1"><title>5.1. 主程序</title><p>在无刷直流电机控制系统的主程序中，启动前对数字信号处理器进行初始化设置，清除上一次运行时残留的数据，完成主控芯片正常工作时的基本配置，确定外围电路的上电状态，以及对各个程序模块软件参数的初始化操作。启动电机时，通过开关接通电源，由静止开始启动，首先对无刷直流电机的转子进行两次预定位，以获得电机转子的初始位置信息。在转子的预定位完成后，电机逐渐加速，待电机转速升高到一定程度后，判断反电势检测电路能否检测到清晰准确的反电动势信号，若可以，则切换到电机的闭环运行状态 [<xref ref-type="bibr" rid="hanspub.29988-ref8">8</xref>] 。主程序流程图如图5所示。</p><p>图5. 主程序流程图</p></sec><sec id="s7_2"><title>5.2. 子程序设计</title><p>在电机反电动势检测电路中，电机定子端电压信号在经过滤波电路的处理之后会不可避免地产生相位延迟，因此需要在电机换相时根据相位补偿原则对反电动势过零点进行相位补偿，补偿角度可通过查阅计算得出的延迟时间表获得。完成相位补偿之后，通过PWM脉宽调制信号控制换相动作。换相程序流程图如图6所示。</p><p>图6. 电机换相程序流程图</p><p>无刷直流电机在无传感器环境下运行时，其转速信息可由控制器计算获得。在电机启动之后，通过检测未导通相和中性点之间的电压值为零确定是否过零点，再延迟对应的延迟角度，确定换相时刻。同时定时器进入工作状态，记录电机反电动势的过零点时刻。最后通过两次过零点的时间间隔即可得到电机的转速信息。同时本文所介绍的无刷直流电机控制系统采用速度、电流的双闭环控制，具体流程如图7所示。</p><p>图7. 反电动势检测及双闭环控制程序流程图</p><p>无刷直流电机运行过程中，根据其正确换相次数可计算得到电机的实际转速，将这个实际转速值称作参考速度。电机工作过程中，若其参考转速未达到人工设定转速，则需要增大PWM脉宽调制信号的占空比，提高电机实际转速；同理，当参考转速过高时，即可通过减小占空比来降速。通过此方法可以实现电机的调速功能。无刷电机的转速调节流程图如图8所示。</p><p>图8. 调速程序流程图</p></sec></sec><sec id="s8"><title>6. 建模仿真和综合调试</title><p>基于MATLAB/Simulink平台搭建无刷直流电机控制器仿真模型(见图9)，确定相关参数，验证控制器功能的有效性和可靠性。</p><p>图9. Simulink仿真模型图</p><p>对电机的实际工作情况和工作预期进行分析后，设置电机的电枢绕组的阻值为1 Ω，反电动势系数为0.048 V/(rad∙s<sup>−1</sup>)，磁极对数2，定子等效电感0.001 H，转动惯量为0.0025 kg∙m<sup>2</sup>，供电电源为直流24 V。</p><p>搭建的仿真模型包括电机本体模块、电压逆变模块、以及速度控制模块和电流滞环模块等，经过仿真得出了该电机的定子绕组电流、反电动势和转速波形图，见图10~图13。</p><p>图10. 绕组电流响应曲线</p><p>图11. 电机转矩响应曲线</p><p>图12. 电机反电动势响应曲线</p><p>通过仿真可以得到电机电枢绕组电流曲线、转矩曲线、反电动势曲线和转速响应曲线。从图中可以看出仿真模型产生的响应曲线符合设计要求，与理论分析一致，并且转速响应平稳，无超调，在静态、动态性能上能够满足要求。在突加3 N∙m的外力转矩时，电机转速降低，但能够很快恢复稳定状态。最后经过实验综合调试，得到实验数据如表1所示。</p><p>图13. 电机转速响应曲线</p><table-wrap id="table1" ><label><xref ref-type="table" rid="table1">Table 1</xref></label><caption><title> Experimental dat</title></caption><table><tbody><thead><tr><th align="center" valign="middle" >电压/V</th><th align="center" valign="middle" >电流/A</th><th align="center" valign="middle" >转速/rpm</th><th align="center" valign="middle" >电压/V</th><th align="center" valign="middle" >电流/A</th><th align="center" valign="middle" >转速/rpm</th></tr></thead><tr><td align="center" valign="middle" >0.00</td><td align="center" valign="middle" >0.00</td><td align="center" valign="middle" >0</td><td align="center" valign="middle" >4.00</td><td align="center" valign="middle" >0.43</td><td align="center" valign="middle" >97</td></tr><tr><td align="center" valign="middle" >8.00</td><td align="center" valign="middle" >0.86</td><td align="center" valign="middle" >473</td><td align="center" valign="middle" >12.00</td><td align="center" valign="middle" >1.29</td><td align="center" valign="middle" >1103</td></tr><tr><td align="center" valign="middle" >16.00</td><td align="center" valign="middle" >1.86</td><td align="center" valign="middle" >1647</td><td align="center" valign="middle" >20.00</td><td align="center" valign="middle" >2.16</td><td align="center" valign="middle" >2278</td></tr><tr><td align="center" valign="middle" >24.00</td><td align="center" valign="middle" >3.79</td><td align="center" valign="middle" >3000</td><td align="center" valign="middle" >28.00</td><td align="center" valign="middle" >4.43</td><td align="center" valign="middle" >3170</td></tr></tbody></table></table-wrap><p>表1. 实验数据</p><p>由表中数据可知，当电压达到4 V以上时电机开始转动，随着电压增加，转速不断提升，达到额定电压24 V时，电机达到额定转速3000 rpm，同时也可以看出加速过程中转速提升平稳。全速启动实验中，电机约4 s实现全转速启动。实验符合仿真预期，验证了电机能够高效快速启动，平稳运行，正确换向，证明了本次设计的控制策略在实践应用具有应用价值。</p></sec><sec id="s9"><title>7. 结语</title><p>本文介绍了基于DSP的无传感器无刷直流电机控制策略，解决了无刷电机的启动难问题，给出了转子位置检测方法和双闭环控制策略，并对电机的软件控制程序进行了设计和介绍，最后通过搭建仿真模型和实验验证，证明了所设计的控制策略能够满足实际运用的要求，具有实用性。</p></sec><sec id="s10"><title>文章引用</title><p>张宁,段富海,王炳,马欣,杨子鹤. 无刷直流电机控制策略及程序设计Design of Brushless DC Motor Control Strategy and Its Program[J]. 软件工程与应用, 2019, 08(02): 89-98. https://doi.org/10.12677/SEA.2019.82011</p></sec><sec id="s11"><title>参考文献</title></sec></body><back><ref-list><title>References</title><ref id="hanspub.29988-ref1"><label>1</label><mixed-citation publication-type="other" xlink:type="simple">奉华成, 皮佑国, 吴效明. MC68HC908GP32在无刷无传感器型直流电机控制中的应用[J]. 电子技术, 2002, 29(12): 7-11.</mixed-citation></ref><ref id="hanspub.29988-ref2"><label>2</label><mixed-citation publication-type="other" xlink:type="simple">王微子, 冼峰峰, 王敏, 等. 基于DSP的无位置传感器无刷直流电动机调速系统[J]. 微特电机, 2004, 32(7): 20-22.</mixed-citation></ref><ref id="hanspub.29988-ref3"><label>3</label><mixed-citation publication-type="other" xlink:type="simple">曹杰, 史金飞, 戴敏. 基于MEGA8单片机的无传感器无刷直流电机控制系统设计[J]. 自动化仪表, 2005, 26(12): 13-16.</mixed-citation></ref><ref id="hanspub.29988-ref4"><label>4</label><mixed-citation publication-type="other" xlink:type="simple">焦树盛, 张安妮, 赵容健, 等. 基于STM32的无刷直流电机无传感器控制[J]. 变频器世界, 2017(1): 92-95.</mixed-citation></ref><ref id="hanspub.29988-ref5"><label>5</label><mixed-citation publication-type="other" xlink:type="simple">魏志成. 基于DSP的永磁无刷直流电动机控制系统的研究[D]: [硕士学位论文]. 武汉: 武汉科技大学, 2012.</mixed-citation></ref><ref id="hanspub.29988-ref6"><label>6</label><mixed-citation publication-type="other" xlink:type="simple">於成业. 基于DSP无位置传感器无刷直流电机调速系统的研究[D]: [硕士学位论文]. 阜新: 辽宁工程技术大学, 2009.</mixed-citation></ref><ref id="hanspub.29988-ref7"><label>7</label><mixed-citation publication-type="other" xlink:type="simple">李强. 无位置传感器无刷直流电动机运行理论和控制系统研究[D]: [博士学位论文]. 南京: 东南大学, 2005.</mixed-citation></ref><ref id="hanspub.29988-ref8"><label>8</label><mixed-citation publication-type="other" xlink:type="simple">王大方, 于知杉, 金毅, 等. 无位置传感器无刷直流电机无硬件滤波转子位置检测方法[J]. 电工技术学报, 2017(19): 71-80.</mixed-citation></ref></ref-list></back></article>